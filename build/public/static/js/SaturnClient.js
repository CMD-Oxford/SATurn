var $global = typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this;
var console = $global.console || {log:function(){}};
var $hxClasses = $hxClasses || {},$estr = function() { return js.Boot.__string_rec(this,''); };
function $extend(from, fields) {
	function Inherit() {} Inherit.prototype = from; var proto = new Inherit();
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var EReg = $hxClasses["EReg"] = function(r,opt) {
	opt = opt.split("u").join("");
	this.r = new RegExp(r,opt);
	this.rs = r;
	this.opt = opt;
};
EReg.__name__ = ["EReg"];
EReg.prototype = {
	r: null
	,rs: null
	,opt: null
	,regenerate: function() {
		this.r = new RegExp(this.rs,this.opt);
	}
	,hxUnserialize: function(u) {
		this.rs = u.unserialize();
		this.opt = u.unserialize();
	}
	,hxSerialize: function(s) {
		s.serialize(this.rs);
		s.serialize(this.opt);
		this.regenerate();
	}
	,match: function(s) {
		if(this.r.global) this.r.lastIndex = 0;
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,matched: function(n) {
		if(this.r.m != null && n >= 0 && n < this.r.m.length) return this.r.m[n]; else throw new js._Boot.HaxeError("EReg::matched");
	}
	,matchedLeft: function() {
		if(this.r.m == null) throw new js._Boot.HaxeError("No string matched");
		return HxOverrides.substr(this.r.s,0,this.r.m.index);
	}
	,matchedRight: function() {
		if(this.r.m == null) throw new js._Boot.HaxeError("No string matched");
		var sz = this.r.m.index + this.r.m[0].length;
		return HxOverrides.substr(this.r.s,sz,this.r.s.length - sz);
	}
	,matchedPos: function() {
		if(this.r.m == null) throw new js._Boot.HaxeError("No string matched");
		return { pos : this.r.m.index, len : this.r.m[0].length};
	}
	,matchSub: function(s,pos,len) {
		if(len == null) len = -1;
		if(this.r.global) {
			this.r.lastIndex = pos;
			this.r.m = this.r.exec(len < 0?s:HxOverrides.substr(s,0,pos + len));
			var b = this.r.m != null;
			if(b) this.r.s = s;
			return b;
		} else {
			var b1 = this.match(len < 0?HxOverrides.substr(s,pos,null):HxOverrides.substr(s,pos,len));
			if(b1) {
				this.r.s = s;
				this.r.m.index += pos;
			}
			return b1;
		}
	}
	,split: function(s) {
		var d = "#__delim__#";
		return s.replace(this.r,d).split(d);
	}
	,replace: function(s,by) {
		return s.replace(this.r,by);
	}
	,__class__: EReg
};
var HxOverrides = $hxClasses["HxOverrides"] = function() { };
HxOverrides.__name__ = ["HxOverrides"];
HxOverrides.strDate = function(s) {
	var _g = s.length;
	switch(_g) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d.setTime(0);
		d.setUTCHours(k[0]);
		d.setUTCMinutes(k[1]);
		d.setUTCSeconds(k[2]);
		return d;
	case 10:
		var k1 = s.split("-");
		return new Date(k1[0],k1[1] - 1,k1[2],0,0,0);
	case 19:
		var k2 = s.split(" ");
		var y = k2[0].split("-");
		var t = k2[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw new js._Boot.HaxeError("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) return undefined;
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(pos != null && pos != 0 && len != null && len < 0) return "";
	if(len == null) len = s.length;
	if(pos < 0) {
		pos = s.length + pos;
		if(pos < 0) pos = 0;
	} else if(len < 0) len = s.length + len - pos;
	return s.substr(pos,len);
};
HxOverrides.indexOf = function(a,obj,i) {
	var len = a.length;
	if(i < 0) {
		i += len;
		if(i < 0) i = 0;
	}
	while(i < len) {
		if(a[i] === obj) return i;
		i++;
	}
	return -1;
};
HxOverrides.remove = function(a,obj) {
	var i = HxOverrides.indexOf(a,obj,0);
	if(i == -1) return false;
	a.splice(i,1);
	return true;
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var Lambda = $hxClasses["Lambda"] = function() { };
Lambda.__name__ = ["Lambda"];
Lambda.exists = function(it,f) {
	var $it0 = $iterator(it)();
	while( $it0.hasNext() ) {
		var x = $it0.next();
		if(f(x)) return true;
	}
	return false;
};
Lambda.filter = function(it,f) {
	var l = new List();
	var $it0 = $iterator(it)();
	while( $it0.hasNext() ) {
		var x = $it0.next();
		if(f(x)) l.add(x);
	}
	return l;
};
Lambda.count = function(it,pred) {
	var n = 0;
	if(pred == null) {
		var $it0 = $iterator(it)();
		while( $it0.hasNext() ) {
			var _ = $it0.next();
			n++;
		}
	} else {
		var $it1 = $iterator(it)();
		while( $it1.hasNext() ) {
			var x = $it1.next();
			if(pred(x)) n++;
		}
	}
	return n;
};
var List = $hxClasses["List"] = function() {
	this.length = 0;
};
List.__name__ = ["List"];
List.prototype = {
	h: null
	,q: null
	,length: null
	,add: function(item) {
		var x = [item];
		if(this.h == null) this.h = x; else this.q[1] = x;
		this.q = x;
		this.length++;
	}
	,push: function(item) {
		var x = [item,this.h];
		this.h = x;
		if(this.q == null) this.q = x;
		this.length++;
	}
	,first: function() {
		if(this.h == null) return null; else return this.h[0];
	}
	,isEmpty: function() {
		return this.h == null;
	}
	,remove: function(v) {
		var prev = null;
		var l = this.h;
		while(l != null) {
			if(l[0] == v) {
				if(prev == null) this.h = l[1]; else prev[1] = l[1];
				if(this.q == l) this.q = prev;
				this.length--;
				return true;
			}
			prev = l;
			l = l[1];
		}
		return false;
	}
	,iterator: function() {
		return new _List.ListIterator(this.h);
	}
	,__class__: List
};
var _List = _List || {};
_List.ListIterator = $hxClasses["_List.ListIterator"] = function(head) {
	this.head = head;
	this.val = null;
};
_List.ListIterator.__name__ = ["_List","ListIterator"];
_List.ListIterator.prototype = {
	head: null
	,val: null
	,hasNext: function() {
		return this.head != null;
	}
	,next: function() {
		this.val = this.head[0];
		this.head = this.head[1];
		return this.val;
	}
	,__class__: _List.ListIterator
};
Math.__name__ = ["Math"];
var Reflect = $hxClasses["Reflect"] = function() { };
Reflect.__name__ = ["Reflect"];
Reflect.hasField = function(o,field) {
	return Object.prototype.hasOwnProperty.call(o,field);
};
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( e ) {
		if (e instanceof js._Boot.HaxeError) e = e.val;
		return null;
	}
};
Reflect.setField = function(o,field,value) {
	o[field] = value;
};
Reflect.callMethod = function(o,func,args) {
	return func.apply(o,args);
};
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) a.push(f);
		}
	}
	return a;
};
Reflect.isFunction = function(f) {
	return typeof(f) == "function" && !(f.__name__ || f.__ename__);
};
Reflect.compare = function(a,b) {
	if(a == b) return 0; else if(a > b) return 1; else return -1;
};
Reflect.deleteField = function(o,field) {
	if(!Object.prototype.hasOwnProperty.call(o,field)) return false;
	delete(o[field]);
	return true;
};
var Std = $hxClasses["Std"] = function() { };
Std.__name__ = ["Std"];
Std["is"] = function(v,t) {
	return js.Boot.__instanceof(v,t);
};
Std.string = function(s) {
	return js.Boot.__string_rec(s,"");
};
Std["int"] = function(x) {
	return x | 0;
};
Std.parseInt = function(x) {
	var v = parseInt(x,10);
	if(v == 0 && (HxOverrides.cca(x,1) == 120 || HxOverrides.cca(x,1) == 88)) v = parseInt(x);
	if(isNaN(v)) return null;
	return v;
};
Std.parseFloat = function(x) {
	return parseFloat(x);
};
var StringBuf = $hxClasses["StringBuf"] = function() {
	this.b = "";
};
StringBuf.__name__ = ["StringBuf"];
StringBuf.prototype = {
	b: null
	,add: function(x) {
		this.b += Std.string(x);
	}
	,toString: function() {
		return this.b;
	}
	,__class__: StringBuf
};
var StringTools = $hxClasses["StringTools"] = function() { };
StringTools.__name__ = ["StringTools"];
StringTools.startsWith = function(s,start) {
	return s.length >= start.length && HxOverrides.substr(s,0,start.length) == start;
};
StringTools.endsWith = function(s,end) {
	var elen = end.length;
	var slen = s.length;
	return slen >= elen && HxOverrides.substr(s,slen - elen,elen) == end;
};
StringTools.lpad = function(s,c,l) {
	if(c.length <= 0) return s;
	while(s.length < l) s = c + s;
	return s;
};
StringTools.replace = function(s,sub,by) {
	return s.split(sub).join(by);
};
StringTools.fastCodeAt = function(s,index) {
	return s.charCodeAt(index);
};
var ValueType = $hxClasses["ValueType"] = { __ename__ : ["ValueType"], __constructs__ : ["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"] };
ValueType.TNull = ["TNull",0];
ValueType.TNull.toString = $estr;
ValueType.TNull.__enum__ = ValueType;
ValueType.TInt = ["TInt",1];
ValueType.TInt.toString = $estr;
ValueType.TInt.__enum__ = ValueType;
ValueType.TFloat = ["TFloat",2];
ValueType.TFloat.toString = $estr;
ValueType.TFloat.__enum__ = ValueType;
ValueType.TBool = ["TBool",3];
ValueType.TBool.toString = $estr;
ValueType.TBool.__enum__ = ValueType;
ValueType.TObject = ["TObject",4];
ValueType.TObject.toString = $estr;
ValueType.TObject.__enum__ = ValueType;
ValueType.TFunction = ["TFunction",5];
ValueType.TFunction.toString = $estr;
ValueType.TFunction.__enum__ = ValueType;
ValueType.TClass = function(c) { var $x = ["TClass",6,c]; $x.__enum__ = ValueType; $x.toString = $estr; return $x; };
ValueType.TEnum = function(e) { var $x = ["TEnum",7,e]; $x.__enum__ = ValueType; $x.toString = $estr; return $x; };
ValueType.TUnknown = ["TUnknown",8];
ValueType.TUnknown.toString = $estr;
ValueType.TUnknown.__enum__ = ValueType;
var Type = $hxClasses["Type"] = function() { };
Type.__name__ = ["Type"];
Type.getClass = function(o) {
	if(o == null) return null; else return js.Boot.getClass(o);
};
Type.getClassName = function(c) {
	var a = c.__name__;
	if(a == null) return null;
	return a.join(".");
};
Type.getEnumName = function(e) {
	var a = e.__ename__;
	return a.join(".");
};
Type.resolveClass = function(name) {
	var cl = $hxClasses[name];
	if(cl == null || !cl.__name__) return null;
	return cl;
};
Type.resolveEnum = function(name) {
	var e = $hxClasses[name];
	if(e == null || !e.__ename__) return null;
	return e;
};
Type.createInstance = function(cl,args) {
	var _g = args.length;
	switch(_g) {
	case 0:
		return new cl();
	case 1:
		return new cl(args[0]);
	case 2:
		return new cl(args[0],args[1]);
	case 3:
		return new cl(args[0],args[1],args[2]);
	case 4:
		return new cl(args[0],args[1],args[2],args[3]);
	case 5:
		return new cl(args[0],args[1],args[2],args[3],args[4]);
	case 6:
		return new cl(args[0],args[1],args[2],args[3],args[4],args[5]);
	case 7:
		return new cl(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);
	case 8:
		return new cl(args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);
	default:
		throw new js._Boot.HaxeError("Too many arguments");
	}
	return null;
};
Type.createEmptyInstance = function(cl) {
	function empty() {}; empty.prototype = cl.prototype;
	return new empty();
};
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) throw new js._Boot.HaxeError("No such constructor " + constr);
	if(Reflect.isFunction(f)) {
		if(params == null) throw new js._Boot.HaxeError("Constructor " + constr + " need parameters");
		return Reflect.callMethod(e,f,params);
	}
	if(params != null && params.length != 0) throw new js._Boot.HaxeError("Constructor " + constr + " does not need parameters");
	return f;
};
Type.getInstanceFields = function(c) {
	var a = [];
	for(var i in c.prototype) a.push(i);
	HxOverrides.remove(a,"__class__");
	HxOverrides.remove(a,"__properties__");
	return a;
};
Type.getClassFields = function(c) {
	var a = Reflect.fields(c);
	HxOverrides.remove(a,"__name__");
	HxOverrides.remove(a,"__interfaces__");
	HxOverrides.remove(a,"__properties__");
	HxOverrides.remove(a,"__super__");
	HxOverrides.remove(a,"__meta__");
	HxOverrides.remove(a,"prototype");
	return a;
};
Type.getEnumConstructs = function(e) {
	var a = e.__constructs__;
	return a.slice();
};
Type["typeof"] = function(v) {
	var _g = typeof(v);
	switch(_g) {
	case "boolean":
		return ValueType.TBool;
	case "string":
		return ValueType.TClass(String);
	case "number":
		if(Math.ceil(v) == v % 2147483648.0) return ValueType.TInt;
		return ValueType.TFloat;
	case "object":
		if(v == null) return ValueType.TNull;
		var e = v.__enum__;
		if(e != null) return ValueType.TEnum(e);
		var c = js.Boot.getClass(v);
		if(c != null) return ValueType.TClass(c);
		return ValueType.TObject;
	case "function":
		if(v.__name__ || v.__ename__) return ValueType.TObject;
		return ValueType.TFunction;
	case "undefined":
		return ValueType.TNull;
	default:
		return ValueType.TUnknown;
	}
};
var bindings = bindings || {};
bindings.NodeSocket = $hxClasses["bindings.NodeSocket"] = function(nativeSocket) {
	this.theNativeSocket = nativeSocket;
};
bindings.NodeSocket.__name__ = ["bindings","NodeSocket"];
bindings.NodeSocket.prototype = {
	theNativeSocket: null
	,id: null
	,on: function(command,func) {
		this.theNativeSocket.on(command,func);
	}
	,emit: function(command,obj) {
		this.theNativeSocket.emit(command,obj);
	}
	,getId: function() {
		return this.theNativeSocket.id;
	}
	,disconnect: function() {
		this.theNativeSocket.disconnect();
	}
	,__class__: bindings.NodeSocket
};
var haxe = haxe || {};
haxe.IMap = $hxClasses["haxe.IMap"] = function() { };
haxe.IMap.__name__ = ["haxe","IMap"];
haxe.IMap.prototype = {
	get: null
	,set: null
	,exists: null
	,remove: null
	,keys: null
	,iterator: null
	,__class__: haxe.IMap
};
haxe.Http = $hxClasses["haxe.Http"] = function(url) {
	this.url = url;
	this.headers = new List();
	this.params = new List();
	this.async = true;
};
haxe.Http.__name__ = ["haxe","Http"];
haxe.Http.prototype = {
	url: null
	,responseData: null
	,async: null
	,postData: null
	,headers: null
	,params: null
	,setParameter: function(param,value) {
		this.params = Lambda.filter(this.params,function(p) {
			return p.param != param;
		});
		this.params.push({ param : param, value : value});
		return this;
	}
	,req: null
	,request: function(post) {
		var me = this;
		me.responseData = null;
		var r = this.req = js.Browser.createXMLHttpRequest();
		var onreadystatechange = function(_) {
			if(r.readyState != 4) return;
			var s;
			try {
				s = r.status;
			} catch( e ) {
				if (e instanceof js._Boot.HaxeError) e = e.val;
				s = null;
			}
			if(s != null) {
				var protocol = window.location.protocol.toLowerCase();
				var rlocalProtocol = new EReg("^(?:about|app|app-storage|.+-extension|file|res|widget):$","");
				var isLocal = rlocalProtocol.match(protocol);
				if(isLocal) if(r.responseText != null) s = 200; else s = 404;
			}
			if(s == undefined) s = null;
			if(s != null) me.onStatus(s);
			if(s != null && s >= 200 && s < 400) {
				me.req = null;
				me.onData(me.responseData = r.responseText);
			} else if(s == null) {
				me.req = null;
				me.onError("Failed to connect or resolve host");
			} else switch(s) {
			case 12029:
				me.req = null;
				me.onError("Failed to connect to host");
				break;
			case 12007:
				me.req = null;
				me.onError("Unknown host");
				break;
			default:
				me.req = null;
				me.responseData = r.responseText;
				me.onError("Http Error #" + r.status);
			}
		};
		if(this.async) r.onreadystatechange = onreadystatechange;
		var uri = this.postData;
		if(uri != null) post = true; else {
			var _g_head = this.params.h;
			var _g_val = null;
			while(_g_head != null) {
				var p;
				p = (function($this) {
					var $r;
					_g_val = _g_head[0];
					_g_head = _g_head[1];
					$r = _g_val;
					return $r;
				}(this));
				if(uri == null) uri = ""; else uri += "&";
				uri += encodeURIComponent(p.param) + "=" + encodeURIComponent(p.value);
			}
		}
		try {
			if(post) r.open("POST",this.url,this.async); else if(uri != null) {
				var question = this.url.split("?").length <= 1;
				r.open("GET",this.url + (question?"?":"&") + uri,this.async);
				uri = null;
			} else r.open("GET",this.url,this.async);
		} catch( e1 ) {
			if (e1 instanceof js._Boot.HaxeError) e1 = e1.val;
			me.req = null;
			this.onError(e1.toString());
			return;
		}
		if(!Lambda.exists(this.headers,function(h) {
			return h.header == "Content-Type";
		}) && post && this.postData == null) r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
		var _g_head1 = this.headers.h;
		var _g_val1 = null;
		while(_g_head1 != null) {
			var h1;
			h1 = (function($this) {
				var $r;
				_g_val1 = _g_head1[0];
				_g_head1 = _g_head1[1];
				$r = _g_val1;
				return $r;
			}(this));
			r.setRequestHeader(h1.header,h1.value);
		}
		r.send(uri);
		if(!this.async) onreadystatechange(null);
	}
	,onData: function(data) {
	}
	,onError: function(msg) {
	}
	,onStatus: function(status) {
	}
	,__class__: haxe.Http
};
if(!haxe._Int64) haxe._Int64 = {};
haxe._Int64.___Int64 = $hxClasses["haxe._Int64.___Int64"] = function(high,low) {
	this.high = high;
	this.low = low;
};
haxe._Int64.___Int64.__name__ = ["haxe","_Int64","___Int64"];
haxe._Int64.___Int64.prototype = {
	high: null
	,low: null
	,__class__: haxe._Int64.___Int64
};
haxe.Serializer = $hxClasses["haxe.Serializer"] = function() {
	this.buf = new StringBuf();
	this.cache = [];
	this.useCache = haxe.Serializer.USE_CACHE;
	this.useEnumIndex = haxe.Serializer.USE_ENUM_INDEX;
	this.shash = new haxe.ds.StringMap();
	this.scount = 0;
};
haxe.Serializer.__name__ = ["haxe","Serializer"];
haxe.Serializer.run = function(v) {
	var s = new haxe.Serializer();
	s.serialize(v);
	return s.toString();
};
haxe.Serializer.prototype = {
	buf: null
	,cache: null
	,shash: null
	,scount: null
	,useCache: null
	,useEnumIndex: null
	,toString: function() {
		return this.buf.b;
	}
	,serializeString: function(s) {
		var x = this.shash.get(s);
		if(x != null) {
			this.buf.b += "R";
			if(x == null) this.buf.b += "null"; else this.buf.b += "" + x;
			return;
		}
		this.shash.set(s,this.scount++);
		this.buf.b += "y";
		s = encodeURIComponent(s);
		if(s.length == null) this.buf.b += "null"; else this.buf.b += "" + s.length;
		this.buf.b += ":";
		if(s == null) this.buf.b += "null"; else this.buf.b += "" + s;
	}
	,serializeRef: function(v) {
		var vt = typeof(v);
		var _g1 = 0;
		var _g = this.cache.length;
		while(_g1 < _g) {
			var i = _g1++;
			var ci = this.cache[i];
			if(typeof(ci) == vt && ci == v) {
				this.buf.b += "r";
				if(i == null) this.buf.b += "null"; else this.buf.b += "" + i;
				return true;
			}
		}
		this.cache.push(v);
		return false;
	}
	,serializeFields: function(v) {
		var _g = 0;
		var _g1 = Reflect.fields(v);
		while(_g < _g1.length) {
			var f = _g1[_g];
			++_g;
			this.serializeString(f);
			this.serialize(Reflect.field(v,f));
		}
		this.buf.b += "g";
	}
	,serialize: function(v) {
		{
			var _g = Type["typeof"](v);
			switch(_g[1]) {
			case 0:
				this.buf.b += "n";
				break;
			case 1:
				var v1 = v;
				if(v1 == 0) {
					this.buf.b += "z";
					return;
				}
				this.buf.b += "i";
				if(v1 == null) this.buf.b += "null"; else this.buf.b += "" + v1;
				break;
			case 2:
				var v2 = v;
				if(isNaN(v2)) this.buf.b += "k"; else if(!isFinite(v2)) if(v2 < 0) this.buf.b += "m"; else this.buf.b += "p"; else {
					this.buf.b += "d";
					if(v2 == null) this.buf.b += "null"; else this.buf.b += "" + v2;
				}
				break;
			case 3:
				if(v) this.buf.b += "t"; else this.buf.b += "f";
				break;
			case 6:
				var c = _g[2];
				if(c == String) {
					this.serializeString(v);
					return;
				}
				if(this.useCache && this.serializeRef(v)) return;
				switch(c) {
				case Array:
					var ucount = 0;
					this.buf.b += "a";
					var l = v.length;
					var _g1 = 0;
					while(_g1 < l) {
						var i = _g1++;
						if(v[i] == null) ucount++; else {
							if(ucount > 0) {
								if(ucount == 1) this.buf.b += "n"; else {
									this.buf.b += "u";
									if(ucount == null) this.buf.b += "null"; else this.buf.b += "" + ucount;
								}
								ucount = 0;
							}
							this.serialize(v[i]);
						}
					}
					if(ucount > 0) {
						if(ucount == 1) this.buf.b += "n"; else {
							this.buf.b += "u";
							if(ucount == null) this.buf.b += "null"; else this.buf.b += "" + ucount;
						}
					}
					this.buf.b += "h";
					break;
				case List:
					this.buf.b += "l";
					var v3 = v;
					var _g1_head = v3.h;
					var _g1_val = null;
					while(_g1_head != null) {
						var i1;
						_g1_val = _g1_head[0];
						_g1_head = _g1_head[1];
						i1 = _g1_val;
						this.serialize(i1);
					}
					this.buf.b += "h";
					break;
				case Date:
					var d = v;
					this.buf.b += "v";
					this.buf.add(d.getTime());
					break;
				case haxe.ds.StringMap:
					this.buf.b += "b";
					var v4 = v;
					var $it0 = v4.keys();
					while( $it0.hasNext() ) {
						var k = $it0.next();
						this.serializeString(k);
						this.serialize(__map_reserved[k] != null?v4.getReserved(k):v4.h[k]);
					}
					this.buf.b += "h";
					break;
				case haxe.ds.IntMap:
					this.buf.b += "q";
					var v5 = v;
					var $it1 = v5.keys();
					while( $it1.hasNext() ) {
						var k1 = $it1.next();
						this.buf.b += ":";
						if(k1 == null) this.buf.b += "null"; else this.buf.b += "" + k1;
						this.serialize(v5.h[k1]);
					}
					this.buf.b += "h";
					break;
				case haxe.ds.ObjectMap:
					this.buf.b += "M";
					var v6 = v;
					var $it2 = v6.keys();
					while( $it2.hasNext() ) {
						var k2 = $it2.next();
						var id = Reflect.field(k2,"__id__");
						Reflect.deleteField(k2,"__id__");
						this.serialize(k2);
						k2.__id__ = id;
						this.serialize(v6.h[k2.__id__]);
					}
					this.buf.b += "h";
					break;
				case haxe.io.Bytes:
					var v7 = v;
					var i2 = 0;
					var max = v7.length - 2;
					var charsBuf = new StringBuf();
					var b64 = haxe.Serializer.BASE64;
					while(i2 < max) {
						var b1 = v7.get(i2++);
						var b2 = v7.get(i2++);
						var b3 = v7.get(i2++);
						charsBuf.add(b64.charAt(b1 >> 2));
						charsBuf.add(b64.charAt((b1 << 4 | b2 >> 4) & 63));
						charsBuf.add(b64.charAt((b2 << 2 | b3 >> 6) & 63));
						charsBuf.add(b64.charAt(b3 & 63));
					}
					if(i2 == max) {
						var b11 = v7.get(i2++);
						var b21 = v7.get(i2++);
						charsBuf.add(b64.charAt(b11 >> 2));
						charsBuf.add(b64.charAt((b11 << 4 | b21 >> 4) & 63));
						charsBuf.add(b64.charAt(b21 << 2 & 63));
					} else if(i2 == max + 1) {
						var b12 = v7.get(i2++);
						charsBuf.add(b64.charAt(b12 >> 2));
						charsBuf.add(b64.charAt(b12 << 4 & 63));
					}
					var chars = charsBuf.b;
					this.buf.b += "s";
					if(chars.length == null) this.buf.b += "null"; else this.buf.b += "" + chars.length;
					this.buf.b += ":";
					if(chars == null) this.buf.b += "null"; else this.buf.b += "" + chars;
					break;
				default:
					if(this.useCache) this.cache.pop();
					if(v.hxSerialize != null) {
						this.buf.b += "C";
						this.serializeString(Type.getClassName(c));
						if(this.useCache) this.cache.push(v);
						v.hxSerialize(this);
						this.buf.b += "g";
					} else {
						this.buf.b += "c";
						this.serializeString(Type.getClassName(c));
						if(this.useCache) this.cache.push(v);
						this.serializeFields(v);
					}
				}
				break;
			case 4:
				if(js.Boot.__instanceof(v,Class)) {
					var className = Type.getClassName(v);
					this.buf.b += "A";
					this.serializeString(className);
				} else if(js.Boot.__instanceof(v,Enum)) {
					this.buf.b += "B";
					this.serializeString(Type.getEnumName(v));
				} else {
					if(this.useCache && this.serializeRef(v)) return;
					this.buf.b += "o";
					this.serializeFields(v);
				}
				break;
			case 7:
				var e = _g[2];
				if(this.useCache) {
					if(this.serializeRef(v)) return;
					this.cache.pop();
				}
				if(this.useEnumIndex) this.buf.b += "j"; else this.buf.b += "w";
				this.serializeString(Type.getEnumName(e));
				if(this.useEnumIndex) {
					this.buf.b += ":";
					this.buf.b += Std.string(v[1]);
				} else this.serializeString(v[0]);
				this.buf.b += ":";
				var l1 = v.length;
				this.buf.b += Std.string(l1 - 2);
				var _g11 = 2;
				while(_g11 < l1) {
					var i3 = _g11++;
					this.serialize(v[i3]);
				}
				if(this.useCache) this.cache.push(v);
				break;
			case 5:
				throw new js._Boot.HaxeError("Cannot serialize function");
				break;
			default:
				throw new js._Boot.HaxeError("Cannot serialize " + Std.string(v));
			}
		}
	}
	,__class__: haxe.Serializer
};
haxe.Timer = $hxClasses["haxe.Timer"] = function(time_ms) {
	var me = this;
	this.id = setInterval(function() {
		me.run();
	},time_ms);
};
haxe.Timer.__name__ = ["haxe","Timer"];
haxe.Timer.delay = function(f,time_ms) {
	var t = new haxe.Timer(time_ms);
	t.run = function() {
		t.stop();
		f();
	};
	return t;
};
haxe.Timer.prototype = {
	id: null
	,stop: function() {
		if(this.id == null) return;
		clearInterval(this.id);
		this.id = null;
	}
	,run: function() {
	}
	,__class__: haxe.Timer
};
haxe.Unserializer = $hxClasses["haxe.Unserializer"] = function(buf) {
	this.buf = buf;
	this.length = buf.length;
	this.pos = 0;
	this.scache = [];
	this.cache = [];
	var r = haxe.Unserializer.DEFAULT_RESOLVER;
	if(r == null) {
		r = Type;
		haxe.Unserializer.DEFAULT_RESOLVER = r;
	}
	this.setResolver(r);
};
haxe.Unserializer.__name__ = ["haxe","Unserializer"];
haxe.Unserializer.initCodes = function() {
	var codes = [];
	var _g1 = 0;
	var _g = haxe.Unserializer.BASE64.length;
	while(_g1 < _g) {
		var i = _g1++;
		codes[haxe.Unserializer.BASE64.charCodeAt(i)] = i;
	}
	return codes;
};
haxe.Unserializer.run = function(v) {
	return new haxe.Unserializer(v).unserialize();
};
haxe.Unserializer.prototype = {
	buf: null
	,pos: null
	,length: null
	,cache: null
	,scache: null
	,resolver: null
	,setResolver: function(r) {
		if(r == null) this.resolver = { resolveClass : function(_) {
			return null;
		}, resolveEnum : function(_1) {
			return null;
		}}; else this.resolver = r;
	}
	,get: function(p) {
		return this.buf.charCodeAt(p);
	}
	,readDigits: function() {
		var k = 0;
		var s = false;
		var fpos = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c != c) break;
			if(c == 45) {
				if(this.pos != fpos) break;
				s = true;
				this.pos++;
				continue;
			}
			if(c < 48 || c > 57) break;
			k = k * 10 + (c - 48);
			this.pos++;
		}
		if(s) k *= -1;
		return k;
	}
	,readFloat: function() {
		var p1 = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c >= 43 && c < 58 || c == 101 || c == 69) this.pos++; else break;
		}
		return Std.parseFloat(HxOverrides.substr(this.buf,p1,this.pos - p1));
	}
	,unserializeObject: function(o) {
		while(true) {
			if(this.pos >= this.length) throw new js._Boot.HaxeError("Invalid object");
			if(this.buf.charCodeAt(this.pos) == 103) break;
			var k = this.unserialize();
			if(!(typeof(k) == "string")) throw new js._Boot.HaxeError("Invalid object key");
			var v = this.unserialize();
			o[k] = v;
		}
		this.pos++;
	}
	,unserializeEnum: function(edecl,tag) {
		if(this.get(this.pos++) != 58) throw new js._Boot.HaxeError("Invalid enum format");
		var nargs = this.readDigits();
		if(nargs == 0) return Type.createEnum(edecl,tag);
		var args = [];
		while(nargs-- > 0) args.push(this.unserialize());
		return Type.createEnum(edecl,tag,args);
	}
	,unserialize: function() {
		var _g = this.get(this.pos++);
		switch(_g) {
		case 110:
			return null;
		case 116:
			return true;
		case 102:
			return false;
		case 122:
			return 0;
		case 105:
			return this.readDigits();
		case 100:
			return this.readFloat();
		case 121:
			var len = this.readDigits();
			if(this.get(this.pos++) != 58 || this.length - this.pos < len) throw new js._Boot.HaxeError("Invalid string length");
			var s = HxOverrides.substr(this.buf,this.pos,len);
			this.pos += len;
			s = decodeURIComponent(s.split("+").join(" "));
			this.scache.push(s);
			return s;
		case 107:
			return NaN;
		case 109:
			return -Infinity;
		case 112:
			return Infinity;
		case 97:
			var buf = this.buf;
			var a = [];
			this.cache.push(a);
			while(true) {
				var c = this.buf.charCodeAt(this.pos);
				if(c == 104) {
					this.pos++;
					break;
				}
				if(c == 117) {
					this.pos++;
					var n = this.readDigits();
					a[a.length + n - 1] = null;
				} else a.push(this.unserialize());
			}
			return a;
		case 111:
			var o = { };
			this.cache.push(o);
			this.unserializeObject(o);
			return o;
		case 114:
			var n1 = this.readDigits();
			if(n1 < 0 || n1 >= this.cache.length) throw new js._Boot.HaxeError("Invalid reference");
			return this.cache[n1];
		case 82:
			var n2 = this.readDigits();
			if(n2 < 0 || n2 >= this.scache.length) throw new js._Boot.HaxeError("Invalid string reference");
			return this.scache[n2];
		case 120:
			throw new js._Boot.HaxeError(this.unserialize());
			break;
		case 99:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) throw new js._Boot.HaxeError("Class not found " + name);
			var o1 = Type.createEmptyInstance(cl);
			this.cache.push(o1);
			this.unserializeObject(o1);
			return o1;
		case 119:
			var name1 = this.unserialize();
			var edecl = this.resolver.resolveEnum(name1);
			if(edecl == null) throw new js._Boot.HaxeError("Enum not found " + name1);
			var e = this.unserializeEnum(edecl,this.unserialize());
			this.cache.push(e);
			return e;
		case 106:
			var name2 = this.unserialize();
			var edecl1 = this.resolver.resolveEnum(name2);
			if(edecl1 == null) throw new js._Boot.HaxeError("Enum not found " + name2);
			this.pos++;
			var index = this.readDigits();
			var tag = Type.getEnumConstructs(edecl1)[index];
			if(tag == null) throw new js._Boot.HaxeError("Unknown enum index " + name2 + "@" + index);
			var e1 = this.unserializeEnum(edecl1,tag);
			this.cache.push(e1);
			return e1;
		case 108:
			var l = new List();
			this.cache.push(l);
			var buf1 = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) l.add(this.unserialize());
			this.pos++;
			return l;
		case 98:
			var h = new haxe.ds.StringMap();
			this.cache.push(h);
			var buf2 = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) {
				var s1 = this.unserialize();
				h.set(s1,this.unserialize());
			}
			this.pos++;
			return h;
		case 113:
			var h1 = new haxe.ds.IntMap();
			this.cache.push(h1);
			var buf3 = this.buf;
			var c1 = this.get(this.pos++);
			while(c1 == 58) {
				var i = this.readDigits();
				h1.set(i,this.unserialize());
				c1 = this.get(this.pos++);
			}
			if(c1 != 104) throw new js._Boot.HaxeError("Invalid IntMap format");
			return h1;
		case 77:
			var h2 = new haxe.ds.ObjectMap();
			this.cache.push(h2);
			var buf4 = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) {
				var s2 = this.unserialize();
				h2.set(s2,this.unserialize());
			}
			this.pos++;
			return h2;
		case 118:
			var d;
			if(this.buf.charCodeAt(this.pos) >= 48 && this.buf.charCodeAt(this.pos) <= 57 && this.buf.charCodeAt(this.pos + 1) >= 48 && this.buf.charCodeAt(this.pos + 1) <= 57 && this.buf.charCodeAt(this.pos + 2) >= 48 && this.buf.charCodeAt(this.pos + 2) <= 57 && this.buf.charCodeAt(this.pos + 3) >= 48 && this.buf.charCodeAt(this.pos + 3) <= 57 && this.buf.charCodeAt(this.pos + 4) == 45) {
				var s3 = HxOverrides.substr(this.buf,this.pos,19);
				d = HxOverrides.strDate(s3);
				this.pos += 19;
			} else {
				var t = this.readFloat();
				var d1 = new Date();
				d1.setTime(t);
				d = d1;
			}
			this.cache.push(d);
			return d;
		case 115:
			var len1 = this.readDigits();
			var buf5 = this.buf;
			if(this.get(this.pos++) != 58 || this.length - this.pos < len1) throw new js._Boot.HaxeError("Invalid bytes length");
			var codes = haxe.Unserializer.CODES;
			if(codes == null) {
				codes = haxe.Unserializer.initCodes();
				haxe.Unserializer.CODES = codes;
			}
			var i1 = this.pos;
			var rest = len1 & 3;
			var size;
			size = (len1 >> 2) * 3 + (rest >= 2?rest - 1:0);
			var max = i1 + (len1 - rest);
			var bytes = haxe.io.Bytes.alloc(size);
			var bpos = 0;
			while(i1 < max) {
				var c11 = codes[StringTools.fastCodeAt(buf5,i1++)];
				var c2 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c11 << 2 | c2 >> 4);
				var c3 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c2 << 4 | c3 >> 2);
				var c4 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c3 << 6 | c4);
			}
			if(rest >= 2) {
				var c12 = codes[StringTools.fastCodeAt(buf5,i1++)];
				var c21 = codes[StringTools.fastCodeAt(buf5,i1++)];
				bytes.set(bpos++,c12 << 2 | c21 >> 4);
				if(rest == 3) {
					var c31 = codes[StringTools.fastCodeAt(buf5,i1++)];
					bytes.set(bpos++,c21 << 4 | c31 >> 2);
				}
			}
			this.pos += len1;
			this.cache.push(bytes);
			return bytes;
		case 67:
			var name3 = this.unserialize();
			var cl1 = this.resolver.resolveClass(name3);
			if(cl1 == null) throw new js._Boot.HaxeError("Class not found " + name3);
			var o2 = Type.createEmptyInstance(cl1);
			this.cache.push(o2);
			o2.hxUnserialize(this);
			if(this.get(this.pos++) != 103) throw new js._Boot.HaxeError("Invalid custom data");
			return o2;
		case 65:
			var name4 = this.unserialize();
			var cl2 = this.resolver.resolveClass(name4);
			if(cl2 == null) throw new js._Boot.HaxeError("Class not found " + name4);
			return cl2;
		case 66:
			var name5 = this.unserialize();
			var e2 = this.resolver.resolveEnum(name5);
			if(e2 == null) throw new js._Boot.HaxeError("Enum not found " + name5);
			return e2;
		default:
		}
		this.pos--;
		throw new js._Boot.HaxeError("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
	}
	,__class__: haxe.Unserializer
};
if(!haxe.crypto) haxe.crypto = {};
haxe.crypto.Md5 = $hxClasses["haxe.crypto.Md5"] = function() {
};
haxe.crypto.Md5.__name__ = ["haxe","crypto","Md5"];
haxe.crypto.Md5.encode = function(s) {
	var m = new haxe.crypto.Md5();
	var h = m.doEncode(haxe.crypto.Md5.str2blks(s));
	return m.hex(h);
};
haxe.crypto.Md5.str2blks = function(str) {
	var nblk = (str.length + 8 >> 6) + 1;
	var blks = [];
	var blksSize = nblk * 16;
	var _g = 0;
	while(_g < blksSize) {
		var i1 = _g++;
		blks[i1] = 0;
	}
	var i = 0;
	while(i < str.length) {
		blks[i >> 2] |= HxOverrides.cca(str,i) << (str.length * 8 + i) % 4 * 8;
		i++;
	}
	blks[i >> 2] |= 128 << (str.length * 8 + i) % 4 * 8;
	var l = str.length * 8;
	var k = nblk * 16 - 2;
	blks[k] = l & 255;
	blks[k] |= (l >>> 8 & 255) << 8;
	blks[k] |= (l >>> 16 & 255) << 16;
	blks[k] |= (l >>> 24 & 255) << 24;
	return blks;
};
haxe.crypto.Md5.prototype = {
	bitOR: function(a,b) {
		var lsb = a & 1 | b & 1;
		var msb31 = a >>> 1 | b >>> 1;
		return msb31 << 1 | lsb;
	}
	,bitXOR: function(a,b) {
		var lsb = a & 1 ^ b & 1;
		var msb31 = a >>> 1 ^ b >>> 1;
		return msb31 << 1 | lsb;
	}
	,bitAND: function(a,b) {
		var lsb = a & 1 & (b & 1);
		var msb31 = a >>> 1 & b >>> 1;
		return msb31 << 1 | lsb;
	}
	,addme: function(x,y) {
		var lsw = (x & 65535) + (y & 65535);
		var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
		return msw << 16 | lsw & 65535;
	}
	,hex: function(a) {
		var str = "";
		var hex_chr = "0123456789abcdef";
		var _g = 0;
		while(_g < a.length) {
			var num = a[_g];
			++_g;
			var _g1 = 0;
			while(_g1 < 4) {
				var j = _g1++;
				str += hex_chr.charAt(num >> j * 8 + 4 & 15) + hex_chr.charAt(num >> j * 8 & 15);
			}
		}
		return str;
	}
	,rol: function(num,cnt) {
		return num << cnt | num >>> 32 - cnt;
	}
	,cmn: function(q,a,b,x,s,t) {
		return this.addme(this.rol(this.addme(this.addme(a,q),this.addme(x,t)),s),b);
	}
	,ff: function(a,b,c,d,x,s,t) {
		return this.cmn(this.bitOR(this.bitAND(b,c),this.bitAND(~b,d)),a,b,x,s,t);
	}
	,gg: function(a,b,c,d,x,s,t) {
		return this.cmn(this.bitOR(this.bitAND(b,d),this.bitAND(c,~d)),a,b,x,s,t);
	}
	,hh: function(a,b,c,d,x,s,t) {
		return this.cmn(this.bitXOR(this.bitXOR(b,c),d),a,b,x,s,t);
	}
	,ii: function(a,b,c,d,x,s,t) {
		return this.cmn(this.bitXOR(c,this.bitOR(b,~d)),a,b,x,s,t);
	}
	,doEncode: function(x) {
		var a = 1732584193;
		var b = -271733879;
		var c = -1732584194;
		var d = 271733878;
		var step;
		var i = 0;
		while(i < x.length) {
			var olda = a;
			var oldb = b;
			var oldc = c;
			var oldd = d;
			step = 0;
			a = this.ff(a,b,c,d,x[i],7,-680876936);
			d = this.ff(d,a,b,c,x[i + 1],12,-389564586);
			c = this.ff(c,d,a,b,x[i + 2],17,606105819);
			b = this.ff(b,c,d,a,x[i + 3],22,-1044525330);
			a = this.ff(a,b,c,d,x[i + 4],7,-176418897);
			d = this.ff(d,a,b,c,x[i + 5],12,1200080426);
			c = this.ff(c,d,a,b,x[i + 6],17,-1473231341);
			b = this.ff(b,c,d,a,x[i + 7],22,-45705983);
			a = this.ff(a,b,c,d,x[i + 8],7,1770035416);
			d = this.ff(d,a,b,c,x[i + 9],12,-1958414417);
			c = this.ff(c,d,a,b,x[i + 10],17,-42063);
			b = this.ff(b,c,d,a,x[i + 11],22,-1990404162);
			a = this.ff(a,b,c,d,x[i + 12],7,1804603682);
			d = this.ff(d,a,b,c,x[i + 13],12,-40341101);
			c = this.ff(c,d,a,b,x[i + 14],17,-1502002290);
			b = this.ff(b,c,d,a,x[i + 15],22,1236535329);
			a = this.gg(a,b,c,d,x[i + 1],5,-165796510);
			d = this.gg(d,a,b,c,x[i + 6],9,-1069501632);
			c = this.gg(c,d,a,b,x[i + 11],14,643717713);
			b = this.gg(b,c,d,a,x[i],20,-373897302);
			a = this.gg(a,b,c,d,x[i + 5],5,-701558691);
			d = this.gg(d,a,b,c,x[i + 10],9,38016083);
			c = this.gg(c,d,a,b,x[i + 15],14,-660478335);
			b = this.gg(b,c,d,a,x[i + 4],20,-405537848);
			a = this.gg(a,b,c,d,x[i + 9],5,568446438);
			d = this.gg(d,a,b,c,x[i + 14],9,-1019803690);
			c = this.gg(c,d,a,b,x[i + 3],14,-187363961);
			b = this.gg(b,c,d,a,x[i + 8],20,1163531501);
			a = this.gg(a,b,c,d,x[i + 13],5,-1444681467);
			d = this.gg(d,a,b,c,x[i + 2],9,-51403784);
			c = this.gg(c,d,a,b,x[i + 7],14,1735328473);
			b = this.gg(b,c,d,a,x[i + 12],20,-1926607734);
			a = this.hh(a,b,c,d,x[i + 5],4,-378558);
			d = this.hh(d,a,b,c,x[i + 8],11,-2022574463);
			c = this.hh(c,d,a,b,x[i + 11],16,1839030562);
			b = this.hh(b,c,d,a,x[i + 14],23,-35309556);
			a = this.hh(a,b,c,d,x[i + 1],4,-1530992060);
			d = this.hh(d,a,b,c,x[i + 4],11,1272893353);
			c = this.hh(c,d,a,b,x[i + 7],16,-155497632);
			b = this.hh(b,c,d,a,x[i + 10],23,-1094730640);
			a = this.hh(a,b,c,d,x[i + 13],4,681279174);
			d = this.hh(d,a,b,c,x[i],11,-358537222);
			c = this.hh(c,d,a,b,x[i + 3],16,-722521979);
			b = this.hh(b,c,d,a,x[i + 6],23,76029189);
			a = this.hh(a,b,c,d,x[i + 9],4,-640364487);
			d = this.hh(d,a,b,c,x[i + 12],11,-421815835);
			c = this.hh(c,d,a,b,x[i + 15],16,530742520);
			b = this.hh(b,c,d,a,x[i + 2],23,-995338651);
			a = this.ii(a,b,c,d,x[i],6,-198630844);
			d = this.ii(d,a,b,c,x[i + 7],10,1126891415);
			c = this.ii(c,d,a,b,x[i + 14],15,-1416354905);
			b = this.ii(b,c,d,a,x[i + 5],21,-57434055);
			a = this.ii(a,b,c,d,x[i + 12],6,1700485571);
			d = this.ii(d,a,b,c,x[i + 3],10,-1894986606);
			c = this.ii(c,d,a,b,x[i + 10],15,-1051523);
			b = this.ii(b,c,d,a,x[i + 1],21,-2054922799);
			a = this.ii(a,b,c,d,x[i + 8],6,1873313359);
			d = this.ii(d,a,b,c,x[i + 15],10,-30611744);
			c = this.ii(c,d,a,b,x[i + 6],15,-1560198380);
			b = this.ii(b,c,d,a,x[i + 13],21,1309151649);
			a = this.ii(a,b,c,d,x[i + 4],6,-145523070);
			d = this.ii(d,a,b,c,x[i + 11],10,-1120210379);
			c = this.ii(c,d,a,b,x[i + 2],15,718787259);
			b = this.ii(b,c,d,a,x[i + 9],21,-343485551);
			a = this.addme(a,olda);
			b = this.addme(b,oldb);
			c = this.addme(c,oldc);
			d = this.addme(d,oldd);
			i += 16;
		}
		return [a,b,c,d];
	}
	,__class__: haxe.crypto.Md5
};
if(!haxe.ds) haxe.ds = {};
haxe.ds.IntMap = $hxClasses["haxe.ds.IntMap"] = function() {
	this.h = { };
};
haxe.ds.IntMap.__name__ = ["haxe","ds","IntMap"];
haxe.ds.IntMap.__interfaces__ = [haxe.IMap];
haxe.ds.IntMap.prototype = {
	h: null
	,set: function(key,value) {
		this.h[key] = value;
	}
	,get: function(key) {
		return this.h[key];
	}
	,exists: function(key) {
		return this.h.hasOwnProperty(key);
	}
	,remove: function(key) {
		if(!this.h.hasOwnProperty(key)) return false;
		delete(this.h[key]);
		return true;
	}
	,keys: function() {
		var a = [];
		for( var key in this.h ) {
		if(this.h.hasOwnProperty(key)) a.push(key | 0);
		}
		return HxOverrides.iter(a);
	}
	,iterator: function() {
		return { ref : this.h, it : this.keys(), hasNext : function() {
			return this.it.hasNext();
		}, next : function() {
			var i = this.it.next();
			return this.ref[i];
		}};
	}
	,__class__: haxe.ds.IntMap
};
haxe.ds.ObjectMap = $hxClasses["haxe.ds.ObjectMap"] = function() {
	this.h = { };
	this.h.__keys__ = { };
};
haxe.ds.ObjectMap.__name__ = ["haxe","ds","ObjectMap"];
haxe.ds.ObjectMap.__interfaces__ = [haxe.IMap];
haxe.ds.ObjectMap.prototype = {
	h: null
	,set: function(key,value) {
		var id = key.__id__ || (key.__id__ = ++haxe.ds.ObjectMap.count);
		this.h[id] = value;
		this.h.__keys__[id] = key;
	}
	,get: function(key) {
		return this.h[key.__id__];
	}
	,exists: function(key) {
		return this.h.__keys__[key.__id__] != null;
	}
	,remove: function(key) {
		var id = key.__id__;
		if(this.h.__keys__[id] == null) return false;
		delete(this.h[id]);
		delete(this.h.__keys__[id]);
		return true;
	}
	,keys: function() {
		var a = [];
		for( var key in this.h.__keys__ ) {
		if(this.h.hasOwnProperty(key)) a.push(this.h.__keys__[key]);
		}
		return HxOverrides.iter(a);
	}
	,iterator: function() {
		return { ref : this.h, it : this.keys(), hasNext : function() {
			return this.it.hasNext();
		}, next : function() {
			var i = this.it.next();
			return this.ref[i.__id__];
		}};
	}
	,__class__: haxe.ds.ObjectMap
};
if(!haxe.ds._StringMap) haxe.ds._StringMap = {};
haxe.ds._StringMap.StringMapIterator = $hxClasses["haxe.ds._StringMap.StringMapIterator"] = function(map,keys) {
	this.map = map;
	this.keys = keys;
	this.index = 0;
	this.count = keys.length;
};
haxe.ds._StringMap.StringMapIterator.__name__ = ["haxe","ds","_StringMap","StringMapIterator"];
haxe.ds._StringMap.StringMapIterator.prototype = {
	map: null
	,keys: null
	,index: null
	,count: null
	,hasNext: function() {
		return this.index < this.count;
	}
	,next: function() {
		return this.map.get(this.keys[this.index++]);
	}
	,__class__: haxe.ds._StringMap.StringMapIterator
};
haxe.ds.StringMap = $hxClasses["haxe.ds.StringMap"] = function() {
	this.h = { };
};
haxe.ds.StringMap.__name__ = ["haxe","ds","StringMap"];
haxe.ds.StringMap.__interfaces__ = [haxe.IMap];
haxe.ds.StringMap.prototype = {
	h: null
	,rh: null
	,set: function(key,value) {
		if(__map_reserved[key] != null) this.setReserved(key,value); else this.h[key] = value;
	}
	,get: function(key) {
		if(__map_reserved[key] != null) return this.getReserved(key);
		return this.h[key];
	}
	,exists: function(key) {
		if(__map_reserved[key] != null) return this.existsReserved(key);
		return this.h.hasOwnProperty(key);
	}
	,setReserved: function(key,value) {
		if(this.rh == null) this.rh = { };
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) return null; else return this.rh["$" + key];
	}
	,existsReserved: function(key) {
		if(this.rh == null) return false;
		return this.rh.hasOwnProperty("$" + key);
	}
	,remove: function(key) {
		if(__map_reserved[key] != null) {
			key = "$" + key;
			if(this.rh == null || !this.rh.hasOwnProperty(key)) return false;
			delete(this.rh[key]);
			return true;
		} else {
			if(!this.h.hasOwnProperty(key)) return false;
			delete(this.h[key]);
			return true;
		}
	}
	,keys: function() {
		var _this = this.arrayKeys();
		return HxOverrides.iter(_this);
	}
	,arrayKeys: function() {
		var out = [];
		for( var key in this.h ) {
		if(this.h.hasOwnProperty(key)) out.push(key);
		}
		if(this.rh != null) {
			for( var key in this.rh ) {
			if(key.charCodeAt(0) == 36) out.push(key.substr(1));
			}
		}
		return out;
	}
	,iterator: function() {
		return new haxe.ds._StringMap.StringMapIterator(this,this.arrayKeys());
	}
	,toString: function() {
		var s = new StringBuf();
		s.b += "{";
		var keys = this.arrayKeys();
		var _g1 = 0;
		var _g = keys.length;
		while(_g1 < _g) {
			var i = _g1++;
			var k = keys[i];
			if(k == null) s.b += "null"; else s.b += "" + k;
			s.b += " => ";
			s.add(Std.string(__map_reserved[k] != null?this.getReserved(k):this.h[k]));
			if(i < keys.length) s.b += ", ";
		}
		s.b += "}";
		return s.b;
	}
	,__class__: haxe.ds.StringMap
};
if(!haxe.io) haxe.io = {};
haxe.io.Bytes = $hxClasses["haxe.io.Bytes"] = function(data) {
	this.length = data.byteLength;
	this.b = new Uint8Array(data);
	this.b.bufferValue = data;
	data.hxBytes = this;
	data.bytes = this.b;
};
haxe.io.Bytes.__name__ = ["haxe","io","Bytes"];
haxe.io.Bytes.alloc = function(length) {
	return new haxe.io.Bytes(new ArrayBuffer(length));
};
haxe.io.Bytes.prototype = {
	length: null
	,b: null
	,get: function(pos) {
		return this.b[pos];
	}
	,set: function(pos,v) {
		this.b[pos] = v & 255;
	}
	,__class__: haxe.io.Bytes
};
haxe.io.Error = $hxClasses["haxe.io.Error"] = { __ename__ : ["haxe","io","Error"], __constructs__ : ["Blocked","Overflow","OutsideBounds","Custom"] };
haxe.io.Error.Blocked = ["Blocked",0];
haxe.io.Error.Blocked.toString = $estr;
haxe.io.Error.Blocked.__enum__ = haxe.io.Error;
haxe.io.Error.Overflow = ["Overflow",1];
haxe.io.Error.Overflow.toString = $estr;
haxe.io.Error.Overflow.__enum__ = haxe.io.Error;
haxe.io.Error.OutsideBounds = ["OutsideBounds",2];
haxe.io.Error.OutsideBounds.toString = $estr;
haxe.io.Error.OutsideBounds.__enum__ = haxe.io.Error;
haxe.io.Error.Custom = function(e) { var $x = ["Custom",3,e]; $x.__enum__ = haxe.io.Error; $x.toString = $estr; return $x; };
haxe.io.FPHelper = $hxClasses["haxe.io.FPHelper"] = function() { };
haxe.io.FPHelper.__name__ = ["haxe","io","FPHelper"];
haxe.io.FPHelper.i32ToFloat = function(i) {
	var sign = 1 - (i >>> 31 << 1);
	var exp = i >>> 23 & 255;
	var sig = i & 8388607;
	if(sig == 0 && exp == 0) return 0.0;
	return sign * (1 + Math.pow(2,-23) * sig) * Math.pow(2,exp - 127);
};
haxe.io.FPHelper.floatToI32 = function(f) {
	if(f == 0) return 0;
	var af;
	if(f < 0) af = -f; else af = f;
	var exp = Math.floor(Math.log(af) / 0.6931471805599453);
	if(exp < -127) exp = -127; else if(exp > 128) exp = 128;
	var sig = Math.round((af / Math.pow(2,exp) - 1) * 8388608) & 8388607;
	return (f < 0?-2147483648:0) | exp + 127 << 23 | sig;
};
haxe.io.FPHelper.i64ToDouble = function(low,high) {
	var sign = 1 - (high >>> 31 << 1);
	var exp = (high >> 20 & 2047) - 1023;
	var sig = (high & 1048575) * 4294967296. + (low >>> 31) * 2147483648. + (low & 2147483647);
	if(sig == 0 && exp == -1023) return 0.0;
	return sign * (1.0 + Math.pow(2,-52) * sig) * Math.pow(2,exp);
};
haxe.io.FPHelper.doubleToI64 = function(v) {
	var i64 = haxe.io.FPHelper.i64tmp;
	if(v == 0) {
		i64.low = 0;
		i64.high = 0;
	} else {
		var av;
		if(v < 0) av = -v; else av = v;
		var exp = Math.floor(Math.log(av) / 0.6931471805599453);
		var sig;
		var v1 = (av / Math.pow(2,exp) - 1) * 4503599627370496.;
		sig = Math.round(v1);
		var sig_l = sig | 0;
		var sig_h = sig / 4294967296.0 | 0;
		i64.low = sig_l;
		i64.high = (v < 0?-2147483648:0) | exp + 1023 << 20 | sig_h;
	}
	return i64;
};
var js = js || {};
if(!js._Boot) js._Boot = {};
js._Boot.HaxeError = $hxClasses["js._Boot.HaxeError"] = function(val) {
	Error.call(this);
	this.val = val;
	this.message = String(val);
	if(Error.captureStackTrace) Error.captureStackTrace(this,js._Boot.HaxeError);
};
js._Boot.HaxeError.__name__ = ["js","_Boot","HaxeError"];
js._Boot.HaxeError.__super__ = Error;
js._Boot.HaxeError.prototype = $extend(Error.prototype,{
	val: null
	,__class__: js._Boot.HaxeError
});
js.Boot = $hxClasses["js.Boot"] = function() { };
js.Boot.__name__ = ["js","Boot"];
js.Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) return Array; else {
		var cl = o.__class__;
		if(cl != null) return cl;
		var name = js.Boot.__nativeClassName(o);
		if(name != null) return js.Boot.__resolveNativeClass(name);
		return null;
	}
};
js.Boot.__string_rec = function(o,s) {
	if(o == null) return "null";
	if(s.length >= 5) return "<...>";
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) t = "object";
	switch(t) {
	case "object":
		if(o instanceof Array) {
			if(o.__enum__) {
				if(o.length == 2) return o[0];
				var str2 = o[0] + "(";
				s += "\t";
				var _g1 = 2;
				var _g = o.length;
				while(_g1 < _g) {
					var i1 = _g1++;
					if(i1 != 2) str2 += "," + js.Boot.__string_rec(o[i1],s); else str2 += js.Boot.__string_rec(o[i1],s);
				}
				return str2 + ")";
			}
			var l = o.length;
			var i;
			var str1 = "[";
			s += "\t";
			var _g2 = 0;
			while(_g2 < l) {
				var i2 = _g2++;
				str1 += (i2 > 0?",":"") + js.Boot.__string_rec(o[i2],s);
			}
			str1 += "]";
			return str1;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e ) {
			if (e instanceof js._Boot.HaxeError) e = e.val;
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") return s2;
		}
		var k = null;
		var str = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str.length != 2) str += ", \n";
		str += s + k + " : " + js.Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str += "\n" + s + "}";
		return str;
	case "function":
		return "<function>";
	case "string":
		return o;
	default:
		return String(o);
	}
};
js.Boot.__interfLoop = function(cc,cl) {
	if(cc == null) return false;
	if(cc == cl) return true;
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g1 = 0;
		var _g = intf.length;
		while(_g1 < _g) {
			var i = _g1++;
			var i1 = intf[i];
			if(i1 == cl || js.Boot.__interfLoop(i1,cl)) return true;
		}
	}
	return js.Boot.__interfLoop(cc.__super__,cl);
};
js.Boot.__instanceof = function(o,cl) {
	if(cl == null) return false;
	switch(cl) {
	case Int:
		return (o|0) === o;
	case Float:
		return typeof(o) == "number";
	case Bool:
		return typeof(o) == "boolean";
	case String:
		return typeof(o) == "string";
	case Array:
		return (o instanceof Array) && o.__enum__ == null;
	case Dynamic:
		return true;
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if(o instanceof cl) return true;
				if(js.Boot.__interfLoop(js.Boot.getClass(o),cl)) return true;
			} else if(typeof(cl) == "object" && js.Boot.__isNativeObj(cl)) {
				if(o instanceof cl) return true;
			}
		} else return false;
		if(cl == Class && o.__name__ != null) return true;
		if(cl == Enum && o.__ename__ != null) return true;
		return o.__enum__ == cl;
	}
};
js.Boot.__cast = function(o,t) {
	if(js.Boot.__instanceof(o,t)) return o; else throw new js._Boot.HaxeError("Cannot cast " + Std.string(o) + " to " + Std.string(t));
};
js.Boot.__nativeClassName = function(o) {
	var name = js.Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") return null;
	return name;
};
js.Boot.__isNativeObj = function(o) {
	return js.Boot.__nativeClassName(o) != null;
};
js.Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
js.Browser = $hxClasses["js.Browser"] = function() { };
js.Browser.__name__ = ["js","Browser"];
js.Browser.createXMLHttpRequest = function() {
	if(typeof XMLHttpRequest != "undefined") return new XMLHttpRequest();
	if(typeof ActiveXObject != "undefined") return new ActiveXObject("Microsoft.XMLHTTP");
	throw new js._Boot.HaxeError("Unable to create XMLHttpRequest object.");
};
js.Browser.alert = function(v) {
	window.alert(js.Boot.__string_rec(v,""));
};
js.Lib = $hxClasses["js.Lib"] = function() { };
js.Lib.__name__ = ["js","Lib"];
js.Lib.eval = function(code) {
	return eval(code);
};
if(!js.html) js.html = {};
if(!js.html.compat) js.html.compat = {};
js.html.compat.ArrayBuffer = $hxClasses["js.html.compat.ArrayBuffer"] = function(a) {
	if((a instanceof Array) && a.__enum__ == null) {
		this.a = a;
		this.byteLength = a.length;
	} else {
		var len = a;
		this.a = [];
		var _g = 0;
		while(_g < len) {
			var i = _g++;
			this.a[i] = 0;
		}
		this.byteLength = len;
	}
};
js.html.compat.ArrayBuffer.__name__ = ["js","html","compat","ArrayBuffer"];
js.html.compat.ArrayBuffer.sliceImpl = function(begin,end) {
	var u = new Uint8Array(this,begin,end == null?null:end - begin);
	var result = new ArrayBuffer(u.byteLength);
	var resultArray = new Uint8Array(result);
	resultArray.set(u);
	return result;
};
js.html.compat.ArrayBuffer.prototype = {
	byteLength: null
	,a: null
	,slice: function(begin,end) {
		return new js.html.compat.ArrayBuffer(this.a.slice(begin,end));
	}
	,__class__: js.html.compat.ArrayBuffer
};
js.html.compat.DataView = $hxClasses["js.html.compat.DataView"] = function(buffer,byteOffset,byteLength) {
	this.buf = buffer;
	if(byteOffset == null) this.offset = 0; else this.offset = byteOffset;
	if(byteLength == null) this.length = buffer.byteLength - this.offset; else this.length = byteLength;
	if(this.offset < 0 || this.length < 0 || this.offset + this.length > buffer.byteLength) throw new js._Boot.HaxeError(haxe.io.Error.OutsideBounds);
};
js.html.compat.DataView.__name__ = ["js","html","compat","DataView"];
js.html.compat.DataView.prototype = {
	buf: null
	,offset: null
	,length: null
	,getInt8: function(byteOffset) {
		var v = this.buf.a[this.offset + byteOffset];
		if(v >= 128) return v - 256; else return v;
	}
	,getUint8: function(byteOffset) {
		return this.buf.a[this.offset + byteOffset];
	}
	,getInt16: function(byteOffset,littleEndian) {
		var v = this.getUint16(byteOffset,littleEndian);
		if(v >= 32768) return v - 65536; else return v;
	}
	,getUint16: function(byteOffset,littleEndian) {
		if(littleEndian) return this.buf.a[this.offset + byteOffset] | this.buf.a[this.offset + byteOffset + 1] << 8; else return this.buf.a[this.offset + byteOffset] << 8 | this.buf.a[this.offset + byteOffset + 1];
	}
	,getInt32: function(byteOffset,littleEndian) {
		var p = this.offset + byteOffset;
		var a = this.buf.a[p++];
		var b = this.buf.a[p++];
		var c = this.buf.a[p++];
		var d = this.buf.a[p++];
		if(littleEndian) return a | b << 8 | c << 16 | d << 24; else return d | c << 8 | b << 16 | a << 24;
	}
	,getUint32: function(byteOffset,littleEndian) {
		var v = this.getInt32(byteOffset,littleEndian);
		if(v < 0) return v + 4294967296.; else return v;
	}
	,getFloat32: function(byteOffset,littleEndian) {
		return haxe.io.FPHelper.i32ToFloat(this.getInt32(byteOffset,littleEndian));
	}
	,getFloat64: function(byteOffset,littleEndian) {
		var a = this.getInt32(byteOffset,littleEndian);
		var b = this.getInt32(byteOffset + 4,littleEndian);
		return haxe.io.FPHelper.i64ToDouble(littleEndian?a:b,littleEndian?b:a);
	}
	,setInt8: function(byteOffset,value) {
		if(value < 0) this.buf.a[byteOffset + this.offset] = value + 128 & 255; else this.buf.a[byteOffset + this.offset] = value & 255;
	}
	,setUint8: function(byteOffset,value) {
		this.buf.a[byteOffset + this.offset] = value & 255;
	}
	,setInt16: function(byteOffset,value,littleEndian) {
		this.setUint16(byteOffset,value < 0?value + 65536:value,littleEndian);
	}
	,setUint16: function(byteOffset,value,littleEndian) {
		var p = byteOffset + this.offset;
		if(littleEndian) {
			this.buf.a[p] = value & 255;
			this.buf.a[p++] = value >> 8 & 255;
		} else {
			this.buf.a[p++] = value >> 8 & 255;
			this.buf.a[p] = value & 255;
		}
	}
	,setInt32: function(byteOffset,value,littleEndian) {
		this.setUint32(byteOffset,value,littleEndian);
	}
	,setUint32: function(byteOffset,value,littleEndian) {
		var p = byteOffset + this.offset;
		if(littleEndian) {
			this.buf.a[p++] = value & 255;
			this.buf.a[p++] = value >> 8 & 255;
			this.buf.a[p++] = value >> 16 & 255;
			this.buf.a[p++] = value >>> 24;
		} else {
			this.buf.a[p++] = value >>> 24;
			this.buf.a[p++] = value >> 16 & 255;
			this.buf.a[p++] = value >> 8 & 255;
			this.buf.a[p++] = value & 255;
		}
	}
	,setFloat32: function(byteOffset,value,littleEndian) {
		this.setUint32(byteOffset,haxe.io.FPHelper.floatToI32(value),littleEndian);
	}
	,setFloat64: function(byteOffset,value,littleEndian) {
		var i64 = haxe.io.FPHelper.doubleToI64(value);
		if(littleEndian) {
			this.setUint32(byteOffset,i64.low);
			this.setUint32(byteOffset,i64.high);
		} else {
			this.setUint32(byteOffset,i64.high);
			this.setUint32(byteOffset,i64.low);
		}
	}
	,__class__: js.html.compat.DataView
};
js.html.compat.Uint8Array = $hxClasses["js.html.compat.Uint8Array"] = function() { };
js.html.compat.Uint8Array.__name__ = ["js","html","compat","Uint8Array"];
js.html.compat.Uint8Array._new = function(arg1,offset,length) {
	var arr;
	if(typeof(arg1) == "number") {
		arr = [];
		var _g = 0;
		while(_g < arg1) {
			var i = _g++;
			arr[i] = 0;
		}
		arr.byteLength = arr.length;
		arr.byteOffset = 0;
		arr.buffer = new js.html.compat.ArrayBuffer(arr);
	} else if(js.Boot.__instanceof(arg1,js.html.compat.ArrayBuffer)) {
		var buffer = arg1;
		if(offset == null) offset = 0;
		if(length == null) length = buffer.byteLength - offset;
		if(offset == 0) arr = buffer.a; else arr = buffer.a.slice(offset,offset + length);
		arr.byteLength = arr.length;
		arr.byteOffset = offset;
		arr.buffer = buffer;
	} else if((arg1 instanceof Array) && arg1.__enum__ == null) {
		arr = arg1.slice();
		arr.byteLength = arr.length;
		arr.byteOffset = 0;
		arr.buffer = new js.html.compat.ArrayBuffer(arr);
	} else throw new js._Boot.HaxeError("TODO " + Std.string(arg1));
	arr.subarray = js.html.compat.Uint8Array._subarray;
	arr.set = js.html.compat.Uint8Array._set;
	return arr;
};
js.html.compat.Uint8Array._set = function(arg,offset) {
	var t = this;
	if(js.Boot.__instanceof(arg.buffer,js.html.compat.ArrayBuffer)) {
		var a = arg;
		if(arg.byteLength + offset > t.byteLength) throw new js._Boot.HaxeError("set() outside of range");
		var _g1 = 0;
		var _g = arg.byteLength;
		while(_g1 < _g) {
			var i = _g1++;
			t[i + offset] = a[i];
		}
	} else if((arg instanceof Array) && arg.__enum__ == null) {
		var a1 = arg;
		if(a1.length + offset > t.byteLength) throw new js._Boot.HaxeError("set() outside of range");
		var _g11 = 0;
		var _g2 = a1.length;
		while(_g11 < _g2) {
			var i1 = _g11++;
			t[i1 + offset] = a1[i1];
		}
	} else throw new js._Boot.HaxeError("TODO");
};
js.html.compat.Uint8Array._subarray = function(start,end) {
	var t = this;
	var a = js.html.compat.Uint8Array._new(t.slice(start,end));
	a.byteOffset = start;
	return a;
};
var phylo = phylo || {};
phylo.PhyloAnnotation = $hxClasses["phylo.PhyloAnnotation"] = function() {
	this.hasAnnot = false;
	this.color = [];
	this.text = "";
	this.splitresults = false;
	this.optionSelected = [];
	this.alfaAnnot = [];
	this.hasAnnot = false;
	this.fromresults = [];
	this.auxMap = new haxe.ds.StringMap();
};
phylo.PhyloAnnotation.__name__ = ["phylo","PhyloAnnotation"];
phylo.PhyloAnnotation.prototype = {
	type: null
	,summary: null
	,summary_img: null
	,imgtest: null
	,annotImg: null
	,defaultImg: null
	,shape: null
	,color: null
	,hookName: null
	,text: null
	,options: null
	,optionSelected: null
	,dbData: null
	,legend: null
	,legendClazz: null
	,legendMethod: null
	,hidden: null
	,hasClass: null
	,hasMethod: null
	,divMethod: null
	,familyMethod: null
	,hasAnnot: null
	,alfaAnnot: null
	,splitresults: null
	,popup: null
	,popMethod: null
	,multiChoice: null
	,option: null
	,fromresults: null
	,label: null
	,myleaf: null
	,auxMap: null
	,uploadImg: function(imgList) {
		var i;
		this.annotImg = [];
		var _g1 = 0;
		var _g = imgList.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			this.annotImg[i1] = window.document.createElement("img");
			this.annotImg[i1].src = imgList[i1];
			this.annotImg[i1].onload = function() {
			};
		}
	}
	,uploadSpecificImg: function(imgList,pos) {
		if(this.annotImg == null) this.annotImg = [];
		this.annotImg[pos] = window.document.createElement("img");
		this.annotImg[pos].width = 15;
		this.annotImg[pos].src = imgList;
		this.annotImg[pos].onload = function() {
		};
	}
	,saveAnnotationData: function(annotation,data,option,r) {
		this.type = annotation;
		this.dbData = [];
		this.dbData = data;
		this.option = option;
		if(r[annotation] != null) {
			if(this.color != null) this.color = r[annotation].color; else {
				this.color = [];
				this.color = r[annotation].color;
			}
			this.text = r[annotation].text;
		} else {
			this.defaultImg = r.defImage;
			if(this.color != null) this.color[0] = saturn.core.Util.clone(r.color); else {
				this.color = [];
				this.color[0] = saturn.core.Util.clone(r.color);
			}
			this.text = "" + Std.string(r.text) + "";
		}
		this.hasAnnot = true;
	}
	,delAnnotation: function(annotation) {
	}
	,__class__: phylo.PhyloAnnotation
};
phylo.PhyloAnnotationConfiguration = $hxClasses["phylo.PhyloAnnotationConfiguration"] = function() {
};
phylo.PhyloAnnotationConfiguration.__name__ = ["phylo","PhyloAnnotationConfiguration"];
phylo.PhyloAnnotationConfiguration.prototype = {
	name: null
	,annotationFunction: null
	,styleFunction: null
	,legendFunction: null
	,infoFunction: null
	,shape: null
	,colour: null
	,_skipped: null
	,getColourOldFormat: function() {
		return { color : this.colour, 'used' : "false"};
	}
	,isSkip: function() {
		return this._skipped;
	}
	,__class__: phylo.PhyloAnnotationConfiguration
};
phylo.PhyloAnnotationManager = $hxClasses["phylo.PhyloAnnotationManager"] = function() {
	this.menuScroll = 0;
	this.onSubmenu = false;
	this.selectedAnnotationOptions = [];
	this.annotations = [];
	this.activeAnnotation = [];
	this.alreadyGotAnnotation = new haxe.ds.StringMap();
	this.selectedAnnotationOptions = [];
	this.searchedGenes = [];
	this.annotationListeners = [];
	this.skipAnnotation = [];
	this.skipCurrentLegend = [];
};
phylo.PhyloAnnotationManager.__name__ = ["phylo","PhyloAnnotationManager"];
phylo.PhyloAnnotationManager.prototype = {
	annotations: null
	,rootNode: null
	,canvas: null
	,treeType: null
	,numTotalAnnot: null
	,searchedGenes: null
	,annotationListeners: null
	,annotationData: null
	,annotationString: null
	,annotationConfigs: null
	,nameAnnot: null
	,jsonFile: null
	,viewOptions: null
	,activeAnnotation: null
	,alreadyGotAnnotation: null
	,selectedAnnotationOptions: null
	,onSubmenu: null
	,menuScroll: null
	,annotationNameToConfig: null
	,skipAnnotation: null
	,skipCurrentLegend: null
	,showAssociatedData: function(active,data,mx,my) {
		var annotation = this.annotations[data.annotation.type];
		if(!active && annotation.divMethod != null) annotation.divMethod(data,mx,my);
	}
	,showScreenData: function(active,data,mx,my) {
		if(this.canvas == null) return;
		this.showAssociatedData(active,data,mx,my);
	}
	,fillAnnotationwithJSonData: function() {
		var i = 0;
		var j = 0;
		var z = 0;
		this.nameAnnot = [];
		var b = 0;
		while(i < this.jsonFile.btnGroup.length) {
			j = 0;
			while(j < this.jsonFile.btnGroup[i].buttons.length) {
				if(this.jsonFile.btnGroup[i].buttons[j].isTitle == false) {
					var a;
					a = this.jsonFile.btnGroup[i].buttons[j].annotCode;
					this.annotations[a] = new phylo.PhyloAnnotation();
					this.selectedAnnotationOptions[a] = null;
					if(this.jsonFile.btnGroup[i].buttons[j].shape == "image") this.annotations[a].uploadImg(this.jsonFile.btnGroup[i].buttons[j].annotImg);
					{
						this.alreadyGotAnnotation.set(this.jsonFile.btnGroup[i].buttons[j].annotCode,false);
						false;
					}
					this.annotations[a].shape = this.jsonFile.btnGroup[i].buttons[j].shape;
					this.annotations[a].label = this.jsonFile.btnGroup[i].buttons[j].label;
					this.annotations[a].color = this.jsonFile.btnGroup[i].buttons[j].color;
					this.annotations[a].hookName = this.jsonFile.btnGroup[i].buttons[j].hookName;
					this.annotations[a].splitresults = this.jsonFile.btnGroup[i].buttons[j].splitresults;
					this.annotations[a].popup = this.jsonFile.btnGroup[i].buttons[j].popUpWindows;
					if(this.jsonFile.btnGroup[i].buttons[j].hasClass != null) this.annotations[a].hasClass = this.jsonFile.btnGroup[i].buttons[j].hasClass;
					if(this.jsonFile.btnGroup[i].buttons[j].hasMethod != null) this.annotations[a].hasMethod = this.jsonFile.btnGroup[i].buttons[j].hasMethod;
					if(this.jsonFile.btnGroup[i].buttons[j].divMethod != null) this.annotations[a].divMethod = this.jsonFile.btnGroup[i].buttons[j].divMethod;
					if(this.jsonFile.btnGroup[i].buttons[j].familyMethod != null) this.annotations[a].familyMethod = this.jsonFile.btnGroup[i].buttons[j].familyMethod;
					if(this.jsonFile.btnGroup[i].buttons[j].popUpWindows != null && this.jsonFile.btnGroup[i].buttons[j].popUpWindows == true) this.annotations[a].popMethod = this.jsonFile.btnGroup[i].buttons[j].windowsData[0].popMethod;
					this.annotations[a].options = [];
					if(this.jsonFile.btnGroup[i].buttons[j].legend != null) {
						this.annotations[a].legend = this.jsonFile.btnGroup[i].buttons[j].legend.image;
						if(this.jsonFile.btnGroup[i].buttons[j].legend.clazz != null) {
							this.annotations[a].legendClazz = this.jsonFile.btnGroup[i].buttons[j].legend.clazz;
							this.annotations[a].legendMethod = this.jsonFile.btnGroup[i].buttons[j].legend.method;
						} else if(this.jsonFile.btnGroup[i].buttons[j].legend.method != null) this.annotations[a].legendMethod = this.jsonFile.btnGroup[i].buttons[j].legend.method;
					}
					if(this.jsonFile.btnGroup[i].buttons[j].hidden != null) this.annotations[a].hidden = this.jsonFile.btnGroup[i].buttons[j].hidden;
					if(this.jsonFile.btnGroup[i].buttons[j].submenu == true) {
						var zz;
						var _g1 = 0;
						var _g = this.jsonFile.btnGroup[i].buttons[j].options.length;
						while(_g1 < _g) {
							var zz1 = _g1++;
							this.annotations[a].options[zz1] = this.jsonFile.btnGroup[i].buttons[j].options[zz1].hookName;
							if(this.jsonFile.btnGroup[i].buttons[j].options[zz1].defaultImg != null) this.annotations[a].defaultImg = this.jsonFile.btnGroup[i].buttons[j].options[zz1].defaultImg;
						}
						this.annotations[a].optionSelected[0] = this.jsonFile.btnGroup[i].buttons[j].optionSelected[0];
					}
					this.nameAnnot[b] = this.jsonFile.btnGroup[i].buttons[j].label;
					b++;
				}
				j++;
			}
			this.numTotalAnnot = this.numTotalAnnot + j;
			i++;
		}
	}
	,setSelectedAnnotationOptions: function(annotation,selectedOptions) {
		this.selectedAnnotationOptions[annotation] = selectedOptions;
	}
	,getSelectedAnnotationOptions: function(annotation) {
		return this.selectedAnnotationOptions[annotation];
	}
	,closeAnnotWindows: function() {
	}
	,generateIcon: function(j,tarname,results) {
		var name = tarname;
		if(name.indexOf("(") != -1 || name.indexOf("/") != -1) {
			var auxArray = name.split("");
			var j1;
			var nn = "";
			var _g1 = 0;
			var _g = auxArray.length;
			while(_g1 < _g) {
				var j2 = _g1++;
				if(auxArray[j2] != "(" && auxArray[j2] != ")" && auxArray[j2] != "/") nn = nn + auxArray[j2];
			}
			name = nn;
		}
		var r1 = 23 - results[1];
		var r2 = 23 - results[2];
		var r3 = 23 - results[3];
		var r4 = 23 - results[4];
		var r5 = 23 - results[5];
		var r6 = 23 - results[6];
		var r7 = 23 - results[7];
		return "<script type=\"text/javascript\">\r\n        $('.horizontal .progress-fill span').each(function(){\r\n  var percent = $(this).html();\r\n  $(this).parent().css('width', percent);\r\n});\r\n\r\n\r\n$('.vertical .progress-fill span').each(function(){\r\n  var percent = $(this).html();\r\n  var pTop = 100 - ( percent.slice(0, percent.length - 1) ) + \"%\";\r\n  $(this).parent().css({\r\n    'height' : percent,\r\n    'top' : pTop\r\n  });\r\n});\r\n                </script>" + "\r\n                <style type=\"text/css\" media=\"all\">\r\n                *, *:before, *:after {\r\n  -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;\r\n }\r\n.container {\r\n  width: 23px;\r\n  height: 23px;\r\n  background: #fff;\r\n  overflow: hidden;\r\n  border-bottom:1px solid #000;\r\n}\r\n\r\n.vertical .progress-bar {\r\n  float: left;\r\n  height: 100%;\r\n  width: 3px;\r\n}\r\n\r\n.vertical .progress-track {\r\n  position: relative;\r\n  width: 3px;\r\n  height: 100%;\r\n  background: #ffffff;\r\n}\r\n\r\n.vertical .progress-track-1 {\r\n   position: relative;\r\n   width: 3px;\r\n   height: 100%;\r\n   background: #2980d6;\r\n}\r\n.vertical .progress-fill-1" + name + " {\r\n  position: relative;\r\n  height: " + r1 + "px;\r\n  width: 3px;\r\n  background-color:#ffffff;\r\n}\r\n\r\n.vertical .progress-track-2 {\r\n   position: relative;\r\n   width: 3px;\r\n   height: 100%;\r\n   background: #bf0000;\r\n}\r\n.vertical .progress-fill-2" + name + " {\r\n  position: relative;\r\n  height: " + r2 + "px;\r\n  width: 3px;\r\n  background-color:#ffffff;\r\n}\r\n.vertical .progress-track-3 {\r\n  position: relative;\r\n   width: 3px;\r\n   height: 100%;\r\n   background: #63cf1b;\r\n}\r\n.vertical .progress-fill-3" + name + " {\r\n  position: relative;\r\n  height: " + r3 + "px;\r\n  width: 3px;\r\n  background-color:#ffffff;\r\n}\r\n.vertical .progress-track-4 {\r\n  position: relative;\r\n   width: 3px;\r\n   height: 100%;\r\n   background: #ff8000;\r\n}\r\n.vertical .progress-fill-4" + name + " {\r\n  position: relative;\r\n  height: " + r4 + "px;\r\n  width: 3px;\r\n  background-color:#ffffff;\r\n}\r\n.vertical .progress-track-5 {\r\n  position: relative;\r\n   width: 3px;\r\n   height: 100%;\r\n   background: #c05691;\r\n}\r\n.vertical .progress-fill-5" + name + " {\r\n  position: relative;\r\n  height: " + r5 + "px;\r\n  width: 3px;\r\n  background-color:#ffffff;\r\n}\r\n.vertical .progress-fill-6" + name + " {\r\n  position: relative;\r\n  height: " + r6 + "px;\r\n  width: 3px;\r\n  background-color:#ffffff;\r\n}\r\n.vertical .progress-track-6 {\r\n  position: relative;\r\n   width: 3px;\r\n   height: 100%;\r\n   background: #ffcc00;\r\n}\r\n.vertical .progress-track-7 {\r\n  position: relative;\r\n   width: 3px;\r\n   height: 100%;\r\n   background: #793ff3;\r\n}\r\n.vertical .progress-fill-7" + name + " {\r\n  position: relative;\r\n  height: " + r7 + ";\r\n  width: 3px;\r\n  background-color:#ffffff;\r\n}\r\n                </style>\r\n                " + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j + ",'" + tarname + "')\";return false;\">\r\n                <div class=\"container vertical flat\">\r\n                          <div class=\"progress-bar\">\r\n                            <div class=\"progress-track-1\">\r\n                              <div class=\"progress-fill-1" + name + "\">\r\n                                <span> </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"progress-bar\">\r\n                            <div class=\"progress-track-2\">\r\n                              <div class=\"progress-fill-2" + name + "\">\r\n                                <span> </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"progress-bar\">\r\n                            <div class=\"progress-track-3\">\r\n                              <div class=\"progress-fill-3" + name + "\">\r\n                                <span> </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"progress-bar\">\r\n                            <div class=\"progress-track-4\">\r\n                              <div class=\"progress-fill-4" + name + "\">\r\n                                <span> </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"progress-bar\">\r\n                            <div class=\"progress-track-5\">\r\n                              <div class=\"progress-fill-5" + name + "\">\r\n                                <span> </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"progress-bar\">\r\n                            <div class=\"progress-track-6\">\r\n                              <div class=\"progress-fill-6" + name + "\">\r\n                                <span> </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div class=\"progress-bar\">\r\n                            <div class=\"progress-track-7\">\r\n                              <div class=\"progress-fill-7" + name + "\">\r\n                                <span> </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div></a>";
	}
	,addAnnotData: function(annotData,annotation,option,callback) {
		var i;
		var mapResults;
		mapResults = new haxe.ds.StringMap();
		var j = 0;
		var target;
		var _g1 = 0;
		var _g = annotData.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			target = Std.string(annotData[i1].target_id) + "_" + j;
			while(__map_reserved[target] != null?mapResults.existsReserved(target):mapResults.h.hasOwnProperty(target)) {
				j++;
				target = Std.string(annotData[i1].target_id) + "_" + j;
			}
			j = 0;
			var value = annotData[i1];
			mapResults.set(target,value);
		}
		var items = [];
		var _g11 = 0;
		var _g2 = this.rootNode.targets.length;
		while(_g11 < _g2) {
			var i2 = _g11++;
			items[i2] = this.rootNode.targets[i2];
		}
		this.processAnnotationsSimple(items,mapResults,annotation,option,callback);
	}
	,processAnnotationsSimple: function(items,mapResults,annotation,option,cb) {
		var _g1 = this;
		var toComplete = items.length;
		var onDone = function() {
			if(toComplete == 0) cb();
		};
		if(toComplete == 0) {
			cb();
			return;
		}
		var _g = 0;
		while(_g < items.length) {
			var item = [items[_g]];
			++_g;
			var name = item[0] + "_0";
			var res = [__map_reserved[name] != null?mapResults.getReserved(name):mapResults.h[name]];
			if(this.annotations[annotation].hasClass != null && this.annotations[annotation].hasMethod != null) {
				var clazz = this.annotations[annotation].hasClass;
				var method = this.annotations[annotation].hasMethod;
				var _processAnnotation = (function(res,item) {
					return function(r) {
						if(r.hasAnnot) {
							var leafaux;
							leafaux = _g1.rootNode.leafNameToNode.get(item[0]);
							leafaux.activeAnnotation[annotation] = true;
							if(leafaux.annotations[annotation] == null) {
								leafaux.annotations[annotation] = new phylo.PhyloAnnotation();
								leafaux.annotations[annotation].myleaf = leafaux;
								leafaux.annotations[annotation].text = r.text;
								leafaux.annotations[annotation].defaultImg = _g1.annotations[annotation].defaultImg;
								leafaux.annotations[annotation].saveAnnotationData(annotation,res[0],option,r);
							} else if(_g1.annotations[annotation].splitresults == true) {
								leafaux.annotations[annotation].splitresults = true;
								var z = 0;
								while(leafaux.annotations[annotation].alfaAnnot[z] != null) z++;
								leafaux.annotations[annotation].alfaAnnot[z] = new phylo.PhyloAnnotation();
								leafaux.annotations[annotation].alfaAnnot[z].myleaf = leafaux;
								leafaux.annotations[annotation].alfaAnnot[z].text = "";
								leafaux.annotations[annotation].alfaAnnot[z].defaultImg = _g1.annotations[annotation].defaultImg;
								leafaux.annotations[annotation].alfaAnnot[z].saveAnnotationData(annotation,res[0],option,r);
								if(leafaux.annotations[annotation].alfaAnnot[z].text == leafaux.annotations[annotation].text) leafaux.annotations[annotation].alfaAnnot[z] = null;
							} else if(leafaux.annotations[annotation].option != _g1.annotations[annotation].optionSelected[0]) {
								leafaux.annotations[annotation] = new phylo.PhyloAnnotation();
								leafaux.annotations[annotation].myleaf = leafaux;
								leafaux.annotations[annotation].text = "";
								leafaux.annotations[annotation].defaultImg = _g1.annotations[annotation].defaultImg;
								leafaux.annotations[annotation].saveAnnotationData(annotation,res[0],option,r);
							}
						}
						toComplete--;
						onDone();
					};
				})(res,item);
				if(Reflect.isFunction(method)) method(name,res[0],option,this.annotations,item[0],_processAnnotation); else {
					var hook = Reflect.field(Type.resolveClass(clazz),method);
					hook(name,res[0],option,this.annotations,item[0],_processAnnotation);
				}
			} else {
				var col = "";
				if(this.annotations[annotation].color[0] != null) col = this.annotations[annotation].color[0].color;
				var r1 = { hasAnnot : true, text : "", color : { color : col, used : true}, defImage : this.annotations[annotation].defaultImg};
				var leafaux1 = this.rootNode.leafNameToNode.get(item[0]);
				leafaux1.activeAnnotation[annotation] = true;
				if(leafaux1.annotations[annotation] == null) {
					leafaux1.annotations[annotation] = new phylo.PhyloAnnotation();
					leafaux1.annotations[annotation].myleaf = leafaux1;
					leafaux1.annotations[annotation].text = "";
					leafaux1.annotations[annotation].defaultImg = this.annotations[annotation].defaultImg;
					leafaux1.annotations[annotation].saveAnnotationData(annotation,res[0],option,r1);
				} else if(leafaux1.annotations[annotation].splitresults == true) {
					var z1 = 0;
					while(leafaux1.annotations[annotation].alfaAnnot[z1] != null) z1++;
					leafaux1.annotations[annotation].alfaAnnot[z1] = new phylo.PhyloAnnotation();
					leafaux1.annotations[annotation].alfaAnnot[z1].myleaf = leafaux1;
					leafaux1.annotations[annotation].alfaAnnot[z1].text = "";
					leafaux1.annotations[annotation].alfaAnnot[z1].defaultImg = this.annotations[annotation].defaultImg;
					leafaux1.annotations[annotation].alfaAnnot[z1].saveAnnotationData(annotation,res[0],option,r1);
				} else if(leafaux1.annotations[annotation].option != this.annotations[annotation].optionSelected[0]) {
					leafaux1.annotations[annotation] = new phylo.PhyloAnnotation();
					leafaux1.annotations[annotation].myleaf = leafaux1;
					leafaux1.annotations[annotation].text = "";
					leafaux1.annotations[annotation].defaultImg = this.annotations[annotation].defaultImg;
					leafaux1.annotations[annotation].saveAnnotationData(annotation,res[0],option,r1);
				}
				toComplete--;
				onDone();
			}
		}
	}
	,processFamilyAnnotations: function(items,mapResults,annotation,option,cb) {
		var _g1 = this;
		var toComplete = 0;
		var _g = 0;
		while(_g < items.length) {
			var item = items[_g];
			++_g;
			var name = "";
			var hookCount = 0;
			var index = null;
			var variant = "1";
			var hasName = false;
			if(item.indexOf("(") != -1 || item.indexOf("-") != -1) {
				hasName = true;
				var auxArray = item.split("");
				var _g2 = 0;
				var _g11 = auxArray.length;
				while(_g2 < _g11) {
					var j1 = _g2++;
					if(auxArray[j1] == "(" || auxArray[j1] == "-") {
						if(auxArray[j1] == "(") {
							index = auxArray[j1 + 1];
							variant = "1";
						} else if(auxArray[j1] == "-") {
							index = null;
							variant = auxArray[j1 + 1];
						}
						break;
					}
					name += auxArray[j1];
				}
			} else name = item;
			var j = 0;
			var finished = false;
			var showAsSgc = false;
			while(mapResults.exists(name + "_" + j) == true && finished == false) {
				var keepgoing = true;
				var res = mapResults.get(name + "_" + j);
				if(mapResults.get(name + "_" + j).sgc == 1 || showAsSgc == true) {
					res.sgc = 1;
					showAsSgc = true;
				}
				if(hasName == true) {
					if(res.target_name_index != index || res.variant_index != variant) keepgoing = false;
				}
				if(keepgoing == false) j++; else {
					toComplete += 1;
					if(this.annotations[annotation].hasClass != null && this.annotations[annotation].hasMethod != null) j++; else finished = true;
				}
			}
		}
		var onDone = function() {
			if(toComplete == 0) cb();
		};
		if(toComplete == 0) {
			cb();
			return;
		}
		var _g3 = 0;
		while(_g3 < items.length) {
			var item1 = [items[_g3]];
			++_g3;
			var hookCount1 = 0;
			var index1 = null;
			var variant1 = "1";
			var hasName1 = false;
			var name1 = "";
			if(item1[0].indexOf("(") != -1 || item1[0].indexOf("-") != -1) {
				hasName1 = true;
				var auxArray1 = item1[0].split("");
				var _g21 = 0;
				var _g12 = auxArray1.length;
				while(_g21 < _g12) {
					var j3 = _g21++;
					if(auxArray1[j3] == "(" || auxArray1[j3] == "-") {
						if(auxArray1[j3] == "(") {
							index1 = auxArray1[j3 + 1];
							variant1 = "1";
						} else if(auxArray1[j3] == "-") {
							index1 = null;
							variant1 = auxArray1[j3 + 1];
						}
						break;
					}
					name1 += auxArray1[j3];
				}
			} else name1 = item1[0];
			var j2 = 0;
			var finished1 = false;
			var showAsSgc1 = false;
			while(mapResults.exists(name1 + "_" + j2) == true && finished1 == false) {
				var keepGoing = true;
				var res1 = [mapResults.get(name1 + "_" + j2)];
				if(mapResults.get(name1 + "_" + j2).sgc == 1 || showAsSgc1 == true) {
					res1[0].sgc = 1;
					showAsSgc1 = true;
				}
				if(hasName1 == true) {
					if(res1[0].target_name_index != index1 || res1[0].variant_index != variant1) keepGoing = false;
				}
				if(keepGoing == false) j2++; else if(this.annotations[annotation].hasClass != null && this.annotations[annotation].hasMethod != null) {
					var clazz = this.annotations[annotation].hasClass;
					var method = this.annotations[annotation].hasMethod;
					var _processAnnotation = (function(res1,item1) {
						return function(r) {
							if(r.hasAnnot) {
								var leafaux;
								leafaux = _g1.rootNode.leafNameToNode.get(item1[0]);
								leafaux.activeAnnotation[annotation] = true;
								if(leafaux.annotations[annotation] == null) {
									leafaux.annotations[annotation] = new phylo.PhyloAnnotation();
									leafaux.annotations[annotation].myleaf = leafaux;
									leafaux.annotations[annotation].text = r.text;
									leafaux.annotations[annotation].defaultImg = _g1.annotations[annotation].defaultImg;
									leafaux.annotations[annotation].saveAnnotationData(annotation,res1[0],option,r);
								} else if(_g1.annotations[annotation].splitresults == true) {
									leafaux.annotations[annotation].splitresults = true;
									var z = 0;
									while(leafaux.annotations[annotation].alfaAnnot[z] != null) z++;
									leafaux.annotations[annotation].alfaAnnot[z] = new phylo.PhyloAnnotation();
									leafaux.annotations[annotation].alfaAnnot[z].myleaf = leafaux;
									leafaux.annotations[annotation].alfaAnnot[z].text = "";
									leafaux.annotations[annotation].alfaAnnot[z].defaultImg = _g1.annotations[annotation].defaultImg;
									leafaux.annotations[annotation].alfaAnnot[z].saveAnnotationData(annotation,res1[0],option,r);
									if(leafaux.annotations[annotation].alfaAnnot[z].text == leafaux.annotations[annotation].text) leafaux.annotations[annotation].alfaAnnot[z] = null;
								} else if(leafaux.annotations[annotation].option != _g1.annotations[annotation].optionSelected[0]) {
									leafaux.annotations[annotation] = new phylo.PhyloAnnotation();
									leafaux.annotations[annotation].myleaf = leafaux;
									leafaux.annotations[annotation].text = "";
									leafaux.annotations[annotation].defaultImg = _g1.annotations[annotation].defaultImg;
									leafaux.annotations[annotation].saveAnnotationData(annotation,res1[0],option,r);
								}
							}
							toComplete--;
							onDone();
						};
					})(res1,item1);
					if(Reflect.isFunction(method)) method(name1,res1[0],option,this.annotations,item1[0],_processAnnotation); else {
						var hook = Reflect.field(Type.resolveClass(clazz),method);
						hook(name1,res1[0],option,this.annotations,item1[0],_processAnnotation);
					}
					j2++;
				} else {
					finished1 = true;
					var col = "";
					if(this.annotations[annotation].color[0] != null) col = this.annotations[annotation].color[0].color;
					var r1 = { hasAnnot : true, text : "", color : { color : col, used : true}, defImage : this.annotations[annotation].defaultImg};
					var leafaux1 = this.rootNode.leafNameToNode.get(item1[0]);
					leafaux1.activeAnnotation[annotation] = true;
					if(leafaux1.annotations[annotation] == null) {
						leafaux1.annotations[annotation] = new phylo.PhyloAnnotation();
						leafaux1.annotations[annotation].myleaf = leafaux1;
						leafaux1.annotations[annotation].text = "";
						leafaux1.annotations[annotation].defaultImg = this.annotations[annotation].defaultImg;
						leafaux1.annotations[annotation].saveAnnotationData(annotation,res1[0],option,r1);
					} else if(leafaux1.annotations[annotation].splitresults == true) {
						var z1 = 0;
						while(leafaux1.annotations[annotation].alfaAnnot[z1] != null) z1++;
						leafaux1.annotations[annotation].alfaAnnot[z1] = new phylo.PhyloAnnotation();
						leafaux1.annotations[annotation].alfaAnnot[z1].myleaf = leafaux1;
						leafaux1.annotations[annotation].alfaAnnot[z1].text = "";
						leafaux1.annotations[annotation].alfaAnnot[z1].defaultImg = this.annotations[annotation].defaultImg;
						leafaux1.annotations[annotation].alfaAnnot[z1].saveAnnotationData(annotation,res1[0],option,r1);
					} else if(leafaux1.annotations[annotation].option != this.annotations[annotation].optionSelected[0]) {
						leafaux1.annotations[annotation] = new phylo.PhyloAnnotation();
						leafaux1.annotations[annotation].myleaf = leafaux1;
						leafaux1.annotations[annotation].text = "";
						leafaux1.annotations[annotation].defaultImg = this.annotations[annotation].defaultImg;
						leafaux1.annotations[annotation].saveAnnotationData(annotation,res1[0],option,r1);
					}
					toComplete--;
					onDone();
				}
			}
		}
	}
	,cleanAnnotResults: function(annot) {
		var items = [];
		var _g1 = 0;
		var _g = this.rootNode.targets.length;
		while(_g1 < _g) {
			var i = _g1++;
			var item = this.rootNode.targets[i];
			var leafaux = this.rootNode.leafNameToNode.get(item);
			if(leafaux.annotations[annot] != null) leafaux.annotations[annot].hasAnnot = false;
		}
	}
	,reloadAnnotationConfigurations: function() {
		this.setAnnotationConfigs(this.getAnnotationConfigs(),true,function() {
		});
	}
	,setAnnotationConfigs: function(configs,restoreData,cb) {
		var _g = this;
		this.annotationConfigs = configs;
		this.annotationNameToConfig = new haxe.ds.StringMap();
		var _g1 = 0;
		var _g11 = this.annotationConfigs;
		while(_g1 < _g11.length) {
			var config = _g11[_g1];
			++_g1;
			this.annotationNameToConfig.set(config.name,config);
		}
		var oldData = this.annotationData;
		this.annotationData = [];
		var activeAnnotationNames = new haxe.ds.StringMap();
		saturn.client.core.CommonCore.getDefaultProvider(function(err,provider) {
			if(err == null && provider != null) {
				provider.resetCache();
				var _g2 = 0;
				var _g12 = _g.activeAnnotation.length;
				while(_g2 < _g12) {
					var i = _g2++;
					if(_g.activeAnnotation[i]) {
						activeAnnotationNames.set(_g.annotations[i].label,"");
						_g.activeAnnotation[i] = false;
					}
				}
				if(_g.rootNode != null) _g.rootNode.clearAnnotations();
				_g.annotations = [];
				_g.jsonFile = { btnGroup : [{ title : "Annotations", buttons : []}]};
				var _g21 = 0;
				var _g13 = configs.length;
				while(_g21 < _g13) {
					var i1 = _g21++;
					var config1 = [configs[i1]];
					_g.annotationData[i1] = [];
					var hookName = ["STANDALONE_ANNOTATION_" + i1];
					var def = { label : config1[0].name, hookName : hookName[0], annotCode : i1 + 1, isTitle : false, enabled : true, familyMethod : "", hasMethod : config1[0].styleFunction, hasClass : "", legend : { method : config1[0].legendFunction}, divMethod : config1[0].infoFunction, color : [{ color : config1[0].colour, used : "false"}], shape : config1[0].shape};
					_g.jsonFile.btnGroup[0].buttons.push(def);
					saturn.client.core.CommonCore.getDefaultProvider((function(hookName,config1) {
						return function(error,provider1) {
							provider1.resetCache();
							provider1.addHook(config1[0].annotationFunction,hookName[0]);
						};
					})(hookName,config1));
				}
				_g.fillAnnotationwithJSonData();
				if(restoreData) _g.annotationData = oldData;
				_g.annotationsChanged(activeAnnotationNames);
				cb();
			}
		});
	}
	,getAnnotationConfigs: function() {
		return this.annotationConfigs;
	}
	,getAnnotationConfigByName: function(name) {
		return this.annotationNameToConfig.get(name);
	}
	,getAnnotationConfigById: function(id) {
		return this.getAnnotationConfigByName(this.annotations[id].label);
	}
	,loadAnnotationsFromString: function(annotationString,configs) {
		var _g2 = this;
		this.annotationString = annotationString;
		var lines = annotationString.split("\n");
		var header = lines[0];
		var cols = header.split(",");
		var configMap = new haxe.ds.StringMap();
		if(configs != null) {
			var _g = 0;
			while(_g < configs.length) {
				var config = configs[_g];
				++_g;
				configMap.set(config.name,config);
			}
		}
		var finalConfigs = [];
		var _g1 = 1;
		var _g3 = cols.length;
		while(_g1 < _g3) {
			var i = _g1++;
			var styleAnnotation = function(target,data,selected,annotList,item,callBack) {
				var config1 = _g2.getAnnotationConfigById(selected);
				var r = { hasAnnot : true, text : "", color : config1.getColourOldFormat(), defImage : 100};
				if(data == null || data.annotation == "No") r.hasAnnot = false;
				callBack(r);
			};
			var legendMethod = function(legendWidget,config2) {
				var row = new phylo.PhyloLegendRowWidget(legendWidget,config2);
			};
			var divMethod = function(data1,mx,my) {
				var $window = new phylo.PhyloWindowWidget(window.document.body,data1.target,false);
				var container = $window.getContainer();
				container.style.left = mx;
				container.style.top = my;
				container.style.width = "400px";
				container.style.height = "200px";
			};
			var name = cols[i];
			var hookFunction = $bind(this,this.handleAnnotation);
			var config3 = new phylo.PhyloAnnotationConfiguration();
			config3.shape = "cercle";
			config3.colour = "green";
			config3.name = name;
			config3.styleFunction = styleAnnotation;
			config3.annotationFunction = hookFunction;
			config3.infoFunction = divMethod;
			config3.legendFunction = legendMethod;
			if(__map_reserved[name] != null?configMap.existsReserved(name):configMap.h.hasOwnProperty(name)) {
				var configUser;
				configUser = __map_reserved[name] != null?configMap.getReserved(name):configMap.h[name];
				if(configUser.colour != null) config3.colour = configUser.colour;
				if(configUser.annotationFunction != null) config3.annotationFunction = configUser.annotationFunction;
				if(configUser.styleFunction != null) config3.styleFunction = configUser.styleFunction;
				if(configUser.legendFunction != null) config3.legendFunction = configUser.legendFunction;
				if(configUser.shape != null) config3.shape = configUser.shape;
			}
			finalConfigs.push(config3);
		}
		this.annotationData = [];
		var headerCols = header.split(",");
		var _g11 = 1;
		var _g4 = headerCols.length;
		while(_g11 < _g4) {
			var j = _g11++;
			this.annotationData[j - 1] = [];
		}
		var _g12 = 1;
		var _g5 = lines.length;
		while(_g12 < _g5) {
			var i1 = _g12++;
			var cols1 = lines[i1].split(",");
			var _g31 = 1;
			var _g21 = cols1.length;
			while(_g31 < _g21) {
				var j1 = _g31++;
				this.annotationData[j1 - 1].push({ 'target_id' : cols1[0], 'annotation' : cols1[j1]});
			}
		}
		this.setAnnotationConfigs(finalConfigs,true,function() {
		});
	}
	,handleAnnotation: function(alias,params,clazz,cb) {
		var annotationIndex = Std.parseInt(alias.charAt(alias.length - 1));
		cb(this.annotationData[annotationIndex],null);
	}
	,addAnnotationListener: function(listener) {
		this.annotationListeners.push(listener);
	}
	,annotationsChanged: function(activeAnnotationNames) {
		if(activeAnnotationNames != null) {
			if(this.canvas != null && this.canvas.getConfig().enableAnnotationMenu) {
				this.canvas.getAnnotationMenu().update(activeAnnotationNames);
				return;
			}
		}
		var _g = 0;
		var _g1 = this.annotationListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener();
		}
	}
	,toggleAnnotation: function(annotCode) {
		if(this.isAnnotationActive(annotCode)) this.setActiveAnnotation(annotCode,false); else this.setActiveAnnotation(annotCode,true);
	}
	,isAnnotationActive: function(annotCode) {
		return this.activeAnnotation[annotCode];
	}
	,setActiveAnnotation: function(annotCode,active) {
		var _g = this;
		this.activeAnnotation[annotCode] = active;
		if(active) {
			var annot = this.annotations[annotCode];
			saturn.client.core.CommonCore.getDefaultProvider(function(err,provider) {
				var parameters = _g.canvas.getRootNode().targets;
				provider.getByNamedQuery(annot.hookName,{ param : parameters},null,true,function(db_results,error) {
					if(error == null) _g.canvas.getAnnotationManager().addAnnotData(db_results,annotCode,annotCode,function() {
						_g.annotationsChanged();
					});
				});
			});
		} else this.annotationsChanged();
	}
	,getActiveAnnotations: function() {
		var annotations = [];
		var _g1 = 0;
		var _g = this.activeAnnotation.length;
		while(_g1 < _g) {
			var i = _g1++;
			if(this.activeAnnotation[i]) annotations.push(this.annotations[i]);
		}
		return annotations;
	}
	,getAnnotationString: function() {
		return this.annotationString;
	}
	,setRootNode: function(rootNode) {
		this.rootNode = rootNode;
	}
	,getTreeName: function() {
		return "tree";
	}
	,hideAnnotationWindows: function() {
	}
	,__class__: phylo.PhyloAnnotationManager
};
phylo.PhyloAnnotationMenuWidget = $hxClasses["phylo.PhyloAnnotationMenuWidget"] = function(canvas,activeAnnotations) {
	this.canvas = canvas;
	this.activeAnnotations = activeAnnotations;
	this.build();
};
phylo.PhyloAnnotationMenuWidget.__name__ = ["phylo","PhyloAnnotationMenuWidget"];
phylo.PhyloAnnotationMenuWidget.prototype = {
	canvas: null
	,container: null
	,activeAnnotations: null
	,items: null
	,build: function() {
		this.addContainer();
		this.addAnnotationButtons();
	}
	,getContainer: function() {
		return this.container;
	}
	,update: function(activeAnnotations) {
		this.activeAnnotations = activeAnnotations;
		this.addAnnotationButtons();
	}
	,clearAnnotationItems: function() {
		if(this.items != null) {
			var _g = 0;
			var _g1 = this.items;
			while(_g < _g1.length) {
				var item = _g1[_g];
				++_g;
				this.container.removeChild(item);
			}
		}
	}
	,addContainer: function() {
		this.container = window.document.createElement("div");
		this.container.style.display = "inline-block";
		this.container.style.minWidth = "160px";
		this.container.style.position = "relative";
		this.container.style.verticalAlign = "top";
		this.container.style.height = "100%";
		this.container.style.backgroundColor = "#f7f8fb";
		this.container.marginLeft = "0px";
		this.container.marginTop = "0px";
		this.container.innerHTML = "<h1 style=\"margin-left:5px;margin-right:5px\">Annotations</h1>";
	}
	,addAnnotationButtons: function() {
		var _g3 = this;
		var btnGroups = this.canvas.getAnnotationManager().jsonFile.btnGroup;
		this.clearAnnotationItems();
		this.items = [];
		var _g1 = 0;
		var _g = btnGroups.length;
		while(_g1 < _g) {
			var i = _g1++;
			var btnGroupDef = btnGroups[i];
			var btnDefs = btnGroupDef.buttons;
			var _g2 = 0;
			while(_g2 < btnDefs.length) {
				var btnDef = [btnDefs[_g2]];
				++_g2;
				var row = window.document.createElement("div");
				row.style.display = "flex";
				var tooltipBtn = window.document.createElement("button");
				tooltipBtn.innerText = "?";
				tooltipBtn.style.backgroundColor = "rgb(247, 248, 251)";
				tooltipBtn.style.border = "none";
				tooltipBtn.style.font = "normal 11px/16px tahoma, arial, verdana, sans-serif";
				tooltipBtn.style.cursor = "pointer";
				var enabledBtn = [window.document.createElement("button")];
				enabledBtn[0].innerHTML = " &#9744;";
				enabledBtn[0].style.backgroundColor = "rgb(247, 248, 251)";
				enabledBtn[0].style.border = "none";
				enabledBtn[0].style.font = "normal 16px/20px tahoma, arial, verdana, sans-serif";
				enabledBtn[0].style.cursor = "pointer";
				var btn = [window.document.createElement("button")];
				btn[0].innerText = btnDef[0].label;
				btn[0].style.backgroundColor = "rgb(247, 248, 251)";
				btn[0].style.border = "none";
				btn[0].style.font = "normal 11px/16px tahoma, arial, verdana, sans-serif";
				btn[0].style.cursor = "pointer";
				btn[0].style.textAlign = "left";
				btn[0].style.flexGrow = "1";
				btn[0].setAttribute("title",btnDef[0].helpText);
				btn[0].addEventListener("mouseover",(function(btn) {
					return function() {
						btn[0].style.backgroundColor = "#dddee1";
					};
				})(btn));
				btn[0].addEventListener("mouseout",(function(btn) {
					return function() {
						btn[0].style.backgroundColor = "rgb(247, 248, 251)";
					};
				})(btn));
				btn[0].addEventListener("click",(function(enabledBtn,btnDef) {
					return function() {
						if(_g3.canvas.getAnnotationManager().isAnnotationActive(btnDef[0].annotCode)) enabledBtn[0].innerHTML = "&#9744;"; else enabledBtn[0].innerHTML = "&#9745;";
						_g3.canvas.getAnnotationManager().toggleAnnotation(btnDef[0].annotCode);
					};
				})(enabledBtn,btnDef));
				row.appendChild(tooltipBtn);
				row.appendChild(enabledBtn[0]);
				row.appendChild(btn[0]);
				this.items.push(row);
				this.container.appendChild(row);
				if(this.activeAnnotations != null && (function($this) {
					var $r;
					var key = btnDef[0].label;
					$r = $this.activeAnnotations.exists(key);
					return $r;
				}(this))) {
					this.canvas.getAnnotationManager().toggleAnnotation(btnDef[0].annotCode);
					enabledBtn[0].innerHTML = "&#9745;";
				}
			}
		}
	}
	,__class__: phylo.PhyloAnnotationMenuWidget
};
phylo.PhyloRendererI = $hxClasses["phylo.PhyloRendererI"] = function() { };
phylo.PhyloRendererI.__name__ = ["phylo","PhyloRendererI"];
phylo.PhyloRendererI.prototype = {
	drawLine: null
	,drawText: null
	,startGroup: null
	,endGroup: null
	,mesureText: null
	,__class__: phylo.PhyloRendererI
};
phylo.PhyloCanvasRenderer = $hxClasses["phylo.PhyloCanvasRenderer"] = function(width,height,parentElement,rootNode,config,annotationManager) {
	this.autoFitting = false;
	this.nodeClickListeners = [];
	this.contextDiv = null;
	this.translateY = 0.;
	this.translateX = 0.;
	this.scale = 1.0;
	this.parent = parentElement;
	this.width = width;
	this.height = height;
	this.annotationManager = annotationManager;
	if(this.annotationManager == null) this.annotationManager = new phylo.PhyloAnnotationManager();
	this.annotationManager.addAnnotationListener($bind(this,this.onAnnotationChange));
	this.annotationManager.rootNode = rootNode;
	this.annotationManager.canvas = this;
	this.rootNode = rootNode;
	var doc;
	if(config == null) config = new phylo.PhyloCanvasConfiguration();
	this.config = config;
	config.dataChanged = true;
	if(config.enableTools) this.addNodeClickListener($bind(this,this.defaultNodeClickListener));
	this.createContainer();
	if(config.enableToolbar) this.toolBar = new phylo.PhyloToolBar(this);
	if(this.getConfig().autoFit) this.autoFitRedraw(); else this.redraw(true);
};
phylo.PhyloCanvasRenderer.__name__ = ["phylo","PhyloCanvasRenderer"];
phylo.PhyloCanvasRenderer.__interfaces__ = [phylo.PhyloRendererI];
phylo.PhyloCanvasRenderer.main = function() {
};
phylo.PhyloCanvasRenderer.prototype = {
	canvas: null
	,ctx: null
	,scale: null
	,parent: null
	,rootNode: null
	,cx: null
	,cy: null
	,config: null
	,width: null
	,height: null
	,translateX: null
	,translateY: null
	,selectedNode: null
	,contextDiv: null
	,annotationManager: null
	,nodeClickListeners: null
	,contextMenu: null
	,toolBar: null
	,container: null
	,outerContainer: null
	,autoFitting: null
	,legendWidget: null
	,annotationMenu: null
	,onAnnotationChange: function() {
		this.redraw();
		if(this.config.enableLegend) this.legendWidget.redraw();
	}
	,getRootNode: function() {
		return this.rootNode;
	}
	,getAnnotationManager: function() {
		return this.annotationManager;
	}
	,createContainer: function() {
		this.container = window.document.createElement("div");
		if(this.config.enableAnnotationMenu || this.config.enableLegend || this.config.enableImport) {
			this.outerContainer = window.document.createElement("div");
			this.outerContainer.style.display = "flex";
			this.outerContainer.style.height = "100%";
			var leftContainer = window.document.createElement("div");
			leftContainer.style.height = "100%";
			leftContainer.style.display = "flex";
			leftContainer.style.flexDirection = "column";
			if(this.config.enableAnnotationMenu) {
				this.annotationMenu = new phylo.PhyloAnnotationMenuWidget(this);
				this.annotationMenu.getContainer().style.flexGrow = "1";
				leftContainer.appendChild(this.annotationMenu.getContainer());
			}
			if(this.config.enableImport) {
				var importWidget = new phylo.PhyloImportWidget(this);
				leftContainer.appendChild(importWidget.getContainer());
			}
			this.outerContainer.appendChild(leftContainer);
			this.outerContainer.appendChild(this.container);
			this.container.style.display = "inline-block";
			this.container.style.position = "relative";
			this.container.style.flexGrow = "1";
			if(this.config.enableLegend) {
				this.legendWidget = new phylo.PhyloLegendWidget(this);
				this.outerContainer.appendChild(this.legendWidget.getContainer());
			}
			this.parent.appendChild(this.outerContainer);
		} else {
			this.container.style.height = "100%";
			this.parent.appendChild(this.container);
		}
	}
	,getCanvas: function() {
		return this.canvas;
	}
	,getParent: function() {
		return this.parent;
	}
	,getContainer: function() {
		return this.container;
	}
	,destroy: function() {
		if(this.config.enableAnnotationMenu || this.config.enableLegend || this.config.enableImport) this.parent.removeChild(this.outerContainer); else this.parent.removeChild(this.container);
	}
	,notifyNodeClickListeners: function(node,data,e) {
		var _g = 0;
		var _g1 = this.nodeClickListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(node,data,e);
		}
	}
	,defaultNodeClickListener: function(node,data,e) {
		if(node == null) {
			if(this.contextMenu != null) {
				this.closeContextMenu();
				return;
			}
		} else {
			if(this.contextMenu != null) this.closeContextMenu();
			this.contextMenu = new phylo.PhyloContextMenu(this.parent,this,node,data,e);
		}
	}
	,addNodeClickListener: function(listener) {
		this.nodeClickListeners.push(listener);
	}
	,createCanvas: function() {
		var _g = this;
		if(this.config.enableLegend || this.config.enableAnnotationMenu || this.config.enableAnnotationMenu) {
			this.width = this.container.clientWidth;
			this.height = this.container.clientHeight;
		}
		if(this.canvas != null) {
			this.ctx.save();
			this.ctx.setTransform(1,0,0,1,0,0);
			this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);
			this.ctx.restore();
		} else {
			this.canvas = window.document.createElement("canvas");
			this.container.appendChild(this.canvas);
			this.canvas.width = this.width;
			this.canvas.height = this.height;
			this.ctx = this.canvas.getContext("2d");
			this.cx = Math.round(this.width / 2);
			this.cy = Math.round(this.height / 2);
			this.ctx.translate(this.cx,this.cy);
			if(this.config.enableZoom) {
				this.canvas.addEventListener("mousewheel",function(e) {
					if(e.wheelDelta < 0) _g.zoomIn(); else _g.zoomOut();
				});
				var mouseDownX = 0.;
				var mouseDownY = 0.;
				var mouseDown = false;
				this.canvas.addEventListener("mousedown",function(e1) {
					_g.annotationManager.hideAnnotationWindows();
					_g.annotationManager.closeAnnotWindows();
					mouseDownX = e1.pageX - _g.translateX;
					mouseDownY = e1.pageY - _g.translateY;
					mouseDown = true;
					if(_g.contextDiv != null) {
						_g.container.removeChild(_g.contextDiv);
						_g.contextDiv = null;
					}
					_g.notifyNodeClickListeners(null,null,null);
				});
				this.canvas.addEventListener("mousemove",function(e2) {
					if(mouseDown && mouseDownX != 0 && mouseDownY != 0) {
						_g.newPosition(e2.pageX - mouseDownX,e2.pageY - mouseDownY);
						_g.notifyNodeClickListeners(null,null,null);
					}
				});
				this.canvas.addEventListener("mouseup",function(e3) {
					mouseDown = false;
					mouseDownX = 0;
					mouseDownY = 0;
					var d = _g.checkPosition(e3);
					if(d != null) {
						if(d.isAnnot == true) _g.annotationManager.showScreenData(false,d,e3.pageX,e3.pageY); else {
							_g.selectedNode = _g.rootNode.nodeIdToNode.get(d.nodeId);
							_g.notifyNodeClickListeners(_g.selectedNode,d,e3);
						}
					} else _g.notifyNodeClickListeners(null,null,e3);
				});
			}
		}
	}
	,exportPNG: function(cb) {
		this.canvas.toBlob(function(blob) {
			cb(blob);
		});
	}
	,exportPNGToFile: function() {
		var _g = this;
		this.exportPNG(function(blob) {
			var uWin = window;
			uWin.saveAs(blob,_g.getAnnotationManager().getTreeName() + "_tree.png");
		});
	}
	,exportSVG: function() {
		var width = this.width;
		var height = this.height;
		var svgCtx = new C2S(width,height);
		var ctx = this.ctx;
		this.ctx = svgCtx;
		var rTranslateX = this.translateX;
		var rTranslateY = this.translateY;
		this.translateX = width / 2;
		this.translateY = height / 2;
		this.redraw(false);
		this.translateX = rTranslateX;
		this.translateY = rTranslateY;
		this.ctx = ctx;
		return svgCtx.getSerializedSvg(true);
	}
	,exportSVGToFile: function() {
		var svgStr = this.exportSVG();
		var blob = new Blob([svgStr],{ type : "text/plain;charset=utf-8"});
		var uWin = window;
		uWin.saveAs(blob,this.getAnnotationManager().getTreeName() + "_tree.svg");
	}
	,showHighlightDialog: function() {
		var dialog = new phylo.PhyloHighlightWidget(this.parent,this);
	}
	,center: function() {
		this.newPosition(0,0);
	}
	,newPosition: function(x,y) {
		this.createCanvas();
		this.translateX = x;
		this.translateY = y;
		this.redraw(false);
	}
	,drawLine: function(x0,y0,x1,y1,strokeStyle,lineWidth) {
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.strokeStyle = strokeStyle;
		this.ctx.beginPath();
		this.ctx.moveTo(Math.round(x0),Math.round(y0));
		this.ctx.lineTo(Math.round(x1),Math.round(y1));
		this.ctx.lineWidth = lineWidth;
		this.ctx.stroke();
		this.ctx.restore();
	}
	,drawArc: function(x,y,radius,sAngle,eAngle,strokeStyle,lineWidth) {
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.strokeStyle = strokeStyle;
		this.ctx.beginPath();
		this.ctx.arc(x,y,Math.abs(radius),sAngle,eAngle);
		this.ctx.lineWidth = lineWidth;
		this.ctx.stroke();
		this.ctx.restore();
	}
	,drawWedge: function(x,y,radius,sAngle,eAngle,strokeStyle,lineWidth) {
		this.ctx.save();
		this.ctx.fillStyle = strokeStyle;
		this.ctx.globalAlpha = 0.5;
		this.ctx.strokeStyle = strokeStyle;
		this.ctx.beginPath();
		this.ctx.moveTo(0,0);
		this.ctx.arc(x,y,Math.abs(radius),sAngle,eAngle);
		this.ctx.lineWidth = lineWidth;
		this.ctx.stroke();
		this.ctx.closePath();
		this.ctx.fill();
		this.ctx.restore();
	}
	,bezierCurve: function(x0,y0,x1,y1,firstX,firstY,secondX,secondY,strokeStyle,lineWidth) {
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.strokeStyle = strokeStyle;
		this.ctx.beginPath();
		this.ctx.moveTo(Math.round(x0),Math.round(y0));
		this.ctx.bezierCurveTo(Math.round(firstX),Math.round(firstY),Math.round(secondX),Math.round(secondY),Math.round(x1),Math.round(y1));
		this.ctx.lineWidth = lineWidth;
		this.ctx.stroke();
		this.ctx.restore();
	}
	,drawText: function(text,tx,ty,x,y,rotation,textAlign,color) {
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.translate(tx,ty);
		this.ctx.rotate(rotation);
		this.ctx.textAlign = textAlign;
		this.ctx.fillStyle = color;
		this.ctx.fillText(text,x,y);
		this.ctx.restore();
	}
	,drawTextNoTranslate: function(text,tx,ty,x,y,rotation,textAlign,color) {
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.translate(tx,ty);
		this.ctx.rotate(rotation);
		this.ctx.textAlign = textAlign;
		this.ctx.fillStyle = color;
		this.ctx.fillText(text,x,y);
		this.ctx.restore();
	}
	,drawSquare: function(tx,ty,color) {
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.beginPath();
		this.ctx.rect(tx,ty,10,10);
		this.ctx.fillStyle = color;
		this.ctx.fill();
		this.ctx.restore();
	}
	,drawCircle: function(tx,ty,color) {
		var radius = 5;
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.beginPath();
		this.ctx.strokeStyle = color;
		this.ctx.arc(tx,ty,radius,0,2 * Math.PI);
		this.ctx.fillStyle = color;
		this.ctx.fill();
		this.ctx.restore();
	}
	,drawGraphic: function(tx,ty,columns) {
		this.ctx.save();
		this.applyDefaultConfiguration();
		this.ctx.beginPath();
		this.ctx.moveTo(Math.round(tx),Math.round(ty - 10));
		this.ctx.moveTo(Math.round(tx),Math.round(ty + 6));
		this.ctx.lineTo(Math.round(tx + 14),Math.round(ty + 6));
		this.ctx.strokeStyle = "rgb(6,6,6)";
		this.ctx.stroke();
		var len = columns[1];
		var pos = ty + 6 - columns[1];
		this.ctx.fillStyle = "rgb(41,128,214)";
		this.ctx.rect(tx + 1,pos,2,len);
		var len2 = columns[2];
		var pos2 = ty + 6 - columns[2];
		this.ctx.fillStyle = "rgb(191,0,0)";
		this.ctx.fillRect(tx + 3,pos2,2,len2);
		var len3 = columns[3];
		var pos3 = ty + 6 - columns[3];
		this.ctx.fillStyle = "rgb(99,207,27)";
		this.ctx.fillRect(tx + 5,pos3,2,len3);
		var len4 = columns[4];
		var pos4 = ty + 6 - columns[4];
		this.ctx.fillStyle = "rgb(255,128,0)";
		this.ctx.fillRect(tx + 7,pos4,2,len4);
		var len5 = columns[5];
		var pos5 = ty + 6 - columns[5];
		this.ctx.fillStyle = "rgb(192,86,145)";
		this.ctx.fillRect(tx + 9,pos5,2,len5);
		var len6 = columns[6];
		var pos6 = ty + 6 - columns[6];
		this.ctx.fillStyle = "rgb(255,204,0)";
		this.ctx.fillRect(tx + 11,pos6,2,len6);
		var len7 = columns[7];
		var pos7 = ty + 6 - columns[7];
		this.ctx.fillStyle = "rgb(121,63,243)";
		this.ctx.fillRect(tx + 13,pos7,2,len7);
		this.ctx.restore();
	}
	,drawImg: function(tx,ty,img,mode) {
		this.applyDefaultConfiguration();
		if(mode == 0) this.ctx.drawImage(img,tx,ty); else this.ctx.drawImage(img,28,0,125,125,tx,ty,20,20);
	}
	,mesureText: function(text) {
		return this.ctx.measureText(text).width;
	}
	,startGroup: function(groupName) {
	}
	,endGroup: function() {
	}
	,zoomIn: function(scale) {
		if(scale == null) {
			if(this.config.scale <= 4.0) this.config.scale = this.config.scale + 0.2;
			scale = this.config.scale;
		}
		this.scale = scale;
		this.redraw();
	}
	,zoomOut: function(scale) {
		if(scale == null) {
			this.config.scale = this.config.scale - 0.2;
			scale = this.config.scale;
		}
		this.scale = scale;
		this.redraw();
	}
	,updateActions: function() {
		if(this.toolBar != null) {
			this.toolBar.setLineTypeButtonVisible(this.config.drawingMode == phylo.PhyloDrawingMode.STRAIGHT);
			this.toolBar.setTitle(this.config.title);
		}
	}
	,autoFitRedraw: function() {
		var _g = this;
		this.autoFitting = true;
		this.config.dataChanged = true;
		this.redraw(true);
		haxe.Timer.delay(function() {
			_g.autoFit();
			_g.autoFitting = false;
			_g.canvas.style.display = "block";
		},1);
	}
	,redraw: function(create) {
		if(create == null) create = true;
		if(!this.autoFitting && this.config.autoFit && this.config.dataChanged) {
			this.autoFitRedraw();
			return;
		}
		this.updateActions();
		if(create) this.createCanvas();
		if(this.autoFitting) this.canvas.style.display = "none";
		var newWidth = this.canvas.width * this.scale;
		var newHeight = this.canvas.height * this.scale;
		this.ctx.save();
		this.ctx.translate(0,0);
		this.ctx.scale(1,1);
		this.ctx.clearRect(0,0,this.width,this.height);
		this.ctx.translate(this.translateX,this.translateY);
		this.ctx.scale(this.scale,this.scale);
		var radialRendererObj = new phylo.PhyloRadialTreeLayout(this.canvas.width,this.canvas.height);
		this.rootNode.screen = [];
		this.rootNode.rectangleLeft = this.rootNode.children[0].x | 0;
		this.rootNode.rectangleRight = this.rootNode.children[0].x | 0;
		this.rootNode.rectangleBottom = this.rootNode.children[0].y | 0;
		this.rootNode.rectangleTop = this.rootNode.children[0].y | 0;
		if(this.config.drawingMode == phylo.PhyloDrawingMode.CIRCULAR) radialRendererObj.renderCircle(this.rootNode,this,this.annotationManager.activeAnnotation,this.annotationManager.annotations); else radialRendererObj.render(this.rootNode,this,this.annotationManager.activeAnnotation,this.annotationManager.annotations);
		this.ctx.restore();
		this.config.dataChanged = false;
	}
	,setConfig: function(config) {
		this.config = config;
	}
	,getConfig: function() {
		return this.config;
	}
	,applyDefaultConfiguration: function() {
		if(this.config.enableShadow) {
			this.ctx.shadowOffsetX = 4;
			this.ctx.shadowOffsetY = 4;
			this.ctx.shadowBlur = 7;
			this.ctx.shadowColor = this.config.shadowColour;
		}
	}
	,checkPosition: function(e) {
		var i;
		var j;
		var sx;
		var sy;
		var res;
		res = false;
		var auxx;
		var auxy;
		var elementOffsetX = this.canvas.getBoundingClientRect().left - window.document.getElementsByTagName("html")[0].getBoundingClientRect().left;
		var auxx1 = e.clientX + window.pageXOffset - elementOffsetX - this.translateX;
		var elementOffsetY = this.canvas.getBoundingClientRect().top - window.document.getElementsByTagName("html")[0].getBoundingClientRect().top;
		var auxy1 = e.clientY + window.pageYOffset - elementOffsetY - this.translateY;
		var x;
		var y;
		x = auxx1 - Math.round(this.cx);
		y = auxy1 - Math.round(this.cy);
		var active;
		active = false;
		i = 0;
		while(i < this.rootNode.screen.length && res == false) {
			if(this.rootNode.screen[i].checkMouse(x,y) == true) {
				res = true;
				this.rootNode.screen[i].root = this.rootNode;
				this.rootNode.divactive = i;
			} else this.rootNode.screen[i].created = false;
			i = i + 1;
		}
		if(res == true) return this.rootNode.screen[i - 1]; else return null;
	}
	,setLineWidth: function(width) {
		this.rootNode.setLineWidth(width);
		this.redraw();
	}
	,toggleType: function() {
		this.dataChanged(true);
		this.translateX = 0;
		this.translateY = 0;
		if(this.config.drawingMode == phylo.PhyloDrawingMode.CIRCULAR) {
			this.config.drawingMode = phylo.PhyloDrawingMode.STRAIGHT;
			this.rootNode.preOrderTraversal2();
		} else {
			this.config.drawingMode = phylo.PhyloDrawingMode.CIRCULAR;
			this.rootNode.preOrderTraversal();
		}
		this.closeContextMenu();
		this.redraw();
	}
	,closeContextMenu: function() {
		if(this.contextMenu != null) {
			this.contextMenu.close();
			this.contextMenu = null;
		}
	}
	,toggleLineMode: function() {
		if(this.config.bezierLines) {
			this.rootNode.setLineMode(phylo.LineMode.STRAIGHT);
			this.config.bezierLines = false;
		} else {
			this.rootNode.setLineMode(phylo.LineMode.BEZIER);
			this.config.bezierLines = true;
		}
		this.redraw();
	}
	,rotateNode: function(node,clockwise) {
		node.rotateNode(clockwise,this.getConfig().drawingMode);
		this.redraw();
	}
	,setShadowColour: function(colour) {
		if(colour == null) {
			this.getConfig().shadowColour = null;
			this.getConfig().enableShadow = false;
		} else {
			this.getConfig().shadowColour = colour;
			this.getConfig().enableShadow = true;
		}
		this.redraw();
	}
	,toggleShadow: function() {
		this.getConfig().enableShadow = !this.getConfig().enableShadow;
		this.redraw();
	}
	,autoFit: function() {
		var minX = null;
		var maxX = null;
		var minY = null;
		var maxY = null;
		var screenDataList = this.rootNode.screen;
		var _g = 0;
		while(_g < screenDataList.length) {
			var screenData = screenDataList[_g];
			++_g;
			var x = screenData.x;
			var y = screenData.y;
			if(minX == null || x < minX) minX = x;
			if(maxX == null || x > maxX) maxX = x;
			if(minY == null || y < minY) minY = y;
			if(maxY == null || y > maxY) maxY = y;
		}
		var requiredWidth = maxX - minX + 300;
		var requiredHeight = maxY - minY + 300;
		var widthScale = 1.;
		var heightScale = 1.;
		widthScale = this.width / requiredWidth;
		heightScale = this.height / requiredHeight;
		var fitScale = 1.;
		if(widthScale < 1 || heightScale < 1) fitScale = Math.min(widthScale,heightScale);
		if(this.config.drawingMode != phylo.PhyloDrawingMode.CIRCULAR) {
		}
		if(fitScale == this.scale) {
		} else {
			this.config.autoFit = true;
			this.config.dataChanged = true;
			this.setScale(fitScale,false);
		}
	}
	,setScale: function(scale,disableAutoFit) {
		if(disableAutoFit == null) disableAutoFit = true;
		this.scale = scale;
		this.config.scale = scale;
		if(disableAutoFit) this.config.autoFit = false;
		this.redraw(true);
	}
	,dataChanged: function(changed) {
		this.getConfig().scale = 1;
		this.scale = 1;
		this.getConfig().dataChanged = changed;
	}
	,setNewickString: function(newickString) {
		var parser = new phylo.PhyloNewickParser();
		var rootNode = parser.parse(newickString);
		rootNode.calculateScale();
		rootNode.postOrderTraversal();
		if(this.config.drawingMode == phylo.PhyloDrawingMode.CIRCULAR) rootNode.preOrderTraversal(1); else rootNode.preOrderTraversal2(1);
		this.rootNode = rootNode;
		this.getAnnotationManager().setRootNode(rootNode);
		if(this.getAnnotationManager().getAnnotationString() != null) {
			this.getAnnotationManager().loadAnnotationsFromString(this.getAnnotationManager().getAnnotationString(),this.getAnnotationManager().getAnnotationConfigs());
			this.redraw(true);
		} else this.redraw(true);
	}
	,getAnnotationMenu: function() {
		return this.annotationMenu;
	}
	,setFromFasta: function(fasta) {
		var _g = this;
		saturn.client.BioinformaticsServicesClient.getClient().sendPhyloReportRequest(fasta,function(response,error) {
			var phyloReport = response.json.phyloReport;
			var location = window.location;
			var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + phyloReport;
			var fetchFunc = fetch;
			fetchFunc(dstURL).then(function(response1) {
				response1.text().then(function(text) {
					_g.setNewickString(text);
					_g.rootNode.setFasta(fasta);
				});
			});
		});
	}
	,__class__: phylo.PhyloCanvasRenderer
};
phylo.PhyloCanvasConfiguration = $hxClasses["phylo.PhyloCanvasConfiguration"] = function() {
	this.enableFastaImport = false;
	this.enableImport = false;
	this.enableLegend = false;
	this.enableAnnotationMenu = false;
	this.dataChanged = false;
	this.autoFit = true;
	this.verticalToolBar = false;
	this.enableToolbar = false;
	this.enableTools = false;
	this.scale = 1;
	this.enableZoom = false;
	this.highlightedGenes = new haxe.ds.StringMap();
	this.editmode = false;
	this.drawingMode = phylo.PhyloDrawingMode.CIRCULAR;
	this.bezierLines = false;
	this.shadowColour = "gray";
	this.enableShadow = false;
};
phylo.PhyloCanvasConfiguration.__name__ = ["phylo","PhyloCanvasConfiguration"];
phylo.PhyloCanvasConfiguration.prototype = {
	enableShadow: null
	,shadowColour: null
	,bezierLines: null
	,drawingMode: null
	,editmode: null
	,highlightedGenes: null
	,enableZoom: null
	,scale: null
	,enableTools: null
	,enableToolbar: null
	,verticalToolBar: null
	,autoFit: null
	,dataChanged: null
	,title: null
	,enableAnnotationMenu: null
	,enableLegend: null
	,enableImport: null
	,enableFastaImport: null
	,__class__: phylo.PhyloCanvasConfiguration
};
phylo.PhyloDrawingMode = $hxClasses["phylo.PhyloDrawingMode"] = { __ename__ : ["phylo","PhyloDrawingMode"], __constructs__ : ["STRAIGHT","CIRCULAR"] };
phylo.PhyloDrawingMode.STRAIGHT = ["STRAIGHT",0];
phylo.PhyloDrawingMode.STRAIGHT.toString = $estr;
phylo.PhyloDrawingMode.STRAIGHT.__enum__ = phylo.PhyloDrawingMode;
phylo.PhyloDrawingMode.CIRCULAR = ["CIRCULAR",1];
phylo.PhyloDrawingMode.CIRCULAR.toString = $estr;
phylo.PhyloDrawingMode.CIRCULAR.__enum__ = phylo.PhyloDrawingMode;
phylo.PhyloContextMenu = $hxClasses["phylo.PhyloContextMenu"] = function(parent,canvas,node,data,e) {
	this.parent = parent;
	this.node = node;
	this.data = data;
	this.e = e;
	this.canvas = canvas;
	this.build();
};
phylo.PhyloContextMenu.__name__ = ["phylo","PhyloContextMenu"];
phylo.PhyloContextMenu.prototype = {
	contextContainer: null
	,parent: null
	,node: null
	,data: null
	,e: null
	,canvas: null
	,build: function() {
		this.addContainer();
		if(this.canvas.getConfig().drawingMode == phylo.PhyloDrawingMode.CIRCULAR) this.addWedgeOptions();
		this.addColourOption();
		if(this.canvas.getConfig().drawingMode == phylo.PhyloDrawingMode.STRAIGHT) this.addRotateNode();
		this.parent.appendChild(this.contextContainer);
	}
	,addContainer: function() {
		this.contextContainer = window.document.createElement("div");
		this.contextContainer.style.position = "absolute";
		this.contextContainer.style.left = this.e.offsetX;
		this.contextContainer.style.top = this.e.offsetY;
		this.contextContainer.style.background = "#f7f8fb";
		this.contextContainer.style.color = "black";
		this.contextContainer.style.padding = "4px";
	}
	,destroyContainer: function() {
		this.parent.removeChild(this.contextContainer);
		this.parent = null;
		this.node = null;
		this.data = null;
		this.e = null;
		this.canvas = null;
	}
	,close: function() {
		this.destroyContainer();
	}
	,addColourOption: function() {
		var _g = this;
		var rowContainer = window.document.createElement("div");
		var lineColourInputLabel = window.document.createElement("label");
		var lineColourRemoveButton = window.document.createElement("button");
		lineColourInputLabel.setAttribute("for","line_colour_input");
		lineColourInputLabel.innerText = "Pick line colour";
		lineColourInputLabel.style.width = "100px";
		lineColourInputLabel.style.display = "inline-block";
		var lineInputColour = window.document.createElement("input");
		lineInputColour.setAttribute("type","color");
		lineInputColour.setAttribute("name","line_colour_input");
		lineInputColour.style.width = "100px";
		lineInputColour.addEventListener("change",function() {
			_g.node.colour = lineInputColour.value;
			lineColourRemoveButton.style.display = "inline-block";
			_g.canvas.redraw();
		});
		rowContainer.appendChild(lineColourInputLabel);
		rowContainer.appendChild(lineInputColour);
		lineColourRemoveButton.setAttribute("for","wedge_colour_input");
		lineColourRemoveButton.innerText = "Remove";
		lineColourRemoveButton.style.marginLeft = "5px";
		lineColourRemoveButton.style.display = "none";
		lineColourRemoveButton.style.width = "100px";
		lineColourRemoveButton.addEventListener("click",function() {
			_g.node.colour = null;
			lineColourRemoveButton.style.display = "none";
			_g.canvas.redraw();
		});
		rowContainer.appendChild(lineColourRemoveButton);
		if(this.node.colour != null) lineColourRemoveButton.style.display = "inline-block";
		this.contextContainer.appendChild(rowContainer);
	}
	,addWedgeOptions: function() {
		var _g = this;
		var rowContainer = window.document.createElement("div");
		var wedgeInputLabel = window.document.createElement("label");
		var wedgeButtonLabel = window.document.createElement("button");
		wedgeInputLabel.setAttribute("for","wedge_colour_input");
		wedgeInputLabel.setAttribute("for","wedge_colour_input");
		wedgeInputLabel.innerText = "Pick wedge colour";
		wedgeInputLabel.style.width = "100px";
		wedgeInputLabel.style.display = "inline-block";
		var wedgeInputColour = window.document.createElement("input");
		wedgeInputColour.setAttribute("type","color");
		wedgeInputColour.setAttribute("name","wedge_colour_input");
		wedgeInputColour.style.width = "100px";
		wedgeInputColour.addEventListener("change",function() {
			_g.node.wedgeColour = wedgeInputColour.value;
			wedgeButtonLabel.style.display = "inline-block";
			_g.canvas.redraw();
		});
		rowContainer.appendChild(wedgeInputLabel);
		rowContainer.appendChild(wedgeInputColour);
		wedgeButtonLabel.setAttribute("for","wedge_colour_input");
		wedgeButtonLabel.setAttribute("for","wedge_colour_input");
		wedgeButtonLabel.innerText = "Remove";
		wedgeButtonLabel.style.marginLeft = "5px";
		wedgeButtonLabel.style.width = "100px";
		wedgeButtonLabel.style.display = "none";
		wedgeButtonLabel.addEventListener("click",function() {
			_g.node.wedgeColour = null;
			wedgeButtonLabel.style.display = "none";
			_g.canvas.redraw();
		});
		rowContainer.appendChild(wedgeButtonLabel);
		if(this.node.wedgeColour != null) wedgeButtonLabel.style.display = "inline-block";
		this.contextContainer.appendChild(rowContainer);
	}
	,addRotateNode: function() {
		var _g = this;
		var rowContainer = window.document.createElement("div");
		var label = window.document.createElement("label");
		label.innerText = "Rotate branch";
		label.style.display = "inline-block";
		label.style.width = "100px";
		rowContainer.appendChild(label);
		var rotateNodeClockwiseButton = window.document.createElement("button");
		rotateNodeClockwiseButton.innerText = "Clockwise";
		rotateNodeClockwiseButton.style.marginRight = "5px";
		rotateNodeClockwiseButton.style.width = "100px";
		rotateNodeClockwiseButton.style.display = "inline-block";
		rotateNodeClockwiseButton.addEventListener("click",function(e) {
			_g.canvas.rotateNode(_g.node,true);
		});
		rowContainer.appendChild(rotateNodeClockwiseButton);
		var rotateNodeAnticlockwiseButton = window.document.createElement("button");
		rotateNodeAnticlockwiseButton.innerText = "Anticlockwise";
		rotateNodeAnticlockwiseButton.style.marginRight = "5px";
		rotateNodeAnticlockwiseButton.style.width = "100px";
		rotateNodeAnticlockwiseButton.style.display = "inline-block";
		rotateNodeAnticlockwiseButton.addEventListener("click",function(e1) {
			_g.canvas.rotateNode(_g.node,false);
		});
		rowContainer.appendChild(rotateNodeAnticlockwiseButton);
		this.contextContainer.appendChild(rowContainer);
	}
	,__class__: phylo.PhyloContextMenu
};
phylo.PhyloWindowWidget = $hxClasses["phylo.PhyloWindowWidget"] = function(parent,title,modal) {
	if(modal == null) modal = false;
	this.parent = parent;
	this.title = title;
	this.modal = modal;
	this.build();
};
phylo.PhyloWindowWidget.__name__ = ["phylo","PhyloWindowWidget"];
phylo.PhyloWindowWidget.prototype = {
	container: null
	,content: null
	,parent: null
	,header: null
	,title: null
	,modal: null
	,onCloseFunc: null
	,setOnCloseEvent: function(func) {
		this.onCloseFunc = func;
	}
	,build: function() {
		this.addContainer();
		this.addWindowHeader();
		this.addContent();
		this.container.appendChild(this.content);
	}
	,getContainer: function() {
		return this.container;
	}
	,getContent: function() {
		return this.content;
	}
	,addContainer: function() {
		this.container = window.document.createElement("div");
		this.container.style.position = "fixed";
		this.container.style.zIndex = 1;
		this.container.style.paddingTop = "20px";
		this.container.style.left = 0;
		this.container.style.top = 0;
		this.container.style.minWidth = "200px";
		this.container.style.minHeight = "100px";
		this.container.style.backgroundColor = "rgb(247, 248, 251)";
		if(!this.isModal()) this.installMoveListeners();
		this.parent.appendChild(this.container);
	}
	,isModal: function() {
		return this.modal;
	}
	,addWindowHeader: function() {
		this.header = window.document.createElement("div");
		this.header.style.position = "absolute";
		this.header.style.top = "0px";
		this.header.style.backgroundColor = "rgb(125, 117, 117)";
		this.header.style.height = "20px";
		this.header.style.width = "100%";
		this.addTitle();
		this.addCloseButton();
		this.container.appendChild(this.header);
	}
	,addTitle: function() {
		var titleSpan = window.document.createElement("span");
		titleSpan.innerText = this.title;
		titleSpan.style.color = "white";
		titleSpan.style.fontSize = "16px";
		titleSpan.style.fontWeight = "bold";
		this.header.appendChild(titleSpan);
	}
	,addCloseButton: function() {
		var _g = this;
		var closeButton = window.document.createElement("span");
		closeButton.style.color = "white";
		closeButton.style["float"] = "right";
		closeButton.style.fontSize = "16px";
		closeButton.style.fontWeight = "bold";
		closeButton.innerHTML = "&times;";
		closeButton.style.cursor = "pointer";
		closeButton.addEventListener("click",function(e) {
			_g.close();
		});
		this.header.appendChild(closeButton);
	}
	,addContent: function() {
		this.content = window.document.createElement("div");
		this.content.style.backgroundColor = "#fefefe";
		this.content.style.width = "100%";
	}
	,close: function() {
		this.onClose();
		this.parent.removeChild(this.container);
	}
	,onClose: function() {
		if(this.onCloseFunc != null) this.onCloseFunc(this);
	}
	,installMoveListeners: function() {
		var _g = this;
		var isDown = false;
		var offsetX = 0.;
		var offsetY = 0.;
		var moveListener = function(event) {
			event.preventDefault();
			if(isDown) {
				_g.container.style.left = event.clientX + offsetX + "px";
				_g.container.style.top = event.clientY + offsetY + "px";
			}
		};
		this.container.addEventListener("mousedown",function(e) {
			isDown = true;
			offsetX = _g.container.offsetLeft - e.clientX;
			offsetY = _g.container.offsetTop - e.clientY;
			window.document.body.addEventListener("mousemove",moveListener);
		});
		this.container.addEventListener("mouseup",function() {
			isDown = false;
			window.document.body.removeEventListener("mousemove",moveListener);
		});
	}
	,__class__: phylo.PhyloWindowWidget
};
phylo.PhyloGlassPaneWidget = $hxClasses["phylo.PhyloGlassPaneWidget"] = function(parent,title,modal) {
	if(modal == null) modal = true;
	phylo.PhyloWindowWidget.call(this,parent,title,modal);
	this.container.style.width = "100%";
	this.container.style.height = "100%";
	this.container.style.backgroundColor = "rgba(0,0,0,0.4)";
	this.header.style.width = "50%";
	this.header.style.margin = "auto";
	this.header.style.position = "initial";
	this.header.style.padding = "20px";
	this.content.style.backgroundColor = "#fefefe";
	this.content.style.margin = "auto";
	this.content.style.padding = "20px";
	this.content.style.width = "50%";
};
phylo.PhyloGlassPaneWidget.__name__ = ["phylo","PhyloGlassPaneWidget"];
phylo.PhyloGlassPaneWidget.__super__ = phylo.PhyloWindowWidget;
phylo.PhyloGlassPaneWidget.prototype = $extend(phylo.PhyloWindowWidget.prototype,{
	addContainer: function() {
		phylo.PhyloWindowWidget.prototype.addContainer.call(this);
	}
	,__class__: phylo.PhyloGlassPaneWidget
});
phylo.PhyloHighlightWidget = $hxClasses["phylo.PhyloHighlightWidget"] = function(parent,canvas) {
	this.canvas = canvas;
	phylo.PhyloGlassPaneWidget.call(this,parent,"Select genes to highlight in tree",true);
};
phylo.PhyloHighlightWidget.__name__ = ["phylo","PhyloHighlightWidget"];
phylo.PhyloHighlightWidget.__super__ = phylo.PhyloGlassPaneWidget;
phylo.PhyloHighlightWidget.prototype = $extend(phylo.PhyloGlassPaneWidget.prototype,{
	highlightInputs: null
	,canvas: null
	,onClose: function() {
		this.canvas.getConfig().highlightedGenes = new haxe.ds.StringMap();
		var _g = 0;
		var _g1 = this.highlightInputs;
		while(_g < _g1.length) {
			var inputElement = _g1[_g];
			++_g;
			if(inputElement.checked) {
				var this1 = this.canvas.getConfig().highlightedGenes;
				var key = inputElement.getAttribute("value");
				this1.set(key,true);
			}
		}
		this.canvas.redraw();
	}
	,addContent: function() {
		phylo.PhyloGlassPaneWidget.prototype.addContent.call(this);
		this.addHighlightList();
	}
	,addHighlightList: function() {
		var formContainer = window.document.createElement("div");
		formContainer.setAttribute("id","highlight-box");
		formContainer.style.margin = "auto";
		formContainer.style.overflowY = "scroll";
		formContainer.style.height = "75%";
		this.highlightInputs = [];
		var targets = this.canvas.getRootNode().targets;
		targets.sort(function(a,b) {
			var targetA = a.toUpperCase();
			var targetB = b.toUpperCase();
			if(targetA < targetB) return -1; else if(targetA > targetB) return 1; else return 0;
		});
		var i = 0;
		var _g = 0;
		while(_g < targets.length) {
			var target = targets[_g];
			++_g;
			if(target == null || target == "") continue;
			i += 1;
			var elementWrapper = window.document.createElement("div");
			elementWrapper.setAttribute("class","element-wrapper");
			elementWrapper.style["float"] = "left";
			elementWrapper.style.marginRight = "28px";
			elementWrapper.style.marginBottom = "10px";
			var name = "target_highlight_" + i;
			var inputLabel = window.document.createElement("label");
			inputLabel.setAttribute("for",name);
			inputLabel.innerText = target;
			inputLabel.style["float"] = "left";
			inputLabel.style.width = "55px";
			inputLabel.style.margin = "0";
			var inputElement = window.document.createElement("input");
			inputElement.setAttribute("type","checkbox");
			inputElement.setAttribute("value",target);
			inputElement.setAttribute("name",name);
			inputElement.style.width = "15px";
			inputElement.style.height = "15px";
			inputElement.style.margin = "1px";
			this.highlightInputs.push(inputElement);
			formContainer.appendChild(elementWrapper);
			elementWrapper.appendChild(inputLabel);
			elementWrapper.appendChild(inputElement);
		}
		this.content.appendChild(formContainer);
	}
	,__class__: phylo.PhyloHighlightWidget
});
phylo.PhyloHubMath = $hxClasses["phylo.PhyloHubMath"] = function() { };
phylo.PhyloHubMath.__name__ = ["phylo","PhyloHubMath"];
phylo.PhyloHubMath.degreesToRadians = function(a) {
	return a * (Math.PI / 180);
};
phylo.PhyloHubMath.radiansToDegrees = function(b) {
	return b * (180 / Math.PI);
};
phylo.PhyloHubMath.getMaxOfArray = function(a) {
	var i;
	var n;
	n = a[0];
	var _g1 = 1;
	var _g = a.length;
	while(_g1 < _g) {
		var i1 = _g1++;
		if(n < a[i1]) n = a[i1];
	}
	return n;
};
phylo.PhyloImportWidget = $hxClasses["phylo.PhyloImportWidget"] = function(canvas) {
	this.canvas = canvas;
	this.build();
};
phylo.PhyloImportWidget.__name__ = ["phylo","PhyloImportWidget"];
phylo.PhyloImportWidget.prototype = {
	canvas: null
	,container: null
	,build: function() {
		this.addContainer();
	}
	,getContainer: function() {
		return this.container;
	}
	,addContainer: function() {
		this.container = window.document.createElement("div");
		this.container.style.display = "inline-block";
		this.container.style.minWidth = "160px";
		this.container.style.position = "relative";
		this.container.style.verticalAlign = "top";
		this.container.style.backgroundColor = "#f7f8fb";
		this.container.marginLeft = "0px";
		this.container.marginTop = "0px";
		this.container.innerHTML = "<h1 style=\"margin-left:5px;margin-right:5px\">Import</h1>";
		this.addButtons();
	}
	,addButtons: function() {
		this.addImportNewickButton();
		this.addImportAnnotationsButton();
		if(this.canvas.getConfig().enableFastaImport) this.addGenerateFromFASTAButton();
	}
	,addImportNewickButton: function() {
		var _g = this;
		var btn = window.document.createElement("button");
		btn.innerText = "Import Newick";
		btn.style.backgroundColor = "rgb(247, 248, 251)";
		btn.style.border = "none";
		btn.style.font = "normal 11px/16px tahoma, arial, verdana, sans-serif";
		btn.style.cursor = "pointer";
		btn.style.textAlign = "left";
		btn.style.width = "100%";
		btn.setAttribute("title","ImportNewick");
		btn.addEventListener("mouseover",function() {
			btn.style.backgroundColor = "#dddee1";
		});
		btn.addEventListener("mouseout",function() {
			btn.style.backgroundColor = "rgb(247, 248, 251)";
		});
		btn.addEventListener("click",function() {
			var dialog = new phylo.PhyloInputModalWidget(window.document.body,"Newick String","Enter newick string",_g.canvas.getRootNode().getNewickString());
			dialog.setOnCloseEvent($bind(_g,_g.updateTree));
		});
		this.container.appendChild(btn);
	}
	,updateTree: function(dialog) {
		this.canvas.setNewickString(dialog.getText());
	}
	,addImportAnnotationsButton: function() {
		var _g = this;
		var btn = window.document.createElement("button");
		btn.innerText = "Import Annotations";
		btn.style.backgroundColor = "rgb(247, 248, 251)";
		btn.style.border = "none";
		btn.style.font = "normal 11px/16px tahoma, arial, verdana, sans-serif";
		btn.style.cursor = "pointer";
		btn.style.textAlign = "left";
		btn.style.width = "100%";
		btn.setAttribute("title","ImportNewick");
		btn.addEventListener("mouseover",function() {
			btn.style.backgroundColor = "#dddee1";
		});
		btn.addEventListener("mouseout",function() {
			btn.style.backgroundColor = "rgb(247, 248, 251)";
		});
		btn.addEventListener("click",function() {
			var dialog = new phylo.PhyloInputModalWidget(window.document.body,"Annotations in CSV format (first column is gene name)","Enter Annotations",_g.canvas.getAnnotationManager().getAnnotationString());
			dialog.setOnCloseEvent($bind(_g,_g.updateAnnotations));
		});
		this.container.appendChild(btn);
	}
	,updateAnnotations: function(dialog) {
		this.canvas.getAnnotationManager().loadAnnotationsFromString(dialog.getText(),this.canvas.getAnnotationManager().getAnnotationConfigs());
	}
	,addGenerateFromFASTAButton: function() {
		var _g = this;
		var btn = window.document.createElement("button");
		btn.innerText = "Import FASTA";
		btn.style.backgroundColor = "rgb(247, 248, 251)";
		btn.style.border = "none";
		btn.style.font = "normal 11px/16px tahoma, arial, verdana, sans-serif";
		btn.style.cursor = "pointer";
		btn.style.textAlign = "left";
		btn.style.width = "100%";
		btn.setAttribute("title","Import Fasta");
		btn.addEventListener("mouseover",function() {
			btn.style.backgroundColor = "#dddee1";
		});
		btn.addEventListener("mouseout",function() {
			btn.style.backgroundColor = "rgb(247, 248, 251)";
		});
		btn.addEventListener("click",function() {
			var dialog = new phylo.PhyloInputModalWidget(window.document.body,"FASTA format","Enter sequences",_g.canvas.getRootNode().getFasta());
			dialog.setOnCloseEvent($bind(_g,_g.updateFASTA));
		});
		this.container.appendChild(btn);
	}
	,updateFASTA: function(dialog) {
		this.canvas.setFromFasta(dialog.getText());
	}
	,__class__: phylo.PhyloImportWidget
};
phylo.PhyloInfoWidget = $hxClasses["phylo.PhyloInfoWidget"] = function(parent,message,title) {
	this.message = message;
	phylo.PhyloGlassPaneWidget.call(this,parent,title);
};
phylo.PhyloInfoWidget.__name__ = ["phylo","PhyloInfoWidget"];
phylo.PhyloInfoWidget.__super__ = phylo.PhyloGlassPaneWidget;
phylo.PhyloInfoWidget.prototype = $extend(phylo.PhyloGlassPaneWidget.prototype,{
	message: null
	,addContent: function() {
		phylo.PhyloGlassPaneWidget.prototype.addContent.call(this);
		var p = window.document.createElement("p");
		p.innerText = this.message;
		this.content.appendChild(p);
	}
	,__class__: phylo.PhyloInfoWidget
});
phylo.PhyloInputModalWidget = $hxClasses["phylo.PhyloInputModalWidget"] = function(parent,message,title,initialValue) {
	this.message = message;
	this.initialValue = initialValue;
	phylo.PhyloGlassPaneWidget.call(this,parent,title);
};
phylo.PhyloInputModalWidget.__name__ = ["phylo","PhyloInputModalWidget"];
phylo.PhyloInputModalWidget.__super__ = phylo.PhyloGlassPaneWidget;
phylo.PhyloInputModalWidget.prototype = $extend(phylo.PhyloGlassPaneWidget.prototype,{
	message: null
	,initialValue: null
	,textArea: null
	,addContent: function() {
		phylo.PhyloGlassPaneWidget.prototype.addContent.call(this);
		this.addMessage();
		this.addInputField();
	}
	,addMessage: function() {
		var p = window.document.createElement("p");
		p.innerText = this.message;
		this.content.appendChild(p);
	}
	,addInputField: function() {
		this.textArea = window.document.createElement("textarea");
		this.textArea.value = this.initialValue;
		this.textArea.style.width = "100%";
		this.textArea.setAttribute("rows","10");
		this.content.appendChild(this.textArea);
	}
	,getText: function() {
		return this.textArea.value;
	}
	,__class__: phylo.PhyloInputModalWidget
});
phylo.PhyloLegendRowWidget = $hxClasses["phylo.PhyloLegendRowWidget"] = function(legend,config) {
	this.legend = legend;
	this.config = config;
	this.build();
};
phylo.PhyloLegendRowWidget.__name__ = ["phylo","PhyloLegendRowWidget"];
phylo.PhyloLegendRowWidget.prototype = {
	legend: null
	,config: null
	,container: null
	,build: function() {
		this.addContainer();
		this.addLabel();
		this.addColourChooser();
	}
	,addContainer: function() {
		this.container = window.document.createElement("div");
		this.legend.getLegendContainer().appendChild(this.container);
	}
	,addLabel: function() {
		var label = window.document.createElement("span");
		label.innerText = this.config.name;
		label.style.marginLeft = "5px";
		label.style.width = "100px";
		label.style.display = "inline-block";
		this.container.appendChild(label);
	}
	,addColourChooser: function() {
		var _g = this;
		var picker = window.document.createElement("input");
		picker.setAttribute("type","color");
		picker.setAttribute("name","line_colour_input");
		picker.setAttribute("value",this.standardizeColour(this.config.colour));
		picker.style.width = "40px";
		picker.addEventListener("change",function() {
			_g.config.colour = picker.value;
			_g.legend.getCanvas().getAnnotationManager().reloadAnnotationConfigurations();
		});
		this.container.appendChild(picker);
	}
	,standardizeColour: function(colourStr) {
		var canvas = window.document.createElement("canvas");
		var ctx = canvas.getContext("2d");
		ctx.fillStyle = colourStr;
		return ctx.fillStyle;
	}
	,__class__: phylo.PhyloLegendRowWidget
};
phylo.PhyloLegendWidget = $hxClasses["phylo.PhyloLegendWidget"] = function(canvas) {
	this.canvas = canvas;
	this.build();
};
phylo.PhyloLegendWidget.__name__ = ["phylo","PhyloLegendWidget"];
phylo.PhyloLegendWidget.prototype = {
	canvas: null
	,container: null
	,legendContainer: null
	,build: function() {
		this.addContainer();
	}
	,getCanvas: function() {
		return this.canvas;
	}
	,getContainer: function() {
		return this.container;
	}
	,addContainer: function() {
		this.container = window.document.createElement("div");
		this.container.style.display = "inline-block";
		this.container.style.minWidth = "160px";
		this.container.style.position = "relative";
		this.container.style.verticalAlign = "top";
		this.container.style.height = "100%";
		this.container.style.backgroundColor = "#f7f8fb";
		this.container.marginLeft = "0px";
		this.container.marginTop = "0px";
		this.container.innerHTML = "<h1 style=\"margin-left:5px;margin-right:5px\">Legend</h1>";
		this.legendContainer = window.document.createElement("div");
		this.container.appendChild(this.legendContainer);
		this.redraw();
	}
	,clearLegendContainer: function() {
		while(this.legendContainer.firstChild) this.legendContainer.removeChild(this.legendContainer.firstChild);
	}
	,getLegendContainer: function() {
		return this.legendContainer;
	}
	,redraw: function() {
		this.clearLegendContainer();
		var annotationManager = this.canvas.getAnnotationManager();
		var activeAnnotations = annotationManager.getActiveAnnotations();
		var _g = 0;
		while(_g < activeAnnotations.length) {
			var annotationDef = activeAnnotations[_g];
			++_g;
			var config = this.canvas.getAnnotationManager().getAnnotationConfigByName(annotationDef.label);
			if(config.legendFunction != null) {
				var func = config.legendFunction;
				func(this,config);
			}
		}
	}
	,__class__: phylo.PhyloLegendWidget
};
phylo.PhyloNewickParser = $hxClasses["phylo.PhyloNewickParser"] = function() {
};
phylo.PhyloNewickParser.__name__ = ["phylo","PhyloNewickParser"];
phylo.PhyloNewickParser.prototype = {
	parse: function(newickString) {
		newickString = phylo.PhyloNewickParser.whiteSpaceReg.replace(newickString,"");
		newickString = phylo.PhyloNewickParser.newLineReg.replace(newickString,"");
		newickString = phylo.PhyloNewickParser.carLineReg.replace(newickString,"");
		var rootNode;
		rootNode = new phylo.PhyloTreeNode();
		rootNode.newickString = newickString;
		var currentNode = rootNode;
		var a;
		var branch;
		var charArray = newickString.split("");
		var j = 0;
		var _g1 = 0;
		var _g = charArray.length;
		while(_g1 < _g) {
			var j1 = _g1++;
			var i = j1;
			if(charArray[i] == "(" && charArray[i + 1] == "(") {
				var childNode = new phylo.PhyloTreeNode(currentNode,"",false,0);
				currentNode = childNode;
			} else if(charArray[i] == "(" && charArray[i + 1] != "(" && charArray[i - 1] != "/" || charArray[i] == "," && charArray[i + 1] != "(") {
				i++;
				var name = "";
				while(charArray[i] != ":" && charArray[i] != "," && (charArray[i] != ")" || charArray[i] == ")" && charArray[i - 1] == "/")) {
					var p = charArray[i];
					if(charArray[i] == "/" && (charArray[i + 1] == "[" || charArray[i + 1] == "(")) i++;
					if(charArray[i] == "[") name += "("; else if(charArray[i] == "]") name += ")"; else name += charArray[i];
					i++;
				}
				if(charArray[i] == ":") {
					i++;
					branch = "";
					while(charArray[i] != "," && (charArray[i] != ")" || charArray[i] == ")" && charArray[i - 1] == "/") && charArray[i] != ";") {
						branch += charArray[i];
						i++;
					}
					i--;
					branch = Std.parseFloat(branch);
				} else branch = 1;
				var child = new phylo.PhyloTreeNode(currentNode,name,true,branch);
			} else if(charArray[i] == "," && charArray[i + 1] == "(") {
				var child1 = new phylo.PhyloTreeNode(currentNode,"",false,0);
				currentNode = child1;
			} else if(charArray[i] == ")" && charArray[i - 1] != "/") {
				if(charArray[i + 1] == ":") {
					i += 2;
					branch = "";
					while(charArray[i] != "," && (charArray[i] != ")" || charArray[i] == ")" && charArray[i - 1] != "/") && charArray[i] != ";") {
						branch += charArray[i];
						i++;
					}
					i--;
					currentNode.branch = Std.parseFloat(branch);
				}
				currentNode = currentNode.parent;
			}
		}
		if(currentNode == null) return rootNode; else return currentNode;
	}
	,__class__: phylo.PhyloNewickParser
};
phylo.PhyloRadialTreeLayout = $hxClasses["phylo.PhyloRadialTreeLayout"] = function(width,height) {
	this.cx = width / 2;
	this.cy = height / 2;
};
phylo.PhyloRadialTreeLayout.__name__ = ["phylo","PhyloRadialTreeLayout"];
phylo.PhyloRadialTreeLayout.prototype = {
	cx: null
	,cy: null
	,annotations: null
	,renderCircle: function(treeNode,renderer,annotations,annotList,lineColour) {
		if(lineColour == null) lineColour = "rgb(28,102,224)";
		if(treeNode.colour != null) lineColour = treeNode.colour;
		this._renderCircle(treeNode,renderer,annotations,annotList,lineColour,lineColour);
	}
	,_renderCircle: function(treeNode,renderer,annotations,annotList,lineColour,parentColour) {
		if(parentColour == null) parentColour = "rgb(28,102,224)";
		if(lineColour == null) lineColour = "rgb(28,102,224)";
		var blue = "rgb(41,128,214)";
		var red = "rgb(255,0,0)";
		var black = "rgb(68,68,68)";
		if(treeNode.parent == null) {
		}
		treeNode.space = 0;
		var cx = renderer.cx;
		var cy = renderer.cy;
		var textSize = null;
		var branch = cx * 2 / treeNode.root.getHeight() / (4 - treeNode.root.getHeight() * 0.011);
		var k = 2 * Math.PI / treeNode.root.getLeafCount();
		var fontW = 12;
		var fontH = 12;
		var firstChild = treeNode.children[0];
		var lastChild = treeNode.children[treeNode.children.length - 1];
		var i = treeNode.angle;
		var _g = 0;
		var _g1 = treeNode.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			var childLineColour = lineColour;
			if(child.colour != null) childLineColour = child.colour;
			i = this._renderCircle(child,renderer,annotations,annotList,childLineColour,lineColour);
		}
		var h = null;
		var ph = null;
		var angle = null;
		var y1;
		var y2 = null;
		var x1;
		var x2 = null;
		if(treeNode.parent != null) {
			h = branch * (treeNode.root.getHeight() - treeNode.getHeight());
			ph = branch * (treeNode.root.getHeight() - treeNode.parent.getHeight());
			if(treeNode.wedgeColour != null) {
				var startNode = null;
				var endNode = null;
				if(!treeNode.isLeaf()) {
					startNode = treeNode.findLastLeaf();
					endNode = treeNode.findFirstLeaf();
				} else {
					startNode = treeNode.parent.findLastLeaf();
					endNode = treeNode.parent.findFirstLeaf();
				}
				var wedgeH = treeNode.root.getHeight() * (cx * 2 / treeNode.root.getHeight() / (4 - treeNode.root.getHeight() * 0.011));
				renderer.drawWedge(0,0,wedgeH,endNode.angle,startNode.angle,treeNode.wedgeColour,1);
			}
			if(treeNode.isLeaf()) angle = i; else {
				angle = (lastChild.angle - firstChild.angle) / 2 + firstChild.angle;
				if(Math.abs(phylo.PhyloHubMath.radiansToDegrees(lastChild.angle - firstChild.angle)) < 10) renderer.drawLine(firstChild.x,firstChild.y,lastChild.x,lastChild.y,lineColour,firstChild.lineWidth); else renderer.drawArc(0,0,h,firstChild.angle,lastChild.angle,lineColour,treeNode.lineWidth);
			}
			treeNode.angle = angle;
			if(angle == 0) {
				y1 = 0;
				y2 = 0;
			} else {
				y1 = h * Math.sin(angle);
				y2 = ph * Math.sin(angle);
			}
			x1 = h * Math.cos(angle);
			x2 = ph * Math.cos(angle);
			treeNode.x = x2;
			treeNode.y = y2;
			renderer.drawLine(x1,y1,x2,y2,lineColour,treeNode.lineWidth);
			if(treeNode.isLeaf()) {
				var dy = y1 - y2;
				var dx = x1 - x2;
				var x = 0;
				var y = 0;
				var gap = 2;
				var ta;
				if(dx < 0) {
					ta = Math.atan2(dy,dx) - Math.PI;
					x = -renderer.mesureText(treeNode.name) - gap;
				} else {
					ta = Math.atan2(dy,dx);
					x = gap;
				}
				y = 3;
				var labelColour = black;
				if((function($this) {
					var $r;
					var this1 = renderer.getConfig().highlightedGenes;
					$r = this1.exists(treeNode.name);
					return $r;
				}(this)) == true) labelColour = "red";
				renderer.drawTextNoTranslate(treeNode.name,x2 + dx,y2 + dy,x,y,ta,"top",labelColour);
				i += k;
				var t = treeNode.root.getMaximumLeafNameLength(renderer) + 10;
				treeNode.rad = ta;
				treeNode.x = x1;
				treeNode.y = y1;
				renderer.ctx.save();
				if(treeNode.y > y2 && treeNode.x > x2) treeNode.quad = 1;
				if(treeNode.y < y2 && treeNode.x > x2) treeNode.quad = 2;
				if(treeNode.y < y2 && treeNode.x < x2) treeNode.quad = 3;
				if(treeNode.y > y2 && treeNode.x < x2) treeNode.quad = 4;
				if(treeNode.y == y2 && treeNode.x > x2) treeNode.quad = 5;
				if(treeNode.y == y2 && treeNode.x < x2) treeNode.quad = 6;
				if(treeNode.y > y2 && treeNode.x == x2) treeNode.quad = 7;
				if(treeNode.y < y2 && treeNode.x == x2) treeNode.quad = 8;
				var j;
				var _g11 = 1;
				var _g2 = annotations.length;
				while(_g11 < _g2) {
					var j1 = _g11++;
					if(annotations[j1] == true) {
						var added;
						added = this.addAnnotation(treeNode,j1,t,renderer,annotList);
						if(treeNode.annotations[j1] != null && treeNode.annotations[j1].alfaAnnot[0] != null && treeNode.annotations[j1].alfaAnnot.length > 0) {
							var u = 0;
							if(added == true) treeNode.space = treeNode.space - 1;
							treeNode.space = treeNode.space + 1;
							var _g3 = 0;
							var _g21 = treeNode.annotations[j1].alfaAnnot.length;
							while(_g3 < _g21) {
								var u1 = _g3++;
								if(annotList[j1].shape == "text" && treeNode.quad == 2) treeNode.space = treeNode.space + 2; else if(annotList[j1].shape == "text" && treeNode.quad == 1) treeNode.space = treeNode.space + 2; else treeNode.space = treeNode.space + 1;
								added = this.addAlfaAnnotation(treeNode,treeNode.annotations[j1].alfaAnnot[u1],j1,t,renderer,annotList);
							}
							if(added == true) treeNode.space = treeNode.space + 1;
						} else if(added == true) treeNode.space = treeNode.space + 1;
					}
				}
				renderer.ctx.restore();
				treeNode.x = x2;
				treeNode.y = y2;
			}
		}
		var _g4 = 0;
		var _g12 = treeNode.children;
		while(_g4 < _g12.length) {
			var child1 = _g12[_g4];
			++_g4;
			var data;
			data = new phylo.PhyloScreenData();
			data.renderer = renderer;
			data.isAnnot = false;
			data.nodeId = child1.nodeId;
			data.point = 5;
			data.width = 10;
			data.height = 10;
			data.parentx = Math.round(treeNode.x);
			data.parenty = Math.round(treeNode.y);
			data.x = Math.round(child1.x);
			data.y = Math.round(child1.y);
			treeNode.root.screen[treeNode.root.screen.length] = data;
		}
		if(treeNode.parent == null) {
			var rootScreen = new phylo.PhyloScreenData();
			rootScreen.x = treeNode.x;
			rootScreen.y = treeNode.y;
			rootScreen.nodeId = treeNode.nodeId;
			rootScreen.renderer = renderer;
			rootScreen.point = 5;
			rootScreen.width = 10;
			rootScreen.height = 10;
			treeNode.screen.push(rootScreen);
		}
		return i;
	}
	,render: function(treeNode,renderer,annotations,annotList,lineColour) {
		if(lineColour == null) lineColour = "rgb(28,102,224)";
		var i = 0;
		var x = treeNode.x;
		var y = treeNode.y;
		if(renderer.getConfig().editmode == true) lineColour = "rgb(234,147,28)";
		while(i < treeNode.children.length) {
			treeNode.children[i].space = 0;
			if(treeNode.children[i].isLeaf()) {
				if(treeNode.children[i].lineMode == phylo.LineMode.BEZIER) {
					var deltaX1 = Math.abs(x - treeNode.children[i].x);
					var deltaY1 = Math.abs(y - treeNode.children[i].y);
					var firstY;
					var secondY;
					var firstX;
					var secondX;
					if(treeNode.children[i].xRandom == null) treeNode.children[i].xRandom = Math.random() * 0.3 + 0.3;
					if(treeNode.children[i].yRandom == null) treeNode.children[i].yRandom = Math.random() * 0.4 + 0.4;
					if(treeNode.children[i].y < y) {
						firstY = y - deltaY1 * treeNode.children[i].yRandom;
						secondY = treeNode.children[i].y + deltaY1 * treeNode.children[i].yRandom;
					} else {
						firstY = y + deltaY1 * treeNode.children[i].yRandom;
						secondY = treeNode.children[i].y - deltaY1 * treeNode.children[i].yRandom;
					}
					if(treeNode.children[i].x > x) {
						firstX = x + deltaX1 * 0.6;
						secondX = treeNode.children[i].x - deltaX1 * treeNode.children[i].xRandom;
					} else {
						firstX = x - deltaX1 * 0.6;
						secondX = treeNode.children[i].x + deltaX1 * treeNode.children[i].xRandom;
					}
					renderer.bezierCurve(x,y,treeNode.children[i].x,treeNode.children[i].y,firstX,firstY,secondX,secondY,lineColour,treeNode.children[i].lineWidth);
				} else renderer.drawLine(x,y,treeNode.children[i].x,treeNode.children[i].y,lineColour,treeNode.children[i].lineWidth);
				var t;
				var aux;
				var aux1;
				var yequalsign = false;
				if(treeNode.children[i].y > 0 && y > 0) yequalsign = true; else if(treeNode.children[i].y < 0 && y < 0) yequalsign = true;
				var xequalsign = false;
				if(treeNode.children[i].x > 0 && x > 0) xequalsign = true; else if(treeNode.children[i].x < 0 && x < 0) xequalsign = true;
				var deltaY;
				var deltaX;
				if(xequalsign == true) deltaX = Math.abs(treeNode.children[i].x - x); else deltaX = Math.abs(treeNode.children[i].x) + Math.abs(x);
				if(yequalsign == true) deltaY = Math.abs(treeNode.children[i].y - y); else deltaY = Math.abs(treeNode.children[i].y) + Math.abs(y);
				var tang = deltaY / deltaX;
				treeNode.children[i].rad = Math.atan(tang);
				var rot;
				rot = 0;
				var orign = "start";
				if(treeNode.children[i].y > y && treeNode.children[i].x > x) {
					rot = treeNode.children[i].rad;
					orign = "start";
					treeNode.children[i].quad = 1;
				}
				if(treeNode.children[i].y < y && treeNode.children[i].x > x) {
					rot = 2 * Math.PI - treeNode.children[i].rad;
					orign = "start";
					treeNode.children[i].quad = 2;
				}
				if(treeNode.children[i].y < y && treeNode.children[i].x < x) {
					rot = treeNode.children[i].rad;
					orign = "end";
					treeNode.children[i].quad = 3;
				}
				if(treeNode.children[i].y > y && treeNode.children[i].x < x) {
					rot = 2 * Math.PI - treeNode.children[i].rad;
					orign = "end";
					treeNode.children[i].quad = 4;
				}
				if(treeNode.children[i].y == y && treeNode.children[i].x > x) {
					treeNode.children[i].quad = 5;
					rot = 0;
				}
				if(treeNode.children[i].y == y && treeNode.children[i].x < x) {
					treeNode.children[i].quad = 6;
					rot = Math.PI;
				}
				if(treeNode.children[i].y > y && treeNode.children[i].x == x) {
					rot = 3 * Math.PI - Math.PI / 2;
					treeNode.children[i].quad = 7;
				}
				if(treeNode.children[i].y < y && treeNode.children[i].x == x) {
					treeNode.children[i].quad = 8;
					rot = 3 * Math.PI / 4;
				}
				var namecolor = "#585b5f";
				var ttar = treeNode.children[i].name;
				if((function($this) {
					var $r;
					var this1 = renderer.getConfig().highlightedGenes;
					$r = this1.exists(ttar);
					return $r;
				}(this)) == true) namecolor = "#ff0000";
				renderer.drawText(" " + treeNode.children[i].name,treeNode.children[i].x,treeNode.children[i].y,-2,3,rot,orign,namecolor);
				this.updateTreeRectangle(treeNode.children[i].x,treeNode.children[i].y,treeNode.root);
				t = renderer.mesureText(treeNode.children[i].name) + 10;
				treeNode.children[i].rad = rot;
				var j;
				var _g1 = 1;
				var _g = annotations.length;
				while(_g1 < _g) {
					var j1 = _g1++;
					if(annotations[j1] == true) {
						var added;
						added = this.addAnnotation(treeNode.children[i],j1,t,renderer,annotList);
						if(treeNode.children[i].annotations[j1] != null && treeNode.children[i].annotations[j1].alfaAnnot[0] != null && treeNode.children[i].annotations[j1].alfaAnnot.length > 0) {
							var u = 0;
							if(added == true) treeNode.children[i].space = treeNode.children[i].space - 1;
							treeNode.children[i].space = treeNode.children[i].space + 1;
							var _g3 = 0;
							var _g2 = treeNode.children[i].annotations[j1].alfaAnnot.length;
							while(_g3 < _g2) {
								var u1 = _g3++;
								if(annotList[j1].shape == "text" && treeNode.children[i].quad == 2) treeNode.children[i].space = treeNode.children[i].space + 2; else if(annotList[j1].shape == "text" && treeNode.children[i].quad == 1) treeNode.children[i].space = treeNode.children[i].space + 2; else treeNode.children[i].space = treeNode.children[i].space + 1;
								added = this.addAlfaAnnotation(treeNode.children[i],treeNode.children[i].annotations[j1].alfaAnnot[u1],j1,t,renderer,annotList);
							}
							if(added == true) treeNode.children[i].space = treeNode.children[i].space + 1;
						} else if(added == true) treeNode.children[i].space = treeNode.children[i].space + 1;
					}
				}
			} else {
				var childLineColour = lineColour;
				if(treeNode.children[i].colour != null) childLineColour = treeNode.children[i].colour;
				this.render(treeNode.children[i],renderer,annotations,annotList,childLineColour);
				if(treeNode.children[i].lineMode == phylo.LineMode.BEZIER) {
					var deltaX2 = Math.abs(x - treeNode.children[i].x);
					var deltaY2 = Math.abs(y - treeNode.children[i].y);
					var firstY1;
					var secondY1;
					var firstX1;
					var secondX1;
					if(treeNode.children[i].xRandom == null) treeNode.children[i].xRandom = Math.random() * 0.3 + 0.3;
					if(treeNode.children[i].yRandom == null) treeNode.children[i].yRandom = Math.random() * 0.4 + 0.4;
					if(treeNode.children[i].y < y) {
						firstY1 = y - deltaY2 * treeNode.children[i].yRandom;
						secondY1 = treeNode.children[i].y + deltaY2 * treeNode.children[i].yRandom;
					} else {
						firstY1 = y + deltaY2 * treeNode.children[i].yRandom;
						secondY1 = treeNode.children[i].y - deltaY2 * treeNode.children[i].yRandom;
					}
					if(treeNode.children[i].x > x) {
						firstX1 = x + deltaX2 * 0.6;
						secondX1 = treeNode.children[i].x - deltaX2 * treeNode.children[i].xRandom;
					} else {
						firstX1 = x - deltaX2 * 0.6;
						secondX1 = treeNode.children[i].x + deltaX2 * treeNode.children[i].xRandom;
					}
					renderer.bezierCurve(x,y,treeNode.children[i].x,treeNode.children[i].y,firstX1,firstY1,secondX1,secondY1,lineColour,treeNode.children[i].lineWidth);
				} else renderer.drawLine(x,y,treeNode.children[i].x,treeNode.children[i].y,lineColour,treeNode.children[i].lineWidth);
				var data;
				data = new phylo.PhyloScreenData();
				data.renderer = renderer;
				data.isAnnot = false;
				data.nodeId = treeNode.children[i].nodeId;
				data.point = 5;
				data.width = 10;
				data.height = 10;
				data.parentx = Math.round(x);
				data.parenty = Math.round(y);
				data.x = Math.round(treeNode.children[i].x);
				data.y = Math.round(treeNode.children[i].y);
				treeNode.root.screen[treeNode.root.screen.length] = data;
			}
			i++;
		}
		if(treeNode.parent == null) {
			var rootScreen = new phylo.PhyloScreenData();
			rootScreen.x = treeNode.x;
			rootScreen.y = treeNode.y;
			rootScreen.nodeId = treeNode.nodeId;
			rootScreen.renderer = renderer;
			rootScreen.point = 5;
			rootScreen.width = 10;
			rootScreen.height = 10;
			treeNode.screen.push(rootScreen);
		}
	}
	,addAnnotation: function(leave,annotation,$long,renderer,annotList) {
		if(annotList[annotation].optionSelected.length != 0) {
			if(leave.annotations[annotation] != null) {
				if(annotList[annotation].optionSelected[0] != leave.annotations[annotation].option) return false;
			}
		}
		var res = false;
		var data;
		data = new phylo.PhyloScreenData();
		data.renderer = renderer;
		data.target = leave.name;
		data.isAnnot = true;
		var name;
		name = "";
		if(leave.name.indexOf("(") != -1 || leave.name.indexOf("-") != -1) {
			var auxArray = leave.name.split("");
			var j;
			var _g1 = 0;
			var _g = auxArray.length;
			while(_g1 < _g) {
				var j1 = _g1++;
				if(auxArray[j1] == "(" || auxArray[j1] == "-") break;
				name += auxArray[j1];
			}
			data.targetClean = name;
		} else data.targetClean = leave.name;
		data.annot = annotation;
		data.annotation = leave.annotations[annotation];
		var nx;
		var ny;
		nx = 0.0;
		ny = 0.0;
		if(leave.space == 0) $long = $long + 1;
		var rootN = leave.root;
		var _g2 = annotList[annotation].shape;
		switch(_g2) {
		case "cercle":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					var _g11 = leave.quad;
					switch(_g11) {
					case 1:
						$long = $long + 23 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 3);
						ny = leave.y + Math.sin(leave.rad) * ($long + 3);
						break;
					case 2:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 3);
						ny = leave.y + Math.sin(leave.rad) * ($long + 3);
						break;
					case 3:
						$long = $long + 23 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 3);
						nx = leave.x - Math.cos(leave.rad) * ($long + 3);
						break;
					case 4:
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 3);
						nx = leave.x - Math.cos(leave.rad) * ($long + 3);
						break;
					case 5:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x + Math.cos(leave.rad) * $long;
						break;
					case 6:
						ny = leave.y;
						$long = $long + 20 * leave.space;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 7:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 8:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						break;
					}
					if(leave.space == 0) $long = $long + 1;
					renderer.drawCircle(nx,ny,leave.annotations[annotation].color[0].color);
					data.x = Math.round(nx);
					data.y = Math.round(ny);
					data.width = 14;
					data.height = 14;
					data.point = 3;
					res = true;
				} else return false;
			}
			break;
		case "image":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					if(annotList[annotation].annotImg[leave.annotations[annotation].defaultImg] != null) {
						var _g12 = leave.quad;
						switch(_g12) {
						case 1:
							$long = $long + 20 * leave.space;
							nx = leave.x + Math.cos(leave.rad) * $long;
							ny = leave.y + Math.sin(leave.rad) * $long;
							break;
						case 2:
							$long = $long + 20 * leave.space;
							nx = leave.x - 5 + Math.cos(leave.rad) * $long;
							ny = leave.y - 12 + Math.sin(leave.rad) * $long;
							break;
						case 3:
							$long = $long + 23 * leave.space;
							ny = leave.y - 12 - Math.sin(leave.rad) * $long;
							nx = leave.x - 10 - Math.cos(leave.rad) * $long;
							break;
						case 4:
							$long = $long + 23 * leave.space;
							ny = leave.y - Math.sin(leave.rad) * $long;
							nx = leave.x - 10 - Math.cos(leave.rad) * $long;
							break;
						case 5:
							$long = $long + 20 * leave.space;
							ny = leave.y;
							nx = leave.x + Math.cos(leave.rad) * $long;
							break;
						case 6:
							$long = $long + 20 * leave.space;
							ny = leave.y;
							nx = leave.x - Math.cos(leave.rad) * $long;
							break;
						case 7:
							$long = $long + 20 * leave.space;
							nx = leave.x;
							ny = leave.y + Math.sin(leave.rad) * $long;
							break;
						case 8:
							$long = $long + 20 * leave.space;
							nx = leave.x;
							ny = leave.y - Math.sin(leave.rad) * $long;
							break;
						}
						if(leave.space == 0) $long = $long + 1;
						var imge = annotList[annotation].annotImg[leave.annotations[annotation].defaultImg];
						if(imge != null) {
							if(annotation == 1) renderer.drawImg(nx,ny,imge,1); else renderer.drawImg(nx,ny,imge,0);
							data.x = Math.round(nx);
							data.y = Math.round(ny);
							data.width = 14;
							data.height = 14;
							data.point = 1;
						}
					}
					res = true;
				} else return false;
			}
			break;
		case "square":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					var _g13 = leave.quad;
					switch(_g13) {
					case 1:
						$long = $long + 23 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * $long;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 2:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * $long;
						ny = leave.y - 12 + Math.sin(leave.rad) * $long;
						break;
					case 3:
						$long = $long + 23 * leave.space;
						ny = leave.y - 12 - Math.sin(leave.rad) * $long;
						nx = leave.x - 10 - Math.cos(leave.rad) * $long;
						break;
					case 4:
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 5:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x + Math.cos(leave.rad) * $long;
						break;
					case 6:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 7:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 8:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						break;
					}
					if(leave.space == 0) $long = $long + 1;
					renderer.drawSquare(nx,ny,leave.annotations[annotation].color[0].color);
					data.x = Math.round(nx);
					data.y = Math.round(ny);
					data.width = 14;
					data.height = 10;
					data.point = 4;
					res = true;
				} else return false;
			}
			break;
		case "html":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					var _g14 = leave.quad;
					switch(_g14) {
					case 1:
						$long = $long + 23 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * $long;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 2:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * $long;
						ny = leave.y - 12 + Math.sin(leave.rad) * $long;
						break;
					case 3:
						$long = $long + 23 * leave.space;
						ny = leave.y - 12 - Math.sin(leave.rad) * $long;
						nx = leave.x - 10 - Math.cos(leave.rad) * $long;
						break;
					case 4:
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 5:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x + Math.cos(leave.rad) * $long;
						break;
					case 6:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 7:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 8:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						break;
					}
					if(leave.space == 0) $long = $long + 1;
					renderer.drawGraphic(nx,ny,leave.results);
					data.x = Math.round(nx);
					data.y = Math.round(ny);
					data.width = 14;
					data.height = 10;
					data.point = 4;
					res = true;
				} else return false;
			}
			break;
		case "text":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					var _g15 = leave.quad;
					switch(_g15) {
					case 1:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 10);
						ny = leave.y + Math.sin(leave.rad) * ($long + 10);
						break;
					case 2:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 10);
						ny = leave.y + Math.sin(leave.rad) * ($long + 10);
						break;
					case 3:
						$long = $long + 23 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 10);
						nx = leave.x - Math.cos(leave.rad) * ($long + 10);
						break;
					case 4:
						$long = $long + 23 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 10);
						nx = leave.x - Math.cos(leave.rad) * ($long + 10);
						break;
					case 5:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x + Math.cos(leave.rad) * ($long + 10);
						break;
					case 6:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x - Math.cos(leave.rad) * ($long + 10);
						break;
					case 7:
						$long = $long + 20 * leave.space;
						nx = leave.x;
						ny = leave.y + Math.sin(leave.rad) * ($long + 10);
						break;
					case 8:
						$long = $long + 20 * leave.space;
						nx = leave.x;
						ny = leave.y - Math.sin(leave.rad) * ($long + 5);
						break;
					}
					renderer.drawText(leave.annotations[annotation].text,nx,ny,-2,3,0,"start",leave.annotations[annotation].color[0].color);
					data.x = Math.round(nx);
					data.y = Math.round(ny);
					data.width = 7 * leave.annotations[annotation].text.length;
					data.height = 7;
					data.point = 2;
					res = true;
				} else return false;
			}
			break;
		}
		leave.root.screen[leave.root.screen.length] = data;
		return res;
	}
	,addAlfaAnnotation: function(leave,alfaAnnot,annotation,$long,renderer,annotList) {
		var res = false;
		var data;
		var nx;
		var ny;
		nx = 0.0;
		ny = 0.0;
		data = new phylo.PhyloScreenData();
		data.renderer = renderer;
		data.target = leave.name;
		data.isAnnot = true;
		var name;
		name = "";
		if(leave.name.indexOf("(") != -1 || leave.name.indexOf("-") != -1) {
			var auxArray = leave.name.split("");
			var j;
			var _g1 = 0;
			var _g = auxArray.length;
			while(_g1 < _g) {
				var j1 = _g1++;
				if(auxArray[j1] == "(" || auxArray[j1] == "-") break;
				name += auxArray[j1];
			}
			data.targetClean = name;
		} else data.targetClean = leave.name;
		data.annot = annotation;
		data.annotation = alfaAnnot;
		data.suboption = alfaAnnot.option;
		var _g2 = annotList[annotation].shape;
		switch(_g2) {
		case "cercle":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					var _g11 = leave.quad;
					switch(_g11) {
					case 1:
						$long = $long + 23 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 3);
						ny = leave.y + Math.sin(leave.rad) * ($long + 3);
						break;
					case 2:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 3);
						ny = leave.y + Math.sin(leave.rad) * ($long + 3);
						break;
					case 3:
						$long = $long + 23 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 3);
						nx = leave.x - Math.cos(leave.rad) * ($long + 3);
						break;
					case 4:
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 3);
						nx = leave.x - Math.cos(leave.rad) * ($long + 3);
						break;
					case 5:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x + Math.cos(leave.rad) * $long;
						break;
					case 6:
						ny = leave.y;
						$long = $long + 20 * leave.space;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 7:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 8:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						break;
					case 9:
						$long = $long = $long + 20 * leave.space;
						break;
					}
					if(leave.space == 0) $long = $long + 1;
					if(leave.quad == 9) renderer.drawCircle(leave.x + $long,leave.y,alfaAnnot.color[0].color); else renderer.drawCircle(nx,ny,alfaAnnot.color[0].color);
					var aux = nx * renderer.scale;
					data.x = Math.round(aux) - 29;
					aux = ny * renderer.scale;
					data.y = Math.round(aux) - 3;
					aux = 10 * renderer.scale;
					data.width = Math.round(aux);
					data.height = Math.round(aux);
					data.point = 4;
					res = true;
				} else return false;
			}
			break;
		case "image":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					if(annotList[annotation].annotImg[alfaAnnot.defaultImg] != null) {
						var _g12 = leave.quad;
						switch(_g12) {
						case 1:
							$long = $long + 20 * leave.space;
							nx = leave.x + Math.cos(leave.rad) * $long;
							ny = leave.y + Math.sin(leave.rad) * $long;
							break;
						case 2:
							$long = $long + 20 * leave.space;
							nx = leave.x - 5 + Math.cos(leave.rad) * $long;
							ny = leave.y - 12 + Math.sin(leave.rad) * $long;
							break;
						case 3:
							$long = $long + 23 * leave.space;
							ny = leave.y - 12 - Math.sin(leave.rad) * $long;
							nx = leave.x - 10 - Math.cos(leave.rad) * $long;
							break;
						case 4:
							$long = $long + 23 * leave.space;
							ny = leave.y - Math.sin(leave.rad) * $long;
							nx = leave.x - 10 - Math.cos(leave.rad) * $long;
							break;
						case 5:
							$long = $long + 20 * leave.space;
							ny = leave.y;
							nx = leave.x + Math.cos(leave.rad) * $long;
							break;
						case 6:
							$long = $long + 20 * leave.space;
							ny = leave.y;
							nx = leave.x - Math.cos(leave.rad) * $long;
							break;
						case 7:
							$long = $long + 20 * leave.space;
							nx = leave.x;
							ny = leave.y + Math.sin(leave.rad) * $long;
							break;
						case 8:
							$long = $long + 20 * leave.space;
							nx = leave.x;
							ny = leave.y - Math.sin(leave.rad) * $long;
							break;
						}
						var imge = annotList[annotation].annotImg[alfaAnnot.defaultImg];
						if(imge != null) {
							if(annotation == 1) renderer.drawImg(nx,ny,imge,1); else renderer.drawImg(nx,ny,imge,0);
							var aux1 = nx * renderer.scale;
							data.x = Math.round(aux1);
							aux1 = ny * renderer.scale;
							data.y = Math.round(aux1);
							aux1 = 14 * renderer.scale;
							data.width = Math.round(aux1);
							aux1 = 14 * renderer.scale;
							data.height = Math.round(aux1);
							data.point = 1;
						}
					}
					res = true;
				} else return false;
			}
			break;
		case "square":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					var _g13 = leave.quad;
					switch(_g13) {
					case 1:
						$long = $long + 23 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * $long;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 2:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * $long;
						ny = leave.y - 12 + Math.sin(leave.rad) * $long;
						break;
					case 3:
						$long = $long + 23 * leave.space;
						ny = leave.y - 12 - Math.sin(leave.rad) * $long;
						nx = leave.x - 10 - Math.cos(leave.rad) * $long;
						break;
					case 4:
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 5:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x + Math.cos(leave.rad) * $long;
						break;
					case 6:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x - Math.cos(leave.rad) * $long;
						break;
					case 7:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y + Math.sin(leave.rad) * $long;
						break;
					case 8:
						nx = leave.x;
						$long = $long + 20 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * $long;
						break;
					}
					if(leave.space == 0) $long = $long + 1;
					renderer.drawSquare(nx,ny,alfaAnnot.color[0].color);
					data.point = 1;
					var aux2 = nx * renderer.scale;
					data.x = Math.round(aux2);
					aux2 = ny * renderer.scale;
					data.y = Math.round(aux2);
					aux2 = 20 * renderer.scale;
					data.width = Math.round(aux2);
					aux2 = 20 * renderer.scale;
					data.height = Math.round(aux2);
					res = true;
				} else return false;
			}
			break;
		case "text":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					if(alfaAnnot.text == "H4K5/12") {
						var i = 0;
						var u = 0;
						var ii = 0;
					}
					var _g14 = leave.quad;
					switch(_g14) {
					case 1:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 10);
						ny = leave.y + Math.sin(leave.rad) * ($long + 10);
						break;
					case 2:
						$long = $long + 20 * leave.space;
						nx = leave.x + Math.cos(leave.rad) * ($long + 10);
						ny = leave.y + Math.sin(leave.rad) * ($long + 10);
						break;
					case 3:
						$long = $long + 23 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 10);
						nx = leave.x - Math.cos(leave.rad) * ($long + 10);
						break;
					case 4:
						$long = $long + 23 * leave.space;
						ny = leave.y - Math.sin(leave.rad) * ($long + 10);
						nx = leave.x - Math.cos(leave.rad) * ($long + 10);
						break;
					case 5:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x + Math.cos(leave.rad) * ($long + 10);
						break;
					case 6:
						$long = $long + 20 * leave.space;
						ny = leave.y;
						nx = leave.x - Math.cos(leave.rad) * ($long + 10);
						break;
					case 7:
						$long = $long + 20 * leave.space;
						nx = leave.x;
						ny = leave.y + Math.sin(leave.rad) * ($long + 10);
						break;
					case 8:
						$long = $long + 20 * leave.space;
						nx = leave.x;
						ny = leave.y - Math.sin(leave.rad) * ($long + 5);
						break;
					}
					renderer.drawText(alfaAnnot.text,nx,ny,-2,3,0,"start",alfaAnnot.color[0].color);
					var aux3 = nx * renderer.scale;
					data.x = Math.round(nx);
					data.y = Math.round(ny);
					data.width = 7 * alfaAnnot.text.length;
					data.y = Math.round(ny);
					data.height = 7;
					data.point = 2;
					res = true;
				} else return false;
			}
			break;
		}
		leave.root.screen[leave.root.screen.length] = data;
		return res;
	}
	,updateTreeRectangle: function(x,y,treeNode) {
		var top;
		top = treeNode.rectangleTop | 0;
		var right;
		right = treeNode.rectangleRight | 0;
		var bottom;
		bottom = treeNode.rectangleBottom | 0;
		var left;
		left = treeNode.rectangleLeft | 0;
		x = x | 0;
		y = y | 0;
		if(x < left) treeNode.rectangleLeft = x;
		if(x > right) treeNode.rectangleRight = x;
		if(y < bottom) treeNode.rectangleBottom = y;
		if(y > top) treeNode.rectangleTop = y;
	}
	,__class__: phylo.PhyloRadialTreeLayout
};
phylo.PhyloScreenData = $hxClasses["phylo.PhyloScreenData"] = function() {
	this.suboption = 0;
	this.annotation = new phylo.PhyloAnnotation();
	this.created = false;
	this.divAccessed = false;
};
phylo.PhyloScreenData.__name__ = ["phylo","PhyloScreenData"];
phylo.PhyloScreenData.prototype = {
	point: null
	,x: null
	,y: null
	,parentx: null
	,parenty: null
	,width: null
	,height: null
	,annotation: null
	,created: null
	,target: null
	,targetClean: null
	,annot: null
	,root: null
	,div: null
	,divAccessed: null
	,suboption: null
	,family: null
	,renderer: null
	,isAnnot: null
	,nodeId: null
	,title: null
	,checkMouse: function(mx,my) {
		var scaleX = this.x * this.renderer.scale;
		var scaleY = this.y * this.renderer.scale;
		var scaleWidth = this.width * this.renderer.scale;
		var scaleHeight = this.height * this.renderer.scale;
		var _g = this.point;
		switch(_g) {
		case 1:
			if(mx >= scaleX && mx < scaleX + scaleWidth && my < scaleY + scaleHeight && my >= scaleY) return true; else return false;
			break;
		case 2:
			if(mx >= scaleX && mx < scaleX + scaleWidth && my > scaleY - scaleHeight && my <= scaleY) return true; else return false;
			break;
		case 3:
			scaleWidth = this.width * this.renderer.scale / 2;
			scaleHeight = this.height * this.renderer.scale / 2;
			var inXBoundary = mx >= scaleX && mx < scaleX + scaleWidth || mx <= scaleX && mx > scaleX - scaleWidth;
			var inYBoundary = my > scaleY - scaleHeight && my <= scaleY || my < scaleY + scaleHeight && my > scaleY;
			if(inXBoundary && inYBoundary) return true; else return false;
			break;
		case 4:
			if(mx >= scaleX && mx < scaleX + scaleWidth && my < scaleY + scaleHeight && my >= scaleY) return true; else return false;
			break;
		case 5:
			if(mx + 5 >= scaleX && mx < scaleX + scaleWidth - 5 && my < scaleY + scaleHeight + 5 && my >= scaleY - 5) return true; else return false;
			break;
		default:
			return false;
		}
	}
	,__class__: phylo.PhyloScreenData
};
phylo.PhyloToolBar = $hxClasses["phylo.PhyloToolBar"] = function(canvas,parent) {
	this.positionTop = false;
	this.canvas = canvas;
	this.build();
};
phylo.PhyloToolBar.__name__ = ["phylo","PhyloToolBar"];
phylo.PhyloToolBar.prototype = {
	canvas: null
	,parent: null
	,container: null
	,positionTop: null
	,titleElement: null
	,toolbarContainer: null
	,lineTypeButton: null
	,build: function() {
		if(this.parent == null) {
			this.parent = this.canvas.getContainer();
			this.positionTop = true;
		}
		this.createContainer();
		this.parent.appendChild(this.container);
	}
	,createContainer: function() {
		this.container = window.document.createElement("div");
		if(this.positionTop) {
			this.container.style.position = "absolute";
			this.container.style.top = "15px";
			this.container.style.left = "35px";
		}
		this.createTitleElement();
		this.createToolBar();
	}
	,createTitleElement: function() {
		this.titleElement = window.document.createElement("label");
		this.titleElement.style.color = "#1c66e0";
		this.titleElement.style.fontSize = "19px";
		this.titleElement.style.margin = "10px 0px 0px 0px";
		this.titleElement.style.left = "35px";
		this.setTitle(this.canvas.getConfig().title);
		this.container.appendChild(this.titleElement);
	}
	,createToolBar: function() {
		this.toolbarContainer = window.document.createElement("div");
		this.toolbarContainer.style.marginTop = "10px";
		this.addCenterButton();
		this.addZoomInButton();
		this.addZoomOutButton();
		this.addExportPNGButton();
		this.addExportSVGButton();
		this.addHighlightButton();
		this.addSetLineWidthButton();
		this.addTreeTypeButton();
		this.addTreeLineTypeButton();
		this.addShadowTypeButton();
		this.addAutoFitButton();
		this.container.appendChild(this.toolbarContainer);
	}
	,position: function(element) {
		if(this.canvas.getConfig().verticalToolBar) {
			element.style.display = "block";
			element.style.marginLeft = "0px";
			element.style.marginBottom = "20px";
		} else element.style.display = "inline-block";
	}
	,addCenterButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		this.position(button);
		button.style.backgroundImage = "url(js/images/center-single.png)";
		button.style.backgroundRepeat = "no-repeat";
		button.style.backgroundPosition = "center center";
		button.style.backgroundSize = "30px";
		button.style.height = "25px";
		button.style.width = "25px";
		button.style.backgroundColor = "initial";
		button.style.border = "none";
		button.style.cursor = "pointer";
		button.style.marginRight = "20px";
		button.addEventListener("click",function() {
			_g.canvas.center();
		});
		this.toolbarContainer.appendChild(button);
	}
	,addZoomInButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		this.position(button);
		button.style.backgroundImage = "url(js/images/mag_plus-single.png)";
		button.style.backgroundRepeat = "no-repeat";
		button.style.backgroundPosition = "center center";
		button.style.height = "25px";
		button.style.width = "25px";
		button.style.backgroundColor = "initial";
		button.style.border = "none";
		button.style.cursor = "pointer";
		button.style.marginRight = "20px";
		button.addEventListener("click",function() {
			_g.canvas.zoomIn();
		});
		this.toolbarContainer.appendChild(button);
	}
	,addZoomOutButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		this.position(button);
		button.style.backgroundImage = "url(js/images/mag_minus-single.png)";
		button.style.backgroundRepeat = "no-repeat";
		button.style.backgroundPosition = "center center";
		button.style.height = "25px";
		button.style.width = "25px";
		button.style.backgroundColor = "initial";
		button.style.border = "none";
		button.style.cursor = "pointer";
		button.style.marginRight = "20px";
		button.addEventListener("click",function() {
			_g.canvas.zoomOut();
		});
		this.toolbarContainer.appendChild(button);
	}
	,addExportPNGButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		this.position(button);
		button.style.backgroundImage = "url(js/images/png-single.png)";
		button.style.backgroundRepeat = "no-repeat";
		button.style.backgroundPosition = "center center";
		button.style.height = "25px";
		button.style.width = "25px";
		button.style.backgroundColor = "initial";
		button.style.border = "none";
		button.style.cursor = "pointer";
		button.style.marginRight = "20px";
		button.addEventListener("click",function() {
			_g.canvas.exportPNGToFile();
		});
		this.toolbarContainer.appendChild(button);
	}
	,addExportSVGButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		this.position(button);
		button.style.backgroundImage = "url(js/images/svg-single.png)";
		button.style.backgroundRepeat = "no-repeat";
		button.style.backgroundPosition = "center center";
		button.style.height = "25px";
		button.style.width = "25px";
		button.style.backgroundColor = "initial";
		button.style.border = "none";
		button.style.cursor = "pointer";
		button.style.marginRight = "20px";
		button.addEventListener("click",function() {
			_g.canvas.exportSVGToFile();
		});
		this.toolbarContainer.appendChild(button);
	}
	,addHighlightButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		this.position(button);
		button.style.backgroundImage = "url(js/images/hightlight-single.png)";
		button.style.backgroundRepeat = "no-repeat";
		button.style.backgroundPosition = "center center";
		button.style.backgroundSize = "30px";
		button.style.height = "25px";
		button.style.width = "25px";
		button.style.backgroundColor = "initial";
		button.style.border = "none";
		button.style.cursor = "pointer";
		button.style.marginRight = "20px";
		button.addEventListener("click",function() {
			_g.canvas.showHighlightDialog();
		});
		this.toolbarContainer.appendChild(button);
	}
	,setTitle: function(title) {
		this.titleElement.innerText = title;
	}
	,addSetLineWidthButton: function() {
		var _g = this;
		var inputLabel = window.document.createElement("label");
		inputLabel.setAttribute("for","tree_line_width");
		inputLabel.innerText = "Pen width";
		inputLabel.style.padding = "2px";
		inputLabel.style.display = "inline-block";
		var inputElement = window.document.createElement("input");
		inputElement.setAttribute("type","text");
		inputElement.style.width = "30px";
		inputElement.setAttribute("value","1");
		inputElement.style.padding = "2px";
		inputElement.style.marginLeft = "5px";
		this.position(inputElement);
		inputElement.addEventListener("input",function(e) {
			_g.canvas.setLineWidth(Std.parseFloat(inputElement.value));
		});
		this.toolbarContainer.appendChild(inputLabel);
		this.toolbarContainer.appendChild(inputElement);
	}
	,addTreeTypeButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		this.position(button);
		button.innerText = "Toggle Type";
		button.style.border = "1px solid #c1c1c1";
		button.style.cursor = "pointer";
		button.style.padding = "3px 6px";
		button.style.marginLeft = "25px";
		button.style.marginRight = "25px";
		this.position(button);
		button.addEventListener("click",function() {
			_g.canvas.toggleType();
		});
		this.toolbarContainer.appendChild(button);
	}
	,addTreeLineTypeButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		button.innerText = "Toggle Line Type";
		button.style.border = "1px solid #c1c1c1";
		button.style.cursor = "pointer";
		button.style.padding = "3px 6px";
		button.style.marginRight = "25px";
		this.position(button);
		button.addEventListener("click",function() {
			_g.canvas.toggleLineMode();
		});
		this.toolbarContainer.appendChild(button);
		this.lineTypeButton = button;
	}
	,setLineTypeButtonVisible: function(visible) {
		if(visible) this.position(this.lineTypeButton); else this.lineTypeButton.style.display = "none";
	}
	,addShadowTypeButton: function() {
		var _g = this;
		var shadowInputColourLabel = window.document.createElement("label");
		shadowInputColourLabel.innerText = "Shadow colour";
		this.toolbarContainer.appendChild(shadowInputColourLabel);
		var shadowInputColour = window.document.createElement("input");
		var removeShadowButton = window.document.createElement("button");
		shadowInputColour.style.marginLeft = "5px";
		shadowInputColour.setAttribute("type","color");
		shadowInputColour.setAttribute("name","shadow_colour_input");
		shadowInputColour.style.width = "50px";
		shadowInputColour.addEventListener("change",function() {
			_g.canvas.setShadowColour(shadowInputColour.value);
		});
		removeShadowButton.innerText = "Toggle Shadow";
		removeShadowButton.style.border = "1px solid #c1c1c1";
		removeShadowButton.style.cursor = "pointer";
		removeShadowButton.style.padding = "3px 6px";
		removeShadowButton.style.marginLeft = "25px";
		this.position(shadowInputColour);
		this.position(removeShadowButton);
		removeShadowButton.addEventListener("click",function() {
			_g.canvas.toggleShadow();
		});
		this.toolbarContainer.appendChild(shadowInputColour);
		this.toolbarContainer.appendChild(removeShadowButton);
	}
	,addAutoFitButton: function() {
		var _g = this;
		var button = window.document.createElement("button");
		button.innerText = "Fit";
		button.style.border = "1px solid #c1c1c1";
		button.style.cursor = "pointer";
		button.style.padding = "3px 6px";
		button.style.marginLeft = "25px";
		this.position(button);
		button.addEventListener("click",function() {
			_g.canvas.autoFit();
		});
		this.toolbarContainer.appendChild(button);
	}
	,__class__: phylo.PhyloToolBar
};
phylo.PhyloTooltipWidget = $hxClasses["phylo.PhyloTooltipWidget"] = function(parent,message,title) {
	phylo.PhyloInfoWidget.call(this,parent,message,title);
	this.container.className = "icons-tooltip";
};
phylo.PhyloTooltipWidget.__name__ = ["phylo","PhyloTooltipWidget"];
phylo.PhyloTooltipWidget.__super__ = phylo.PhyloInfoWidget;
phylo.PhyloTooltipWidget.prototype = $extend(phylo.PhyloInfoWidget.prototype,{
	addContent: function() {
		phylo.PhyloInfoWidget.prototype.addContent.call(this);
		this.addConfirmationCheckbox();
	}
	,addConfirmationCheckbox: function() {
		var checkbox = window.document.createElement("div");
		checkbox.setAttribute("class","icons-tooltip-checkbox");
		var label = window.document.createElement("label");
		label.innerHTML = "Do not show this message again";
		var input = window.document.createElement("input");
		input.setAttribute("type","checkbox");
		this.content.appendChild(checkbox);
		checkbox.appendChild(label);
		checkbox.appendChild(input);
		input.addEventListener("change",function(event) {
			if(input.checked) {
				var cookies = Cookies;
				cookies.set("annot-icons-tip",true);
			} else {
			}
		});
	}
	,__class__: phylo.PhyloTooltipWidget
});
phylo.PhyloTreeNode = $hxClasses["phylo.PhyloTreeNode"] = function(parent,name,leaf,branch) {
	this.wedgeColour = null;
	this.maxNameLength = -1;
	this.angle_new = 0;
	this.lineMode = phylo.LineMode.STRAIGHT;
	this.lineWidth = 1;
	this.yRandom = null;
	this.xRandom = null;
	this.maxBranch = null;
	this.minBranch = null;
	this.numchild = 0;
	this.leaves = 0;
	this.ratio = 0.00006;
	this.dist = 50;
	this.space = 0;
	this.parent = parent;
	this.children = [];
	this.name = name;
	this.leaf = leaf;
	this.branch = branch;
	if(this.parent != null) {
		this.parent.addChild(this);
		this.root = this.parent.root;
	} else {
		this.targets = [];
		this.root = this;
		this.screen = [];
		this.divactive = 99999;
		this.leafNameToNode = new haxe.ds.StringMap();
		this.nodeIdToNode = new haxe.ds.IntMap();
	}
	this.angle = 0;
	this.x = 0;
	this.y = 0;
	this.wedge = 0;
	this.length = 0;
	this.targetFamilyGene = [];
	this.l = 0;
};
phylo.PhyloTreeNode.__name__ = ["phylo","PhyloTreeNode"];
phylo.PhyloTreeNode.prototype = {
	parent: null
	,nodeId: null
	,name: null
	,targetFamily: null
	,targetFamilyGene: null
	,leaf: null
	,branch: null
	,angle: null
	,x: null
	,y: null
	,wedge: null
	,length: null
	,l: null
	,root: null
	,rad: null
	,quad: null
	,annotations: null
	,activeAnnotation: null
	,targets: null
	,screen: null
	,divactive: null
	,space: null
	,colour: null
	,children: null
	,dist: null
	,ratio: null
	,leaves: null
	,numchild: null
	,leafNameToNode: null
	,nodeIdToNode: null
	,rectangleTop: null
	,rectangleRight: null
	,rectangleBottom: null
	,rectangleLeft: null
	,results: null
	,minBranch: null
	,maxBranch: null
	,xRandom: null
	,yRandom: null
	,lineWidth: null
	,lineMode: null
	,angle_new: null
	,maxNameLength: null
	,wedgeColour: null
	,newickString: null
	,fasta: null
	,postOrderTraversal: function() {
		if(this.isLeaf() == true) {
			this.l = 1;
			this.root.targets[this.root.leaves] = this.name;
			this.root.leaves = this.root.leaves + 1;
			this.annotations = [];
			this.activeAnnotation = [];
			this.root.leafNameToNode.set(this.name,this);
		} else {
			var i = 0;
			while(i < this.children.length) {
				this.children[i].postOrderTraversal();
				this.l = this.l + this.children[i].l;
				i++;
			}
		}
	}
	,preOrderTraversal2: function(mode) {
		if(this.parent != null) {
			var parent = this.parent;
			this.x = parent.x + Math.cos(this.angle + this.wedge / 2) * this.root.dist;
			this.y = parent.y + Math.sin(this.angle + this.wedge / 2) * this.root.dist;
			if(mode == 1) {
				this.nodeId = this.root.numchild;
				this.root.nodeIdToNode.h[this.nodeId] = this;
			}
		} else if(mode == 1) this.nodeId = 0;
		var n = this.angle;
		var i = 0;
		while(i < this.children.length) {
			if(mode == 1) this.root.numchild = this.root.numchild + 1;
			this.children[i].wedge = this.children[i].l / this.children[i].root.l * 2 * Math.PI + Math.PI / 50;
			this.children[i].angle = n;
			n = n + this.children[i].wedge;
			this.children[i].preOrderTraversal2(mode);
			i++;
		}
	}
	,areAllChildrenLeaf: function() {
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			if(!child.isLeaf()) return false;
		}
		return true;
	}
	,preOrderTraversal: function(mode) {
		if(this.parent != null) {
			if(mode == 1) {
				this.nodeId = this.root.numchild;
				this.root.nodeIdToNode.h[this.nodeId] = this;
			}
			var a = this.getDepth() * this.root.ratio;
			if(this.angle > this.parent.angle) this.angle += phylo.PhyloHubMath.degreesToRadians(a); else this.angle -= phylo.PhyloHubMath.degreesToRadians(a);
			this.angle_new = this.angle + this.wedge / 2;
			this.x = this.parent.x + Math.cos(this.angle_new) * this.root.dist;
			this.y = this.parent.y + Math.sin(this.angle_new) * this.root.dist;
		} else if(mode == 1) this.nodeId = 0;
		var n = this.angle;
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			if(mode == 1) this.root.numchild = this.root.numchild + 1;
			child.wedge = 2 * Math.PI * child.getLeafCount() / child.root.getLeafCount();
			child.angle = n;
			child.angle_new = child.angle + child.wedge / 2;
			n += child.wedge;
			child.preOrderTraversal(mode);
		}
	}
	,calculateScale: function() {
		if(this.branch != null) {
			if(this.root.maxBranch == null || this.branch > this.root.maxBranch) this.root.maxBranch = this.branch;
			if(this.root.minBranch == null || this.branch < this.root.minBranch) this.root.minBranch = this.branch;
		}
		var _g1 = 0;
		var _g = this.children.length;
		while(_g1 < _g) {
			var i = _g1++;
			this.children[i].calculateScale();
		}
	}
	,getChildren: function() {
		return this.children;
	}
	,getChildN: function(i) {
		return this.children[i];
	}
	,addChild: function(child) {
		this.children[this.children.length] = child;
	}
	,isLeaf: function() {
		return this.leaf;
	}
	,getLeafCount: function() {
		if(this.isLeaf() == true) return 1; else {
			var total = 0;
			var i;
			i = 0;
			var _g1 = 0;
			var _g = this.children.length;
			while(_g1 < _g) {
				var i1 = _g1++;
				total += this.children[i1].getLeafCount();
			}
			return total;
		}
	}
	,getDepth: function() {
		if(this.parent == null) return 0; else return 1 + this.parent.getDepth();
	}
	,getHeight: function() {
		if(this.isLeaf()) return 0; else {
			var heightList = [];
			var i;
			i = 0;
			var _g1 = 0;
			var _g = this.children.length;
			while(_g1 < _g) {
				var i1 = _g1++;
				heightList[i1] = this.children[i1].getHeight() + 1;
			}
			return phylo.PhyloHubMath.getMaxOfArray(heightList);
		}
	}
	,getMaximumLeafNameLength: function(renderer) {
		if(this.maxNameLength != -1) return this.maxNameLength;
		var nodes = [];
		nodes.push(this);
		this.maxNameLength = 0;
		var maxName = "";
		var _g = 0;
		while(_g < nodes.length) {
			var node = nodes[_g];
			++_g;
			if(node.isLeaf()) {
				var nodeNameLength = node.name.length;
				if(nodeNameLength > this.maxNameLength) {
					this.maxNameLength = nodeNameLength;
					maxName = node.name;
				}
			} else {
				var _g1 = 0;
				var _g2 = node.children;
				while(_g1 < _g2.length) {
					var child = _g2[_g1];
					++_g1;
					nodes.push(child);
				}
			}
		}
		if(renderer != null) this.maxNameLength = renderer.mesureText(maxName);
		return this.maxNameLength;
	}
	,findFirstLeaf: function() {
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			if(child.isLeaf()) return child; else return child.findFirstLeaf();
		}
		return null;
	}
	,findLastLeaf: function() {
		var lastChild = null;
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			if(child.isLeaf()) lastChild = child; else lastChild = child.findLastLeaf();
		}
		return lastChild;
	}
	,setLineWidth: function(width) {
		this.lineWidth = width;
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			child.setLineWidth(width);
		}
	}
	,setLineMode: function(mode) {
		this.lineMode = mode;
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			child.setLineMode(mode);
		}
	}
	,rotateNode: function(clockwise,drawingMode) {
		var delta = -0.3;
		if(clockwise) delta = 0.3;
		this.x = (this.x - this.parent.x) * Math.cos(delta) - (this.y - this.parent.y) * Math.sin(delta) + this.parent.x;
		this.y = (this.x - this.parent.x) * Math.sin(delta) + (this.y - this.parent.y) * Math.cos(delta) + this.parent.y;
		this.angle = this.angle + delta;
		var n = this.angle;
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			child.wedge = child.l / this.root.l * 2 * Math.PI + Math.PI / 20;
			child.angle = n;
			n = n + child.wedge;
			if(drawingMode == phylo.PhyloDrawingMode.STRAIGHT) child.preOrderTraversal2(0); else if(drawingMode == phylo.PhyloDrawingMode.CIRCULAR) child.preOrderTraversal(0);
		}
	}
	,clearAnnotations: function() {
		this.annotations = [];
		if(this.activeAnnotation != null) {
			var _g1 = 0;
			var _g = this.activeAnnotation.length;
			while(_g1 < _g) {
				var i = _g1++;
				this.activeAnnotation[i] = false;
			}
		}
		var _g2 = 0;
		var _g11 = this.children;
		while(_g2 < _g11.length) {
			var child = _g11[_g2];
			++_g2;
			child.clearAnnotations();
		}
	}
	,getNewickString: function() {
		return this.newickString;
	}
	,setFasta: function(fasta) {
		this.fasta = fasta;
	}
	,getFasta: function() {
		return this.fasta;
	}
	,__class__: phylo.PhyloTreeNode
};
phylo.LineMode = $hxClasses["phylo.LineMode"] = { __ename__ : ["phylo","LineMode"], __constructs__ : ["STRAIGHT","BEZIER"] };
phylo.LineMode.STRAIGHT = ["STRAIGHT",0];
phylo.LineMode.STRAIGHT.toString = $estr;
phylo.LineMode.STRAIGHT.__enum__ = phylo.LineMode;
phylo.LineMode.BEZIER = ["BEZIER",1];
phylo.LineMode.BEZIER.toString = $estr;
phylo.LineMode.BEZIER.__enum__ = phylo.LineMode;
phylo.PhyloUtil = $hxClasses["phylo.PhyloUtil"] = function() {
};
phylo.PhyloUtil.__name__ = ["phylo","PhyloUtil"];
phylo.PhyloUtil.drawRadialFromNewick = function(newickStr,parent,config,annotationManager) {
	var parser = new phylo.PhyloNewickParser();
	var rootNode = parser.parse(newickStr);
	return phylo.PhyloUtil.drawRadialFromTree(rootNode,parent,config,annotationManager);
};
phylo.PhyloUtil.drawRadialFromTree = function(rootNode,parent,config,annotationManager) {
	rootNode.calculateScale();
	rootNode.postOrderTraversal();
	rootNode.preOrderTraversal(1);
	var parentWidth = parent.clientWidth;
	var parentHeight = parent.clientHeight;
	if(config == null) config = new phylo.PhyloCanvasConfiguration();
	var canvas = new phylo.PhyloCanvasRenderer(parentWidth,parentHeight,parent,rootNode,config,annotationManager);
	return canvas;
};
phylo.PhyloUtil.showMessage = function(message,title) {
	var dialog = new phylo.PhyloInfoWidget(window.document.body,message,title);
};
phylo.PhyloUtil.prototype = {
	__class__: phylo.PhyloUtil
};
var saturn = saturn || {};
if(!saturn.client) saturn.client = {};
saturn.client.WorkspaceApplication = $hxClasses["saturn.client.WorkspaceApplication"] = function(applicationTitle,navigationTitle,southTitle,detailsTitle,tabContainerTitle,searchBarTitle,nakedMode) {
	this.alwaysShowProgressWindow = false;
	this.progressWindow = null;
	this.screenMode = saturn.client.ScreenMode.DEFAULT;
	this.qtSaveFileContents = null;
	this.isInQtWebEngine = false;
	saturn.client.WorkspaceApplication.setApplication(this);
	this.nakedMode = nakedMode;
	this.theClipBoard = new saturn.client.ClipBoard();
	this.printBuffer = new StringBuf();
	this.searchBarListeners = [];
	this.outlineListeners = [];
	this.theProgramRegistry = new saturn.client.ProgramRegistry();
	this.applicationTitle = applicationTitle;
	this.navigationTitle = navigationTitle;
	this.southTitle = southTitle;
	this.detailsTitle = detailsTitle;
	this.tabContainerTitle = tabContainerTitle;
	this.searchBarTitle = searchBarTitle;
	this.programIdToTab = new haxe.ds.StringMap();
	debug.enable("haxe:app");
	this.debugLogger = debug("haxe:app");
	this.clientCore = saturn.client.core.ClientCore.startClientCore();
	this.clientCore.onProviderUp($bind(this,this.onProviderUp));
	this.clientCore.setShowMessage($bind(this,this.showMessage));
	this.clientCore.refreshSession(null);
};
saturn.client.WorkspaceApplication.__name__ = ["saturn","client","WorkspaceApplication"];
saturn.client.WorkspaceApplication.theApplication = null;
saturn.client.WorkspaceApplication.getApplication = function() {
	return saturn.client.WorkspaceApplication.theApplication;
};
saturn.client.WorkspaceApplication.setApplication = function(application) {
	saturn.client.WorkspaceApplication.theApplication = application;
};
saturn.client.WorkspaceApplication.resumeUpdates = function(b,force) {
	if(force == null) force = false;
	if(force) saturn.client.WorkspaceApplication.layoutsSuspended = 0; else saturn.client.WorkspaceApplication.layoutsSuspended--;
	if(saturn.client.WorkspaceApplication.layoutsSuspended == 0) Ext.resumeLayouts(b);
};
saturn.client.WorkspaceApplication.suspendUpdates = function(force) {
	if(force == null) force = false;
	saturn.client.WorkspaceApplication.layoutsSuspended++;
	if(saturn.client.WorkspaceApplication.layoutsSuspended == 0 || force) Ext.suspendLayouts();
};
saturn.client.WorkspaceApplication.updatesSuspended = function() {
	return saturn.client.WorkspaceApplication.layoutsSuspended > 0;
};
saturn.client.WorkspaceApplication.prototype = {
	theWorkspace: null
	,theProgramRegistry: null
	,applicationTitle: null
	,navigationTitle: null
	,southTitle: null
	,detailsTitle: null
	,tabContainerTitle: null
	,searchBarTitle: null
	,printBuffer: null
	,programIdToTab: null
	,theActiveProgram: null
	,searchBarListeners: null
	,outlineListeners: null
	,nakedMode: null
	,theClipBoard: null
	,debugLogger: null
	,rawQtChannel: null
	,isInQtWebEngine: null
	,qtSaveFileContents: null
	,fileHostCB: null
	,screenMode: null
	,progressWindow: null
	,alwaysShowProgressWindow: null
	,clientCore: null
	,onProviderUp: function() {
		this.clientCore.addUpdateListener($bind(this,this.updateProgress));
		this.clientCore.addRefreshListener($bind(this,this.refreshSession));
		this.createProgressWindow();
		this.checkBrowser();
	}
	,refreshSession: function() {
		this.getWorkspace().installRemoteWorkspaceStore();
	}
	,checkBrowser: function() {
		if(window.navigator.userAgent.indexOf("QtWebEngine") > -1) {
			this.isInQtWebEngine = true;
			this.loadQtLibrary();
		}
	}
	,isHostEnvironmentAvailable: function() {
		return this.isInQtWebEngine;
	}
	,makeAliasesAvailable: function() {
		var dwin = window;
		dwin.models = { };
		var pack = saturn.core.domain;
		var _g = 0;
		var _g1 = Reflect.fields(pack);
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			var qualifiedName = "saturn.core.domain." + field;
			var clazz = Type.resolveClass(qualifiedName);
			if(clazz != null) {
				dwin[field] = clazz;
				var model = this.getProvider().getModel(clazz);
				if(model != null) {
					dwin.models[field] = { };
					saturn.core.Util.debug("Alias " + qualifiedName + " created");
					var _g2 = 0;
					var _g3 = model.getAttributes();
					while(_g2 < _g3.length) {
						var modelField = _g3[_g2];
						++_g2;
						Reflect.setField(Reflect.field(dwin.models,field),modelField,new saturn.db.query_lang.Field(clazz,modelField));
					}
				}
			}
		}
		var pack1 = saturn.db.query_lang;
		var _g4 = 0;
		var _g11 = Reflect.fields(pack1);
		while(_g4 < _g11.length) {
			var field1 = _g11[_g4];
			++_g4;
			if(field1 == "Function") continue;
			var qualifiedName1 = "saturn.db.query_lang." + field1;
			var clazz1 = Type.resolveClass(qualifiedName1);
			if(clazz1 != null) {
				saturn.core.Util.debug("Alias " + field1 + " created");
				dwin[field1] = clazz1;
			} else saturn.core.Util.debug("Skipping " + qualifiedName1);
		}
	}
	,setProvider: function(provider) {
		saturn.client.core.CommonCore.setDefaultProvider(provider,null,true);
	}
	,getProvider: function() {
		return saturn.client.core.CommonCore.getDefaultProvider();
	}
	,getActiveProgramId: function() {
		if(this.theActiveProgram != null) return this.theActiveProgram.getId(); else return "-1";
	}
	,installOutlineTree: function(name,enableDrop,enableContainerDrop,modelName,mode) {
		if(mode == null) mode = "STANDARD";
	}
	,cleanEnvironment: function() {
		window.console.log("Cleaning!");
		saturn.client.WorkspaceApplication.suspendUpdates();
		this.destroyMenu();
		this.destroyToolBar();
		this.createToolBar();
		this.createMenuBar();
		this.populateNewMenu();
		this.clearDetailsPanel();
		this.clearSouthPanel();
		this.clearProgramSearchField();
		saturn.client.WorkspaceApplication.resumeUpdates(true);
	}
	,destroyToolBar: function() {
		window.console.log("Destroying tool bar");
	}
	,createToolBar: function() {
	}
	,getToolBar: function() {
		return null;
	}
	,onkeyup: function(event) {
	}
	,onkeydown: function(event) {
	}
	,setActiveProgram: function(program) {
		if(program == null) {
			this.theActiveProgram = null;
			return;
		}
		if(this.theActiveProgram != null && this.theActiveProgram == program) return;
		var programId = Std.string(program.getId());
		if(this.programIdToTab.exists(programId)) {
			var tab = this.programIdToTab.get(programId);
			if(this.theActiveProgram != null) {
				if(this.theActiveProgram != program) {
					if(!this.theActiveProgram.isClosed()) {
						this.theActiveProgram.onBlur();
						this.theActiveProgram.onBlurNotifyPlugins();
						this.cleanEnvironment();
					}
				}
			}
			if(this.theActiveProgram == null || this.theActiveProgram != program) {
				this.theActiveProgram = program;
				if(saturn.client.WorkspaceApplication.getApplication().isNaked() == false) this.getTabContainer().setActiveTab(tab);
				program.focusProgram();
			}
		} else throw new js._Boot.HaxeError(new saturn.util.HaxeException("Program with ID " + programId + " is not known to the main application"));
	}
	,getProgramTab: function(program) {
		var key = program.getId();
		return this.programIdToTab.get(key);
	}
	,setProgramTabTitle: function(program,title) {
		var tab = this.getProgramTab(program);
		tab.tab.setText(title);
	}
	,getActiveProgram: function() {
		return this.theActiveProgram;
	}
	,addProgram: function(program,active) {
		if(program.getId() == null) this.getWorkspace().registerProgram(program); else {
			var prog = program.getComponent();
			var self = this;
			prog.tabConfig = { listeners : { afterrender : function(tabHeader,b) {
				var contextMenu1 = function(event) {
					var contextMenu = Ext.create("Ext.menu.Menu",{ items : [{ text : "Close", handler : function() {
						self.getWorkspace().closeObject(prog.parentBuildingBlock.getActiveObjectId());
					}},{ text : "Close & Delete", handler : function() {
						self.getWorkspace().closeObjectAndDelete(prog.parentBuildingBlock.getActiveObjectId());
					}},{ text : "Close All", handler : function() {
						self.getWorkspace().closeAllObjects();
					}},{ text : "Close Others", handler : function() {
						self.getWorkspace().closeOtherObjects(prog.parentBuildingBlock.getActiveObjectId());
					}}]});
					contextMenu.showAt(event.clientX,event.clientY);
					event.preventDefault();
				};
				tabHeader.el.dom.onmouseup = function(event1) {
					if(event1.ctrlKey) contextMenu1(event1);
				};
				tabHeader.el.dom.oncontextmenu = contextMenu1;
			}}};
			var tab = this.getTabContainer().add(prog);
			tab.parentBuildingBlock = program;
			var key = program.getId();
			var value = tab;
			this.programIdToTab.set(key,value);
			if(active && !this.getWorkspace().isReloading()) this.setActiveProgram(program);
		}
	}
	,addSaveAsOptions: function() {
	}
	,closeProgram: function(program) {
		program.close();
		if(!this.getWorkspace().isReloading()) this.cleanEnvironment();
		var tab;
		var key = program.getId();
		tab = this.programIdToTab.get(key);
		this.getTabContainer().remove(tab);
		var key1 = program.getId();
		this.programIdToTab.remove(key1);
	}
	,getProgramRegistry: function() {
		return this.theProgramRegistry;
	}
	,initApplication: function() {
		this.createCentralPanel();
		this.createSearchBar(this.searchBarTitle);
		this.createMenuBar();
		this.createNavigationPanel(this.navigationTitle);
		this.createMiddleSouthPanel(this.southTitle);
		this.createSouthPanel(this.southTitle);
		this.createDetailsPanel(this.detailsTitle);
		this.createTabContainer(this.tabContainerTitle);
		this.createCentralInfoPanel();
		this.registerPrograms();
		this.populateNewMenu();
		var quickLaunchItems = this.getProgramRegistry().getQuickLaunchItems();
		var _g = 0;
		while(_g < quickLaunchItems.length) {
			var quickLaunchItem = quickLaunchItems[_g];
			++_g;
			this.getQuickLaunchBar().add(quickLaunchItem);
		}
	}
	,createMenuBar: function() {
	}
	,destroyMenu: function() {
	}
	,createNavigationPanel: function(navigationTitle) {
	}
	,createMiddleSouthPanel: function(southTitle) {
	}
	,createSouthPanel: function(southTitle) {
	}
	,createDetailsPanel: function(detailsTitle) {
	}
	,clearDetailsPanel: function() {
	}
	,clearSouthPanel: function() {
	}
	,createTabContainer: function(tabContainerTitle) {
	}
	,createCentralPanel: function() {
	}
	,createCentralInfoPanel: function() {
	}
	,setCentralInfoPanelText: function(txt) {
	}
	,registerPrograms: function() {
	}
	,createSearchBar: function(searchBarTitle) {
	}
	,populateNewMenu: function() {
		var shortNames = this.getProgramRegistry().getRegisteredWorkspaceObjectShortNames();
		var menuItems = [];
		var menuTextToShortName = new haxe.ds.StringMap();
		var $it0 = shortNames.keys();
		while( $it0.hasNext() ) {
			var shortName = $it0.next();
			var clazzName;
			clazzName = __map_reserved[shortName] != null?shortNames.getReserved(shortName):shortNames.h[shortName];
			var clazz = Type.resolveClass(clazzName);
			var newText = null;
			var model = this.getProvider().getModel(clazz);
			if(model != null) newText = model.getFileNewLabel();
			if(newText != null) {
				if(__map_reserved[newText] != null) menuTextToShortName.setReserved(newText,shortName); else menuTextToShortName.h[newText] = shortName;
				menuItems.push(newText);
			}
		}
		menuItems.sort(function(a,b) {
			a = a.toLowerCase();
			b = b.toLowerCase();
			if(a < b) return -1;
			if(a > b) return 1;
			return 0;
		});
		var _g = 0;
		while(_g < menuItems.length) {
			var menuItem = menuItems[_g];
			++_g;
			var shortName1;
			shortName1 = __map_reserved[menuItem] != null?menuTextToShortName.getReserved(menuItem):menuTextToShortName.h[menuItem];
			var clazzName1;
			clazzName1 = __map_reserved[shortName1] != null?shortNames.getReserved(shortName1):shortNames.h[shortName1];
			this.addNewMenuItem(menuItem,clazzName1);
		}
		this.addSaveMenuItem();
		this.addOpenDefaultWorkspaceMenuItem();
		this.addSaveWorkspaceMenuItem();
		this.addSaveWorkspaceAsMenuItem();
		this.addOpenSavedWorkspaceMenuItem();
	}
	,addNewMenuItem: function(shortName,clazzName) {
	}
	,addSaveMenuItem: function() {
	}
	,addSaveWorkspaceMenuItem: function() {
	}
	,addOpenDefaultWorkspaceMenuItem: function() {
	}
	,addSaveWorkspaceAsMenuItem: function() {
	}
	,addOpenSavedWorkspaceMenuItem: function() {
	}
	,getWorkspace: function() {
		return this.theWorkspace;
	}
	,getFileNewMenu: function() {
		return null;
	}
	,getFileMenu: function() {
		return null;
	}
	,getToolsMenu: function() {
		return null;
	}
	,getExportMenu: function() {
		return null;
	}
	,getImportMenu: function() {
		return null;
	}
	,getUpdateMenu: function() {
		return null;
	}
	,getWorkspaceExportMenu: function() {
		return null;
	}
	,getViewMenu: function() {
		return null;
	}
	,getEditMenu: function() {
		return null;
	}
	,getOpenMenu: function() {
		return null;
	}
	,getSaveMenu: function() {
		return null;
	}
	,getSaveAsMenu: function() {
		return null;
	}
	,getMenuBar: function() {
		return null;
	}
	,getNavigationPanel: function() {
		return null;
	}
	,getMiddleSouthPanel: function() {
		return null;
	}
	,getOultineTree: function(name) {
		return null;
	}
	,getOutlineDataStore: function(name) {
		return null;
	}
	,getDetailsPanel: function() {
		return null;
	}
	,getTabContainer: function() {
		return null;
	}
	,getOutlineTree: function(name) {
		return null;
	}
	,printInfo: function(message) {
	}
	,isNaked: function() {
		return this.nakedMode;
	}
	,getEastPanel: function() {
		return null;
	}
	,addSearchBarListener: function(listener) {
		this.searchBarListeners.unshift(listener);
	}
	,removeSearchBarListeners: function(listener) {
		HxOverrides.remove(this.searchBarListeners,listener);
	}
	,fireSearchObjectSelected: function(objSelected) {
		var _g = this;
		var it = HxOverrides.iter(this.searchBarListeners);
		it.realNext = it.next;
		var next = function() {
			if(it.hasNext()) {
				var listener = it.realNext();
				listener.objectSelected(_g,objSelected,it);
			}
		};
		it.next = next;
		it.next();
	}
	,fireSearchTermChanged: function(searchTerm) {
		var _g = this;
		var it = HxOverrides.iter(this.searchBarListeners);
		it.realNext = it.next;
		var next = function() {
			if(it.hasNext()) {
				var listener = it.realNext();
				listener.textChanged(_g,searchTerm,it);
			}
		};
		it.next = next;
		it.next();
	}
	,addOutlineListener: function(listener) {
		var _g = 0;
		var _g1 = this.outlineListeners;
		while(_g < _g1.length) {
			var eListener = _g1[_g];
			++_g;
			if(listener == eListener) return;
		}
		this.outlineListeners.unshift(listener);
	}
	,removeOutlineListener: function(listener) {
		HxOverrides.remove(this.outlineListeners,listener);
	}
	,fireOutlineItemClicked: function(view,rec,item,index) {
		var _g = 0;
		var _g1 = this.outlineListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener.onClick(view,rec,item,index);
		}
	}
	,autocomplete_update: function(items) {
	}
	,processException: function(ex) {
		this.showMessage("Warning",ex.getMessage());
	}
	,showMessage: function(title,obj) {
		var message = "Missing message<br/>Contact Developers";
		if(obj != null) {
			if(typeof(obj) == "string") {
				if(StringTools.startsWith(obj,"\"")) message = JSON.parse(obj); else message = obj;
			} else if(Object.prototype.hasOwnProperty.call(obj,"message")) message = obj.message;
		}
		Ext.Msg.alert(title,message);
	}
	,userPrompt: function(title,question,onYes,onNo,onCancel) {
		Ext.Msg.show({ title : title, msg : question, buttons : Ext.Msg.YESNOCANCEL, icon : Ext.Msg.QUESTION, fn : function(btn) {
			if(btn == "yes") onYes(); else if(btn == "no") {
				if(onNo != null) onNo();
			} else if(onCancel != null) onCancel();
		}});
	}
	,userValuePrompt: function(title,question,onOk,onCancel) {
		Ext.Msg.prompt(title,question,function(btn,text) {
			if(btn == "ok") onOk(text); else if(onCancel != null) onCancel();
		});
	}
	,showELN: function() {
	}
	,openLocalURL: function(path) {
		var location = window.location;
		var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + path;
		this.openUrl(dstURL);
	}
	,openUrl: function(url) {
		if(this.inIcm()) saturn.client.ICMClient.getClient().openUrl(url,false); else window.open(url,"_blank");
	}
	,inIcm: function() {
		return Reflect.hasField(window,"ICMScript");
	}
	,getClipBoard: function() {
		return this.theClipBoard;
	}
	,saveFile: function(blob,fileName) {
		if(Reflect.hasField(window,"ICMScript")) {
			blob = StringTools.replace(blob,"\n","<__MOLBIO__N>");
			blob = StringTools.replace(blob,"\t","<__MOLBIO_SEP>");
			var icmSetCommand = saturn.client.ICMClient.getClient().generateSetStringCommand("MOLBIO_FILE",blob);
			saturn.client.ICMClient.getClient().runCommand(icmSetCommand + "\n" + "sgc.molbio.exportToFileDialog(MOLBIO_FILE,'" + fileName + "')\n",function(data,err) {
				if(err != null) {
				}
			});
		} else {
			var dWin = window;
			dWin.saveAs(blob,fileName);
		}
	}
	,saveTextFile: function(content,fileName) {
		var blob;
		if(Reflect.hasField(window,"ICMScript")) blob = content; else blob = new Blob([content],{ type : "text/plain;charset=utf-8"});
		this.saveFile(blob,fileName);
	}
	,canvasToBlob: function(canvas) {
		var extractPattern = new EReg("data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)","");
		extractPattern.match(canvas.toDataURL());
		var binStr = window.atob(extractPattern.matched(3));
		var buf = new ArrayBuffer(binStr.length);
		var view = new Uint8Array(buf);
		var _g1 = 0;
		var _g = view.length;
		while(_g1 < _g) {
			var i = _g1++;
			view[i] = HxOverrides.cca(binStr,i);
		}
		var blob = new Blob([view],{ type : extractPattern.matched(1)});
		return blob;
	}
	,saveCanvasToFile: function(canvas,fileName) {
		this.saveFile(this.canvasToBlob(canvas),fileName);
	}
	,createProgressWindow: function() {
		this.progressWindow = Ext.create("Ext.window.Window",{ title : "Progress", height : 200, width : 400, layout : "fit", closeAction : "hide", items : { xtype : "panel", html : "", autoScroll : true, style : { 'overflow-y' : "scroll"}}});
	}
	,updateProgress: function() {
		var _g = this;
		var html = "";
		var showMsgIds = [];
		var _g1 = 0;
		var _g11 = saturn.client.core.ClientCore.getClientCore().msgIds;
		while(_g1 < _g11.length) {
			var msgId = _g11[_g1];
			++_g1;
			var job;
			var this1 = saturn.client.core.ClientCore.getClientCore().msgIdToJobInfo;
			job = this1.get(msgId);
			var json = Reflect.field(job,"JSON");
			var msg = Reflect.field(job,"MSG");
			if(msg == "_remote_provider_._data_request_objects_namedquery") {
				if(Reflect.field(json,"queryId") == "saturn.workflow") {
					if(Reflect.field(json,"class_name") == "saturn.workflow.HMMerResponse") showMsgIds.push(msgId);
				}
			} else if(msg == "_clustal_" || msg == "_thmm_" || msg == "_blast_" || msg == "_phylo_" || msg == "_psipred_" || msg == "_blast_updater_") showMsgIds.push(msgId);
		}
		var runTimer = false;
		if(showMsgIds.length == 0 && !this.alwaysShowProgressWindow) this.progressWindow.hide(); else {
			if(!this.progressWindow.isVisible()) this.progressWindow.show();
			html = "<ul>";
			var _g2 = 0;
			while(_g2 < showMsgIds.length) {
				var msgId1 = showMsgIds[_g2];
				++_g2;
				var job1;
				var this2 = saturn.client.core.ClientCore.getClientCore().msgIdToJobInfo;
				job1 = this2.get(msgId1);
				var json1 = Reflect.field(job1,"JSON");
				var msg1 = Reflect.field(job1,"MSG");
				if(msg1 == "_remote_provider_._data_request_objects_namedquery") {
					if(Reflect.field(json1,"queryId") == "saturn.workflow") {
						if(Reflect.field(json1,"class_name") == "saturn.workflow.HMMerResponse") msg1 = "Running domain prediction";
					}
				} else if(msg1 == "_clustal_") msg1 = "Running clustal alignment"; else if(msg1 == "_thmm_") msg1 = "Running transmembrane prediction"; else if(msg1 == "_blast_") msg1 = "Running BLAST"; else if(msg1 == "_phylo_") msg1 = "Generating phylogenetic tree"; else if(msg1 == "_psipred_") msg1 = "Running secondary structure prediction";
				var startTime = Reflect.field(job1,"START_TIME");
				var endTime = Reflect.field(job1,"END_TIME");
				if(endTime == null) {
					endTime = Date.now();
					runTimer = true;
				} else msg1 = msg1 + " <font color='green'>DONE</font>:";
				var diff = endTime - startTime;
				if(diff > 1000) msg1 = msg1 + " " + Std.string(diff / 1000) + "s"; else msg1 = msg1 + " " + (diff == null?"null":"" + diff) + "ms";
				html += "<li>" + msg1 + "</li>";
			}
			html += "</ul>";
		}
		if(this.progressWindow.down("panel").el != null) {
			this.progressWindow.down("panel").el.dom.innerHTML = html;
			if(runTimer) haxe.Timer.delay(function() {
				if(_g.progressWindow.isVisible()) _g.updateProgress();
			},1000);
		}
	}
	,setInformationPanelText: function(content,isHtml) {
	}
	,setProgramSearchFieldEmptyText: function(emptyText) {
	}
	,enableProgramSearchField: function(enable) {
	}
	,getPrintBufferContent: function() {
		return this.printBuffer.b;
	}
	,addToPrintBuffer: function(content) {
		this.printBuffer.b += Std.string("&lt;" + Std.string(content) + "\n<br/>");
	}
	,clearPrintBuffer: function() {
		this.printBuffer = new StringBuf();
	}
	,flushBufferToPanel: function() {
		this.setInformationPanelText("<font style=\"font-family:Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace;\">" + saturn.client.WorkspaceApplication.getApplication().getPrintBufferContent() + "</font>",true);
	}
	,loginPrompt: function() {
	}
	,getQuickLaunchBar: function() {
		return null;
	}
	,hideMiddleSouthPanel: function() {
	}
	,showMiddleSouthPanel: function() {
	}
	,clearProgramSearchField: function() {
	}
	,debug: function(message) {
		this.debugLogger(message);
	}
	,setLoggedIn: function(user) {
		saturn.client.core.ClientCore.getClientCore().setLoggedIn(user);
	}
	,setLoggedOut: function() {
		saturn.client.core.ClientCore.getClientCore().setLoggedOut();
	}
	,loadQtLibrary: function() {
		var scriptElem;
		var _this = window.document;
		scriptElem = _this.createElement("script");
		scriptElem.setAttribute("type","text/javascript");
		scriptElem.setAttribute("src","qrc:///qtwebchannel/qwebchannel.js");
		window.document.getElementsByTagName("head")[0].appendChild(scriptElem);
		this.connectQtWebChannel();
	}
	,connectQtWebChannel: function() {
		var _g = this;
		haxe.Timer.delay(function() {
			try {
				new QWebChannel(qt.webChannelTransport,function(channel) {
					_g.rawQtChannel = channel;
					var dialog = _g.rawQtChannel.objects.fileDialog;
					dialog.fileSelected.connect(function(filePath) {
						if(window.navigator.userAgent.indexOf("Windows") > -1) filePath = "/" + filePath;
						if(_g.qtSaveFileContents == null) _g.rawQtChannel.objects.HostFileReader.read_b64(filePath,function(contents) {
							var file = new saturn.core.FileShim(filePath,contents);
							_g.fileHostCB(file);
						}); else saturn.core.Util.getNewExternalProcess(function(process) {
							process.writeFile(filePath,_g.qtSaveFileContents);
						});
					});
				});
				return;
			} catch( exception ) {
				if (exception instanceof js._Boot.HaxeError) exception = exception.val;
				_g.connectQtWebChannel();
			}
		},100);
	}
	,refreshNewQtWebChannelObjects: function(cb) {
		var _g2 = this;
		this.rawQtChannel.exec({type:QWebChannelMessageTypes.init},function(data) {
			var _g = 0;
			var _g1 = Reflect.fields(data);
			while(_g < _g1.length) {
				var objectName = _g1[_g];
				++_g;
				saturn.core.Util.debug("Looking for " + objectName);
				if(!_g2.rawQtChannel.objects.hasOwnProperty(objectName)) {
					saturn.core.Util.debug("Found " + objectName);
					var object = new QObject(objectName, data[objectName], _g2.rawQtChannel);
					Reflect.field(_g2.rawQtChannel.objects,objectName).unwrapProperties();
				}
			}
			_g2.rawQtChannel.exec({type: QWebChannelMessageTypes.idle});
			cb(_g2.rawQtChannel);
		});
	}
	,getNewQtProcess: function(cb) {
		var _g = this;
		this.rawQtChannel.objects.foo.createNewProcess(function(objectId) {
			_g.refreshNewQtWebChannelObjects(function(channel) {
				cb(Reflect.field(channel.objects,objectId));
			});
		});
	}
	,getNewFileDialog: function(cb) {
		var _g = this;
		this.rawQtChannel.objects.foo.createNewDialog(function(objectId) {
			_g.refreshNewQtWebChannelObjects(function(channel) {
				cb(null,Reflect.field(channel.objects,objectId));
			});
		});
	}
	,openHostFile: function(cb) {
		this.fileHostCB = cb;
		var dialog = this.rawQtChannel.objects.fileDialog;
		dialog.visible = true;
	}
	,getScreenMode: function() {
		return this.screenMode;
	}
	,setMode: function(mode) {
		if(mode == this.screenMode) return;
		var oldMode = this.screenMode;
		this.screenMode = mode;
		if(mode == saturn.client.ScreenMode.SINGLE_APP) this.enterSingleAppMode(); else if(mode == saturn.client.ScreenMode.DEFAULT) {
			if(oldMode == saturn.client.ScreenMode.SINGLE_APP) this.exitSingleMode();
		}
	}
	,getSingleAppContainer: function() {
		return null;
	}
	,enterSingleAppMode: function() {
	}
	,exitSingleMode: function() {
	}
	,getGlobalSearchFieldObj: function() {
		return null;
	}
	,afterLoad: function() {
	}
	,__class__: saturn.client.WorkspaceApplication
};
saturn.client.EXTApplication = $hxClasses["saturn.client.EXTApplication"] = function(applicationTitle,navigationTitle,southTitle,detailsTitle,tabContainerTitle,searchBarTitle,nakedMode) {
	saturn.client.WorkspaceApplication.call(this,applicationTitle,navigationTitle,southTitle,detailsTitle,tabContainerTitle,searchBarTitle,nakedMode);
};
saturn.client.EXTApplication.__name__ = ["saturn","client","EXTApplication"];
saturn.client.EXTApplication.getCurrentApplication = function() {
	return js.Boot.__cast(saturn.client.WorkspaceApplication.getApplication() , saturn.client.EXTApplication);
};
saturn.client.EXTApplication.__super__ = saturn.client.WorkspaceApplication;
saturn.client.EXTApplication.prototype = $extend(saturn.client.WorkspaceApplication.prototype,{
	viewPoint: null
	,menuBar: null
	,navigatorPanel: null
	,middleSouthPanel: null
	,southPanel: null
	,eastPanel: null
	,centralPanel: null
	,searchBar: null
	,tabPanel: null
	,centralInfoPanel: null
	,searchBarStore: null
	,appkeydown: null
	,appkeyup: null
	,fileMenu: null
	,exportMenu: null
	,importMenu: null
	,updateMenu: null
	,workspaceExportMenu: null
	,editMenu: null
	,openMenu: null
	,saveMenu: null
	,saveAsMenu: null
	,newMenu: null
	,viewMenu: null
	,helpMenu: null
	,toolsMenu: null
	,outlineDataStores: null
	,outlineTrees: null
	,jConsole: null
	,enableOutlineDD: null
	,theToolBar: null
	,searchField: null
	,northPanel: null
	,rightMenu: null
	,loginMenu: null
	,loginMenuItem: null
	,logoutMenuItem: null
	,quickLaunchBar: null
	,toolBar: null
	,searchPanel: null
	,northContainer: null
	,appToolBar: null
	,databaseMenu: null
	,appContainer: null
	,oldToolBar: null
	,reattachIndex: null
	,oldTitle: null
	,onProviderUp: function() {
		var _g = this;
		saturn.client.WorkspaceApplication.prototype.onProviderUp.call(this);
		this.enableOutlineDD = false;
		this.outlineTrees = new haxe.ds.StringMap();
		this.outlineDataStores = new haxe.ds.StringMap();
		Ext.Loader.setConfig({ enabled : true, paths : { 'Ext.ux' : "js/ext/ux", 'Ext.grid.filters' : "js/ext/src/grid/filters"}});
		Ext.require("Ext.toolbar.Toolbar");
		Ext.require("Ext.data.TreeStore");
		Ext.require("Ext.container.Viewport");
		Ext.require("Ext.layout.container.Border");
		Ext.require("Ext.form.field.ComboBox");
		Ext.require("Ext.tree.Panel");
		Ext.require("Ext.tree.plugin.TreeViewDragDrop");
		Ext.require("Ext.grid.filters.Filters");
		Ext.define("org.sgc.TabReorder",{ extend : "Ext.tab.Panel", plugins : "tabreorderer", requires : ["Ext.ux.TabReorderer"], xtype : "reorderable-tabs"});
		Ext.onReady(function() {
			Ext.application({ name : "Saturn", launch : function() {
				_g.viewPoint = Ext.create("Ext.container.Viewport",{ layout : "border"});
				_g.northContainer = Ext.create("Ext.Container",{ layout : "vbox", width : "100%", region : "north", border : false});
				_g.northPanel = Ext.create("Ext.Container",{ layout : { type : "hbox", align : "center"}, width : "100%", region : "north", border : false});
				_g.northContainer.add(_g.northPanel);
				_g.createAppToolBar();
				_g.viewPoint.add(_g.northContainer);
				window.onbeforeunload = function(event) {
					return "Are you sure you want to close this window";
				};
				_g.initApplication();
				_g.afterLoad();
			}});
		});
		this.initialiseWindowListeners();
		this.jConsole = console;
		this.clientCore.addLoginListener($bind(this,this.setLoggedIn));
		this.clientCore.addLogoutListener($bind(this,this.setLoggedOut));
	}
	,initApplication: function() {
		saturn.client.WorkspaceApplication.prototype.initApplication.call(this);
	}
	,getGlobalSearchFieldObj: function() {
		return this.searchBar;
	}
	,getResourcesMenu: function() {
		return this.databaseMenu;
	}
	,createAppToolBar: function() {
		var _g = this;
		this.appToolBar = Ext.create("Ext.toolbar.Toolbar",{ region : "south", width : "100%", minHeight : 26, maxHeight : 26, style : { 'background-color' : "#6C6C6C"}, flex : 1, border : false});
		this.appToolBar.add({ iconCls : "x-btn-save-small", handler : function() {
			_g.getWorkspace().saveWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Save workspace"}});
		this.appToolBar.add({ iconCls : "x-btn-saveas-small", handler : function() {
			_g.promptSaveAs();
		}, tooltip : { dismissDelay : 10000, text : "Save workspace as"}});
		this.appToolBar.add({ iconCls : "x-btn-open-small", handler : function() {
			_g.getWorkspace().openDefaultWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Open workspace (default)"}});
		this.appToolBar.add({ iconCls : "x-btn-openas-small", handler : function() {
			_g.promptOpenWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Open workspace (named)"}});
		this.appToolBar.add({ iconCls : "x-btn-close-small", handler : function() {
			_g.getWorkspace().closeWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Close workspace"}});
		this.northContainer.add(this.appToolBar);
	}
	,addSaveAsOptions: function() {
		var p = this.getProvider();
		var activeProg = this.getActiveProgram();
		if(p == null || activeProg == null) return;
		var progClazz = Type.getClass(this.getActiveProgram());
		var models = activeProg.getSaveAsModelsForProgram();
		var _g = 0;
		while(_g < models.length) {
			var model = [models[_g]];
			++_g;
			var name = model[0].getAlias();
			if(name == null) name = Type.getClassName(model[0].getClass());
			this.getSaveAsMenu().add({ text : name, handler : (function(model) {
				return function() {
					activeProg.saveObjectAsGUI(model[0]);
				};
			})(model)});
		}
	}
	,getConsole: function() {
		return this.jConsole;
	}
	,printInfo: function(message) {
		this.getConsole().info(message);
	}
	,initialiseWindowListeners: function() {
		var _g = this;
		var dWindow = window.document;
		dWindow.onmouseup = function(event) {
			var activeProg = _g.getActiveProgram();
			if(activeProg != null) activeProg.mouseup(event);
		};
		dWindow.onmousedown = function(event1) {
			var activeProg1 = _g.getActiveProgram();
			if(activeProg1 != null) activeProg1.mousedown(event1);
		};
		var ctl = false;
		dWindow.onkeydown = function(event2) {
			if(event2.altKey) {
				ctl = true;
				event2.preventDefault();
				event2.stopPropagation();
			}
		};
		this.appkeydown = dWindow.onkeydown;
		dWindow.onkeyup = function(event3) {
			if(event3.keyCode == 18) ctl = false;
		};
		this.appkeyup = dWindow.onkeyup;
	}
	,onkeyup: function(event) {
		this.appkeyup(event);
	}
	,onkeydown: function(event) {
		this.appkeydown(event);
	}
	,addNewMenuItem: function(shortName,clazzName) {
		if(this.isNaked()) return;
		var self = this;
		var fileNewMenu = this.getFileNewMenu();
		fileNewMenu.add({ cls : "menu-item-" + StringTools.replace(clazzName,".","-"), text : shortName, handler : function() {
			var workspaceObject = Type.createInstance(Type.resolveClass(clazzName),[null,null]);
			self.getWorkspace().addObject(workspaceObject,true);
		}});
	}
	,addSaveMenuItem: function() {
		if(this.nakedMode) return;
	}
	,addOpenDefaultWorkspaceMenuItem: function() {
		var _g = this;
		if(this.nakedMode) return;
		var openMenu = this.getOpenMenu();
		if(this.isHostEnvironmentAvailable()) openMenu.add({ text : "Open File", handler : function() {
			_g.openHostFile(function(file) {
				_g.getWorkspace().openFile(file,true);
			});
		}});
		openMenu.add({ text : "Open Default Workspace", handler : Ext.bind(function() {
			_g.theWorkspace.openDefaultWorkspace();
		},this)});
		var self = this;
		this.getFileNewMenu().add({ text : "New workspace", handler : function() {
			Ext.Msg.show({ title : "Save Changes?", msg : "Save workspace before opening a new one?", buttons : Ext.Msg.YESNOCANCEL, icon : Ext.Msg.QUESTION, fn : function(btn) {
				if(btn == "yes") self.getWorkspace().saveWorkspace();
				if(btn != "cancel") {
					self.getWorkspace().closeWorkspace();
					Ext.Msg.prompt("New Workspace","Enter New Workspace name",function(btn1,text) {
						self.getWorkspace().setWorkspaceName(text);
						self.getWorkspace().saveWorkspace();
					});
				}
			}});
		}});
	}
	,addSaveWorkspaceMenuItem: function() {
		var _g = this;
		if(this.isNaked()) return;
		this.getSaveMenu().add({ text : "Save Workspace", handler : Ext.bind(function() {
			_g.theWorkspace.saveWorkspace();
		},this)});
	}
	,addSaveWorkspaceAsMenuItem: function() {
		var _g = this;
		if(this.isNaked()) return;
		var self = this;
		this.getSaveMenu().add({ text : "Save Workspace As", handler : function() {
			_g.promptSaveAs();
		}});
	}
	,addOpenSavedWorkspaceMenuItem: function() {
		var _g = this;
		if(this.isNaked()) return;
		var self = this;
		this.getOpenMenu().add({ text : "Open Workspace", handler : function() {
			_g.promptOpenWorkspace();
		}});
	}
	,promptOpenWorkspace: function() {
		var _g = this;
		this.getWorkspace().getWorkspaceNames(function(workspaceNames) {
			var workspaceData = [];
			var _g1 = 0;
			while(_g1 < workspaceNames.length) {
				var workspaceName = workspaceNames[_g1];
				++_g1;
				workspaceData.push({ 'name' : workspaceName});
			}
			var workspaces = Ext.create("Ext.data.Store",{ fields : ["name"], data : workspaceData});
			var windowId = Ext.id(null,"UNIQUE_");
			var uniqueId = Ext.id(null,"UNIQUE_");
			var vBoxLayout = [];
			vBoxLayout.push({ xtype : "combobox", fieldLabel : "Select workspace", store : workspaces, queryMode : "local", displayField : "name", valueField : "name", id : uniqueId});
			var buttonLayoutItems = [];
			buttonLayoutItems.push({ xtype : "button", text : "Open", handler : function() {
				var comp = Ext.getCmp(uniqueId);
				var workspaceName1 = comp.getValue();
				_g.getWorkspace().openWorkspace(workspaceName1);
				Ext.getCmp(windowId).close();
			}});
			buttonLayoutItems.push({ xtype : "button", text : "Cancel", handler : function() {
				Ext.getCmp(windowId).close();
			}});
			vBoxLayout.push({ xtype : "panel", layout : { type : "hbox", pack : "center", padding : "2px", defaultMargins : "2px"}, items : buttonLayoutItems});
			Ext.create("Ext.window.Window",{ title : "Open Workspace", modal : true, id : windowId, layout : { type : "vbox", align : "stretch", padding : "2px"}, items : vBoxLayout, width : 600}).show();
		});
	}
	,promptSaveAs: function() {
		var _g = this;
		this.getWorkspace().getWorkspaceNames(function(workspaceNames) {
			var workspaceData = [];
			var _g1 = 0;
			while(_g1 < workspaceNames.length) {
				var workspaceName = workspaceNames[_g1];
				++_g1;
				workspaceData.push({ 'name' : workspaceName});
			}
			var workspaces = Ext.create("Ext.data.Store",{ fields : ["name"], data : workspaceData});
			var vBoxLayout = [];
			vBoxLayout.push({ xtype : "form", layout : { type : "hbox", pack : "center", padding : "2px", defaultMargins : "2px"}, items : { xtype : "combobox", fieldLabel : "Save As", store : workspaces, queryMode : "local", displayField : "name", valueField : "name", name : "workspace"}, buttons : [{ xtype : "button", text : "Save", handler : function(btn) {
				var win = btn.up("window");
				var form = win.down("form");
				var name = form.getForm().findField("workspace").getValue();
				_g.getWorkspace().setWorkspaceName(name);
				_g.getWorkspace().saveWorkspace();
				win.close();
			}},{ xtype : "button", text : "Cancel", handler : function(btn1) {
				btn1.up("window").close();
			}}]});
			Ext.create("Ext.window.Window",{ title : "Save As", modal : true, layout : { type : "vbox", align : "stretch", padding : "2px"}, items : vBoxLayout}).show();
		});
	}
	,createMenuBar: function() {
		var _g = this;
		if(this.isNaked()) return;
		Ext.suspendLayouts();
		var self = this;
		this.menuBar = Ext.create("Ext.toolbar.Toolbar",{ region : "west", width : 500, listener : { render : function() {
		}}, flex : 2, border : false});
		this.rightMenu = Ext.create("Ext.toolbar.Toolbar",{ region : "east", listener : { render : function() {
		}}, border : false});
		this.loginMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		var loginText;
		if(saturn.client.core.ClientCore.getClientCore().isLoggedIn()) loginText = saturn.client.core.ClientCore.getClientCore().getUser().fullname; else loginText = "Login";
		this.loginMenuItem = this.rightMenu.add({ text : loginText, iconCls : "bmenu", menu : this.loginMenu, cls : "menu-item-FILE", handler : function() {
			if(!saturn.client.core.ClientCore.getClientCore().loggedIn) {
				_g.loginMenu.hide();
				_g.loginPrompt();
			}
		}});
		this.logoutMenuItem = this.loginMenu.add({ text : "Logout", handler : function() {
			saturn.client.core.ClientCore.getClientCore().logout();
		}, hidden : !saturn.client.core.ClientCore.getClientCore().isLoggedIn()});
		this.northPanel.add(this.menuBar);
		this.northPanel.add(this.searchBar);
		this.northPanel.add(this.rightMenu);
		this.menuBar.suspendLayouts();
		this.fileMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.menuBar.add({ text : "File", iconCls : "bmenu", menu : this.fileMenu, cls : "menu-item-FILE"});
		this.newMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0"});
		this.fileMenu.add({ text : "New", iconCls : "bmenu", menu : this.newMenu, cls : "menu-item-NEW"});
		this.openMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0"});
		this.fileMenu.add({ text : "Open", iconCls : "bmenu", menu : this.openMenu});
		this.saveMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0"});
		this.fileMenu.add({ text : "Save", iconCls : "bmenu", menu : this.saveMenu});
		this.saveAsMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0"});
		this.fileMenu.add({ text : "Save As", iconCls : "bmenu", menu : this.saveAsMenu});
		this.exportMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.fileMenu.add({ text : "Export", iconCls : "bmenu", menu : this.exportMenu, cls : "menu-item-FILE"});
		this.workspaceExportMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.fileMenu.add({ text : "Workspace Export", iconCls : "bmenu", menu : this.workspaceExportMenu, cls : "menu-item-FILE"});
		this.workspaceExportMenu.add({ text : "Export to file", handler : function() {
			_g.getWorkspace().saveWorkspaceToFile(_g.getWorkspace().getWorkspaceName() + ".sat");
		}});
		this.importMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.fileMenu.add({ text : "Import", iconCls : "bmenu", menu : this.importMenu, cls : "menu-item-FILE"});
		this.updateMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.fileMenu.add({ text : "Update", iconCls : "bmenu", menu : this.updateMenu, cls : "menu-item-FILE"});
		this.editMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.menuBar.add({ text : "Edit", iconCls : "bmenu", menu : this.editMenu});
		this.viewMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.menuBar.add({ text : "View", iconCls : "bmenu", menu : this.viewMenu});
		this.toolsMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.menuBar.add({ text : "Tools", iconCls : "bmenu", menu : this.toolsMenu});
		this.databaseMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.toolsMenu.add({ text : "Resources", iconCls : "bmenu", menu : this.databaseMenu});
		this.toolsMenu.add({ text : "Toggle Progress Window", handler : function() {
			if(!_g.progressWindow.isVisible()) {
				_g.progressWindow.show();
				_g.alwaysShowProgressWindow = true;
				_g.updateProgress();
			} else {
				_g.progressWindow.hide();
				_g.alwaysShowProgressWindow = false;
			}
		}});
		this.databaseMenu.add({ text : "Clear cache", handler : function() {
			_g.getProvider().resetCache();
		}});
		this.databaseMenu.add({ text : "Alias active", handler : function() {
			_g.userValuePrompt("Alias Active","Enter global variable name",function(name) {
				var d = window;
				Reflect.setField(d,name,_g.getActiveProgram());
			},null);
		}});
		this.helpMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.helpMenu.add({ text : "About", handler : function() {
			Ext.create("Ext.window.Window",{ title : "About", modal : true, html : "<div style=\"margin-left:5px;margin-right:5px\">" + "<h1><img style=\"vertical-align:middle;margin-left: -5\" src=\"/static/js/images/saturn.png\"></img><a target=\"_blank\" href=\"https://ddamerell53.github.io/SATurn/\">SATurn</a></h1>" + "<h2>Contributors</h2>" + "David Damerell<br/>Claire Strain-Damerell<br/>Sefa Garsot<br/>Paul Barrett<br/>Stephen Joyce<br/>Narayanan Krishnan<br/>Brian Marsden<br/>" + "<h2>SATurn License</h2>" + "The SATurn source code is released under the Creative Commons CC0 license which you can find <a target=\"_blank\" href=\"/static/licenses/LICENSE\">here</a><br/>" + "<h2>Third-party License</h2>" + "SATurn uses third-party programs and libraries which come with their own licenses which can be found below<br/><br/>" + "<b>By using or distributing SATurn you must comply with all licenses</b><br/><ul>" + "<li><a target=\"_blank\" href=\"/static/licenses/LICENSE_NODEJS\">NodeJS (web-server)</a></li>" + "<li><a target=\"_blank\" href=\"/static/licenses/LICENSE_BIOINFORMATICS\">Bioinformatics Tools (Clustal, BLAST, etc.)</a></li>" + "<li><a target=\"_blank\" href=\"/static/licenses/LICENSE_THIRD_PARTY\">Third-party JavaScript libraries (ExtJS, etc.)</a></li>" + "<li><a target=\"_blank\" href=\"/static/licenses/NODE_LICENSES\">Third-party NodeJS libraries</a></li>" + "<li><a target=\"_blank\" href=\"/static/licenses/LICENSE_REDIS\">Redis License</a></li></ul><br/></div>", height : "500px"}).show();
		}});
		this.helpMenu.add({ text : "Online Manual", handler : function() {
			window.open("https://ddamerell53.github.io/SATurn/","_blank");
		}});
		this.helpMenu.add({ text : "Local Manual", handler : function() {
			window.open("/static/manual/index.html","_blank");
		}});
		this.menuBar.add({ text : "Help", iconCls : "bmenu", menu : this.helpMenu});
		this.getFileMenu().add({ text : "Close workspace", handler : function() {
			Ext.Msg.show({ title : "Save Changes?", msg : "Save workspace before closing?", buttons : Ext.Msg.YESNOCANCEL, icon : Ext.Msg.QUESTION, fn : function(btn) {
				if(btn == "yes") self.getWorkspace().saveWorkspace();
				if(btn != "cancel") self.getWorkspace().closeWorkspace();
			}});
		}});
		this.getFileMenu().add({ text : "Close all programs", handler : function() {
			self.getWorkspace().closeAllObjects();
		}});
		this.menuBar.resumeLayouts(true);
		Ext.resumeLayouts(true);
	}
	,destroyMenu: function() {
		this.northPanel.remove(this.menuBar);
		this.northPanel.remove(this.rightMenu);
	}
	,getOpenMenu: function() {
		return this.openMenu;
	}
	,getSaveMenu: function() {
		return this.saveMenu;
	}
	,getSaveAsMenu: function() {
		return this.saveAsMenu;
	}
	,getFileMenu: function() {
		return this.fileMenu;
	}
	,getExportMenu: function() {
		return this.exportMenu;
	}
	,getImportMenu: function() {
		return this.importMenu;
	}
	,getUpdateMenu: function() {
		return this.updateMenu;
	}
	,getWorkspaceExportMenu: function() {
		return this.workspaceExportMenu;
	}
	,getViewMenu: function() {
		return this.viewMenu;
	}
	,getToolsMenu: function() {
		return this.toolsMenu;
	}
	,getFileNewMenu: function() {
		return this.newMenu;
	}
	,getMenuBar: function() {
		return this.menuBar;
	}
	,getEditMenu: function() {
		return this.editMenu;
	}
	,createNavigationPanel: function(navTitle) {
		this.theWorkspace = new saturn.client.workspace.Workspace();
		if(this.isNaked()) return;
		this.navigatorPanel = Ext.create("Ext.panel.Panel",{ region : "west", collapsible : true, collapseMode : "mini", hideCollapseTool : true, title : navTitle, split : true, width : 150, layout : "fit"});
		this.navigatorPanel.add(this.theWorkspace.getComponent());
		this.viewPoint.add(this.navigatorPanel);
	}
	,getNavigationPanel: function() {
		return this.navigatorPanel;
	}
	,createMiddleSouthPanel: function(southTitle) {
		if(this.isNaked()) return;
		this.middleSouthPanel = Ext.create("Ext.panel.Panel",{ region : "south", title : southTitle, collapsible : true, collapseMode : "mini", hideCollapseTool : true, html : "", split : true, height : 100, minHeight : 100, border : false, autoScroll : true});
		this.centralPanel.add(this.middleSouthPanel);
	}
	,createSouthPanel: function(southTitle) {
		if(this.isNaked()) return;
		window.console.log("Creating south panel");
		this.southPanel = Ext.create("Ext.Container",{ region : "south", title : southTitle, collapsible : false, collapseMode : "mini", hideCollapseTool : true, html : "", split : true, height : 50, minHeight : 50, border : false, style : { 'background-color' : "white"}});
		this.quickLaunchBar = Ext.create("Ext.toolbar.Toolbar",{ flex : 1, border : false, style : { 'background-color' : "white"}, overflowHandler : "menu"});
		this.southPanel.add(this.quickLaunchBar);
		this.viewPoint.add(this.southPanel);
	}
	,clearSouthPanel: function() {
		if(this.isNaked()) return;
		this.showMiddleSouthPanel();
	}
	,getMiddleSouthPanel: function() {
		return this.middleSouthPanel;
	}
	,hideMiddleSouthPanel: function() {
		this.middleSouthPanel.setVisible(false);
		this.centralInfoPanel.setVisible(false);
	}
	,showMiddleSouthPanel: function() {
		this.middleSouthPanel.setVisible(true);
		this.centralInfoPanel.setVisible(true);
	}
	,getQuickLaunchBar: function() {
		return this.quickLaunchBar;
	}
	,createDetailsPanel: function(detailsTitle) {
		if(this.isNaked()) return;
		this.eastPanel = Ext.create("Ext.panel.Panel",{ region : "east", title : detailsTitle, collapsible : true, split : true, width : 150, layout : "border", border : true, collapseMode : "mini", hideCollapseTool : true, height : "100%"});
		this.installOutlineTree("DEFAULT",false,false,null);
		this.viewPoint.add(this.eastPanel);
	}
	,installOutlineTree: function(name,enableDrop,enableContainerDrop,modelName,mode) {
		if(mode == null) mode = "STANDARD";
		var _g = this;
		var self = this;
		if(this.outlineTrees.exists(name)) this.eastPanel.remove(this.outlineTrees.get(name));
		var outlineDataStore = null;
		if(modelName == null) outlineDataStore = Ext.create("Ext.data.TreeStore",{ root : { expanded : true, autoSync : true}, proxy : { type : "memory"}}); else outlineDataStore = Ext.create("Ext.data.TreeStore",{ model : modelName, root : { expanded : true, autoSync : true, allowDrop : enableContainerDrop}, proxy : { type : "memory"}});
		if(this.isNaked()) return;
		var region;
		if(name == "MODELS") region = "center"; else region = "north";
		var plugins = "";
		var columns = null;
		if(mode == "GRID") {
			plugins = "cellediting";
			columns = [{ xtype : "treecolumn", dataIndex : "folder", flex : 1},{ dataIndex : "text", flex : 1, editor : { xtype : "textfield", readonly : false}}];
		}
		var viewConfig = { };
		if(name == "DEFAULT") viewConfig = { plugins : { ptype : "treeviewdragdrop", enableDrag : true, enableDrop : enableDrop, pluginId : "treedd", allowContainerDrops : false, appendOnly : true}, copy : true, listeners : { 'beforedrop' : function(node,data,overModel,dropPosition,dropHandlers,eOpts) {
			return self.onOutlineDrop(node,data,overModel,dropPosition,dropHandlers,eOpts);
		}, itemclick : function(view,rec,item,index) {
			_g.fireOutlineItemClicked(view,rec,item,index);
		}}, region : region};
		var outlineTree = Ext.create("Ext.tree.Panel",{ store : outlineDataStore, rootVisible : false, hideHeaders : true, viewConfig : viewConfig, border : false, columns : columns, plugins : plugins, region : region});
		this.outlineTrees.set(name,outlineTree);
		this.outlineDataStores.set(name,outlineDataStore);
		this.eastPanel.add(outlineTree);
		this.eastPanel.doLayout();
	}
	,getEastPanel: function() {
		return this.eastPanel;
	}
	,getOutlineTree: function(name) {
		return this.outlineTrees.get(name);
	}
	,onOutlineDrop: function(node,data,overModel,dropPosition,dropHandlers,eOpts) {
		return this.getActiveProgram().onOutlineDrop(node,data,overModel,dropPosition,dropHandlers,eOpts);
	}
	,clearDetailsPanel: function() {
		if(this.isNaked()) return;
		var $it0 = this.outlineDataStores.keys();
		while( $it0.hasNext() ) {
			var name = $it0.next();
			var dataStore = this.getOutlineDataStore(name);
			var rootNode = dataStore.getRootNode();
			rootNode.removeAll();
		}
	}
	,getOultineTree: function(name) {
		return this.outlineTrees.get(name);
	}
	,getOutlineDataStore: function(name) {
		return this.outlineDataStores.get(name);
	}
	,getDetailsPanel: function() {
		return this.eastPanel;
	}
	,createCentralPanel: function() {
		var regionPosition = "center";
		if(this.isNaked()) regionPosition = "north";
		this.centralPanel = Ext.create("Ext.Container",{ layout : "border", region : regionPosition, height : "100%"});
		this.viewPoint.add(this.centralPanel);
	}
	,setCentralInfoPanelText: function(txt) {
		this.centralInfoPanel.body.update(txt);
	}
	,createSearchBar: function(searchBarTitle) {
		var _g = this;
		if(this.isNaked()) return;
		var fieldArray = [{ name : "title", mapping : function(raw) {
			return raw.title;
		}},{ name : "id", mapping : function(raw1) {
			return raw1.id;
		}},{ name : "icon", mapping : function(raw2) {
			return raw2.icon;
		}}];
		this.searchBarStore = Ext.create("Ext.data.Store",{ fields : fieldArray, storeId : "SEARCH_BAR"});
		var self = this;
		this.searchBar = Ext.create("Ext.form.field.ComboBox",{ displayField : "title", focusOnToFront : false, valueField : "id", region : "west", emptyText : searchBarTitle, store : Ext.data.StoreManager.lookup("SEARCH_BAR"), enableKeyEvents : true, doQuery : function(queryStr) {
			if(queryStr == "") {
				if(_g.searchBar.rawValue == "") {
					self.autocomplete_update([]);
					_g.searchBar.setRawValue("");
				} else _g.searchBar.expand();
				return true;
			} else {
				var value1 = _g.searchBar.rawValue;
				self.autoCompleteSearchBar(queryStr);
				return true;
			}
		}, listeners : { select : function(comboBox,records) {
			self.fireSearchObjectSelected(records);
		}, 'afterrender' : function() {
			Ext.QuickTips.register({ dismissDelay : 10000, target : _g.searchBar.getEl(), text : "Prefix searches (cp-Construct Plate, ap-Allele Plate, pdb-PDB ID"});
		}}, flex : 1, tpl : Ext.create("Ext.XTemplate","<tpl for=\".\">" + "<tpl if=\"this.group != values.group\">" + "<tpl exec=\"this.group = values.group\"></tpl>" + "<div  style=\"background-color:grey;color:white;padding-left:2px\" title=\"{group}\">{group}</div>" + "</tpl>" + "<div class=\"x-boundlist-item\" style=\"background-image: url(/static/js/images/{icon});padding-left:20px;background-position: left center;background-repeat: no-repeat; \">{title}</div>" + "</tpl>"), defaultListConfig : { maxHeight : 500}});
		this.searchPanel = Ext.create("Ext.Panel",{ layout : { type : "hbox", padding : 5, align : "center"}, region : "north", border : false});
		var searchFN = function() {
			var value = _g.searchField.getValue();
			_g.getActiveProgram().search(value);
		};
		this.searchField = Ext.create("Ext.form.field.Text",{ name : "name", enableKeyEvents : true, valueField : "searchBox", emptyText : "Type to search", listeners : { keyup : { fn : searchFN}, focus : { fn : searchFN}}, disabled : true, style : { 'margin-left' : "4px"}});
		this.createToolBar();
		this.searchPanel.add(this.searchField);
		this.centralPanel.add(this.searchPanel);
	}
	,destroyToolBar: function() {
		window.console.log("Removing toolbar");
		Ext.suspendLayouts();
		this.toolBar.removeAll();
		Ext.resumeLayouts(true);
	}
	,createToolBar: function() {
		window.console.log("Creating toolbar");
		if(this.toolBar == null) {
			this.toolBar = Ext.create("Ext.toolbar.Toolbar",{ region : "east", width : 500, minHeight : 26, listener : { render : function() {
			}}, flex : 1, border : false, enableOverflow : true});
			this.searchPanel.add(this.toolBar);
		}
	}
	,setProgramSearchFieldEmptyText: function(emptyText) {
		this.searchField.emptyText = emptyText;
		this.searchField.applyEmptyText();
	}
	,clearProgramSearchField: function() {
		this.searchField.setValue("");
	}
	,enableProgramSearchField: function(enable) {
		this.searchField.setDisabled(!enable);
	}
	,autoCompleteSearchBar: function(queryStr) {
		this.fireSearchTermChanged(queryStr);
	}
	,createTabContainer: function(tabTitle) {
		var _g = this;
		var regionPosition = "center";
		var regionHeight = "90%";
		if(this.isNaked()) {
			regionPosition = "north";
			regionHeight = "100%";
			this.tabPanel = Ext.create("Ext.Panel",{ region : regionPosition, layout : "fit", height : regionHeight, xtype : "panel"});
			this.centralPanel.add(this.tabPanel);
		} else {
			this.tabPanel = Ext.create("org.sgc.TabReorder",{ border : false, region : regionPosition, layout : "fit", height : regionHeight, activeTab : 0});
			this.centralPanel.add(this.tabPanel);
			this.tabPanel.addListener("tabchange",function(tabContainer,newTab,previousTab) {
				if(_g.screenMode != saturn.client.ScreenMode.SINGLE_APP) {
					_g.setProgramSearchFieldEmptyText("Type to search");
					_g.enableProgramSearchField(false);
					if(js.Boot.__instanceof(newTab.parentBuildingBlock,saturn.client.BuildingBlock)) {
						var buildingBlock = newTab.parentBuildingBlock;
						var program = buildingBlock;
						if(_g.theActiveProgram == null || _g.theActiveProgram != program && !_g.getWorkspace().isReloading()) _g.setActiveProgram(program);
					}
				}
			});
		}
	}
	,createCentralInfoPanel: function() {
		if(this.isNaked()) return;
		this.centralInfoPanel = Ext.create("Ext.Panel",{ region : "south", height : 20, layout : "auto", border : false, cls : "saturn-info-panel", style : { 'background-color' : "grey"}});
		this.centralPanel.add(this.centralInfoPanel);
	}
	,getTabContainer: function() {
		return this.tabPanel;
	}
	,autocomplete_update: function(items) {
		window.console.log("Size: " + items.length);
		this.searchBarStore.loadData(items);
		this.searchBar.picker.navigationModel.recordIndex = 0;
		this.searchBar.picker.navigationModel.record = null;
		this.searchBar.bindStore(this.searchBarStore,true);
		if(items.length > 0) this.searchBar.expand(); else {
		}
	}
	,setInformationPanelText: function(content,isHtml) {
		var southPanel = this.getMiddleSouthPanel();
		var node = this.middleSouthPanel.getEl().dom.childNodes[1];
		if(isHtml) node.innerHTML = content; else node.innerText = content;
	}
	,loginPrompt: function() {
		var windowId = Ext.id(null,"UNIQUE_");
		var loginfn = function(obj) {
			var win = obj.up("window");
			var form = win.down("form");
			var username = form.getForm().findField("username").getValue();
			var password = form.getForm().findField("password").getValue();
			saturn.client.core.ClientCore.getClientCore().login(username,password,function(err,user) {
				if(err) Ext.Msg.alert(err); else win.close();
			});
		};
		var onSpecialKey = function(obj1,e) {
			var win1 = obj1.up("window");
			var form1 = win1.down("form");
			if(e.getKey() == e.ENTER) {
				var values = form1.query("field{isValid()==false}");
				if(values.length == 0) loginfn(obj1);
			} else if(e.getKey() == e.TAB) {
				var isUsernameField = false;
				if(obj1.getFieldLabel() == "Username") isUsernameField = true;
				if(isUsernameField) form1.getForm().findField("password").focus(false,200); else form1.getForm().findField("username").focus(false,200);
			}
		};
		var components = [{ fieldLabel : "Username", name : "username", listeners : { specialkey : onSpecialKey}},{ fieldLabel : "Password", name : "password", inputType : "password", allowBlank : false, listeners : { specialkey : onSpecialKey}}];
		var items = [];
		items.push({ xtype : "form", height : 150, width : 300, bodyPadding : 10, defaultType : "textfield", items : components, buttons : [{ xtype : "button", text : "Login", formBind : true, disabled : true, handler : function(obj2) {
			loginfn(obj2);
		}}]});
		Ext.create("Ext.window.Window",{ title : "Login", modal : true, id : windowId, layout : { type : "vbox", align : "stretch", padding : "2px"}, items : items, autoShow : true, defaultFocus : "form textfield"});
	}
	,getLoginMenuItem: function() {
		return this.loginMenuItem;
	}
	,setLoggedIn: function(user) {
		this.loginMenuItem.setText(user.fullname);
		if(!saturn.client.core.ClientCore.getClientCore().isLogoutDisabled()) this.logoutMenuItem.show(); else this.loginMenuItem.menu = null;
	}
	,setLoggedOut: function() {
		this.loginMenuItem.setText("Login");
		this.logoutMenuItem.hide();
	}
	,getToolBar: function() {
		return this.toolBar;
	}
	,exitSingleMode: function() {
		var prog = this.getActiveProgram();
		if(prog != null) {
			this.tabPanel.insert(this.reattachIndex,prog.getComponent());
			this.centralPanel.add(this.middleSouthPanel);
			this.centralPanel.add(this.centralInfoPanel);
			this.viewPoint.remove(this.appContainer.getComponent());
			this.viewPoint.doLayout();
			this.viewPoint.add(this.northContainer);
			this.viewPoint.add(this.navigatorPanel);
			this.viewPoint.add(this.eastPanel);
			this.viewPoint.add(this.southPanel);
			this.viewPoint.add(this.centralPanel);
			this.toolBar = this.oldToolBar;
			this.viewPoint.doLayout();
			this.tabPanel.setActiveTab(this.reattachIndex);
			prog.setTitle(this.oldTitle);
		}
	}
	,enterSingleAppMode: function() {
		var prog = this.getActiveProgram();
		if(prog != null) {
			this.oldTitle = prog.getComponent().tab.text;
			this.reattachIndex = this.tabPanel.items.findIndex("id",this.tabPanel.getActiveTab().id);
			this.viewPoint.remove(this.northContainer,false);
			this.viewPoint.remove(this.navigatorPanel,false);
			this.viewPoint.remove(this.eastPanel,false);
			this.viewPoint.remove(this.southPanel,false);
			this.viewPoint.remove(this.centralPanel,false);
			this.viewPoint.doLayout();
			this.appContainer = new saturn.client.SingleAppContainer();
			this.viewPoint.add(this.appContainer.getComponent());
			this.oldToolBar = this.toolBar;
			this.toolBar = this.appContainer.getControlToolBar();
			this.appContainer.setProgram(prog);
			this.appContainer.getCentralContainer().add(this.middleSouthPanel);
			this.appContainer.getCentralContainer().add(this.centralInfoPanel);
			this.viewPoint.show();
			this.viewPoint.doLayout();
		}
	}
	,getSingleAppContainer: function() {
		return this.appContainer;
	}
	,__class__: saturn.client.EXTApplication
});
saturn.client.SearchBarListener = $hxClasses["saturn.client.SearchBarListener"] = function() { };
saturn.client.SearchBarListener.__name__ = ["saturn","client","SearchBarListener"];
saturn.client.SearchBarListener.prototype = {
	objectSelected: null
	,textChanged: null
	,__class__: saturn.client.SearchBarListener
};
if(!saturn.app) saturn.app = {};
saturn.app.SaturnClient = $hxClasses["saturn.app.SaturnClient"] = function(applicationTitle,navigationTitle,southTitle,detailsTitle,tabContainerTitle,searchBarTitle,nakedMode) {
	saturn.client.EXTApplication.call(this,applicationTitle,navigationTitle,southTitle,detailsTitle,tabContainerTitle,searchBarTitle,nakedMode);
};
saturn.app.SaturnClient.__name__ = ["saturn","app","SaturnClient"];
saturn.app.SaturnClient.__interfaces__ = [saturn.client.SearchBarListener];
saturn.app.SaturnClient.main = function() {
	var inScarab = false;
	var client = new saturn.app.SaturnClient("SATurn Framework","Workspace","Notifications","Outline","Editor","Type to search (targets/constructs/alleles/entry clones/primers/compounds)",false);
	saturn.client.WorkspaceApplication.setApplication(client);
};
saturn.app.SaturnClient.getSaturn = function() {
	return js.Boot.__cast(saturn.client.WorkspaceApplication.getApplication() , saturn.app.SaturnClient);
};
saturn.app.SaturnClient.addProteinsFromNCBIGene = function(geneIds,editor) {
	var _g = 0;
	while(_g < geneIds.length) {
		var geneId = geneIds[_g];
		++_g;
		saturn.core.EUtils.getProteinsForGene(Std.parseInt(geneId),function(err,objs) {
			if(err == null) {
				if(editor != null) {
					var obj = objs.pop();
					editor.setSequence(obj.getSequence());
					editor.getEntity().setDNA(obj.getDNA());
					editor.getWorkspace().renameWorkspaceObject(editor.getActiveObjectId(),obj.getMoleculeName());
					editor = null;
				}
				var _g1 = 0;
				while(_g1 < objs.length) {
					var obj1 = objs[_g1];
					++_g1;
					saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(obj1,false);
				}
			} else saturn.client.WorkspaceApplication.getApplication().showMessage("Fetch failure","Unable to fetch proteins from NCBI " + err);
		});
	}
};
saturn.app.SaturnClient.addProteinsFromUniProtKB = function(accessions,editor) {
	var _g = 0;
	while(_g < accessions.length) {
		var accession = accessions[_g];
		++_g;
		var url = "http://www.uniprot.org/uniprot/" + accession + ".fasta";
		saturn.client.core.CommonCore.getContent(url,function(content) {
			var entities = saturn.core.FastaEntity.parseFasta(content);
			if(editor != null) {
				var entity = entities.pop();
				editor.setSequence(entity.getSequence());
				editor.getEntity().setDNA(null);
				editor.getWorkspace().renameWorkspaceObject(editor.getActiveObjectId(),entity.getName());
				editor = null;
			}
			var _g1 = 0;
			while(_g1 < entities.length) {
				var entity1 = entities[_g1];
				++_g1;
				var prot = new saturn.core.Protein(entity1.getSequence());
				prot.setMoleculeName(entity1.getName());
				saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(prot,false);
			}
		});
	}
};
saturn.app.SaturnClient.__super__ = saturn.client.EXTApplication;
saturn.app.SaturnClient.prototype = $extend(saturn.client.EXTApplication.prototype,{
	initApplication: function() {
		saturn.client.EXTApplication.prototype.initApplication.call(this);
		haxe.Serializer.USE_CACHE = true;
		saturn.client.core.CommonCore.getAnnotationManager().registerAnnotationSupplier(new saturn.core.annotations.PfamSupplier(),"PFAM");
		var dwin = window;
		dwin.app = this;
		dwin.WK = this.getWorkspace();
		dwin.wk = this.getWorkspace();
		dwin.ASYNC = function(objs,error) {
			dwin.result = objs;
			dwin.error = error;
		};
		dwin.EntryClone = saturn.core.domain.SgcEntryClone;
		dwin.Allele = saturn.core.domain.SgcAllele;
		dwin.Construct = saturn.core.domain.SgcConstruct;
		dwin.Vector = saturn.core.domain.SgcVector;
		dwin.DNA = saturn.core.DNA;
		dwin.Protein = saturn.core.Protein;
		dwin.Frame = saturn.core.Frame;
		dwin.StandardCode = saturn.core.GeneticCodes.STANDARD;
		dwin.DNAWO = saturn.client.workspace.DNAWorkspaceObject;
		dwin.ProteinWO = saturn.client.workspace.ProteinWorkspaceObject;
		dwin.PCR = saturn.core.PCRProduct;
		dwin.Primer = saturn.core.Primer;
		dwin.print = $bind(this,this.addToPrintBuffer);
		dwin.flush = $bind(this,this.flushBufferToPanel);
		dwin.LabPage = saturn.core.scarab.LabPage;
		this.debug("Saturn loaded");
	}
	,createMenuBar: function() {
		var _g = this;
		saturn.client.EXTApplication.prototype.createMenuBar.call(this);
		this.getResourcesMenu().add({ text : "Clear compound image cache", handler : function() {
			_g.clearCompoundImageCache();
		}});
		var exportMenu = this.getWorkspaceExportMenu();
		exportMenu.add({ text : "Protein -> FASTA", handler : function() {
			var workspace = _g.getWorkspace();
			var strBuf = new StringBuf();
			var woProteins = workspace.getAllObjects(saturn.core.Protein);
			var _g1 = 0;
			while(_g1 < woProteins.length) {
				var protein = woProteins[_g1];
				++_g1;
				var name = protein.getName();
				name = StringTools.replace(name," (Protein)","");
				strBuf.add(saturn.core.FastaEntity.formatFastaFile(name,protein.getSequence()));
			}
			_g.saveTextFile(strBuf.b,"Workspace_Proteins.fasta");
		}});
		exportMenu.add({ text : "DNA -> FASTA", handler : function() {
			var workspace1 = _g.getWorkspace();
			var strBuf1 = new StringBuf();
			var objs = workspace1.getAllObjects(saturn.core.DNA);
			var _g11 = 0;
			while(_g11 < objs.length) {
				var dna = objs[_g11];
				++_g11;
				var name1 = dna.getName();
				name1 = StringTools.replace(name1," (DNA)","");
				strBuf1.add(saturn.core.FastaEntity.formatFastaFile(name1,dna.getSequence()));
			}
			_g.saveTextFile(strBuf1.b,"Workspace_DNA.fasta");
		}});
		var databases;
		var _g2 = new haxe.ds.StringMap();
		if(__map_reserved.construct_protein != null) _g2.setReserved("construct_protein","Update Construct Protein BLASTDB"); else _g2.h["construct_protein"] = "Update Construct Protein BLASTDB";
		if(__map_reserved.construct_protein_no_tag != null) _g2.setReserved("construct_protein_no_tag","Update Construct Protein (No Tag) BLASTDB"); else _g2.h["construct_protein_no_tag"] = "Update Construct Protein (No Tag) BLASTDB";
		if(__map_reserved.construct_nucleotide != null) _g2.setReserved("construct_nucleotide","Update Construct Nucleotide BLASTDB"); else _g2.h["construct_nucleotide"] = "Update Construct Nucleotide BLASTDB";
		if(__map_reserved.allele_nucleotide != null) _g2.setReserved("allele_nucleotide","Update PCR Products Nucleotide BLASTDB"); else _g2.h["allele_nucleotide"] = "Update PCR Products Nucleotide BLASTDB";
		if(__map_reserved.allele_protein != null) _g2.setReserved("allele_protein","Update PCR Products Protein BLASTDB"); else _g2.h["allele_protein"] = "Update PCR Products Protein BLASTDB";
		if(__map_reserved.entryclone_nucleotide != null) _g2.setReserved("entryclone_nucleotide","Update Entry Clone Nucleotide BLASTDB"); else _g2.h["entryclone_nucleotide"] = "Update Entry Clone Nucleotide BLASTDB";
		if(__map_reserved.entryclone_protein != null) _g2.setReserved("entryclone_protein","Update Entry Clone Protein BLASTDB"); else _g2.h["entryclone_protein"] = "Update Entry Clone Protein BLASTDB";
		if(__map_reserved.target_nucleotide != null) _g2.setReserved("target_nucleotide","Update Target Nucleotide BLASTDB"); else _g2.h["target_nucleotide"] = "Update Target Nucleotide BLASTDB";
		if(__map_reserved.target_protein != null) _g2.setReserved("target_protein","Update Target Protein BLASTDB"); else _g2.h["target_protein"] = "Update Target Protein BLASTDB";
		if(__map_reserved.vector_nucleotide != null) _g2.setReserved("vector_nucleotide","Update Vector Nucleotide BLASTDB"); else _g2.h["vector_nucleotide"] = "Update Vector Nucleotide BLASTDB";
		databases = _g2;
		this.getUpdateMenu().add({ text : "All Local BLASTDBs", handler : function() {
			var databaseNames = [];
			var $it0 = databases.keys();
			while( $it0.hasNext() ) {
				var databaseName = $it0.next();
				databaseNames.push(databaseName);
			}
			var next = null;
			next = function() {
				var databaseName1 = databaseNames.pop();
				saturn.client.BioinformaticsServicesClient.getClient().sendBLASTDBUpdateRequest(databaseName1,function(response,error) {
					if(error != null) _g.showMessage("BLASTDB update failed on " + databaseName1,error);
					if(databaseNames.length == 0) _g.showMessage("BLAST Updates","BLASTDB updates completed"); else next();
				});
			};
			next();
		}});
		var $it1 = databases.keys();
		while( $it1.hasNext() ) {
			var databaseName2 = $it1.next();
			var databaseName3 = [databaseName2];
			this.getUpdateMenu().add({ text : __map_reserved[databaseName3[0]] != null?databases.getReserved(databaseName3[0]):databases.h[databaseName3[0]], handler : (function(databaseName3) {
				return function() {
					saturn.client.BioinformaticsServicesClient.getClient().sendBLASTDBUpdateRequest(databaseName3[0],(function() {
						return function(response1,error1) {
							if(error1 != null) _g.showMessage("BLASTDB update failed",error1); else _g.showMessage("BLASTDB updated","BLASTDB updated");
						};
					})());
				};
			})(databaseName3)});
		}
	}
	,registerPrograms: function() {
		saturn.client.EXTApplication.prototype.registerPrograms.call(this);
		this.getProgramRegistry().registerPlugin(saturn.client.programs.ProteinSequenceEditor,saturn.client.programs.plugins.SVGDomainAnnotationPlugin);
		this.getProgramRegistry().registerPlugin(saturn.client.programs.ProteinSequenceEditor,saturn.client.programs.plugins.SSAnnotationPlugin);
		this.getProgramRegistry().registerPlugin(saturn.client.programs.ProteinSequenceEditor,saturn.client.programs.plugins.TMHMMAnnotationPlugin);
		this.getProgramRegistry().registerPlugin(saturn.client.programs.GridVarViewer,saturn.client.programs.plugins.FASTAGridVarPlugin);
		this.getProgramRegistry().registerPlugin(saturn.client.programs.PDBViewer,saturn.client.programs.plugins.ThreeDMolViewer);
		this.getProgramRegistry().registerPlugin(saturn.client.programs.PDBViewer,saturn.client.programs.plugins.GLmolViewerPlugin);
		this.getProgramRegistry().registerPlugin(saturn.client.programs.GridVarViewer,saturn.client.programs.plugins.AlignmentGVPlugin);
		this.getProgramRegistry().registerProgram(saturn.client.programs.WebPageViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.ProteinSequenceEditor,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.DNASequenceEditor,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.AlignmentViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.ABITraceViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.ConstructDesigner,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.MultiAlleleHelper,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.MultiConstructHelper,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.Phylo5Viewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.TableHelper,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.GridVarViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.PDBViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.TextEditor,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.TiddlyWikiViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.BasicTableViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.CompoundViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.GlycanBuilder,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.HomePage,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.HelloWorldViewer,true);
		this.getProgramRegistry().registerProgram(saturn.client.programs.ComplexHelper,true);
		this.addSearchBarListener(this);
	}
	,objectSelected: function(app,records,it) {
		var targetId = records[0].data.targetId;
		var seqType = records[0].data.type;
		var item = records[0].data;
		var self = this;
		if(this.autocomplete_retrieveModel(item)) {
		} else if(targetId.indexOf("PAGE") != -1) this.autocomplete_retrievePage(targetId); else this.autocomplete_retrieveTargetSequence(targetId,seqType,item);
	}
	,textChanged: function(app,queryStr,it) {
		var _g = this;
		var sequenceEntered = false;
		if(queryStr.length > 30) {
			if(queryStr.indexOf(">") == -1) {
				var regex = new EReg("\\s","g");
				var regex2 = new EReg("\n","g");
				var convertedString = regex.replace(queryStr,"");
				var convertedString1 = regex2.replace(convertedString,"");
				if(saturn.core.DNA.isDNA(convertedString1) || saturn.core.Protein.isProtein(convertedString1)) {
					queryStr = ">Sequence\n" + convertedString1 + "\n";
					sequenceEntered = true;
				}
			} else sequenceEntered = true;
			if(sequenceEntered) {
				saturn.client.programs.DNASequenceEditor.parseFastaString(queryStr,true);
				return;
			}
		}
		var modifier = null;
		if(queryStr.indexOf("edit ") > -1) {
			modifier = "edit";
			queryStr = saturn.app.SaturnClient.reg_edit.replace(queryStr,"");
			if(queryStr.length == 0) {
				this.autocomplete_update([]);
				return;
			}
		}
		if(queryStr == "me") {
			if(saturn.client.core.ClientCore.getClientCore().getUser() != null) queryStr = saturn.client.core.ClientCore.getClientCore().getUser().fullname;
		}
		var units = [];
		var provider = this.getProvider();
		if(provider != null) {
			var model = provider.getModel(saturn.app.SaturnClient);
			if(model != null) {
				if(model.hasFlag("SGC")) {
					units.push({ indexof : null, func : $bind(this,this.autocomplete_targets), minlen : null, name : "Targets", limit : 10});
					units.push({ indexof : "pdb-", func : $bind(this,this.retrieve_pdb), minlen : null, name : "PDB", limit : 10});
					units.push({ indexof : "PAGE", func : $bind(this,this.autocomplete_eln), minlen : null, name : "ELN", limit : 10});
				}
			}
		}
		units.push({ indexof : null, func : $bind(this,this.autocomplete_fts_models), minlen : null, name : "FTS", limit : 10});
		var foundItems = [];
		var i = 0;
		var completed = 0;
		var toComplete = 0;
		var onComplete = function(items) {
			completed += 1;
			if(items != null) {
				var _g1 = 0;
				while(_g1 < items.length) {
					var item = items[_g1];
					++_g1;
					item.id = i++;
					foundItems.push(item);
				}
			}
			if(completed == toComplete) {
				foundItems.sort(function(a,b) {
					var aUnitSortPosition = Reflect.field(a,"unitSortPosition");
					var bUnitSortPosition = Reflect.field(b,"unitSortPosition");
					var aInternalSortPosition = Reflect.field(a,"internalSortPosition");
					var bInternalSortPosition = Reflect.field(b,"internalSortPosition");
					if(aUnitSortPosition < bUnitSortPosition) return -1;
					if(aUnitSortPosition > bUnitSortPosition) return 1;
					if(aInternalSortPosition > bInternalSortPosition) return 1;
					if(aInternalSortPosition < bInternalSortPosition) return -1;
					return 0;
				});
				_g.autocomplete_update(foundItems);
				it.next();
			}
		};
		var _g2 = 0;
		while(_g2 < units.length) {
			var unit = units[_g2];
			++_g2;
			var indexof = unit.indexof;
			var minlen = unit.minlen;
			if(!(indexof != null && queryStr.indexOf(indexof) == -1)) {
				if(!(minlen != null && queryStr.length < minlen)) toComplete += 1;
			}
		}
		var unitSortPosition = 0;
		var _g3 = 0;
		while(_g3 < units.length) {
			var unit1 = units[_g3];
			++_g3;
			var indexof1 = unit1.indexof;
			var minlen1 = unit1.minlen;
			var func = unit1.func;
			var name = unit1.name;
			var limit = unit1.limit;
			if(!(indexof1 != null && queryStr.indexOf(indexof1) == -1)) {
				if(!(minlen1 != null && queryStr.length < minlen1)) {
					unitSortPosition += 1;
					func(queryStr,onComplete,limit,unitSortPosition);
				}
			}
		}
	}
	,autocomplete_models: function(queryStr,nextSearch,limit) {
		var _g2 = this;
		var match = false;
		var _g = 0;
		var _g1 = this.getProvider().getModelClasses();
		while(_g < _g1.length) {
			var model = [_g1[_g]];
			++_g;
			var searchMap = model[0].getSearchMap();
			if(searchMap == null) continue;
			var $it0 = searchMap.keys();
			while( $it0.hasNext() ) {
				var field = $it0.next();
				var field1 = [field];
				var regex;
				regex = __map_reserved[field1[0]] != null?searchMap.getReserved(field1[0]):searchMap.h[field1[0]];
				if(regex.match(queryStr)) {
					match = true;
					if(model[0].stripPrefixes()) queryStr = regex.replace(queryStr,"");
					var idField = model[0].getFirstKey();
					var icon = [model[0].getIcon()];
					this.getProvider().getByIdStartsWith(queryStr,field1[0],model[0].getClass(),limit,(function(icon,field1,model) {
						return function(objs,exception) {
							if(exception == null) {
								if(objs == null || objs.length == 0) nextSearch(null); else {
									var storeList = [];
									var objIds = [];
									var _g21 = 0;
									while(_g21 < objs.length) {
										var obj = objs[_g21];
										++_g21;
										var id = Reflect.field(obj,field1[0]);
										objIds.push(id);
									}
									objIds.sort((function() {
										return function(a,b) {
											return Reflect.compare((a == null?"null":"" + a).toLowerCase(),(b == null?"null":"" + b).toLowerCase());
										};
									})());
									var i = 0;
									var _g22 = 0;
									while(_g22 < objIds.length) {
										var objId = objIds[_g22];
										++_g22;
										storeList.push({ icon : icon[0], title : objId, id : i++, targetId : objId, type : model[0], field : field1[0]});
									}
									nextSearch(storeList);
								}
							} else _g2.lookupException(exception);
						};
					})(icon,field1,model));
				}
			}
		}
		if(!match) nextSearch(null);
	}
	,autocomplete_fts_models: function(queryStr,nextSearch,limit,unitSortPosition) {
		var _g3 = this;
		var match = false;
		var model = null;
		var models = [];
		var ftsMap = new haxe.ds.StringMap();
		var ftsColumns = [];
		var next = null;
		var foundItems = [];
		var queryItems = null;
		if(queryStr.indexOf(" ") > -1) {
			var reg = new EReg("\\s+","g");
			queryItems = reg.split(queryStr);
			if(queryItems.length > 1) {
				var _g = 0;
				var _g1 = this.getProvider().getModelClasses();
				while(_g < _g1.length) {
					var model1 = _g1[_g];
					++_g;
					var ftsColumn = model1.getFirstKey();
					var cleanedItems = queryItems;
					if(model1.stripPrefixes()) {
						cleanedItems = [];
						var _g31 = 0;
						var _g2 = queryItems.length;
						while(_g31 < _g2) {
							var i = _g31++;
							cleanedItems[i] = model1.getIdRegEx().replace(queryItems[i],"");
						}
					}
					this.getProvider().getByValues(cleanedItems,model1.getClass(),ftsColumn,function(objs,err) {
						if(err == null) {
							if(objs != null) {
								var _g21 = 0;
								while(_g21 < objs.length) {
									var obj = objs[_g21];
									++_g21;
									_g3.getWorkspace().addObject(obj,true);
								}
							}
						}
					});
				}
				return;
			}
		}
		var _g4 = 0;
		var _g11 = this.getProvider().getModelClasses();
		while(_g4 < _g11.length) {
			var model2 = _g11[_g4];
			++_g4;
			models.push(model2);
		}
		var toComplete = 0;
		var _g5 = 0;
		while(_g5 < models.length) {
			var model3 = models[_g5];
			++_g5;
			var ftsMap1 = model3.getFTSColumns();
			if(ftsMap1 != null) {
				var $it0 = ftsMap1.keys();
				while( $it0.hasNext() ) {
					var column = $it0.next();
					toComplete += 1;
				}
			}
		}
		var completed = 0;
		var storeList = [];
		var internalSortPosition = 0;
		var _g6 = 0;
		while(_g6 < models.length) {
			var model4 = [models[_g6]];
			++_g6;
			ftsMap = model4[0].getFTSColumns();
			if(ftsMap == null) continue;
			var $it1 = ftsMap.keys();
			while( $it1.hasNext() ) {
				var ftsColumn1 = $it1.next();
				var ftsColumn2 = [ftsColumn1];
				var searchDef;
				searchDef = __map_reserved[ftsColumn2[0]] != null?ftsMap.getReserved(ftsColumn2[0]):ftsMap.h[ftsColumn2[0]];
				internalSortPosition += 1;
				var regex = searchDef.regex;
				if(regex != null) {
					if(!regex.match(queryStr)) {
						completed += 1;
						continue;
					} else if(searchDef.replaceWith != null) queryStr = searchDef.regex.replace(queryStr,searchDef.replaceWith);
				}
				var icon = [model4[0].getIcon()];
				var actions = [model4[0].getActions("search_bar")];
				var _internalSortPosition = [internalSortPosition];
				var handler = [(function(_internalSortPosition,actions,icon,ftsColumn2,model4) {
					return function(objs1,exception) {
						completed += 1;
						if(exception == null) {
							if(!(objs1 == null || objs1.length == 0)) {
								objs1.sort((function(ftsColumn2) {
									return function(a,b) {
										return Reflect.compare(Reflect.field(a,ftsColumn2[0]),Reflect.field(b,ftsColumn2[0]));
									};
								})(ftsColumn2));
								var i1 = 0;
								var idField = model4[0].getFirstKey();
								var _g12 = 0;
								while(_g12 < objs1.length) {
									var obj1 = objs1[_g12];
									++_g12;
									var idValue = Reflect.field(obj1,idField);
									var title = saturn.db.Model.extractField(obj1,ftsColumn2[0]);
									if(idField != ftsColumn2[0]) title += " - " + idValue;
									if(Reflect.field(obj1,"getShortDescription") != null) title = obj1.getShortDescription();
									if(__map_reserved.DEFAULT != null?actions[0].existsReserved("DEFAULT"):actions[0].h.hasOwnProperty("DEFAULT")) {
										var action;
										action = __map_reserved.DEFAULT != null?actions[0].getReserved("DEFAULT"):actions[0].h["DEFAULT"];
										storeList.push({ internalSortPosition : _internalSortPosition[0], unitSortPosition : unitSortPosition, action : action, icon : icon[0], title : title, id : i1++, targetId : idValue, type : model4[0], field : idField, group : model4[0].getAlias()});
									} else storeList.push({ internalSortPosition : _internalSortPosition[0], unitSortPosition : unitSortPosition, icon : icon[0], title : title, id : i1++, targetId : idValue, type : model4[0], field : idField, group : model4[0].getAlias()});
									var $it2 = actions[0].keys();
									while( $it2.hasNext() ) {
										var actionName = $it2.next();
										if(actionName == "DEFAULT") continue;
										var action1;
										action1 = __map_reserved[actionName] != null?actions[0].getReserved(actionName):actions[0].h[actionName];
										var actionIcon = icon[0];
										if(action1.icon != null) actionIcon = action1.icon;
										storeList.push({ internalSortPosition : _internalSortPosition[0], unitSortPosition : unitSortPosition, action : action1, icon : actionIcon, title : title + " (" + action1.userSuffix + ")", id : i1++, targetId : idValue, type : model4[0], field : idField, group : model4[0].getAlias()});
									}
								}
							}
						} else if(saturn.client.core.CommonCore.getStringError(exception) == "You must be logged in to use this provider") {
						} else {
						}
						if(completed == toComplete) nextSearch(storeList);
					};
				})(_internalSortPosition,actions,icon,ftsColumn2,model4)];
				if(ftsColumn2[0].indexOf(".") > -1) this.getProvider().queryPath(model4[0].getClass(),ftsColumn2[0],queryStr,"getByValues",(function(handler) {
					return function(err1,objs2) {
						handler[0](objs2,err1);
					};
				})(handler)); else if(queryItems == null) {
					if(model4[0].stripPrefixes()) queryStr = model4[0].getIdRegEx().replace(queryStr,"");
					this.getProvider().getByIdStartsWith(queryStr,ftsColumn2[0],model4[0].getClass(),limit,handler[0]);
				}
			}
		}
	}
	,autocomplete_retrieveModel: function(item) {
		var _g = this;
		var model = item.type;
		var id = item.targetId;
		var field = item.field;
		if(js.Boot.__instanceof(model,saturn.db.Model)) {
			var clazz = model.getClass();
			var wrapperClazz = model.getWorkspaceWrapperClass();
			this.getProvider().getByValue(id,clazz,field,function(obj,exception) {
				if(exception == null && obj != null) {
					var append = function(obj1) {
						if(obj1 != null) {
							var wo;
							if(wrapperClazz != null) wo = Type.createInstance(wrapperClazz,[obj1,id]); else wo = obj1;
							_g.getWorkspace().addObject(wo,true);
						}
					};
					if(item.action != null) item.action.run(obj,append); else append(obj);
				} else if(exception != null) _g.lookupException(exception.message);
			});
			return true;
		} else return false;
	}
	,autocomplete_eln: function(query,nextSearch,limit) {
		var _g = this;
		this.getProvider().getByIdStartsWith(query,null,saturn.core.scarab.LabPage,limit,function(pages,exception) {
			if(exception == null) {
				if(pages == null || pages.length == 0) {
					nextSearch(null);
					return;
				}
				var storeList = [];
				var i = 0;
				var _g1 = 0;
				while(_g1 < pages.length) {
					var page = pages[_g1];
					++_g1;
					storeList.push({ title : page.experimentNo, id : i++, targetId : page.experimentNo, type : "eln"});
				}
				nextSearch(storeList);
			} else if(exception != null) {
				_g.lookupException(exception.message);
				nextSearch(null);
			}
		});
	}
	,autocomplete_retrievePage: function(query) {
		var _g = this;
		this.getProvider().getById(query,saturn.core.scarab.LabPage,function(page,exception) {
			if(exception == null && page != null) _g.getProvider().activate([page],2,function(error) {
				var wo = new saturn.client.workspace.ScarabELNWO(page,query);
				_g.getWorkspace().addObject(wo,true);
			}); else if(exception != null) _g.lookupException(exception.message);
		});
	}
	,lookupException: function(msg) {
		saturn.client.WorkspaceApplication.getApplication().showMessage("Lookup exception",msg);
	}
	,autocomplete_targets: function(query,nextSearch,limit,unitSortPosition) {
		var _g = this;
		var modifierStr = "";
		var modifier = "";
		this.getProvider().getByIdStartsWith(query,null,saturn.core.domain.SgcTarget,limit,function(targets,exception) {
			if(exception == null) {
				var internalSortPosition = 0;
				if(targets == null || targets.length == 0) {
					nextSearch(null);
					return;
				}
				var storeList = [];
				var uniqueMap = new haxe.ds.StringMap();
				var _g1 = 0;
				while(_g1 < targets.length) {
					var target = targets[_g1];
					++_g1;
					var targetId = HxOverrides.substr(target.targetId,0,target.targetId.length - 1);
					if(__map_reserved[targetId] != null) uniqueMap.setReserved(targetId,""); else uniqueMap.h[targetId] = "";
				}
				var baseCount = 0;
				var $it0 = uniqueMap.keys();
				while( $it0.hasNext() ) {
					var key = $it0.next();
					baseCount++;
				}
				var lastBaseName = null;
				var i = 0;
				var _g2 = 0;
				while(_g2 < targets.length) {
					var target1 = targets[_g2];
					++_g2;
					var baseName = HxOverrides.substr(target1.targetId,0,target1.targetId.length - 1);
					var group = "Targets";
					if(target1.targetId.toUpperCase() == query.toUpperCase() || baseCount <= 2 && (lastBaseName == null || baseName != lastBaseName)) {
						lastBaseName = baseName;
						group = target1.targetId;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "gridvar_16.png", title : target1.targetId + " (Target Summary)", id : i++, targetId : target1.targetId, type : "Constructs Protein - No Tag Summary", group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "structure_16.png", title : modifierStr + baseName + " (All Isoforms - Protein)", id : i++, targetId : target1.targetId, type : "All Isoforms - Protein", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "dna_16.png", title : modifierStr + baseName + " (All Isoforms - Nucleotide)", id : i++, targetId : target1.targetId, type : "All Isoforms - Nucleotide", modifier : modifier, group : group});
						internalSortPosition += 1;
					}
					storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "structure_16.png", title : modifierStr + target1.targetId + " (Protein)", id : i++, targetId : target1.targetId, type : "Protein", modifier : modifier, group : group});
					internalSortPosition += 1;
					storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "dna_16.png", title : modifierStr + target1.targetId + " (DNA)", id : i++, targetId : target1.targetId, type : "Nucleotide", modifier : modifier, group : group});
					internalSortPosition += 1;
					if(target1.targetId.toUpperCase() == query.toUpperCase() || targets.length <= 3) {
						group = target1.targetId;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "dna_16.png", title : modifierStr + target1.targetId + " (Entry Clones DNA)", id : i++, targetId : target1.targetId, type : "Entry Clones DNA", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "structure_16.png", title : modifierStr + target1.targetId + " (Entry Clones - Translation)", id : i++, targetId : target1.targetId, type : "Entry Clones Translation", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "structure_16.png", title : modifierStr + target1.targetId + " (Alleles Protein)", id : i++, targetId : target1.targetId, type : "Alleles Protein", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "dna_16.png", title : modifierStr + target1.targetId + " (Alleles DNA)", id : i++, targetId : target1.targetId, type : "Alleles DNA", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "structure_16.png", title : modifierStr + target1.targetId + " (Constructs Protein)", id : i++, targetId : target1.targetId, type : "Constructs Protein", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "structure_16.png", title : modifierStr + target1.targetId + " (Constructs Protein - No Tag)", id : i++, targetId : target1.targetId, type : "Constructs Protein - No Tag", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "dna_16.png", title : modifierStr + target1.targetId + " (Constructs DNA)", id : i++, targetId : target1.targetId, type : "Constructs DNA", modifier : modifier, group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "aln_16.png", title : "Align " + target1.targetId + " (Constructs DNA)", id : i++, targetId : target1.targetId, type : "Constructs DNA Align", group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "aln_16.png", title : "Align " + target1.targetId + " (Constructs Protein)", id : i++, targetId : target1.targetId, type : "Constructs Protein Align", group : group});
						internalSortPosition += 1;
						storeList.push({ unitSortPosition : unitSortPosition, internalSortPosition : internalSortPosition, icon : "aln_16.png", title : "Align " + target1.targetId + " (Constructs Protein - No Tag)", id : i++, targetId : target1.targetId, type : "Constructs Protein - No Tag Align", group : group});
						internalSortPosition += 1;
					}
				}
				nextSearch(storeList);
			} else if(exception != null) _g.lookupException(exception.message);
		});
	}
	,autocomplete_retrieveTargetSequence: function(targetId,seqType,item) {
		var _g = this;
		if(seqType == "All Isoforms - Protein" || seqType == "All Isoforms - Nucleotide") {
			var type = "Protein";
			var label = "Protein";
			if(seqType == "All Isoforms - Nucleotide") {
				label = "DNA";
				type = "Nucleotide";
			}
			this.getProvider().getById(targetId,saturn.core.domain.SgcTarget,function(obj,ex) {
				if(ex != null) {
					_g.lookupException(ex.message);
					return;
				}
				_g.getProvider().getByValues([obj.geneId],saturn.core.domain.SgcTarget,"geneId",function(objs,ex1) {
					if(ex1 != null) {
						_g.lookupException(ex1.message);
						return;
					}
					if(objs.length == 0) _g.lookupException("No isoforms found");
					var autoOpen = true;
					_g.getWorkspace().beginUpdate();
					var _g1 = 0;
					while(_g1 < objs.length) {
						var obj1 = objs[_g1];
						++_g1;
						if(type == "Protein") {
							_g.getWorkspace().addObject(obj1,false);
							obj1.proteinSequenceObj.setName(obj1.targetId + " (Translation)");
							_g.getWorkspace().addObject(obj1.proteinSequenceObj,true);
						} else if(type == "Nucleotide") _g.getWorkspace().addObject(obj1,true);
						autoOpen = false;
					}
					_g.getWorkspace().reloadWorkspace();
				});
			});
		} else if(seqType == "Protein" || seqType == "Nucleotide") this.getProvider().getById(targetId,saturn.core.domain.SgcTarget,function(obj2,ex2) {
			if(ex2 != null) {
				_g.lookupException(ex2.message);
				return;
			}
			if(seqType == "Protein") {
				_g.getWorkspace().addObject(obj2,false);
				obj2.proteinSequenceObj.setName(obj2.targetId + " (Translation)");
				_g.getWorkspace().addObject(obj2.proteinSequenceObj,true);
			} else if(seqType == "Nucleotide") _g.getWorkspace().addObject(obj2,true);
		}); else if(seqType == "Entry Clones DNA") this.getProvider().getByNamedQuery("TARGET_TO_ENTRY_CLONES",[targetId],saturn.core.domain.SgcEntryClone,false,function(clones,exception) {
			if(exception == null && clones != null && clones.length != 0) {
				var autoOpen1 = true;
				var folderName = targetId + " (Entry Clone DNA)";
				var folder = _g.getWorkspace()._addFolder(folderName);
				_g.getWorkspace().beginUpdate();
				var added = 0;
				var _g11 = 0;
				while(_g11 < clones.length) {
					var clone = clones[_g11];
					++_g11;
					if(clone.dnaSeq != null) {
						_g.getWorkspace()._addObject(clone,autoOpen1,false,folder);
						autoOpen1 = false;
						added++;
					}
				}
				if(added > 0) _g.getWorkspace().reloadWorkspace(); else _g.showMessage("No data","No alleles with a Protein sequence");
			} else if(exception != null) _g.lookupException(exception.message); else if(clones == null || clones.length == 0) _g.showMessage("No entries","No entries in database");
		}); else if(seqType == "Entry Clones Translation") this.getProvider().getByNamedQuery("TARGET_TO_ENTRY_CLONES",[targetId],saturn.core.domain.SgcEntryClone,false,function(clones1,exception1) {
			if(exception1 == null && clones1 != null && clones1.length != 0) {
				var autoOpen2 = true;
				var folderName1 = targetId + " (Entry Clone Translation)";
				var folder1 = _g.getWorkspace()._addFolder(folderName1);
				_g.getWorkspace().beginUpdate();
				var added1 = 0;
				var _g12 = 0;
				while(_g12 < clones1.length) {
					var clone1 = clones1[_g12];
					++_g12;
					if(clone1.dnaSeq != null) try {
						var tx = clone1.getTranslation(saturn.core.GeneticCodes.STANDARD,0,false);
						var prot = new saturn.core.Protein(tx);
						prot.setName(clone1.entryCloneId + " (Protein)");
						_g.getWorkspace()._addObject(prot,autoOpen2,false,folder1);
						autoOpen2 = false;
						added1++;
					} catch( ex3 ) {
						if (ex3 instanceof js._Boot.HaxeError) ex3 = ex3.val;
						if( js.Boot.__instanceof(ex3,saturn.util.HaxeException) ) {
						} else throw(ex3);
					}
				}
				if(added1 > 0) _g.getWorkspace().reloadWorkspace(); else _g.showMessage("No data","No alleles with a Protein sequence");
			} else if(exception1 != null) _g.lookupException(exception1.message); else if(clones1 == null || clones1.length == 0) _g.showMessage("No entries","No entries in database");
		}); else if(seqType == "Alleles Protein") this.getProvider().getByNamedQuery("TARGET_TO_ALLELES",[targetId],saturn.core.domain.SgcAllele,false,function(alleles,exception2) {
			if(exception2 == null && alleles != null && alleles.length != 0) {
				var autoOpen3 = true;
				var folderName2 = targetId + " (Allele Protein)";
				var folder2 = _g.getWorkspace()._addFolder(folderName2);
				_g.getWorkspace().beginUpdate();
				var added2 = 0;
				var _g13 = 0;
				while(_g13 < alleles.length) {
					var allele = alleles[_g13];
					++_g13;
					if(allele.proteinSeq != null) {
						allele.proteinSequenceObj.setName(allele.getName() + " (Protein)");
						_g.getWorkspace()._addObject(allele.proteinSequenceObj,autoOpen3,false,folder2);
						autoOpen3 = false;
						added2++;
					}
				}
				if(added2 > 0) _g.getWorkspace().reloadWorkspace(); else _g.showMessage("No data","No alleles with a Protein sequence");
			} else if(exception2 != null) _g.lookupException(exception2.message); else if(alleles == null || alleles.length == 0) _g.showMessage("No entries","No entries in database");
		}); else if(seqType == "Alleles DNA") this.getProvider().getByNamedQuery("TARGET_TO_ALLELES",[targetId],saturn.core.domain.SgcAllele,false,function(alleles1,exception3) {
			if(exception3 == null && alleles1 != null && alleles1.length != 0) {
				var autoOpen4 = true;
				var folderName3 = targetId + " (Allele DNA)";
				var folder3 = _g.getWorkspace()._addFolder(folderName3);
				_g.getWorkspace().beginUpdate();
				var added3 = 0;
				var _g14 = 0;
				while(_g14 < alleles1.length) {
					var allele1 = alleles1[_g14];
					++_g14;
					if(allele1.dnaSeq != null) {
						_g.getWorkspace()._addObject(allele1,autoOpen4,false,folder3);
						added3++;
						autoOpen4 = false;
					}
				}
				if(added3 > 0) _g.getWorkspace().reloadWorkspace(); else _g.showMessage("No data","No alleles with a DNA sequence");
			} else if(exception3 != null) _g.lookupException(exception3.message); else if(alleles1 == null || alleles1.length == 0) _g.showMessage("No entries","No entries in database");
		}); else if(seqType == "Constructs Protein") this.getProvider().getByNamedQuery("TARGET_TO_CONSTRUCTS",[targetId],saturn.core.domain.SgcConstruct,false,function(constructs,exception4) {
			if(exception4 == null && constructs != null && constructs.length != 0) {
				var autoOpen5 = true;
				var folderName4 = targetId + " (Constructs Protein)";
				var folder4 = _g.getWorkspace()._addFolder(folderName4);
				_g.getWorkspace().beginUpdate();
				var added4 = 0;
				var _g15 = 0;
				while(_g15 < constructs.length) {
					var construct = constructs[_g15];
					++_g15;
					if(construct.proteinSeq != null) {
						var protein = construct.proteinSequenceObj;
						protein.setName(construct.constructId + " - Protein");
						_g.getWorkspace()._addObject(protein,autoOpen5,false,folder4);
						autoOpen5 = false;
						added4++;
					}
				}
				if(added4 > 0) _g.getWorkspace().reloadWorkspace(); else _g.showMessage("No data","No constructs with a protein sequence");
			} else if(exception4 != null) _g.lookupException(exception4.message); else if(constructs == null || constructs.length == 0) _g.showMessage("No entries","No entries in database");
		}); else if(seqType == "Constructs DNA") this.getProvider().getByNamedQuery("TARGET_TO_CONSTRUCTS",[targetId],saturn.core.domain.SgcConstruct,false,function(constructs1,exception5) {
			if(exception5 == null && constructs1 != null && constructs1.length != 0) {
				var autoOpen6 = true;
				var folderName5 = targetId + " (Constructs DNA)";
				var folder5 = _g.getWorkspace()._addFolder(folderName5);
				_g.getWorkspace().beginUpdate();
				var added5 = 0;
				var _g16 = 0;
				while(_g16 < constructs1.length) {
					var construct1 = constructs1[_g16];
					++_g16;
					if(construct1.proteinSeq != null) {
						_g.getWorkspace()._addObject(construct1,autoOpen6,false,folder5);
						autoOpen6 = false;
						added5++;
					}
				}
				if(added5 > 0) _g.getWorkspace().reloadWorkspace(); else _g.showMessage("No data","No constructs with a DNA sequence");
			} else if(exception5 != null) _g.lookupException(exception5.message); else if(constructs1 == null || constructs1.length == 0) _g.showMessage("No entries","No entries in database");
		}); else if(seqType == "Constructs Protein - No Tag") this.getProvider().getByNamedQuery("TARGET_TO_CONSTRUCTS",[targetId],saturn.core.domain.SgcConstruct,false,function(constructs2,exception6) {
			if(exception6 == null && constructs2 != null && constructs2.length != 0) {
				var autoOpen7 = true;
				var folderName6 = targetId + " (Constructs Protein - No tag)";
				var folder6 = _g.getWorkspace()._addFolder(folderName6);
				_g.getWorkspace().beginUpdate();
				var added6 = 0;
				var _g17 = 0;
				while(_g17 < constructs2.length) {
					var construct2 = constructs2[_g17];
					++_g17;
					if(construct2.proteinSeq != null) {
						var protein1 = construct2.proteinSequenceNoTagObj;
						protein1.setName(construct2.constructId + " - Protein No Tag");
						_g.getWorkspace()._addObject(protein1,autoOpen7,false,folder6);
						autoOpen7 = false;
						added6++;
					}
				}
				if(added6 > 0) _g.getWorkspace().reloadWorkspace(); else _g.showMessage("No data","No constructs with a DNA sequence");
			} else if(exception6 != null) _g.lookupException(exception6.message); else if(constructs2 == null || constructs2.length == 0) _g.showMessage("No entries","No entries in database");
		}); else if(seqType == "Constructs DNA Align") this.getProvider().getByNamedQuery("TARGET_TO_CONSTRUCTS",[targetId],saturn.core.domain.SgcConstruct,false,function(constructs3,exception7) {
			if(exception7 == null && constructs3 != null) {
				var objs1 = [];
				var folderName7 = targetId + " (Constructs DNA)";
				var folder7 = _g.getWorkspace()._addFolder(folderName7);
				_g.getWorkspace().beginUpdate();
				var _g18 = 0;
				while(_g18 < constructs3.length) {
					var construct3 = constructs3[_g18];
					++_g18;
					if(construct3.proteinSeq != null) {
						_g.getWorkspace()._addObject(construct3,false,false,folder7);
						objs1.push(construct3.getUUID());
					}
				}
				var alignObj = new saturn.core.domain.Alignment();
				alignObj.setAlignmentObjectIds(objs1);
				var wo = new saturn.client.workspace.AlignmentWorkspaceObject(alignObj,targetId + " Construct DNA Alignment");
				var _g19 = 0;
				while(_g19 < objs1.length) {
					var obj3 = objs1[_g19];
					++_g19;
					wo.addReference("Sequences",obj3);
				}
				_g.getWorkspace()._addObject(wo,true,false);
				_g.getWorkspace().reloadWorkspace();
			} else if(exception7 != null) _g.lookupException(exception7.message);
		}); else if(seqType == "Constructs Protein Align") this.getProvider().getByNamedQuery("TARGET_TO_CONSTRUCTS",[targetId],saturn.core.domain.SgcConstruct,false,function(constructs4,exception8) {
			if(exception8 == null && constructs4 != null) {
				var objs2 = [];
				var folderName8 = targetId + " (Constructs Protein)";
				var folder8 = _g.getWorkspace()._addFolder(folderName8);
				_g.getWorkspace().beginUpdate();
				var _g110 = 0;
				while(_g110 < constructs4.length) {
					var construct4 = constructs4[_g110];
					++_g110;
					if(construct4.proteinSeq != null) {
						var protObj = construct4.proteinSequenceObj;
						protObj.setName(construct4.constructId + " (Protein)");
						_g.getWorkspace()._addObject(protObj,false,false,folder8);
						objs2.push(protObj.getUUID());
					}
				}
				var alignObj1 = new saturn.core.domain.Alignment();
				var wo1 = new saturn.client.workspace.AlignmentWorkspaceObject(alignObj1,targetId + " Construct Protein Alignment");
				var _g111 = 0;
				while(_g111 < objs2.length) {
					var obj4 = objs2[_g111];
					++_g111;
					wo1.addReference("Sequences",obj4);
				}
				_g.getWorkspace()._addObject(wo1,true,false);
				_g.getWorkspace().reloadWorkspace();
			} else if(exception8 != null) _g.lookupException(exception8.message);
		}); else if(seqType == "Constructs Protein - No Tag Align") this.getProvider().getByNamedQuery("TARGET_TO_CONSTRUCTS",[targetId],saturn.core.domain.SgcConstruct,false,function(constructs5,exception9) {
			if(exception9 == null && constructs5 != null) {
				var objs3 = [];
				var folderName9 = targetId + " (Constructs Protein - No Tag)";
				var folder9 = _g.getWorkspace()._addFolder(folderName9);
				_g.getWorkspace().beginUpdate();
				var _g112 = 0;
				while(_g112 < constructs5.length) {
					var construct5 = constructs5[_g112];
					++_g112;
					if(construct5.proteinSeq != null) {
						var protObj1 = construct5.proteinSequenceNoTagObj;
						protObj1.setName(construct5.constructId + " (Protein - No Tag)");
						_g.getWorkspace()._addObject(protObj1,false,false,folder9);
						objs3.push(protObj1.getUUID());
					}
				}
				var alignObj2 = new saturn.core.domain.Alignment();
				alignObj2.setAlignmentObjectIds(objs3);
				var wo2 = new saturn.client.workspace.AlignmentWorkspaceObject(alignObj2,targetId + " Construct Protein - No Tag Alignment");
				var _g113 = 0;
				while(_g113 < objs3.length) {
					var obj5 = objs3[_g113];
					++_g113;
					wo2.addReference("Sequences",obj5);
				}
				_g.getWorkspace()._addObject(wo2,true,false);
				_g.getWorkspace().reloadWorkspace();
			} else if(exception9 != null) _g.lookupException(exception9.message);
		}); else if(seqType == "Constructs Protein - No Tag Summary") {
			var targetSummary = new saturn.client.programs.blocks.TargetSummary(targetId);
			targetSummary.generateSummary();
		} else if(seqType == "WONKA") {
			var session = new saturn.core.WONKASession();
			session.src = "/WONKA/" + targetId + "/Summarise/";
			var wo3 = new saturn.client.workspace.WONKAWO(session,targetId + " (WONKA)");
			this.getWorkspace()._addObject(wo3,true,false);
			this.getWorkspace().reloadWorkspace();
		} else if(seqType == "Assay Summary") saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("target_assay_search",[targetId],null,false,function(json,error) {
			var dwin = window;
			dwin.results = json;
			dwin.error = error;
			if(error == null) {
				var table = new saturn.core.Table();
				table.setFixedRowHeight(50);
				table.setData(json,{ 'SDF' : { 'renderer' : function(value) {
					return "<div>" + saturn.core.domain.Compound.getMolImage(value,"SDF") + "</div>";
				}}});
				table.name = targetId + " (Assay Results)";
				saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(table,true);
			}
		});
	}
	,showELN: function() {
		var wo = this.getActiveProgram().getActiveObject(saturn.client.workspace.WorkspaceObject);
		if(wo != null) saturn.client.ICMClient.getClient().callFunction("sys.showELN",[wo.getDocId()],function(data) {
		},function(exception) {
		});
	}
	,retrieve_pdb: function(query) {
		var pdb_id = HxOverrides.substr(query,4,4);
		var obj = new saturn.core.domain.StructureModel();
		obj.modelId = pdb_id;
		var wo = new saturn.client.workspace.StructureModelWO(obj,pdb_id);
		this.getWorkspace()._addObject(wo,true,true);
	}
	,getAlignment: function(fasta,cb) {
		saturn.client.BioinformaticsServicesClient.getClient().sendClustalReportRequest(fasta,function(response,err) {
			if(err == null) {
				var clustalReport = response.json.clustalReport;
				var location = window.location;
				var url = location.protocol + "//" + location.hostname + ":" + location.port + "/" + clustalReport;
				saturn.client.core.CommonCore.getContent(url,function(content) {
					var msa = saturn.core.ClustalOmegaParser.read(content);
					cb(null,msa);
				},function(err1) {
					cb(err1,null);
				});
			} else cb(err,null);
		});
	}
	,clearCompoundImageCache: function() {
		saturn.core.domain.Compound.clearMolCache();
	}
	,__class__: saturn.app.SaturnClient
});
saturn.client.OutlineListener = $hxClasses["saturn.client.OutlineListener"] = function() { };
saturn.client.OutlineListener.__name__ = ["saturn","client","OutlineListener"];
saturn.client.OutlineListener.prototype = {
	onClick: null
	,__class__: saturn.client.OutlineListener
};
saturn.client.BuildingBlock = $hxClasses["saturn.client.BuildingBlock"] = function() { };
saturn.client.BuildingBlock.__name__ = ["saturn","client","BuildingBlock"];
saturn.client.BuildingBlock.prototype = {
	onFocus: null
	,onBlur: null
	,getComponent: null
	,getRawComponent: null
	,__class__: saturn.client.BuildingBlock
};
saturn.client.Program = $hxClasses["saturn.client.Program"] = function() { };
saturn.client.Program.__name__ = ["saturn","client","Program"];
saturn.client.Program.__interfaces__ = [saturn.client.BuildingBlock];
saturn.client.Program.prototype = {
	addWorkspaceObject: null
	,closeWorkspaceObject: null
	,getSaveAsModelsForProgram: null
	,saveObjectAsGUI: null
	,close: null
	,getWorkspaceContextMenuItems: null
	,setId: null
	,getId: null
	,setActiveObject: null
	,_setActiveObject: null
	,getActiveObject: null
	,getActiveObjectId: null
	,mouseup: null
	,mousedown: null
	,openFile: null
	,setModelOutlineValue: null
	,saveWait: null
	,serialise: null
	,deserialise: null
	,emptyInit: null
	,postRestore: null
	,installWindowListeners: null
	,uninstallWindowListeners: null
	,getWorkspace: null
	,getApplication: null
	,setTitle: null
	,onOutlineDrop: null
	,getCentralPanelLayout: null
	,convertDragToWorkspaceObject: null
	,addPlugin: null
	,focusProgram: null
	,blurProgram: null
	,onFocusNotifyPlugins: null
	,onBlurNotifyPlugins: null
	,processException: null
	,arePluginsInstalled: null
	,setPluginsInstalled: null
	,search: null
	,getActiveObjectName: null
	,isActivationDelayed: null
	,isClosed: null
	,getPlugins: null
	,getEntity: null
	,__class__: saturn.client.Program
};
saturn.client.BaseProgram = $hxClasses["saturn.client.BaseProgram"] = function() {
	this.saveable = false;
	this.closed = false;
	this.delayedActivation = false;
	this.emptyInit();
};
saturn.client.BaseProgram.__name__ = ["saturn","client","BaseProgram"];
saturn.client.BaseProgram.__interfaces__ = [saturn.client.OutlineListener,saturn.client.Program];
saturn.client.BaseProgram.prototype = {
	theId: null
	,theActiveObjectId: null
	,objectIds: null
	,plugins: null
	,pluginsInstalled: null
	,delayedActivation: null
	,closed: null
	,saveable: null
	,lastSearch: null
	,getPlugins: function() {
		return this.plugins;
	}
	,saveWait: function(cb) {
		cb();
	}
	,getReferences: function(name) {
		var obj = this.getObject();
		if(obj != null) return obj.getReferences(name); else return null;
	}
	,getCentralPanelLayout: function() {
		return "hbox";
	}
	,onOutlineDrop: function(node,data,overModel,dropPosition,dropHandlers,eOpts) {
		return true;
	}
	,emptyInit: function() {
		this.objectIds = [];
		this.plugins = [];
		this.pluginsInstalled = false;
	}
	,arePluginsInstalled: function() {
		return this.pluginsInstalled;
	}
	,setPluginsInstalled: function() {
		this.pluginsInstalled = true;
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
	}
	,setActiveObject: function(objectId) {
		this._setActiveObject(objectId);
		this.delayedActivation = false;
		this.updateActions();
	}
	,isActivationDelayed: function() {
		return this.delayedActivation;
	}
	,_setActiveObject: function(objectId) {
		this.theActiveObjectId = objectId;
		this.delayedActivation = true;
	}
	,getState: function() {
		return this.getActiveObject(saturn.client.workspace.WorkspaceObject);
	}
	,getObject: function() {
		var obj = this.getWorkspace().getObject(this.theActiveObjectId);
		if(js.Boot.__instanceof(obj,saturn.client.workspace.WorkspaceObject)) return obj.getObject(); else return obj;
	}
	,getWorkspaceObject: function() {
		return this.getWorkspace().getObject(this.theActiveObjectId);
	}
	,getObjectName: function() {
		return this.getWorkspaceObject().getName();
	}
	,getActiveObject: function(type) {
		var obj = this.getWorkspace().getObjectSafely(this.theActiveObjectId,type);
		return obj;
	}
	,getActiveObjectObject: function() {
		var wo = this.getActiveObject(saturn.client.workspace.WorkspaceObject);
		if(wo == null) return null; else return wo.getObject();
	}
	,getActiveObjectName: function() {
		var obj = this.getWorkspace().getObject(this.getActiveObjectId());
		return obj.getName();
	}
	,getActiveObjectId: function() {
		return this.theActiveObjectId;
	}
	,addWorkspaceObject: function(objectId) {
		this.objectIds.push(objectId);
		if(this.theActiveObjectId == null) this.setActiveObject(objectId);
	}
	,closeWorkspaceObject: function(objectId) {
		HxOverrides.remove(this.objectIds,objectId);
		if(objectId == this.theActiveObjectId) this.theActiveObjectId = null;
	}
	,convertDragToWorkspaceObject: function(data) {
		return null;
	}
	,close: function() {
		saturn.client.WorkspaceApplication.getApplication().removeOutlineListener(this);
		this.closed = true;
	}
	,isClosed: function() {
		return this.closed;
	}
	,getComponent: function() {
		return null;
	}
	,getRawComponent: function() {
		return this.getComponent();
	}
	,setId: function(id) {
		this.theId = id;
	}
	,getId: function() {
		return this.theId;
	}
	,onFocus: function() {
		this.getApplication().addSaveAsOptions();
	}
	,onBlur: function() {
		if(this.isSaveable()) this.syncModelFromOutline();
	}
	,setModelOutlineValue: function(field,value) {
		var dataStore = this.getApplication().getOutlineDataStore("MODELS");
		if(dataStore == null) return;
		var rootNode = dataStore.getRootNode();
		var entity = this.getEntity();
		var model = this.getProvider().getModel(entity == null?null:js.Boot.getClass(entity));
		var busKey = model.getFirstKey();
		var folderName = Reflect.field(entity,busKey);
		var fields = model.getUserFieldDefinitions();
		var folderId = "_folder_" + folderName;
		var modelNode = rootNode.findChild("id",folderId,false);
		if(modelNode == null) return;
		if(field == busKey) modelNode.set("id","_folder_" + Std.string(value));
		var children = modelNode.childNodes;
		var _g = 0;
		while(_g < children.length) {
			var childNode = children[_g];
			++_g;
			var label = childNode.data.folder;
			var modelField = model.convertUserFieldName(label);
			if(modelField == field) {
				childNode.set("text",value);
				childNode.commit();
				break;
			}
		}
	}
	,syncModelFromOutline: function() {
		var dataStore = this.getApplication().getOutlineDataStore("MODELS");
		if(dataStore == null) return;
		var rootNode = dataStore.getRootNode();
		var entity = this.getEntity();
		var model = this.getProvider().getModel(entity == null?null:js.Boot.getClass(entity));
		var busKey = model.getFirstKey();
		var folderName = Reflect.field(entity,busKey);
		var fields = model.getUserFieldDefinitions();
		var folderId = "_folder_" + folderName;
		var modelNode = rootNode.findChild("id",folderId,false);
		if(modelNode == null) return;
		var children = modelNode.childNodes;
		var _g = 0;
		while(_g < children.length) {
			var childNode = children[_g];
			++_g;
			var label = childNode.data.folder;
			var modelField = model.convertUserFieldName(label);
			if(modelField != null) {
				var psueodSyntheticField = model.getPseudoSyntheticObjectName(modelField);
				if(psueodSyntheticField != null) Reflect.field(entity,psueodSyntheticField).setValue(childNode.data.text); else this.updateModelField(entity,modelField,childNode.data.text);
			}
		}
	}
	,updateModelField: function(obj,field,value) {
		saturn.db.Model.setField(obj,field,value,true);
	}
	,focusProgram: function() {
		saturn.client.WorkspaceApplication.getApplication().addOutlineListener(this);
		this.onFocus();
		this.onFocusNotifyPlugins();
		this.updateActions();
	}
	,updateActions: function() {
		this.setSaveVisible(this.isSaveable());
	}
	,blurProgram: function() {
		saturn.client.WorkspaceApplication.getApplication().removeOutlineListener(this);
		this.onBlur();
		this.onBlurNotifyPlugins();
	}
	,onFocusNotifyPlugins: function() {
		var _g = 0;
		var _g1 = this.plugins;
		while(_g < _g1.length) {
			var plugin = _g1[_g];
			++_g;
			plugin.onFocus();
		}
	}
	,onBlurNotifyPlugins: function() {
		var _g = 0;
		var _g1 = this.plugins;
		while(_g < _g1.length) {
			var plugin = _g1[_g];
			++_g;
			plugin.onBlur();
		}
	}
	,mouseup: function(event) {
	}
	,mousedown: function(event) {
	}
	,serialise: function() {
		var clazz = js.Boot.getClass(this);
		return { 'ID' : this.getId(), 'CLASS' : Type.getClassName(clazz), 'ACTIVE_ID' : this.theActiveObjectId};
	}
	,deserialise: function(object) {
		this.setId(object.ID);
		this.theActiveObjectId = object.ACTIVE_ID;
	}
	,postRestore: function() {
		var objectId = this.theActiveObjectId;
		this.setActiveObject(objectId);
	}
	,installWindowListeners: function(window) {
	}
	,uninstallWindowListeners: function(window) {
	}
	,getWorkspace: function() {
		return this.getApplication().getWorkspace();
	}
	,getApplication: function() {
		return saturn.client.WorkspaceApplication.getApplication();
	}
	,setTitle: function(title) {
	}
	,onClick: function(view,rec,item,index) {
	}
	,addPlugin: function(plugin) {
		this.plugins.push(plugin);
		plugin.setProgram(this);
		plugin.emptyInit();
	}
	,removePlugin: function(plugin) {
		HxOverrides.remove(this.plugins,plugin);
	}
	,processException: function(ex) {
		this.getApplication().processException(ex);
	}
	,getProvider: function() {
		return this.getApplication().getProvider();
	}
	,search: function(regex) {
		this.lastSearch = regex;
	}
	,getLastSearch: function() {
		return this.lastSearch;
	}
	,isLoggedIn: function() {
		return saturn.client.core.ClientCore.getClientCore().isLoggedIn();
	}
	,isSaveable: function() {
		if(!this.isLoggedIn()) return false;
		var object = this.getEntity();
		var model = this.getProvider().getModel(object == null?null:js.Boot.getClass(object));
		if(model != null) return model.isProgramSaveAs(Type.getClassName(js.Boot.getClass(this))); else return false;
	}
	,saveObject: function(cb) {
		var _g = this;
		var object = this.getEntity();
		this.syncModelFromOutline();
		this.saveAsync(function(err) {
			if(err != null) _g.getApplication().showMessage("Error",err); else _g.getProvider().save(object,function(err1) {
				if(err1 == null) _g.getProvider().attach([object],false,function(err2) {
					if(err2 == null) {
						var dataStore = _g.getApplication().getOutlineDataStore("MODELS");
						if(dataStore != null) dataStore.commitChanges();
						cb(null);
					} else cb(err2);
				});
				cb(err1);
			},true);
		});
	}
	,saveAsync: function(cb) {
		cb(null);
	}
	,saveObjectAsGUI: function(model) {
		this.changeObjectType(model);
		this.saveObjectGUI();
	}
	,changeObjectType: function(model) {
		var obj = this.getWorkspace().changeObjectType(this.getActiveObjectId(),model);
		this.updateActions();
		return obj;
	}
	,getWorkspaceContextMenuItems: function() {
		return null;
	}
	,deleteObject: function(cb) {
		var object = this.getObject();
		this.getProvider()["delete"](object,cb);
	}
	,saveObjectGUI: function() {
		var _g = this;
		this.saveObject(function(err) {
			if(err != null) _g.getApplication().showMessage("Save failure","Unable to save to database"); else _g.getApplication().showMessage("Saved","Save successfull");
		});
	}
	,deleteObjectGUI: function() {
		var _g = this;
		this.deleteObject(function(err) {
			if(err != null) _g.getApplication().showMessage("Delete failure","Unable to delete from database"); else _g.getApplication().showMessage("Deleted","Delete successfull");
		});
	}
	,setSaveVisible: function(visble) {
	}
	,getSaveAsModelsForProgram: function() {
		var models = [];
		var clazzes = this.getApplication().getProgramRegistry().getClassesForProgram(js.Boot.getClass(this));
		var _g = 0;
		while(_g < clazzes.length) {
			var clazz = clazzes[_g];
			++_g;
			var model = this.getProvider().getModel(clazz);
			if(model != null) {
				if(model.isProgramSaveAs(Type.getClassName(js.Boot.getClass(this)))) models.push(model);
			}
		}
		return models;
	}
	,getEntity: function() {
		var obj = this.getWorkspaceObject();
		if(obj != null) {
			if(js.Boot.__instanceof(obj,saturn.client.workspace.WorkspaceObject)) obj = (js.Boot.__cast(obj , saturn.client.workspace.WorkspaceObject)).getObject();
			if(Reflect.isFunction(obj.isLinked) && obj.isLinked()) {
				if(Reflect.isFunction(obj.getParent) && obj.getParent() != null) obj = obj.getParent();
			}
			return obj;
		} else return null;
	}
	,__class__: saturn.client.BaseProgram
};
saturn.client.BioinformaticsServicesClient = $hxClasses["saturn.client.BioinformaticsServicesClient"] = function(socket,helper) {
	var _g = this;
	this.helper = helper;
	this.cbsAwaitingIds = [];
	this.cbsAwaitingResponse = new haxe.ds.StringMap();
	saturn.client.core.ClientCore.getClientCore().getNodeSocket().on("__response__",function(data) {
		var cb = _g.getCb(data);
		if(cb != null) {
			if(data == null) cb(null,"Invalid, empty response from server"); else cb(data.json,data.error);
		}
	});
	this.initialise();
};
saturn.client.BioinformaticsServicesClient.__name__ = ["saturn","client","BioinformaticsServicesClient"];
saturn.client.BioinformaticsServicesClient.theClient = null;
saturn.client.BioinformaticsServicesClient.getClient = function(socket,helper) {
	if(saturn.client.BioinformaticsServicesClient.theClient == null) saturn.client.BioinformaticsServicesClient.theClient = new saturn.client.BioinformaticsServicesClient(socket,helper);
	return saturn.client.BioinformaticsServicesClient.theClient;
};
saturn.client.BioinformaticsServicesClient.prototype = {
	theSocket: null
	,cbsAwaitingIds: null
	,cbsAwaitingResponse: null
	,blastList: null
	,helper: null
	,getCb: function(data) {
		var jobId = data.bioinfJobId;
		if(this.cbsAwaitingResponse.exists(jobId)) {
			var cb = this.cbsAwaitingResponse.get(jobId);
			this.cbsAwaitingResponse.remove(jobId);
			return cb;
		} else return null;
	}
	,sendBlastReportRequest: function(sequence,name,database,cb) {
		this.helper.sendRequest("_blast_",{ blastDatabase : database, fasta : ">" + name + "\n" + sequence},cb);
	}
	,sendPsiPredReportRequest: function(sequence,name,cb) {
		this.helper.sendRequest("_psipred_",{ fasta : ">" + name + "\n" + sequence},cb);
	}
	,sendDisoPredReportRequest: function(sequence,name,cb) {
		this.helper.sendRequest("_disopred_",{ fasta : ">" + name + "\n" + sequence},cb);
	}
	,sendTMHMMReportRequest: function(sequence,name,cb) {
		this.helper.sendRequest("_thmm_",{ fasta : ">" + name + "\n" + sequence},cb);
	}
	,sendClustalReportRequest: function(fasta,cb) {
		this.helper.sendRequest("_clustal_",{ fasta : fasta},cb);
	}
	,sendPhyloReportRequest: function(fasta,cb) {
		this.helper.sendRequest("_phylo_",{ fasta : fasta},cb);
	}
	,sendBlastDatabaseListRequest: function(cb) {
		this.helper.sendRequest("_blast_.database_list",{ },cb);
	}
	,sendABIReportRequest: function(abiContents,cb) {
		this.helper.sendRequest("_abi_",{ abiFile : abiContents},cb);
	}
	,sendBLASTDBUpdateRequest: function(databaseName,cb) {
		this.helper.sendRequest("_blast_updater_",{ database : databaseName},cb);
	}
	,upload: function(icbContents,extension,cb) {
		this.helper.sendRequest("_uploader_.upload",{ fileContents : icbContents, extension : extension},cb);
	}
	,sendPDBRequest: function(pdbId,cb) {
		this.helper.sendRequest("_pdb_",{ pdbId : pdbId},cb);
	}
	,sendTestEmail: function() {
		this.helper.sendRequest("_email_.test",{ },function(data,err) {
			if(err != null) saturn.client.WorkspaceApplication.getApplication().showMessage("Error",err);
		});
	}
	,initialise: function() {
		var _g = this;
		this.sendBlastDatabaseListRequest(function(data,err) {
			if(err != null) saturn.client.WorkspaceApplication.getApplication().showMessage("Request failure","Failed to get list of BLAST DBs"); else _g.blastList = data.json.dbList;
		});
	}
	,getBlastList: function() {
		return this.blastList;
	}
	,getAlignment: function(fasta,cb) {
		saturn.client.BioinformaticsServicesClient.getClient().sendClustalReportRequest(fasta,function(response,err) {
			if(err == null) {
				var clustalReport = response.json.clustalReport;
				var location = window.location;
				var url = location.protocol + "//" + location.hostname + ":" + location.port + "/" + clustalReport;
				saturn.client.core.CommonCore.getContent(url,function(content) {
					var msa = saturn.core.ClustalOmegaParser.read(content);
					cb(null,msa);
				},function(err1) {
					cb(err1,null);
				});
			} else cb(err,null);
		});
	}
	,__class__: saturn.client.BioinformaticsServicesClient
};
saturn.client.ClipBoard = $hxClasses["saturn.client.ClipBoard"] = function() {
};
saturn.client.ClipBoard.__name__ = ["saturn","client","ClipBoard"];
saturn.client.ClipBoard.prototype = {
	theContents: null
	,setContents: function(contents) {
		this.theContents = contents;
	}
	,getContents: function() {
		return this.theContents;
	}
	,__class__: saturn.client.ClipBoard
};
saturn.client.ConversationHelper = $hxClasses["saturn.client.ConversationHelper"] = function() { };
saturn.client.ConversationHelper.__name__ = ["saturn","client","ConversationHelper"];
saturn.client.ConversationHelper.prototype = {
	sendRequest: null
	,__class__: saturn.client.ConversationHelper
};
saturn.client.ICMClient = $hxClasses["saturn.client.ICMClient"] = function(asCommandProxy,forwardICMCommands) {
	var _g = this;
	this.callBackMap = new haxe.ds.StringMap();
	this.commandsWaiting = [];
	this.forwardICMCommands = forwardICMCommands;
	if(forwardICMCommands == false && asCommandProxy == false) return;
	this.nodeSocket = new bindings.NodeSocket(io.connect("http://localhost"));
	var self = this;
	if(asCommandProxy) {
		this.nodeSocket.emit("registerAsICMNode",{ });
		this.nodeSocket.on("icmForwardCommmand",function(data) {
			var command = data.COMMAND;
			try {
				ICMScript.execute(command);
				var c_out = ICMScript.getVarJSON("cout");
				if(c_out == null) _g.nodeSocket.emit("icmForwardResponse",{ 'ID' : data.ID}); else {
					var res = eval("(" + c_out + ")");
					_g.nodeSocket.emit("icmForwardResponse",res.cout);
				}
			} catch( e ) {
				if (e instanceof js._Boot.HaxeError) e = e.val;
				_g.nodeSocket.emit("icmForwardResponse",{ 'ID' : data.ID});
			}
		});
	} else {
		this.nodeSocket.on("icmForward",function(data1) {
			var g = window;
			g.myData = data1;
			var passVal = null;
			if(Object.prototype.hasOwnProperty.call(data1,"RAW")) {
				var r = saturn.client.ICMClient.reg_jsonStart.replace(data1.RAW,"");
				r = saturn.client.ICMClient.reg_jsonStop.replace(r,"");
				passVal = eval("(" + r + ")");
			}
			var callBack = self.callBackMap.get(data1.ID);
			if(Object.prototype.hasOwnProperty.call(data1,"error")) callBack(data1); else callBack(passVal);
			self.callBackMap.remove(data1.ID);
		});
		this.nodeSocket.on("recieveCommandID",function(data2) {
			var id = data2.ID;
			var job = _g.commandsWaiting.shift();
			job.params.COMMAND = StringTools.replace(job.params.COMMAND,"<COMMAND_ID>",id);
			job.params.ID = id;
			_g.nodeSocket.emit(job.socketCommand,job.params);
			var v = job.callBack;
			_g.callBackMap.set(id,v);
			v;
		});
	}
};
saturn.client.ICMClient.__name__ = ["saturn","client","ICMClient"];
saturn.client.ICMClient.theClient = null;
saturn.client.ICMClient.inScarab = function() {
	return Reflect.hasField(window,"ICMScript");
};
saturn.client.ICMClient.setup = function(asCommandProxy,forwardICMCommands) {
	saturn.client.ICMClient.theClient = new saturn.client.ICMClient(asCommandProxy,forwardICMCommands);
};
saturn.client.ICMClient.getClient = function() {
	return saturn.client.ICMClient.theClient;
};
saturn.client.ICMClient.instanceOf = function(obj,className) {
	if(Object.prototype.hasOwnProperty.call(obj,"__INTERNAL__CLASS_LIST")) {
		var clazz = Reflect.field(obj,"__INTERNAL__CLASS_LIST");
		if(Object.prototype.hasOwnProperty.call(clazz,className)) return true;
	}
	return false;
};
saturn.client.ICMClient.getError = function(data) {
	if(data != null && Object.prototype.hasOwnProperty.call(data,"__EXCEPTION")) return Reflect.field(data,"__EXCEPTION"); else if(data == null) return { message : "An unexpected Scarab exception has occurred"}; else return null;
};
saturn.client.ICMClient.prototype = {
	nodeSocket: null
	,callBackMap: null
	,forwardICMCommands: null
	,commandsWaiting: null
	,generateSetStringCommand: function(varName,value) {
		var varLen = value.length;
		var blockSize = 4000;
		if(varLen < blockSize) return varName + " = '" + value + "'\n"; else {
			var done = blockSize;
			var setCode = varName + " = '" + HxOverrides.substr(value,0,blockSize) + "'\n";
			while(done < varLen) {
				setCode = setCode + varName + " = " + varName + " + '" + HxOverrides.substr(value,done,blockSize) + "'\n";
				done = done + blockSize;
			}
			return setCode;
		}
	}
	,callFunction: function(functionName,arguments,onSuccess,onFailure) {
		var icmCommand = functionName + "(";
		var _g1 = 0;
		var _g = arguments.length;
		while(_g1 < _g) {
			var i = _g1++;
			var argument = arguments[i];
			if((argument instanceof Array) && argument.__enum__ == null) {
				var arrayType = "StringArray";
				var valueStr = "{";
				if(argument.length > 0) {
					var value = argument[0];
					if(js.Boot.__instanceof(value,haxe.ds.StringMap)) {
						arrayType = "ObjectList";
						valueStr = "Collection(\"ITEMS\", Collection(";
					}
				}
				var _g3 = 0;
				var _g2 = argument.length;
				while(_g3 < _g2) {
					var j = _g3++;
					var value1 = argument[j];
					if(arrayType == "ObjectList") {
						var map = value1;
						valueStr += "\"" + (j + 1) + "\",Collection(";
						var keys = [];
						var $it0 = map.keys();
						while( $it0.hasNext() ) {
							var key = $it0.next();
							keys.push(key);
						}
						var _g5 = 0;
						var _g4 = keys.length;
						while(_g5 < _g4) {
							var j1 = _g5++;
							var key1 = keys[j1];
							var value2;
							value2 = __map_reserved[key1] != null?value1.getReserved(key1):value1.h[key1];
							if(value2 == null) value2 = "__MOLBIO_NULL_TYPE__";
							valueStr += "'" + key1 + "','" + Std.string(value2) + "'";
							if(j1 != keys.length - 1) valueStr += ",";
						}
						valueStr += ")";
					} else valueStr += "'" + value1.toString() + "'";
					if(j != argument.length - 1) valueStr += ",";
				}
				if(arrayType == "StringArray") icmCommand += valueStr + "}"; else icmCommand += valueStr + "),\"POS\"," + Std.string(argument.length) + ")";
			} else if(js.Boot.__instanceof(argument,haxe.ds.StringMap)) {
				var map1 = argument;
				var valueStr1 = "Collection(";
				var keys1 = [];
				var $it1 = map1.keys();
				while( $it1.hasNext() ) {
					var key2 = $it1.next();
					keys1.push(key2);
				}
				var _g31 = 0;
				var _g21 = keys1.length;
				while(_g31 < _g21) {
					var j2 = _g31++;
					var key3 = keys1[j2];
					valueStr1 += "'" + key3 + "','" + Std.string(argument.get(key3)) + "'";
					if(j2 != keys1.length - 1) valueStr1 += ",";
				}
				valueStr1 += ")";
				icmCommand += valueStr1;
			} else icmCommand += "'" + Std.string(arguments[i]) + "'";
			if(i < arguments.length - 1) icmCommand += ",";
		}
		icmCommand += "));\n";
		var callBack = function(data) {
			if(data != null && Object.prototype.hasOwnProperty.call(data,"__EXCEPTION")) onFailure(Reflect.field(data,"__EXCEPTION")); else if(data != null && Object.prototype.hasOwnProperty.call(data,"error")) onFailure({ message : data.error}); else if(data == null) onFailure({ message : "An unexpected Scarab exception has occurred"}); else onSuccess(data);
		};
		if(this.forwardICMCommands == false) {
			ICMScript.execute("delete cout\ntry\ncout=sgc.molbio.wrap('PSEUDO'," + icmCommand);
			if(callBack != null) try {
				var c_out = ICMScript.getVarJSON("cout");
				if(c_out == null) callBack(null); else {
					var r = saturn.client.ICMClient.reg_jsonStart.replace(c_out,"");
					r = saturn.client.ICMClient.reg_jsonStop.replace(r,"");
					var data1 = eval("(" + r + ")");
					data1 = eval("(" + Std.string(data1.cout.RAW) + ")");
					callBack(data1);
				}
			} catch( e ) {
				if (e instanceof js._Boot.HaxeError) e = e.val;
				callBack(null);
			}
			return;
		}
		icmCommand = "delete cout\ntry\ncout=sgc.molbio.wrap('<COMMAND_ID>'," + icmCommand;
		this.commandsWaiting.push({ socketCommand : "icmForwardCommandRequest", params : { COMMAND : icmCommand, time : new Date().getTime()}, callBack : callBack});
		this.nodeSocket.emit("sendCommandID",{ });
	}
	,runCommand: function(icmCommand,callBack) {
		var ourCallBack = function(data) {
			if(data != null && Object.prototype.hasOwnProperty.call(data,"__EXCEPTION")) callBack(null,Reflect.field(data,"__EXCEPTION")); else if(data == null) callBack(null,"An unexpected Scarab exception has occurred"); else callBack(data,null);
		};
		if(this.forwardICMCommands == false) {
			icmCommand = "delete cout\ntry\nparams=Collection();\n" + icmCommand + "cout = sgc.forwardData(params)\n";
			try {
				ICMScript.execute(icmCommand);
				if(callBack != null) {
					var c_out = ICMScript.getVarJSON("cout");
					if(c_out != null) {
						var r = saturn.client.ICMClient.reg_jsonStart.replace(c_out,"");
						r = saturn.client.ICMClient.reg_jsonStop.replace(r,"");
						var data1 = eval("(" + r + ")");
						data1 = eval("(" + Std.string(data1.cout.RAW) + ")");
						ourCallBack(data1);
					} else ourCallBack(null);
				}
			} catch( e ) {
				if (e instanceof js._Boot.HaxeError) e = e.val;
				callBack(null);
			}
			return;
		}
		icmCommand = "delete cout\ntry\nsgc.NextCommandId = \"<COMMAND_ID\"" + "\n" + "params=Collection();\n" + icmCommand + "cout = sgc.forwardData(params)\n";
		this.commandsWaiting.push({ socketCommand : "icmForwardCommandRequest", params : { COMMAND : icmCommand, time : new Date().getTime()}, callBack : ourCallBack});
		this.nodeSocket.emit("sendCommandID",{ });
	}
	,getVarJSON: function(varName) {
		var retVal = js.Lib.eval("(" + Std.string(ICMScript.getVarString(varName)) + ")");
		return retVal;
	}
	,runTestCommand: function() {
		ICMScript.execute("params = Collection('ID','1');");
		ICMScript.execute("sys.curl.post('http://localhost:8080/ICMForwardRequest', params)");
	}
	,forwardCommands: function(forwardCommands) {
		this.forwardICMCommands = forwardCommands;
	}
	,openUrl: function(url,useInternalViewer) {
		if(useInternalViewer) this.runCommand("read html \"" + url + "\"\n",function() {
		}); else this.runCommand("sys.openWithDefaultViewer(\"" + url + "\")\n",function() {
		});
	}
	,saveToFile: function(fileName,content,cbSuccess,cbFailure) {
		var arguments = [fileName,content];
		this.callFunction("sgc.molbio.exportToFile",arguments,cbSuccess,cbFailure);
	}
	,saveToFileWithDialog: function(suggestion,content,cbSuccess,cbFailure) {
		var arguments = [content,suggestion];
		this.callFunction("sgc.molbio.exportToFileDialog",arguments,cbSuccess,cbFailure);
	}
	,__class__: saturn.client.ICMClient
};
saturn.client.ProgramPlugin = $hxClasses["saturn.client.ProgramPlugin"] = function() { };
saturn.client.ProgramPlugin.__name__ = ["saturn","client","ProgramPlugin"];
saturn.client.ProgramPlugin.prototype = {
	emptyInit: null
	,onFocus: null
	,onBlur: null
	,close: null
	,getProgram: null
	,setProgram: null
	,destroy: null
	,openFile: null
	,__class__: saturn.client.ProgramPlugin
};
saturn.client.BaseProgramPlugin = $hxClasses["saturn.client.BaseProgramPlugin"] = function() {
};
saturn.client.BaseProgramPlugin.__name__ = ["saturn","client","BaseProgramPlugin"];
saturn.client.BaseProgramPlugin.__interfaces__ = [saturn.client.ProgramPlugin];
saturn.client.BaseProgramPlugin.prototype = {
	theProgram: null
	,openFile: function(file,next) {
	}
	,emptyInit: function() {
	}
	,onFocus: function() {
	}
	,onBlur: function() {
	}
	,close: function() {
	}
	,getProgram: function() {
		return this.theProgram;
	}
	,setProgram: function(program) {
		this.theProgram = program;
	}
	,destroy: function() {
		this.theProgram = null;
	}
	,__class__: saturn.client.BaseProgramPlugin
};
saturn.client.ProgramRegistry = $hxClasses["saturn.client.ProgramRegistry"] = function() {
	this.programList = [];
	this.clazzNameToDefaultProgram = new haxe.ds.ObjectMap();
	this.clazzNameToPrograms = new haxe.ds.ObjectMap();
	this.fileExtensionToDefaultProgram = new haxe.ds.StringMap();
	this.programToPlugins = new haxe.ds.ObjectMap();
};
saturn.client.ProgramRegistry.__name__ = ["saturn","client","ProgramRegistry"];
saturn.client.ProgramRegistry.prototype = {
	programList: null
	,clazzNameToPrograms: null
	,clazzNameToDefaultProgram: null
	,fileExtensionToDefaultProgram: null
	,programToPlugins: null
	,registerPlugin: function(progClazz,pluginClazz) {
		if(!(this.programToPlugins.h.__keys__[progClazz.__id__] != null)) this.programToPlugins.set(progClazz,new List());
		this.programToPlugins.h[progClazz.__id__].push(pluginClazz);
		if(Object.prototype.hasOwnProperty.call(pluginClazz,"loadResources")) Reflect.callMethod(pluginClazz,Reflect.field(pluginClazz,"loadResources"),[]);
	}
	,installPlugins: function(program) {
		if(!program.arePluginsInstalled()) {
			var progClazz;
			if(program == null) progClazz = null; else progClazz = js.Boot.getClass(program);
			if(this.programToPlugins.h.__keys__[progClazz.__id__] != null) {
				var _g_head = this.programToPlugins.h[progClazz.__id__].h;
				var _g_val = null;
				while(_g_head != null) {
					var pluginClazz;
					pluginClazz = (function($this) {
						var $r;
						_g_val = _g_head[0];
						_g_head = _g_head[1];
						$r = _g_val;
						return $r;
					}(this));
					var plugin = Type.createInstance(pluginClazz,[]);
					program.addPlugin(plugin);
				}
			}
			program.setPluginsInstalled();
		}
	}
	,getRegisteredWorkspaceObjectShortNames: function() {
		var shortNames = new haxe.ds.StringMap();
		var $it0 = this.clazzNameToPrograms.keys();
		while( $it0.hasNext() ) {
			var clazz = $it0.next();
			var clazzName = Type.getClassName(clazz);
			var parts = clazzName.split(".");
			var key = parts.pop();
			if(__map_reserved[key] != null) shortNames.setReserved(key,clazzName); else shortNames.h[key] = clazzName;
		}
		return shortNames;
	}
	,getQuickLaunchItems: function() {
		var items = [];
		var _g = 0;
		var _g1 = this.programList;
		while(_g < _g1.length) {
			var clazz = _g1[_g];
			++_g;
			var clazzName = Type.getClassName(clazz);
			if(Object.prototype.hasOwnProperty.call(clazz,"getQuickLaunchItems")) {
				var func = Reflect.field(clazz,"getQuickLaunchItems");
				var clazzItems = func.apply(clazz,[]);
				var _g2 = 0;
				while(_g2 < clazzItems.length) {
					var item = clazzItems[_g2];
					++_g2;
					items.push(item);
				}
			}
		}
		return items;
	}
	,getPrograms: function() {
		var newList = new List();
		var _g = 0;
		var _g1 = this.programList;
		while(_g < _g1.length) {
			var programDef = _g1[_g];
			++_g;
			newList.push(programDef);
		}
		return newList;
	}
	,registerProgram: function(type,defaults) {
		this.programList.push(type);
		var classFields = Type.getClassFields(type);
		if(Object.prototype.hasOwnProperty.call(type,"CLASS_SUPPORT")) {
			var supported = Reflect.field(type,"CLASS_SUPPORT");
			var _g = 0;
			while(_g < supported.length) {
				var clazz = supported[_g];
				++_g;
				var clazzName = Type.getClassName(type);
				if(!(this.clazzNameToPrograms.h.__keys__[clazz.__id__] != null)) this.clazzNameToPrograms.set(clazz,new List());
				this.clazzNameToPrograms.h[clazz.__id__].add(type);
				if(defaults) {
					this.clazzNameToDefaultProgram.set(clazz,type);
					var fileFormats = Reflect.field(clazz,"FILE_IMPORT_FORMATS");
					var _g1 = 0;
					while(_g1 < fileFormats.length) {
						var fileFormat = fileFormats[_g1];
						++_g1;
						this.fileExtensionToDefaultProgram.set(fileFormat,type);
					}
				}
			}
		}
	}
	,openWith: function(progClazz,defaults,typeClazz) {
		var clazzName = Type.getClassName(progClazz);
		if(!(this.clazzNameToPrograms.h.__keys__[typeClazz.__id__] != null)) this.clazzNameToPrograms.set(typeClazz,new List());
		this.clazzNameToPrograms.h[typeClazz.__id__].add(progClazz);
		if(defaults) {
			this.clazzNameToDefaultProgram.set(typeClazz,progClazz);
			if(Object.prototype.hasOwnProperty.call(typeClazz,"FILE_IMPORT_FORMATS")) {
				var fileFormats = Reflect.field(typeClazz,"FILE_IMPORT_FORMATS");
				var _g = 0;
				while(_g < fileFormats.length) {
					var fileFormat = fileFormats[_g];
					++_g;
					this.fileExtensionToDefaultProgram.set(fileFormat,progClazz);
				}
			}
		}
	}
	,getDefaultProgramByFileExtension: function(fileExtension) {
		if((function($this) {
			var $r;
			var key = fileExtension.toLowerCase();
			$r = $this.fileExtensionToDefaultProgram.exists(key);
			return $r;
		}(this))) {
			var key1 = fileExtension.toLowerCase();
			return this.fileExtensionToDefaultProgram.get(key1);
		} else return null;
	}
	,removeProgram: function(program) {
		if(!HxOverrides.remove(this.programList,program)) throw new js._Boot.HaxeError(new saturn.client.ProgramNotFoundException("Program " + Type.getClassName(program)));
		var $it0 = this.clazzNameToPrograms.keys();
		while( $it0.hasNext() ) {
			var clazz = $it0.next();
			this.clazzNameToPrograms.h[clazz.__id__].remove(program);
			if(this.clazzNameToDefaultProgram.h.__keys__[clazz.__id__] != null && this.clazzNameToDefaultProgram.h[clazz.__id__] == program) this.clazzNameToDefaultProgram.remove(clazz);
		}
	}
	,getDefaultProgram: function(clazz) {
		if(this.clazzNameToDefaultProgram.h.__keys__[clazz.__id__] != null) {
			var d = this.clazzNameToDefaultProgram.h[clazz.__id__];
			return d;
		}
		return null;
	}
	,getClassesForProgram: function(progClazz) {
		var clazzList = [];
		var $it0 = this.clazzNameToPrograms.keys();
		while( $it0.hasNext() ) {
			var clazz = $it0.next();
			var _g_head = this.clazzNameToPrograms.h[clazz.__id__].h;
			var _g_val = null;
			while(_g_head != null) {
				var programClazz;
				programClazz = (function($this) {
					var $r;
					_g_val = _g_head[0];
					_g_head = _g_head[1];
					$r = _g_val;
					return $r;
				}(this));
				if(progClazz == programClazz) clazzList.push(clazz);
			}
		}
		return clazzList;
	}
	,getProgramList: function() {
		return this.programList;
	}
	,__class__: saturn.client.ProgramRegistry
};
if(!saturn.util) saturn.util = {};
saturn.util.HaxeException = $hxClasses["saturn.util.HaxeException"] = function(message) {
	this.errorMessage = message;
};
saturn.util.HaxeException.__name__ = ["saturn","util","HaxeException"];
saturn.util.HaxeException.prototype = {
	errorMessage: null
	,getMessage: function() {
		return this.errorMessage;
	}
	,toString: function() {
		return this.errorMessage;
	}
	,__class__: saturn.util.HaxeException
};
saturn.client.ProgramNotFoundException = $hxClasses["saturn.client.ProgramNotFoundException"] = function(message) {
	saturn.util.HaxeException.call(this,message);
};
saturn.client.ProgramNotFoundException.__name__ = ["saturn","client","ProgramNotFoundException"];
saturn.client.ProgramNotFoundException.__super__ = saturn.util.HaxeException;
saturn.client.ProgramNotFoundException.prototype = $extend(saturn.util.HaxeException.prototype,{
	__class__: saturn.client.ProgramNotFoundException
});
saturn.client.SingleAppContainer = $hxClasses["saturn.client.SingleAppContainer"] = function(layout) {
	if(layout == null) layout = "border";
	this.hbox = Ext.create("Ext.panel.Panel",{ layout : "border", width : "100%", height : "100%", region : "north", border : false, flex : 1});
	this.deflayout = layout;
	this.createComponents();
	this.annotWindow = new haxe.ds.IntMap();
};
saturn.client.SingleAppContainer.__name__ = ["saturn","client","SingleAppContainer"];
saturn.client.SingleAppContainer.prototype = {
	hbox: null
	,centralPanel: null
	,centralTargetPanel: null
	,controlToolBar: null
	,modeToolBar: null
	,legendPanel: null
	,geneListBar: null
	,optionsToolBar: null
	,editToolBar: null
	,hideHelp: null
	,subMenuToolBar: null
	,helpingDiv: null
	,exportSubMenu: null
	,popUpWindow: null
	,ultraDDWindow: null
	,highlightWindow: null
	,annotWindow: null
	,messageWindow: null
	,messageDomainWindow: null
	,tipWindow: null
	,progressBar: null
	,deflayout: null
	,program: null
	,createComponents: function() {
		this.createModeToolBar();
		this.createControlToolBar();
		this.createCentralPanel();
	}
	,createCentralPanel: function() {
		var _g = this;
		this.centralPanel = Ext.create("Ext.panel.Panel",{ layout : "border", width : "100%", height : "100%", region : "center", cls : "x-centralPanel-single", border : false, scrollable : true, flex : 1, id : "id-centralPanel", listener : { focus : function(e) {
			_g.getApplication().getSingleAppContainer().hideSubMenuToolBar();
		}}});
		this.hbox.add(this.centralPanel);
	}
	,clearCentralPanel: function() {
		var _g = this;
		var itemslist = this.centralPanel.items;
		itemslist.each(function(item,index,length) {
			if(item.id == "panel-domain-architecture") {
				var itemslist2 = item.items;
				itemslist2.each(function(it,ind,leng) {
					item.remove(it,true);
				});
				_g.centralPanel.remove(item,true);
			} else if(item.id == "chromo-legend") _g.centralPanel.remove(item,true); else _g.centralPanel.remove(item,false);
		});
		this.centralPanel.doLayout();
	}
	,setCentralComponent: function(component) {
		this.clearCentralPanel();
		this.centralPanel.add(component);
		this.centralPanel.doLayout();
	}
	,addComponentToCentralPanel: function(component) {
		this.centralPanel.add(component);
		this.centralPanel.doLayout();
	}
	,getCentralPanel: function() {
		return this.centralPanel;
	}
	,createLegendPanel: function() {
		this.legendPanel = Ext.create("Ext.panel.Panel",{ width : "100%", height : "20px", border : true, cls : "x-tree-legend", region : "south", split : true, id : "chromo-legend", vertical : true, collapsible : true, collapsed : true, title : "Legend"});
		this.addComponentToCentralPanel(this.legendPanel);
	}
	,hideLegendPanel: function() {
		this.legendPanel.hide();
	}
	,showLegendPanel: function() {
		this.legendPanel.doLayout();
		this.legendPanel.show();
		this.legendPanel.doLayout();
	}
	,addImageToLegend: function(image,id) {
		var changingImage = Ext.create("Ext.Img",{ src : image, id : id, padding : "5 0 15 0"});
		this.legendPanel.insert(2,changingImage);
		this.legendPanel.doLayout();
		this.hbox.doLayout();
	}
	,removeComponentFromLegend: function(component) {
		var comp = this.legendPanel.getComponent(component);
		this.legendPanel.remove(comp);
	}
	,expandLegend: function() {
	}
	,emptyLegend: function() {
		var _g = this;
		var itemslist = this.legendPanel.items;
		var items = [];
		itemslist.each(function(item,index,length) {
			_g.legendPanel.remove(item,true);
		});
		this.legendPanel.doLayout();
	}
	,getLegendPanel: function() {
		return this.legendPanel;
	}
	,createModeToolBar: function() {
		this.modeToolBar = Ext.create("Ext.toolbar.Toolbar",{ width : "20px", id : "modeToolBarId", height : "100%", border : false, region : "west", cls : "x-modetoolbar-single", vertical : true});
		this.hbox.add(this.modeToolBar);
	}
	,hideModeToolBar: function() {
		this.modeToolBar.hide();
	}
	,showModeToolBar: function() {
		this.modeToolBar.doLayout();
		this.modeToolBar.show();
		this.modeToolBar.doLayout();
	}
	,getModeToolBar: function() {
		return this.modeToolBar;
	}
	,clearModeToolBar: function() {
		var _g = this;
		var itemslist = this.modeToolBar.items;
		itemslist.each(function(item,index,length) {
			_g.modeToolBar.remove(item,false);
		});
		this.modeToolBar.doLayout();
	}
	,addElemToModeToolBar: function(elem) {
		this.modeToolBar.add(elem);
		this.modeToolBar.doLayout();
	}
	,createControlToolBar: function(attachPosition) {
		if(attachPosition == null) attachPosition = 1;
		this.controlToolBar = Ext.create("Ext.toolbar.Toolbar",{ width : "35px", height : "100px", border : false, vertical : true, region : "east", cls : "x-toolbar-2nd"});
		this.hbox.insert(attachPosition,this.controlToolBar);
	}
	,getControlToolBar: function() {
		return this.controlToolBar;
	}
	,hideControlToolBar: function() {
		this.controlToolBar.hide();
	}
	,showControlToolBar: function() {
		this.controlToolBar.doLayout();
		this.controlToolBar.show();
		this.controlToolBar.doLayout();
	}
	,clearControlToolBar: function() {
		var attachPosition = this.hbox.items.findIndex("id",this.controlToolBar.id);
		this.hbox.remove(this.controlToolBar);
		this.createControlToolBar(attachPosition);
	}
	,addElemToControlToolBar: function(elem) {
		this.controlToolBar.add(elem);
		this.controlToolBar.doLayout();
	}
	,refreshControlToolBar: function() {
		this.controlToolBar.doLayout();
	}
	,createEditToolBar: function(attachPosition) {
		if(attachPosition == null) attachPosition = 2;
		this.editToolBar = Ext.create("Ext.toolbar.Toolbar",{ width : "35px", height : "100px", border : false, vertical : true, region : "east", cls : "x-toolbar-2nd"});
		this.hbox.insert(attachPosition,this.editToolBar);
	}
	,getEditToolBar: function() {
		return this.editToolBar;
	}
	,hideEditToolBar: function() {
		this.editToolBar.hide();
	}
	,showEditToolBar: function() {
		this.editToolBar.doLayout();
		this.editToolBar.show();
		this.editToolBar.doLayout();
	}
	,clearEditToolBar: function() {
		var attachPosition = this.hbox.items.findIndex("id",this.editToolBar.id);
		this.hbox.remove(this.editToolBar);
		this.createEditToolBar(attachPosition);
	}
	,addElemToEditToolBar: function(elem) {
		this.editToolBar.add(elem);
		this.editToolBar.doLayout();
	}
	,refreshEditToolBar: function() {
		this.controlToolBar.doLayout();
	}
	,removeComponentFromEditToolBar: function(component) {
		this.editToolBar.remove(component);
		this.editToolBar.doLayout();
	}
	,createGeneListToolBar: function(attachPosition) {
		if(attachPosition == null) attachPosition = 1;
		this.geneListBar = Ext.create("Ext.toolbar.Toolbar",{ top : "0px", left : "30px", width : "470px", height : "100%", border : false, vertical : true, cls : "x-viewoptionsbar", alwaysOnTop : true, region : "west", title : "Options Tool Bar", autoScroll : true});
		this.geneListBar.add({ xtype : "label", text : "Gene List", cls : "targetclass-title"});
		this.hbox.insert(attachPosition,this.geneListBar);
	}
	,getGeneListBar: function() {
		return this.geneListBar;
	}
	,hideGeneListBar: function() {
		this.geneListBar.hide();
	}
	,showGeneListBar: function() {
		this.geneListBar.show();
	}
	,clearGeneListBar: function() {
		this.geneListBar.removeAll(true);
	}
	,addGeneToGeneListBar: function(gene) {
		var _g = this;
		this.geneListBar.add({ xtype : "button", iconCls : "x-btn-gene-searched", text : gene, handler : function(e) {
			_g.getApplication().debug(e.text);
		}, tooltip : { dismissDelay : 10000, text : gene}});
	}
	,removeGeneFromGeneListBar: function(elem) {
		this.geneListBar.add(elem);
		this.geneListBar.doLayout();
	}
	,createOptionsToolBar: function(attachPosition) {
		if(attachPosition == null) attachPosition = 1;
		this.optionsToolBar = Ext.create("Ext.toolbar.Toolbar",{ top : "0px", left : "30px", id : "optionToolBarId", width : "700px", height : "100%", border : false, vertical : true, cls : "x-viewoptionsbar", alwaysOnTop : true, region : "west", title : "Options Tool Bar", autoScroll : true});
		this.hbox.insert(attachPosition,this.optionsToolBar);
	}
	,viewClose: function(active) {
	}
	,updateOptionsToolBar: function(active) {
	}
	,getOptionsToolBar: function() {
		if(this.optionsToolBar == null) return null; else return this.optionsToolBar;
	}
	,hideOptionsToolBar: function() {
		this.optionsToolBar.hide();
	}
	,showOptionsToolBar: function() {
		this.optionsToolBar.show();
	}
	,clearOptionsToolBar: function() {
		var _g = this;
		var itemslist = this.optionsToolBar.items;
		itemslist.each(function(item,index,length) {
			_g.optionsToolBar.remove(item,false);
		});
		this.optionsToolBar.doLayout();
	}
	,addElemToOptionsToolBar: function(elem) {
		this.optionsToolBar.add(elem);
		this.optionsToolBar.doLayout();
	}
	,createExportSubMenu: function(viewer,attachPosition) {
		if(attachPosition == null) attachPosition = 10000;
		this.exportSubMenu = Ext.create("Ext.toolbar.Toolbar",{ top : "0px", width : "120px", height : "50px", border : false, vertical : true, cls : "x-exsubmenu-toolsbar", modal : false, floating : true, alwaysOnTop : true, listeners : { 'mouseleave' : function(menu,e,eOpts) {
			menu.hide();
		}}});
		this.exportSubMenu.add({ iconCls : "x-btn-exportpng-single", handler : function() {
			viewer.exportPNG();
		}, tooltip : { dismissDelay : 10000, text : "Export Tree as PNG file"}});
		this.exportSubMenu.add({ iconCls : "x-btn-exportsvg-single", handler : function() {
			viewer.exportSVG();
		}, tooltip : { dismissDelay : 10000, text : "Export Tree as SVG file"}});
		this.hbox.insert(attachPosition,this.exportSubMenu);
	}
	,hideExportSubMenu: function() {
		this.exportSubMenu.hide();
	}
	,showExportSubMenu: function(x) {
		this.exportSubMenu.setPosition(x);
		this.exportSubMenu.show();
	}
	,getExportSubMenu: function() {
		return this.exportSubMenu;
	}
	,createSubMenuToolBar: function(attachPosition) {
		if(attachPosition == null) attachPosition = 10000;
		this.subMenuToolBar = Ext.create("Ext.toolbar.Toolbar",{ top : "0px", left : "150px", width : "1px", height : "100px", border : false, vertical : true, cls : "x-submenu-toolsbar", modal : false, floating : true, alwaysOnTop : true, title : "SubMenu Tool Bar"});
		this.hbox.insert(attachPosition,this.subMenuToolBar);
	}
	,clearSubMenuToolBar: function() {
		var attachPosition = this.hbox.items.findIndex("id",this.subMenuToolBar.id);
		this.hbox.remove(this.subMenuToolBar);
		this.setTopSubMenuToolBar(0);
		this.createSubMenuToolBar(attachPosition);
	}
	,hideSubMenuToolBar: function() {
		this.subMenuToolBar.hide();
	}
	,showSubMenuToolBar: function() {
		this.subMenuToolBar.show();
	}
	,getSubMenuToolBar: function() {
		return this.subMenuToolBar;
	}
	,addElemToSubMenuToolBar: function(elem) {
		this.subMenuToolBar.add(elem);
	}
	,setTopSubMenuToolBar: function(top) {
		this.subMenuToolBar.setPosition(435,top);
	}
	,setHeightSubMenuToolBar: function(height) {
		this.subMenuToolBar.setHeight(height);
	}
	,createHelpingDiv: function(attachPosition) {
		if(attachPosition == null) attachPosition = 10000;
		var _g = this;
		this.helpingDiv = Ext.create("Ext.Container",{ top : "0px", left : "5px", width : "1px", vertical : true, cls : "x-helpingDiv", floating : true, alwaysOnTop : true, id : "helpingDiv", title : "Helping Div", listeners : { mouseout : function(e) {
			_g.helpingDiv.hide();
		}, mouseover : function(e1) {
			_g.hideHelp = false;
		}}});
		this.hbox.insert(attachPosition,this.helpingDiv);
	}
	,clearHelpingDiv: function() {
		var attachPosition = this.hbox.items.findIndex("id",this.helpingDiv.id);
		this.hbox.remove(this.helpingDiv);
		this.setTopHelpingDiv(0);
		this.createHelpingDiv(attachPosition);
	}
	,hideHelpingDiv: function() {
		this.helpingDiv.hide();
	}
	,showHelpingDiv: function() {
		this.hideSubMenuToolBar();
		this.helpingDiv.show();
	}
	,getHelpingDiv: function() {
		return this.helpingDiv;
	}
	,addHtmlTextHelpingDiv: function(text) {
		this.helpingDiv.html = text;
	}
	,setTopHelpingDiv: function(top) {
		this.helpingDiv.setPosition(135,top);
	}
	,setHeightHelpingDiv: function(height) {
		this.helpingDiv.setHeight(height);
	}
	,showAnnotWindow: function(text,px,py,title,ident,data) {
		var _g = this;
		if(this.alreadyOpen(ident) == false) {
			var r = Math.random() * 299 + 1;
			var id = r | 0;
			var myWindow = Ext.create("Ext.window.Window",{ x : px, y : py, maxHeight : 500, cls : "x-annot-window", id : "annotWin-" + ident, modal : false, autoscroll : true, overflowY : "auto", layout : "fit", shadow : true, resizable : true, title : title, html : text, listeners : { close : function(win) {
				_g.annotWindow.remove(id);
				data.created = false;
			}, hide : function(win1) {
				_g.annotWindow.remove(id);
				data.created = false;
			}}});
			myWindow.show();
			this.annotWindow.h[id] = myWindow;
			this.annotWindowDoLayout();
		}
	}
	,alreadyOpen: function(ident) {
		var key;
		var $it0 = this.annotWindow.keys();
		while( $it0.hasNext() ) {
			var key1 = $it0.next();
			var elem = this.annotWindow.h[key1];
			if(elem.id == "annotWin-" + ident) return true;
		}
		return false;
	}
	,removeAnnotWindows: function() {
		var key;
		var $it0 = this.annotWindow.keys();
		while( $it0.hasNext() ) {
			var key1 = $it0.next();
			var elem = this.annotWindow.h[key1];
			elem.close();
			this.annotWindow.remove(key1);
		}
	}
	,annotWindowDoLayout: function() {
		var key;
		var $it0 = this.annotWindow.keys();
		while( $it0.hasNext() ) {
			var key1 = $it0.next();
			var elem = this.annotWindow.h[key1];
			elem.doLayout();
		}
	}
	,showAnnotWindowTable: function(text,px,py) {
		var annotWindowT = Ext.create("Ext.window.Window",{ x : px, y : py, cls : "x-annot-window", modal : false, autoscroll : true, overflowY : "auto", layout : "fit", shadow : true, resizable : true, html : text});
		annotWindowT.show();
	}
	,showUltraDDWindow: function(item,px,py,title,viewer) {
		var _g = this;
		this.cleanALlWindows();
		this.ultraDDWindow = Ext.create("Ext.window.Window",{ x : px, width : "800px", maxHeight : 600, cls : "x-ultradd-window", modal : true, autoScroll : true, overflowY : "auto", shadow : true, resizable : true, maximizable : true, title : "UltraDD Genes"});
		this.ultraDDWindow.add({ xtype : "form", iconCls : "x-popup-form", defaultType : "checkboxfield", id : "wform", items : item, title : "Select the genes you want to add into annotations table.Total number of genes: " + title, buttons : [{ iconCls : "x-btn-accept", text : "Accept", handler : function() {
			var form;
			form = _g.ultraDDWindow.getComponent("wform");
			viewer.geneMap = new haxe.ds.StringMap();
			if(form.isValid()) {
				var i = 0;
				var j = 0;
				var mylist;
				mylist = [];
				var _g2 = 0;
				var _g1 = form.items.items.length;
				while(_g2 < _g1) {
					var i1 = _g2++;
					if(form.items.items[i1].checked == true) {
						mylist.push(form.items.items[i1].inputValue);
						viewer.treeName = "";
						viewer.treeType = "gene";
						viewer.newickStr = "";
						viewer.annotationManager.searchedGenes = [];
						viewer.annotationManager.searchedGenes = mylist;
						var geneNode = new phylo.PhyloTreeNode(null,form.items.items[i1].inputValue,true,0);
						geneNode.l = 1;
						geneNode.annotations = [];
						geneNode.activeAnnotation = [];
						viewer.geneMap.set(form.items.items[i1].inputValue,geneNode);
					}
				}
				if(mylist.length > 0) {
					saturn.client.WorkspaceApplication.getApplication().showMessage("Alert","This process might take some time. Please wait.");
					viewer.renderTable();
				}
				_g.ultraDDWindow.hide();
			}
		}},{ iconCls : "x-btn-accept", text : "Cancel", handler : function() {
			_g.ultraDDWindow.hide();
		}}]});
		this.ultraDDWindow.show();
	}
	,cleanALlWindows: function() {
		var _g = this;
		if(this.highlightWindow != null) {
			this.highlightWindow.removeAll(true);
			this.highlightWindow.doLayout();
		}
		if(this.ultraDDWindow != null) {
			var itemslist = this.ultraDDWindow.items;
			itemslist.each(function(item,index,length) {
				_g.ultraDDWindow.remove(item,true);
			});
			this.ultraDDWindow.removeAll(true);
			this.ultraDDWindow.doLayout();
		}
		if(this.popUpWindow != null) {
			var itemslist1 = this.popUpWindow.items;
			itemslist1.each(function(item1,index1,length1) {
				_g.popUpWindow.remove(item1,true);
			});
			this.popUpWindow.removeAll(true);
			this.popUpWindow.doLayout();
		}
		if(this.tipWindow != null) {
			var itemslist2 = this.tipWindow.items;
			itemslist2.each(function(item2,index2,length2) {
				_g.tipWindow.remove(item2,true);
			});
			this.tipWindow.removeAll(true);
			this.tipWindow.doLayout();
		}
	}
	,showHighlightWindow: function(item,px,py,title,viewer) {
		var _g = this;
		this.cleanALlWindows();
		var compare = function(a,b) {
			var geneNameA = a.boxLabel.toUpperCase();
			var geneNameB = b.boxLabel.toUpperCase();
			var comparison = 0;
			if(geneNameA > geneNameB) comparison = 1; else if(geneNameA < geneNameB) comparison = -1;
			return comparison;
		};
		item.sort(compare);
		this.highlightWindow = Ext.create("Ext.window.Window",{ x : px, width : "800px", maxHeight : 600, cls : "x-highlight-window", modal : true, autoScroll : true, overflowY : "auto", shadow : true, resizable : true, maximizable : true, title : "Highlight Genes"});
		this.highlightWindow.add({ xtype : "form", iconCls : "x-popup-form", defaultType : "checkboxfield", id : "wform", items : item, title : "Select the genes you want to highlight in tree.Total number of genes: " + title, buttons : [{ iconCls : "x-btn-accept", text : "Accept", handler : function() {
			var form;
			form = _g.highlightWindow.getComponent("wform");
			viewer.config.highlightedGenes = new haxe.ds.StringMap();
			if(form.isValid()) {
				var i = 0;
				var j = 0;
				var _g2 = 0;
				var _g1 = form.items.items.length;
				while(_g2 < _g1) {
					var i1 = _g2++;
					if(form.items.items[i1].checked == true) {
						if(viewer.config.highlightedGenes.exists(viewer.rootNode.targets[i1]) == false) viewer.config.highlightedGenes.set(form.items.items[i1].inputValue,true);
					}
				}
				viewer.newposition(0,0);
				_g.highlightWindow.hide();
			}
		}},{ iconCls : "x-btn-accept", text : "Remove highlights", handler : function() {
			viewer.config.highlightedGenes = new haxe.ds.StringMap();
			viewer.newposition(0,0);
			_g.highlightWindow.hide();
		}},{ iconCls : "x-btn-accept", text : "Cancel", handler : function() {
			_g.highlightWindow.hide();
		}}]});
		this.highlightWindow.doLayout();
		this.highlightWindow.show();
	}
	,createMessageDomainWindow: function(viewer) {
		var _g = this;
		this.messageDomainWindow = Ext.create("Ext.window.Window",{ width : "500px", cls : "x-popup-window", modal : true, title : "Message"});
		this.messageDomainWindow.add({ xtype : "form", iconCls : "x-popup-form", height : "200px", id : "w1form", defaultType : "checkboxfield", items : [{ xtype : "label", text : "There is no domain-based alignment for this family. This phylogenetic tree is based on full-length alignment.", cls : "x-label-message", boxLabel : "", id : ""},{ xtype : "checkboxfield", text : "Don't show this message again", boxLabel : "Don't show this message again", cls : "x-checkbox-message", id : "click_message_finish"}], buttons : [{ iconCls : "x-btn-accept", text : "Accept", handler : function() {
			var form = _g.messageDomainWindow.getComponent("w1form");
			if(form.isValid()) {
				if(form.items.items[1].lastValue == true) viewer.adviseDomainUser(false);
				_g.hideMessageDomainWindow();
			}
		}}]});
	}
	,showMessageDomainWindow: function() {
		this.messageDomainWindow.show();
	}
	,hideMessageDomainWindow: function() {
		this.messageDomainWindow.hide();
	}
	,showProgressBar: function() {
		this.cleanALlWindows();
		this.progressBar = Ext.create("Ext.window.Window",{ width : 230, height : 210, cls : "x-progressbar", modal : true, resizable : false, closable : false, title : "Please wait ...", items : [{ xtype : "container", cls : "x-progress-bar", width : 200, height : 130, html : "<img src=\"/static/js/images/giphy.gif\">", boxLabel : "", id : "id-tip-html"}]});
		this.progressBar.show();
	}
	,hideProgressBar: function() {
		if(this.progressBar != null) this.progressBar.hide();
	}
	,createTipWindow: function(viewer,top,left,width,height,text) {
		var _g = this;
		var th = height * 0.85 | 0;
		var fh = th * 0.85 | 0;
		var bh = height - fh;
		this.tipWindow = Ext.create("Ext.window.Window",{ width : width, height : height, maxHeight : 600, y : 5, x : left, cls : "x-tip-window", modal : true, resizable : false, closable : true, title : "Tip of the Day"});
		this.tipWindow.add({ xtype : "form", iconCls : "x-popup-form", width : width, buttonAlign : "left", id : "tipForm", items : [{ xtype : "container", cls : "x-sefa-form", width : width, height : height - 150, html : text, boxLabel : "", id : "id-tip-html"}], buttons : [{ iconCls : "x-previous-tip-btn", text : "Prev Tip", id : "previous-tip-btn", handler : function() {
			var t = viewer.tipActive;
			if(t == 0) t = viewer.tips.length - 1; else t--;
			viewer.tipActive = t;
			var title = viewer.tips[viewer.tipActive].title;
			var html = viewer.tips[viewer.tipActive].html;
			var text1 = "<h2>" + title + "</h2>" + html;
			_g.changeContentTipWindow(text1);
		}},{ iconCls : "x-next-tip-btn", text : "Next Tip", id : "next-tip-btn", handler : function() {
			var t1 = viewer.tipActive;
			t1++;
			if(t1 == viewer.tips.length) t1 = 0;
			viewer.tipActive = t1;
			var title1 = viewer.tips[viewer.tipActive].title;
			var html1 = viewer.tips[viewer.tipActive].html;
			var text2 = "<h2>" + title1 + "</h2>" + html1;
			_g.changeContentTipWindow(text2);
		}},{ iconCls : "x-close-tip-btn", text : "Close", id : "close-tip-btn", handler : function() {
			var checkoption = _g.tipWindow.getComponent("click_tip_finish");
			if(checkoption.lastValue == true) viewer.showTips(true); else viewer.showTips(false);
			_g.hideTipWindow();
		}}], listeners : { close : function(win) {
			var checkoption1 = _g.tipWindow.getComponent("click_tip_finish");
			if(checkoption1.lastValue == true) viewer.showTips(true); else viewer.showTips(false);
			_g.hideTipWindow();
		}, hide : function(win1) {
			var checkoption2 = _g.tipWindow.getComponent("click_tip_finish");
			if(checkoption2.lastValue == true) viewer.showTips(true); else viewer.showTips(false);
			_g.hideTipWindow();
		}}});
		this.tipWindow.add({ xtype : "checkboxfield", html : "", width : 135, height : 30, checked : true, boxLabel : "Show Tips on Startup", cls : "x-checkbox-message", id : "click_tip_finish"});
		this.tipWindow.show();
	}
	,changeContentTipWindow: function(html) {
		var item = this.tipWindow.items.items[0].items.items[0];
		if(item.id == "id-tip-html") item.html = html;
		item.update(html);
		this.tipWindow.doLayout();
	}
	,hideTipWindow: function() {
		this.tipWindow.hide();
	}
	,showTipWindow: function() {
		if(this.subMenuToolBar != null) this.hideSubMenuToolBar();
		if(this.helpingDiv != null) this.hideHelpingDiv();
		this.tipWindow.show();
	}
	,getTipWindow: function() {
		return this.tipWindow;
	}
	,createMessageWindow: function(viewer) {
		var _g = this;
		this.messageWindow = Ext.create("Ext.window.Window",{ width : "500px", cls : "x-popup-window", modal : true, title : "Message"});
		this.messageWindow.add({ xtype : "form", iconCls : "x-popup-form", height : "200px", id : "w2form", defaultType : "checkboxfield", items : [{ xtype : "label", text : "Click on the annotation icon for more details.", cls : "x-label-message", boxLabel : "", id : ""},{ xtype : "checkboxfield", text : "Don't show this message again", boxLabel : "Don't show this message again", cls : "x-checkbox-message", id : "click_moremessage_finish"}], buttons : [{ iconCls : "x-btn-accept", text : "Accept", handler : function() {
			var form = _g.messageWindow.getComponent("w2form");
			if(form.isValid()) {
				if(form.items.items[1].lastValue == true) viewer.adviseUser(false);
				_g.hideMessageWindow();
			}
		}}]});
	}
	,showMessageWindow: function() {
		this.messageWindow.show();
	}
	,hideMessageWindow: function() {
		this.messageWindow.hide();
	}
	,createPopUpWindow: function() {
		this.cleanALlWindows();
		this.popUpWindow = Ext.create("Ext.window.Window",{ x : "300px", y : "30px", width : "500px", cls : "x-popup-window", modal : true, title : "Windows POP UP"});
		this.popUpWindow.doLayout();
	}
	,clearPopUpWindow: function() {
		var attachPosition = this.hbox.items.findIndex("id",this.popUpWindow.id);
		this.hbox.remove(this.popUpWindow);
		this.popUpWindow.removeAll();
		this.setPosPopUpWindow(0,0);
		this.createPopUpWindow();
	}
	,hidePopUpWindow: function() {
		this.popUpWindow.hide();
	}
	,showPopUpWindow: function() {
		this.popUpWindow.show();
	}
	,getPopUpWindow: function() {
		return this.popUpWindow;
	}
	,addElemToPopUpWindow: function(elem) {
		this.popUpWindow.add(elem);
	}
	,addFormItemToPopUpWindow: function(item,annot,hasClass,popMethod,tree_type,family,searchGenes,annotationManager) {
		var _g = this;
		this.popUpWindow.add({ xtype : "form", iconCls : "x-popup-form", height : "200px", defaultType : "checkboxfield", id : "wform", items : item, buttons : [{ iconCls : "x-btn-accept", text : "Accept", handler : function() {
			var form = _g.popUpWindow.getComponent("wform");
			if(form.isValid()) {
				annotationManager.cleanAnnotResults(annot);
				var hook = Reflect.field(Type.resolveClass(hasClass),popMethod);
				hook(annot,form,tree_type,family,searchGenes,annotationManager,function() {
				});
				if(annotationManager.skipAnnotation[annot] != true) {
					if(annotationManager.skipCurrentLegend[annot] != true) _g.addImageToLegend(annotationManager.annotations[annot].legend,annot);
					_g.legendPanel.expand();
					_g.hidePopUpWindow();
					if(annotationManager.skipCurrentLegend[annot] != true) annotationManager.activeAnnotation[annot] = true;
					annotationManager.activeAnnotation[annot] = true;
					_g.clearOptionsToolBar();
					annotationManager.createViewOptions();
					_g.addElemToOptionsToolBar(annotationManager.viewOptions);
					var elem = window.document.getElementById("optionToolBarId");
					elem.scrollTop = annotationManager.menuScroll;
				} else {
					_g.hidePopUpWindow();
					_g.clearOptionsToolBar();
					annotationManager.createViewOptions();
					_g.addElemToOptionsToolBar(annotationManager.viewOptions);
				}
			}
		}},{ iconCls : "x-btn-accept", text : "Cancel", handler : function() {
			_g.hidePopUpWindow();
		}}]});
	}
	,setPosPopUpWindow: function(left,top) {
		this.popUpWindow.setPosition(left,top);
	}
	,setPopUpWindowTitle: function(title) {
		this.popUpWindow.title = title;
	}
	,getComponent: function() {
		return this.hbox;
	}
	,setProgram: function(program) {
		this.program = program;
		var progComponent = this.program.getRawComponent();
		this.centralPanel.add(progComponent);
		this.centralPanel.doLayout();
		progComponent.doLayout();
		progComponent.show();
		this.centralPanel.doLayout();
		program.focusProgram();
	}
	,getApplication: function() {
		return saturn.client.WorkspaceApplication.getApplication();
	}
	,getCentralContainer: function() {
		return this.centralPanel;
	}
	,__class__: saturn.client.SingleAppContainer
};
saturn.client.ScreenMode = $hxClasses["saturn.client.ScreenMode"] = { __ename__ : ["saturn","client","ScreenMode"], __constructs__ : ["SINGLE_APP","DEFAULT"] };
saturn.client.ScreenMode.SINGLE_APP = ["SINGLE_APP",0];
saturn.client.ScreenMode.SINGLE_APP.toString = $estr;
saturn.client.ScreenMode.SINGLE_APP.__enum__ = saturn.client.ScreenMode;
saturn.client.ScreenMode.DEFAULT = ["DEFAULT",1];
saturn.client.ScreenMode.DEFAULT.toString = $estr;
saturn.client.ScreenMode.DEFAULT.__enum__ = saturn.client.ScreenMode;
if(!saturn.client.core) saturn.client.core = {};
saturn.client.core.ClientCore = $hxClasses["saturn.client.core.ClientCore"] = function() {
	this.disabledLogout = false;
	this.keepProgress = true;
	this.loggedIn = false;
	this.nextMsgId = 0;
	this.updateListeners = [];
	this.refreshListeners = [];
	this.listeners = new haxe.ds.StringMap();
	this.loginListeners = [];
	this.logoutListeners = [];
	debug.enable("saturn:plugin");
	this.debugLogger = debug("saturn:plugin");
};
saturn.client.core.ClientCore.__name__ = ["saturn","client","core","ClientCore"];
saturn.client.core.ClientCore.__interfaces__ = [saturn.client.ConversationHelper];
saturn.client.core.ClientCore.clientCore = null;
saturn.client.core.ClientCore.startClientCore = function() {
	saturn.client.core.ClientCore.clientCore = new saturn.client.core.ClientCore();
	return saturn.client.core.ClientCore.clientCore;
};
saturn.client.core.ClientCore.getClientCore = function() {
	return saturn.client.core.ClientCore.clientCore;
};
saturn.client.core.ClientCore.main = function() {
	saturn.client.core.ClientCore.startClientCore();
};
saturn.client.core.ClientCore.prototype = {
	theSocket: null
	,cbsAwaitingIds: null
	,msgIdToJobInfo: null
	,msgIds: null
	,cbsAwaitingResponse: null
	,listeners: null
	,nextMsgId: null
	,loggedIn: null
	,theUser: null
	,keepProgress: null
	,updateListeners: null
	,refreshListeners: null
	,showMessage: null
	,disabledLogout: null
	,loginListeners: null
	,logoutListeners: null
	,debugLogger: null
	,providerUpListener: null
	,addUpdateListener: function(listener) {
		this.updateListeners.push(listener);
	}
	,addRefreshListener: function(listener) {
		this.refreshListeners.push(listener);
	}
	,addLoginListener: function(listener) {
		this.loginListeners.push(listener);
	}
	,addLogoutListener: function(listener) {
		this.logoutListeners.push(listener);
	}
	,setShowMessage: function(func) {
		this.showMessage = func;
	}
	,installNodeSocket: function() {
		if(this.theSocket != null) {
			this.theSocket.disconnect();
			this.theSocket = null;
		}
		var wsProtocol = "ws";
		if(window.location.protocol == "https:") wsProtocol = "wss";
		this.theSocket = new bindings.NodeSocket(io.connect(wsProtocol + "://" + window.location.hostname + ":" + window.location.port,{ forceNew : true, tryTransportsOnConnectTimeout : false, rememberTransport : false, transports : ["websocket"]}));
		this.initialiseSocket(this.theSocket);
	}
	,login: function(username,password,cb) {
		var _g = this;
		var req = new haxe.Http("/login");
		req.setParameter("username",username);
		req.setParameter("password",password);
		req.onData = function(data) {
			var obj = JSON.parse(data);
			if(obj.error) {
				_g.showMessage("Login failed","Unable to authenticate");
				return;
			}
			var cookies = Cookies;
			cookies.set("user",{ 'fullname' : obj.full_name, 'token' : obj.token, 'username' : username.toUpperCase(), 'projects' : obj.projects},{ 'expires' : 14});
			var user = new saturn.core.User();
			user.fullname = obj.full_name;
			user.token = obj.token;
			user.username = username.toUpperCase();
			user.projects = obj.projects;
			_g.refreshSession(cb);
		};
		req.onError = function(err) {
			cb(err);
		};
		req.request(true);
	}
	,refreshSession: function(cb) {
		var _g = this;
		var cookies = Cookies;
		var cookie = cookies.getJSON("user");
		if(cookie != null) {
			saturn.core.Util.debug("Installing authenticated node socket");
			var user = new saturn.core.User();
			user.fullname = cookie.fullname;
			user.token = cookie.token;
			user.username = cookie.username;
			user.projects = cookie.projects;
			this.authenticateSocket(user,function(err,user1) {
				if(err == null) _g.installProviders();
				if(cb != null) cb(err);
			});
		} else {
			saturn.core.Util.debug("Installing unauthenticated node socket");
			this.installNodeSocket();
			this.installProviders();
			var _g1 = 0;
			var _g11 = this.refreshListeners;
			while(_g1 < _g11.length) {
				var listener = _g11[_g1];
				++_g1;
				listener();
			}
			if(cb != null) cb(null);
		}
	}
	,installProviders: function() {
		saturn.client.core.CommonCore.setDefaultProvider(new saturn.db.NodeProvider(),null,true);
		saturn.client.BioinformaticsServicesClient.getClient(null,this);
		var dwin = window;
		dwin.DB = saturn.client.core.CommonCore.getDefaultProvider();
	}
	,authenticateSocket: function(user,cb) {
		var _g = this;
		saturn.core.Util.debug("Authenticating: " + user.token + "/" + user.fullname);
		if(this.theSocket != null) {
			this.theSocket.disconnect();
			this.theSocket = null;
		}
		var wsProtocol = "ws";
		if(window.location.protocol == "https:") wsProtocol = "wss";
		var sock = io.connect(wsProtocol + "://" + window.location.hostname + ":" + window.location.port,{ forceNew : true, tryTransportsOnConnectTimeout : false, rememberTransport : false, transports : ["websocket"]});
		sock.on("error",function(error) {
			if(error.type == "UnauthorizedError" || error.code == "invalid_token") Ext.Msg.info("Login failed","Unable to authenticate"); else if(error.type == "TransportError") _g.showMessage("Server unavailable","Unable to contact server<br/>Not all functionaility will be available.<br/>Attempting reconnection in the background"); else {
				_g.theSocket = null;
				_g.showMessage("Unexpected server error","An unexpected server error has occurred\nPlease contact your saturn administrator");
			}
		});
		sock.on("connect",function(socket) {
			sock.reconnecting = true;
			sock.emit("authenticate",{ token : user.token});
		});
		sock.on("authenticated",function() {
			saturn.core.Util.debug("Authenticated");
			_g.setLoggedIn(user);
			cb(null,user);
		});
		sock.on("unauthorized",function() {
			_g.logout(true);
			cb("rejected",null);
		});
		this.theSocket = new bindings.NodeSocket(sock);
		this.initialiseSocket(this.theSocket);
	}
	,initialiseSocket: function(socket) {
		var _g = this;
		this.cbsAwaitingIds = [];
		this.cbsAwaitingResponse = new haxe.ds.StringMap();
		this.msgIdToJobInfo = new haxe.ds.StringMap();
		this.msgIds = [];
		this.theSocket.on("receiveMsgId",function(data) {
			var cb = _g.cbsAwaitingIds.shift();
			if(Object.prototype.hasOwnProperty.call(data,"msgId")) cb(data.msgId,null); else cb(null,"Node has failed to return a valid message ID response");
		});
		this.theSocket.on("receiveError",function(data1) {
			var cb1 = _g.getCb(data1);
			if(cb1 != null) {
				var err = data1.error;
				if(err != null) {
					if(typeof(err) == "string") {
						if(StringTools.startsWith(err,"\"")) err = JSON.parse(err);
					}
				}
				cb1(data1,err);
			}
		});
		this.theSocket.on("__response__",function(data2) {
			var cb2 = _g.getCb(data2);
			if(cb2 != null) {
				if(data2 == null) cb2(null,"Invalid, empty response from server"); else {
					var err1 = data2.error;
					if(err1 != null) {
						if(typeof(err1) == "string") {
							if(StringTools.startsWith(err1,"\"")) err1 = JSON.parse(err1);
						}
					}
					cb2(data2,data2.error);
				}
			} else window.console.log("Untracked message recieved ");
		});
	}
	,setLoggedIn: function(user) {
		this.setUser(user);
		this.loggedIn = true;
		var _g = 0;
		var _g1 = this.loginListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(user);
		}
	}
	,disableLogout: function() {
		this.disabledLogout = true;
	}
	,isLogoutDisabled: function() {
		return this.disabledLogout;
	}
	,setUser: function(user) {
		this.theUser = user;
	}
	,getUser: function() {
		return this.theUser;
	}
	,isLoggedIn: function() {
		return this.loggedIn;
	}
	,logout: function(skipLogoutEmit) {
		if(skipLogoutEmit == null) skipLogoutEmit = false;
		if(this.isLogoutDisabled()) return;
		var cookies = Cookies;
		cookies.remove("user");
		if(!skipLogoutEmit) this.getNodeSocket().emit("logout",{ });
		this.setLoggedOut();
		var _g = 0;
		var _g1 = this.logoutListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener();
		}
		this.refreshSession(function(err) {
		});
	}
	,setLoggedOut: function() {
		this.loggedIn = false;
	}
	,getNodeSocket: function() {
		return this.theSocket;
	}
	,registerResponse: function(msg) {
		var _g = this;
		this.theSocket.on(msg,function(data) {
			saturn.core.Util.debug("Message!!!!!");
			var cb = _g.getCb(data);
			if(cb != null) {
				if(data == null) cb(null,"Invalid, empty response from server"); else cb(data,data.error);
			} else window.console.log("Untracked message recieved " + msg);
		});
	}
	,registerListener: function(msg,cb) {
		var _g = this;
		if(!this.listeners.exists(msg)) {
			this.theSocket.on(msg,function(data) {
				if(_g.listenersRegistered(msg)) _g.notifyListeners(msg,data);
			});
			var value = [];
			this.listeners.set(msg,value);
		}
		this.listeners.get(msg).push(cb);
	}
	,removeListener: function(msg,cb) {
		if(this.listeners.exists(msg)) {
			var _this = this.listeners.get(msg);
			var x = cb;
			HxOverrides.remove(_this,x);
		}
	}
	,listenersRegistered: function(msg) {
		return this.listeners.exists(msg);
	}
	,notifyListeners: function(msg,data) {
		if(this.listeners.exists(msg)) {
			var _g = 0;
			var _g1 = this.listeners.get(msg);
			while(_g < _g1.length) {
				var cb = _g1[_g];
				++_g;
				cb(data);
			}
		}
	}
	,sendRequest: function(msg,json,cb) {
		var msgId = Std.string(this.nextMsgId++);
		json.msgId = msgId;
		this.cbsAwaitingResponse.set(msgId,cb);
		var value = { 'MSG' : msg, 'JSON' : json, 'START_TIME' : Date.now()};
		this.msgIdToJobInfo.set(msgId,value);
		this.msgIds.unshift(msgId);
		this.theSocket.emit(msg,json);
		var _g = 0;
		var _g1 = this.updateListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener();
		}
		return msgId;
	}
	,printQueryTimes: function() {
		var $it0 = this.msgIdToJobInfo.keys();
		while( $it0.hasNext() ) {
			var msgId = $it0.next();
			if(Reflect.hasField(this.msgIdToJobInfo.get(msgId),"END_TIME")) {
				saturn.core.Util.debug(">" + msgId + "\t\t" + Std.string(this.msgIdToJobInfo.get(msgId).msg) + "\t\t" + (this.msgIdToJobInfo.get(msgId).END_TIME - this.msgIdToJobInfo.get(msgId).START_TIME) / 1000);
				saturn.core.Util.debug(this.msgIdToJobInfo.get(msgId).JSON);
			}
		}
	}
	,getCb: function(data) {
		var msgId = data.msgId;
		if(this.cbsAwaitingResponse.exists(msgId)) {
			var cb = this.cbsAwaitingResponse.get(msgId);
			this.cbsAwaitingResponse.remove(msgId);
			if(!this.keepProgress) {
				this.msgIdToJobInfo.remove(msgId);
				HxOverrides.remove(this.msgIds,msgId);
			} else Reflect.setField(this.msgIdToJobInfo.get(msgId),"END_TIME",Date.now());
			var _g = 0;
			var _g1 = this.updateListeners;
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener();
			}
			return cb;
		} else return null;
	}
	,requestNodeMsgId: function(cb) {
		this.cbsAwaitingIds.push(cb);
		this.theSocket.emit("sendMsgId",{ });
	}
	,debug: function(message) {
		this.debugLogger(message);
	}
	,onProviderUp: function(cb) {
		this.providerUpListener = cb;
	}
	,providerUp: function() {
		if(this.providerUpListener != null) {
			var a = this.providerUpListener;
			this.providerUpListener = null;
			a();
		}
	}
	,__class__: saturn.client.core.ClientCore
};
if(!saturn.core) saturn.core = {};
if(!saturn.core.annotations) saturn.core.annotations = {};
saturn.core.annotations.AnnotationManager = $hxClasses["saturn.core.annotations.AnnotationManager"] = function() {
	this.annotationSuppliers = new haxe.ds.StringMap();
};
saturn.core.annotations.AnnotationManager.__name__ = ["saturn","core","annotations","AnnotationManager"];
saturn.core.annotations.AnnotationManager.prototype = {
	annotationSuppliers: null
	,annotateSequence: function(sequence,name,annotationName,config,cb) {
		if(this.annotationSuppliers.exists(annotationName)) this.annotationSuppliers.get(annotationName).annotate(sequence,name,annotationName,config,cb);
	}
	,annotateMolecule: function(molecule,annotationName,config,cb) {
		if(this.annotationSuppliers.exists(annotationName)) this.annotationSuppliers.get(annotationName).annotateMolecule(molecule,annotationName,config,cb);
	}
	,registerAnnotationSupplier: function($as,annotationName) {
		this.annotationSuppliers.set(annotationName,$as);
	}
	,__class__: saturn.core.annotations.AnnotationManager
};
saturn.client.core.CommonCore = $hxClasses["saturn.client.core.CommonCore"] = function() { };
saturn.client.core.CommonCore.__name__ = ["saturn","client","core","CommonCore"];
saturn.client.core.CommonCore.DEFAULT_POOL_NAME = null;
saturn.client.core.CommonCore.setDefaultProvider = function(provider,name,defaultProvider) {
	if(name == null) name = "DEFAULT";
	saturn.client.core.CommonCore.providers.set(name,provider);
	if(defaultProvider) saturn.client.core.CommonCore.DEFAULT_POOL_NAME = name;
};
saturn.client.core.CommonCore.getAnnotationManager = function() {
	return saturn.client.core.CommonCore.annotationManager;
};
saturn.client.core.CommonCore.closeProviders = function() {
	var $it0 = saturn.client.core.CommonCore.providers.keys();
	while( $it0.hasNext() ) {
		var name = $it0.next();
		saturn.client.core.CommonCore.providers.get(name)._closeConnection();
	}
};
saturn.client.core.CommonCore.getStringError = function(error) {
	var dwin = window;
	dwin.error = error;
	return error;
};
saturn.client.core.CommonCore.getCombinedModels = function() {
	if(saturn.client.core.CommonCore.combinedModels == null) {
		saturn.client.core.CommonCore.combinedModels = new haxe.ds.StringMap();
		var _g = 0;
		var _g1 = saturn.client.core.CommonCore.getProviderNames();
		while(_g < _g1.length) {
			var name = _g1[_g];
			++_g;
			var models = saturn.client.core.CommonCore.getDefaultProvider(null,name).getModels();
			var $it0 = models.keys();
			while( $it0.hasNext() ) {
				var key = $it0.next();
				var value;
				value = __map_reserved[key] != null?models.getReserved(key):models.h[key];
				saturn.client.core.CommonCore.combinedModels.set(key,value);
			}
		}
	}
	return saturn.client.core.CommonCore.combinedModels;
};
saturn.client.core.CommonCore.getProviderNameForModel = function(name) {
	var models = saturn.client.core.CommonCore.getCombinedModels();
	if(__map_reserved[name] != null?models.existsReserved(name):models.h.hasOwnProperty(name)) {
		if((__map_reserved[name] != null?models.getReserved(name):models.h[name]).exists("provider_name")) return (__map_reserved[name] != null?models.getReserved(name):models.h[name]).get("provider_name"); else return null;
	} else return null;
};
saturn.client.core.CommonCore.getProviderForNamedQuery = function(name) {
	var $it0 = saturn.client.core.CommonCore.providers.keys();
	while( $it0.hasNext() ) {
		var providerName = $it0.next();
		var provider = saturn.client.core.CommonCore.providers.get(providerName);
		var config = provider.getConfig();
		if(Object.prototype.hasOwnProperty.call(config,"named_queries")) {
			if(Reflect.hasField(Reflect.field(config,"named_queries"),name)) return providerName;
		}
	}
	return null;
};
saturn.client.core.CommonCore.getDefaultProvider = function(cb,name) {
	if(name == null) name = saturn.client.core.CommonCore.getDefaultProviderName();
	if(saturn.client.core.CommonCore.providers.exists(name)) {
		if(cb != null) cb(null,saturn.client.core.CommonCore.providers.get(name));
		return saturn.client.core.CommonCore.providers.get(name);
	} else if(name != null) {
		saturn.client.core.CommonCore.getResource(name,cb);
		return -1;
	}
	return null;
};
saturn.client.core.CommonCore.getProviderNames = function() {
	var names = [];
	var $it0 = saturn.client.core.CommonCore.providers.keys();
	while( $it0.hasNext() ) {
		var name = $it0.next();
		names.push(name);
	}
	var $it1 = saturn.client.core.CommonCore.pools.keys();
	while( $it1.hasNext() ) {
		var name1 = $it1.next();
		names.push(name1);
	}
	return names;
};
saturn.client.core.CommonCore.getFileExtension = function(fileName) {
	var r = new EReg("\\.(\\w+)","");
	r.match(fileName);
	return r.matched(1);
};
saturn.client.core.CommonCore.getBinaryFileAsArrayBuffer = function(file) {
	var fileReader = new FileReader();
	return fileReader.readAsArrayBuffer(file);
};
saturn.client.core.CommonCore.convertArrayBufferToBase64 = function(buffer) {
	var binary = "";
	var bytes = new Uint8Array(buffer);
	var len = bytes.byteLength;
	var _g = 0;
	while(_g < len) {
		var i = _g++;
		binary += String.fromCharCode(bytes[i]);
	}
	return window.btoa(binary);
};
saturn.client.core.CommonCore.getFileAsText = function(file,cb) {
	if(js.Boot.__instanceof(file,saturn.core.FileShim)) cb(file.getAsText()); else if(Object.prototype.hasOwnProperty.call(file,"_data")) cb(file.asText()); else {
		var fileReader = new FileReader();
		fileReader.onload = function(e) {
			cb(e.target.result);
		};
		fileReader.readAsText(file);
	}
};
saturn.client.core.CommonCore.getFileInChunks = function(file,chunkSize,cb) {
	var offset = 0;
	var fileSize = file.size;
	var chunker = null;
	chunker = function() {
		var reader = new FileReader();
		reader.readAsDataURL(file.slice(offset,offset + chunkSize));
		reader.onloadend = function(event) {
			if(event.target.error == null) cb(null,reader.result.split(",")[1],function() {
				offset += chunkSize;
				if(offset >= fileSize) cb(null,null,null); else chunker();
			}); else cb(event.target.error,null,null);
		};
	};
	chunker();
};
saturn.client.core.CommonCore.getFileAsArrayBuffer = function(file,cb) {
	if(js.Boot.__instanceof(file,saturn.core.FileShim)) cb(file.getAsArrayBuffer()); else if(Object.prototype.hasOwnProperty.call(file,"_data")) cb(file.asUint8Array()); else {
		var fileReader = new FileReader();
		fileReader.onload = function(e) {
			cb(e.target.result);
		};
		fileReader.readAsArrayBuffer(file);
	}
};
saturn.client.core.CommonCore.setPool = function(poolName,pool,isDefault) {
	if(poolName == null) poolName = "DEFAULT";
	saturn.client.core.CommonCore.pools.set(poolName,pool);
	if(isDefault) saturn.client.core.CommonCore.DEFAULT_POOL_NAME = poolName;
};
saturn.client.core.CommonCore.getPool = function(poolName) {
	if(poolName == null) poolName = "DEFAULT";
	if(saturn.client.core.CommonCore.pools.exists(poolName)) return saturn.client.core.CommonCore.pools.get(poolName); else return null;
};
saturn.client.core.CommonCore.getResource = function(poolName,cb) {
	if(poolName == null) poolName = "DEFAULT";
	var pool = saturn.client.core.CommonCore.getPool(poolName);
	if(pool != null) pool.acquire(function(err,resource) {
		if(err == null) saturn.client.core.CommonCore.resourceToPool.set(resource,poolName);
		cb(err,resource);
	}); else cb("Invalid pool name",null);
};
saturn.client.core.CommonCore.releaseResource = function(resource) {
	if(saturn.client.core.CommonCore.resourceToPool.exists(resource)) {
		var poolName = saturn.client.core.CommonCore.resourceToPool.get(resource);
		if(saturn.client.core.CommonCore.pools.exists(poolName)) {
			var pool = saturn.client.core.CommonCore.pools.get(poolName);
			pool.release(resource);
			return -3;
		} else return -2;
	} else return -1;
};
saturn.client.core.CommonCore.makeFullyQualified = function(path) {
	var location = window.location;
	return location.protocol + "//" + location.hostname + ":" + location.port + "/" + path;
};
saturn.client.core.CommonCore.getContent = function(url,onSuccess,onFailure) {
	if(onFailure == null) onFailure = function(err) {
		saturn.client.WorkspaceApplication.getApplication().showMessage("Error retrieving resource",url);
	};
	Ext.Ajax.request({ url : url, success : function(response,opts) {
		onSuccess(response.responseText);
	}, failure : function(response1,opts1) {
		onFailure(response1);
	}});
};
saturn.client.core.CommonCore.getDefaultProviderName = function() {
	return saturn.client.core.CommonCore.DEFAULT_POOL_NAME;
};
if(!saturn.client.workspace) saturn.client.workspace = {};
saturn.client.workspace.WorkspaceListener = $hxClasses["saturn.client.workspace.WorkspaceListener"] = function() { };
saturn.client.workspace.WorkspaceListener.__name__ = ["saturn","client","workspace","WorkspaceListener"];
saturn.client.workspace.WorkspaceListener.prototype = {
	objectAdded: null
	,objectRemoved: null
	,objectRenamed: null
	,__class__: saturn.client.workspace.WorkspaceListener
};
if(!saturn.client.programs) saturn.client.programs = {};
saturn.client.programs.SimpleExtJSProgram = $hxClasses["saturn.client.programs.SimpleExtJSProgram"] = function() {
	this.autoConfigureOutline = false;
	this.nextObjectValue = 0;
	saturn.client.BaseProgram.call(this);
};
saturn.client.programs.SimpleExtJSProgram.__name__ = ["saturn","client","programs","SimpleExtJSProgram"];
saturn.client.programs.SimpleExtJSProgram.__interfaces__ = [saturn.client.workspace.WorkspaceListener,saturn.client.BuildingBlock];
saturn.client.programs.SimpleExtJSProgram.__super__ = saturn.client.BaseProgram;
saturn.client.programs.SimpleExtJSProgram.prototype = $extend(saturn.client.BaseProgram.prototype,{
	folderToDropClass: null
	,folderToAllowMany: null
	,folderToObjects: null
	,objectToFolder: null
	,nextObjectValue: null
	,mouseDown: null
	,inMouseMove: null
	,autoConfigureOutline: null
	,groupToTreeItem: null
	,saveButton: null
	,deleteButton: null
	,getDOMComponent: function() {
		return this.getComponent().el.dom;
	}
	,emptyInit: function() {
		this.folderToDropClass = new haxe.ds.StringMap();
		this.folderToAllowMany = new haxe.ds.StringMap();
		this.folderToObjects = new haxe.ds.StringMap();
		this.objectToFolder = new haxe.ds.StringMap();
		this.groupToTreeItem = new haxe.ds.StringMap();
		saturn.client.BaseProgram.prototype.emptyInit.call(this);
		this.getWorkspace().addListener(this);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.BaseProgram.prototype.onFocus.call(this);
		this.getApplication().enableProgramSearchField(false);
		this.getApplication().setProgramSearchFieldEmptyText("");
		this.installWindowListeners(window);
		this.restoreDropFolders();
		this.saveButton = this.getApplication().getToolBar().add({ iconCls : "x-btn-save", text : "Save", handler : function() {
			_g.saveObjectGUI();
		}});
		this.deleteButton = this.getApplication().getToolBar().add({ iconCls : "x-btn-delete", text : "Delete", handler : function() {
			_g.deleteObjectGUI();
		}});
	}
	,onBlur: function() {
		saturn.client.BaseProgram.prototype.onBlur.call(this);
		this.uninstallWindowListeners(window);
		this.getApplication().setInformationPanelText("",false);
		this.getApplication().setCentralInfoPanelText("");
	}
	,getComponent: function() {
		return null;
	}
	,postRender: function() {
		this.initialiseDOMComponent();
	}
	,getCentralPanelLayout: function() {
		return "border";
	}
	,initialiseDOMComponent: function() {
		this.initialiseDragAndDrop();
	}
	,initialiseDragAndDrop: function() {
		var elem = this.getDOMComponent();
		var self = this;
		elem.onmousemove = function() {
			if(self.mouseDown == true) {
				self.inMouseMove = true;
				self.selectionUpdated();
			}
		};
		elem.addEventListener("dragenter",function(e) {
			e.preventDefault();
			elem.style.backgroundColor = "rgba(168,168,168,0.5) ";
			return false;
		});
		elem.addEventListener("dragexit",function(e1) {
			e1.preventDefault();
			elem.style.backgroundColor = "green";
			return false;
		});
		elem.addEventListener("dragover",function(e2) {
			e2.preventDefault();
			return false;
		});
		elem.addEventListener("dragleave",function(e3) {
			e3.preventDefault();
			elem.style.backgroundColor = "white";
			return false;
		});
		elem.addEventListener("drop",function(e4) {
			e4.preventDefault();
			var file = e4.dataTransfer.files[0];
			self.openFile(file,false);
			elem.style.backgroundColor = "white";
			return false;
		});
	}
	,setActiveObject: function(objectId) {
		saturn.client.BaseProgram.prototype.setActiveObject.call(this,objectId);
		if(!this.delayedActivation) this.restoreDropFolders();
	}
	,postRestore: function() {
		saturn.client.BaseProgram.prototype.postRestore.call(this);
		this.restoreDropFolders();
	}
	,printInfo: function(message) {
		this.getApplication().printInfo(message);
	}
	,isNaked: function() {
		return this.getApplication().isNaked();
	}
	,printStackTrace: function() {
		var error = new Error();
		this.printInfo(error.stack);
	}
	,objectRenamed: function(object) {
		var progObj = this.getState();
		var refs = progObj.getMatchingReferences(object.getUUID());
		var _g = 0;
		while(_g < refs.length) {
			var ref = refs[_g];
			++_g;
			var node = this.getApplication().getOutlineDataStore("DEFAULT").getRootNode().findChild("objectId",ref,true);
			if(node != null) {
				node.set("text",object.getName());
				node.commit();
			}
		}
	}
	,objectAdded: function(object) {
	}
	,objectRemoved: function(object) {
		this.removeObjectFromOutline(object.getUUID());
	}
	,registerDropFolder: function(folderName,acceptClazz,allowMany) {
		this.folderToDropClass.set(folderName,acceptClazz);
		this.folderToAllowMany.set(folderName,allowMany);
		var value = [];
		this.folderToObjects.set(folderName,value);
		this.autoConfigureOutline = true;
	}
	,restoreDropFolders: function() {
		if(this.autoConfigureOutline) {
			this.getApplication().installOutlineTree("DEFAULT",true,false,"WorkspaceObject");
			Ext.suspendLayouts();
			var $it0 = this.folderToObjects.keys();
			while( $it0.hasNext() ) {
				var folderName = $it0.next();
				this.restoreDropFolder(folderName);
			}
			Ext.resumeLayouts(true);
		}
	}
	,restoreDropFolder: function(folderName) {
		var _g = this;
		var app = this.getApplication();
		var dataStore = app.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var workspaceFolder = rootNode.appendChild({ text : folderName, leaf : false, expanded : true, id : "_folder_" + folderName});
		var value = workspaceFolder;
		this.groupToTreeItem.set(folderName,value);
		var obj = this.getState();
		if(obj != null) {
			var _g1 = 0;
			var _g11 = obj.getReferences(folderName);
			while(_g1 < _g11.length) {
				var objectId = _g11[_g1];
				++_g1;
				var object = app.getWorkspace()._getObject(objectId);
				workspaceFolder.appendChild(Ext.create("WorkspaceObject",{ text : object.getName(), leaf : true, objectId : objectId, id : objectId, icon : object.getIconPath()}));
			}
			this.getApplication().getOutlineTree("DEFAULT").on("itemcontextmenu",$bind(this,this.showTreeContextMenu),this);
			this.getApplication().getOutlineTree("DEFAULT").on("itemclick",function(view,rec,item,index,event) {
				if(event.ctrlKey) _g.showTreeContextMenu(view,rec,item,index,event);
			},this);
		}
	}
	,showTreeContextMenu: function(view,record,item,index,event) {
		var _g = this;
		var objectId = record.get("objectId");
		window.console.log("ID: " + Std.string(record.get("id")));
		if(record.get("id").indexOf("_folder_") == -1) {
			if(objectId != "") {
				var contextMenu = Ext.create("Ext.menu.Menu",{ items : [{ text : "Remove", handler : function() {
					_g.removeObjectFromOutline(objectId);
				}}]});
				contextMenu.showAt(event.getXY());
				event.stopEvent();
			}
		} else {
			var contextMenu1 = Ext.create("Ext.menu.Menu",{ items : [{ text : "Remove All", handler : function() {
				var group = record.get("text");
				var refs = _g.getState().getReferences(group);
				var _g1 = 0;
				while(_g1 < refs.length) {
					var ref = refs[_g1];
					++_g1;
					_g.removeObjectFromOutline(ref);
				}
			}}]});
			contextMenu1.showAt(event.getXY());
			event.stopEvent();
		}
	}
	,registerReference: function(objectId,group) {
		var newId = objectId + "_" + this.getNextObjectId();
		this.objectAddedToOutline(group,newId);
		if(this.groupToTreeItem.exists(group)) this.groupToTreeItem.get(group).appendChild(Ext.create("WorkspaceObject",{ text : this.getWorkspace()._getObject(objectId).getName(), leaf : true, objectId : newId, id : newId}));
	}
	,addWorkspaceDropFolder: function(folderName,object,dropClass,allowMany) {
		var _g = this;
		this.folderToDropClass.set(folderName,dropClass);
		this.folderToAllowMany.set(folderName,allowMany);
		if(!this.folderToObjects.exists(folderName)) {
			var value = [];
			this.folderToObjects.set(folderName,value);
		}
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var workspaceFolder = rootNode.appendChild({ text : folderName, leaf : false, expanded : true, id : folderName});
		if(object != null) {
			var objectId = object.getUUID();
			var pseudoObjectId = objectId + "_" + this.getNextObjectId();
			this.folderToObjects.get(folderName).push(pseudoObjectId);
			workspaceFolder.appendChild(Ext.ModelManager.create({ text : object.getName(), leaf : true, objectId : pseudoObjectId, id : pseudoObjectId},"WorkspaceObject"));
			this.objectAddedToOutline(folderName,pseudoObjectId);
		}
		this.getApplication().getOutlineTree("DEFAULT").on("itemcontextmenu",$bind(this,this.showTreeContextMenu),this);
		this.getApplication().getOutlineTree("DEFAULT").on("itemclick",function(view,rec,item,index,event) {
			if(event.ctrlKey) _g.showTreeContextMenu(view,rec,item,index,event);
		},this);
	}
	,close: function() {
		saturn.client.BaseProgram.prototype.close.call(this);
		this.getWorkspace().removeListener(this);
		var _g = 0;
		var _g1 = this.plugins;
		while(_g < _g1.length) {
			var plugin = _g1[_g];
			++_g;
			plugin.destroy();
		}
		this.getComponent().parentBuildingBlock = null;
	}
	,objectAddedToOutline: function(dropFolder,objectId) {
		var state = this.getState();
		state.addReference(dropFolder,objectId);
	}
	,hasReference: function(dropFolder,objectId) {
		var state = this.getState();
		return state.hasReference(dropFolder,objectId);
	}
	,removeObjectFromOutline: function(objectId) {
		var state = this.getState();
		if(state != null) {
			var removed = state.removeReferences(objectId);
			var _g = 0;
			while(_g < removed.length) {
				var objectId1 = removed[_g];
				++_g;
				var node = this.getApplication().getOutlineDataStore("DEFAULT").getRootNode().findChild("objectId",objectId1,true);
				if(node != null) node.parentNode.removeChild(node);
			}
		}
	}
	,workspaceObjectUpdated: function() {
	}
	,onOutlineDrop: function(node,data,overModel,dropPosition,dropHandlers,eOpts) {
		var objectId = data.records[0].get("objectId");
		var dropFolder = overModel.data.id;
		dropFolder = StringTools.replace(dropFolder,"_folder_","");
		if(data.records[0].get("type") == "folder") {
			var nodes = [];
			var childIds = this.getWorkspace().getObjectIdsBelow(data.records[0]);
			var count = 0;
			var _g = 0;
			while(_g < childIds.length) {
				var childId = childIds[_g];
				++_g;
				if(!this.hasReference(dropFolder,childId)) {
					var wo = this.getWorkspace().getObject(childId);
					if(this.folderToDropClass.get(dropFolder) == null || Std["is"](wo,this.folderToDropClass.get(dropFolder))) {
						var childNode = this.getWorkspace().findNode(childId);
						if(childNode != null) {
							var copy = childNode.copy();
							var pseudoObjectId = childId + "_" + this.getNextObjectId();
							copy.set("id",pseudoObjectId);
							copy.set("objectId",pseudoObjectId);
							nodes.unshift(copy);
							this.objectAddedToOutline(dropFolder,pseudoObjectId);
							count += 1;
						}
					}
				}
			}
			if(count > 0) {
				data.records = nodes;
				return true;
			}
		} else if(this.folderToDropClass.exists(dropFolder)) {
			var wo1 = this.getWorkspace().getObject(objectId);
			if(this.folderToDropClass.get(dropFolder) == null || Std["is"](wo1,this.folderToDropClass.get(dropFolder))) {
				var match = this.hasReference(dropFolder,objectId);
				if(!match) {
					var pseudoObjectId1 = objectId + "_" + this.getNextObjectId();
					data.records[0] = data.records[0].copy();
					data.records[0].data.id = pseudoObjectId1;
					data.records[0].data.objectId = pseudoObjectId1;
					this.objectAddedToOutline(dropFolder,pseudoObjectId1);
					return true;
				}
			}
		}
		dropHandlers.cancelDrop();
		return false;
	}
	,getNextObjectId: function() {
		var oldValue = this.nextObjectValue;
		this.nextObjectValue = this.nextObjectValue + 1;
		return oldValue;
	}
	,setTitle: function(title) {
		this.getComponent().setTitle(title);
	}
	,registerAllFromWorkspace: function(clazz,group) {
		var workspace = this.getWorkspace();
		var objs = workspace.getAllObjects(clazz);
		if(clazz == saturn.client.workspace.DNAWorkspaceObject) {
			var objs2 = workspace.getAllObjects(saturn.core.DNA);
			if(objs2 != null) {
				var _g = 0;
				while(_g < objs2.length) {
					var obj = objs2[_g];
					++_g;
					objs.push(obj);
				}
			}
		}
		if(clazz == saturn.client.workspace.ProteinWorkspaceObject) {
			var objs21 = workspace.getAllObjects(saturn.core.Protein);
			if(objs21 != null) {
				var _g1 = 0;
				while(_g1 < objs21.length) {
					var obj1 = objs21[_g1];
					++_g1;
					objs.push(obj1);
				}
			}
		}
		saturn.client.WorkspaceApplication.suspendUpdates();
		var _g2 = 0;
		while(_g2 < objs.length) {
			var obj2 = objs[_g2];
			++_g2;
			var objectId = obj2.getUUID();
			this.registerReference(objectId,group);
		}
		saturn.client.WorkspaceApplication.resumeUpdates(true);
	}
	,addModelToOutline: function(obj,clearAll,folderName) {
		var dataStore = this.getApplication().getOutlineDataStore("MODELS");
		if(dataStore == null) return;
		var rootNode = dataStore.getRootNode();
		if(clearAll) rootNode.removeAll();
		Ext.suspendLayouts();
		var model = this.getProvider().getModel(Type.getClass(obj));
		var busKey = model.getFirstKey();
		if(folderName == null) folderName = Reflect.field(obj,busKey);
		var fields = model.getUserFieldDefinitions();
		if(fields == null) return;
		var workspaceFolder = rootNode.appendChild({ folder : folderName, leaf : false, expanded : true, id : "_folder_" + folderName});
		var _g = 0;
		while(_g < fields.length) {
			var field = fields[_g];
			++_g;
			var nodeName = field.name;
			if(nodeName == "__HIDDEN__PKEY__") continue;
			var modelField = field.field;
			var value = saturn.db.Model.extractField(obj,modelField);
			if(value == null) value = "";
			if(js.Boot.__instanceof(value,Date)) value = Std.string(value.getDate()) + "/" + Std.string(value.getMonth()) + "/" + Std.string(value.getFullYear());
			var name = value;
			workspaceFolder.appendChild({ folder : nodeName, text : name, id : name + "," + folderName, leaf : true});
		}
		Ext.resumeLayouts(false);
	}
	,debug: function(msg) {
		this.getApplication().debug(msg);
	}
	,setSaveVisible: function(visible) {
		this.saveButton.setVisible(visible);
		this.deleteButton.setVisible(visible);
		if(visible) {
			this.getApplication().installOutlineTree("MODELS",true,false,"WorkspaceObject","GRID");
			var obj = this.getEntity();
			var model = this.getProvider().getModel(Type.getClass(obj));
			var syntheticFields = model.getSynthenticFields();
			if(syntheticFields != null) {
				var $it0 = syntheticFields.keys();
				while( $it0.hasNext() ) {
					var syntheticField = $it0.next();
					if((__map_reserved[syntheticField] != null?syntheticFields.getReserved(syntheticField):syntheticFields.h[syntheticField]).get("fk_field") == null) {
						var field = (__map_reserved[syntheticField] != null?syntheticFields.getReserved(syntheticField):syntheticFields.h[syntheticField]).get("field");
						var syn_obj = Reflect.field(obj,syntheticField);
						if(syn_obj != null) {
							var program = this.getWorkspace().getProgramForObject(syn_obj.uuid);
							if(program != null) Reflect.setField(obj,field,syn_obj.getValue());
						}
					}
				}
			}
			this.addModelToOutline(obj,true);
		}
	}
	,__class__: saturn.client.programs.SimpleExtJSProgram
});
saturn.client.workspace.WorkspaceObject = $hxClasses["saturn.client.workspace.WorkspaceObject"] = function() { };
saturn.client.workspace.WorkspaceObject.__name__ = ["saturn","client","workspace","WorkspaceObject"];
saturn.client.workspace.WorkspaceObject.prototype = {
	getName: null
	,setName: null
	,getUUID: null
	,setUUID: null
	,getObject: null
	,setObject: null
	,toJSON: null
	,isHidden: null
	,hide: null
	,serialise: null
	,deserialise: null
	,clone: null
	,getDocId: null
	,setDocId: null
	,setDomainObj: null
	,getDomainObj: null
	,addReference: null
	,getReferences: null
	,hasReference: null
	,removeReferences: null
	,getMatchingReferences: null
	,getIconPath: null
	,setIconPath: null
	,__class__: saturn.client.workspace.WorkspaceObject
};
saturn.client.workspace.WorkspaceObjectBase = $hxClasses["saturn.client.workspace.WorkspaceObjectBase"] = function(object,name) {
	this.object = object;
	this.name = name;
	this.objectMap = new haxe.ds.StringMap();
};
saturn.client.workspace.WorkspaceObjectBase.__name__ = ["saturn","client","workspace","WorkspaceObjectBase"];
saturn.client.workspace.WorkspaceObjectBase.__interfaces__ = [saturn.client.workspace.WorkspaceObject];
saturn.client.workspace.WorkspaceObjectBase.prototype = {
	uuid: null
	,name: null
	,object: null
	,hidden: null
	,docId: null
	,iconPath: null
	,fileImportExtensions: null
	,domainObj: null
	,objectMap: null
	,getIconPath: function() {
		return this.iconPath;
	}
	,setIconPath: function(iconPath) {
		this.iconPath = iconPath;
	}
	,setDomainObj: function(obj) {
		this.domainObj = obj;
	}
	,getDomainObj: function() {
		return this.domainObj;
	}
	,clone: function() {
		var cloneData = this.serialise();
		var unserObj = haxe.Unserializer.run(cloneData);
		unserObj.setUUID(null);
		return unserObj;
	}
	,setDocId: function(docId) {
		this.docId = docId;
	}
	,getDocId: function() {
		return this.docId;
	}
	,serialise: function() {
		return haxe.Serializer.run(this);
	}
	,deserialise: function(object) {
		this.setName(object.NAME);
		this.setUUID(object.UUID);
		this.hide(object.HIDDEN);
		this.setIconPath(object.iconPath);
	}
	,setName: function(name) {
		this.name = name;
	}
	,getName: function() {
		return this.name;
	}
	,getUUID: function() {
		return this.uuid;
	}
	,setUUID: function(uuid) {
		this.uuid = uuid;
	}
	,getObject: function() {
		return this.object;
	}
	,setObject: function(object) {
		this.object = object;
	}
	,toJSON: function() {
		return "";
	}
	,isHidden: function() {
		return this.hidden;
	}
	,hide: function(hide) {
		this.hidden = hide;
	}
	,addReference: function(group,objectId) {
		if(!this.objectMap.exists(group)) {
			var value = [];
			this.objectMap.set(group,value);
		}
		this.objectMap.get(group).push(objectId);
	}
	,getReferences: function(group) {
		var refs = [];
		if(this.objectMap.exists(group)) {
			var _g = 0;
			var _g1 = this.objectMap.get(group);
			while(_g < _g1.length) {
				var objectId = _g1[_g];
				++_g;
				refs.push(objectId);
			}
		}
		return refs;
	}
	,hasReference: function(group,objectId) {
		var match = false;
		if(this.objectMap.exists(group)) {
			var _g = 0;
			var _g1 = this.objectMap.get(group);
			while(_g < _g1.length) {
				var id = _g1[_g];
				++_g;
				var cId = saturn.client.workspace.Workspace.convertId(id);
				if(cId == objectId) {
					match = true;
					break;
				}
			}
		}
		return match;
	}
	,removeReferences: function(referenceId) {
		var removed = [];
		var $it0 = this.objectMap.keys();
		while( $it0.hasNext() ) {
			var group = $it0.next();
			var _g = 0;
			var _g1 = this.objectMap.get(group);
			while(_g < _g1.length) {
				var objectId = _g1[_g];
				++_g;
				if(referenceId == objectId || saturn.client.workspace.Workspace.convertId(objectId) == referenceId) {
					var _this = this.objectMap.get(group);
					HxOverrides.remove(_this,objectId);
					removed.push(objectId);
				}
			}
		}
		return removed;
	}
	,getMatchingReferences: function(referenceId) {
		var refs = [];
		var $it0 = this.objectMap.keys();
		while( $it0.hasNext() ) {
			var group = $it0.next();
			var _g = 0;
			var _g1 = this.objectMap.get(group);
			while(_g < _g1.length) {
				var objectId = _g1[_g];
				++_g;
				if(referenceId == objectId || saturn.client.workspace.Workspace.convertId(objectId) == referenceId) refs.push(objectId);
			}
		}
		return refs;
	}
	,__class__: saturn.client.workspace.WorkspaceObjectBase
};
saturn.client.workspace.ABITraceWO = $hxClasses["saturn.client.workspace.ABITraceWO"] = function(object,name) {
	this.blastDBtoHitName = new haxe.ds.StringMap();
	this.blastResultMap = new haxe.ds.StringMap();
	this.previousTraces = [];
	if(object == null) object = new saturn.core.domain.ABITrace();
	if(name == null) name = "ABI Trace";
	this.iconPath = "/static/js/images/trace_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.ABITraceWO.__name__ = ["saturn","client","workspace","ABITraceWO"];
saturn.client.workspace.ABITraceWO.getDefaultFolderName = function() {
	return "Traces";
};
saturn.client.workspace.ABITraceWO.getNewMenuText = function() {
	return "ABI Trace";
};
saturn.client.workspace.ABITraceWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.ABITraceWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	previousTraces: null
	,blastResultMap: null
	,blastDBtoHitName: null
	,trim: function(start,stop) {
		this.previousTraces.push(this.object);
		this.object = this.object.trim(start,stop);
		return this.object;
	}
	,untrim: function() {
		if(this.previousTraces.length > 0) {
			this.object = this.previousTraces.pop();
			return this.object;
		} else return null;
	}
	,getLastTrace: function() {
		return this.previousTraces[this.previousTraces.length - 1];
	}
	,align: function(aln,isForwards) {
		this.previousTraces.push(this.object);
		this.object = this.object.align(aln,isForwards);
		return this.object;
	}
	,deserialise: function(object) {
		saturn.client.workspace.WorkspaceObjectBase.prototype.deserialise.call(this,object);
		this.setObject(haxe.Unserializer.run(object.DATA.TRACE_DATA));
	}
	,__class__: saturn.client.workspace.ABITraceWO
});
saturn.client.programs.ABITraceViewer = $hxClasses["saturn.client.programs.ABITraceViewer"] = function() {
	this.svgMode = false;
	this.theLastXPosition = 0;
	this.theViewPortXUnits = 0;
	this.theBlastResultLmit = 10;
	this.traceWO = null;
	this.theTrimMenuItem = null;
	this.theUndoTrimMenuItem = null;
	this.lineX2RealPosition = -1;
	this.lineX1RealPosition = -1;
	this.theDNAWOIC = null;
	this.theDNAWO = null;
	this.overlayCanvas = null;
	this.scrollCanvas = null;
	this.graphCanvas = null;
	this.up = false;
	this.theChannels = ["CH1","CH2","CH3","CH4"];
	this.theMaxIntensity = -1;
	this.lastPosition = 0;
	this.drawingWidth = -1;
	this.drawingHeight = -1;
	this.canvasElements = [];
	this.maximumCanvasWidth = 30000;
	this.defaultDrawingHeight = 300;
	this.defaultReadingSeparation = 2;
	this.pageUrl = "";
	this.internalFrameId = "INTERNAL_FRAME";
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.ABITraceViewer.__name__ = ["saturn","client","programs","ABITraceViewer"];
saturn.client.programs.ABITraceViewer.processABIFile = function(base64,load,cb,fileName) {
	saturn.client.BioinformaticsServicesClient.getClient().sendABIReportRequest(base64,function(data,error) {
		var json = JSON.parse(data.json);
		var obj = new saturn.core.domain.ABITrace();
		obj.setData(json);
		var wo = new saturn.client.workspace.ABITraceWO(obj,fileName);
		saturn.client.WorkspaceApplication.getApplication().getWorkspace()._addObject(wo,load,true);
	});
};
saturn.client.programs.ABITraceViewer.parseFile = function(file,cb,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	var extension = saturn.client.core.CommonCore.getFileExtension(file.name);
	if(extension == "ab1") saturn.client.core.CommonCore.getFileAsArrayBuffer(file,function(content) {
		var base64 = saturn.client.core.CommonCore.convertArrayBufferToBase64(content);
		saturn.client.programs.ABITraceViewer.processABIFile(base64,asNewOpenProgram,cb,file.name);
	}); else if(extension == "fasta") saturn.client.core.CommonCore.getFileAsText(file,function(contents) {
		if(contents != null) cb(contents);
	});
};
saturn.client.programs.ABITraceViewer.getNormalisedEvent = function(e) {
	var normalisedEvent = { offsetX : 0., offsetY : 0.};
	if(e == null) e = new Event("");
	var target;
	if(e.target) target = e.target; else target = e.srcElement;
	var rect = target.getBoundingClientRect();
	normalisedEvent.offsetX = e.clientX - rect.left;
	normalisedEvent.offsetY = e.clientY - rect.top;
	return normalisedEvent;
};
saturn.client.programs.ABITraceViewer.splineCurve = function(firstPoint_x,firstPoint_y,middlePoint_x,middlePoint_y,afterPoint_x,afterPoint_y,tension) {
	var d01 = Math.sqrt(Math.pow(middlePoint_x - firstPoint_x,2) + Math.pow(middlePoint_y - firstPoint_y,2));
	var d12 = Math.sqrt(Math.pow(afterPoint_x - middlePoint_x,2) + Math.pow(afterPoint_y - middlePoint_y,2));
	var fa = tension * d01 / (d01 + d12);
	var fb = tension * d12 / (d01 + d12);
	return { inner : { x : middlePoint_x - fa * (afterPoint_x - firstPoint_x), y : middlePoint_y - fa * (afterPoint_y - firstPoint_y)}, outer : { x : middlePoint_x + fb * (afterPoint_x - firstPoint_x), y : middlePoint_y + fb * (afterPoint_y - firstPoint_y)}};
};
saturn.client.programs.ABITraceViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-trace", html : "Sequencing<br/>Viewer", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.ABITraceWO(new saturn.core.domain.ABITrace(),"Sequencing"),true);
	}, tooltip : { dismissDelay : 10000, text : "View DNA sequencing traces"}}];
};
saturn.client.programs.ABITraceViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.ABITraceViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,internalFrameId: null
	,pageUrl: null
	,defaultReadingSeparation: null
	,defaultDrawingHeight: null
	,maximumCanvasWidth: null
	,canvasElements: null
	,drawingHeight: null
	,drawingWidth: null
	,lastPosition: null
	,traceData: null
	,theMaxIntensity: null
	,theLeftMargin: null
	,theRightMargin: null
	,theTopMargin: null
	,theBottomMargin: null
	,theXUnitSize: null
	,theYUnitSize: null
	,theGraphWidth: null
	,theGraphHeight: null
	,theTotalWidth: null
	,theChannels: null
	,theYIntervalDivisions: null
	,theReadingsCount: null
	,theLastScrollBarXPos: null
	,theLastScrollBarYPos: null
	,theScrollBarBoxHeight: null
	,theScrollBarBoxWidth: null
	,theStartingXPosition: null
	,up: null
	,graphCanvas: null
	,scrollCanvas: null
	,overlayCanvas: null
	,theSequence: null
	,blastDatabases: null
	,theDNAWO: null
	,theDNAWOIC: null
	,lineX1RealPosition: null
	,lineX2RealPosition: null
	,theUndoTrimMenuItem: null
	,theTrimMenuItem: null
	,traceWO: null
	,theBlastResultLmit: null
	,theViewPortXUnits: null
	,theLastXPosition: null
	,annotationIdToPosition: null
	,svgMode: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		var self = this;
		var items_0 = { region : "center", xtype : "button", text : "Next", handler : function() {
			_g.render(_g.traceData,_g.lastPosition + 1);
		}, style : { display : "block"}};
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "300", autoScroll : false, region : "center", listeners : { 'afterrender' : function() {
			self.initialiseDOMComponent();
		}, 'resize' : function() {
			var a = 10;
			_g.redraw();
		}}, autoEl : { tag : "div", html : ""}, cls : "x-trace-background"});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		this.up = true;
		this.getApplication().getMiddleSouthPanel().addCls("seq-breaking");
		this.redraw();
	}
	,recreateCanvasElements: function() {
		this.removeCanvasElements();
		this.createCanvasElements();
	}
	,redraw: function() {
		this.recreateCanvasElements();
		if(this.traceData != null) this.updateTrace(this.traceData);
	}
	,createCanvasElements: function() {
		var element = this.getDomElement();
		this.graphCanvas = window.document.createElement("canvas");
		var width = element.style.width;
		this.graphCanvas.width = this.getContainerWidth();
		this.graphCanvas.height = 300;
		this.overlayCanvas = window.document.createElement("canvas");
		this.overlayCanvas.width = this.getContainerWidth();
		this.overlayCanvas.height = 300;
		this.overlayCanvas.style.position = "relative";
		this.overlayCanvas.style.top = "-330px";
		this.scrollCanvas = window.document.createElement("canvas");
		this.scrollCanvas.width = this.getContainerWidth();
		this.scrollCanvas.height = 30;
		this.scrollCanvas.style.display = "block";
		element.appendChild(this.graphCanvas);
		element.appendChild(this.scrollCanvas);
		element.appendChild(this.overlayCanvas);
	}
	,removeCanvasElements: function() {
		var element = this.getDomElement();
		if(this.getGraphCanvas() != null) element.removeChild(this.getGraphCanvas());
		if(this.getScrollCanvas() != null) element.removeChild(this.getScrollCanvas());
		if(this.getOverlayCanvas() != null) element.removeChild(this.getOverlayCanvas());
	}
	,getOverlayCanvas: function() {
		return this.overlayCanvas;
	}
	,getGraphCanvas: function() {
		return this.graphCanvas;
	}
	,getScrollCanvas: function() {
		return this.scrollCanvas;
	}
	,getDomElement: function() {
		return this.theComponent.getEl().down("div[id*=innerCt]").dom;
	}
	,getContainerWidth: function() {
		return this.theComponent.getEl().dom.clientWidth;
	}
	,setTitle: function(title) {
		if(this.theComponent.tab != null) this.theComponent.tab.setText(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
		var _g = this;
		saturn.client.programs.ABITraceViewer.parseFile(file,function(contents) {
			var entities = saturn.core.FastaEntity.parseFasta(contents);
			if(entities.length > 0) _g._alignToTrace(entities[0].getSequence());
		});
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.traceWO = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.ABITraceWO) , saturn.client.workspace.ABITraceWO);
		var trace;
		trace = js.Boot.__cast(this.traceWO.getObject() , saturn.core.domain.ABITrace);
		this.traceData = trace;
		if(this.up && this.traceData != null) this.updateTrace(this.traceData);
		this.setTitle(this.traceWO.getName());
		var _g = 0;
		var _g1 = this.blastDatabases;
		while(_g < _g1.length) {
			var blastDatabase = _g1[_g];
			++_g;
			if(!this.traceWO.blastDBtoHitName.exists(blastDatabase)) {
				var value = [];
				this.traceWO.blastDBtoHitName.set(blastDatabase,value);
			}
		}
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var $it0 = this.traceWO.blastDBtoHitName.keys();
		while( $it0.hasNext() ) {
			var blastDatabase1 = $it0.next();
			var node = dataStore.getNodeById(blastDatabase1);
			if(node != null) {
				node.removeAll();
				var _g2 = 0;
				var _g11 = this.traceWO.blastDBtoHitName.get(blastDatabase1);
				while(_g2 < _g11.length) {
					var hit = _g11[_g2];
					++_g2;
					node.appendChild({ text : hit, leaf : true, id : hit, type : "BLAST_HIT"});
				}
			}
		}
	}
	,updateTrace: function(traceData) {
		this.traceData = traceData;
		this.preprocessTrace();
		this.calculateAnnotations();
		if(this.theMaxIntensity == -1) return;
		this.render(traceData);
		this.showSequence();
		this.renderScrollBar();
		this.installScrollBarListeners();
		if(this.traceWO.previousTraces.length > 0) this.theUndoTrimMenuItem.setVisible(true);
	}
	,showSequence: function() {
		var nucs = [];
		var labels = this.traceData.LABELS;
		var _g1 = 0;
		var _g = labels.length;
		while(_g1 < _g) {
			var i = _g1++;
			var label = labels[i];
			if(label != "") nucs.push(label);
		}
		this.getApplication().setInformationPanelText(this.getSequence(),false);
	}
	,onBlur: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onBlur.call(this);
		this.getApplication().setInformationPanelText("",false);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		if(this.traceData != null) this.showSequence();
		var viewMenu = this.getApplication().getViewMenu();
		var blastMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		viewMenu.add({ text : "BLAST", hidden : false, handler : function() {
			_g.blastAll();
		}});
		this.getApplication().getToolBar().add({ html : "BLAST", handler : function() {
			_g.blastAll();
		}, iconCls : "x-btn-blast", tooltip : { dismissDelay : 10000, text : "BLAST trace sequence"}});
		this.theTrimMenuItem = this.getApplication().getEditMenu().add({ text : "Trim", hidden : false, handler : function() {
			_g.trim();
		}});
		this.getApplication().getToolBar().add({ html : "Trim", handler : function() {
			_g.trim();
		}, iconCls : "x-btn-copy", tooltip : { dismissDelay : 10000, text : "Trim trace (click at start and end of region you wish to keep then click trim<br/>Clicking a trim boundary line removes it<br/>"}});
		var hideUndo;
		if(this.traceWO != null && this.traceWO.previousTraces.length > 0) hideUndo = false; else hideUndo = true;
		this.theUndoTrimMenuItem = this.getApplication().getEditMenu().add({ text : "Undo trim / alignment", hidden : hideUndo, handler : function() {
			_g.detrim();
		}});
		this.getApplication().getToolBar().add({ html : "Undo trim / alignment", handler : function() {
			_g.detrim();
		}, iconCls : "x-btn-copy", tooltip : { dismissDelay : 10000, text : "Undo trim or alignment"}});
		this.getApplication().getEditMenu().add({ text : "Import trace sequence", hidden : false, handler : function() {
			_g.importTraceSequence();
		}});
		this.initialiseOutlinePanel();
		this.getApplication().getExportMenu().add({ text : "Trace to PNG", handler : function() {
			_g.getApplication().saveCanvasToFile(_g.getGraphCanvas(),_g.getActiveObjectName() + ".png");
		}});
		this.getApplication().getExportMenu().add({ text : "Trace to SVG", handler : function() {
			_g.exportToSVG();
		}});
		this.getApplication().getToolBar().add({ html : "Export PNG", handler : function() {
			_g.getApplication().saveCanvasToFile(_g.getGraphCanvas(),_g.getActiveObjectName() + ".png");
		}, iconCls : "x-btn-export", tooltip : { dismissDelay : 10000, text : "Export view as PNG"}});
		this.getApplication().getToolBar().add({ html : "Export SVG", handler : function() {
			_g.exportToSVG();
		}, iconCls : "x-btn-export", tooltip : { dismissDelay : 10000, text : "Export view as SVG (better for Illustrator or Inkscape)"}});
	}
	,exportToSVG: function() {
		var width = this.theGraphWidth + this.theLeftMargin;
		var height = this.theGraphHeight + this.theTopMargin + this.theBottomMargin;
		var svgGraphCanvas = new C2S(width,height);
		var originalCanvas = this.graphCanvas;
		this.graphCanvas = svgGraphCanvas;
		this.svgMode = true;
		this.render(this.traceData,this.lastPosition);
		this.svgMode = false;
		this.graphCanvas = originalCanvas;
		var d = svgGraphCanvas;
		saturn.client.WorkspaceApplication.getApplication().saveTextFile(d.getSerializedSvg(true),this.getActiveObjectName() + ".svg");
	}
	,getGraphContext: function() {
		if(this.svgMode) return this.graphCanvas; else return this.graphCanvas.getContext("2d",null);
	}
	,trim: function() {
		if(this.lineX1RealPosition != -1 && this.lineX2RealPosition != -1) {
			this.theUndoTrimMenuItem.setVisible(true);
			var start = Std["int"](Math.min(this.lineX1RealPosition,this.lineX2RealPosition));
			var stop = Std["int"](Math.max(this.lineX1RealPosition,this.lineX2RealPosition));
			this.traceData = this.traceWO.trim(start,stop);
			this.lastPosition = 0;
			this.lineX1RealPosition = -1;
			this.lineX2RealPosition = -1;
			this.redraw();
		} else {
		}
	}
	,detrim: function() {
		if(this.traceWO.previousTraces.length > 0) {
			this.traceData = this.traceWO.untrim();
			this.lastPosition = 0;
			this.lineX1RealPosition = -1;
			this.lineX2RealPosition = -1;
			this.redraw();
			if(this.traceWO.previousTraces.length == 0) this.theUndoTrimMenuItem.setVisible(false);
		}
	}
	,initialiseOutlinePanel: function() {
		var _g = this;
		this.getApplication().installOutlineTree("DEFAULT",true,false,null);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var annotationsNode = rootNode.appendChild({ text : "Annotations", leaf : false, expanded : false, id : "Annotations"});
		var blastResultsNode = rootNode.appendChild({ text : "BLAST Results", leaf : false, expanded : false, id : "BLAST Results"});
		if(this.blastDatabases == null) {
			this.blastDatabases = [];
			var _g1 = 0;
			var _g11 = Reflect.fields(saturn.client.BioinformaticsServicesClient.getClient(null).getBlastList().DNA);
			while(_g1 < _g11.length) {
				var blastDatabase = _g11[_g1];
				++_g1;
				this.blastDatabases.push(blastDatabase);
			}
		}
		var contextMenu1 = function(view,record,item,index,event) {
			var self = _g;
			var id = record.get("id");
			if(_g.traceWO.blastResultMap.exists(id)) {
				var contextMenu = Ext.create("Ext.menu.Menu",{ items : [{ text : "Run Clustal", handler : function() {
					_g.runClustal(id);
				}},{ text : "Align to trace", handler : function() {
					_g.alignToTrace(id);
				}},{ text : "Import", handler : function() {
					_g.importSequence(id);
				}}]});
				contextMenu.showAt(event.getXY());
				event.stopEvent();
			}
		};
		this.getApplication().getOutlineTree("DEFAULT").on("itemclick",function(view1,rec,item1,index1,event1) {
			if(event1.ctrlKey) contextMenu1(view1,rec,item1,index1,event1); else {
				var id1 = rec.get("id");
				if(_g.annotationIdToPosition.exists(id1)) {
					var position = _g.annotationIdToPosition.get(id1);
					position -= _g.theViewPortXUnits / 2 | 0;
					if(position < 0) position = 0;
					_g.lastPosition = position;
					_g.redraw();
				}
			}
		},this);
		this.getApplication().getOutlineTree("DEFAULT").on("itemcontextmenu",contextMenu1,this);
		var _g2 = 0;
		var _g12 = this.blastDatabases;
		while(_g2 < _g12.length) {
			var blastDatabase1 = _g12[_g2];
			++_g2;
			var dbNode = blastResultsNode.appendChild({ text : blastDatabase1, leaf : false, expanded : false, id : blastDatabase1});
		}
		if(this.traceWO != null) {
			saturn.client.WorkspaceApplication.suspendUpdates(true);
			var _g3 = 0;
			var _g13 = this.blastDatabases;
			while(_g3 < _g13.length) {
				var blastDatabase2 = _g13[_g3];
				++_g3;
				var node = dataStore.getNodeById(blastDatabase2);
				var _g21 = 0;
				var _g31 = this.traceWO.blastDBtoHitName.get(blastDatabase2);
				while(_g21 < _g31.length) {
					var item2 = _g31[_g21];
					++_g21;
					node.appendChild({ text : item2, id : item2, leaf : true, type : "BLAST_HIT"});
				}
			}
			blastResultsNode.expand(true);
			saturn.client.WorkspaceApplication.resumeUpdates(true,true);
		} else {
			blastResultsNode.expand(true);
			var _g4 = 0;
			var _g14 = this.blastDatabases;
			while(_g4 < _g14.length) {
				var blastDatabase3 = _g14[_g4];
				++_g4;
				var node1 = dataStore.getNodeById(blastDatabase3);
				node1.expand(true);
			}
		}
		this.calculateAnnotations();
	}
	,alignToTrace: function(sequenceId) {
		var _g = this;
		this.getSequenceFromDatabase(sequenceId,function(sequence,id) {
			_g._alignToTrace(sequence);
		});
	}
	,_alignToTrace: function(sequence) {
		var _g = this;
		var mode = "CLUSTAL";
		if(mode == "LOCAL") {
			var faln = new saturn.core.Alignment(sequence,this.getSequence());
			faln.align();
			var raln = new saturn.core.Alignment(new saturn.core.DNA(sequence).getInverseComplement(),this.getSequence());
			raln.align();
			var isF = faln.getSeqAId() > raln.getSeqAId();
			var newTrace = this.traceWO.align(isF?faln:raln,isF);
			this.updateTrace(newTrace);
		} else this.alignWithClustal(sequence,true,function(msa1) {
			var d = window;
			d.msa1 = msa1;
			_g.alignWithClustal(sequence,false,function(msa2) {
				d.msa2 = msa2;
				var newTrace1 = _g.traceWO.align(msa1.getPSI() > msa2.getPSI()?msa1:msa2,msa1.getPSI() > msa2.getPSI());
				_g.updateTrace(newTrace1);
			});
		});
	}
	,alignWithClustal: function(sequence,forward,cb) {
		if(forward) sequence = sequence; else sequence = new saturn.core.DNA(sequence).getInverseComplement();
		var templateSequence = this.getSequence();
		templateSequence = StringTools.replace(templateSequence,"-","");
		var fasta = ">trace\n" + templateSequence + "\n>template\n" + sequence;
		saturn.client.BioinformaticsServicesClient.getClient().sendClustalReportRequest(fasta,function(response,error) {
			if(error != null) {
			} else {
				var clustalReport = response.json.clustalReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + clustalReport;
				saturn.client.core.CommonCore.getContent(dstURL,function(content) {
					var msa = saturn.core.ClustalOmegaParser.read(content);
					cb(msa);
				});
			}
		});
	}
	,getAlignment: function(sequence,forward) {
		var templateSequence;
		if(forward) templateSequence = this.getSequence(); else templateSequence = new saturn.core.DNA(this.getSequence()).getInverseComplement();
		templateSequence = StringTools.replace(templateSequence,"-","");
		var aln = new saturn.core.Alignment(templateSequence,sequence);
		aln.setAlignmentType(saturn.core.AlignmentType.NW);
		aln.align();
		return aln;
	}
	,runClustal: function(sequenceId) {
		var _g = this;
		this.getSequenceFromDatabase(sequenceId,function(sequence,id) {
			_g._runClustal(sequence,id);
		});
	}
	,getSequenceFromDatabase: function(sequenceId,cb) {
		this.getSequenceEntity(sequenceId,function(obj) {
			if(js.Boot.__instanceof(obj,saturn.core.domain.SgcConstruct)) cb(obj.dnaSeq,obj.constructId); else if(js.Boot.__instanceof(obj,saturn.core.domain.SgcEntryClone)) cb(obj.dnaSeq,obj.entryCloneId); else if(js.Boot.__instanceof(obj,saturn.core.domain.SgcTarget)) cb(obj.dnaSeq,obj.dnaId);
		});
	}
	,getSequenceEntity: function(sequenceId,cb) {
		var _g = this;
		if(sequenceId.indexOf("-c") != -1) this.getProvider().getById(sequenceId,saturn.core.domain.SgcConstruct,function(construct,exception) {
			if(exception == null && construct != null) cb(construct); else if(exception != null) _g.getApplication().showMessage("Lookup exception",exception.message);
		}); else if(sequenceId.indexOf("-s") != -1) this.getProvider().getById(sequenceId,saturn.core.domain.SgcEntryClone,function(entryClone,exception1) {
			if(exception1 == null && entryClone != null) cb(entryClone); else if(exception1 != null) _g.getApplication().showMessage("Lookup exception",exception1.message);
		}); else this.getProvider().getById(sequenceId,saturn.core.domain.SgcTarget,function(dnaObj,exception2) {
			if(exception2 == null && dnaObj != null) cb(dnaObj); else if(exception2 != null) _g.getApplication().showMessage("Lookup exception",exception2.message);
		});
	}
	,importSequence: function(id) {
		var _g = this;
		this.getSequenceFromDatabase(id,function(dnaSeq,id1) {
			_g.getWorkspace().addObject(new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(dnaSeq),id1),true);
		});
	}
	,isSameOrientation: function(sequence) {
		var forward = this.getAlignment(sequence,true);
		var reverse = this.getAlignment(sequence,false);
		return forward.getSeqAId() > reverse.getSeqAId();
	}
	,_runClustal: function(sequence,name) {
		var icSequence = !this.isSameOrientation(sequence);
		var dnaObj = new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(sequence),name + " (DNA)");
		this.getWorkspace()._addObject(dnaObj,false,false);
		var selfDNAWO = null;
		if(icSequence) {
			if(this.theDNAWOIC == null) this.addDNAToWorkspace(false,icSequence);
			selfDNAWO = this.theDNAWOIC;
		} else {
			if(this.theDNAWOIC == null) this.addDNAToWorkspace(false,false);
			selfDNAWO = this.theDNAWO;
		}
		var aln = new saturn.core.domain.Alignment();
		aln.setAlignmentObjectIds([selfDNAWO.getUUID(),dnaObj.getUUID()]);
		var abiWO;
		abiWO = js.Boot.__cast(this.getActiveObject(saturn.client.workspace.ABITraceWO) , saturn.client.workspace.ABITraceWO);
		var wo = new saturn.client.workspace.AlignmentWorkspaceObject(aln,abiWO.getName() + " Clustal");
		wo.addReference("Sequences",selfDNAWO.getUUID());
		wo.addReference("Sequences",dnaObj.getUUID());
		this.getWorkspace()._addObject(wo,true,false);
		this.getWorkspace().reloadWorkspace();
	}
	,addDNAToWorkspace: function(autoOpen,icSequence) {
		var dnaObj = new saturn.core.DNA(this.getSequence());
		var abiWO;
		abiWO = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.ABITraceWO) , saturn.client.workspace.ABITraceWO);
		if(icSequence) {
			this.theDNAWOIC = new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(dnaObj.getInverseComplement()),abiWO.getName() + " (DNA IC)");
			this.getWorkspace()._addObject(this.theDNAWOIC,autoOpen,false);
		} else {
			this.theDNAWO = new saturn.client.workspace.DNAWorkspaceObject(dnaObj,abiWO.getName() + " (DNA)");
			this.getWorkspace()._addObject(this.theDNAWO,autoOpen,false);
		}
	}
	,blastAll: function() {
		var $it0 = this.traceWO.blastResultMap.keys();
		while( $it0.hasNext() ) {
			var key = $it0.next();
			this.traceWO.blastResultMap.remove(key);
		}
		var $it1 = this.traceWO.blastDBtoHitName.keys();
		while( $it1.hasNext() ) {
			var key1 = $it1.next();
			var _g = 0;
			var _g1 = this.traceWO.blastDBtoHitName.get(key1);
			while(_g < _g1.length) {
				var item = _g1[_g];
				++_g;
				var _this = this.traceWO.blastDBtoHitName.get(key1);
				HxOverrides.remove(_this,item);
			}
		}
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var _g2 = 0;
		var _g11 = this.blastDatabases;
		while(_g2 < _g11.length) {
			var databaseName = _g11[_g2];
			++_g2;
			var node = dataStore.getNodeById(databaseName);
			node.removeAll();
		}
		var seq = this.getSequence();
		if(seq == null || seq == "") return;
		var _g3 = 0;
		var _g12 = this.blastDatabases;
		while(_g3 < _g12.length) {
			var databaseName1 = _g12[_g3];
			++_g3;
			this.blastSequence(seq,databaseName1,databaseName1);
		}
	}
	,blastSequence: function(theSequence,database,blastName) {
		var _g = this;
		saturn.client.BioinformaticsServicesClient.getClient().sendBlastReportRequest(theSequence,blastName,database,function(response,error) {
			if(error == null) {
				var reportFile = response.json.reportFile;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + reportFile;
				Ext.Ajax.request({ url : dstURL, success : function(response1,opts) {
					var obj = response1.responseText;
					var topHits = _g.extractTopHits(obj);
					_g.updateBlastResults(topHits,blastName);
				}, failure : function(response2,opts1) {
				}});
			} else _g.getApplication().showMessage("BLAST Error",error);
		});
	}
	,updateBlastResults: function(hits,folderName) {
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var node = dataStore.getNodeById(folderName);
		node.removeAll();
		saturn.client.WorkspaceApplication.suspendUpdates(true);
		var i = 0;
		var _g = 0;
		while(_g < hits.length) {
			var hit = hits[_g];
			++_g;
			this.traceWO.blastResultMap.set(hit,folderName);
			this.traceWO.blastDBtoHitName.get(folderName).push(hit);
			node.appendChild({ text : hit, leaf : true, id : hit, type : "BLAST_HIT"});
			i++;
			if(i >= this.theBlastResultLmit) break;
		}
		saturn.client.WorkspaceApplication.resumeUpdates(true,true);
	}
	,extractTopHits: function(resultString) {
		var lines = resultString.split("\n");
		var inResultTable = false;
		var re_extractTarget = new EReg("^\\s*([^ ]+)","");
		var targets = [];
		var blankLineCount = 0;
		var re_whiteSpace = new EReg("^\\s+$","");
		var i = 0;
		while(i < lines.length) {
			var line = lines[i++];
			if(line.indexOf("Sequences producing significant alignments") != -1) {
				inResultTable = true;
				i++;
			} else if(inResultTable) {
				if(!re_whiteSpace.match(line) && re_extractTarget.match(line)) {
					var targetName = re_extractTarget.matched(1);
					if(targetName != "") targets.push(targetName);
				} else break;
			}
		}
		return targets;
	}
	,renderScrollBar: function(moveX,forwards) {
		var width = this.scrollCanvas.width;
		var height = this.scrollCanvas.height;
		var ctx = this.scrollCanvas.getContext("2d",null);
		ctx.clearRect(0,0,width,height);
		if(this.theGraphWidth >= this.theTotalWidth) return;
		var shownRatio = this.theGraphWidth / this.theTotalWidth;
		var padding = 5;
		var rectWidth = (this.theGraphWidth - padding * 2) * shownRatio;
		ctx.save();
		ctx.beginPath();
		ctx.strokeStyle = "black";
		ctx.rect(this.theLeftMargin,0,this.theGraphWidth,height);
		ctx.stroke();
		ctx.restore();
		this.theScrollBarBoxWidth = rectWidth;
		this.theScrollBarBoxHeight = height - padding * 2;
		var leftStop = padding + this.theLeftMargin;
		var rightStop = width - this.theRightMargin - this.theScrollBarBoxWidth - padding;
		if(moveX != null) {
			if(forwards) this.theLastScrollBarXPos = this.theLastScrollBarXPos + moveX; else this.theLastScrollBarXPos = this.theLastScrollBarXPos - moveX;
			if(this.theLastScrollBarXPos < leftStop) this.theLastScrollBarXPos = leftStop; else if(this.theLastScrollBarXPos > rightStop) this.theLastScrollBarXPos = rightStop;
		} else if(this.lastPosition > 0) {
			var progress = this.lastPosition / this.theReadingsCount;
			this.theLastScrollBarXPos = this.theGraphWidth * progress + this.theLeftMargin;
			this.theLastScrollBarYPos = padding;
		} else {
			this.theLastScrollBarXPos = leftStop;
			this.theLastScrollBarYPos = padding;
		}
		ctx.save();
		ctx.beginPath();
		ctx.strokeStyle = "blue";
		ctx.rect(this.theLastScrollBarXPos,this.theLastScrollBarYPos,this.theScrollBarBoxWidth,this.theScrollBarBoxHeight);
		ctx.fill();
		ctx.restore();
	}
	,installScrollBarListeners: function() {
		var _g = this;
		var isInHitBox = function(e) {
			return e.offsetX >= _g.theLastScrollBarXPos && e.offsetX <= _g.theLastScrollBarXPos + _g.theScrollBarBoxWidth && e.offsetY >= _g.theLastScrollBarYPos && e.offsetY <= _g.theLastScrollBarYPos + _g.theScrollBarBoxHeight;
		};
		var lastX = this.theLeftMargin;
		var lastY = 0;
		var onMouseMove = function(e1) {
			e1 = saturn.client.programs.ABITraceViewer.getNormalisedEvent(e1);
			var forwards = true;
			var diff = _g.theReadingsCount - _g.lastPosition;
			if(e1.offsetX < lastX) forwards = false; else if(_g.theXUnitSize * diff <= _g.theGraphWidth) return;
			var xMove = Math.abs(lastX - e1.offsetX);
			_g.renderScrollBar(xMove,forwards);
			lastX = e1.offsetX;
			lastY = e1.offsetY;
			var xScrollUnits = (_g.theGraphWidth - 10) / _g.theReadingsCount;
			var numRequested = xMove / xScrollUnits | 0;
			var oldLastPosition = _g.lastPosition;
			if(forwards) _g.lastPosition += numRequested; else _g.lastPosition -= numRequested;
			if(_g.lastPosition < 0) _g.lastPosition = 0;
			if(_g.lastPosition != oldLastPosition) _g.render(_g.traceData);
		};
		this.scrollCanvas.onmousedown = function(evt) {
			var e2 = saturn.client.programs.ABITraceViewer.getNormalisedEvent(evt);
			if(isInHitBox(e2)) {
				lastX = e2.offsetX;
				lastY = e2.offsetY;
				_g.scrollCanvas.onmousemove = onMouseMove;
			} else onMouseMove(evt);
		};
		this.scrollCanvas.onmouseup = function(e3) {
			_g.scrollCanvas.onmousemove = null;
		};
	}
	,preprocessTrace: function() {
		var width = this.graphCanvas.width;
		var height = this.graphCanvas.height;
		this.theMaxIntensity = -1;
		this.theReadingsCount = this.traceData.CH1.length;
		var channels = ["CH1","CH2","CH3","CH4"];
		var _g = 0;
		while(_g < channels.length) {
			var channel = channels[_g];
			++_g;
			var readings = Reflect.field(this.traceData,channel);
			var _g1 = 0;
			while(_g1 < readings.length) {
				var reading = readings[_g1];
				++_g1;
				if(reading > this.theMaxIntensity) this.theMaxIntensity = reading;
			}
		}
		var ctx = this.getGraphContext();
		var yTextMetrics = ctx.measureText(Std.string(this.theMaxIntensity));
		this.theTopMargin = 20;
		this.theBottomMargin = 30;
		this.theLeftMargin = 5 + yTextMetrics.width + 2;
		this.theRightMargin = 20;
		this.theGraphHeight = height - this.theTopMargin - this.theBottomMargin;
		this.theGraphWidth = width - this.theLeftMargin - this.theRightMargin;
		var exponent = Std["int"](Math.log(this.theMaxIntensity) / Math.log(10));
		var magnitude = Math.pow(10,exponent);
		var timesIn = this.theMaxIntensity / magnitude | 0;
		if(this.theMaxIntensity % magnitude > 0) timesIn++;
		var maximumYValue = magnitude * timesIn;
		this.theYIntervalDivisions = maximumYValue / 10;
		this.theYUnitSize = this.theGraphHeight / js.Boot.__cast(maximumYValue , Float);
		this.theXUnitSize = this.defaultReadingSeparation;
		this.theTotalWidth = this.theXUnitSize * this.theReadingsCount;
		this.theSequence = "";
		var labels = this.traceData.LABELS;
		var _g11 = this.lastPosition;
		var _g2 = labels.length;
		while(_g11 < _g2) {
			var i = _g11++;
			var label = labels[i];
			if(label != "" && label != "-") this.theSequence += label;
		}
		this.theViewPortXUnits = this.theGraphWidth / this.theXUnitSize | 0;
		this.theLastXPosition = this.theReadingsCount - this.theViewPortXUnits | 0;
		if(this.theLastXPosition < 0) this.theLastXPosition = 0;
	}
	,calculateAnnotations: function() {
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var node = dataStore.getNodeById("Annotations");
		if(node == null || this.traceData == null) return;
		this.traceData.ANNOTATIONS = [];
		this.annotationIdToPosition = new haxe.ds.StringMap();
		var k = 0;
		var _g1 = 0;
		var _g = this.traceData.ALN_LABELS.length;
		while(_g1 < _g) {
			var i = _g1++;
			var l = this.traceData.ALN_LABELS[i];
			if(l != "-" && l != "") {
				k++;
				if(l != this.traceData.LABELS[i]) {
					var id;
					id = l + (k == null?"null":"" + k) + this.traceData.LABELS[i];
					this.traceData.ANNOTATIONS.push(id);
					this.annotationIdToPosition.set(id,i);
				}
			}
		}
		var a = 0;
		node.removeAll();
		var _g11 = 0;
		var _g2 = this.traceData.ANNOTATIONS.length;
		while(_g11 < _g2) {
			var i1 = _g11++;
			var annotation = this.traceData.ANNOTATIONS[i1];
			node.appendChild({ text : annotation, id : annotation, leaf : true, type : "ANNOTATION"});
			if(a > 20) {
				node.appendChild({ text : "Too many to show", id : "Too many to show", leaf : true, type : "ANNOTATION"});
				break;
			}
			a++;
		}
	}
	,getSequence: function() {
		return this.theSequence;
	}
	,importTraceSequence: function() {
		this.getWorkspace().addObject(new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(this.getSequence()),this.traceWO.getName() + " (DNA)"),true);
	}
	,calculatePages: function() {
	}
	,render: function(traceData,i) {
		if(i == null) i = 0;
		var _g1 = this;
		this.theComponent.removeCls("x-trace-background");
		if(this.lastPosition > this.theLastXPosition) this.lastPosition = this.theLastXPosition;
		var width = this.graphCanvas.width;
		var height = this.graphCanvas.height;
		var ctx = this.getGraphContext();
		ctx.clearRect(0,0,width,height);
		var channelColours;
		var _g = new haxe.ds.StringMap();
		if(__map_reserved.CH1 != null) _g.setReserved("CH1","RED"); else _g.h["CH1"] = "RED";
		if(__map_reserved.CH2 != null) _g.setReserved("CH2","GREEN"); else _g.h["CH2"] = "GREEN";
		if(__map_reserved.CH3 != null) _g.setReserved("CH3","BLUE"); else _g.h["CH3"] = "BLUE";
		if(__map_reserved.CH4 != null) _g.setReserved("CH4","ORANGE"); else _g.h["CH4"] = "ORANGE";
		channelColours = _g;
		var lastIPosition = 0;
		var lineX1 = -1;
		var lineY1 = -1;
		var lineX2 = -1;
		var lineY2 = -1;
		var overlayCtx = this.overlayCanvas.getContext("2d",null);
		overlayCtx.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height);
		var overlayLineX1Done = false;
		var overlayLineX2Done = false;
		var _g11 = 0;
		var _g2 = this.theChannels;
		while(_g11 < _g2.length) {
			var channel = _g2[_g11];
			++_g11;
			var stroke_colour;
			stroke_colour = __map_reserved[channel] != null?channelColours.getReserved(channel):channelColours.h[channel];
			var readings = Reflect.field(traceData,channel);
			ctx.save();
			ctx.strokeStyle = stroke_colour;
			ctx.lineWidth = 2;
			ctx.beginPath();
			var lastSplinePoints = null;
			var lastYValue = null;
			var inGapBlock = false;
			var _g4 = this.lastPosition;
			var _g3 = readings.length;
			while(_g4 < _g3) {
				var i1 = _g4++;
				var correctedI = i1 - this.lastPosition;
				var x_pixel_pos;
				x_pixel_pos = js.Boot.__cast(this.theXUnitSize * correctedI + this.theLeftMargin , Float);
				if(x_pixel_pos > this.theGraphWidth + this.theLeftMargin) break;
				if(!overlayLineX1Done && i1 == this.lineX1RealPosition) {
					overlayCtx.beginPath();
					overlayCtx.moveTo(x_pixel_pos,this.theTopMargin + 3);
					overlayCtx.lineTo(x_pixel_pos,this.theGraphHeight + this.theTopMargin + 2);
					overlayCtx.stroke();
					overlayCtx.closePath();
					lineX1 = x_pixel_pos;
					overlayLineX1Done = true;
				}
				if(!overlayLineX2Done && i1 == this.lineX2RealPosition) {
					overlayCtx.beginPath();
					overlayCtx.moveTo(x_pixel_pos,this.theTopMargin + 3);
					overlayCtx.lineTo(x_pixel_pos,this.theGraphHeight + this.theTopMargin + 2);
					overlayCtx.stroke();
					overlayCtx.closePath();
					lineX2 = x_pixel_pos;
					overlayLineX2Done = true;
				}
				var y_pixel_pos;
				y_pixel_pos = js.Boot.__cast(this.theTopMargin + this.theGraphHeight - this.theYUnitSize * readings[i1] , Float);
				if(readings[i1] == -1) {
					inGapBlock = true;
					continue;
				}
				if(correctedI > 0) {
					var currentSplinePoints = null;
					var x_pixel_pos_last;
					x_pixel_pos_last = js.Boot.__cast(this.theXUnitSize * (correctedI - 1) + this.theLeftMargin , Float);
					var y_pixel_pos_last;
					y_pixel_pos_last = js.Boot.__cast(this.theTopMargin + this.theGraphHeight - this.theYUnitSize * lastYValue , Float);
					var x_pixel_pos_next;
					x_pixel_pos_next = js.Boot.__cast(this.theXUnitSize * (correctedI + 1) + this.theLeftMargin , Float);
					var y_pixel_pos_next;
					y_pixel_pos_next = js.Boot.__cast(this.theTopMargin + this.theGraphHeight - this.theYUnitSize * readings[i1 + 1] , Float);
					if(i1 >= readings.length - 1) currentSplinePoints = saturn.client.programs.ABITraceViewer.splineCurve(x_pixel_pos_last,y_pixel_pos_last,x_pixel_pos,y_pixel_pos,x_pixel_pos,y_pixel_pos,0); else currentSplinePoints = saturn.client.programs.ABITraceViewer.splineCurve(x_pixel_pos_last,y_pixel_pos_last,x_pixel_pos,y_pixel_pos,x_pixel_pos_next,y_pixel_pos_next,1);
					if(inGapBlock) {
						ctx.moveTo(x_pixel_pos_last,y_pixel_pos_last);
						inGapBlock = false;
						lastSplinePoints = saturn.client.programs.ABITraceViewer.splineCurve(x_pixel_pos,y_pixel_pos,x_pixel_pos,y_pixel_pos,x_pixel_pos_next,y_pixel_pos_next,0);
					} else ctx.bezierCurveTo(lastSplinePoints.outer.x,lastSplinePoints.outer.y,currentSplinePoints.inner.x,currentSplinePoints.inner.y,x_pixel_pos,y_pixel_pos);
					lastYValue = readings[i1];
					lastSplinePoints = currentSplinePoints;
				} else {
					ctx.moveTo(x_pixel_pos,y_pixel_pos);
					var x_pixel_pos_next1;
					x_pixel_pos_next1 = js.Boot.__cast(this.theXUnitSize * (correctedI + 1) + this.theLeftMargin , Float);
					var y_pixel_pos_next1;
					y_pixel_pos_next1 = js.Boot.__cast(this.theTopMargin + this.theGraphHeight - this.theYUnitSize * readings[i1 + 1] , Float);
					lastSplinePoints = saturn.client.programs.ABITraceViewer.splineCurve(x_pixel_pos,y_pixel_pos,x_pixel_pos,y_pixel_pos,x_pixel_pos_next1,y_pixel_pos_next1,0);
					lastYValue = readings[i1];
				}
			}
			ctx.stroke();
			ctx.restore();
		}
		ctx.save();
		ctx.strokeStyle = "BLACK";
		var aMetrics = ctx.measureText("A");
		var labels = traceData.LABELS;
		var _g21 = this.lastPosition;
		var _g12 = labels.length;
		while(_g21 < _g12) {
			var i2 = _g21++;
			var label = labels[i2];
			if(label != "") {
				var correctedI1 = i2 - this.lastPosition;
				var x_pixel_pos1 = this.theXUnitSize * correctedI1;
				if(x_pixel_pos1 + this.theLeftMargin > this.theGraphWidth + this.theLeftMargin) break;
				var highlight = false;
				if(traceData.ALN_LABELS.length > 0) {
					if(traceData.ALN_LABELS[i2] != label) highlight = true;
				}
				if(label == "-") highlight = true;
				if(highlight) {
					ctx.beginPath();
					ctx.strokeStyle = "red";
					ctx.moveTo(this.theLeftMargin + x_pixel_pos1 + 2,this.theTopMargin + 3);
					ctx.lineTo(this.theLeftMargin + x_pixel_pos1 + 2,this.theGraphHeight + this.theTopMargin + 2);
					ctx.stroke();
					ctx.strokeStyle = "black";
					ctx.closePath();
					ctx.fillStyle = "red";
					ctx.fillText(label,this.theLeftMargin + x_pixel_pos1,this.theTopMargin + this.theGraphHeight + 10 + 2);
					ctx.fillStyle = "black";
				} else ctx.fillText(label,this.theLeftMargin + x_pixel_pos1,this.theTopMargin + this.theGraphHeight + 10 + 2);
			}
		}
		if(traceData.ALN_LABELS.length > 0) {
			var _g22 = this.lastPosition;
			var _g13 = labels.length;
			while(_g22 < _g13) {
				var i3 = _g22++;
				var correctedI2 = i3 - this.lastPosition;
				var x_pixel_pos2 = this.theXUnitSize * correctedI2;
				if(x_pixel_pos2 + this.theLeftMargin > this.theGraphWidth + this.theLeftMargin) break;
				var label1 = traceData.ALN_LABELS[i3];
				if(label1 != "") ctx.fillText(label1,this.theLeftMargin + x_pixel_pos2,this.theTopMargin + this.theGraphHeight + 20 + 2);
			}
		}
		var mHeight = ctx.measureText("M").width;
		var _g14 = 0;
		while(_g14 < 11) {
			var i4 = _g14++;
			var y_label = this.theYIntervalDivisions * i4;
			var y_pos = this.theYUnitSize * y_label;
			var yLabelMetrics = ctx.measureText(y_label == null?"null":"" + y_label);
			ctx.fillText(y_label == null?"null":"" + y_label,this.theLeftMargin - yLabelMetrics.width - 2 - 2,this.theGraphHeight + this.theTopMargin - y_pos + mHeight / 2 + 2);
		}
		ctx.restore();
		this.overlayCanvas.onmouseup = function(e) {
			var ne = saturn.client.programs.ABITraceViewer.getNormalisedEvent(e);
			if(ne.offsetX >= lineX1 - 2 && e.offsetX <= lineX1 + 2) {
				overlayCtx.clearRect(0,0,_g1.overlayCanvas.width,_g1.overlayCanvas.height);
				lineX1 = -1;
				if(_g1.lineX2RealPosition != -1) {
					overlayCtx.beginPath();
					overlayCtx.moveTo(lineX2,_g1.theTopMargin);
					overlayCtx.lineTo(lineX2,_g1.theGraphHeight + _g1.theTopMargin);
					overlayCtx.stroke();
					overlayCtx.closePath();
				}
				_g1.lineX1RealPosition = -1;
			} else if(ne.offsetX >= lineX2 - 2 && e.offsetX <= lineX2 + 2) {
				overlayCtx.clearRect(0,0,_g1.overlayCanvas.width,_g1.overlayCanvas.height);
				lineX2 = -1;
				if(_g1.lineX1RealPosition != -1) {
					overlayCtx.beginPath();
					overlayCtx.moveTo(lineX1,_g1.theTopMargin);
					overlayCtx.lineTo(lineX1,_g1.theGraphHeight + _g1.theTopMargin);
					overlayCtx.stroke();
					overlayCtx.closePath();
				}
				_g1.lineX2RealPosition = -1;
			} else {
				if(_g1.lineX1RealPosition == -1) {
					lineX1 = ne.offsetX;
					_g1.lineX1RealPosition = _g1.convertXToPosition(lineX1);
				} else if(_g1.lineX2RealPosition == -1) {
					lineX2 = ne.offsetX;
					_g1.lineX2RealPosition = _g1.convertXToPosition(lineX2);
				} else return;
				overlayCtx.beginPath();
				overlayCtx.moveTo(ne.offsetX,_g1.theTopMargin);
				overlayCtx.lineTo(ne.offsetX,_g1.theGraphHeight + _g1.theTopMargin);
				overlayCtx.stroke();
				overlayCtx.closePath();
			}
		};
		ctx.save();
		ctx.beginPath();
		ctx.lineWidth = 2;
		ctx.moveTo(this.theLeftMargin - 2,this.theTopMargin + 3);
		ctx.lineTo(this.theLeftMargin - 2,this.theGraphHeight + this.theTopMargin + 3);
		ctx.stroke();
		ctx.restore();
		ctx.save();
		ctx.beginPath();
		ctx.lineWidth = 2;
		ctx.moveTo(this.theLeftMargin - 1,this.theTopMargin + this.theGraphHeight + 2);
		ctx.lineTo(this.theLeftMargin + this.theGraphWidth - 1,this.theTopMargin + this.theGraphHeight + 2);
		ctx.stroke();
		ctx.restore();
	}
	,updateSelected: function(cX1,cX2) {
		var sequence = "";
		var labels = this.traceData.LABELS;
		var _g = cX1;
		while(_g < cX2) {
			var i = _g++;
			if(labels[i] != "") sequence += labels[i];
		}
		saturn.client.WorkspaceApplication.getApplication().setCentralInfoPanelText("Selected: " + cX1 + "-" + cX2 + "  " + sequence);
	}
	,convertXToPosition: function(xPos) {
		var position = (xPos - this.theLeftMargin) / this.theXUnitSize | 0;
		position += this.lastPosition;
		return position;
	}
	,saveObject: function(cb) {
		var wo = this.getWorkspaceObject();
		wo.getObject().setName(wo.getName());
		saturn.client.programs.SimpleExtJSProgram.prototype.saveObject.call(this,cb);
	}
	,__class__: saturn.client.programs.ABITraceViewer
});
saturn.client.workspace.AlignmentWorkspaceObject = $hxClasses["saturn.client.workspace.AlignmentWorkspaceObject"] = function(object,name) {
	if(object == null) object = new saturn.core.domain.Alignment();
	if(name == null) name = "Alignment";
	this.iconPath = "/static/js/images/aln_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.AlignmentWorkspaceObject.__name__ = ["saturn","client","workspace","AlignmentWorkspaceObject"];
saturn.client.workspace.AlignmentWorkspaceObject.getNewMenuText = function() {
	return "Alignment";
};
saturn.client.workspace.AlignmentWorkspaceObject.getDefaultFolderName = function() {
	return "Alignments";
};
saturn.client.workspace.AlignmentWorkspaceObject.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.AlignmentWorkspaceObject.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	addSequenceNew: function(objectId) {
		this.object.addObject(objectId);
	}
	,removeSequenceNew: function(objectId) {
		this.object.removeObject(objectId);
	}
	,__class__: saturn.client.workspace.AlignmentWorkspaceObject
});
saturn.client.programs.AlignmentViewer = $hxClasses["saturn.client.programs.AlignmentViewer"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.AlignmentViewer.__name__ = ["saturn","client","programs","AlignmentViewer"];
saturn.client.programs.AlignmentViewer.parseFile = function(file,cb,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	var extension = saturn.client.core.CommonCore.getFileExtension(file.name);
	if(extension == "pfam_aln") saturn.client.core.CommonCore.getFileAsText(file,function(content) {
		if(content != null) {
			var obj = new saturn.core.domain.Alignment();
			obj.setAlignmentContent(content);
			var wo = new saturn.client.workspace.AlignmentWorkspaceObject(obj,"Alignment");
			saturn.client.WorkspaceApplication.getApplication().getWorkspace()._addObject(wo,true,true);
		} else saturn.client.WorkspaceApplication.getApplication().showMessage("Processing error","Unable to extract alignment");
	}); else if(extension == "aln") saturn.client.core.CommonCore.getFileAsText(file,function(content1) {
		if(content1 != null) {
			var obj1 = new saturn.core.domain.Alignment();
			obj1.setAlignmentContent(content1);
			var wo1 = new saturn.client.workspace.AlignmentWorkspaceObject(obj1,"Alignment");
			saturn.client.WorkspaceApplication.getApplication().getWorkspace()._addObject(wo1,true,true);
		} else saturn.client.WorkspaceApplication.getApplication().showMessage("Processing error","Unable to extract alignment");
	});
};
saturn.client.programs.AlignmentViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-aln", html : "Alignment<br/>Viewer", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.AlignmentWorkspaceObject(new saturn.core.domain.Alignment(),"MSA"),true);
	}, tooltip : { dismissDelay : 10000, text : "Alignment viewer.<br/>Run CLUSTAL against DNA or Protein sequences."}}];
};
saturn.client.programs.AlignmentViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.AlignmentViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,internalFrameId: null
	,icButton: null
	,emptyInit: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.internalFrameId = "INTERNAL_ALN_FRAME";
		var self = this;
		this.theComponent = Ext.create("Ext.panel.Panel",{ title : "Alignment Viewer", width : "100%", height : "95%", autoScroll : true, layout : "fit", items : [{ xtype : "component", itemId : this.internalFrameId, autoEl : { tag : "pre"}}], listeners : { 'render' : function() {
			self.initialiseDOMComponent();
		}}, cls : "x-aln-background"});
		this.registerDropFolder("Sequences",null,true);
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
		var self = this;
		this.getApplication().getViewMenu().add({ text : "Update alignment", handler : function() {
			self.updateAlignment();
		}});
		this.getApplication().getFileMenu().add({ text : "Import all Protein Sequences", handler : function() {
			self.addAllProteinSequencesFromWorkspace();
		}});
		this.getApplication().getFileMenu().add({ text : "Import all DNA Sequences", handler : function() {
			self.addAllDNASequencesFromWorkspace();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Update", handler : function() {
			self.updateAlignment();
		}, tooltip : { dismissDelay : 10000, text : "Update alignment with current sequences"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Import Protein", handler : function() {
			self.addAllProteinSequencesFromWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Import all protein sequences from the workspace (click update to update alignment)"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Import DNA", handler : function() {
			self.addAllDNASequencesFromWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Import all DNA sequences from the workspace (click update to update alignment)"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-gridvar", text : "Summary", handler : function() {
			self.generateSummary();
		}, tooltip : { dismissDelay : 10000, text : "View overlap summary plot"}});
		this.icButton = this.getApplication().getToolBar().add({ iconCls : "x-btn-inverse-complement", text : "IC", handler : function() {
			self.inverseComplement();
		}, tooltip : { dismissDelay : 10000, text : "Inverse complement"}});
	}
	,inverseComplement: function() {
		var content = this.getActiveAlignmentObject().getAlignmentContent();
		if(content != null) {
			var aln = saturn.core.ClustalOmegaParser.read(content);
			aln.inverseComplement();
			this.getActiveAlignmentObject().setAlignmentContent(aln.toString());
			this.render();
		}
	}
	,generateSummary: function() {
		var aln = this.getActiveObjectObject();
		if(aln.getAlignmentContent() != null) {
			var msa = saturn.core.ClustalOmegaParser.read(aln.getAlignmentContent());
			var obj = msa.toGrid();
			var wo = new saturn.client.workspace.GridVarWO(obj,this.getActiveObjectName() + " (Summary)");
			obj.padding = false;
			obj.showXLabels = false;
			obj.fit = true;
			this.getWorkspace().addObject(wo,true);
		}
	}
	,addAllDNASequencesFromWorkspace: function() {
		this.registerAllFromWorkspace(saturn.client.workspace.DNAWorkspaceObject,"Sequences");
	}
	,addAllProteinSequencesFromWorkspace: function() {
		this.registerAllFromWorkspace(saturn.client.workspace.ProteinWorkspaceObject,"Sequences");
	}
	,getAlignmentContent: function(alignmentURL,cb) {
	}
	,setAlignmentURL: function(alignmentURL) {
		var _g = this;
		this.getActiveAlignmentObject().setAlignmentURL(alignmentURL);
		haxe.Timer.delay(function() {
			saturn.client.core.CommonCore.getContent(alignmentURL,function(content) {
				_g.getActiveAlignmentObject().setAlignmentContent(content);
				_g.render();
			});
		},1000);
	}
	,render: function() {
		var pre = this.theComponent.getComponent(this.internalFrameId).getEl().dom;
		var content = this.getActiveAlignmentObject().getAlignmentContent();
		if(content == null || content == "") this.theComponent.addCls("x-aln-background"); else this.theComponent.removeCls("x-aln-background");
		pre.innerHTML = content;
	}
	,updateAlignment: function() {
		var _g = this;
		var self = this;
		var alnObj = this.getAlignmentObject();
		var objectIds = this.getState().getReferences("Sequences");
		objectIds.reverse();
		var strBuf = new StringBuf();
		var count = 0;
		var isDNA = false;
		var _g1 = 0;
		while(_g1 < objectIds.length) {
			var objectId = objectIds[_g1];
			++_g1;
			var w0 = this.getWorkspace().getObject(objectId);
			if(js.Boot.__instanceof(w0,saturn.client.workspace.DNAWorkspaceObject)) {
				var object = this.getWorkspace().getObjectSafely(objectId,saturn.client.workspace.DNAWorkspaceObject);
				if(object.getObject().getSequence() != null) {
					strBuf.add(">" + w0.getName() + "\n" + object.getObject().getSequence() + "\n");
					count += 1;
					isDNA = true;
				}
			} else if(js.Boot.__instanceof(w0,saturn.client.workspace.ProteinWorkspaceObject)) {
				var object1;
				object1 = js.Boot.__cast(w0 , saturn.client.workspace.ProteinWorkspaceObject);
				if(object1.getObject().getSequence() != null) {
					strBuf.add(">" + w0.getName() + "\n" + object1.getObject().getSequence() + "\n");
					count += 1;
				}
			} else if(js.Boot.__instanceof(w0,saturn.client.workspace.ABITraceWO)) {
				var object2;
				object2 = js.Boot.__cast(w0 , saturn.client.workspace.ABITraceWO);
				if(object2.getObject().getSequence() != null) {
					strBuf.add(">" + w0.getName() + "\n" + object2.getObject().getSequence() + "\n");
					count += 1;
				}
			} else if(js.Boot.__instanceof(w0,saturn.core.molecule.Molecule)) {
				var mol;
				mol = js.Boot.__cast(w0 , saturn.core.molecule.Molecule);
				if(mol.getSequence() != null) {
					strBuf.add(">" + mol.getName() + "\n" + mol.getSequence() + "\n");
					count += 1;
				}
			} else {
				var d = w0;
				strBuf.add(">" + Std.string(d.getName()) + "\n" + Std.string(d.getSequence()) + "\n");
			}
		}
		if(count < 2) this.setAlignmentURL(null); else {
			saturn.client.BioinformaticsServicesClient.getClient().sendClustalReportRequest(strBuf.b,function(response,error) {
				if(error == null) {
					var clustalReport = response.json.clustalReport;
					var location = window.location;
					var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + clustalReport;
					self.setAlignmentURL(dstURL);
				} else _g.getApplication().showMessage("Clustal Error",error);
			});
			if(isDNA) this.icButton.enable(); else this.icButton.disable();
		}
	}
	,getActiveAlignmentObject: function() {
		var activeObject = saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.AlignmentWorkspaceObject);
		if(activeObject != null) {
			var w0;
			w0 = js.Boot.__cast(activeObject , saturn.client.workspace.AlignmentWorkspaceObject);
			return w0.getObject();
		} else return null;
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var wo;
		wo = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.AlignmentWorkspaceObject) , saturn.client.workspace.AlignmentWorkspaceObject);
		var alnObj = wo.getObject();
		var alnUrl = alnObj.getAlignmentURL();
		var alnContent = alnObj.getAlignmentContent();
		if(alnContent != null) this.render(); else if(alnUrl != null) this.setAlignmentURL(alnUrl); else if(wo.getReferences("Sequences").length > 0) this.updateAlignment();
		this.setTitle(wo.getName());
	}
	,getAlignmentObject: function() {
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.AlignmentWorkspaceObject) , saturn.client.workspace.AlignmentWorkspaceObject);
		return w0.getObject();
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
	}
	,saveObject: function(cb) {
		var wo = this.getWorkspaceObject();
		wo.getObject().setName(wo.getName());
		saturn.client.programs.SimpleExtJSProgram.prototype.saveObject.call(this,cb);
	}
	,__class__: saturn.client.programs.AlignmentViewer
});
if(!saturn.client.programs.sequenceeditor) saturn.client.programs.sequenceeditor = {};
saturn.client.programs.sequenceeditor.SequenceEditor = $hxClasses["saturn.client.programs.sequenceeditor.SequenceEditor"] = function() {
	this.findAnnotationOn = false;
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.sequenceeditor.SequenceEditor.__name__ = ["saturn","client","programs","sequenceeditor","SequenceEditor"];
saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable = function(elem,makeSelectable) {
	if(makeSelectable) {
		elem.classList.remove("molbio-unselectable");
		elem.classList.add("molbio-selectable");
		elem.removeAttribute("unselectable");
	} else {
		elem.classList.add("molbio-unselectable");
		elem.classList.remove("molbio-selectable");
		elem.setAttribute("unselectable","on");
	}
};
saturn.client.programs.sequenceeditor.SequenceEditor.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.sequenceeditor.SequenceEditor.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,sequence: null
	,blockFields: null
	,annotationSequences: null
	,annotationFields: null
	,annotationRowCount: null
	,annotationsOn: null
	,annotationPositions: null
	,annotationRowLabels: null
	,hideAnnotationsItem: null
	,showAnnotationsItem: null
	,annotationLabels: null
	,annotationToRow: null
	,annotationToClass: null
	,defaultAnnotationBlockClass: null
	,sequenceChangeListeners: null
	,columnCount: null
	,blockSize: null
	,selectableRow: null
	,inputFocused: null
	,viewAnnotations: null
	,showAnnotationItems: null
	,hideAnnotationItems: null
	,liveUpdateOn: null
	,offSet: null
	,lastSelected: null
	,editorCharWidth: null
	,editorCharHeight: null
	,menuState: null
	,findAnnotationOn: null
	,viewFastaMenuItem: null
	,viewEditorMenuItem: null
	,fastaViewer: null
	,theTable: null
	,fastaButton: null
	,editorButton: null
	,isFindAnnotationOn: function() {
		return this.findAnnotationOn;
	}
	,liveUpdateEnabled: function() {
		return this.liveUpdateOn;
	}
	,determineEditorCharacterDimensions: function() {
		var s;
		var _this = window.document;
		s = _this.createElement("pre");
		s.className = "molbio-sequenceeditor-block";
		s.textContent = "GGGGGGGGGGGG";
		s.setAttribute("style","border:0px;margin:0px;position: absolute; top: -100px;");
		window.document.body.appendChild(s);
		this.editorCharWidth = s.offsetWidth / 12;
		this.editorCharHeight = s.offsetHeight;
		var d = window.document;
		d.spanHelp = s;
	}
	,getDefaultCharWidth: function() {
		return this.editorCharWidth;
	}
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.determineEditorCharacterDimensions();
		if(this.defaultAnnotationBlockClass == null) this.defaultAnnotationBlockClass = saturn.client.programs.sequenceeditor.AnnotationEditorBlock;
		this.liveUpdateOn = true;
		this.menuState = new haxe.ds.StringMap();
		this.offSet = 0;
		this.selectableRow = -2;
		this.columnCount = 5;
		this.blockSize = 20;
		this.annotationRowCount = 0;
		this.annotationToRow = new haxe.ds.StringMap();
		this.blockFields = [];
		this.annotationFields = [];
		this.annotationsOn = [];
		this.annotationPositions = [];
		this.annotationSequences = [];
		this.annotationLabels = [];
		this.annotationRowLabels = [];
		this.annotationToClass = [];
		this.sequenceChangeListeners = [];
		this.showAnnotationItems = [];
		this.hideAnnotationItems = [];
		this.theComponent = Ext.create("Ext.Panel",{ width : "100%", height : "100%", title : "DNA Editor", layout : "vbox", region : "center"});
		if(!Ext.ClassManager.isCreated("sequence.table")) Ext.define("sequence.table",{ title : "DNA Editor", extend : "Ext.Component", autoEl : { tag : "div"}, width : "100%", height : "100%", autoScroll : true, flex : 2});
		if(!Ext.ClassManager.isCreated("sequence.fasta")) Ext.define("sequence.fasta",{ title : "DNA Editor", extend : "Ext.Component", autoEl : { tag : "div"}, width : "100%", height : "100%", autoScroll : true, style : { margin : "2px"}, flex : 2});
		this.setAnnotationCount(0);
		this.theTable = Ext.create("sequence.table",{ listeners : { 'render' : Ext.bind(function() {
			_g.initialiseDOMComponent();
		},this)}});
		this.fastaViewer = Ext.create("sequence.fasta",{ });
		this.theTable.parentBuildingBlock = this;
		this.theTable.addCls("molbio-sequenceeditor-table");
		this.theComponent.add(this.theTable);
		this.inMouseMove = false;
		this.mouseDown = false;
		this.getApplication().getMiddleSouthPanel().addCls("seq-breaking");
	}
	,getDomElement: function() {
		return this.theTable.getEl().dom;
	}
	,setDefaultAnnotationEditorBlockClass: function(annotationEditorClass) {
		this.defaultAnnotationBlockClass = annotationEditorClass;
	}
	,getDefaultAnnotationEditorBlockClass: function() {
		return this.defaultAnnotationBlockClass;
	}
	,close: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.close.call(this);
		this.deleteBlockRows(0);
		this.theTable.parentBuildingBlock = null;
		this.theComponent.parentBuildingBlock = null;
		this.getApplication().getMiddleSouthPanel().removeCls("seq-breaking");
		window.onkeyup = null;
		window.onkeydown = null;
		this.theTable = null;
		this.theComponent = null;
	}
	,setAnnotationLabel: function(annotationNumber,annotationLabel) {
		this.annotationLabels[annotationNumber] = annotationLabel;
		{
			this.annotationToRow.set(annotationLabel,annotationNumber);
			annotationNumber;
		}
	}
	,getAnnotationLabel: function(annotationNumber) {
		return this.annotationLabels[annotationNumber];
	}
	,getAnnotationClass: function(annotationNumber) {
		return this.annotationToClass[annotationNumber];
	}
	,setAnnotationCount: function(annotationCount) {
		if(annotationCount > this.annotationRowCount) {
			var _g = this.annotationRowCount;
			while(_g < annotationCount) {
				var i = _g++;
				this.annotationsOn.push(false);
				this.annotationFields.push([]);
				this.annotationSequences.push("");
				this.annotationPositions.push(saturn.client.programs.sequenceeditor.AnnotationPosition.BOTTOM);
				this.annotationLabels.push("Annotation: " + i);
				this.annotationToClass.push(this.getDefaultAnnotationEditorBlockClass());
				if(this.viewAnnotations != null) this.addAnnotationMenuItem(i);
				this.annotationRowLabels.push([]);
			}
		} else {
			var _g1 = annotationCount;
			var _g2 = this.annotationRowCount;
			while(_g1 < _g2) {
				var i1 = _g1++;
				this.annotationsOn.pop();
				this.annotationFields.pop();
				this.annotationSequences.pop();
				this.annotationPositions.pop();
				this.annotationLabels.pop();
				this.showAnnotationItems.pop();
				this.hideAnnotationItems.pop();
				this.annotationRowLabels.pop();
				this.annotationToClass.pop();
			}
		}
		this.annotationRowCount = annotationCount;
	}
	,addAnnotation: function(annotationName) {
		var annotationRowNo = this.getAnnotationRowCount();
		this.setAnnotationLabel(annotationRowNo,annotationName);
		this.setAnnotationCount(annotationRowNo + 1);
		return annotationRowNo;
	}
	,getAnnotationRowCount: function() {
		return this.annotationRowCount;
	}
	,addAnnotationMenuItems: function() {
		var _g1 = 0;
		var _g = this.annotationFields.length;
		while(_g1 < _g) {
			var i = _g1++;
			this.addAnnotationMenuItem(i);
		}
	}
	,addAnnotationMenuItem: function(annotationNumber) {
		var _g = this;
		var self = this;
		var showLabel = "Show " + this.annotationLabels[annotationNumber];
		var hideLabel = "Hide " + this.annotationLabels[annotationNumber];
		var showItem = null;
		var hideItem = null;
		showItem = this.viewAnnotations.add({ text : showLabel, handler : function() {
			_g.deleteBlockRows(0);
			self.setAnnotationOn(annotationNumber,true);
			_g.redraw();
			hideItem.show();
			showItem.hide();
			if(_g.allAnnotationsVisible()) {
				self.showAnnotationsItem.hide();
				_g.menuState.set("showAnnotationsItem",false);
			}
			_g.menuState.set(hideLabel,true);
			_g.menuState.set(showLabel,false);
			self.hideAnnotationsItem.show();
			_g.menuState.set("hideAnnotationsItem",true);
		}});
		this.showAnnotationItems.push(showItem);
		if(this.menuState.exists(showLabel)) {
			if(this.menuState.get(showLabel)) showItem.show(); else showItem.hide();
		}
		hideItem = this.viewAnnotations.add({ text : hideLabel, hidden : true, handler : function() {
			_g.deleteBlockRows(0);
			self.setAnnotationOn(annotationNumber,false);
			_g.redraw();
			hideItem.hide();
			showItem.show();
			if(!_g.hasAnnotationsVisible()) {
				self.hideAnnotationsItem.hide();
				_g.menuState.set("hideAnnotationsItem",false);
			}
			_g.menuState.set(hideLabel,false);
			_g.menuState.set(showLabel,true);
			self.showAnnotationsItem.show();
			_g.menuState.set("showAnnotationsItem",true);
		}});
		this.hideAnnotationItems.push(hideItem);
		if(this.menuState.exists(hideLabel)) {
			if(this.menuState.get(hideLabel)) hideItem.show(); else hideItem.hide();
		}
	}
	,hasAnnotationsVisible: function() {
		var _g1 = 0;
		var _g = this.annotationsOn.length;
		while(_g1 < _g) {
			var i = _g1++;
			if(this.annotationsOn[i] == true) return true;
		}
		return false;
	}
	,allAnnotationsVisible: function() {
		var _g1 = 0;
		var _g = this.annotationsOn.length;
		while(_g1 < _g) {
			var i = _g1++;
			if(this.annotationsOn[i] == false) return false;
		}
		return true;
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.setTitle(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.WorkspaceObject).getName());
	}
	,setTitle: function(title) {
		this.getApplication().setProgramTabTitle(this,title);
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		this.addSequenceRows(1);
		this.makeAnnotationSelectable(-1);
		this.mouseDown = false;
		this.installFastaViewer();
	}
	,installFastaViewer: function() {
	}
	,installWindowListeners: function(window) {
		var _g = this;
		var self = this;
		window.onkeyup = function(event) {
			if(event.keyCode == 46 || event.keyCode == 8) {
				if(window.document.activeElement.tagName == "INPUT") return;
				self.onSequenceDeleteRequest(event);
			} else _g.getApplication().onkeyup(event);
		};
		window.onkeydown = function(event1) {
			if(event1.altKey) {
				var southPanel = _g.getApplication().getMiddleSouthPanel();
				var node = southPanel.getEl().dom.childNodes[1];
				if(node.innerText != "") {
					var d = window.document;
					if(d.selection) {
						var range = d.body.createTextRange();
						range.moveToElementText(node);
						range.select();
					} else if(window.getSelection) {
						var range1 = window.document.createRange();
						range1.selectNode(node);
						window.getSelection().removeAllRanges();
						window.getSelection().addRange(range1);
					}
				}
			} else _g.getApplication().onkeydown(event1);
		};
	}
	,onSequenceDeleteRequest: function(event) {
		var selectedCords = this.getSelectedRegion();
		if(selectedCords != null) {
			if(event.stopPropagation) event.stopPropagation();
			event.cancelBubble = true;
			this.blockChanged(null,null,selectedCords.getStartPosition(),selectedCords.getStopPosition(),null);
		}
	}
	,uninstallWindowListeners: function(window) {
		window.onkeyup = null;
	}
	,mousedown: function(event) {
		var targetElem = event.srcElement;
		if(targetElem == null) targetElem = event.target;
		var id = targetElem.id;
		if(!StringTools.startsWith(id,"menuitem")) {
			var rightClick = false;
			if(event.which && event.button == 2) rightClick = true; else if(event.button && event.button == 2) rightClick = true;
			if(rightClick == false) {
				this.mouseDown = true;
				this.clearSelection();
			}
		}
	}
	,mouseup: function(event) {
		var targetElem = event.srcElement;
		if(targetElem == null) targetElem = event.target;
		var id = targetElem.id;
		if(!StringTools.startsWith(id,"menuitem")) {
			var rightClick = false;
			if(event.which && event.button == 2) rightClick = true; else if(event.button && event.button == 2) rightClick = true;
			if(rightClick == false) {
				this.mouseDown = false;
				this.selectionUpdated();
				this.inMouseMove = false;
			}
		}
	}
	,addSequenceRows: function(numRows) {
		var blockNumber = this.blockFields.length;
		var toAdd = [];
		var tableElem = this.theTable.el;
		var rowSize = this.blockSize * this.columnCount;
		var startingRowCount = this.blockFields.length * this.blockSize;
		var lastRow = startingRowCount;
		var _g = 0;
		while(_g < numRows) {
			var j = _g++;
			var startingBlockNumber = blockNumber + 1;
			this.renderAnnotationsByPosition(saturn.client.programs.sequenceeditor.AnnotationPosition.TOP,tableElem,startingBlockNumber);
			var rowElem;
			var _this = window.document;
			rowElem = _this.createElement("div");
			rowElem.style.height = "2.0em";
			rowElem.className = "molbio-unselectable";
			tableElem.appendChild(rowElem);
			var _g2 = 0;
			var _g1 = this.columnCount;
			while(_g2 < _g1) {
				var i = _g2++;
				if(i == 0) {
					var currentRow = lastRow + rowSize;
					var lineNumberBlock = this.generateRowLabel(Std.string(lastRow + 1 + this.offSet) + "-" + Std.string(currentRow + this.offSet));
					lastRow = currentRow;
					rowElem.appendChild(lineNumberBlock);
				}
				var localBlockNumber = ++blockNumber;
				var block = this.getSequenceEditorBlock(localBlockNumber,this);
				var divElem = block.getElement();
				if(this.getSelectableRow() == -1) saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable(divElem,true); else saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable(divElem,false);
				this.blockFields.push(block);
				rowElem.appendChild(divElem);
			}
			this.renderAnnotationsByPosition(saturn.client.programs.sequenceeditor.AnnotationPosition.BOTTOM,tableElem,startingBlockNumber);
		}
	}
	,getSequenceEditorBlock: function(blockNumber,editor) {
		return new saturn.client.programs.sequenceeditor.SequenceEditorBlock(blockNumber,editor);
	}
	,getAnnotationSequenceEditorBlock: function(blockNumber,editor,annotationRowCount) {
		return Type.createInstance(this.annotationToClass[annotationRowCount],[blockNumber,editor,annotationRowCount]);
	}
	,setAnnotationClass: function(annotationName,annotationClass) {
		if(this.annotationToRow.exists(annotationName)) this.annotationToClass[this.annotationToRow.get(annotationName)] = annotationClass;
	}
	,renderAnnotationsByPosition: function(annotationPosition,tableElem,startingBlockNumber) {
		var _g1 = 0;
		var _g = this.annotationRowCount;
		while(_g1 < _g) {
			var k = _g1++;
			var blockNumber = startingBlockNumber;
			if(!this.isAnnotationOn(k)) continue;
			if(this.getAnnotationPosition(k) != annotationPosition) continue;
			var rowElem = window.document.createElement("div");
			rowElem.style.height = "2.0em";
			saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable(rowElem,false);
			tableElem.appendChild(rowElem);
			var _g3 = 0;
			var _g2 = this.columnCount;
			while(_g3 < _g2) {
				var i = _g3++;
				if(i == 0) {
					var rowLabel = this.generateRowLabel(this.annotationLabels[k]);
					this.annotationRowLabels[k].push(rowLabel);
					rowElem.appendChild(rowLabel);
				}
				var block = this.getAnnotationSequenceEditorBlock(blockNumber++,this,k);
				var divElem = block.getElement();
				if(this.getSelectableRow() == k) block.makeSelectable(true); else block.makeSelectable(false);
				this.annotationFields[k].push(block);
				rowElem.appendChild(divElem);
			}
		}
	}
	,setAnnotationPosition: function(annotationNumber,annotationPosition) {
		this.annotationPositions[annotationNumber] = annotationPosition;
	}
	,getAnnotationPosition: function(annotationNumber) {
		return this.annotationPositions[annotationNumber];
	}
	,isAnnotationOn: function(annotationNumber) {
		return this.annotationsOn[annotationNumber];
	}
	,setAnnotationOn: function(annotationNumber,enable) {
		this.annotationsOn[annotationNumber] = enable;
	}
	,setAnnotationsOn: function(enable) {
		var _g1 = 0;
		var _g = this.annotationsOn.length;
		while(_g1 < _g) {
			var i = _g1++;
			this.annotationsOn[i] = enable;
		}
	}
	,hasAnnotationsOn: function() {
		var _g1 = 0;
		var _g = this.annotationsOn.length;
		while(_g1 < _g) {
			var i = _g1++;
			if(this.isAnnotationOn(i)) return true;
		}
		return false;
	}
	,getSelectableRow: function() {
		return this.selectableRow;
	}
	,redraw: function() {
		saturn.client.WorkspaceApplication.suspendUpdates();
		var oldSeq = this.sequence;
		this.deleteBlockRows(0);
		this.addSequenceRows(1);
		var oldSelectableRow = this.selectableRow;
		this.selectableRow = -2;
		this.makeAnnotationSelectable(oldSelectableRow);
		this.blockChanged(null,null,0,null,oldSeq);
		saturn.client.WorkspaceApplication.resumeUpdates(true);
	}
	,autoSetBlockWidth: function(element) {
		if(window.navigator.appVersion.indexOf("Trident",0) > -1) element.style.width = 4 + this.editorCharWidth * this.blockSize + "px"; else element.style.width = 2 + this.editorCharWidth * this.blockSize + "px";
	}
	,setCursorPosition: function(region) {
		var startPosition = region.getStartPosition();
		var endPosition = region.getStopPosition();
		startPosition = startPosition + this.offSet;
		endPosition = endPosition + this.offSet;
		var positionStr = "";
		if(isNaN(startPosition) || startPosition == -1) positionStr = ""; else if(startPosition == endPosition) {
			startPosition = startPosition + 1;
			positionStr = startPosition + "";
		} else {
			startPosition = startPosition + 1;
			positionStr = startPosition + " - " + endPosition;
		}
		var annotationPositionStr = "";
		if(region.getAnnotationStartPosition() != null) {
			var annotationRow = region.getSelectedRow();
			annotationPositionStr = " ( " + this.getAnnotationLabel(annotationRow) + ": " + region.getAnnotationStartPosition() + " - " + region.getAnnotationStopPosition() + " ) ";
			saturn.core.Util.debug("Updating");
		}
		saturn.core.Util.debug("OffSet " + this.offSet);
		saturn.client.WorkspaceApplication.getApplication().setCentralInfoPanelText("Selected: " + positionStr + "  " + annotationPositionStr);
	}
	,onBlockBlur: function(block) {
		if(block.isInput == true) {
			var inputValue = block.previousSibling.value;
			block.textContent = inputValue;
			block.className = "molbio-sequenceeditor-block molbio-selectable";
			block.isInput = false;
			this.autoSetBlockWidth(block);
			this.inputFocused = null;
			block.parentNode.removeChild(block.previousElementSibling);
		}
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,clearAnnotationRows: function() {
		var _g1 = 0;
		var _g = this.annotationRowCount;
		while(_g1 < _g) {
			var k = _g1++;
			if(!this.isAnnotationOn(k)) continue;
			var _g3 = 0;
			var _g2 = this.annotationFields[k].length;
			while(_g3 < _g2) {
				var blockNumber = _g3++;
				var annotationBlock = this.annotationFields[k][blockNumber];
				annotationBlock.getElement().textContent = "";
			}
		}
	}
	,getAnnotationBlocks: function(annotationName) {
		if(this.annotationToRow.exists(annotationName)) return this.annotationFields[this.annotationToRow.get(annotationName)]; else return null;
	}
	,setSequence: function(sequence) {
		this.blockChanged(null,null,0,null,sequence);
	}
	,blockChanged: function(textField,blockNumber,startDelPosition,endDelPosition,newSequence) {
		saturn.client.WorkspaceApplication.suspendUpdates();
		var jConsole = console;
		var dWindow = window;
		var sequenceCursorPos;
		if(startDelPosition != null) sequenceCursorPos = startDelPosition; else sequenceCursorPos = textField.selectionEnd + (blockNumber - 1) * this.blockSize;
		if(newSequence == null) {
			var sequenceBuf = new StringBuf();
			var _g1 = 0;
			var _g = this.blockFields.length;
			while(_g1 < _g) {
				var i = _g1++;
				var block = this.blockFields[i];
				var field = block.getElement();
				if(field.isInput == true) {
					var localField = field.previousSibling;
					sequenceBuf.add(localField.value);
					localField.value = "";
				} else {
					if(field.textContent != null) sequenceBuf.add(field.textContent);
					field.textContent = "";
				}
			}
			this.sequence = sequenceBuf.b;
			if(startDelPosition != null) this.sequence = this.sequence.substring(0,startDelPosition) + this.sequence.substring(endDelPosition,this.sequence.length);
		} else {
			var _g11 = 0;
			var _g2 = this.blockFields.length;
			while(_g11 < _g2) {
				var i1 = _g11++;
				var block1 = this.blockFields[i1];
				var field1 = block1.getElement();
				if(field1.isInput == true) {
					var localField1 = field1.previousSibling;
					localField1.value = "";
				} else field1.textContent = "";
			}
			this.sequence = newSequence;
		}
		this.sequence = this.normaliseSequence(this.sequence);
		var pos = 0;
		var blockNum = 0;
		var seqLen = this.sequence.length;
		var blockWithCursor = null;
		var offSetPos = null;
		var blocksToAdd = 0;
		while(seqLen > pos) {
			var numChars;
			if(pos + this.blockSize > seqLen) numChars = seqLen - pos; else numChars = this.blockSize;
			if(blockNum > this.blockFields.length - 1) blocksToAdd++;
			pos += numChars;
			blockNum++;
		}
		if(blocksToAdd > 0) this.addSequenceRows(blocksToAdd);
		this.clearAnnotationRows();
		this.fireSequenceChanged();
		pos = 0;
		blockNum = 0;
		var cursorRegion = null;
		while(seqLen > pos) {
			var numChars1;
			if(pos + this.blockSize > seqLen) numChars1 = seqLen - pos; else numChars1 = this.blockSize;
			var blockSequence = HxOverrides.substr(this.sequence,pos,numChars1);
			if(blockNum > this.blockFields.length - 1) this.addSequenceRows(1);
			var _g12 = 0;
			var _g3 = this.annotationRowCount;
			while(_g12 < _g3) {
				var k = _g12++;
				if(!this.isAnnotationOn(k)) continue;
				var annotationBlock = this.annotationFields[k][blockNum];
				var annotationSeq = this.annotationSequences[k];
				var annotationSeqBlock;
				if(annotationSeq == null) annotationSeqBlock = ""; else {
					var annotationSeqLen = annotationSeq.length;
					if(annotationSeqLen == 0 || annotationSeqLen < pos) annotationSeqBlock = ""; else if(annotationSeqLen < pos + numChars1) {
						var charCount = annotationSeqLen - pos;
						annotationSeqBlock = HxOverrides.substr(annotationSeq,pos,charCount);
					} else annotationSeqBlock = HxOverrides.substr(this.annotationSequences[k],pos,numChars1);
				}
				annotationBlock.getElement().textContent = annotationSeqBlock;
			}
			var block2 = this.blockFields[blockNum++];
			var textFieldObj = block2.getElement();
			if(textFieldObj.isInput == true) textFieldObj.previousSibling.value = blockSequence; else textFieldObj.textContent = blockSequence;
			if(sequenceCursorPos > pos && sequenceCursorPos <= pos + numChars1) {
				offSetPos = sequenceCursorPos - (blockNum - 1) * this.blockSize;
				if(blockNum == blockNumber) {
					textFieldObj.previousSibling.setSelectionRange(offSetPos,offSetPos);
					var cursorPosition = (blockNum - 1) * this.blockSize + offSetPos;
					cursorRegion = new saturn.client.programs.sequenceeditor.SequenceRegion(cursorPosition,cursorPosition,-1);
					this.setCursorPosition(cursorRegion);
				} else blockWithCursor = block2;
			}
			pos += numChars1;
		}
		if(blockNum == 0) {
			blockNum = 1;
			blockWithCursor = this.blockFields[0];
			offSetPos = 1;
		}
		if(blockNum < this.blockFields.length) this.deleteBlockRows(blockNum);
		this.fireSequenceChanged();
		this.updateOutline();
		if(blockWithCursor != null) {
			var elem = blockWithCursor.getElement();
			elem.offSetPos = offSetPos;
			var etype = "mouseup";
			if(elem.fireEvent) elem.fireEvent("on" + etype); else {
				var dDocument = window.document;
				var evObj = dDocument.createEvent("Events");
				evObj.initEvent(etype,true,false);
				elem.dispatchEvent(evObj);
			}
		}
		this.getObject().setSequence(this.sequence);
		saturn.client.WorkspaceApplication.resumeUpdates(false);
	}
	,deleteBlockRows: function(blockNum) {
		var delFrom = Math.ceil(blockNum / this.columnCount) * this.columnCount;
		window.console.log("Deleting from  " + delFrom);
		var i = delFrom;
		while(i < this.blockFields.length) {
			var block = this.blockFields[i];
			var node = block.getElement();
			var parentNode = node.parentNode;
			if(node.isInput) {
				var _g = 0;
				var _g1 = parentNode.childNodes;
				while(_g < _g1.length) {
					var childNode = _g1[_g];
					++_g;
					if(childNode == node.inputNode) parentNode.removeChild(node.inputNode);
				}
			}
			parentNode.removeChild(node);
			var parentParentNode = parentNode.parentNode;
			if(parentParentNode != null) parentParentNode.removeChild(parentNode);
			var _g11 = 0;
			var _g2 = this.annotationRowCount;
			while(_g11 < _g2) {
				var k = _g11++;
				if(!this.isAnnotationOn(k)) continue;
				var annotationBlock = this.annotationFields[k][i];
				var node1 = annotationBlock.getElement();
				var parentNode1 = node1.parentNode;
				parentNode1.removeChild(node1);
				var parentParentNode1 = parentNode1.parentNode;
				if(parentParentNode1 != null) parentParentNode1.removeChild(parentNode1);
				annotationBlock.destroy();
			}
			i++;
			block.destroy();
		}
		var _g12 = delFrom;
		var _g3 = this.blockFields.length;
		while(_g12 < _g3) {
			var i1 = _g12++;
			this.blockFields.pop();
			var _g31 = 0;
			var _g21 = this.annotationRowCount;
			while(_g31 < _g21) {
				var k1 = _g31++;
				if(!this.isAnnotationOn(k1)) continue;
				this.annotationFields[k1].pop();
			}
		}
	}
	,fireSequenceChanged: function() {
		var _g = 0;
		var _g1 = this.sequenceChangeListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener.sequenceChanged(this.sequence);
		}
	}
	,addSequenceChangeListener: function(listener) {
		this.sequenceChangeListeners.push(listener);
	}
	,removeSequenceChangeListener: function(listener) {
		HxOverrides.remove(this.sequenceChangeListeners,listener);
	}
	,updateOutline: function() {
	}
	,cursorMoved: function(blockNumber,startPos,endPos) {
	}
	,selectionUpdated: function() {
		var selected = this.getSelectedRegion();
		if(this.lastSelected != null && selected != null && this.lastSelected.getStartPosition() == selected.getStartPosition() && selected.getStopPosition() == selected.getStartPosition()) return;
		this.lastSelected = selected;
		this.updateOutline();
		if(selected != null) {
			var sequence;
			if(selected.getSelectedRow() == -1) sequence = selected.getSequence(); else sequence = selected.getAnnotationSequence();
			this.getApplication().getMiddleSouthPanel().body.update(sequence);
			this.setCursorPosition(selected);
		} else this.setCursorPosition(new saturn.client.programs.sequenceeditor.SequenceRegion(-1,-1,-1));
	}
	,getLastSelected: function() {
		return this.lastSelected;
	}
	,setAnnotationSequence: function(annotationRow,annotationSequence) {
		this.annotationSequences[annotationRow] = annotationSequence;
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().enableProgramSearchField(true);
		var obj = this.getNewMoleculeInstance();
		this.getApplication().setProgramSearchFieldEmptyText("Find in " + Type.getClassName(obj == null?null:js.Boot.getClass(obj)).split(".").pop());
		this.getApplication().getMiddleSouthPanel().addCls("seq-breaking");
		var viewMenu = this.getApplication().getViewMenu();
		var self = this;
		this.viewAnnotations = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		viewMenu.add({ text : "Annotations", iconCls : "bmenu", menu : this.viewAnnotations});
		this.hideAnnotationsItem = viewMenu.add({ text : "Hide Annotations", hidden : true, handler : function() {
			self.hideAllAnnotations();
			_g.menuState.set("hideAnnotationsItem",false);
			_g.menuState.set("showAnnotationsItem",true);
		}});
		this.showAnnotationsItem = viewMenu.add({ text : "Show Annotations", handler : function() {
			self.showAllAnnotations();
			_g.menuState.set("hideAnnotationsItem",true);
			_g.menuState.set("showAnnotationsItem",false);
		}});
		if(this.menuState.exists("showAnnotationsItem")) {
			if(this.menuState.get("showAnnotationsItem")) this.showAnnotationsItem.show(); else this.showAnnotationsItem.hide();
		}
		if(this.menuState.exists("hideAnnotationsItem")) {
			if(this.menuState.get("hideAnnotationsItem")) this.hideAnnotationsItem.show(); else this.hideAnnotationsItem.hide();
		}
		this.addAnnotationMenuItems();
		var enableLiveUpdateItem = null;
		var disableLiveUpdateItem = null;
		var disableLabel = "Disable Live Update";
		var enableLabel = "Enable Live Update";
		disableLiveUpdateItem = this.viewAnnotations.add({ text : disableLabel, handler : function() {
			enableLiveUpdateItem.show();
			disableLiveUpdateItem.hide();
			_g.menuState.set(enableLabel,true);
			_g.menuState.set(disableLabel,false);
			_g.liveUpdateOn = false;
		}});
		enableLiveUpdateItem = this.viewAnnotations.add({ text : enableLabel, handler : function() {
			enableLiveUpdateItem.hide();
			disableLiveUpdateItem.show();
			_g.liveUpdateOn = true;
			_g.menuState.set(enableLabel,false);
			_g.menuState.set(disableLabel,true);
			_g.redraw();
		}});
		if(this.menuState.exists(disableLabel)) {
			if(this.menuState.get(disableLabel)) disableLiveUpdateItem.show(); else disableLiveUpdateItem.hide();
		}
		if(this.menuState.exists(enableLabel)) {
			if(this.menuState.get(enableLabel)) enableLiveUpdateItem.show(); else enableLiveUpdateItem.hide();
		} else enableLiveUpdateItem.hide();
		this.viewFastaMenuItem = viewMenu.add({ text : "FASTA", handler : function() {
			_g.switchToFasta();
		}});
		this.viewEditorMenuItem = viewMenu.add({ text : "Editor", handler : function() {
			_g.switchToEditor();
		}, hidden : true});
		this.fastaButton = this.getApplication().getToolBar().add({ text : "FASTA", handler : function() {
			_g.switchToFasta();
		}, iconCls : "x-btn-fasta-dna", tooltip : { dismissDelay : 10000, text : "View formatted as FASTA"}});
		this.editorButton = this.getApplication().getToolBar().add({ text : "Editor", handler : function() {
			_g.switchToEditor();
		}, iconCls : "x-btn-editor-dna", tooltip : { dismissDelay : 10000, text : "Switch back to editor view"}});
		this.editorButton.hide();
		this.getApplication().getToolBar().add({ text : "SeqFig", iconCls : "x-btn-gridvar", handler : function() {
			var alnMap = new haxe.ds.StringMap();
			var key = _g.getObjectName();
			var value = _g.getSequence();
			if(__map_reserved[key] != null) alnMap.setReserved(key,value); else alnMap.h[key] = value;
			var aln = new saturn.core.MSA(alnMap,[_g.getObjectName()]);
			var gridVar = new saturn.core.GridVar();
			gridVar.dataTableDefinition = saturn.client.programs.plugins.AlignmentGVPlugin.getTableDefinition(_g.getObjectName(),aln);
			gridVar.fit = true;
			gridVar.padding = false;
			gridVar.showXLabels = false;
			gridVar.configCollapse = false;
			var wo = new saturn.client.workspace.GridVarWO(gridVar,_g.getObjectName() + " (SeqFig)");
			saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(wo,true,null);
		}});
		if(this.menuState.exists("hideFastaMenuItem")) {
			if(this.menuState.get("hideFastaMenuItem")) {
				this.viewFastaMenuItem.hide();
				this.viewEditorMenuItem.show();
				this.fastaButton.hide();
				this.editorButton.show();
				this.switchToFasta();
			}
		}
		if(this.menuState.exists("hideEditorMenuItem")) {
			if(this.menuState.get("hideEditorMenuItem")) {
				this.viewEditorMenuItem.hide();
				this.switchToEditor();
				this.fastaButton.show();
				this.editorButton.hide();
			}
		}
		var editMenu = this.getApplication().getEditMenu();
		editMenu.add({ text : "Block size", handler : function() {
			var self1 = _g;
			Ext.Msg.prompt("Edit block size","Enter new block size",function(btn,text) {
				if(btn == "ok") self1.setBlockSize(Std.parseInt(text));
			});
		}});
		editMenu.add({ text : "Blocks per line", handler : function() {
			var self2 = _g;
			Ext.Msg.prompt("Edit row block number","Enter new row block count",function(btn1,text1) {
				if(btn1 == "ok") self2.setColumnCount(Std.parseInt(text1));
			});
		}});
		editMenu.add({ text : "Offset", handler : function() {
			var self3 = _g;
			Ext.Msg.prompt("Edit sequence offset","Enter sequence offset",function(btn2,text2) {
				if(btn2 == "ok") self3.setOffSet(Std.parseInt(text2));
			});
		}});
	}
	,switchToEditor: function() {
		this.theComponent.remove(this.fastaViewer,false);
		this.theComponent.add(this.theTable);
		this.theComponent.doLayout();
		this.viewFastaMenuItem.show();
		this.viewEditorMenuItem.hide();
		this.fastaButton.show();
		this.editorButton.hide();
		this.menuState.set("hideFastaMenuItem",false);
		this.menuState.set("hideEditorMenuItem",true);
		this.redraw();
	}
	,switchToFasta: function() {
		this.theComponent.remove(this.theTable,false);
		this.theComponent.add(this.fastaViewer);
		this.viewFastaMenuItem.hide();
		this.viewEditorMenuItem.show();
		this.fastaButton.hide();
		this.editorButton.show();
		this.menuState.set("hideFastaMenuItem",true);
		this.menuState.set("hideEditorMenuItem",false);
		this.updateFastaViewer();
		this.theComponent.doLayout();
	}
	,updateFastaViewer: function() {
		var name = this.getActiveObjectName();
		name = StringTools.replace(name," (DNA)","");
		name = StringTools.replace(name," (Protein)","");
		this.fastaViewer.el.dom.innerHTML = "<pre>" + saturn.core.FastaEntity.formatFastaFile(name,this.getSequence()) + "</pre>";
	}
	,setOffSet: function(offSet) {
		this.deleteBlockRows(0);
		this.offSet = offSet;
		this.redraw();
	}
	,setBlockSize: function(blockSize) {
		this.deleteBlockRows(0);
		this.blockSize = blockSize;
		this.redraw();
	}
	,setColumnCount: function(columnCount) {
		this.deleteBlockRows(0);
		this.columnCount = columnCount;
		this.redraw();
	}
	,hideAllAnnotations: function() {
		this.deleteBlockRows(0);
		this.setAnnotationsOn(false);
		var _g1 = 0;
		var _g = this.showAnnotationItems.length;
		while(_g1 < _g) {
			var i = _g1++;
			this.showAnnotationItems[i].show();
			this.hideAnnotationItems[i].hide();
		}
		this.redraw();
		this.showAnnotationsItem.show();
		this.hideAnnotationsItem.hide();
	}
	,showAllAnnotations: function() {
		this.deleteBlockRows(0);
		this.setAnnotationsOn(true);
		var _g1 = 0;
		var _g = this.showAnnotationItems.length;
		while(_g1 < _g) {
			var i = _g1++;
			this.hideAnnotationItems[i].show();
			this.showAnnotationItems[i].hide();
		}
		this.redraw();
		this.hideAnnotationsItem.show();
		this.showAnnotationsItem.hide();
	}
	,onBlur: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onBlur.call(this);
		this.getApplication().getMiddleSouthPanel().removeCls("seq-breaking");
	}
	,getSelectedRegion: function() {
		if(this.sequence == null) return null;
		var focusNode = window.document.activeElement;
		var sequenceRegion = null;
		if(focusNode != null) {
			if(focusNode.tagName == "INPUT") {
				var startOffSet = focusNode.selectionStart;
				var stopOffSet = focusNode.selectionEnd;
				var blockNumber = focusNode.blockNumber;
				var cursorStartPosition = (blockNumber - 1) * this.blockSize + startOffSet;
				var cursorEndPosition = (blockNumber - 1) * this.blockSize + stopOffSet;
				var forwardSelection = true;
				if(cursorStartPosition > cursorEndPosition) {
					var tmp = cursorStartPosition;
					cursorStartPosition = cursorEndPosition;
					cursorEndPosition = tmp;
					forwardSelection = false;
				}
				sequenceRegion = new saturn.client.programs.sequenceeditor.SequenceRegion(cursorStartPosition,cursorEndPosition,this.getSelectableRow());
				sequenceRegion.setIsForward(forwardSelection);
			}
		}
		if(sequenceRegion == null) {
			var dWindow = window;
			var sel = dWindow.getSelection();
			var retVal = null;
			if(sel.rangeCount) {
				if(sel.anchorNode != null && sel.anchorNode.parentNode != null) {
					var anchorOffSet = sel.anchorOffset;
					var focusOffSet = sel.focusOffset;
					if(Object.prototype.hasOwnProperty.call(sel.anchorNode,"blockNumber")) sel.anchorNode.parentNode = sel.anchorNode;
					var anchorParentNode = sel.anchorNode.parentNode;
					if(anchorParentNode.tagName == "FONT") {
						anchorParentNode = anchorParentNode.parentNode;
						anchorOffSet += Std.parseInt(sel.anchorNode.parentNode.getAttribute("seq_position_offset"));
					}
					var anchorBlockNumber = anchorParentNode.blockNumber;
					var anchorBOffSet = null;
					if(anchorBlockNumber == null) {
						anchorBlockNumber = anchorParentNode.getAttribute("blockNumber");
						anchorBOffSet = Std.parseInt(anchorParentNode.getAttribute("block_part_start"));
					}
					var focusParentNode = sel.focusNode.parentNode;
					if(focusParentNode.tagName == "FONT") {
						focusParentNode = focusParentNode.parentNode;
						focusOffSet += Std.parseInt(sel.focusNode.parentNode.getAttribute("seq_position_offset"));
					}
					var focusBlockNumber = focusParentNode.blockNumber;
					var focusBOffSet = null;
					if(focusBlockNumber == null) {
						focusBlockNumber = focusParentNode.getAttribute("blockNumber");
						focusBOffSet = Std.parseInt(focusParentNode.getAttribute("block_part_start"));
					}
					if(focusBOffSet == null) focusBOffSet = 0;
					if(anchorBOffSet == null) anchorBOffSet = 0;
					if(!(focusBlockNumber == null && anchorBlockNumber == null)) {
						var focusRealPosition = 0;
						var anchorRealPosition = 0;
						if(focusBlockNumber == null) {
							focusRealPosition = this.sequence.length;
							anchorRealPosition = anchorBOffSet + anchorOffSet + (anchorBlockNumber - 1) * this.blockSize;
						} else {
							focusRealPosition = focusBOffSet + focusOffSet + (focusBlockNumber - 1) * this.blockSize;
							if(anchorBlockNumber == null) anchorRealPosition = this.sequence.length; else anchorRealPosition = anchorBOffSet + anchorOffSet + (anchorBlockNumber - 1) * this.blockSize;
						}
						var startPosition;
						if(anchorRealPosition < focusRealPosition) startPosition = anchorRealPosition; else startPosition = focusRealPosition;
						var endPosition;
						if(anchorRealPosition == startPosition) endPosition = focusRealPosition; else endPosition = anchorRealPosition;
						sequenceRegion = new saturn.client.programs.sequenceeditor.SequenceRegion(startPosition,endPosition,this.getSelectableRow());
					}
				}
			}
		}
		if(sequenceRegion == null || this.sequence == null) return null; else {
			var selectedSequence = this.sequence.substring(sequenceRegion.getStartPosition(),sequenceRegion.getStopPosition());
			sequenceRegion.setSequence(selectedSequence);
			if(sequenceRegion.getSelectedRow() >= 0) {
				var annotationSequence;
				var _this = this.annotationSequences[sequenceRegion.getSelectedRow()];
				var pos = sequenceRegion.getStartPosition();
				var len = sequenceRegion.getStopPosition();
				annotationSequence = HxOverrides.substr(_this,pos,len);
				sequenceRegion.setAnnotationSequence(annotationSequence);
			}
			return sequenceRegion;
		}
	}
	,getSelectedSequence: function() {
		var region = this.getSelectedRegion();
		if(region == null || this.sequence == null) return null; else return this.getSelectedRegion().getSequence();
	}
	,clearSelection: function() {
		var dWindow = window;
		var sel = dWindow.getSelection();
		if(sel.empty) sel.empty();
	}
	,generateRowLabel: function(rowLabel) {
		var lineNumberBlock;
		var _this = window.document;
		lineNumberBlock = _this.createElement("span");
		lineNumberBlock.textContent = rowLabel;
		lineNumberBlock.style.display = "inline-block";
		lineNumberBlock.style.width = "100px";
		lineNumberBlock.style.textAlign = "right";
		lineNumberBlock.className = "molbio-sequenceeditor-row-label";
		saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable(lineNumberBlock,false);
		return lineNumberBlock;
	}
	,makeAnnotationSelectable: function(annotationNumber) {
		if(annotationNumber != this.selectableRow) {
			if(this.selectableRow == -1) {
				var _g1 = 0;
				var _g = this.blockFields.length;
				while(_g1 < _g) {
					var i = _g1++;
					var blockField = this.blockFields[i];
					saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable(blockField.getElement(),false);
				}
			} else if(this.selectableRow > -2) {
				var _g11 = 0;
				var _g2 = this.annotationFields[this.selectableRow].length;
				while(_g11 < _g2) {
					var i1 = _g11++;
					var annotationField = this.annotationFields[this.selectableRow][i1];
					annotationField.makeSelectable(false);
				}
			}
			if(annotationNumber == -1) {
				var _g12 = 0;
				var _g3 = this.blockFields.length;
				while(_g12 < _g3) {
					var i2 = _g12++;
					var blockField1 = this.blockFields[i2];
					saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable(blockField1.getElement(),true);
				}
			} else {
				var _g13 = 0;
				var _g4 = this.annotationFields[annotationNumber].length;
				while(_g13 < _g4) {
					var i3 = _g13++;
					var annotationField1 = this.annotationFields[annotationNumber][i3];
					annotationField1.makeSelectable(true);
				}
			}
			this.selectableRow = annotationNumber;
		}
	}
	,serialise: function() {
		var object = saturn.client.programs.SimpleExtJSProgram.prototype.serialise.call(this);
		object.OFFSET = this.offSet;
		object.BLOCK_SIZE = this.blockSize;
		object.COLUMN_COUNT = this.columnCount;
		return object;
	}
	,deserialise: function(object) {
		saturn.client.programs.SimpleExtJSProgram.prototype.deserialise.call(this,object);
		this.offSet = object.OFFSET;
		this.blockSize = object.BLOCK_SIZE;
		this.columnCount = object.COLUMN_COUNT;
	}
	,getSequence: function() {
		return this.sequence;
	}
	,normaliseSequence: function(sequence) {
		if(sequence.indexOf(">") > -1) {
			var objs = saturn.core.FastaEntity.parseFasta(sequence);
			if(objs != null && objs.length > 0) {
				var obj = objs[0];
				this.getWorkspace().renameWorkspaceObject(this.getActiveObjectId(),obj.getName());
				sequence = obj.getSequence();
			}
		}
		sequence = saturn.client.programs.sequenceeditor.SequenceEditor.reg_newLine.replace(sequence,"");
		sequence = saturn.client.programs.sequenceeditor.SequenceEditor.reg_carReturn.replace(sequence,"");
		var entity = this.getEntity();
		if(entity == null || !js.Boot.__instanceof(entity,saturn.core.domain.SgcRestrictionSite)) sequence = saturn.client.programs.sequenceeditor.SequenceEditor.reg_star.replace(sequence,"");
		sequence = saturn.client.programs.sequenceeditor.SequenceEditor.reg_whiteSpace.replace(sequence,"");
		sequence = saturn.client.programs.sequenceeditor.SequenceEditor.reg_num.replace(sequence,"");
		sequence = sequence.toUpperCase();
		return sequence;
	}
	,redrawSequenceOnly: function() {
		this.findAnnotationOn = false;
		var blockSequence = "";
		var blockSeqLen = 0;
		var blockNumber = 0;
		var _g1 = 0;
		var _g = this.sequence.length;
		while(_g1 < _g) {
			var i = _g1++;
			blockSequence += this.sequence.charAt(i);
			blockSeqLen++;
			if(blockSeqLen == this.blockSize) {
				var block = this.blockFields[blockNumber];
				var textFieldObj = block.getElement();
				textFieldObj.innerHTML = blockSequence;
				blockSequence = "";
				blockNumber++;
				blockSeqLen = 0;
			}
		}
		if(blockSequence != "") {
			var block1 = this.blockFields[blockNumber];
			var textFieldObj1 = block1.getElement();
			textFieldObj1.innerHTML = blockSequence;
		}
	}
	,getNewMoleculeInstance: function() {
		return new saturn.core.molecule.Molecule(this.sequence);
	}
	,findSequence: function(search) {
		this.redrawSequenceOnly();
		var wsub = new EReg("\\s+","g");
		search = wsub.replace(search,"");
		var mol = this.getNewMoleculeInstance();
		var positions = mol.findMatchingLocuses(search);
		if(positions.length < 1) return;
		this.findAnnotationOn = true;
		var startPositions = new haxe.ds.IntMap();
		var stopPositions = new haxe.ds.IntMap();
		var missMatchPositions = new haxe.ds.IntMap();
		var _g = 0;
		while(_g < positions.length) {
			var position = positions[_g];
			++_g;
			startPositions.h[position.start] = 1;
			stopPositions.h[position.end] = 1;
			if(position.missMatchPositions != null) {
				var _g1 = 0;
				var _g2 = position.missMatchPositions;
				while(_g1 < _g2.length) {
					var position1 = _g2[_g1];
					++_g1;
					missMatchPositions.h[position1] = 1;
				}
			}
		}
		var blockSequence = "<font color=\"black\" seq_position_offset=\"0\">";
		var inAnnotationBlock = false;
		var blockNumber = 0;
		var blockSeqLen = 0;
		var matchColor = "#90ec8d";
		var missmatchColor = "#FF7DC8";
		var _g11 = 0;
		var _g3 = this.sequence.length;
		while(_g11 < _g3) {
			var i = _g11++;
			if(startPositions.h.hasOwnProperty(i)) {
				if(missMatchPositions.h.hasOwnProperty(i)) {
					blockSequence += "</font><font color=\"" + missmatchColor + "\" seq_position_offset=\"" + blockSeqLen + "\">" + this.sequence.charAt(i) + "</font>";
					blockSequence += "</font><font color=\"" + matchColor + "\" seq_position_offset=\"" + (blockSeqLen + 1) + "\">";
				} else {
					blockSequence += "</font><font color=\"" + matchColor + "\" seq_position_offset=\"" + blockSeqLen + "\">";
					blockSequence += this.sequence.charAt(i);
				}
				if(stopPositions.h.hasOwnProperty(i)) {
					blockSequence += "</font>";
					blockSequence += "<font color=\"black\" seq_position_offset=\"" + (blockSeqLen + 1) + "\">";
					inAnnotationBlock = false;
				} else inAnnotationBlock = true;
			} else if(stopPositions.h.hasOwnProperty(i)) {
				if(missMatchPositions.h.hasOwnProperty(i)) blockSequence += "<font color=\"" + missmatchColor + "\" seq_position_offset=\"" + blockSeqLen + "\">" + this.sequence.charAt(i) + "</font></font>"; else blockSequence += this.sequence.charAt(i) + "</font>";
				blockSequence += "<font color=\"black\" seq_position_offset=\"" + (blockSeqLen + 1) + "\">";
				inAnnotationBlock = false;
			} else if(missMatchPositions.h.hasOwnProperty(i)) {
				if(inAnnotationBlock) blockSequence += "</font>";
				blockSequence += "<font color=\"" + missmatchColor + "\" seq_position_offset=\"" + blockSeqLen + "\">" + this.sequence.charAt(i) + "</font>";
				if(inAnnotationBlock) blockSequence += "<font color=\"" + matchColor + "\" seq_position_offset=\"" + (blockSeqLen + 1) + "\">"; else blockSequence += "<font color=\"black\" seq_position_offset=\"" + (blockSeqLen + 1) + "\">";
			} else blockSequence += this.sequence.charAt(i);
			blockSeqLen++;
			if(blockSeqLen == this.blockSize) {
				var block = this.blockFields[blockNumber];
				var textFieldObj = block.getElement();
				if(inAnnotationBlock) blockSequence += "</font>";
				textFieldObj.innerHTML = blockSequence;
				blockSequence = "<font color=\"black\" seq_position_offset=\"0\">";
				if(inAnnotationBlock) blockSequence += "<font color=\"" + matchColor + "\" seq_position_offset=\"" + blockSeqLen + "\">";
				blockNumber++;
				blockSeqLen = 0;
			}
		}
		if(blockSequence != "") {
			var block1 = this.blockFields[blockNumber];
			var textFieldObj1 = block1.getElement();
			if(inAnnotationBlock) blockSequence += "</font>";
			textFieldObj1.innerHTML = blockSequence;
		}
	}
	,search: function(regex) {
		saturn.client.programs.SimpleExtJSProgram.prototype.search.call(this,regex);
		this.findSequence(regex);
	}
	,__class__: saturn.client.programs.sequenceeditor.SequenceEditor
});
saturn.client.programs.sequenceeditor.SequenceChangeListener = $hxClasses["saturn.client.programs.sequenceeditor.SequenceChangeListener"] = function() { };
saturn.client.programs.sequenceeditor.SequenceChangeListener.__name__ = ["saturn","client","programs","sequenceeditor","SequenceChangeListener"];
saturn.client.programs.sequenceeditor.SequenceChangeListener.prototype = {
	sequenceChanged: null
	,__class__: saturn.client.programs.sequenceeditor.SequenceChangeListener
};
saturn.client.workspace.DNAWorkspaceObject = $hxClasses["saturn.client.workspace.DNAWorkspaceObject"] = function(object,name) {
	if(object == null) object = new saturn.core.DNA("");
	if(name == null) name = "DNA Sequence";
	this.iconPath = "/static/js/images/dna_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.DNAWorkspaceObject.__name__ = ["saturn","client","workspace","DNAWorkspaceObject"];
saturn.client.workspace.DNAWorkspaceObject.getNewMenuText = function() {
	return "DNA Sequence";
};
saturn.client.workspace.DNAWorkspaceObject.getDefaultFolderName = function() {
	return "DNA";
};
saturn.client.workspace.DNAWorkspaceObject.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.DNAWorkspaceObject.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	clone: function() {
		if(js.Boot.__instanceof(this.object,saturn.core.RestrictionSite)) return new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.RestrictionSite(this.object.getSequence()),this.getName() + " (duplicate)"); else return new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(this.object.getSequence()),this.getName() + " (duplicate)");
	}
	,getDNAObject: function() {
		return js.Boot.__cast(this.object , saturn.core.DNA);
	}
	,setDNAObject: function(dnaObject) {
		this.object = dnaObject;
	}
	,__class__: saturn.client.workspace.DNAWorkspaceObject
});
saturn.client.workspace.PrimerWorkspaceObject = $hxClasses["saturn.client.workspace.PrimerWorkspaceObject"] = function(object,name) {
	if(object == null) object = new saturn.core.Primer("");
	if(name == null) name = "Primer Sequence";
	saturn.client.workspace.DNAWorkspaceObject.call(this,object,name);
};
saturn.client.workspace.PrimerWorkspaceObject.__name__ = ["saturn","client","workspace","PrimerWorkspaceObject"];
saturn.client.workspace.PrimerWorkspaceObject.getNewMenuText = function() {
	return "Primer";
};
saturn.client.workspace.PrimerWorkspaceObject.__super__ = saturn.client.workspace.DNAWorkspaceObject;
saturn.client.workspace.PrimerWorkspaceObject.prototype = $extend(saturn.client.workspace.DNAWorkspaceObject.prototype,{
	getPrimer: function() {
		return js.Boot.__cast(this.getDNAObject() , saturn.core.Primer);
	}
	,__class__: saturn.client.workspace.PrimerWorkspaceObject
});
saturn.client.programs.DNASequenceEditor = $hxClasses["saturn.client.programs.DNASequenceEditor"] = function() {
	saturn.client.programs.sequenceeditor.SequenceEditor.call(this);
};
saturn.client.programs.DNASequenceEditor.__name__ = ["saturn","client","programs","DNASequenceEditor"];
saturn.client.programs.DNASequenceEditor.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.DNASequenceEditor.processABIFile = function(base64,load,cb) {
	saturn.client.BioinformaticsServicesClient.getClient().sendABIReportRequest(base64,function(data,error) {
		var obj = JSON.parse(data);
		js.Browser.alert("hello");
	});
};
saturn.client.programs.DNASequenceEditor.parseFile = function(file,cb,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	var load;
	if(cb == null) load = true; else load = false;
	var extension = saturn.client.core.CommonCore.getFileExtension(file.name);
	if(extension == "ab1") saturn.client.core.CommonCore.getFileAsArrayBuffer(file,function(content) {
		var base64 = saturn.client.core.CommonCore.convertArrayBufferToBase64(content);
		saturn.client.programs.DNASequenceEditor.processABIFile(base64,load,cb);
	}); else saturn.client.core.CommonCore.getFileAsText(file,function(content1) {
		var objs = null;
		if(extension == "fasta") objs = saturn.client.programs.DNASequenceEditor.parseFastaString(content1,load,asNewOpenProgram); else if(extension == "seq") objs = saturn.client.programs.DNASequenceEditor.parseSequenceString(content1,file.name,load,asNewOpenProgram);
		if(cb != null && objs != null) cb(objs);
	});
};
saturn.client.programs.DNASequenceEditor.parseSequenceString = function(contents,name,load,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	if(load == null) load = false;
	var seqObjs = [];
	seqObjs.push(new saturn.core.FastaEntity(name,contents));
	if(load) saturn.client.programs.DNASequenceEditor.loadFastaEntitiesIntoWorkspace(seqObjs,asNewOpenProgram);
	return seqObjs;
};
saturn.client.programs.DNASequenceEditor.parseFastaString = function(contents,load,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	if(load == null) load = false;
	var headerPattern1 = new EReg("^>(.+)","");
	var seqObjs = [];
	var currentName = null;
	var currentSeqBuf = new StringBuf();
	var lines = contents.split("\n");
	if(lines.length == 1) lines = contents.split(" ");
	var numLines = lines.length;
	var app = saturn.client.WorkspaceApplication.getApplication();
	app.printInfo("Lines: " + numLines);
	var _g = 0;
	while(_g < numLines) {
		var i = _g++;
		var seqLine = true;
		var line = lines[i];
		if(headerPattern1.match(line)) seqLine = false;
		if(seqLine == true) if(line == null) currentSeqBuf.b += "null"; else currentSeqBuf.b += "" + line;
		if(seqLine == false || i == numLines - 1) {
			if(currentName != null) {
				var currentSeq = currentSeqBuf.b;
				if(currentSeq.length > 0) {
					seqObjs.push(new saturn.core.FastaEntity(currentName,currentSeq));
					currentSeqBuf = new StringBuf();
				}
			}
			if(seqLine == false) currentName = headerPattern1.matched(1);
		}
	}
	if(load) saturn.client.programs.DNASequenceEditor.loadFastaEntitiesIntoWorkspace(seqObjs,asNewOpenProgram);
	return seqObjs;
};
saturn.client.programs.DNASequenceEditor.loadFastaEntitiesIntoWorkspace = function(seqObjs,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	var workspace = saturn.client.WorkspaceApplication.getApplication().getWorkspace();
	saturn.client.WorkspaceApplication.getApplication().getWorkspace().beginUpdate();
	var _g = 0;
	while(_g < seqObjs.length) {
		var seqObj = seqObjs[_g];
		++_g;
		var isDNA = true;
		var sequence = seqObj.getSequence();
		var dnaObj = new saturn.core.DNA(sequence);
		sequence = dnaObj.getSequence();
		var sLen = sequence.length;
		if(sLen > 20) sLen = 20;
		var _g1 = 0;
		while(_g1 < sLen) {
			var i = _g1++;
			var _g2 = sequence.charAt(i);
			switch(_g2) {
			case "A":case "T":case "C":case "G":case "N":case "X":
				isDNA;
				break;
			default:
				isDNA = false;
			}
		}
		if(isDNA) workspace._addObject(new saturn.client.workspace.DNAWorkspaceObject(dnaObj,seqObj.getName()),asNewOpenProgram,false); else workspace._addObject(new saturn.client.workspace.ProteinWorkspaceObject(new saturn.core.Protein(sequence),seqObj.getName()),asNewOpenProgram,false);
		asNewOpenProgram = false;
	}
	workspace.reloadWorkspace();
};
saturn.client.programs.DNASequenceEditor.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-dna", html : "DNA<br/>Editor", cls : "quickLaunchButton", handler : function() {
		var dna = new saturn.core.DNA("");
		dna.setMoleculeName("DNA");
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(dna,true);
	}, tooltip : { dismissDelay : 10000, text : "Editor for DNA sequences.<br/>Supports annotations and submission to BLAST."}}];
};
saturn.client.programs.DNASequenceEditor.__super__ = saturn.client.programs.sequenceeditor.SequenceEditor;
saturn.client.programs.DNASequenceEditor.prototype = $extend(saturn.client.programs.sequenceeditor.SequenceEditor.prototype,{
	selectedStatsFolder: null
	,lastWasMouseMoved: null
	,frameOffSet: null
	,tmCalcEngine: null
	,proteinItemsMenu: null
	,emptyInit: function() {
		this.tmCalcEngine = new saturn.core.TmCalc();
		this.setDefaultAnnotationEditorBlockClass(saturn.client.programs.DNAAnnotationSequenceEditorBlock);
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.emptyInit.call(this);
		this.frameOffSet = 0;
		this.selectedStatsFolder = null;
		this.lastWasMouseMoved = false;
		this.setAnnotationCount(6);
		this.setAnnotationPosition(0,saturn.client.programs.sequenceeditor.AnnotationPosition.TOP);
		this.setAnnotationPosition(1,saturn.client.programs.sequenceeditor.AnnotationPosition.TOP);
		this.setAnnotationPosition(2,saturn.client.programs.sequenceeditor.AnnotationPosition.TOP);
		this.setAnnotationLabel(0,"Frame 1");
		this.setAnnotationLabel(1,"Frame 2");
		this.setAnnotationLabel(2,"Frame 3");
		this.setAnnotationLabel(3,"Reverse Frame 1");
		this.setAnnotationLabel(4,"Reverse Frame 2");
		this.setAnnotationLabel(5,"Reverse Frame 3");
		this.addSequenceChangeListener(this);
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.setActiveObject.call(this,objectId);
		var dnaObject = this.getActiveObject(saturn.client.workspace.DNAWorkspaceObject);
		var object;
		if(js.Boot.__instanceof(dnaObject,saturn.core.DNA)) object = dnaObject; else object = dnaObject.getDNAObject();
		var sequence = object.getSequence();
		if(js.Boot.__instanceof(object,saturn.core.RestrictionSite)) sequence = (js.Boot.__cast(object , saturn.core.RestrictionSite)).getStarSequence();
		this.blockChanged(null,null,0,null,sequence);
		this.updateProteinMenuItems();
	}
	,onFocus: function() {
		var _g2 = this;
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.onFocus.call(this);
		var self = this;
		var viewMenu = this.getApplication().getViewMenu();
		var toolsMenu = this.getApplication().getToolsMenu();
		var blastMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		toolsMenu.add({ text : "BLAST", iconCls : "bmenu", menu : blastMenu, cls : "menu-item-FILE"});
		var blastItems = [];
		var blastDatabases = saturn.client.BioinformaticsServicesClient.getClient(null).getBlastList().DNA;
		var _g = 0;
		var _g1 = Reflect.fields(blastDatabases);
		while(_g < _g1.length) {
			var dbName = [_g1[_g]];
			++_g;
			var blastItem = blastMenu.add({ text : dbName[0], hidden : false, handler : (function(dbName) {
				return function() {
					var blastName = "Blastn " + _g2.getActiveObject(saturn.client.workspace.DNAWorkspaceObject).getName() + " 1 - " + self.sequence.length;
					self.blastSequence(self.sequence,dbName[0],blastName);
				};
			})(dbName)});
			blastItems.push({ text : dbName[0], hidden : false, handler : (function(dbName) {
				return function() {
					var blastName1 = "Blastn " + _g2.getActiveObject(saturn.client.workspace.DNAWorkspaceObject).getName() + " 1 - " + self.sequence.length;
					self.blastSequence(self.sequence,dbName[0],blastName1);
				};
			})(dbName)});
		}
		var blastButton = Ext.create("Ext.button.Button",{ renderTo : Ext.getBody(), text : "BLAST", handler : function() {
		}, menu : Ext.create("Ext.menu.Menu",{ items : blastItems}), iconCls : "x-btn-blast", cls : "x-btn-split-black-background", tooltip : { dismissDelay : 10000, text : "BLAST against a sequence database"}});
		this.getApplication().getToolBar().add(blastButton);
		this.getApplication().getEditMenu().add({ text : "Frame OffSet", handler : function() {
			Ext.Msg.prompt("Edit Frame OffSet","Enter new Frame OffSet",function(btn,text) {
				if(btn == "ok") self.setFrameOffSet(Std.parseInt(text));
			});
		}});
		this.getApplication().getEditMenu().add({ text : "Inverse complement", handler : function() {
			_g2.inverseComplement();
		}});
		this.getApplication().getEditMenu().add({ text : "Complement", handler : function() {
			_g2.complement();
		}});
		this.getApplication().getEditMenu().add({ text : "Inverse", handler : function() {
			_g2.inverse();
		}});
		this.getApplication().getToolBar().add({ html : "Inverse<br/>Complement", handler : function() {
			_g2.inverseComplement();
		}, iconCls : "x-btn-inverse-complement", tooltip : { dismissDelay : 10000, text : "Inverse complement sequence"}});
		this.getApplication().getToolBar().add({ html : "Complement", handler : function() {
			_g2.complement();
		}, tooltip : { dismissDelay : 10000, text : "Complement sequence"}});
		this.getApplication().getToolBar().add({ html : "Inverse", handler : function() {
			_g2.inverse();
		}, tooltip : { dismissDelay : 10000, text : "Inverse sequence"}});
		this.installOutlineTree();
		this.updateOutline();
		this.getApplication().getExportMenu().add({ text : "FASTA", handler : function() {
			var name = _g2.getActiveObjectName();
			name = StringTools.replace(name," (DNA)","");
			var contents = saturn.core.FastaEntity.formatFastaFile(name,_g2.getSequence());
			_g2.getApplication().saveTextFile(contents,name + ".fasta");
		}});
		var importMenu = this.getApplication().getImportMenu();
		var frames = [saturn.core.Frame.ONE,saturn.core.Frame.TWO,saturn.core.Frame.THREE];
		var _g3 = 0;
		while(_g3 < 2) {
			var j = [_g3++];
			var _g11 = 1;
			while(_g11 < 4) {
				var i = [_g11++];
				var label = "Import Frame " + i[0];
				if(j[0] == 1) label += " (reverse)";
				importMenu.add({ text : label, handler : (function(i,j) {
					return function() {
						var dna = new saturn.core.DNA(_g2.getSequence());
						if(j[0] == 1) dna = new saturn.core.DNA(dna.getInverseComplement());
						var protein = new saturn.core.Protein(dna.getFrameTranslation(saturn.core.GeneticCodes.STANDARD,frames[i[0] - 1]));
						_g2.getWorkspace()._addObject(new saturn.client.workspace.ProteinWorkspaceObject(protein,_g2.getActiveObjectName() + " (Frame " + i[0] + ")"),true,true);
					};
				})(i,j)});
			}
		}
		this.proteinItemsMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		this.getApplication().getToolBar().add({ text : "Load Protein", menu : this.proteinItemsMenu});
		this.updateProteinMenuItems();
	}
	,updateProteinMenuItems: function() {
		var _g1 = this;
		var dnaObj = this.getEntity();
		if(dnaObj != null) {
			var proteinNames = dnaObj.getProteinNames();
			var _g = 0;
			while(_g < proteinNames.length) {
				var name = [proteinNames[_g]];
				++_g;
				this.proteinItemsMenu.add({ text : name[0], hidden : false, handler : (function(name) {
					return function() {
						var prot = dnaObj.getProtein(name[0]);
						prot.setName(dnaObj.getName() + "(" + name[0] + ")");
						_g1.getWorkspace().addObject(prot,true);
					};
				})(name)});
			}
		}
	}
	,loadProtein: function() {
		var entity = this.getEntity();
		if(entity != null) {
			var prot = entity.getProtein();
			this.getWorkspace().addObject(prot,true);
		}
	}
	,updateModelField: function(obj,field,value) {
		var d;
		d = js.Boot.__cast(this.getObject() , saturn.core.DNA);
		if(d.isLinked()) {
			if(d.linkedOriginField == field) {
				saturn.client.programs.sequenceeditor.SequenceEditor.prototype.updateModelField.call(this,obj,field,this.getSequence());
				return;
			}
		}
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.updateModelField.call(this,obj,field,value);
	}
	,setFrameOffSet: function(offSet) {
		this.frameOffSet = offSet;
	}
	,blastSequence: function(theSequence,database,blastName) {
		var _g = this;
		saturn.client.BioinformaticsServicesClient.getClient().sendBlastReportRequest(theSequence,blastName,database,function(response,error) {
			if(error == null) {
				var reportFile = response.json.reportFile;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + reportFile;
				var webPage = new saturn.client.workspace.WebPage();
				webPage.setURL(dstURL);
				var w0 = new saturn.client.workspace.WebPageWorkspaceObject(webPage,blastName);
				_g.getApplication().getWorkspace()._addObject(w0,true,true,"BLAST");
			} else _g.getApplication().showMessage("BLAST Error",error);
		});
	}
	,inverseComplement: function() {
		var dnaObj = new saturn.core.DNA(this.sequence);
		this.blockChanged(null,null,0,null,dnaObj.getInverseComplement());
	}
	,complement: function() {
		var dnaObj = new saturn.core.DNA(this.sequence);
		this.blockChanged(null,null,0,null,dnaObj.getComplement());
	}
	,inverse: function() {
		var dnaObj = new saturn.core.DNA(this.sequence);
		this.blockChanged(null,null,0,null,dnaObj.getInverse());
	}
	,getNewMoleculeInstance: function() {
		return new saturn.core.DNA(this.sequence);
	}
	,onBlur: function() {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.onBlur.call(this);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
	}
	,installOutlineTree: function() {
		this.getApplication().installOutlineTree("DEFAULT",true,false,null);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var folderNames = ["Current","Selected"];
		Ext.suspendLayouts();
		var _g = 0;
		while(_g < folderNames.length) {
			var folderName = folderNames[_g];
			++_g;
			var gcContentStr = "0";
			var dnaNucCountStr = "0";
			var currentStats = rootNode.appendChild({ text : folderName, leaf : false, expanded : true, id : folderName});
			var gcContentItem = currentStats.appendChild({ text : "% GC : " + gcContentStr, leaf : true, id : folderName + " : GC"});
			var nucContentItem = currentStats.appendChild({ text : "Length : " + dnaNucCountStr, leaf : true, id : folderName + " : Length"});
			if(folderName == "Selected") {
				var nucContentItem1 = currentStats.appendChild({ text : "Melting Temp : ", leaf : true, id : folderName + " : Melting Temp"});
			}
		}
		Ext.resumeLayouts(true);
	}
	,blockChanged: function(textField,blockNumber,startDelPosition,endDelPosition,newSequence) {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.blockChanged.call(this,textField,blockNumber,startDelPosition,endDelPosition,newSequence);
	}
	,selectionUpdated: function() {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.selectionUpdated.call(this);
	}
	,getSequenceEditorBlock: function(blockNumber,editor) {
		return new saturn.client.programs.DNASequenceEditorBlock(blockNumber,editor);
	}
	,updateStatsPanel: function(folderName,dnaObj) {
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var gcContentStr = "0";
		var dnaNucCountStr = "0";
		var meltingTempStr = "0";
		if(dnaObj != null) {
			var gcContent = dnaObj.getGCFraction();
			gcContentStr = Std.string(saturn.util.MathUtils.sigFigs(gcContent * 100,2));
			if(gcContentStr == "NaN") gcContentStr = "0";
			dnaNucCountStr = "" + dnaObj.getLength();
			if(folderName == "Selected") meltingTempStr = "" + saturn.util.MathUtils.sigFigs(this.tmCalcEngine.tmCalculation(dnaObj,50,300),2);
		}
		var node = dataStore.getNodeById(folderName + " : Length");
		if(node != null) {
			node.set("text","Length : " + dnaNucCountStr);
			node.commit();
			node = dataStore.getNodeById(folderName + " : GC");
			node.set("text","% GC : " + gcContentStr);
			node.commit();
			if(folderName == "Selected") {
				var node1 = dataStore.getNodeById(folderName + " : Melting Temp");
				node1.set("text","Melting Temp : " + meltingTempStr);
				node1.commit();
			}
		}
	}
	,updateOutline: function() {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.updateOutline.call(this);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var dnaObj = null;
		if(this.sequence != null && this.sequence != "") {
			var wO = this.getActiveObject(saturn.client.workspace.DNAWorkspaceObject);
			if(wO == null) dnaObj = new saturn.core.DNA(""); else if(js.Boot.__instanceof(wO,saturn.core.DNA)) dnaObj = wO; else dnaObj = wO.getDNAObject();
		}
		this.updateStatsPanel("Current",dnaObj);
		if(this.inMouseMove || this.lastWasMouseMoved) {
			var subSeq;
			if(this.getSelectableRow() != -1) subSeq = ""; else subSeq = this.getSelectedSequence();
			if(subSeq != null) {
				if(this.inMouseMove == false) subSeq = "";
			} else subSeq = "";
			dnaObj = new saturn.core.DNA(subSeq);
			this.updateStatsPanel("Selected",dnaObj);
			if(this.inMouseMove) this.lastWasMouseMoved = true; else this.lastWasMouseMoved = false;
		}
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
		var _g = this;
		var extension = saturn.client.core.CommonCore.getFileExtension(file.name);
		if(extension == "ab1") {
		} else if(asNew) saturn.client.programs.DNASequenceEditor.parseFile(file,null,asNewOpenProgram); else saturn.client.programs.DNASequenceEditor.parseFile(file,function(objs) {
			if(objs.length > 0) {
				_g.blockChanged(null,null,0,null,objs[0].getSequence());
				_g.getWorkspace().renameWorkspaceObject(_g.getActiveObjectId(),objs[0].getName());
			}
		});
	}
	,sequenceChanged: function(sequence) {
		if(!this.hasAnnotationsOn()) return;
		var dnaObj = new saturn.core.DNA(sequence);
		if(sequence.length > 2) {
			var dnaObjs = [dnaObj,new saturn.core.DNA(dnaObj.getInverseComplement())];
			var annotationPos = 0;
			var _g1 = 0;
			var _g = dnaObjs.length;
			while(_g1 < _g) {
				var j = _g1++;
				dnaObj = dnaObjs[j];
				var _g2 = 0;
				while(_g2 < 3) {
					var i = _g2++;
					var seqLen = dnaObj.getLength() - i;
					var translation = dnaObj.getTranslation(saturn.core.GeneticCodes.STANDARD,i,false);
					var transSpacer = new StringBuf();
					if(j == 0) transSpacer.add(saturn.util.StringUtils.getRepeat(" ",i + 1) + translation.charAt(0)); else {
						translation = saturn.util.StringUtils.reverse(translation);
						transSpacer.add(saturn.util.StringUtils.getRepeat(" ",seqLen % 3 + 1) + translation.charAt(0));
					}
					var defaultSpace = saturn.util.StringUtils.getRepeat(" ",2);
					var _g4 = 1;
					var _g3 = translation.length;
					while(_g4 < _g3) {
						var i1 = _g4++;
						transSpacer.add(defaultSpace + translation.charAt(i1));
					}
					this.setAnnotationSequence(annotationPos,transSpacer.b);
					annotationPos++;
				}
			}
		} else {
			this.setAnnotationSequence(0,"");
			this.setAnnotationSequence(1,"");
			this.setAnnotationSequence(2,"");
		}
	}
	,getSelectedRegion: function() {
		var region = saturn.client.programs.sequenceeditor.SequenceEditor.prototype.getSelectedRegion.call(this);
		if(region == null) return region;
		var dnaFrame = region.getSelectedRow();
		if(dnaFrame > -1) {
			var dnaPStart = region.getStartPosition();
			var dnaPStop = region.getStopPosition();
			var annotationSequence = this.annotationSequences[dnaFrame];
			var annotationSelectedSequence = annotationSequence.substring(dnaPStart,dnaPStop);
			annotationSelectedSequence = StringTools.replace(annotationSelectedSequence," ","");
			if(annotationSelectedSequence.length > 0) {
				var annotationBeforeSelectedSequence;
				if(dnaFrame < 3) annotationBeforeSelectedSequence = annotationSequence.substring(0,dnaPStart); else annotationBeforeSelectedSequence = annotationSequence.substring(dnaPStop + 1,annotationSequence.length);
				annotationBeforeSelectedSequence = StringTools.replace(annotationBeforeSelectedSequence," ","");
				var beforeLength = annotationBeforeSelectedSequence.length;
				var startPosition = beforeLength + 1;
				var endPosition = beforeLength + annotationSelectedSequence.length;
				region.setAnnotationStartPosition(startPosition + this.frameOffSet);
				region.setAnnotationStopPosition(endPosition + this.frameOffSet);
				region.setAnnotationSequence(annotationSelectedSequence);
			}
			if(dnaFrame > 2) {
				var seqLen = this.sequence.length;
				var startPos = seqLen - region.getStopPosition();
				var stopPos = seqLen - region.getStartPosition();
				region.setStartPosition(startPos + this.offSet);
				region.setStopPosition(stopPos + this.offSet);
				region.setIsForward(false);
			} else region.setIsForward(true);
		} else region.setIsForward(true);
		return region;
	}
	,serialise: function() {
		var object = saturn.client.programs.sequenceeditor.SequenceEditor.prototype.serialise.call(this);
		object.FRAME_OFFSET = this.frameOffSet;
		return object;
	}
	,deserialise: function(object) {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.deserialise.call(this,object);
		this.frameOffSet = object.FRAME_OFFSET;
	}
	,normaliseSequence: function(sequence) {
		return saturn.client.programs.sequenceeditor.SequenceEditor.prototype.normaliseSequence.call(this,sequence);
	}
	,getWorkspaceContextMenuItems: function() {
		var items = [];
		var obj = this.getEntity();
		if(js.Boot.__instanceof(obj,saturn.core.DNA)) {
			var d;
			d = js.Boot.__cast(obj , saturn.core.DNA);
			if(!d.isLinked()) {
				var proteinItems = this.getWorkspace().getObjectsByClass(saturn.core.Protein);
				var attachItems = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0"});
				var _g = 0;
				while(_g < proteinItems.length) {
					var protObj = proteinItems[_g];
					++_g;
					if(!protObj.isLinked()) attachItems.add({ text : protObj.getName(), handler : function() {
					}});
				}
				items.push({ text : "Attach Protein", menu : attachItems});
			} else items.push({ text : "Deattach Protein", handler : function() {
				obj.setProtein(null);
			}});
		}
		return items;
	}
	,changeObjectType: function(model) {
		var newObj = saturn.client.programs.sequenceeditor.SequenceEditor.prototype.changeObjectType.call(this,model);
		var object = this.getObject();
		if(this.getObject().isLinked()) newObj.setProtein(object.getProtein());
		newObj.setSequence(this.getSequence());
		return newObj;
	}
	,__class__: saturn.client.programs.DNASequenceEditor
});
saturn.client.workspace.PCRProductWO = $hxClasses["saturn.client.workspace.PCRProductWO"] = function(object,name) {
	if(object == null) object = new saturn.core.PCRProduct(null,null,null);
	if(name == null) name = "PCR Product";
	saturn.client.workspace.DNAWorkspaceObject.call(this,object,name);
};
saturn.client.workspace.PCRProductWO.__name__ = ["saturn","client","workspace","PCRProductWO"];
saturn.client.workspace.PCRProductWO.getNewMenuText = function() {
	return "PCR Product";
};
saturn.client.workspace.PCRProductWO.__super__ = saturn.client.workspace.DNAWorkspaceObject;
saturn.client.workspace.PCRProductWO.prototype = $extend(saturn.client.workspace.DNAWorkspaceObject.prototype,{
	forwardPrimerObjId: null
	,reversePrimerObjId: null
	,templateObjId: null
	,updateProduct: function() {
		if(this.forwardPrimerObjId == null || this.reversePrimerObjId == null || this.templateObjId == null) return;
		var workspace = saturn.client.WorkspaceApplication.getApplication().getWorkspace();
		var fDNA = workspace.getObjectSafely(this.forwardPrimerObjId,saturn.client.workspace.DNAWorkspaceObject).getObject();
		var fPrimer;
		if(js.Boot.__instanceof(fDNA,saturn.core.Primer)) fPrimer = js.Boot.__cast(fDNA , saturn.core.Primer); else fPrimer = new saturn.core.Primer(fDNA.getSequence());
		this.object.setForwardPrimer(fPrimer);
		var rDNA = workspace.getObjectSafely(this.reversePrimerObjId,saturn.client.workspace.DNAWorkspaceObject).getObject();
		var rPrimer;
		if(js.Boot.__instanceof(rDNA,saturn.core.Primer)) rPrimer = js.Boot.__cast(rDNA , saturn.core.Primer); else rPrimer = new saturn.core.Primer(rDNA.getSequence());
		this.object.setReversePrimer(rPrimer);
		this.object.setTemplate(workspace.getObjectSafely(this.templateObjId,saturn.client.workspace.DNAWorkspaceObject).getObject());
		this.object.calculateProduct();
	}
	,setForwardPrimer: function(obj) {
		if(obj == null) this.forwardPrimerObjId = null; else this.forwardPrimerObjId = obj.getUUID();
	}
	,getForwardPrimerId: function() {
		return this.forwardPrimerObjId;
	}
	,setReversePrimer: function(obj) {
		if(obj == null) this.reversePrimerObjId = null; else this.reversePrimerObjId = obj.getUUID();
	}
	,getReversePrimerId: function() {
		return this.reversePrimerObjId;
	}
	,getTemplateId: function() {
		return this.templateObjId;
	}
	,setTemplate: function(obj) {
		if(obj == null) this.templateObjId = null; else this.templateObjId = obj.getUUID();
	}
	,__class__: saturn.client.workspace.PCRProductWO
});
saturn.client.programs.PCRProductViewer = $hxClasses["saturn.client.programs.PCRProductViewer"] = function() {
	saturn.client.programs.DNASequenceEditor.call(this);
};
saturn.client.programs.PCRProductViewer.__name__ = ["saturn","client","programs","PCRProductViewer"];
saturn.client.programs.PCRProductViewer.__interfaces__ = [saturn.client.workspace.WorkspaceListener];
saturn.client.programs.PCRProductViewer.__super__ = saturn.client.programs.DNASequenceEditor;
saturn.client.programs.PCRProductViewer.prototype = $extend(saturn.client.programs.DNASequenceEditor.prototype,{
	emptyInit: function() {
		saturn.client.programs.DNASequenceEditor.prototype.emptyInit.call(this);
		this.getWorkspace().addListener(this);
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.DNASequenceEditor.prototype.setActiveObject.call(this,objectId);
	}
	,onFocus: function() {
		saturn.client.programs.DNASequenceEditor.prototype.onFocus.call(this);
		this.updatePCRProduct();
	}
	,serialise: function() {
		var object = saturn.client.programs.DNASequenceEditor.prototype.serialise.call(this);
		return object;
	}
	,deserialise: function(object) {
		saturn.client.programs.DNASequenceEditor.prototype.deserialise.call(this,object);
	}
	,onOutlineDrop: function(node,data,overModel,dropPosition,dropHandlers,eOpts) {
		var objectId = data.records[0].get("objectId");
		var wO = this.getWorkspace().getObject(objectId);
		if(js.Boot.__instanceof(wO,saturn.client.workspace.DNAWorkspaceObject)) {
			var dnaWO = this.getWorkspace().getObjectSafely(objectId,saturn.client.workspace.DNAWorkspaceObject);
			var update = false;
			var activeObject = this.getActiveObject(saturn.client.workspace.PCRProductWO);
			if(overModel.data.id == "Forward Primer") {
				activeObject.setForwardPrimer(dnaWO);
				update = true;
			} else if(overModel.data.id == "Reverse Primer") {
				activeObject.setReversePrimer(dnaWO);
				update = true;
			} else if(overModel.data.id == "Template") {
				activeObject.setTemplate(dnaWO);
				update = true;
			}
			if(update) {
				this.updatePCRProduct();
				return true;
			}
		}
		dropHandlers.cancelDrop();
		return false;
	}
	,updatePCRProduct: function() {
		if(this.getActiveObject(saturn.client.workspace.PCRProductWO) != null) {
			var activeObject = this.getActiveObject(saturn.client.workspace.PCRProductWO);
			try {
				activeObject.updateProduct();
				var sequence = activeObject.getObject().getSequence();
				if(sequence != null && sequence.length != 0) this.blockChanged(null,null,0,null,sequence);
			} catch( ex ) {
				if (ex instanceof js._Boot.HaxeError) ex = ex.val;
				if( js.Boot.__instanceof(ex,saturn.util.HaxeException) ) {
					js.Browser.alert(ex.getMessage());
				} else throw(ex);
			}
		}
	}
	,installOutlineTree: function() {
		var _g = this;
		saturn.client.programs.DNASequenceEditor.prototype.installOutlineTree.call(this);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var fPrimerFolder = rootNode.appendChild({ text : "Forward Primer", leaf : false, expanded : true, id : "Forward Primer"});
		if(this.getActiveObject(saturn.client.workspace.PCRProductWO) != null) {
			var activeObject = this.getActiveObject(saturn.client.workspace.PCRProductWO);
			var fPrimerId = activeObject.getForwardPrimerId();
			if(fPrimerId != null) {
				var wO = this.getWorkspace().getObjectSafely(fPrimerId,saturn.client.workspace.DNAWorkspaceObject);
				var childNode = fPrimerFolder.appendChild(Ext.create("WorkspaceObject",{ text : wO.getName(), leaf : true, objectId : fPrimerId, id : fPrimerId}));
			}
		}
		var rPrimerFolder = rootNode.appendChild({ text : "Reverse Primer", leaf : false, expanded : true, id : "Reverse Primer"});
		if(this.getActiveObject(saturn.client.workspace.PCRProductWO) != null) {
			var activeObject1 = this.getActiveObject(saturn.client.workspace.PCRProductWO);
			var rPrimerId = activeObject1.getReversePrimerId();
			if(rPrimerId != null) {
				var wO1 = this.getWorkspace().getObjectSafely(rPrimerId,saturn.client.workspace.DNAWorkspaceObject);
				var childNode1 = rPrimerFolder.appendChild(Ext.create("WorkspaceObject",{ text : wO1.getName(), leaf : true, objectId : rPrimerId, id : rPrimerId}));
			}
		}
		var templateFolder = rootNode.appendChild({ text : "Template", leaf : false, expanded : true, id : "Template"});
		if(this.getActiveObject(saturn.client.workspace.PCRProductWO) != null) {
			var activeObject2 = this.getActiveObject(saturn.client.workspace.PCRProductWO);
			var templateId = activeObject2.getTemplateId();
			if(templateId != null) {
				var wO2 = this.getWorkspace().getObjectSafely(templateId,saturn.client.workspace.DNAWorkspaceObject);
				var childNode2 = templateFolder.appendChild(Ext.create("WorkspaceObject",{ text : wO2.getName(), leaf : true, objectId : templateId, id : templateId}));
			}
		}
		var contextMenu1 = function(view,record,item,index,event) {
			var self = _g;
			var objectId = record.get("objectId");
			if(objectId != "") {
				var contextMenu = Ext.create("Ext.menu.Menu",{ items : [{ text : "Remove ", handler : function() {
					self.objectRemoved(self.getWorkspace().getObject(objectId));
				}}]});
				contextMenu.showAt(event.getXY());
				event.stopEvent();
			}
		};
		this.getApplication().getOutlineTree("DEFAULT").on("itemcontextmenu",contextMenu1,this);
		this.getApplication().getOutlineTree("DEFAULT").on("itemclick",function(view1,rec,item1,index1,event1) {
			if(event1.ctrlKey) contextMenu1(view1,rec,item1,index1,event1);
		},this);
	}
	,objectRenamed: function(object) {
		var objectId = object.getUUID();
		var wO = this.getActiveObject(saturn.client.workspace.PCRProductWO);
		var isOurs = false;
		if(objectId == wO.getForwardPrimerId()) isOurs = true; else if(objectId == wO.getReversePrimerId()) isOurs = true; else if(objectId == wO.getTemplateId()) isOurs = true;
		if(isOurs) {
			var node = this.getApplication().getOutlineDataStore("DEFAULT").getRootNode().findChild("objectId",objectId,true);
			node.set("text",object.getName());
			node.commit();
		}
	}
	,objectAdded: function(object) {
	}
	,objectRemoved: function(object) {
		var objectId = object.getUUID();
		var isOurs = false;
		var wO = this.getActiveObject(saturn.client.workspace.PCRProductWO);
		if(wO == null) return;
		if(objectId == wO.getForwardPrimerId()) {
			isOurs = true;
			wO.setForwardPrimer(null);
		} else if(objectId == wO.getReversePrimerId()) {
			isOurs = true;
			wO.setReversePrimer(null);
		} else if(objectId == wO.getTemplateId()) {
			isOurs = true;
			wO.setTemplate(null);
		}
		if(isOurs) {
			var node = this.getApplication().getOutlineDataStore("DEFAULT").getRootNode().findChild("objectId",objectId,true);
			if(node != null) node.parentNode.removeChild(node);
		}
	}
	,__class__: saturn.client.programs.PCRProductViewer
});
saturn.client.workspace.AlleleWO = $hxClasses["saturn.client.workspace.AlleleWO"] = function(object,name) {
	if(object == null) object = new saturn.core.Allele(null,null,null);
	if(name == null) name = "Allele";
	saturn.client.workspace.PCRProductWO.call(this,object,name);
};
saturn.client.workspace.AlleleWO.__name__ = ["saturn","client","workspace","AlleleWO"];
saturn.client.workspace.AlleleWO.getNewMenuText = function() {
	return "Allele";
};
saturn.client.workspace.AlleleWO.__super__ = saturn.client.workspace.PCRProductWO;
saturn.client.workspace.AlleleWO.prototype = $extend(saturn.client.workspace.PCRProductWO.prototype,{
	serialise: function() {
		var serialisedObject = saturn.client.workspace.PCRProductWO.prototype.serialise.call(this);
		return serialisedObject;
	}
	,deserialise: function(object) {
		saturn.client.workspace.PCRProductWO.prototype.deserialise.call(this,object);
	}
	,__class__: saturn.client.workspace.AlleleWO
});
saturn.client.programs.AlleleViewer = $hxClasses["saturn.client.programs.AlleleViewer"] = function() {
	saturn.client.programs.PCRProductViewer.call(this);
};
saturn.client.programs.AlleleViewer.__name__ = ["saturn","client","programs","AlleleViewer"];
saturn.client.programs.AlleleViewer.__super__ = saturn.client.programs.PCRProductViewer;
saturn.client.programs.AlleleViewer.prototype = $extend(saturn.client.programs.PCRProductViewer.prototype,{
	plateWindowActive: null
	,wellWindowActive: null
	,elnWindowActive: null
	,statusWindowActive: null
	,emptyInit: function() {
		this.plateWindowActive = false;
		this.wellWindowActive = false;
		this.elnWindowActive = false;
		this.statusWindowActive = false;
		saturn.client.programs.PCRProductViewer.prototype.emptyInit.call(this);
		this.getWorkspace().addListener(this);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.PCRProductViewer.prototype.onFocus.call(this);
		var app = saturn.client.WorkspaceApplication.getApplication();
		app.getFileMenu().add({ text : "Save Allele", handler : function() {
			var wO = _g.getActiveObject(saturn.client.workspace.PCRProductWO);
			var seq = _g.getSequence();
			var dnaObj = new saturn.core.DNA(seq);
			var startPosition = dnaObj.getFirstStartCodonPositionByFrame(saturn.core.GeneticCodes.STANDARD,saturn.core.Frame.ONE);
			var stopPositions = dnaObj.getStopCodonPositions(saturn.core.GeneticCodes.STANDARD,saturn.core.Frame.ONE,false);
			var stopPosition = null;
			var _g1_head = stopPositions.h;
			var _g1_val = null;
			while(_g1_head != null) {
				var stopPos;
				stopPos = (function($this) {
					var $r;
					_g1_val = _g1_head[0];
					_g1_head = _g1_head[1];
					$r = _g1_val;
					return $r;
				}(this));
				if(stopPos > startPosition) stopPosition = stopPos;
			}
			if(stopPosition == null) stopPosition = seq.length;
			dnaObj = new saturn.core.DNA(seq.substring(startPosition,stopPosition));
			var proteinSeq = dnaObj.getTranslation(saturn.core.GeneticCodes.STANDARD,0,true);
			var workspace = app.getWorkspace();
			var fPrimerWO = workspace.getObjectSafely(wO.getForwardPrimerId(),saturn.client.workspace.PrimerWorkspaceObject);
			var fSequence = fPrimerWO.getPrimer().getSequence();
			var fName = fPrimerWO.getName();
			var rPrimerWO = workspace.getObjectSafely(wO.getReversePrimerId(),saturn.client.workspace.PrimerWorkspaceObject);
			var rSequence = rPrimerWO.getPrimer().getSequence();
			var rName = rPrimerWO.getName();
			var dataStore = app.getOutlineDataStore("DEFAULT");
			var rootNode = dataStore.getRootNode();
			var elnId = dataStore.getNodeById("ELN_ID").get("ELN_ID");
			var plate = dataStore.getNodeById("ALLELE_PLATE").get("PLATE");
			var well = dataStore.getNodeById("WELL_LOCATION").get("WELL");
			var status = dataStore.getNodeById("STATUS").get("STATUS");
			var entryCloneWO = workspace.getObjectSafely(wO.getTemplateId(),saturn.client.workspace.DNAWorkspaceObject);
			var json = { ALLELE_ID : wO.getName(), SEQ : seq, FSEQ : fSequence, FNAME : fName, RSEQ : rSequence, RNAME : rName, ELN : elnId, PLATE : plate, WELL : well, STATUS : status, PROTSEQ : proteinSeq, ENTRY_CLONE : entryCloneWO.getName()};
			var client = saturn.client.ICMClient.getClient();
			client.runCommand("JSON_STR='" + JSON.stringify(json) + "'\n" + "delete JSON_OBJ\n" + "read json input=JSON_STR name=\"JSON_OBJ\"\n" + "sgc.Allele.mInsertAllele(JSON_OBJ)\n",function(data) {
			});
		}});
	}
	,serialise: function() {
		var object = saturn.client.programs.PCRProductViewer.prototype.serialise.call(this);
		return object;
	}
	,deserialise: function(object) {
		saturn.client.programs.PCRProductViewer.prototype.deserialise.call(this,object);
	}
	,installOutlineTree: function() {
		saturn.client.programs.PCRProductViewer.prototype.installOutlineTree.call(this);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		rootNode.appendChild({ text : "Plate: ", leaf : true, expanded : true, id : "ALLELE_PLATE"});
		rootNode.appendChild({ text : "Well: ", leaf : true, expanded : true, id : "WELL_LOCATION"});
		rootNode.appendChild({ text : "ELN: ", leaf : true, expanded : true, id : "ELN_ID"});
		rootNode.appendChild({ text : "STATUS: ", leaf : true, expanded : true, id : "STATUS"});
	}
	,onClick: function(view,rec,item,index) {
		var _g = this;
		if(rec.data.id == "ALLELE_PLATE") {
			if(this.plateWindowActive == false) {
				this.plateWindowActive = true;
				try {
					var client = saturn.client.ICMClient.getClient();
					client.runCommand("params = Collection();\n" + "params['IDS']=sgc.AllelePlate.mGetPlateIds();\n",function(data) {
						_g.showPlateSelectionDialog(data.IDS);
					});
				} catch( ex ) {
					if (ex instanceof js._Boot.HaxeError) ex = ex.val;
					this.plateWindowActive = false;
					throw new js._Boot.HaxeError(ex);
				}
			}
		} else if(rec.data.id == "WELL_LOCATION") {
			if(this.wellWindowActive == false) {
				this.wellWindowActive = true;
				try {
					this.showWellLocationDialog();
				} catch( ex1 ) {
					if (ex1 instanceof js._Boot.HaxeError) ex1 = ex1.val;
					this.wellWindowActive = false;
					throw new js._Boot.HaxeError(ex1);
				}
			}
		} else if(rec.data.id == "ELN_ID") {
			if(this.elnWindowActive == false) {
				this.elnWindowActive = true;
				try {
					this.showElnDialog();
				} catch( ex2 ) {
					if (ex2 instanceof js._Boot.HaxeError) ex2 = ex2.val;
					this.elnWindowActive = false;
					throw new js._Boot.HaxeError(ex2);
				}
			}
		} else if(rec.data.id == "STATUS") {
			if(this.statusWindowActive == false) {
				this.statusWindowActive = true;
				try {
					this.showStatusDialog();
				} catch( ex3 ) {
					if (ex3 instanceof js._Boot.HaxeError) ex3 = ex3.val;
					this.statusWindowActive = false;
					throw new js._Boot.HaxeError(ex3);
				}
			}
		}
	}
	,showElnDialog: function() {
		var _g = this;
		var windowId = Ext.id(null,"UNIQUE_");
		var tId = Ext.id(null,"UNIQUE_");
		var vBoxLayout = [];
		vBoxLayout.push({ xtype : "textfield", id : tId});
		var buttonLayoutItems = [];
		buttonLayoutItems.push({ xtype : "button", text : "Save", handler : function() {
			var comp = Ext.getCmp(tId);
			var text = comp.getValue();
			var webApp = saturn.client.WorkspaceApplication.getApplication();
			var dataStore = webApp.getOutlineDataStore("DEFAULT");
			var rootNode = dataStore.getRootNode();
			var node = dataStore.getNodeById("ELN_ID");
			node.set("text","ELN: " + text);
			node.set("ELN_ID",text);
			node.commit();
			Ext.getCmp(windowId).close();
		}});
		buttonLayoutItems.push({ xtype : "button", text : "Cancel", handler : function() {
			Ext.getCmp(windowId).close();
		}});
		vBoxLayout.push({ xtype : "panel", layout : { type : "hbox", pack : "center", padding : "2px", defaultMargins : "2px"}, items : buttonLayoutItems});
		Ext.create("Ext.window.Window",{ title : "Set ELN Title", modal : true, id : windowId, layout : { type : "vbox", align : "stretch", padding : "2px"}, items : vBoxLayout, listeners : { close : function() {
			_g.elnWindowActive = false;
		}}}).show();
	}
	,showWellLocationDialog: function() {
		var _g = this;
		var windowId = Ext.id(null,"UNIQUE_");
		var cId = Ext.id(null,"UNIQUE_");
		var data = [{ NAME : "A01"},{ NAME : "A02"},{ NAME : "A03"},{ NAME : "A04"},{ NAME : "A05"},{ NAME : "A06"},{ NAME : "A07"},{ NAME : "A08"},{ NAME : "A09"},{ NAME : "A10"},{ NAME : "B01"},{ NAME : "B02"},{ NAME : "B03"},{ NAME : "B04"},{ NAME : "B05"},{ NAME : "B06"},{ NAME : "B07"},{ NAME : "B08"},{ NAME : "B09"},{ NAME : "B10"},{ NAME : "C01"},{ NAME : "C02"},{ NAME : "C03"},{ NAME : "C04"},{ NAME : "C05"},{ NAME : "C06"},{ NAME : "C07"},{ NAME : "C08"},{ NAME : "C09"},{ NAME : "C10"},{ NAME : "D01"},{ NAME : "D02"},{ NAME : "D03"},{ NAME : "D04"},{ NAME : "D05"},{ NAME : "D06"},{ NAME : "D07"},{ NAME : "D08"},{ NAME : "D09"},{ NAME : "D10"},{ NAME : "E01"},{ NAME : "E02"},{ NAME : "E03"},{ NAME : "E04"},{ NAME : "E05"},{ NAME : "E06"},{ NAME : "E07"},{ NAME : "E08"},{ NAME : "E09"},{ NAME : "E10"},{ NAME : "F01"},{ NAME : "F02"},{ NAME : "F03"},{ NAME : "F04"},{ NAME : "F05"},{ NAME : "F06"},{ NAME : "F07"},{ NAME : "F08"},{ NAME : "F09"},{ NAME : "F10"},{ NAME : "G01"},{ NAME : "G02"},{ NAME : "G03"},{ NAME : "G04"},{ NAME : "G05"},{ NAME : "G06"},{ NAME : "G07"},{ NAME : "G08"},{ NAME : "G09"},{ NAME : "G10"},{ NAME : "H01"},{ NAME : "H02"},{ NAME : "H03"},{ NAME : "H04"},{ NAME : "H05"},{ NAME : "H06"},{ NAME : "H07"},{ NAME : "H08"},{ NAME : "H09"},{ NAME : "H10"}];
		var store = Ext.create("Ext.data.Store",{ fields : ["NAME"], data : data});
		var vBoxLayout = [];
		vBoxLayout.push({ xtype : "combobox", fieldLabel : "Select well", store : store, queryMode : "local", displayField : "NAME", valueField : "NAME", id : cId, forceSelection : true});
		var buttonLayoutItems = [];
		buttonLayoutItems.push({ xtype : "button", text : "Save", handler : function() {
			var comp = Ext.getCmp(cId);
			var wellLocation = comp.getValue();
			var webApp = saturn.client.WorkspaceApplication.getApplication();
			var dataStore = webApp.getOutlineDataStore("DEFAULT");
			var rootNode = dataStore.getRootNode();
			var node = dataStore.getNodeById("WELL_LOCATION");
			node.set("text","Well: " + wellLocation);
			node.set("WELL",wellLocation);
			node.commit();
			Ext.getCmp(windowId).close();
		}});
		buttonLayoutItems.push({ xtype : "button", text : "Cancel", handler : function() {
			Ext.getCmp(windowId).close();
		}});
		vBoxLayout.push({ xtype : "panel", layout : { type : "hbox", pack : "center", padding : "2px", defaultMargins : "2px"}, items : buttonLayoutItems});
		Ext.create("Ext.window.Window",{ title : "Set well location", modal : true, id : windowId, layout : { type : "vbox", align : "stretch", padding : "2px"}, items : vBoxLayout, listeners : { close : function() {
			_g.wellWindowActive = false;
		}}}).show();
	}
	,showStatusDialog: function() {
		var _g = this;
		var windowId = Ext.id(null,"UNIQUE_");
		var cId = Ext.id(null,"UNIQUE_");
		var data = [{ NAME : "In Progress"},{ NAME : "Construct Complete"},{ NAME : "In Process"},{ NAME : "On hold"},{ NAME : "Pending"},{ NAME : "Abandoned"},{ NAME : "n/a"}];
		var store = Ext.create("Ext.data.Store",{ fields : ["NAME"], data : data});
		var vBoxLayout = [];
		vBoxLayout.push({ xtype : "combobox", fieldLabel : "Select status", store : store, queryMode : "local", displayField : "NAME", valueField : "NAME", id : cId, forceSelection : true});
		var buttonLayoutItems = [];
		buttonLayoutItems.push({ xtype : "button", text : "Save", handler : function() {
			var comp = Ext.getCmp(cId);
			var wellLocation = comp.getValue();
			var webApp = saturn.client.WorkspaceApplication.getApplication();
			var dataStore = webApp.getOutlineDataStore("DEFAULT");
			var rootNode = dataStore.getRootNode();
			var node = dataStore.getNodeById("STATUS");
			node.set("text","STATUS: " + wellLocation);
			node.set("STATUS",wellLocation);
			node.commit();
			Ext.getCmp(windowId).close();
		}});
		buttonLayoutItems.push({ xtype : "button", text : "Cancel", handler : function() {
			Ext.getCmp(windowId).close();
		}});
		vBoxLayout.push({ xtype : "panel", layout : { type : "hbox", pack : "center", padding : "2px", defaultMargins : "2px"}, items : buttonLayoutItems});
		Ext.create("Ext.window.Window",{ title : "Set well location", modal : true, id : windowId, layout : { type : "vbox", align : "stretch", padding : "2px"}, items : vBoxLayout, listeners : { close : function() {
			_g.statusWindowActive = false;
		}}}).show();
	}
	,showPlateSelectionDialog: function(plateNames) {
		var _g = this;
		var windowId = Ext.id(null,"UNIQUE_");
		var cId = Ext.id(null,"UNIQUE_");
		var plateObjs = [];
		var _g1 = 0;
		while(_g1 < plateNames.length) {
			var plateName = plateNames[_g1];
			++_g1;
			plateObjs.push({ NAME : plateName});
		}
		var store = Ext.create("Ext.data.Store",{ fields : ["NAME"], data : plateObjs});
		var vBoxLayout = [];
		vBoxLayout.push({ xtype : "combobox", fieldLabel : "Select plate", store : store, queryMode : "local", displayField : "NAME", valueField : "NAME", id : cId, forceSelection : true});
		var buttonLayoutItems = [];
		buttonLayoutItems.push({ xtype : "button", text : "Save", handler : function() {
			var comp = Ext.getCmp(cId);
			var plateName1 = comp.getValue();
			var webApp = saturn.client.WorkspaceApplication.getApplication();
			var dataStore = webApp.getOutlineDataStore("DEFAULT");
			var rootNode = dataStore.getRootNode();
			var node = dataStore.getNodeById("ALLELE_PLATE");
			node.set("text","Plate: " + plateName1);
			node.set("PLATE",plateName1);
			node.commit();
			Ext.getCmp(windowId).close();
		}});
		buttonLayoutItems.push({ xtype : "button", text : "Cancel", handler : function() {
			Ext.getCmp(windowId).close();
		}});
		vBoxLayout.push({ xtype : "panel", layout : { type : "hbox", pack : "center", padding : "2px", defaultMargins : "2px"}, items : buttonLayoutItems});
		Ext.create("Ext.window.Window",{ title : "Set plate name", modal : true, id : windowId, layout : { type : "vbox", align : "stretch", padding : "2px"}, items : vBoxLayout, listeners : { close : function() {
			_g.plateWindowActive = false;
		}}}).show();
	}
	,__class__: saturn.client.programs.AlleleViewer
});
saturn.client.programs.BasicTableViewer = $hxClasses["saturn.client.programs.BasicTableViewer"] = function() {
	this.hideTitle = false;
	this.firstBuild = true;
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.BasicTableViewer.__name__ = ["saturn","client","programs","BasicTableViewer"];
saturn.client.programs.BasicTableViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.BasicTableViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,table: null
	,firstBuild: null
	,hideTitle: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", flex : 2, layout : "fit", listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		var colDefs = [{ text : "Residue", dataIndex : "residue", editor : "textfield"},{ text : "Construct", dataIndex : "construct", editor : "textfield"},{ text : "PDB", dataIndex : "pdb", editor : "textfield"}];
		var data = [{ 'residue' : "A", 'construct' : "1", 'pdb' : "1"},{ 'residue' : "T", 'construct' : "1", 'pdb' : "1"},{ 'residue' : "G", 'construct' : "0", 'pdb' : "1"}];
		this.table = new saturn.client.programs.blocks.BaseTable(colDefs,data,"Data",null,this.hideTitle);
		this.table.setEditListener(function() {
		});
	}
	,getUpdatedTable: function() {
		var data = this.getTable().getData();
		var table = this.getObject();
		table.updateData(data);
		return table;
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().getToolBar().add({ iconCls : "x-btn-export", text : "Export", handler : function() {
			_g.table.exportToFile(_g.getObject().getName());
		}});
		this.getApplication().getEditMenu().add({ text : "Click me", handler : function() {
			_g.getApplication().showMessage("Menu","You clicked me!");
		}});
		this.getApplication().hideMiddleSouthPanel();
		if(this.table != null && this.table.getComponent() != null) this.updateTable(this.getUpdatedTable());
	}
	,onBlur: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onBlur.call(this);
		this.getUpdatedTable();
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var obj = saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,null);
		this.updateTable(obj);
	}
	,updateTable: function(obj) {
		this.setTitle(obj.getName());
		this.table.setErrorColumns(obj.getErrorColumns());
		this.table.reconfigure(obj.tableDefinition);
		this.table.setFixedRowHeight(obj.getFixedRowHeight());
		if(this.firstBuild) {
			this.firstBuild = false;
			this.getComponent().add(this.table.getComponent());
		}
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,getTable: function() {
		return this.table;
	}
	,saveWait: function(cb) {
		this.getUpdatedTable();
		cb();
	}
	,__class__: saturn.client.programs.BasicTableViewer
});
saturn.client.programs.ComplexHelper = $hxClasses["saturn.client.programs.ComplexHelper"] = function() {
	saturn.client.programs.BasicTableViewer.call(this);
};
saturn.client.programs.ComplexHelper.__name__ = ["saturn","client","programs","ComplexHelper"];
saturn.client.programs.ComplexHelper.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-protein", html : "Complex<br/>Helper", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.core.ComplexPlan(true),true);
	}, tooltip : { dismissDelay : 10000, text : "Design Complexes"}}];
};
saturn.client.programs.ComplexHelper.__super__ = saturn.client.programs.BasicTableViewer;
saturn.client.programs.ComplexHelper.prototype = $extend(saturn.client.programs.BasicTableViewer.prototype,{
	onFocus: function() {
		var _g = this;
		saturn.client.programs.BasicTableViewer.prototype.onFocus.call(this);
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Generate IDs", handler : function() {
			var table = _g.getComplexTable();
			table.generateIds(function(error) {
				if(error != null) saturn.client.WorkspaceApplication.getApplication().showMessage("Upload Error",error); else _g.updateTable(table);
			});
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Save", handler : function() {
			var table1 = _g.getComplexTable();
			table1.save(function(error1) {
				if(error1 != null) saturn.client.WorkspaceApplication.getApplication().showMessage("Upload Error",error1); else {
					_g.updateTable(table1);
					saturn.client.WorkspaceApplication.getApplication().showMessage("Complex Targets Generated","Complex Targets Generated");
				}
			});
		}});
	}
	,getComplexTable: function() {
		return js.Boot.__cast(this.getUpdatedTable() , saturn.core.ComplexPlan);
	}
	,__class__: saturn.client.programs.ComplexHelper
});
saturn.client.workspace.CompoundWO = $hxClasses["saturn.client.workspace.CompoundWO"] = function(object,name) {
	if(object == null) object = new saturn.core.domain.Compound();
	if(name == null) name = "Compound";
	this.iconPath = "/static/js/images/compound_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.CompoundWO.__name__ = ["saturn","client","workspace","CompoundWO"];
saturn.client.workspace.CompoundWO.getNewMenuText = function() {
	return "Compound";
};
saturn.client.workspace.CompoundWO.getDefaultFolderName = function() {
	return "Compound";
};
saturn.client.workspace.CompoundWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.CompoundWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.CompoundWO
});
saturn.client.programs.CompoundViewer = $hxClasses["saturn.client.programs.CompoundViewer"] = function(editor) {
	this.lastSmilesImport = null;
	this.up = false;
	this.loaded = false;
	if(editor == null) this.editor = saturn.client.programs.CompoundEditor.Ketcher; else this.editor = editor;
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.CompoundViewer.__name__ = ["saturn","client","programs","CompoundViewer"];
saturn.client.programs.CompoundViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-compound", text : "CompoundViewer", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.CompoundWO(null,null),true);
	}}];
};
saturn.client.programs.CompoundViewer.parseFile = function(file,cb,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	var extension = saturn.client.core.CommonCore.getFileExtension(file.name);
	if(extension == "sdf") saturn.client.core.CommonCore.getFileAsText(file,function(contents) {
		if(contents != null) {
			var molBlock = "";
			var rdkit = RDKit;
			var lines = contents.split("\n");
			var endOfMol = "$" + "$" + "$" + "$";
			var auto_open = true;
			var _g = 0;
			while(_g < lines.length) {
				var line = lines[_g];
				++_g;
				molBlock += line + "\n";
				if(line.indexOf(endOfMol) >= 0) {
					var compound = new saturn.core.domain.Compound();
					compound.sdf = molBlock;
					var name = "Unknown";
					var mol = rdkit.Molecule.MolBlockToMol(compound.sdf);
					var molLines = compound.sdf.split("\n");
					var property_reg = new EReg(">\\s+<(.+)>","");
					var property = null;
					var _g1 = 0;
					while(_g1 < molLines.length) {
						var molLine = molLines[_g1];
						++_g1;
						if(property != null) {
							mol.setProp(property,molLine);
							if(property == "CompoundID" || property == "ID" || property == "SupplierID") name = molLine;
							property = null;
						} else if(property_reg.match(molLine)) property = property_reg.matched(1);
					}
					compound.smiles = mol.toSmiles();
					saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.CompoundWO(compound,name),auto_open);
					auto_open = false;
					molBlock = "";
				}
			}
		}
	});
};
saturn.client.programs.CompoundViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.CompoundViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,molEditor: null
	,editor: null
	,loaded: null
	,up: null
	,lastSmilesImport: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		var tagType = null;
		if(saturn.client.programs.CompoundEditor.Molsoft == this.editor) tagType = "div"; else if(saturn.client.programs.CompoundEditor.Ketcher == this.editor) tagType = "iframe";
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "95%", autoScroll : true, region : "center", items : [{ xtype : "component", region : "north", autoEl : { tag : tagType}, listeners : { 'afterrender' : function() {
			_g.installEditor();
		}}, flex : 1}], listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
	}
	,installEditor: function() {
		var _g = this;
		var dom = this.getComponent().down("component").getEl().dom;
		var id = dom.id;
		if(this.editor == saturn.client.programs.CompoundEditor.Molsoft) {
			this.molEditor = new MolEdit.ChemicalView("",id, 600, 400 );
			var applyStyle = null;
			applyStyle = function() {
				var tableElems = dom.getElementsByTagName("table");
				if(tableElems != null && tableElems.length > 0) tableElems[0].style.margin = "0 auto"; else haxe.Timer.delay(applyStyle,1000);
			};
			applyStyle();
			this.up = true;
			if(this.getObject() != null) this.render();
		} else if(this.editor == saturn.client.programs.CompoundEditor.Ketcher) {
			var iframe = dom;
			iframe.setAttribute("src","js/ketcher/ketcher.html");
			iframe.setAttribute("width","100%");
			iframe.setAttribute("height","100%");
			iframe.style.width = "100%";
			iframe.style.height = "100%";
			iframe.style.position = "absolute";
			iframe.style.border = "none";
			var waitForLoad = null;
			waitForLoad = function() {
				var ui = null;
				if('contentDocument' in iframe) {
					_g.molEditor = iframe.contentWindow.ketcher;
					ui = iframe.contentWindow.ui;
				} else {
					var d_document = window.document;
					_g.molEditor = iframe.window.ketcher;
					ui = iframe.window.ui;
				}
				if(ui != null && ui.initialized == true) {
					_g.up = true;
					if(_g.getObject() != null) haxe.Timer.delay($bind(_g,_g.render),100);
				} else haxe.Timer.delay(waitForLoad,100);
			};
			waitForLoad();
		}
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().enableProgramSearchField(true);
		this.getApplication().hideMiddleSouthPanel();
		this.getApplication().installOutlineTree("MODELS",true,false,"WorkspaceObject","GRID");
		if(this.getActiveObjectId() != null) {
			var compound = this.getActiveObjectObject();
			this.addModelToOutline(compound,true);
			if(!this.loaded) {
				this.render();
				this.loaded = true;
			}
		}
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.CompoundWO) , saturn.client.workspace.CompoundWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.domain.Compound);
		this.setTitle(w0.getName());
		if(this.getActiveObjectObject() != null && this.up) this.render();
	}
	,render: function() {
		this.loaded = true;
		var compound = this.getActiveObjectObject();
		if(compound.sdf != null) this.setCompoundInEditor(compound.sdf);
		this.addModelToOutline(compound,true);
	}
	,setCompoundInEditor: function(molBlock) {
		if(this.editor == saturn.client.programs.CompoundEditor.Molsoft) this.molEditor.importFromString(molBlock); else if(this.editor == saturn.client.programs.CompoundEditor.Ketcher) this.molEditor.setMolecule(molBlock);
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,saveWait: function(cb) {
		var obj = this.getActiveObjectObject();
		obj.sdf = this.getMolBlockFromEditor();
		cb();
	}
	,getMolBlockFromEditor: function() {
		if(this.editor == saturn.client.programs.CompoundEditor.Molsoft) return this.molEditor.getMolfile(); else if(this.editor == saturn.client.programs.CompoundEditor.Ketcher) return this.molEditor.getMolfile(); else return null;
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
		saturn.client.programs.CompoundViewer.parseFile(file,function(contents) {
		},asNewOpenProgram);
	}
	,search: function(str) {
		saturn.client.programs.SimpleExtJSProgram.prototype.search.call(this,str);
		if(str != null && str != "" && this.lastSmilesImport != str) {
			this.lastSmilesImport = str;
			var rdkit = RDKit;
			var mol = rdkit.Molecule.fromSmiles(str);
			if(mol != null) {
				mol.compute2DCoords();
				var molBlock = mol.toMolfile();
				this.getObject().sdf = molBlock;
				this.setCompoundInEditor(molBlock);
			}
		}
	}
	,saveObject: function(cb) {
		var molBlock = this.getMolBlockFromEditor();
		var compound = this.getObject();
		compound.sdf = molBlock;
		var rdkit = RDKit;
		var mol = rdkit.Molecule.MolBlockToMol(compound.sdf);
		compound.smiles = mol.toSmiles();
		saturn.client.programs.SimpleExtJSProgram.prototype.saveObject.call(this,cb);
	}
	,__class__: saturn.client.programs.CompoundViewer
});
saturn.client.programs.CompoundEditor = $hxClasses["saturn.client.programs.CompoundEditor"] = { __ename__ : ["saturn","client","programs","CompoundEditor"], __constructs__ : ["Molsoft","Ketcher"] };
saturn.client.programs.CompoundEditor.Molsoft = ["Molsoft",0];
saturn.client.programs.CompoundEditor.Molsoft.toString = $estr;
saturn.client.programs.CompoundEditor.Molsoft.__enum__ = saturn.client.programs.CompoundEditor;
saturn.client.programs.CompoundEditor.Ketcher = ["Ketcher",1];
saturn.client.programs.CompoundEditor.Ketcher.toString = $estr;
saturn.client.programs.CompoundEditor.Ketcher.__enum__ = saturn.client.programs.CompoundEditor;
saturn.client.workspace.ConsoleWO = $hxClasses["saturn.client.workspace.ConsoleWO"] = function(object,name) {
	if(object == null) object = { };
	if(name == null) name = "Console";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.ConsoleWO.__name__ = ["saturn","client","workspace","ConsoleWO"];
saturn.client.workspace.ConsoleWO.getNewMenuText = function() {
	return "Console";
};
saturn.client.workspace.ConsoleWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.ConsoleWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.ConsoleWO
});
saturn.client.programs.ConsoleViewer = $hxClasses["saturn.client.programs.ConsoleViewer"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.ConsoleViewer.__name__ = ["saturn","client","programs","ConsoleViewer"];
saturn.client.programs.ConsoleViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.ConsoleViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,listener: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.theComponent = Ext.create("Ext.Container",{ width : "100%", height : "300", autoScroll : false, autoEl : { tag : "div", html : ""}});
		this.getWorkspace().addListener(this);
		this.listener = function(data) {
			_g.getDomElement().innerHTML = _g.getDomElement().innerHTML + "<br/>" + Std.string(data.event) + "\t" + Std.string(data.trigger);
		};
		saturn.client.core.ClientCore.getClientCore().registerListener("global.event",this.listener);
	}
	,getDomElement: function() {
		return this.theComponent.getEl().down("div[id*=innerCt]").dom;
	}
	,close: function() {
		saturn.client.core.ClientCore.getClientCore().removeListener("global.event",this.listener);
	}
	,setTitle: function(title) {
		if(this.theComponent.tab != null) this.theComponent.tab.setText(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.setTitle(this.getActiveObjectName());
	}
	,__class__: saturn.client.programs.ConsoleViewer
});
saturn.client.programs.ConstructDesigner = $hxClasses["saturn.client.programs.ConstructDesigner"] = function() {
	saturn.client.programs.BasicTableViewer.call(this);
};
saturn.client.programs.ConstructDesigner.__name__ = ["saturn","client","programs","ConstructDesigner"];
saturn.client.programs.ConstructDesigner.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-conical-dna", html : "Construct<br/>Designer", tooltip : { dismissDelay : 10000, text : "Manually specify start and end construct boundaries to design constructs"}, cls : "quickLaunchButton", menu : Ext.create("Ext.menu.Menu",{ items : { text : "BRD1A Example", handler : function() {
		var table = new saturn.core.ConstructDesignTable(true);
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(table,true);
	}}}), handler : function() {
		var table1 = new saturn.core.ConstructDesignTable(false);
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(table1,true);
	}, listeners : { mouseover : function() {
		if(!this.hasVisibleMenu()) this.showMenu();
	}}}];
};
saturn.client.programs.ConstructDesigner.__super__ = saturn.client.programs.BasicTableViewer;
saturn.client.programs.ConstructDesigner.prototype = $extend(saturn.client.programs.BasicTableViewer.prototype,{
	initialiseDOMComponent: function() {
		var _g = this;
		saturn.client.programs.BasicTableViewer.prototype.initialiseDOMComponent.call(this);
		this.table.addCustomContextItem({ text : "Show construct alignment", handler : function(rowIndex) {
			var model = _g.table.store.getAt(rowIndex);
			var val = model.get("Entry Clone");
			if(val == null) {
				_g.getApplication().showMessage("Missing entry clone ID","Please enter the entry clone ID first");
				return;
			}
			var target = val.split("-")[0];
			_g.showAlignment(target);
		}});
	}
	,showAlignment: function(target) {
		var objectId = this.getActiveObjectId();
		var parentFolder = this.getWorkspace().getParentFolder(objectId);
		var folder = parentFolder.findChild("text",target);
		if(folder != null) this.getWorkspace().removeItem(folder.getId());
		folder = this.getWorkspace()._addFolder(target,parentFolder);
		var constructs = [];
		var n = this.table.store.data.length - 1 | 0;
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			var model = this.table.store.getAt(i);
			var constructId = model.get("Construct ID");
			if(constructId == null) {
				if(model.get("Start") == null || model.get("Stop") == null || model.get("Entry Clone") == null) continue;
				constructId = Std.string(model.get("Entry Clone")) + "_" + Std.string(model.get("Start")) + "-" + Std.string(model.get("Stop"));
			}
			if(constructId.split("-")[0] == target) {
				var seq = model.get("Construct Protein (no tag)");
				if(seq == null) continue;
				var protObj = new saturn.core.Protein(seq);
				protObj.setMoleculeName(constructId);
				var construct = new saturn.core.domain.SgcConstruct();
				construct.constructId = constructId;
				construct.proteinSeqNoTag = seq;
				construct.status = "No progress";
				constructs.push(construct);
				this.getWorkspace().addObject(protObj,false,folder);
			}
		}
		var sum = new saturn.client.programs.blocks.TargetSummary(target);
		sum.setSequences(constructs);
		sum.setParentFolder(folder);
		sum.getTargetSequence();
	}
	,onFocus: function() {
		var _g = this;
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Prepare", handler : function() {
			_g.prepare();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-save", text : "Save", handler : function() {
			_g.saveNew();
		}});
		this.getApplication().getToolsMenu().add({ iconCls : "x-btn-calculate", text : "Calculate", handler : function() {
			_g.calculate();
		}});
		this.getApplication().getToolsMenu().add({ iconCls : "x-btn-calculate", text : "Generate IDs", handler : function() {
			_g.generateids();
		}});
		this.getApplication().getToolsMenu().add({ iconCls : "x-btn-calculate", text : "Assign Wells", handler : function() {
			_g.assignWells();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Duplicate & Change Vector", handler : function() {
			_g.duplicateAndChangeVector();
		}});
		saturn.client.programs.BasicTableViewer.prototype.onFocus.call(this);
	}
	,calculate: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.ConstructDesignTable);
		table.calculate(function() {
			_g.updateTable(table);
		});
	}
	,duplicateAndChangeVector: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.ConstructDesignTable);
		this.getApplication().userValuePrompt("New Vector Name","Enter name of new vector",function(vectorName) {
			table.duplicateAndChangeVector(vectorName,function() {
				_g.updateTable(table);
			});
		},function() {
		});
	}
	,saveNew: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.ConstructDesignTable);
		table.saveNew(function(err) {
			if(err != null) _g.getApplication().showMessage("Save failure","Save failure " + err); else _g.getApplication().showMessage("Saved","All records saved");
		});
	}
	,fetchAll: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.ConstructDesignTable);
		table.fetchall(function() {
			_g.updateTable(table);
		});
	}
	,generateids: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.ConstructDesignTable);
		table.generateids(function(err) {
			if(err != null) _g.getApplication().showMessage("ID generation failure",err); else _g.updateTable(table);
		});
	}
	,assignWells: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.ConstructDesignTable);
		table.assignWells(function(err) {
			if(err != null) _g.getApplication().showMessage("ID generation failure",err); else _g.updateTable(table);
		});
	}
	,prepare: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.ConstructDesignTable);
		table.prepare(function(err) {
			if(err != null) _g.getApplication().showMessage("Error preparing",err); else _g.updateTable(table);
		});
	}
	,__class__: saturn.client.programs.ConstructDesigner
});
saturn.client.workspace.CrystalHelperDataWO = $hxClasses["saturn.client.workspace.CrystalHelperDataWO"] = function(object,name) {
	if(object == null) object = new saturn.core.CrystalHelperData();
	if(name == null) name = "Crystal Helper";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.CrystalHelperDataWO.__name__ = ["saturn","client","workspace","CrystalHelperDataWO"];
saturn.client.workspace.CrystalHelperDataWO.getNewMenuText = function() {
	return "Crystal Helper";
};
saturn.client.workspace.CrystalHelperDataWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.CrystalHelperDataWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	serialise: function() {
		var serialisedObject = saturn.client.workspace.WorkspaceObjectBase.prototype.serialise.call(this);
		serialisedObject.DATA = { 'DATA' : this.object.getData()};
		return serialisedObject;
	}
	,deserialise: function(object) {
		saturn.client.workspace.WorkspaceObjectBase.prototype.deserialise.call(this,object);
		var obj = new saturn.core.CrystalHelperData();
		obj.setData(object.DATA.DATA);
		this.setObject(obj);
	}
	,__class__: saturn.client.workspace.CrystalHelperDataWO
});
saturn.client.programs.CrystalHelper = $hxClasses["saturn.client.programs.CrystalHelper"] = function() {
	this.pageUrl = "";
	this.internalFrameId = "INTERNAL_FRAME";
	saturn.client.programs.SimpleExtJSProgram.call(this);
	this.emptyInit();
};
saturn.client.programs.CrystalHelper.__name__ = ["saturn","client","programs","CrystalHelper"];
saturn.client.programs.CrystalHelper.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.CrystalHelper.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,theTable: null
	,internalFrameId: null
	,pageUrl: null
	,emptyInit: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		var self = this;
		Ext.create("Ext.data.Store",{ storeId : "crystalStore", fields : ["ROWNUMBER","XTAL_MOUNT_ID","SCREENNUMBER","TRASH","QUALITY","POSITION","NAME","PINID"]});
		this.theComponent = Ext.create("Ext.panel.Panel",{ title : "Crystal Helper", width : "100%", height : "95%", autoScroll : true, layout : { type : "vbox", align : "stretch", pack : "start"}, items : [{ region : "center", xtype : "button", text : "Save", handler : function() {
			self.update();
		}},{ region : "center", xtype : "button", text : "Refresh", handler : function() {
			self.refresh(true);
		}}], listeners : { 'render' : function(obj) {
			self.theComponent = obj;
			self.initialiseDOMComponent();
		}}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		var me = this;
		haxe.Timer.delay(function() {
			me.completeSetup();
		},2000);
	}
	,completeSetup: function() {
		var _g = this;
		var icmClient = saturn.client.ICMClient.getClient();
		var self = this;
		icmClient.runCommand("sgc.CrystalHelper.showQueries()\n" + "jsonTable = sgc.CrystalHelper.getPuckTable();\n" + "params['jsonTable']=jsonTable;\n",(function($this) {
			var $r;
			var data1 = function(data) {
				var puckList = data.jsonTable;
				Ext.create("Ext.data.Store",{ storeId : "puckStore", fields : ["Puck_Name"], data : puckList, pageSize : 1000});
				var puckComboDef = { xtype : "combo", store : Ext.data.StoreManager.lookup("puckStore"), displayField : "Puck_Name", valueField : "Puck_Name", queryMode : "local", editable : false};
				Ext.create("Ext.data.Store",{ storeId : "positionStore", fields : ["position"], data : [{ 'position' : "1"},{ 'position' : "2"},{ 'position' : "3"},{ 'position' : "4"},{ 'position' : "5"},{ 'position' : "6"},{ 'position' : "7"},{ 'position' : "8"},{ 'position' : "9"},{ 'position' : "10"},{ 'position' : "11"},{ 'position' : "12"},{ 'position' : "13"},{ 'position' : "14"},{ 'position' : "15"},{ 'position' : "16"},{ 'position' : ""}]});
				var positionComboDef = { xtype : "combo", store : Ext.data.StoreManager.lookup("positionStore"), displayField : "position", valueField : "position", queryMode : "local", editable : false};
				var tableColumns = [{ header : "Crystal ID", dataIndex : "XTAL_MOUNT_ID", flex : 1},{ header : "Screen Number", dataIndex : "SCREENNUMBER", flex : 1},{ header : "Trash", dataIndex : "TRASH", flex : 1},{ header : "Quality", dataIndex : "QUALITY", flex : 1},{ header : "Pin ID", dataIndex : "PINID", flex : 1},{ header : "Position", dataIndex : "POSITION", editor : positionComboDef, flex : 1},{ header : "Name", dataIndex : "NAME", editor : puckComboDef, flex : 1}];
				self.theTable = Ext.create("Ext.grid.Panel",{ selType : "cellmodel", plugins : [Ext.create("Ext.grid.plugin.CellEditing",{ clicksToEdit : 1})], width : "100%", height : "95%", flex : 1, autoScroll : true, layout : "fit", region : "south", store : Ext.data.StoreManager.lookup("crystalStore"), columns : tableColumns, listeners : { 'render' : function() {
					_g.refresh(false);
				}}});
				self.theComponent.add(self.theTable);
			};
			$r = data1;
			return $r;
		}(this)));
	}
	,refresh: function(isRefresh) {
		var _g = this;
		saturn.client.ICMClient.getClient().runCommand("jsonTable = sgc.CrystalHelper.getHelperTable();\n" + "params = Collection('jsonTable',jsonTable);\n",function(data,err) {
			if(err == null) {
				var jsonTable = data.jsonTable;
				Ext.data.StoreManager.lookup("crystalStore").loadData(jsonTable,false);
				if(isRefresh) _g.getApplication().showMessage("Crystal Helper","Refreshed view");
			} else _g.getApplication().showMessage("Crystal Helper","An error has occurred refreshing the view");
		});
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		if(this.isNaked()) return;
		var me = this;
		this.getApplication().getFileMenu().add({ text : "Update", handler : function() {
			me.update();
		}});
	}
	,update: function() {
		var _g = this;
		var crystalStore = Ext.data.StoreManager.lookup("crystalStore");
		var objList = [];
		var records = [];
		var _g1 = 0;
		var _g2 = crystalStore.getCount();
		while(_g1 < _g2) {
			var i = _g1++;
			var record = crystalStore.getAt(i);
			var obj = { 'PINID' : record.get("PINID"), 'NAME' : record.get("NAME"), 'POSITION' : record.get("POSITION")};
			if(record.dirty) {
				objList.push(obj);
				records.push(record);
			}
		}
		var pinCount = objList.length;
		if(pinCount == 0) {
			this.getApplication().showMessage("Crystal Helper","No pins to update!");
			return;
		}
		var jsonStr = JSON.stringify(objList);
		var icmClient = saturn.client.ICMClient.getClient();
		var icmSetCommand = icmClient.generateSetStringCommand("JSON_STR",jsonStr);
		icmClient.runCommand(icmSetCommand + "delete JSON_OBJ\n" + "read json input=JSON_STR name=\"JSON_OBJ\"\n" + "sgc.CrystalHelper.updatePinInfo(JSON_OBJ)\n",function(data,ex) {
			if(ex != null) _g.getApplication().showMessage("Crystal Helper Exception","An error has occurred during save, please contact your Scarab administrator<br/>" + ex.message); else {
				var plural = "";
				if(pinCount > 1) plural = "s";
				_g.getApplication().showMessage("Crystal Helper","Successfully updated " + pinCount + " pin location" + plural);
				var _g11 = 0;
				while(_g11 < records.length) {
					var record1 = records[_g11];
					++_g11;
					record1.commit();
				}
			}
		});
	}
	,setActiveObject: function(objectId) {
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,__class__: saturn.client.programs.CrystalHelper
});
saturn.client.programs.sequenceeditor.AnnotationEditorBlock = $hxClasses["saturn.client.programs.sequenceeditor.AnnotationEditorBlock"] = function(blockNumber,sequenceEditor,annotationNumber) {
	this.sequenceEditor = sequenceEditor;
	this.annotationNumber = annotationNumber;
	this.initialise(blockNumber);
};
saturn.client.programs.sequenceeditor.AnnotationEditorBlock.__name__ = ["saturn","client","programs","sequenceeditor","AnnotationEditorBlock"];
saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype = {
	elem: null
	,sequenceEditor: null
	,annotationNumber: null
	,bNum: null
	,getElement: function() {
		return this.elem;
	}
	,getSequenceEditor: function() {
		return this.sequenceEditor;
	}
	,createElement: function() {
		var _this = window.document;
		this.elem = _this.createElement("pre");
	}
	,installListeners: function() {
		var _g = this;
		var me = this;
		this.elem.onblur = function() {
			me.getSequenceEditor().onBlockBlur(_g.elem);
		};
		this.elem.onmousedown = function(event) {
			if(event.button > 1) return;
			me.getSequenceEditor().makeAnnotationSelectable(me.annotationNumber);
		};
		this.elem.onmouseup = function() {
		};
		this.elem.onmousemove = function() {
		};
	}
	,destroy: function() {
		this.sequenceEditor = null;
		this.elem.onblur = null;
		this.elem.onmousedown = null;
		this.elem.onmouseup = null;
		this.elem.onmousemove = null;
	}
	,initialise: function(blockNumber) {
		this.createElement();
		this.installListeners();
		this.elem.blockNumber = blockNumber;
		this.bNum = blockNumber;
		this.elem.classList.add(" molbio-sequenceeditor-block");
		this.elem.style.dysplay = "inline-block";
		this.getSequenceEditor().autoSetBlockWidth(this.elem);
		this.makeSelectable(false);
	}
	,makeSelectable: function(makeSelectable) {
		saturn.client.programs.sequenceeditor.SequenceEditor.makeSelectable(this.getElement(),makeSelectable);
	}
	,setString: function(str) {
		this.elem.innerText = str;
	}
	,getBlockNumber: function() {
		return this.bNum;
	}
	,__class__: saturn.client.programs.sequenceeditor.AnnotationEditorBlock
};
saturn.client.programs.DNAAnnotationSequenceEditorBlock = $hxClasses["saturn.client.programs.DNAAnnotationSequenceEditorBlock"] = function(blockNumber,sequenceEditor,annotationNumber) {
	saturn.client.programs.sequenceeditor.AnnotationEditorBlock.call(this,blockNumber,sequenceEditor,annotationNumber);
};
saturn.client.programs.DNAAnnotationSequenceEditorBlock.__name__ = ["saturn","client","programs","DNAAnnotationSequenceEditorBlock"];
saturn.client.programs.DNAAnnotationSequenceEditorBlock.__super__ = saturn.client.programs.sequenceeditor.AnnotationEditorBlock;
saturn.client.programs.DNAAnnotationSequenceEditorBlock.prototype = $extend(saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype,{
	initialise: function(blockNumber) {
		var _g = this;
		saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype.initialise.call(this,blockNumber);
		var contextMenu1 = function(event) {
			var sequenceRegion = _g.sequenceEditor.getSelectedRegion();
			if(sequenceRegion != null) {
				var contextMenu = Ext.create("Ext.menu.Menu",{ focusOnToFront : false, items : [{ text : "Blast Selected", handler : function() {
					var sequence = sequenceRegion.getAnnotationSequence();
					var blastName = "Blastp " + _g.sequenceEditor.getActiveObject(saturn.client.workspace.WorkspaceObject).getName() + " " + sequenceRegion.getAnnotationStartPosition() + " - " + sequenceRegion.getAnnotationStopPosition();
					sequence = StringTools.replace(sequence," ","");
					(js.Boot.__cast(_g.sequenceEditor , saturn.client.programs.DNASequenceEditor)).blastSequence(sequence,"Constructs (Protein)",blastName);
				}},{ text : "New Protein From Selected", handler : function() {
					var sequence1 = sequenceRegion.getAnnotationSequence();
					var proteinName = "Protein " + _g.sequenceEditor.getActiveObject(saturn.client.workspace.WorkspaceObject).getName() + " " + sequenceRegion.getAnnotationStartPosition() + " - " + sequenceRegion.getAnnotationStopPosition();
					sequence1 = StringTools.replace(sequence1," ","");
					var wO = new saturn.client.workspace.ProteinWorkspaceObject(new saturn.core.Protein(sequence1),proteinName);
					saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(wO,true);
				}}]});
				contextMenu.showAt(event.clientX,event.clientY);
				event.preventDefault();
			}
			return true;
		};
		var previousOnMouseUp = this.elem.onmouseup;
		this.elem.onmouseup = function(event1) {
			if(event1.ctrlKey) contextMenu1(event1); else previousOnMouseUp;
		};
		this.elem.oncontextmenu = contextMenu1;
	}
	,__class__: saturn.client.programs.DNAAnnotationSequenceEditorBlock
});
saturn.client.programs.sequenceeditor.SequenceEditorBlock = $hxClasses["saturn.client.programs.sequenceeditor.SequenceEditorBlock"] = function(blockNumber,sequenceEditor) {
	this.sequenceEditor = sequenceEditor;
	this.blockNumber = blockNumber;
	this.initialise(blockNumber);
};
saturn.client.programs.sequenceeditor.SequenceEditorBlock.__name__ = ["saturn","client","programs","sequenceeditor","SequenceEditorBlock"];
saturn.client.programs.sequenceeditor.SequenceEditorBlock.prototype = {
	divElem: null
	,sequenceEditor: null
	,blockNumber: null
	,getElement: function() {
		return this.divElem;
	}
	,getSequenceEditor: function() {
		return this.sequenceEditor;
	}
	,destroy: function() {
		this.divElem.onmouseup = null;
		this.divElem.oncontextmenu = null;
		this.sequenceEditor = null;
	}
	,initialise: function(blockNumber) {
		var _g = this;
		var self = this;
		this.divElem = window.document.createElement("pre");
		this.divElem.onblur = function() {
			self.getSequenceEditor().onBlockBlur(_g.divElem);
		};
		this.divElem.onmousedown = function(event) {
			if(event.button > 1) return;
			self.getSequenceEditor().makeAnnotationSelectable(-1);
			self.getSequenceEditor().mouseDown = true;
			self.getSequenceEditor().selectionUpdated();
		};
		this.divElem.onmouseup = function(event1) {
			self.getSequenceEditor().mouseDown = false;
			var dWindow = window;
			var selectedRegion = _g.getSequenceEditor().getSelectedRegion();
			var isClick;
			if(selectedRegion == null || selectedRegion.getSequence() == null || selectedRegion.getStartPosition() == selectedRegion.getStopPosition()) isClick = true; else isClick = false;
			if(isClick == true) _g.onBlockClick();
		};
		this.divElem.onmousemove = function() {
			var seqEditor = self.getSequenceEditor();
			var app = saturn.client.WorkspaceApplication.getApplication();
			if(seqEditor.mouseDown == true) {
				if(seqEditor.inputFocused != null) {
					var sequenceRegion = seqEditor.getSelectedRegion();
					var displayBlock = seqEditor.inputFocused.nextSibling;
					var inputBlockNumber = displayBlock.blockNumber;
					var offSet = (inputBlockNumber - 1) * seqEditor.blockSize;
					var startPos = sequenceRegion.getStartPosition() - offSet;
					var stopPos = sequenceRegion.getStopPosition() - offSet;
					seqEditor.onBlockBlur(displayBlock);
					var sel = window.getSelection();
					sel.removeAllRanges();
					var range = window.document.createRange();
					var sel1 = window.getSelection();
					if(blockNumber > inputBlockNumber) {
						range.setStart(displayBlock.firstChild,startPos);
						range.setEnd(displayBlock.firstChild,stopPos);
						sel1.addRange(range);
					} else {
						range.setStart(displayBlock.firstChild,stopPos);
						sel1.addRange(range);
						sel1.extend(displayBlock.firstChild,startPos + 1);
					}
				}
				seqEditor.inMouseMove = true;
				seqEditor.selectionUpdated();
			}
		};
		this.divElem.className = Std.string(this.divElem.className) + " molbio-sequenceeditor-block";
		this.divElem.blockNumber = blockNumber;
		this.divElem.style.dysplay = "inline-block";
		this.getSequenceEditor().autoSetBlockWidth(this.divElem);
	}
	,onBlockClick: function() {
		var _g = this;
		if(this.divElem.isInput == true) {
		} else if(this.divElem.tagName == "INPUT") {
		} else {
			if(this.sequenceEditor.isFindAnnotationOn()) this.sequenceEditor.redrawSequenceOnly();
			var spanTextNode = this.divElem.lastChild;
			var offSetPos = this.divElem.offSetPos;
			if(offSetPos == null) {
				var sel = window.getSelection();
				var selPos = 1;
				if(sel.focusNode == spanTextNode) selPos = sel.focusOffset;
				offSetPos = selPos;
			} else this.divElem.offSetPos = null;
			var inputElem;
			var _this = window.document;
			inputElem = _this.createElement("input");
			inputElem.className = "molbio-sequenceeditor-block-input molbio-selectable";
			inputElem.value = this.divElem.textContent;
			this.sequenceEditor.autoSetBlockWidth(inputElem);
			this.divElem.isInput = true;
			this.divElem.innerText = "";
			this.divElem.innerHTML = "";
			this.divElem.style.width = "0em";
			if(this.divElem.parentNode.insertBefore) this.divElem.parentNode.insertBefore(inputElem,this.divElem); else this.divElem.insertAdjacentElement("beforeBegin",inputElem);
			this.divElem.className = "molbio-sequenceeditor-block-hidden";
			inputElem.focus();
			inputElem.setSelectionRange(offSetPos,offSetPos);
			var inputElemD = inputElem;
			inputElemD.blockNumber = this.blockNumber;
			var cursorPosition = (this.blockNumber - 1) * this.sequenceEditor.blockSize + offSetPos;
			this.getSequenceEditor().setCursorPosition(new saturn.client.programs.sequenceeditor.SequenceRegion(cursorPosition,cursorPosition,-1));
			var self = this;
			inputElem.addEventListener("blur",function(e) {
				self.sequenceEditor.onBlockBlur(inputElem.nextSibling);
			});
			inputElem.addEventListener("input",function(event) {
				event.cancelBubble = true;
				event.stopPropagation();
				self.sequenceEditor.blockChanged(inputElem,self.blockNumber,null,null,null);
			});
			inputElem.addEventListener("mousedown",function(e1) {
				self.sequenceEditor.makeAnnotationSelectable(-1);
				self.sequenceEditor.mouseDown = true;
			});
			inputElem.addEventListener("mouseup",function(e2) {
				self.onBlockClick();
				self.sequenceEditor.mouseDown = false;
			});
			inputElem.onkeyup = function(event1) {
				if(!(event1.keyCode == 46 || event1.keyCode == 8)) {
					event1.cancelBubble = true;
					if(event1.stopPropagation) event1.stopPropagation();
					var blockNumber = inputElemD.blockNumber;
					self.sequenceEditor.blockChanged(inputElem,self.blockNumber,null,null,null);
					self.sequenceEditor.mouseDown = false;
					_g.getSequenceEditor().getApplication().onkeyup(event1);
				}
			};
			inputElem.onkeydown = function(event2) {
				_g.getSequenceEditor().getApplication().onkeydown(event2);
			};
			this.sequenceEditor.inputFocused = inputElem;
		}
	}
	,__class__: saturn.client.programs.sequenceeditor.SequenceEditorBlock
};
saturn.client.programs.DNASequenceEditorBlock = $hxClasses["saturn.client.programs.DNASequenceEditorBlock"] = function(blockNumber,sequenceEditor) {
	saturn.client.programs.sequenceeditor.SequenceEditorBlock.call(this,blockNumber,sequenceEditor);
};
saturn.client.programs.DNASequenceEditorBlock.__name__ = ["saturn","client","programs","DNASequenceEditorBlock"];
saturn.client.programs.DNASequenceEditorBlock.__super__ = saturn.client.programs.sequenceeditor.SequenceEditorBlock;
saturn.client.programs.DNASequenceEditorBlock.prototype = $extend(saturn.client.programs.sequenceeditor.SequenceEditorBlock.prototype,{
	initialise: function(blockNumber) {
		var _g = this;
		saturn.client.programs.sequenceeditor.SequenceEditorBlock.prototype.initialise.call(this,blockNumber);
		var contextMenu1 = function(event) {
			var sequenceRegion = _g.sequenceEditor.getSelectedRegion();
			if(sequenceRegion != null) {
				var baseName = _g.sequenceEditor.getActiveObject(saturn.client.workspace.WorkspaceObject).getName() + " " + (sequenceRegion.getStartPosition() + 1) + "-" + sequenceRegion.getStopPosition();
				var blastName = "Blastn " + baseName;
				var contextMenu = Ext.create("Ext.menu.Menu",{ focusOnToFront : false, items : [{ text : "Blast Selected", handler : function() {
					(js.Boot.__cast(_g.sequenceEditor , saturn.client.programs.DNASequenceEditor)).blastSequence(sequenceRegion.getSequence(),"Constructs (DNA)",blastName);
				}},{ text : "New From Selected", handler : function() {
					var w0 = new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(sequenceRegion.getSequence()),baseName);
					_g.sequenceEditor.getWorkspace().addObject(w0,true);
				}},{ text : "Generate Forward Primer", handler : function() {
					var w01 = new saturn.client.workspace.PrimerWorkspaceObject(new saturn.core.Primer(sequenceRegion.getSequence()),"Primer " + baseName);
					_g.sequenceEditor.getWorkspace().addObject(w01,true);
				}},{ text : "Generate Reverse Primer", handler : function() {
					var w02 = new saturn.client.workspace.PrimerWorkspaceObject(new saturn.core.Primer(new saturn.core.DNA(sequenceRegion.getSequence()).getInverseComplement()),"Primer " + baseName);
					_g.sequenceEditor.getWorkspace().addObject(w02,true);
				}},{ text : "Generate Primers", handler : function() {
				}}]});
				contextMenu.showAt(event.clientX,event.clientY);
				event.preventDefault();
			}
			return true;
		};
		var previousOnMouseUp = this.divElem.onmouseup;
		this.divElem.onmouseup = function(event1) {
			if(event1.ctrlKey) contextMenu1(event1); else previousOnMouseUp(event1);
		};
		this.divElem.oncontextmenu = contextMenu1;
	}
	,destroy: function() {
		this.divElem.onmouseup = null;
		this.divElem.oncontextmenu = null;
		this.sequenceEditor = null;
	}
	,__class__: saturn.client.programs.DNASequenceEditorBlock
});
saturn.client.workspace.DigestWO = $hxClasses["saturn.client.workspace.DigestWO"] = function(object,name) {
	this.theActiveDNA = new saturn.core.DNA("");
	if(object == null) object = new saturn.core.DoubleDigest(null,null,null);
	if(name == null) name = "Double Digest";
	saturn.client.workspace.DNAWorkspaceObject.call(this,object,name);
};
saturn.client.workspace.DigestWO.__name__ = ["saturn","client","workspace","DigestWO"];
saturn.client.workspace.DigestWO.getNewMenuText = function() {
	return "Double Digest";
};
saturn.client.workspace.DigestWO.__super__ = saturn.client.workspace.DNAWorkspaceObject;
saturn.client.workspace.DigestWO.prototype = $extend(saturn.client.workspace.DNAWorkspaceObject.prototype,{
	templateObjId: null
	,res1ObjId: null
	,res2ObjId: null
	,theActiveDNA: null
	,getDNAObject: function() {
		return this.theActiveDNA;
	}
	,digest: function() {
		if(this.templateObjId == null || this.res1ObjId == null || this.res2ObjId == null) return;
		var workspace = saturn.client.WorkspaceApplication.getApplication().getWorkspace();
		var template = workspace.getObjectSafely(this.templateObjId,saturn.client.workspace.DNAWorkspaceObject).getObject();
		var res1;
		res1 = js.Boot.__cast(workspace.getObjectSafely(this.res1ObjId,saturn.client.workspace.DNAWorkspaceObject).getObject() , saturn.core.RestrictionSite);
		var res2;
		res2 = js.Boot.__cast(workspace.getObjectSafely(this.res2ObjId,saturn.client.workspace.DNAWorkspaceObject).getObject() , saturn.core.RestrictionSite);
		this.object.setTemplate(template);
		this.object.setRestrictionSite1(res1);
		this.object.setRestrictionSite2(res2);
		this.object.digest();
		this.theActiveDNA = this.object.getCenterProduct();
	}
	,getDigest: function() {
		return js.Boot.__cast(this.object , saturn.core.DoubleDigest);
	}
	,setTemplate: function(template) {
		if(template == null) this.templateObjId = null; else this.templateObjId = template.getUUID();
	}
	,setRestrictionSite1: function(res1) {
		if(res1 == null) this.res1ObjId = null; else this.res1ObjId = res1.getUUID();
	}
	,setRestrictionSite2: function(res2) {
		if(res2 == null) this.res2ObjId = null; else this.res2ObjId = res2.getUUID();
	}
	,getTemplateId: function() {
		return this.templateObjId;
	}
	,getRes1Id: function() {
		return this.res1ObjId;
	}
	,getRes2Id: function() {
		return this.res2ObjId;
	}
	,setDNAObject: function(dnaObject) {
		this.theActiveDNA = dnaObject;
	}
	,setLeftActive: function() {
		this.setDNAObject(this.object.getLeftProduct());
	}
	,setRightActive: function() {
		this.setDNAObject(this.object.getRightProduct());
	}
	,setMiddleActive: function() {
		this.setDNAObject(this.object.getCenterProduct());
	}
	,__class__: saturn.client.workspace.DigestWO
});
saturn.client.programs.DigestViewer = $hxClasses["saturn.client.programs.DigestViewer"] = function() {
	saturn.client.programs.DNASequenceEditor.call(this);
};
saturn.client.programs.DigestViewer.__name__ = ["saturn","client","programs","DigestViewer"];
saturn.client.programs.DigestViewer.__interfaces__ = [saturn.client.workspace.WorkspaceListener];
saturn.client.programs.DigestViewer.__super__ = saturn.client.programs.DNASequenceEditor;
saturn.client.programs.DigestViewer.prototype = $extend(saturn.client.programs.DNASequenceEditor.prototype,{
	emptyInit: function() {
		saturn.client.programs.DNASequenceEditor.prototype.emptyInit.call(this);
		this.getWorkspace().addListener(this);
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.DNASequenceEditor.prototype.setActiveObject.call(this,objectId);
	}
	,postRestore: function() {
		saturn.client.programs.DNASequenceEditor.prototype.postRestore.call(this);
		this.updateDigest();
	}
	,onFocus: function() {
		saturn.client.programs.DNASequenceEditor.prototype.onFocus.call(this);
		var me = this;
		this.getApplication().getViewMenu().add({ text : "Update digest", handler : function() {
			me.updateDigest();
		}});
		this.showActiveSequence();
	}
	,close: function() {
		saturn.client.programs.DNASequenceEditor.prototype.close.call(this);
		this.getApplication().getWorkspace().removeListener(this);
	}
	,serialise: function() {
		var object = saturn.client.programs.DNASequenceEditor.prototype.serialise.call(this);
		return object;
	}
	,deserialise: function(object) {
		saturn.client.programs.DNASequenceEditor.prototype.deserialise.call(this,object);
	}
	,onOutlineDrop: function(node,data,overModel,dropPosition,dropHandlers,eOpts) {
		var objectId = data.records[0].get("objectId");
		var dnaWO = this.getWorkspace().getObjectSafely(objectId,saturn.client.workspace.DNAWorkspaceObject);
		if(dnaWO != null) {
			var update = false;
			var activeObject = this.getActiveObject(saturn.client.workspace.DigestWO);
			if(overModel.data.id == "Template") {
				activeObject.setTemplate(dnaWO);
				update = true;
			} else if(overModel.data.id == "Restriction 1") {
				if(Std["is"](dnaWO.getDNAObject(),saturn.core.RestrictionSite)) {
					activeObject.setRestrictionSite1(dnaWO);
					data.records[0].raw.objectId = data.records[0].raw.objectId + "_1";
					data.records[0].data.objectId = data.records[0].data.objectId + "_1";
					update = true;
				}
			} else if(overModel.data.id == "Restriction 2") {
				if(Std["is"](dnaWO.getDNAObject(),saturn.core.RestrictionSite)) {
					activeObject.setRestrictionSite2(dnaWO);
					data.records[0].raw.objectId = data.records[0].raw.objectId + "_1";
					data.records[0].data.objectId = data.records[0].data.objectId + "_1";
					update = true;
				}
			}
			if(update) {
				this.updateDigest();
				return true;
			}
		}
		dropHandlers.cancelDrop();
		return false;
	}
	,updateDigest: function() {
		if(this.getActiveObject(saturn.client.workspace.DigestWO) != null) {
			var activeObject = this.getActiveObject(saturn.client.workspace.DigestWO);
			if(activeObject.getTemplateId() == null || activeObject.getRes1Id() == null || activeObject.getRes2Id() == null) return;
			try {
				activeObject.digest();
				this.setMiddleActive();
			} catch( ex ) {
				if (ex instanceof js._Boot.HaxeError) ex = ex.val;
				if( js.Boot.__instanceof(ex,saturn.util.HaxeException) ) {
					js.Browser.alert(ex.getMessage());
					return;
				} else throw(ex);
			}
		}
	}
	,setLeftActive: function() {
		this.getActiveObject(saturn.client.workspace.DigestWO).setLeftActive();
		this.showActiveSequence();
	}
	,setRightActive: function() {
		this.getActiveObject(saturn.client.workspace.DigestWO).setRightActive();
		this.showActiveSequence();
	}
	,setMiddleActive: function() {
		this.getActiveObject(saturn.client.workspace.DigestWO).setMiddleActive();
		this.showActiveSequence();
	}
	,showActiveSequence: function() {
		var me = this;
		if(saturn.client.WorkspaceApplication.getApplication().getActiveProgram() == me) {
			var activeObject = this.getActiveObject(saturn.client.workspace.DigestWO);
			if(activeObject != null) {
				var sequence = activeObject.getDNAObject().getSequence();
				if(sequence != null && sequence.length != 0) this.blockChanged(null,null,0,null,sequence);
			}
		}
	}
	,installOutlineTree: function() {
		var _g = this;
		saturn.client.programs.DNASequenceEditor.prototype.installOutlineTree.call(this);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var templateFolder = rootNode.appendChild({ text : "Template", leaf : false, expanded : true, id : "Template"});
		var activeObject = this.getActiveObject(saturn.client.workspace.DigestWO);
		if(activeObject != null) {
			var templateId = activeObject.getTemplateId();
			if(templateId != null) {
				var wO = this.getWorkspace().getObjectSafely(templateId,saturn.client.workspace.DNAWorkspaceObject);
				var childNode = templateFolder.appendChild(Ext.create("WorkspaceObject",{ text : wO.getName(), leaf : true, objectId : templateId, id : templateId}));
			}
		}
		var res1Folder = rootNode.appendChild({ text : "Restriction 1", leaf : false, expanded : true, id : "Restriction 1"});
		var activeObject1 = this.getActiveObject(saturn.client.workspace.DigestWO);
		if(activeObject1 != null) {
			var res1Id = activeObject1.getRes1Id();
			if(res1Id != null) {
				var wO1 = this.getWorkspace().getObjectSafely(res1Id,saturn.client.workspace.DNAWorkspaceObject);
				var childNode1 = res1Folder.appendChild(Ext.create("WorkspaceObject",{ text : wO1.getName(), leaf : true, objectId : res1Id + "_1", id : res1Id + "_1"}));
			}
		}
		var res2Folder = rootNode.appendChild({ text : "Restriction 2", leaf : false, expanded : true, id : "Restriction 2"});
		var activeObject2 = this.getActiveObject(saturn.client.workspace.DigestWO);
		if(activeObject2 != null) {
			var res2Id = activeObject2.getRes2Id();
			if(res2Id != null) {
				var wO2 = this.getWorkspace().getObjectSafely(res2Id,saturn.client.workspace.DNAWorkspaceObject);
				var childNode2 = res2Folder.appendChild(Ext.create("WorkspaceObject",{ text : wO2.getName(), leaf : true, objectId : res2Id + "_2", id : res2Id + "_2"}));
			}
		}
		var fragmentsFolder = rootNode.appendChild({ text : "Fragments", leaf : false, expanded : true, id : "Fragments"});
		fragmentsFolder.appendChild(Ext.create("WorkspaceObject",{ text : "Left of cuts", leaf : true, id : "Left of cuts", objectId : null}));
		fragmentsFolder.appendChild(Ext.create("WorkspaceObject",{ text : "Between cuts", leaf : true, id : "Between cuts", objectId : null}));
		fragmentsFolder.appendChild(Ext.create("WorkspaceObject",{ text : "Right of cuts", leaf : true, id : "Right of cuts", objectId : null}));
		var contextMenu1 = function(view,record,item,index,event) {
			var self = _g;
			var objectId = record.get("objectId");
			if(objectId != "") {
				var contextMenu = Ext.create("Ext.menu.Menu",{ items : [{ text : "Remove ", handler : function() {
					self.objectRemoved(self.getWorkspace().getObject(objectId));
				}}]});
				contextMenu.showAt(event.getXY());
				event.stopEvent();
			}
		};
		this.getApplication().getOutlineTree("DEFAULT").on("itemcontextmenu",contextMenu1,this);
		var me = this;
		this.getApplication().getOutlineTree("DEFAULT").on("itemclick",function(view1,rec,item1,index1,event1) {
			if(event1.ctrlKey) contextMenu1(view1,rec,item1,index1,event1); else {
				var id = rec.get("id");
				if("Left of cuts" == id) me.setLeftActive(); else if("Right of cuts" == id) me.setRightActive(); else if("Between cuts" == id) me.setMiddleActive();
			}
		},this);
	}
	,convertDragToWorkspaceObject: function(data) {
		var wO = this.getActiveObject(saturn.client.workspace.DigestWO);
		var digest = wO.getObject();
		if(data.id == "Left of cuts") return new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(digest.getLeftProduct().getSequence()),"Left"); else if(data.id == "Right of cuts") return new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(digest.getRightProduct().getSequence()),"Right"); else if(data.id == "Between cuts") return new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(digest.getCenterProduct().getSequence()),"Center"); else return null;
	}
	,objectRenamed: function(object) {
		var objectId = object.getUUID();
		var wO = this.getActiveObject(saturn.client.workspace.DigestWO);
		var isOurs = false;
		if(objectId == wO.getTemplateId()) isOurs = true; else if(objectId == wO.getRes1Id()) isOurs = true; else if(objectId == wO.getRes2Id()) isOurs = true;
		if(isOurs) {
			var node = this.getApplication().getOutlineDataStore("DEFAULT").getRootNode().findChild("objectId",objectId,true);
			if(node != null) {
				node.set("text",object.getName());
				node.commit();
			}
		}
	}
	,objectAdded: function(object) {
	}
	,objectRemoved: function(object) {
		var objectId = object.getUUID();
		var isOurs = false;
		var wO = this.getActiveObject(saturn.client.workspace.DigestWO);
		if(wO == null) return;
		if(objectId == wO.getTemplateId()) {
			isOurs = true;
			wO.setTemplate(null);
		} else if(objectId == wO.getRes1Id()) {
			isOurs = true;
			wO.setRestrictionSite1(null);
			objectId = objectId + "_1";
		} else if(objectId == wO.getRes2Id()) {
			isOurs = true;
			wO.setRestrictionSite2(null);
			objectId = objectId + "_2";
		}
		if(isOurs) {
			var node = this.getApplication().getOutlineDataStore("DEFAULT").getRootNode().findChild("objectId",objectId,true);
			if(node != null) node.parentNode.removeChild(node);
		}
	}
	,__class__: saturn.client.programs.DigestViewer
});
saturn.client.programs.EmptyViewer = $hxClasses["saturn.client.programs.EmptyViewer"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.EmptyViewer.__name__ = ["saturn","client","programs","EmptyViewer"];
saturn.client.programs.EmptyViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.EmptyViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,emptyInit: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		var self = this;
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "95%", autoScroll : true, layout : "fit", listeners : { 'render' : function() {
			self.initialiseDOMComponent();
		}}});
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.setTitle(this.getObject().getName());
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,__class__: saturn.client.programs.EmptyViewer
});
saturn.client.workspace.GlycanWO = $hxClasses["saturn.client.workspace.GlycanWO"] = function(object,name) {
	if(object == null) object = new saturn.core.domain.Glycan();
	if(name == null) name = "Glycan";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.GlycanWO.__name__ = ["saturn","client","workspace","GlycanWO"];
saturn.client.workspace.GlycanWO.getNewMenuText = function() {
	return "Glycan";
};
saturn.client.workspace.GlycanWO.getDefaultFolderName = function() {
	return "Glycan";
};
saturn.client.workspace.GlycanWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.GlycanWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.GlycanWO
});
saturn.client.programs.GlycanBuilder = $hxClasses["saturn.client.programs.GlycanBuilder"] = function() {
	this.storedCommands = [];
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.GlycanBuilder.__name__ = ["saturn","client","programs","GlycanBuilder"];
saturn.client.programs.GlycanBuilder.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-glycanbuilder", text : "GlycanBuilder", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.GlycanWO(null,null),true);
	}}];
};
saturn.client.programs.GlycanBuilder.parseFile = function(file,cb,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	var extension = saturn.client.core.CommonCore.getFileExtension(file.name);
	if(extension == "glycoct_condensed") saturn.client.core.CommonCore.getFileAsText(file,function(contents) {
		if(contents != null) {
			var name = "Glycan";
			var glycan = new saturn.core.domain.Glycan();
			glycan.content = contents;
			glycan.contentType = "glycoct_condensed";
			saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.GlycanWO(glycan,name),true);
		}
	});
};
saturn.client.programs.GlycanBuilder.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.GlycanBuilder.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	storedCommands: null
	,theComponent: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		var url = window.location.protocol + "//" + window.location.hostname + ":" + window.location.port + "/GlycanBuilder/GlycanBuilder.html";
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "95%", autoScroll : true, layout : "border", items : [{ xtype : "component", region : "north", autoEl : { tag : "iframe", src : url, width : "100%", style : { height : "100%"}}}], listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}}});
	}
	,initialiseDOMComponent: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		this.pokeCanvas(function(error) {
			if(error != null) _g.getApplication().showMessage("Error",error); else if(_g.storedCommands.length > 0) while(_g.storedCommands.length > 0) {
				var unit = _g.storedCommands.pop();
				_g.runCanvasCommand(unit[0],unit[1]);
			}
		});
	}
	,pokeCanvas: function(cb) {
		var giframe = this.getComponent().getEl().down("iframe").dom;
		var clicked = false;
		var checkCanvas = null;
		checkCanvas = function() {
			if(giframe != null) {
				var giDocument = giframe.contentDocument;
				var matchingItems = giDocument.querySelectorAll("[src='/GlycanBuilder/VAADIN/themes/ucdb_2011theme/icons/selectall.png']");
				if(matchingItems.length > 0) {
					var imgElement = matchingItems[0];
					var selectAllButton = imgElement.parentElement;
					if(!clicked) {
						selectAllButton.click();
						clicked = true;
					}
					if(giframe.contentWindow.glycanCanvas != null) {
						cb(null);
						return;
					}
				}
			}
			haxe.Timer.delay(checkCanvas,100);
		};
		checkCanvas();
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().installOutlineTree("MODELS",true,false,"WorkspaceObject","GRID");
		if(this.getActiveObjectId() != null) {
			var glycan = this.getActiveObjectObject();
			this.addModelToOutline(glycan,true);
		}
		this.getApplication().getMiddleSouthPanel().body.update("<b>Please follow these instructions if GlycanBuilder isn't working - <a target=\"_blank\" href=\"/static/manual/index.html#GlycanBuilder%20Installation\">Guide</a></b>");
	}
	,getCanvasContents: function(cb) {
		this.runCanvasCommand("export~glycoct_condensed",cb);
	}
	,runCanvasCommand: function(command,cb) {
		var hook = this.getCanvasHook();
		if(hook == null) {
			this.storedCommands.push([command,cb]);
			return;
		}
		var gcb = [];
		gcb.run = function(res) {
			cb(res);
		};
		hook.runCommand(command,gcb);
	}
	,canvasLoaded: function() {
		if(this.getCanvasHook() == null) return false; else return true;
	}
	,getCanvasHook: function() {
		var giframe = this.getComponent().getEl().down("iframe").dom;
		return giframe.contentWindow.glycanCanvas;
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.GlycanWO) , saturn.client.workspace.GlycanWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.domain.Glycan);
		this.setTitle(w0.getName());
		if(obj.content != null) this.loadContent(obj.contentType,obj.content);
	}
	,loadContent: function(contentType,content) {
		this.runCanvasCommand("import~" + contentType + "~" + content,function(res) {
		});
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,saveWait: function(cb) {
		var _g = this;
		var obj = this.getActiveObjectObject();
		this.getCanvasContents(function(res) {
			var obj1 = _g.getActiveObjectObject();
			obj1.content = res;
			obj1.contentType = "glycoct_condensed";
			cb();
		});
	}
	,saveAsync: function(cb) {
		var glycan = this.getObject();
		this.getCanvasContents(function(res) {
			glycan.content = res;
			glycan.contentType = "glycoct_condensed";
			cb(null);
		});
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
		saturn.client.programs.GlycanBuilder.parseFile(file,function(contents) {
		},asNewOpenProgram);
	}
	,__class__: saturn.client.programs.GlycanBuilder
});
saturn.client.workspace.GridVarWO = $hxClasses["saturn.client.workspace.GridVarWO"] = function(object,name) {
	if(object == null) object = new saturn.core.GridVar();
	if(name == null) name = "SeqFig";
	this.iconPath = "/static/js/images/gridvar_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.GridVarWO.__name__ = ["saturn","client","workspace","GridVarWO"];
saturn.client.workspace.GridVarWO.getNewMenuText = function() {
	return "Figure";
};
saturn.client.workspace.GridVarWO.getDefaultFolderName = function() {
	return "Summaries";
};
saturn.client.workspace.GridVarWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.GridVarWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.GridVarWO
});
saturn.client.programs.GridVarViewer = $hxClasses["saturn.client.programs.GridVarViewer"] = function() {
	this.type_to_styles = { };
	this.canvasData = [];
	this.rowOrder = [];
	this.columnOrder = [];
	this.columnToLabel = { };
	this.data = [];
	this.dirty = false;
	this.rendered = false;
	this.canvasRender = true;
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.GridVarViewer.__name__ = ["saturn","client","programs","GridVarViewer"];
saturn.client.programs.GridVarViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-gridvar", text : "SeqFig<br/>Tool", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.GridVarWO(null,null),true);
	}, tooltip : { dismissDelay : 10000, text : "Summarise multi-dimensional data"}}];
};
saturn.client.programs.GridVarViewer.parseFile = function(file) {
	var ext = saturn.client.core.CommonCore.getFileExtension(file.name);
	if(ext == "csv") saturn.client.core.CommonCore.getFileAsText(file,function(content) {
		if(content != null) {
			var obj = new saturn.core.GridVar();
			obj.fileContent = content;
			var wo = new saturn.client.workspace.GridVarWO(obj,file.name);
			saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(wo,true);
		}
	});
};
saturn.client.programs.GridVarViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.GridVarViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,rowField: null
	,gridVarDom: null
	,dataTable: null
	,styleTable: null
	,annotationTable: null
	,tabPanel: null
	,gridVarElem: null
	,cellSlider: null
	,xLabelsCheckBox: null
	,gridVarObj: null
	,canvasRender: null
	,rendered: null
	,dirty: null
	,data: null
	,columnToLabel: null
	,columnOrder: null
	,rowOrder: null
	,canvasData: null
	,type_to_styles: null
	,paddingCheckbox: null
	,fitToAreaCheckBox: null
	,canvasGridVar: null
	,valueToSyles: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.theComponent = Ext.create("Ext.panel.Panel",{ layout : { type : "accordion", multi : true, enableSplitters : true}, listeners : { 'afterrender' : function() {
			_g.initialiseDOMComponent();
		}}});
		var topPanel = Ext.create("Ext.panel.Panel",{ title : "Graph", multiSelect : true, items : [{ xtype : "component", autoEl : { tag : "div"}, style : { 'background-color' : "white", height : "100%"}, width : "100%", itemId : "gridvar_container"}], style : { 'background-color' : "white"}, listeners : { 'resize' : function() {
			if(_g.rendered) _g.redrawGridVar();
		}, 'afterrender' : function() {
			_g.rendered = true;
			_g.redrawGridVar();
		}}, flex : 1, layout : { type : "fit"}});
		this.theComponent.add(topPanel);
		this.tabPanel = Ext.create("Ext.tab.Panel",{ title : "Configuration", width : "100%", multiSelect : true, style : { 'background-color' : "white"}, flex : 2, collapsed : false, listeners : { expand : function() {
			if(_g.gridVarObj != null) _g.gridVarObj.configCollapse = false;
		}, collapse : function() {
			if(_g.gridVarObj != null) _g.gridVarObj.configCollapse = true;
		}}});
		this.theComponent.add(this.tabPanel);
		this.rowField = "residue";
		this.addAnnotationTable();
		this.addStyleGridPanel();
		this.addDataGridPanel();
		this.tabPanel.setActiveTab(0);
		this.registerDropFolder("Objects",null,true);
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
	}
	,addStyleGridPanel: function() {
		var _g = this;
		var colDefs = [{ text : "Annotation Group", dataIndex : "data_type", editor : "textfield"},{ text : "Mapping Value", dataIndex : "mapping", editor : "textfield"},{ text : "Color", dataIndex : "color", editor : "textfield"},{ text : "Annotation Label", dataIndex : "label", editor : "textfield"},{ text : "Apply to rows", dataIndex : "columns", editor : "textfield"},{ text : "Style", dataIndex : "style", editor : "textfield"}];
		var data = [{ 'data_type' : "covered", 'mapping' : "1", style : "rec", 'color' : "purple", 'label' : "Covered", 'columns' : "*"},{ 'data_type' : "covered", 'mapping' : "0", style : "rec", 'color' : "#f1f1f1", 'label' : "Not Covered", 'columns' : "*"}];
		this.styleTable = new saturn.client.programs.blocks.BaseTable(colDefs,data,"Styles");
		this.styleTable.build();
		this.styleTable.setEditListener(function() {
			_g.setDirty(true);
			_g.redrawGridVar();
		});
		this.tabPanel.add(this.styleTable.getComponent());
	}
	,addDataGridPanel: function() {
		var _g = this;
		var colDefs = [{ text : "Residue", dataIndex : "residue", editor : "textfield"},{ text : "Construct", dataIndex : "construct", editor : "textfield"},{ text : "PDB", dataIndex : "pdb", editor : "textfield"}];
		var data = [{ 'residue' : "A", 'construct' : "1", 'pdb' : "1"},{ 'residue' : "T", 'construct' : "1", 'pdb' : "1"},{ 'residue' : "G", 'construct' : "0", 'pdb' : "1"}];
		this.dataTable = new saturn.client.programs.blocks.BaseTable(colDefs,data,"Raw Data");
		this.dataTable.build();
		this.dataTable.setEditListener(function() {
			_g.setDirty(true);
			_g.redrawGridVar();
		});
		this.tabPanel.add(this.dataTable.getComponent());
	}
	,addAnnotationTable: function() {
		var _g = this;
		var colDefs = [{ text : "Start", dataIndex : "start", editor : "textfield"},{ text : "Stop", dataIndex : "stop", editor : "textfield"},{ text : "Value", dataIndex : "value", editor : "textfield"},{ text : "Row", dataIndex : "column", editor : "textfield"}];
		var data = [{ 'start' : "1", 'stop' : "3", 'value' : "1"}];
		this.annotationTable = new saturn.client.programs.blocks.BaseTable(colDefs,data,"Annotations");
		this.annotationTable.build();
		this.annotationTable.setEditListener(function() {
			_g.updateAnnotations();
			_g.setDirty(true);
			_g.redrawGridVar();
		});
		this.tabPanel.add(this.annotationTable.getComponent());
	}
	,updateAnnotations: function() {
		var _g = this;
		this.annotationTable.getStore().each(function(record) {
			if(_g.annotationTable.isRecordEmpty(record)) return true;
			var model = record.getData();
			var start = model.start - 1;
			var stop = model.stop;
			var value = model.value;
			var column = model.column;
			if(column == null || column == "") return true;
			var columnIndex = null;
			var _g1 = 0;
			var _g2 = _g.dataTable.getColumns();
			while(_g1 < _g2.length) {
				var columnDef = _g2[_g1];
				++_g1;
				if(columnDef.text == column) columnIndex = columnDef.dataIndex;
			}
			if(columnIndex == null) {
				_g.getApplication().showMessage("Invalid column name","Please enter a valid column name for " + column);
				return false;
			}
			var dataStore = _g.dataTable.getStore();
			var recordCount = dataStore.count();
			var _g11 = start;
			while(_g11 < stop) {
				var i = _g11++;
				if(i > recordCount) {
					_g.dataTable.addNewRow();
					recordCount++;
				}
				var model1 = dataStore.getAt(i);
				model1.set(columnIndex,value);
				model1.commit();
			}
			return true;
		});
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
		this.getApplication().getToolBar().add({ iconCls : "x-btn-export", text : "Export", handler : function() {
			_g.exportSVGForCanvas();
		}, tooltip : { dismissDelay : 10000, text : "Export to SVG (open in Illustrator or Inkscape)"}});
		this.xLabelsCheckBox = this.getApplication().getToolBar().add({ xtype : "checkbox", boxLabel : "x-labels", inputValue : "1", checked : this.gridVarObj != null && this.gridVarObj.showXLabels?true:false, handler : function() {
			var This = this;
			_g.gridVarObj.showXLabels = This.getValue();
			_g.redrawGridVar();
		}, listeners : { 'afterrender' : function(c) {
			Ext.QuickTips.register({ dismissDelay : 10000, target : c.getEl(), text : "Show x-axis labels (for DNA/Protein this is the sequence)"});
		}}});
		this.paddingCheckbox = this.getApplication().getToolBar().add({ xtype : "checkbox", boxLabel : "Squares", inputValue : "1", checked : this.gridVarObj != null && this.gridVarObj.padding?true:false, handler : function() {
			var This1 = this;
			_g.gridVarObj.padding = This1.getValue();
			_g.redrawGridVar();
		}, listeners : { 'afterrender' : function(c1) {
			Ext.QuickTips.register({ dismissDelay : 10000, target : c1.getEl(), text : "Draw individual squares"});
		}}});
		this.fitToAreaCheckBox = this.getApplication().getToolBar().add({ xtype : "checkbox", boxLabel : "Fit", inputValue : "1", checked : this.gridVarObj != null && this.gridVarObj.fit?true:false, handler : function() {
			var This2 = this;
			_g.gridVarObj.fit = This2.getValue();
			_g.updateActions();
			_g.redrawGridVar();
		}, listeners : { 'afterrender' : function(c2) {
			Ext.QuickTips.register({ dismissDelay : 10000, target : c2.getEl(), text : "Fit figure to smallest amount of space<br/>(more space may be consumed if x-labels are being shown)"});
		}}});
		this.cellSlider = this.getApplication().getToolBar().add({ xtype : "slider", width : 200, value : 9, increment : 0.2, minValue : 0.2, maxValue : 20, listeners : { change : function() {
			var This3 = this;
			_g.gridVarObj.xCellSize = This3.getValue();
			_g.redrawGridVar();
		}, 'afterrender' : function(c3) {
			Ext.QuickTips.register({ dismissDelay : 10000, target : c3.getEl(), text : "Control the amount of space used to display the figure"});
		}}, disabled : this.gridVarObj != null && this.gridVarObj.fit?true:false});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Add Row", handler : function() {
			_g.dataTable.promptAddGridColumn(function() {
				_g.updateRowOrder();
				_g.redrawGridVar();
			});
		}, tooltip : { dismissDelay : 10000, text : "Add Row (rows are drawn along the y-axis)"}});
		this.getApplication().getViewMenu().add({ text : "Update GridVar", handler : function() {
			_g.redrawGridVar();
		}});
	}
	,isDirty: function() {
		return this.dirty;
	}
	,setDirty: function(dirty) {
		this.dirty = dirty;
	}
	,redrawGridVar: function() {
		if(this.getActiveObjectId() == null || this.gridVarObj == null) return;
		var gridVar = this.getActiveObjectObject();
		gridVar.xCellSize = this.cellSlider.getValue();
		if(this.isDirty()) {
			this.setDirty(false);
			this.regenerate();
		}
		gridVar.dataTableDefinition = this.dataTable.getTableDefinition();
		gridVar.styleTableDefinition = this.styleTable.getTableDefinition();
		gridVar.annotationTableDefinition = this.annotationTable.getTableDefinition();
		this.rowField = gridVar.dataTableDefinition.columnDefs[0].dataIndex;
		var domElem = this.theComponent.down("panel").down("component[itemId=gridvar_container]").getEl().dom;
		if(this.gridVarDom != null) domElem.removeChild(this.gridVarDom);
		this.gridVarDom = window.document.createElement("div");
		this.gridVarDom.style.height = "100%";
		domElem.appendChild(this.gridVarDom);
		var lines = null;
		if(this.canvasGridVar != null) lines = this.canvasGridVar.lines; else if(this.gridVarObj.lines != null) {
			lines = this.gridVarObj.lines;
			this.gridVarObj.lines = null;
		}
		this.canvasGridVar = new saturn.client.programs.blocks.GridVarCanvasRenderer(this.gridVarDom);
		if(lines != null) this.canvasGridVar.lines = lines;
		window.console.log("width: " + this.gridVarObj.xCellSize);
		this.canvasGridVar.setCellHeight(Math.max(this.gridVarObj.xCellSize,9));
		this.canvasGridVar.setCellWidth(this.gridVarObj.xCellSize);
		this.canvasGridVar.setColumnOrder(this.columnOrder);
		this.canvasGridVar.setData(this.canvasData);
		this.canvasGridVar.setColumnKeyToLabels(this.columnToLabel);
		this.canvasGridVar.setRowOrder(this.rowOrder);
		this.canvasGridVar.setStyles(this.valueToSyles);
		this.canvasGridVar.setRenderXLabels(this.gridVarObj.showXLabels);
		this.canvasGridVar.setPadding(this.gridVarObj.padding);
		this.canvasGridVar.setFitToArea(this.gridVarObj.fit);
		this.canvasGridVar.configure();
		window.console.log("width: " + this.canvasGridVar.getXUnitSize());
		this.canvasGridVar.render();
	}
	,exportSVGForCanvas: function() {
		this.canvasGridVar.exportSVG();
	}
	,updateStyles: function() {
		var _g = this;
		this.valueToSyles = new haxe.ds.StringMap();
		this.styleTable.getStore().each(function(record) {
			if(_g.styleTable.isRecordEmpty(record)) return true;
			var model = record.getData();
			var dataType = Reflect.field(model,"data_type");
			var style = Reflect.field(model,"style");
			var value = Reflect.field(model,"mapping");
			var colour = Reflect.field(model,"color");
			var label = Reflect.field(model,"label");
			var columns = Reflect.field(model,"columns");
			if(dataType == null || dataType == "" || value == null || value == "" || colour == null || colour == "" || label == null || label == "" || style == null || style == "") return true;
			var style1 = { type : style, colour : colour, name : label, columns : columns.split(","), value : value, group : dataType};
			if(!_g.valueToSyles.exists(value)) {
				var value1 = [];
				_g.valueToSyles.set(value,value1);
			}
			_g.valueToSyles.get(value).push(style1);
			return true;
		});
	}
	,updateData: function() {
		var _g = this;
		this.canvasData = [];
		this.columnOrder = [];
		this.columnToLabel = { };
		var i = 0;
		this.dataTable.getStore().each(function(record) {
			if(_g.dataTable.isRecordEmpty(record)) return true;
			var model = record.getData();
			_g.columnOrder.push(i == null?"null":"" + i);
			_g.canvasData[i] = [];
			var j = 0;
			var _g1 = 0;
			var _g2 = _g.rowOrder;
			while(_g1 < _g2.length) {
				var field = _g2[_g1];
				++_g1;
				_g.canvasData[i][j] = Reflect.field(model,field);
				j++;
			}
			var rowValue = Reflect.field(model,_g.rowField);
			_g.columnToLabel[i == null?"null":"" + i] = rowValue;
			i++;
			return true;
		});
	}
	,updateRowOrder: function() {
		this.rowOrder = [];
		var _g = 0;
		var _g1 = this.dataTable.getModelFields();
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			if(field != this.rowField) this.rowOrder.push(field);
		}
	}
	,regenerate: function() {
		this.updateStyles();
		this.updateRowOrder();
		this.updateData();
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.update();
	}
	,update: function() {
		Ext.suspendLayouts();
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.GridVarWO) , saturn.client.workspace.GridVarWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.GridVar);
		this.setTitle(w0.getName());
		this.setDirty(true);
		this.rowField = obj.dataTableDefinition.columnDefs[0].dataIndex;
		if(obj.fileContent != null) {
			this.loadFromString(obj.fileContent);
			obj.fileContent = null;
		}
		this.dataTable.reconfigure(obj.dataTableDefinition);
		this.styleTable.reconfigure(obj.styleTableDefinition);
		this.annotationTable.reconfigure(obj.annotationTableDefinition);
		this.gridVarObj = obj;
		this.redrawGridVar();
		this.updateActions();
		if(this.gridVarObj != null) {
			if(this.gridVarObj.configCollapse) this.tabPanel.collapse(); else this.tabPanel.expand();
		}
		Ext.resumeLayouts(true);
	}
	,updateActions: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.updateActions.call(this);
		if(this.gridVarObj != null) {
			if(this.gridVarObj.fit) {
				this.fitToAreaCheckBox.setValue(true);
				this.cellSlider.disable();
			} else {
				this.fitToAreaCheckBox.setValue(false);
				this.cellSlider.enable();
			}
			if(this.gridVarObj.padding) this.paddingCheckbox.setValue(true); else this.paddingCheckbox.setValue(false);
			if(this.gridVarObj.showXLabels) this.xLabelsCheckBox.setValue(true); else this.xLabelsCheckBox.setValue(false);
			this.cellSlider.setValue(this.gridVarObj.xCellSize);
		}
	}
	,reconfigure: function(dataTableDefinition,styleTableDefinition) {
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.GridVarWO) , saturn.client.workspace.GridVarWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.GridVar);
		obj.dataTableDefinition = dataTableDefinition;
		obj.styleTableDefinition = styleTableDefinition;
		this.dataTable.reconfigure(obj.dataTableDefinition);
		this.styleTable.reconfigure(obj.styleTableDefinition);
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,getDataTable: function() {
		return this.dataTable;
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
		var _g = this;
		var pluginPos = 0;
		var next = null;
		next = function() {
			if(pluginPos < _g.plugins.length) _g.plugins[pluginPos++].openFile(file,next);
		};
		next();
	}
	,loadFromString: function(content) {
		var lines = content.split("\n");
		var header = lines[0];
		var columns = header.split(",");
		var colDefs = [];
		var _g = 0;
		while(_g < columns.length) {
			var column = columns[_g];
			++_g;
			colDefs.push({ text : column, dataIndex : column, editor : "textfield"});
		}
		this.rowField = colDefs[0].dataIndex;
		var data = [];
		var _g1 = 1;
		var _g2 = lines.length;
		while(_g1 < _g2) {
			var i = _g1++;
			var line = lines[i];
			var cols = line.split(",");
			var row = { };
			var _g3 = 0;
			var _g21 = colDefs.length;
			while(_g3 < _g21) {
				var j = _g3++;
				row[colDefs[j].dataIndex] = cols[j];
			}
			data.push(row);
		}
		var dataTableDefinition = { columnDefs : colDefs, title : "Raw Data", data : data, raw : null};
		var styleTableDefinition_title = "Styles";
		var styleTableDefinition_columnDefs = null;
		var styleTableDefinition_data = null;
		this.reconfigure(dataTableDefinition,this.styleTable.getTableDefinition());
	}
	,objectAddedToOutline: function(dropFolder,objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.objectAddedToOutline.call(this,dropFolder,objectId);
		this.setDirty(true);
		var _g = 0;
		var _g1 = this.getPlugins();
		while(_g < _g1.length) {
			var plugin = _g1[_g];
			++_g;
			if(js.Boot.__instanceof(plugin,saturn.client.programs.plugins.GridVarPlugin)) {
				var gvPlugin = plugin;
				gvPlugin.outlineAdd(objectId);
			}
		}
	}
	,saveWait: function(cb) {
		this.gridVarObj.lines = this.canvasGridVar.lines;
		cb();
	}
	,__class__: saturn.client.programs.GridVarViewer
});
saturn.client.workspace.HelloTypeWO = $hxClasses["saturn.client.workspace.HelloTypeWO"] = function(object,name) {
	if(object == null) object = new saturn.core.HelloType();
	if(name == null) name = "HelloType";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.HelloTypeWO.__name__ = ["saturn","client","workspace","HelloTypeWO"];
saturn.client.workspace.HelloTypeWO.getNewMenuText = function() {
	return "HelloType";
};
saturn.client.workspace.HelloTypeWO.getDefaultFolderName = function() {
	return "HelloType";
};
saturn.client.workspace.HelloTypeWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.HelloTypeWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.HelloTypeWO
});
saturn.client.programs.HelloWorldViewer = $hxClasses["saturn.client.programs.HelloWorldViewer"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.HelloWorldViewer.__name__ = ["saturn","client","programs","HelloWorldViewer"];
saturn.client.programs.HelloWorldViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-dna", text : "HelloWorldViewer", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.HelloTypeWO(null,null),true);
	}}];
};
saturn.client.programs.HelloWorldViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.HelloWorldViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "95%", autoScroll : true, layout : "border", items : [{ xtype : "component", region : "north", autoEl : { tag : "div"}}], listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Example Button"});
		this.getApplication().getEditMenu().add({ text : "Click me", handler : function() {
			_g.getApplication().showMessage("Menu","You clicked me!");
		}});
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.HelloTypeWO) , saturn.client.workspace.HelloTypeWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.HelloType);
		this.setTitle(w0.getName());
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,__class__: saturn.client.programs.HelloWorldViewer
});
saturn.client.workspace.HomeWO = $hxClasses["saturn.client.workspace.HomeWO"] = function(object,name) {
	if(object == null) object = new saturn.core.Home();
	if(name == null) name = "Home";
	this.iconPath = "/static/js/images/playground_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.HomeWO.__name__ = ["saturn","client","workspace","HomeWO"];
saturn.client.workspace.HomeWO.getNewMenuText = function() {
	return "Home";
};
saturn.client.workspace.HomeWO.getDefaultFolderName = function() {
	return "Other";
};
saturn.client.workspace.HomeWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.HomeWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.HomeWO
});
saturn.client.programs.HomePage = $hxClasses["saturn.client.programs.HomePage"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.HomePage.__name__ = ["saturn","client","programs","HomePage"];
saturn.client.programs.HomePage.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-playground", text : "Examples", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.HomeWO(null,null),true);
	}, tooltip : { dismissDelay : 10000, text : "Play around with pre-saved sessions with example data"}}];
};
saturn.client.programs.HomePage.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.HomePage.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,theToolBar: null
	,demoNameToUrl: null
	,demos: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.demoNameToUrl = new haxe.ds.StringMap();
		this.demoNameToUrl.set("ABIExample1","/static/demo/ABIExample.sat");
		this.demos = new haxe.ds.StringMap();
		this.addDemo({ name : "Sequencing runs", url : "/static/demo/RandomTraces.sat", icon : "x-btn-trace"});
		this.addDemo({ name : "THB progress (construct/target summary)", url : "/static/demo/THB-Summary.sat", icon : "x-btn-gridvar"});
		this.addDemo({ name : "THB construct alignment (example loads 53 sequences)", url : "/static/demo/THB_Alignment.sat", icon : "x-btn-aln"});
		this.addDemo({ name : "Glycosyltransferase tree (examples loads 200 sequences)", url : "/static/demo/GTTree.sat", icon : "x-btn-tree"});
		this.addDemo({ name : "THB constructs (loads DNA and Protein sequences)", url : "/static/demo/THB-sequences.sat", icon : "x-btn-structure"});
		this.addDemo({ name : "THB construct plate", url : "/static/demo/THB-cp.sat", icon : "x-btn-conical-dna"});
		this.addDemo({ name : "Coding examples", url : "/static/demo/coding.sat", icon : "x-btn-conical-dna"});
		this.theToolBar = Ext.create("Ext.toolbar.Toolbar",{ style : { 'background-color' : "white"}, layout : { type : "vbox"}, height : "100%"});
		this.theComponent = Ext.create("Ext.panel.Panel",{ height : "100%", width : "100%", listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}}});
		this.theComponent.add(this.theToolBar);
	}
	,addDemo: function(demo) {
		this.demos.set(demo.name,demo);
	}
	,loadDemo: function(name) {
		var _g = this;
		window.console.log("Loading: " + name);
		if(this.demos.exists(name)) {
			var demo = this.demos.get(name);
			var url = demo.url;
			saturn.client.core.CommonCore.getContent(url,function(content) {
				_g.getWorkspace()._openWorkspace(haxe.Unserializer.run(content));
			});
		}
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		this.buildDemoButtons();
	}
	,buildDemoButtons: function() {
		var _g = this;
		var $it0 = this.demos.keys();
		while( $it0.hasNext() ) {
			var name = $it0.next();
			var name1 = [name];
			var demo = this.demos.get(name1[0]);
			window.console.log("Adding" + Std.string(demo));
			this.theToolBar.add({ iconCls : demo.icon, text : name1[0], cls : "quickLaunchButton", handler : (function(name1) {
				return function() {
					_g.loadDemo(name1[0]);
				};
			})(name1), style : { 'margin-left' : "auto", 'margin-right' : 0}, width : "100%"});
		}
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.HomeWO) , saturn.client.workspace.HomeWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.Home);
		this.setTitle(w0.getName());
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,__class__: saturn.client.programs.HomePage
});
saturn.client.workspace.LigationWO = $hxClasses["saturn.client.workspace.LigationWO"] = function(object,name) {
	if(object == null) object = new saturn.core.Ligation(null,null);
	if(name == null) name = "Ligation";
	saturn.client.workspace.DNAWorkspaceObject.call(this,object,name);
};
saturn.client.workspace.LigationWO.__name__ = ["saturn","client","workspace","LigationWO"];
saturn.client.workspace.LigationWO.getNewMenuText = function() {
	return "Ligation";
};
saturn.client.workspace.LigationWO.__super__ = saturn.client.workspace.DNAWorkspaceObject;
saturn.client.workspace.LigationWO.prototype = $extend(saturn.client.workspace.DNAWorkspaceObject.prototype,{
	acceptorId: null
	,donorId: null
	,hasAcceptor: function() {
		return this.acceptorId != null;
	}
	,hasDonor: function() {
		return this.donorId != null;
	}
	,setAcceptor: function(digest) {
		this.acceptorId = digest.getUUID();
	}
	,setDonor: function(digest) {
		this.donorId = digest.getUUID();
	}
	,getAcceptor: function() {
		return saturn.client.WorkspaceApplication.getApplication().getWorkspace().getObjectSafely(this.acceptorId,saturn.client.workspace.DigestWO);
	}
	,getDonor: function() {
		return saturn.client.WorkspaceApplication.getApplication().getWorkspace().getObjectSafely(this.donorId,saturn.client.workspace.DigestWO);
	}
	,updateLigation: function() {
		if(this.hasAcceptor() && this.hasDonor()) {
			var acceptor = this.getAcceptor();
			var donor = this.getDonor();
			if(acceptor != null && donor != null) {
				var ligation = this.getObject();
				ligation.setAcceptor(acceptor.getDigest());
				ligation.setDonor(donor.getDigest());
				ligation.calculateProduct();
			}
		}
	}
	,getLigation: function() {
		return js.Boot.__cast(this.getDNAObject() , saturn.core.Ligation);
	}
	,__class__: saturn.client.workspace.LigationWO
});
saturn.client.programs.LigationViewer = $hxClasses["saturn.client.programs.LigationViewer"] = function() {
	saturn.client.programs.DNASequenceEditor.call(this);
};
saturn.client.programs.LigationViewer.__name__ = ["saturn","client","programs","LigationViewer"];
saturn.client.programs.LigationViewer.__super__ = saturn.client.programs.DNASequenceEditor;
saturn.client.programs.LigationViewer.prototype = $extend(saturn.client.programs.DNASequenceEditor.prototype,{
	emptyInit: function() {
		saturn.client.programs.DNASequenceEditor.prototype.emptyInit.call(this);
		this.getWorkspace().addListener(this);
	}
	,onFocus: function() {
		saturn.client.programs.DNASequenceEditor.prototype.onFocus.call(this);
	}
	,workspaceObjectUpdated: function() {
		try {
			var wo = this.getActiveObject(saturn.client.workspace.LigationWO);
			wo.updateLigation();
			var sequence = wo.getLigation().getSequence();
			if(sequence != null && sequence.length != 0) this.blockChanged(null,null,0,null,sequence);
		} catch( ex ) {
			if (ex instanceof js._Boot.HaxeError) ex = ex.val;
			if( js.Boot.__instanceof(ex,saturn.util.HaxeException) ) {
				js.Browser.alert(ex.getMessage());
			} else throw(ex);
		}
	}
	,serialise: function() {
		var object = saturn.client.programs.DNASequenceEditor.prototype.serialise.call(this);
		return object;
	}
	,deserialise: function(object) {
		saturn.client.programs.DNASequenceEditor.prototype.deserialise.call(this,object);
	}
	,installOutlineTree: function() {
		saturn.client.programs.DNASequenceEditor.prototype.installOutlineTree.call(this);
		var wo = this.getActiveObject(saturn.client.workspace.LigationWO);
		var acceptor = null;
		var donor = null;
		if(wo != null) {
			if(wo.hasAcceptor()) acceptor = wo.getAcceptor();
			if(wo.hasDonor()) donor = wo.getDonor();
		}
		this.addWorkspaceDropFolder("Donor",donor,saturn.client.workspace.DigestWO,false);
		this.addWorkspaceDropFolder("Acceptor",acceptor,saturn.client.workspace.DigestWO,false);
	}
	,__class__: saturn.client.programs.LigationViewer
});
saturn.client.workspace.TableHelperWO = $hxClasses["saturn.client.workspace.TableHelperWO"] = function(object,name) {
	if(object == null) object = new saturn.client.workspace.TableHelperWO(null,name);
	if(name == null) name = "Table Helper";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.TableHelperWO.__name__ = ["saturn","client","workspace","TableHelperWO"];
saturn.client.workspace.TableHelperWO.getNewMenuText = function() {
	return "Table Helper";
};
saturn.client.workspace.TableHelperWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.TableHelperWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	serialise: function() {
		var serialisedObject = saturn.client.workspace.WorkspaceObjectBase.prototype.serialise.call(this);
		serialisedObject.DATA = { 'DATA' : this.object.getData()};
		return serialisedObject;
	}
	,deserialise: function(object) {
		saturn.client.workspace.WorkspaceObjectBase.prototype.deserialise.call(this,object);
		var obj = new saturn.core.TableHelperData();
		obj.setData(object.DATA.DATA);
		this.setObject(obj);
	}
	,clone: function() {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var prog;
		prog = js.Boot.__cast(app.getWorkspace().getOpenProgram(this.getUUID()) , saturn.client.programs.TableHelper);
		var models = prog.getModels();
		var data = new saturn.core.TableHelperData();
		data.setModelsToCopy(models);
		var newwo = new saturn.client.workspace.TableHelperWO(data,this.getName());
		return newwo;
	}
	,__class__: saturn.client.workspace.TableHelperWO
});
saturn.client.programs.TableHelper = $hxClasses["saturn.client.programs.TableHelper"] = function(modelClass) {
	this.loadedExisting = false;
	this.resetOnActions = true;
	this.loadRequired = false;
	this.viewReady = false;
	this.theModelClass = modelClass;
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.TableHelper.__name__ = ["saturn","client","programs","TableHelper"];
saturn.client.programs.TableHelper.openViewer = function(name,objs,clazz) {
	var data = new saturn.core.TableHelperData(objs);
	var program = new saturn.client.programs.TableHelper(clazz);
	program.setTitle(name);
	var wo = new saturn.client.workspace.TableHelperWO(data,name);
	var wk = saturn.client.WorkspaceApplication.getApplication().getWorkspace();
	wk.registerObjectWith(wo,program);
};
saturn.client.programs.TableHelper.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.TableHelper.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,theTable: null
	,cellClicked: null
	,theModel: null
	,theModelClass: null
	,theTitle: null
	,storeId: null
	,viewReady: null
	,loadRequired: null
	,invalidRows: null
	,internalIdField: null
	,hideHiddenColumns: null
	,showInternalRowId: null
	,rowValidField: null
	,resetOnActions: null
	,loadedExisting: null
	,tableColumns: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.hideHiddenColumns = true;
		this.internalIdField = "__HIDDEN_ROW_ID";
		this.rowValidField = "__HIDDEN_ROW_VALID";
		this.showInternalRowId = false;
		this.invalidRows = [];
		this.theModel = this.getApplication().getProvider().getModel(this.theModelClass);
		if(this.theModel == null) {
			this.getApplication().showMessage("Data mapping error","Unable to find model " + Std.string(this.theModelClass));
			return;
		}
		var fields = this.theModel.getFieldDefs();
		fields.unshift("ROWNUM");
		fields.unshift(this.internalIdField);
		fields.unshift(this.rowValidField);
		if(!Ext.ClassManager.isCreated(this.theModel.getExtModelName())) {
			var dWin = window;
			dWin.fields = fields;
			dWin.internalId = this.internalIdField;
			dWin.name = this.theModel.getExtModelName();
			Ext.define(this.theModel.getExtModelName(),{ extend : "Ext.data.Model", fields : fields, idProperty : this.internalIdField, identifier : { type : "sequential"}});
		}
		this.storeId = saturn.client.programs.TableHelper.next_store_id + ":" + this.theModel.getExtStoreName();
		saturn.client.programs.TableHelper.next_store_id++;
		Ext.create("Ext.data.Store",{ storeId : this.storeId, model : this.theModel.getExtModelName(), data : [{ ROWNUMBER : "1"}], proxy : { type : "memory"}});
		this.theComponent = Ext.create("Ext.panel.Panel",{ title : this.theTitle, width : "100%", height : "95%", region : "middle", autoScroll : true, layout : { type : "vbox", align : "stretch", pack : "start"}, multiSelect : true, listeners : { 'render' : function(obj) {
			_g.theComponent = obj;
			_g.initialiseDOMComponent();
		}}});
	}
	,getButtonPanelConfiguration: function() {
		var _g = this;
		return [{ region : "center", xtype : "button", text : "Save", handler : function() {
			_g.upsert();
		}},{ region : "center", xtype : "button", text : "Fetch all", handler : function() {
			_g.fetchAll(function() {
				_g.getApplication().showMessage("Fetch successful","Fetch complete");
			});
		}}];
	}
	,getContextMenuItems: function(modelColumn,rowIndex) {
		var _g = this;
		var items = [];
		var c = this.getStore().count();
		if(rowIndex != c - 1) {
			var model = this.getStore().getAt(rowIndex).getData();
			var priKey = this.theModel.getPrimaryKey();
			var val = Reflect.field(model,priKey);
			if(val != null && val != "") items.push({ text : "Delete from database", handler : function() {
				var onCancel = function() {
				};
				var firstKey = _g.theModel.getFirstKey();
				var firstVal = Reflect.field(model,firstKey);
				_g.getApplication().userPrompt("Delete confirmation","Are you sure you want to delete " + firstVal,function() {
					var models = [model];
					_g.getProvider().modelToReal(_g.theModel,models,function(err,realModels) {
						if(err == null) {
							var realModel = realModels[0];
							_g.insertOrDeletePerformed();
							_g.getProvider()["delete"](realModel,function(err1) {
								if(err1 == null) {
									_g.getApplication().showMessage("Success","Delete successful");
									_g.getStore().removeAt(rowIndex);
									_g.autoAddNewRow();
								} else {
									var d = window;
									d.err = err1;
									_g.getApplication().showMessage("Delete failure",err1);
								}
							});
						} else _g.getApplication().showMessage("Delete failure",err);
					});
					_g.autoAddNewRow();
				},onCancel,onCancel);
			}}); else items.push({ text : "Delete Row", handler : function() {
				_g.getStore().removeAt(rowIndex);
				_g.autoAddNewRow();
			}});
			items.push({ text : "Fill down", handler : function() {
				var model1 = _g.getStore().getAt(rowIndex);
				var val1 = model1.get(modelColumn);
				var c1 = _g.getStore().count();
				var _g2 = rowIndex;
				var _g1 = c1 - 1;
				while(_g2 < _g1) {
					var i = _g2++;
					var row = _g.getStore().getAt(i);
					row.set(modelColumn,val1);
				}
			}});
			items.push({ text : "Copy", handler : function() {
				var model2 = _g.getStore().getAt(rowIndex);
				var fields = _g.theModel.getFields();
				var priField = _g.theModel.getPrimaryKey();
				var cb1 = _g.getApplication().getClipBoard();
				var cbContents = new saturn.client.programs.ClipBoardRow();
				var _g11 = 0;
				while(_g11 < fields.length) {
					var field = fields[_g11];
					++_g11;
					if(field != priField) cbContents.set(field,model2.get(field));
				}
				cb1.setContents(cbContents);
			}});
		}
		var cb = this.getApplication().getClipBoard();
		var contents = cb.getContents();
		if(js.Boot.__instanceof(contents,saturn.client.programs.ClipBoardRow)) {
			if(rowIndex != c - 1) items.push({ text : "Paste After", handler : function() {
				_g.pasteRow(rowIndex + 1);
			}});
			items.push({ text : "Paste Before", handler : function() {
				_g.pasteRow(rowIndex);
			}});
		}
		return items;
	}
	,pasteRow: function(atPosition) {
		var cb = this.getApplication().getClipBoard();
		var contents = cb.getContents();
		if(js.Boot.__instanceof(contents,saturn.client.programs.ClipBoardRow)) {
			saturn.client.WorkspaceApplication.suspendUpdates();
			var tableRowCopy = contents;
			var attributes = tableRowCopy.getContents();
			var entityStore = this.getStore();
			var fields = this.theModel.getFields();
			var priField = this.theModel.getPrimaryKey();
			var model = entityStore.insert(atPosition,Ext.create(this.theModel.getExtModelName(),{ }))[0];
			var _g = 0;
			while(_g < fields.length) {
				var field = fields[_g];
				++_g;
				if(field != priField) model.set(field,attributes.get(field));
			}
			saturn.client.WorkspaceApplication.resumeUpdates(false);
		}
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		var me = this;
		this.completeSetup();
	}
	,completeSetup: function() {
		var _g = this;
		this.tableColumns = this.theModel.getExtTableDefinition();
		if(this.hideHiddenColumns) {
			var _g1 = 0;
			var _g11 = this.tableColumns;
			while(_g1 < _g11.length) {
				var tableColumn = _g11[_g1];
				++_g1;
				if(StringTools.startsWith(tableColumn.dataIndex,"__HIDDEN")) {
					var x = tableColumn;
					HxOverrides.remove(this.tableColumns,x);
				}
			}
		} else this.tableColumns.push({ header : "Row Valid", dataIndex : this.rowValidField});
		if(this.showInternalRowId) this.tableColumns.push({ header : "Internal Field ID", dataIndex : this.internalIdField});
		this.theTable = Ext.create("Ext.grid.Panel",{ selType : "cellmodel", flex : 1, region : "south", store : this.getStore(), columns : this.tableColumns, plugins : [Ext.create("Ext.grid.plugin.CellEditing",{ })], listeners : { edit : function(editor,e) {
			_g.autoAddNewRow();
		}, cellclick : function(grid,td,cellIndex,record,tr,rowIndex,e1,eOpts) {
			_g.cellClicked = [cellIndex,rowIndex];
		}, 'cellcontextmenu' : function(view,cell,cellIndex1,record1,row,rowIndex1,event) {
			var column = view.getHeaderByCell(cell);
			var position = view.getPositionByEvent(event);
			var columnIndex = position.column;
			var dataIndex = column.dataIndex;
			var contextMenuItems = _g.getContextMenuItems(column.dataIndex,rowIndex1);
			if(contextMenuItems.length > 0) {
				var contextMenu = Ext.create("Ext.menu.Menu",{ items : contextMenuItems});
				contextMenu.showAt(event.getXY());
				event.stopEvent();
			}
		}, 'beforecellmouseup' : function(view1,cell1,cellIndex2,record2,tr1,rowIndex2,event1,eOpts1) {
			if(event1.ctrlKey) {
				var column1 = view1.getHeaderByCell(cell1);
				var position1 = view1.getPositionByEvent(event1);
				var columnIndex1 = position1.column;
				var dataIndex1 = column1.dataIndex;
				var contextMenuItems1 = _g.getContextMenuItems(column1.dataIndex,rowIndex2);
				if(contextMenuItems1.length > 0) {
					var contextMenu1 = Ext.create("Ext.menu.Menu",{ items : contextMenuItems1});
					contextMenu1.showAt(event1.getXY());
					event1.stopEvent();
				}
			}
		}}, viewConfig : { enableTextSelection : true, stripeRows : false, listeners : { viewready : function(view2) {
			if(_g.loadRequired) {
				_g.loadExistingModels();
				if(!_g.loadedExisting) _g.queryLoad();
			}
			_g.viewReady = true;
			view2.keyMap = new Ext.KeyMap(view2.getEl(),[{ key : "v", ctrl : true, fn : function(keyCode,e2) {
				var pasteZone;
				var _this = window.document;
				pasteZone = _this.createElement("textarea");
				pasteZone.style.position = "absolute";
				pasteZone.style.top = "-1000px";
				pasteZone.style.left = "-1000px";
				window.document.body.appendChild(pasteZone);
				window.setTimeout(function() {
					_g.performPaste(pasteZone.value,view2);
					window.document.body.removeChild(pasteZone);
				},100);
				pasteZone.focus();
				pasteZone.select();
			}}]);
			var key = _g.theModel.getFirstKey();
			var validField = _g.rowValidField;
			view2.tooltip = Ext.create("Ext.tip.ToolTip",{ target : view2.el, delegate : view2.itemSelector, trackMouse : true, renderTo : Ext.getBody(), listeners : { beforeshow : (function($this) {
				var $r;
				var updateTipBody = function(tip) {
					var msg = view2.getRecord(tip.triggerElement).get(validField);
					if(msg != null && msg != "") tip.update(msg); else tip.update(view2.getRecord(tip.triggerElement).get(key));
				};
				$r = updateTipBody;
				return $r;
			}(this))}});
		}}, getRowClass : function(record3) {
			return _g.getRecordCSS(record3);
		}}});
		this.theComponent.add(this.theTable);
	}
	,getRecordCSS: function(record) {
		var valid = record.get(this.rowValidField);
		if(valid != null && valid != "") return "gridrow-invalid"; else return "x-grid-cell";
	}
	,setRecordValid: function(record,msg) {
		record.set(this.rowValidField,msg);
	}
	,performPaste: function(content,grid) {
		saturn.client.WorkspaceApplication.suspendUpdates();
		var columns = this.theTable.columns;
		var colCount = columns.length;
		var rowSep = "\n";
		if(content.indexOf("\r\n") > -1) rowSep = "\r\n";
		var rows = content.split(rowSep);
		var colClicked = this.cellClicked[0];
		var rowClicked = this.cellClicked[1];
		var currentCol = colClicked;
		var currentRow = rowClicked;
		var store = this.getStore();
		var storeCount = store.count();
		var _g = 0;
		while(_g < rows.length) {
			var row = rows[_g];
			++_g;
			if(row == "") break;
			var cols = row.split("\t");
			var pasteColIndex = 0;
			var model;
			if(currentRow > store.count() - 1) {
				model = Ext.create(this.theModel.getExtModelName(),{ });
				store.insert(currentRow,model);
			} else model = store.getAt(currentRow);
			currentRow++;
			var _g1 = currentCol;
			while(_g1 < colCount) {
				var col = _g1++;
				var field = columns[col].dataIndex;
				if(field != this.rowValidField && field != this.internalIdField) model.set(columns[col].dataIndex,cols[pasteColIndex++]); else pasteColIndex++;
				if(pasteColIndex > cols.length - 1) break;
			}
			currentCol = colClicked;
		}
		this.autoAddNewRow();
		saturn.client.WorkspaceApplication.resumeUpdates(false);
	}
	,queryLoad: function() {
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
		if(this.isNaked()) return;
		var fileMenu = this.getApplication().getFileMenu();
		var exportMenu = this.getApplication().getExportMenu();
		exportMenu.add({ text : "Tab separated file", hidden : false, handler : function() {
			var entityStore = _g.getStore();
			var entityCount = entityStore.count() - 1;
			var strBuf_b = "";
			var fields = _g.theModel.getFields();
			var priField = _g.theModel.getPrimaryKey();
			var _g1 = 0;
			while(_g1 < fields.length) {
				var field = fields[_g1];
				++_g1;
				strBuf_b += Std.string(field + "\t");
			}
			strBuf_b += "\n";
			var _g11 = 0;
			while(_g11 < entityCount) {
				var i = _g11++;
				var entityModel = entityStore.getAt(i);
				var _g2 = 0;
				while(_g2 < fields.length) {
					var field1 = fields[_g2];
					++_g2;
					if(field1 != priField) {
						var value = entityModel.get(field1);
						if(value == null) value = "";
						strBuf_b += Std.string(value + "\t");
					}
				}
				strBuf_b += "\n";
			}
			var wo = _g.getActiveObject(saturn.client.workspace.WorkspaceObject);
			_g.getApplication().saveTextFile(strBuf_b,wo.getName() + ".tsv");
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-save", text : "Save", handler : function() {
			_g.upsert();
		}, tooltip : { dismissDelay : 10000, text : "Save changes to the database"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Fetch All", handler : function() {
			_g.fetchAll(function() {
				_g.getApplication().showMessage("Fetch successful","Fetch complete");
			});
		}, tooltip : { dismissDelay : 10000, text : "Retrieve information from database (enter IDs into first column)"}});
	}
	,upsert: function() {
		var _g = this;
		this.getApplication().showMessage("Please wait","Please wait.....");
		var store = this.getStore();
		var priKey = this.theModel.getPrimaryKey();
		var fields = this.theModel.getFields();
		var clazz = this.theModel.getClass();
		var models = [];
		store.each(function(record) {
			if(!_g.isRecordEmpty(record) && record.dirty) {
				var model = record.getData();
				models.push(model);
			}
			return true;
		});
		this.getProvider().modelToReal(this.theModel,models,function(exception,models1) {
			if(exception != null) {
				_g.getApplication().showMessage("Unexpected exception",exception);
				return;
			}
			var priField = _g.theModel.getPrimaryKey();
			var insertList = [];
			var updateList = [];
			var _g12 = 0;
			while(_g12 < models1.length) {
				var model3 = models1[_g12];
				++_g12;
				var val = Reflect.field(model3,priField);
				if(val == null || val == "") insertList.push(model3); else updateList.push(model3);
			}
			var evHandler = function(err) {
				if(err != null) {
					if(Object.prototype.hasOwnProperty.call(err,"source")) {
						var buzValue = err.source;
						var buzField = _g.theModel.getFirstKey();
						var store1 = _g.getStore();
						var c = store1.count();
						var _g1 = 0;
						while(_g1 < c) {
							var i = _g1++;
							var model1 = store1.getAt(i);
							var modelBuzValue = model1.get(buzField);
							if(buzValue == modelBuzValue) {
								_g.setRecordValid(model1,err.message);
								break;
							}
						}
						_g.getApplication().showMessage("Database error",err.message);
						_g.theTable.getView().refresh();
					} else _g.getApplication().showMessage("Data update exception",err);
				} else {
					_g.getApplication().showMessage("Save successful","All records saved succesfully");
					var c1 = store.count();
					var _g11 = 0;
					while(_g11 < c1) {
						var i1 = _g11++;
						var model2 = store.getAt(i1);
						_g.setRecordValid(model2,null);
					}
					_g.fetchAll(function() {
						_g.getApplication().showMessage("Save successful","All records saved succesfully");
					});
				}
			};
			if(insertList.length > 0) _g.getProvider().insertObjects(insertList,function(err1) {
				if(err1 == null && updateList.length > 0) _g.getProvider().updateObjects(updateList,evHandler); else evHandler(err1);
				_g.insertOrDeletePerformed();
			}); else if(updateList.length > 0) _g.getProvider().updateObjects(updateList,evHandler); else _g.getApplication().showMessage("","No changes to save");
		});
	}
	,insertOrDeletePerformed: function() {
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,autoAddNewRow: function() {
		var store = this.getStore();
		var storeLen = store.count();
		var addNewRow = true;
		if(storeLen > 0) {
			var record = store.getAt(storeLen - 1);
			addNewRow = !this.isRecordEmpty(record);
		}
		if(addNewRow) store.insert(storeLen,Ext.create(this.theModel.getExtModelName(),{ }));
	}
	,isRecordEmpty: function(record) {
		var _g = this;
		var rowOccupied = false;
		record.fields.forEach(function(field) {
			if(field.name != null && field.name != "" && field.name != _g.internalIdField) {
				var value = record.get(field.name);
				if(value != null && value != "") {
					var fieldDefault = _g.theModel.getFieldDefault(field.name);
					if(fieldDefault == null || fieldDefault != value) {
						rowOccupied = true;
						return false;
					}
				}
			}
			return true;
		});
		return !rowOccupied;
	}
	,fetchAll: function(cb) {
		var _g = this;
		this.getApplication().showMessage("Please wait","Please wait.....");
		var entityStore = this.getStore();
		var entityCount = entityStore.count() - 1;
		var entityMap = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < entityCount) {
			var i = _g1++;
			var entityModel = entityStore.getAt(i);
			if(this.isRecordEmpty(entityModel)) continue;
			var keyVal = this.theModel.getFirstKey();
			if(keyVal == null || keyVal == "") continue;
			var entityId = entityModel.get(keyVal);
			if(__map_reserved[entityId] != null) entityMap.setReserved(entityId,""); else entityMap.h[entityId] = "";
		}
		var entityList = [];
		var $it0 = entityMap.keys();
		while( $it0.hasNext() ) {
			var entityId1 = $it0.next();
			entityList.push(entityId1);
		}
		var batchFetch = new saturn.db.BatchFetch(function(obj,err) {
			_g.getApplication().showMessage("Batch fetch failure",err);
		});
		batchFetch.getByIds(entityList,this.theModel.getClass(),"MODELS",function(obj1,err1) {
			if(err1 == null) {
				var objs = batchFetch.getObject("MODELS");
				_g.getApplication().getProvider().activate(objs,2,function(err2) {
					if(err2 != null) {
						_g.getApplication().showMessage("Batch fetch failure",err2);
						return;
					}
					saturn.client.WorkspaceApplication.suspendUpdates();
					var _g11 = 0;
					while(_g11 < entityCount) {
						var i1 = _g11++;
						var entityModel1 = entityStore.getAt(i1);
						var entityId2 = entityModel1.get(_g.theModel.getFirstKey());
						var cacheObject = _g.getApplication().getProvider().getObjectFromCache(_g.theModel.getClass(),_g.theModel.getFirstKey(),entityId2);
						if(cacheObject != null) {
							var _g2 = 0;
							var _g3 = _g.theModel.getFields();
							while(_g2 < _g3.length) {
								var field = _g3[_g2];
								++_g2;
								if(field.indexOf(".") > -1) {
									var parts = field.split(".");
									var valObj = cacheObject;
									var _g4 = 0;
									while(_g4 < parts.length) {
										var part = parts[_g4];
										++_g4;
										var val = Reflect.field(valObj,part);
										if(val == null) {
											valObj = null;
											break;
										} else valObj = val;
									}
									entityModel1.set(field,valObj);
								} else {
									var val1 = Reflect.field(cacheObject,field);
									entityModel1.set(field,val1);
								}
							}
							_g.setRecordValid(entityModel1,null);
						} else _g.setRecordValid(entityModel1,entityId2 + " not found in database");
					}
					entityStore.commitChanges();
					saturn.client.WorkspaceApplication.resumeUpdates(true);
					_g.theTable.getView().refresh();
					cb();
				});
			} else _g.getApplication().showMessage("",err1);
		});
		batchFetch.execute();
	}
	,isNullOrEmpty: function(value) {
		if(value == null) return true; else if(StringTools.replace(value == null?"null":"" + value," ","") == "") return true; else return false;
	}
	,loadObjects: function(objs) {
		var _g = this;
		this.getApplication().getProvider().activate(objs,2,function(err) {
			if(err != null) {
				_g.getApplication().showMessage("Batch fetch failure",err);
				return;
			}
			var entityStore = _g.getStore();
			entityStore.suspendEvents();
			var firstKey = _g.theModel.getFirstKey();
			var c = entityStore.count();
			if(c > 0 && _g.isRecordEmpty(entityStore.getAt(c - 1))) c = c - 1;
			var _g1 = 0;
			while(_g1 < objs.length) {
				var obj = objs[_g1];
				++_g1;
				var val = Reflect.field(obj,firstKey);
				var model = entityStore.insert(c++,Ext.create(_g.theModel.getExtModelName(),{ }))[0];
				model.set(firstKey,val);
			}
			c = entityStore.count();
			var _g11 = 0;
			while(_g11 < c) {
				var i = _g11++;
				var entityModel = entityStore.getAt(i);
				var entityId = entityModel.get(_g.theModel.getFirstKey());
				var cacheObject = _g.getApplication().getProvider().getObjectFromCache(_g.theModel.getClass(),_g.theModel.getFirstKey(),entityId);
				if(cacheObject != null) {
					var _g2 = 0;
					var _g3 = _g.theModel.getFields();
					while(_g2 < _g3.length) {
						var field = _g3[_g2];
						++_g2;
						if(field.indexOf(".") > -1) {
							var parts = field.split(".");
							var valObj = cacheObject;
							var _g4 = 0;
							while(_g4 < parts.length) {
								var part = parts[_g4];
								++_g4;
								var val1 = Reflect.field(valObj,part);
								if(val1 == null) {
									valObj = null;
									break;
								} else valObj = val1;
							}
							entityModel.set(field,valObj);
						} else {
							var val2 = Reflect.field(cacheObject,field);
							entityModel.set(field,val2);
						}
					}
				}
				entityModel.commit();
			}
			_g.autoAddNewRow();
			entityStore.resumeEvents();
			_g.theTable.getView().refresh();
		});
	}
	,loadModels: function(models) {
		saturn.client.WorkspaceApplication.suspendUpdates();
		var entityStore = this.getStore();
		var priKey = this.theModel.getPrimaryKey();
		var fields = this.theModel.getFields();
		var i = 0;
		var _g = 0;
		while(_g < models.length) {
			var model = models[_g];
			++_g;
			var newModel = entityStore.insert(i++,Ext.create(this.theModel.getExtModelName(),{ }))[0];
			var _g1 = 0;
			while(_g1 < fields.length) {
				var field = fields[_g1];
				++_g1;
				if(field != priKey) newModel.set(field,model.get(field));
			}
		}
		this.autoAddNewRow();
		saturn.client.WorkspaceApplication.resumeUpdates(false);
	}
	,getModels: function() {
		var store = this.getStore();
		var models = [];
		var c = store.count();
		var _g = 0;
		while(_g < c) {
			var i = _g++;
			var model = store.getAt(i);
			models.push(model);
		}
		return models;
	}
	,getStore: function() {
		var store = Ext.data.StoreManager.lookup(this.storeId);
		return store;
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.loadedExisting = false;
		if(this.viewReady) this.loadExistingModels(); else this.loadRequired = true;
	}
	,loadExistingModels: function() {
		var wo = this.getWorkspace().getObjectSafely(this.getActiveObjectId(),saturn.client.workspace.WorkspaceObject);
		if(wo != null) {
			var data = wo.getObject();
			if(js.Boot.__instanceof(data,saturn.client.programs.TableHelperModelData)) {
				var modelData;
				modelData = js.Boot.__cast(data , saturn.client.programs.TableHelperModelData);
				var modelsToCopy = modelData.getModelsToCopy();
				var models = modelData.getModels();
				var rawModels = modelData.getRawModels();
				if(modelsToCopy != null) {
					this.loadModels(modelsToCopy);
					modelData.setModelsToCopy(null);
					this.loadedExisting = true;
				} else if(models != null) {
					this.getStore().loadRecords(models);
					this.loadedExisting = true;
				} else if(rawModels != null) {
					this.getStore().loadData(rawModels);
					modelData.setRawModels(null);
					this.loadedExisting = true;
				} else if(modelData.getObjects() != null) {
					this.loadObjects(modelData.getObjects());
					this.loadedExisting = true;
				}
			}
		}
		this.loadRequired = false;
	}
	,closeWorkspaceObject: function(objectId) {
		var wo = this.getActiveObject(saturn.client.workspace.WorkspaceObject);
		if(wo != null) {
			var data = wo.getObject();
			if(js.Boot.__instanceof(data,saturn.client.programs.TableHelperModelData)) {
				var modelData;
				modelData = js.Boot.__cast(data , saturn.client.programs.TableHelperModelData);
				var models = this.getModels();
				modelData.setModels(models);
			}
		}
		saturn.client.programs.SimpleExtJSProgram.prototype.closeWorkspaceObject.call(this,objectId);
	}
	,close: function() {
		if(this.theTable != null) {
			this.theTable.view.tooltip.config.listeners.beforeshow = null;
			this.theTable.view.tooltip.events.beforeshow.listeners[0].fireFn = null;
			this.theTable.view.tooltip.events.beforeshow.listeners[0].fn = null;
			this.theTable.view.keyMap.fn = null;
			var _g1 = 0;
			var _g = this.theTable.view.keyMap.bindings.length;
			while(_g1 < _g) {
				var i = _g1++;
				this.theTable.view.keyMap.bindings[i].fn = null;
			}
			this.theTable.config.listeners.beforecellmouseup = null;
			this.theTable.config.viewConfig.getRowClass = null;
			this.theTable.viewConfig.getRowClass = null;
			this.theTable.config.listeners.cellcontextmenu = null;
			this.theTable.config.listeners.cellclick = null;
			this.theTable.config.listeners.edit = null;
			this.theTable.view.config.getRowClass = null;
			this.theTable.view.config.listeners.beforeshow = null;
			this.theTable.view.config.listeners.viewready = null;
			this.theTable.view.getRowClass = null;
			this.theTable.view.initialConfig.getRowClass = null;
			this.theTable.view.initialConfig.listeners.beforeshow = null;
			this.theTable.view.initialConfig.listeners.viewready = null;
		}
		this.theComponent.config.listeners.render = null;
		if(this.theComponent.config.items != null) {
			var _g11 = 0;
			var _g2 = this.theComponent.config.items.length;
			while(_g11 < _g2) {
				var i1 = _g11++;
				this.theComponent.config.items[i1].handler = null;
			}
		}
		if(this.theTable != null) {
			this.theTable.viewConfig.getRowClass = null;
			this.theTable.clearListeners();
			this.theTable.getView().clearListeners();
			this.theTable.viewConfig.listeners = null;
		}
		saturn.client.programs.SimpleExtJSProgram.prototype.close.call(this);
	}
	,__class__: saturn.client.programs.TableHelper
});
saturn.client.workspace.MultiAlleleHelperWO = $hxClasses["saturn.client.workspace.MultiAlleleHelperWO"] = function(object,name) {
	if(object == null) object = new saturn.core.MultiAlleleHelperData(); else if(js.Boot.__instanceof(object,saturn.core.domain.SgcAllelePlate)) {
		var allelePlate = object;
		object = new saturn.core.MultiAlleleHelperData();
		object.setPlateName(allelePlate.plateName);
	}
	if(name == null) name = "Allele Helper";
	this.iconPath = "/static/js/images/dna_conical_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.MultiAlleleHelperWO.__name__ = ["saturn","client","workspace","MultiAlleleHelperWO"];
saturn.client.workspace.MultiAlleleHelperWO.getNewMenuText = function() {
	return "Allele Helper";
};
saturn.client.workspace.MultiAlleleHelperWO.getDefaultFolderName = function() {
	return "Allele Plates";
};
saturn.client.workspace.MultiAlleleHelperWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.MultiAlleleHelperWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	serialise: function() {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var prog;
		prog = js.Boot.__cast(app.getWorkspace().getOpenProgram(this.getUUID()) , saturn.client.programs.TableHelper);
		var models = prog.getModels();
		var dataModels = [];
		var _g = 0;
		while(_g < models.length) {
			var model = models[_g];
			++_g;
			dataModels.push(model.data);
		}
		this.object.setRawModels(dataModels);
		return saturn.client.workspace.WorkspaceObjectBase.prototype.serialise.call(this);
	}
	,clone: function() {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var prog;
		prog = js.Boot.__cast(app.getWorkspace().getOpenProgram(this.getUUID()) , saturn.client.programs.TableHelper);
		var models = prog.getModels();
		var data = new saturn.core.MultiAlleleHelperData();
		data.setModelsToCopy(models);
		var newwo = new saturn.client.workspace.MultiAlleleHelperWO(data,this.getName());
		return newwo;
	}
	,__class__: saturn.client.workspace.MultiAlleleHelperWO
});
saturn.client.programs.MultiAlleleHelper = $hxClasses["saturn.client.programs.MultiAlleleHelper"] = function() {
	this.theTitle = "Allele Helper";
	saturn.client.programs.TableHelper.call(this,saturn.core.domain.SgcAllele);
};
saturn.client.programs.MultiAlleleHelper.__name__ = ["saturn","client","programs","MultiAlleleHelper"];
saturn.client.programs.MultiAlleleHelper.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-conical-dna", html : "PCR<br/>Plate", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.MultiAlleleHelperWO(null,"Alleles"),true);
	}, tooltip : { dismissDelay : 10000, text : "Edit existing PCR products or enter new ones."}}];
};
saturn.client.programs.MultiAlleleHelper.__super__ = saturn.client.programs.TableHelper;
saturn.client.programs.MultiAlleleHelper.prototype = $extend(saturn.client.programs.TableHelper.prototype,{
	getButtonPanelConfiguration: function() {
		var me = this;
		var baseButtons = saturn.client.programs.TableHelper.prototype.getButtonPanelConfiguration.call(this);
		baseButtons.push({ region : "center", xtype : "button", text : "Calculate", handler : function() {
			me.calculate();
		}, iconCls : "x-btn-calculate"});
		return baseButtons;
	}
	,getContextMenuItems: function(modelColumn,rowIndex) {
		var _g = this;
		var me = this;
		var items = saturn.client.programs.TableHelper.prototype.getContextMenuItems.call(this,modelColumn,rowIndex);
		if(modelColumn == "dnaSeq") items.push({ text : "Import DNA", handler : function() {
			var model = _g.getStore().getAt(rowIndex);
			var dnaObj = new saturn.core.DNA(model.get(modelColumn));
			var dnawo = new saturn.client.workspace.DNAWorkspaceObject(dnaObj,model.get("alleleId") + " (DNA) ");
			me.getApplication().getWorkspace().addObject(dnawo,true);
		}}); else if(modelColumn == "proteinSeq") items.push({ text : "Import Protein", handler : function() {
			var model1 = _g.getStore().getAt(rowIndex);
			var label = model1.get("alleleId");
			var proteinObj = new saturn.core.Protein(model1.get(modelColumn));
			var proteinwo = new saturn.client.workspace.ProteinWorkspaceObject(proteinObj,label);
			me.getApplication().getWorkspace().addObject(proteinwo,true);
		}}); else if(modelColumn == "forwardPrimer.primerId") items.push({ text : "Import Primer", handler : function() {
			var model2 = _g.getStore().getAt(rowIndex);
			var primerId = model2.get("forwardPrimer.primerId");
			_g.getProvider().getById(primerId,saturn.core.domain.SgcForwardPrimer,function(primer,exception) {
				if(exception != null) _g.getApplication().showMessage("Fetch error",exception); else {
					var dna = new saturn.core.DNA(primer.dnaSequence);
					var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,primerId);
					me.getApplication().getWorkspace().addObject(wo,true);
				}
			});
		}}); else if(modelColumn == "reversePrimer.primerId") items.push({ text : "Import Primer", handler : function() {
			var model3 = _g.getStore().getAt(rowIndex);
			var primerId1 = model3.get("reversePrimer.primerId");
			_g.getProvider().getById(primerId1,saturn.core.domain.SgcReversePrimer,function(primer1,exception1) {
				if(exception1 != null) _g.getApplication().showMessage("Fetch error",exception1); else {
					var dna1 = new saturn.core.DNA(primer1.dnaSequence);
					var wo1 = new saturn.client.workspace.DNAWorkspaceObject(dna1,primerId1);
					me.getApplication().getWorkspace().addObject(wo1,true);
				}
			});
		}}); else if(modelColumn == "entryClone.entryCloneId") items.push({ text : "Import Entry Clone", handler : function() {
			var model4 = _g.getStore().getAt(rowIndex);
			var entryCloneId = model4.get("entryClone.entryCloneId");
			_g.getProvider().getById(entryCloneId,saturn.core.domain.SgcEntryClone,function(entryClone,exception2) {
				if(exception2 != null) _g.getApplication().showMessage("Fetch error",exception2); else {
					var dna2 = new saturn.core.DNA(entryClone.dnaSeq);
					var wo2 = new saturn.client.workspace.DNAWorkspaceObject(dna2,entryCloneId);
					me.getApplication().getWorkspace().addObject(wo2,true);
				}
			});
		}}); else if(modelColumn == "alleleId") items.push({ text : "Show allele alignment", handler : function() {
			var model5 = _g.getStore().getAt(rowIndex);
			var alleleId = model5.get("alleleId");
			var target = alleleId.split("-")[0];
			_g.showAlleleAlignment(target);
		}});
		return items;
	}
	,showAlleleAlignment: function(target) {
		var objectId = this.getActiveObjectId();
		var parentFolder = this.getWorkspace().getParentFolder(objectId);
		var folder = parentFolder.findChild("text",target);
		if(folder != null) this.getWorkspace().removeItem(folder.getId());
		folder = this.getWorkspace()._addFolder(target,parentFolder);
		var constructs = [];
		var n = Std["int"](this.getStore().data.length - 1);
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			var model = this.getStore().getAt(i);
			var alleleId = model.get("alleleId");
			if(alleleId.split("-")[0] == target) {
				var seq = model.get("proteinSeq");
				var protObj = new saturn.core.Protein(seq);
				protObj.setMoleculeName(alleleId);
				var construct = new saturn.core.domain.SgcConstruct();
				construct.constructId = alleleId;
				construct.proteinSeqNoTag = seq;
				construct.status = "No progress";
				constructs.push(construct);
				this.getWorkspace().addObject(protObj,false,folder);
			}
		}
		var sum = new saturn.client.programs.blocks.TargetSummary(target);
		sum.setSequences(constructs);
		sum.setParentFolder(folder);
		sum.getTargetSequence();
	}
	,calculate: function() {
		var _g = this;
		this.getApplication().showMessage("Please wait","Please wait.....");
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count() - 1;
		var entryCloneMap = new haxe.ds.StringMap();
		var fPrimerMap = new haxe.ds.StringMap();
		var rPrimerMap = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < alleleCount) {
			var i = _g1++;
			var alleleModel = alleleStore.getAt(i);
			var fPrimerId = alleleModel.get("forwardPrimer.primerId");
			var rPrimerId = alleleModel.get("reversePrimer.primerId");
			var entryCloneId = alleleModel.get("entryClone.entryCloneId");
			if(this.isNullOrEmpty(fPrimerId)) {
				this.setRecordValid(alleleModel,"Missing forward primer");
				continue;
			}
			if(this.isNullOrEmpty(rPrimerId)) {
				this.setRecordValid(alleleModel,"Missing reverse primer");
				continue;
			}
			if(this.isNullOrEmpty(entryCloneId)) {
				this.setRecordValid(alleleModel,"Missing entry clone");
				continue;
			}
			if(__map_reserved[entryCloneId] != null) entryCloneMap.setReserved(entryCloneId,""); else entryCloneMap.h[entryCloneId] = "";
			if(__map_reserved[fPrimerId] != null) fPrimerMap.setReserved(fPrimerId,""); else fPrimerMap.h[fPrimerId] = "";
			if(__map_reserved[rPrimerId] != null) rPrimerMap.setReserved(rPrimerId,""); else rPrimerMap.h[rPrimerId] = "";
		}
		var fPrimers = [];
		var rPrimers = [];
		var entryClones = [];
		var $it0 = fPrimerMap.keys();
		while( $it0.hasNext() ) {
			var fPrimerId1 = $it0.next();
			fPrimers.push(fPrimerId1);
		}
		var $it1 = rPrimerMap.keys();
		while( $it1.hasNext() ) {
			var rPrimerId1 = $it1.next();
			rPrimers.push(rPrimerId1);
		}
		var $it2 = entryCloneMap.keys();
		while( $it2.hasNext() ) {
			var entryCloneId1 = $it2.next();
			entryClones.push(entryCloneId1);
		}
		var bFetch = new saturn.db.BatchFetch(function(obj,err) {
			_g.getApplication().showMessage("Batch fetch failure",err);
		});
		bFetch.getByIds(fPrimers,saturn.core.domain.SgcForwardPrimer,"__IGNORE_ME__",null);
		bFetch.getByIds(rPrimers,saturn.core.domain.SgcReversePrimer,"__IGNORE_ME__",null);
		bFetch.getByIds(entryClones,saturn.core.domain.SgcEntryClone,"__IGNORE_ME__",null);
		bFetch.onComplete = function() {
			saturn.client.WorkspaceApplication.suspendUpdates();
			var primerReg = saturn.core.PrimerRegistry.getDefaultInstance();
			var _g2 = 0;
			while(_g2 < alleleCount) {
				var i1 = _g2++;
				var alleleModel1 = alleleStore.getAt(i1);
				var alleleId = alleleModel1.get("alleleId");
				var fPrimerId2 = alleleModel1.get("forwardPrimer.primerId");
				var rPrimerId2 = alleleModel1.get("reversePrimer.primerId");
				var entryCloneId2 = alleleModel1.get("entryClone.entryCloneId");
				if(fPrimerId2 != null && fPrimerId2 != "" && rPrimerId2 != null && rPrimerId2 != "" && entryCloneId2 != null && entryCloneId2 != "") {
					var entryClone = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcEntryClone,"entryCloneId",entryCloneId2);
					var fPrimer = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcForwardPrimer,"primerId",fPrimerId2);
					var rPrimer = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcReversePrimer,"primerId",rPrimerId2);
					if(entryClone == null) {
						_g.setRecordValid(alleleModel1,"Entry clone " + entryCloneId2 + " is missing for " + alleleId);
						continue;
					}
					if(fPrimer == null) {
						_g.setRecordValid(alleleModel1,"Forward primer " + fPrimerId2 + " is missing for " + alleleId);
						continue;
					}
					if(rPrimer == null) {
						_g.setRecordValid(alleleModel1,"Reverse primer " + rPrimerId2 + " is missing for " + alleleId);
						continue;
					}
					var ecDNA = new saturn.core.DNA(entryClone.dnaSeq);
					var fPrimerDNA = new saturn.core.Primer(fPrimer.dnaSequence);
					var rPrimerDNA = new saturn.core.Primer(rPrimer.dnaSequence);
					primerReg.autoConfigurePrimer(fPrimerDNA);
					primerReg.autoConfigurePrimer(rPrimerDNA);
					if(fPrimerDNA.get5PrimeExtensionLength() == -1) fPrimerDNA.set5PrimeExtensionLength(fPrimerDNA.getLength() - 14);
					if(rPrimerDNA.get5PrimeExtensionLength() == -1) rPrimerDNA.set5PrimeExtensionLength(rPrimerDNA.getLength() - 14);
					try {
						var pcrProduct = new saturn.core.PCRProduct(ecDNA,fPrimerDNA,rPrimerDNA);
						pcrProduct.calculateProduct();
						var pos = pcrProduct.getFirstStartCodonPosition(saturn.core.GeneticCodes.STANDARD);
						alleleModel1.set("dnaSeq",pcrProduct.getSequence());
						alleleModel1.set("dnaSeqLen",pcrProduct.getLength());
						if(pos > -1) {
							var translation = pcrProduct.getTranslation(saturn.core.GeneticCodes.STANDARD,pos,true);
							alleleModel1.set("proteinSeq",translation);
							_g.setRecordValid(alleleModel1,"");
						} else _g.setRecordValid(alleleModel1,"Unable to find start codon");
					} catch( $e3 ) {
						if ($e3 instanceof js._Boot.HaxeError) $e3 = $e3.val;
						if( js.Boot.__instanceof($e3,saturn.util.HaxeException) ) {
							var e = $e3;
							_g.setRecordValid(alleleModel1,e.getMessage());
						} else {
						var e1 = $e3;
						_g.setRecordValid(alleleModel1,"Unknown exception");
						}
					}
				}
			}
			_g.calculateAlleleIds(false,function(err1) {
				if(err1 == null) _g.getApplication().showMessage("Finished","Calculation finished");
				_g.theTable.getView().refresh();
				saturn.client.WorkspaceApplication.resumeUpdates(false);
			});
		};
		bFetch.execute();
	}
	,calculateAlleleIds: function(overwriteIds,cb) {
		var targetSet = new haxe.ds.StringMap();
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count() - 1;
		var _g = 0;
		while(_g < alleleCount) {
			var i = _g++;
			var alleleModel = alleleStore.getAt(i);
			var alleleId = alleleModel.get("entryClone.entryCloneId");
			if(alleleId != null && alleleId.indexOf("-") > -1) {
				var targetId = alleleId.split("-")[0];
				if(__map_reserved[targetId] != null) targetSet.setReserved(targetId,1); else targetSet.h[targetId] = 1;
			}
		}
		var targets = [];
		var $it0 = targetSet.keys();
		while( $it0.hasNext() ) {
			var target = $it0.next();
			targets.push(target);
		}
		saturn.core.domain.SgcUtil.generateNextID(this.getProvider(),targets,saturn.core.domain.SgcAllele,function(alleles,err) {
			if(err != null) cb(err); else {
				var _g1 = 0;
				while(_g1 < alleleCount) {
					var i1 = _g1++;
					var alleleModel1 = alleleStore.getAt(i1);
					var entryCloneId = alleleModel1.get("entryClone.entryCloneId");
					if(entryCloneId != null && entryCloneId.indexOf("-") > -1) {
						var targetId1 = entryCloneId.split("-")[0];
						var alleleId1 = alleleModel1.get("alleleId");
						if(alleleId1 == null || alleleId1 == "" || overwriteIds) {
							alleleModel1.set("alleleId",targetId1 + "-a" + StringTools.lpad(Std.string(__map_reserved[targetId1] != null?alleles.getReserved(targetId1):alleles.h[targetId1]),"0",3));
							var value;
							value = (__map_reserved[targetId1] != null?alleles.getReserved(targetId1):alleles.h[targetId1]) + 1;
							if(__map_reserved[targetId1] != null) alleles.setReserved(targetId1,value); else alleles.h[targetId1] = value;
						}
					}
				}
				cb(null);
			}
		});
	}
	,insertOrDeletePerformed: function() {
		var wo = this.getWorkspace().getObjectSafely(this.getActiveObjectId(),saturn.client.workspace.MultiAlleleHelperWO);
		if(wo != null) {
			var plateName = wo.getObject().getPlateName();
			if(plateName != null) this.getProvider().evictNamedQuery("FETCH_ALLELE_PLATE",[plateName]);
		}
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.TableHelper.prototype.setActiveObject.call(this,objectId);
		var wo = this.getWorkspace().getObjectSafely(objectId,saturn.client.workspace.MultiAlleleHelperWO);
		if(wo != null) {
			this.setTitle(wo.getName());
			if(!this.loadedExisting) {
				var plateName = wo.getObject().getPlateName();
				if(plateName != null) {
					if(this.viewReady) this.queryLoad(); else this.loadRequired = true;
				}
			}
		}
	}
	,queryLoad: function() {
		var _g = this;
		var wo = this.getWorkspace().getObjectSafely(this.getActiveObjectId(),saturn.client.workspace.MultiAlleleHelperWO);
		if(wo != null) {
			var plateName = wo.getObject().getPlateName();
			if(plateName != null) this.getProvider().getByNamedQuery("FETCH_ALLELE_PLATE",[plateName],saturn.core.domain.SgcAllele,true,function(objs,exception) {
				if(exception == null && objs != null) _g.loadObjects(objs); else _g.getApplication().showMessage("Allele plate fetch failure","Unable to fetch alleles for " + plateName);
			});
		}
	}
	,setTitle: function(title) {
		this.getApplication().setProgramTabTitle(this,title);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.TableHelper.prototype.onFocus.call(this);
		var exportMenu = this.getApplication().getExportMenu();
		exportMenu.add({ text : "Allele (DNA) to FASTA", hidden : false, handler : function() {
			var entityStore = _g.getStore();
			var entityCount = entityStore.count();
			var strBuf = new StringBuf();
			var fields = _g.theModel.getFields();
			var priField = _g.theModel.getPrimaryKey();
			var _g1 = 0;
			while(_g1 < entityCount) {
				var i = _g1++;
				var entityModel = entityStore.getAt(i);
				var protStr = entityModel.get("dnaSeq");
				if(protStr != null && protStr != "") strBuf.add(saturn.core.FastaEntity.formatFastaFile(entityModel.get("alleleId"),protStr));
			}
			var wo = _g.getActiveObject(saturn.client.workspace.WorkspaceObject);
			_g.getApplication().saveTextFile(strBuf.b,wo.getName() + "-alleles-dna.fasta");
		}});
		this.getApplication().getImportMenu().add({ text : "Import all alleles (DNA)", handler : function() {
			_g.loadAllAllelesDNA();
		}});
		this.getApplication().getImportMenu().add({ text : "Import all alleles (Protein)", handler : function() {
			_g.loadAllAllelesProtein();
		}});
		this.getApplication().getImportMenu().add({ text : "Import all entry clones (DNA)", handler : function() {
			_g.loadAllEntryClonesDNA();
		}});
		this.getApplication().getImportMenu().add({ text : "Import all primers", handler : function() {
			_g.loadAllPrimers();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Calculate", handler : function() {
			_g.calculate();
		}, tooltip : { dismissDelay : 10000, text : "Calculate DNA/Protein sequences and MW"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Update IDs", handler : function() {
			_g.calculateAlleleIds(true,function(err) {
				if(err != null) _g.getApplication().showMessage("Error updating IDs",err);
			});
		}, tooltip : { dismissDelay : 10000, text : "Calculate start/end positions of construct on target"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-import", text : "Alleles (DNA)", handler : function() {
			_g.loadAllAllelesDNA();
		}, tooltip : { dismissDelay : 10000, text : "Import all allele DNA sequence from table into Workspace"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-import", text : "Alleles (Protein)", handler : function() {
			_g.loadAllAllelesProtein();
		}, tooltip : { dismissDelay : 10000, text : "Import all allele protein sequence from table into Workspace"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-import", text : "Entry Clones", handler : function() {
			_g.loadAllEntryClonesDNA();
		}, tooltip : { dismissDelay : 10000, text : "Import all entry clone DNA sequence from table into Workspace"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-import", text : "Primers", handler : function() {
			_g.loadAllPrimers();
		}, tooltip : { dismissDelay : 10000, text : "Import all primers from table into Workspace"}});
	}
	,loadAllPrimers: function() {
		var _g = this;
		var bFetch = new saturn.db.BatchFetch(function(obj,err) {
			_g.getApplication().showMessage("Batch fetch failure",err);
		});
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var fIdset = new haxe.ds.StringMap();
		var rIdset = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < alleleCount) {
			var i = _g1++;
			var alleleModel = alleleStore.getAt(i);
			var fId = alleleModel.get("forwardPrimer.primerId");
			var rId = alleleModel.get("reversePrimer.primerId");
			if(fId != null && fId != "") {
				if(__map_reserved[fId] != null) fIdset.setReserved(fId,""); else fIdset.h[fId] = "";
			}
			if(rId != null && rId != "") {
				if(__map_reserved[rId] != null) rIdset.setReserved(rId,""); else rIdset.h[rId] = "";
			}
		}
		var fIds = [];
		var $it0 = fIdset.keys();
		while( $it0.hasNext() ) {
			var fId1 = $it0.next();
			fIds.push(fId1);
		}
		var rIds = [];
		var $it1 = rIdset.keys();
		while( $it1.hasNext() ) {
			var rId1 = $it1.next();
			rIds.push(rId1);
		}
		bFetch.getByIds(fIds,saturn.core.domain.SgcForwardPrimer,"__IGNORE_ME__",null);
		bFetch.getByIds(rIds,saturn.core.domain.SgcReversePrimer,"__IGNORE_ME__",null);
		bFetch.onComplete = function() {
			var _g2 = 0;
			while(_g2 < fIds.length) {
				var fId2 = fIds[_g2];
				++_g2;
				var obj1 = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcForwardPrimer,"primerId",fId2);
				if(obj1 != null) {
					var dna = new saturn.core.DNA(obj1.dnaSequence);
					var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,fId2);
					_g.getWorkspace()._addObject(wo,false,false);
				}
			}
			var _g3 = 0;
			while(_g3 < rIds.length) {
				var rId2 = rIds[_g3];
				++_g3;
				var obj2 = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcReversePrimer,"primerId",rId2);
				if(obj2 != null) {
					var dna1 = new saturn.core.DNA(obj2.dnaSequence);
					var wo1 = new saturn.client.workspace.DNAWorkspaceObject(dna1,rId2);
					_g.getWorkspace()._addObject(wo1,false,false);
				}
			}
			_g.getWorkspace().reloadWorkspace();
		};
		bFetch.execute();
	}
	,loadAllAllelesDNA: function() {
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var folderName = this.getActiveObjectName() + " (Allele DNA)";
		var folder = this.getWorkspace()._addFolder(folderName,null);
		Ext.suspendLayouts();
		this.getWorkspace().getTreeStore().suspendEvents();
		var _g = 0;
		while(_g < alleleCount) {
			var i = _g++;
			var alleleModel = alleleStore.getAt(i);
			var alleleId = alleleModel.get("alleleId");
			if(alleleId != null && alleleId != "") {
				var dna = new saturn.core.DNA(alleleModel.get("dnaSeq"));
				var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,alleleId);
				this.getWorkspace()._addObject(wo,false,false,folder);
			}
		}
		this.getWorkspace().reloadWorkspace();
	}
	,loadAllAllelesProtein: function() {
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var _g = 0;
		while(_g < alleleCount) {
			var i = _g++;
			var alleleModel = alleleStore.getAt(i);
			var alleleId = alleleModel.get("alleleId");
			if(alleleId != null && alleleId != "") {
				var dna = new saturn.core.DNA(alleleModel.get("proteinSeq"));
				var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,alleleId);
				this.getWorkspace()._addObject(wo,false,false);
			}
		}
		this.getWorkspace().reloadWorkspace();
	}
	,loadAllEntryClonesDNA: function() {
		var _g = this;
		var bFetch = new saturn.db.BatchFetch(function(obj,err) {
			_g.getApplication().showMessage("Batch fetch failure",err);
		});
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var entryCloneSet = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < alleleCount) {
			var i = _g1++;
			var alleleModel = alleleStore.getAt(i);
			var entryCloneId = alleleModel.get("entryClone.entryCloneId");
			if(entryCloneId != null && entryCloneId != "") {
				if(__map_reserved[entryCloneId] != null) entryCloneSet.setReserved(entryCloneId,""); else entryCloneSet.h[entryCloneId] = "";
			}
		}
		var entryCloneIds = [];
		var $it0 = entryCloneSet.keys();
		while( $it0.hasNext() ) {
			var entryCloneId1 = $it0.next();
			entryCloneIds.push(entryCloneId1);
		}
		bFetch.getByIds(entryCloneIds,saturn.core.domain.SgcEntryClone,"__IGNORE_ME__",null);
		bFetch.onComplete = function() {
			var _g2 = 0;
			while(_g2 < entryCloneIds.length) {
				var entryCloneId2 = entryCloneIds[_g2];
				++_g2;
				var obj1 = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcEntryClone,"entryCloneId",entryCloneId2);
				if(obj1 != null) {
					var dna = new saturn.core.DNA(obj1.dnaSeq);
					var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,entryCloneId2);
					_g.getWorkspace()._addObject(wo,false,false);
				}
			}
			_g.getWorkspace().reloadWorkspace();
		};
		bFetch.execute();
	}
	,__class__: saturn.client.programs.MultiAlleleHelper
});
saturn.client.workspace.MultiConstructHelperWO = $hxClasses["saturn.client.workspace.MultiConstructHelperWO"] = function(object,name) {
	if(object == null) object = new saturn.core.MultiConstructHelperData(); else if(js.Boot.__instanceof(object,saturn.core.domain.SgcConstructPlate)) {
		var constructPlate = object;
		object = new saturn.core.MultiConstructHelperData();
		object.setPlateName(constructPlate.plateName);
	}
	if(name == null) name = "Construct Helper";
	this.iconPath = "/static/js/images/dna_conical_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.MultiConstructHelperWO.__name__ = ["saturn","client","workspace","MultiConstructHelperWO"];
saturn.client.workspace.MultiConstructHelperWO.getNewMenuText = function() {
	return "Construct Helper";
};
saturn.client.workspace.MultiConstructHelperWO.getDefaultFolderName = function() {
	return "Construct Plates";
};
saturn.client.workspace.MultiConstructHelperWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.MultiConstructHelperWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	serialise: function() {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var prog;
		prog = js.Boot.__cast(app.getWorkspace().getOpenProgram(this.getUUID()) , saturn.client.programs.TableHelper);
		var models = prog.getModels();
		var dataModels = [];
		var _g = 0;
		while(_g < models.length) {
			var model = models[_g];
			++_g;
			dataModels.push(model.data);
		}
		this.object.setRawModels(dataModels);
		return saturn.client.workspace.WorkspaceObjectBase.prototype.serialise.call(this);
	}
	,clone: function() {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var prog;
		prog = js.Boot.__cast(app.getWorkspace().getOpenProgram(this.getUUID()) , saturn.client.programs.TableHelper);
		var models = prog.getModels();
		var data = new saturn.core.MultiConstructHelperData();
		data.setModelsToCopy(models);
		var newwo = new saturn.client.workspace.MultiConstructHelperWO(data,this.getName());
		return newwo;
	}
	,__class__: saturn.client.workspace.MultiConstructHelperWO
});
saturn.client.programs.MultiConstructHelper = $hxClasses["saturn.client.programs.MultiConstructHelper"] = function() {
	this.theTitle = "Construct Helper";
	saturn.client.programs.TableHelper.call(this,saturn.core.domain.SgcConstruct);
};
saturn.client.programs.MultiConstructHelper.__name__ = ["saturn","client","programs","MultiConstructHelper"];
saturn.client.programs.MultiConstructHelper.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-conical-dna", html : "Construct<br/>Plate", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.MultiConstructHelperWO(null,"Constructs"),true);
	}, tooltip : { dismissDelay : 10000, text : "Edit existing constructs or enter new ones."}}];
};
saturn.client.programs.MultiConstructHelper.__super__ = saturn.client.programs.TableHelper;
saturn.client.programs.MultiConstructHelper.prototype = $extend(saturn.client.programs.TableHelper.prototype,{
	getButtonPanelConfiguration: function() {
		var _g = this;
		var baseButtons = saturn.client.programs.TableHelper.prototype.getButtonPanelConfiguration.call(this);
		baseButtons.push({ region : "center", xtype : "button", text : "Calculate", handler : function() {
			_g.calculate();
		}});
		return baseButtons;
	}
	,getContextMenuItems: function(modelColumn,rowIndex) {
		var _g = this;
		var items = saturn.client.programs.TableHelper.prototype.getContextMenuItems.call(this,modelColumn,rowIndex);
		if(modelColumn == "dnaSeq") items.push({ text : "Import DNA", handler : function() {
			var model = _g.getStore().getAt(rowIndex);
			var dnaObj = new saturn.core.DNA(model.get(modelColumn));
			var dnawo = new saturn.client.workspace.DNAWorkspaceObject(dnaObj,model.get("constructId") + " (DNA) ");
			_g.getApplication().getWorkspace().addObject(dnawo,true);
		}}); else if(modelColumn == "proteinSeq" || modelColumn == "proteinSeqNoTag") items.push({ text : "Import Protein", handler : function() {
			var model1 = _g.getStore().getAt(rowIndex);
			var label = model1.get("constructId");
			if(modelColumn == "proteinSeqNoTag") label = label + " (Cleaved) "; else label = label + " (Tagged) ";
			var proteinObj = new saturn.core.Protein(model1.get(modelColumn));
			var proteinwo = new saturn.client.workspace.ProteinWorkspaceObject(proteinObj,label);
			_g.getApplication().getWorkspace().addObject(proteinwo,true);
		}}); else if(modelColumn == "allele.alleleId") items.push({ text : "Import Allele", handler : function() {
			var model2 = _g.getStore().getAt(rowIndex);
			var alleleId = model2.get("allele.alleleId");
			_g.getProvider().getById(alleleId,saturn.core.domain.SgcAllele,function(allele,exception) {
				if(exception != null) _g.getApplication().showMessage("Fetch error",exception); else {
					var dna = new saturn.core.DNA(allele.dnaSeq);
					var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,alleleId);
					_g.getApplication().getWorkspace().addObject(wo,true);
				}
			});
		}}); else if(modelColumn == "vector.vectorId") items.push({ text : "Import Vector", handler : function() {
			var model3 = _g.getStore().getAt(rowIndex);
			var vectorId = model3.get("vector.vectorId");
			_g.getProvider().getById(vectorId,saturn.core.domain.SgcVector,function(vector,exception1) {
				if(exception1 != null) _g.getApplication().showMessage("Fetch error",exception1); else {
					var dna1 = new saturn.core.DNA(vector.getSequence());
					var wo1 = new saturn.client.workspace.DNAWorkspaceObject(dna1,vectorId);
					_g.getApplication().getWorkspace().addObject(wo1,true);
				}
			});
		}}); else if(modelColumn == "constructId") items.push({ text : "Show construct alignment", handler : function() {
			var model4 = _g.getStore().getAt(rowIndex);
			var constructId = model4.get("constructId");
			var target = constructId.split("-")[0];
			_g.showConstructAlignment(target);
		}});
		return items;
	}
	,doAlignments: function() {
		var _g1 = this;
		var constructStore = this.getStore();
		var constructCount = constructStore.count() - 1;
		var _g = 0;
		while(_g < constructCount) {
			var i = _g++;
			var targetProteinSeq = [""];
			var vectorRExtensionRC = [""];
			var vectorFExtension = [""];
			var alleleDnaSequence = [""];
			var f_fail = [0];
			var r_fail = [0];
			var alleleDnaSequenceAllExtRemoved = "";
			var alleleDnaSequenceFExtRemoved = "";
			var startPos = [0];
			var stopPos = [0];
			var adjustedStopPos = [0];
			var startStopPos = [[]];
			var firstClustalGaps = [0];
			var secondClustalGaps = [0];
			var constructModel = [constructStore.getAt(i)];
			var consreuctIdLength = [constructModel[0].get("constructId").length];
			var constructSequence = constructModel[0].get("proteinSeqNoTag");
			var targetId = constructModel[0].get("constructId").split("-")[0];
			var alleleId = constructModel[0].get("allele.alleleId");
			var vectorId = constructModel[0].get("vector.vectorId");
			this.getProvider().getById(alleleId,saturn.core.domain.SgcAllele,(function(alleleDnaSequence) {
				return function(allele,databaseError) {
					if(databaseError != null) _g1.getApplication().showMessage("Database Fetch Error",databaseError); else alleleDnaSequence[0] = allele.dnaSeq;
				};
			})(alleleDnaSequence));
			this.getProvider().getById(vectorId,saturn.core.domain.SgcVector,(function(vectorFExtension,vectorRExtensionRC) {
				return function(vector,databaseError1) {
					if(databaseError1 != null) _g1.getApplication().showMessage("Database Fetch Error",databaseError1); else {
						vectorFExtension[0] = vector.requiredForwardExtension;
						var vectorRExtension = new saturn.core.DNA(vector.requiredReverseExtension);
						vectorRExtensionRC[0] = vectorRExtension.getInverseComplement();
					}
				};
			})(vectorFExtension,vectorRExtensionRC));
			this.getProvider().getById(targetId,saturn.core.domain.SgcTarget,(function(targetProteinSeq) {
				return function(target,databaseError2) {
					if(databaseError2 != null) _g1.getApplication().showMessage("Database Fetch Error",databaseError2); else targetProteinSeq[0] = target.proteinSeq;
				};
			})(targetProteinSeq));
			if(StringTools.startsWith(alleleDnaSequence[0],vectorFExtension[0]) == false) f_fail[0] = 1;
			alleleDnaSequenceFExtRemoved = alleleDnaSequence[0].split(vectorFExtension[0])[1];
			if(StringTools.endsWith(alleleDnaSequence[0],vectorRExtensionRC[0]) == false) r_fail[0] = 1;
			alleleDnaSequenceAllExtRemoved = alleleDnaSequenceFExtRemoved.split(vectorRExtensionRC[0])[0];
			var runs = [[]];
			var fastas = [[]];
			if(f_fail[0] == 0 || r_fail[0] == 0) {
				var alleleDnaSequenceAllExtRemovedTranslated = new saturn.core.DNA(alleleDnaSequenceAllExtRemoved).getTranslation(saturn.core.GeneticCodes.STANDARD,0,false);
				var fasta = ">" + Std.string(constructModel[0].get("constructId")) + "\n" + alleleDnaSequenceAllExtRemovedTranslated + "\n" + ">" + targetId + "\n" + targetProteinSeq[0] + "\n";
				fastas[0].push(fasta);
				runs[0].push((function(firstClustalGaps,startStopPos,stopPos,startPos,r_fail,f_fail) {
					return function() {
						if(f_fail[0] == 0) startPos[0] = startStopPos[0][0] + 1;
						if(r_fail[0] == 0) stopPos[0] = startStopPos[0][1] + 1;
						firstClustalGaps[0] = startStopPos[0][2];
					};
				})(firstClustalGaps,startStopPos,stopPos,startPos,r_fail,f_fail));
			}
			if(f_fail[0] == 1 || r_fail[0] == 1) {
				var fasta1 = ">" + Std.string(constructModel[0].get("constructId")) + "\n" + constructSequence + "\n" + ">" + targetId + "\n" + targetProteinSeq[0] + "\n";
				fastas[0].push(fasta1);
				runs[0].push((function(secondClustalGaps,startStopPos,stopPos,startPos,r_fail,f_fail) {
					return function() {
						if(f_fail[0] == 1) startPos[0] = startStopPos[0][0] + 1;
						if(r_fail[0] == 1) stopPos[0] = startStopPos[0][1] + 1;
						secondClustalGaps[0] = startStopPos[0][2];
					};
				})(secondClustalGaps,startStopPos,stopPos,startPos,r_fail,f_fail));
			}
			if(runs[0].length > 0) {
				var next = [null];
				next[0] = (function(next,fastas,runs,consreuctIdLength,constructModel,secondClustalGaps,firstClustalGaps,startStopPos,adjustedStopPos,stopPos,startPos,vectorFExtension,targetProteinSeq) {
					return function() {
						if(runs[0].length == 0) {
							var gapsOffset = Math.round(Math.abs(firstClustalGaps[0] - secondClustalGaps[0]));
							adjustedStopPos[0] = stopPos[0] - gapsOffset;
							if(startPos[0] == 2 && (HxOverrides.substr(vectorFExtension[0],vectorFExtension[0].length - 3,3) == "ATG" && targetProteinSeq[0].charAt(0) == "M")) startPos[0] = 1;
							constructModel[0].set("constructStart",targetProteinSeq[0].charAt(startPos[0] - 1) + startPos[0]);
							constructModel[0].set("constructStop",targetProteinSeq[0].charAt(adjustedStopPos[0] - 1) + adjustedStopPos[0]);
							return;
						}
						var run = runs[0].pop();
						var fasta2 = fastas[0].pop();
						saturn.client.BioinformaticsServicesClient.getClient().sendClustalReportRequest(fasta2,(function(next,consreuctIdLength,startStopPos) {
							return function(response,clustalError) {
								if(clustalError == null) {
									var clustalReport = response.json.clustalReport;
									var location = window.location;
									var URL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + clustalReport;
									saturn.client.core.CommonCore.getContent(URL,(function(next,consreuctIdLength,startStopPos) {
										return function(content) {
											var aln = new saturn.core.domain.Alignment();
											aln.setAlignmentContent(content);
											aln.setAlignmentURL(URL);
											startStopPos[0] = saturn.core.ClustalOmegaParser.readStartStop(content,consreuctIdLength[0]);
											run();
											next[0]();
										};
									})(next,consreuctIdLength,startStopPos));
								}
							};
						})(next,consreuctIdLength,startStopPos));
					};
				})(next,fastas,runs,consreuctIdLength,constructModel,secondClustalGaps,firstClustalGaps,startStopPos,adjustedStopPos,stopPos,startPos,vectorFExtension,targetProteinSeq);
				next[0]();
			}
		}
	}
	,showConstructAlignment: function(target) {
		var objectId = this.getActiveObjectId();
		var parentFolder = this.getWorkspace().getParentFolder(objectId);
		var folder = parentFolder.findChild("text",target);
		if(folder != null) this.getWorkspace().removeItem(folder.getId());
		folder = this.getWorkspace()._addFolder(target,parentFolder);
		var constructs = [];
		var n = Std["int"](this.getStore().data.length - 1);
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			var model = this.getStore().getAt(i);
			var constructId = model.get("constructId");
			if(constructId.split("-")[0] == target) {
				var seq = model.get("proteinSeqNoTag");
				var protObj = new saturn.core.Protein(seq);
				protObj.setMoleculeName(constructId);
				var construct = new saturn.core.domain.SgcConstruct();
				construct.constructId = constructId;
				construct.proteinSeqNoTag = seq;
				construct.status = model.get("status");
				constructs.push(construct);
				this.getWorkspace().addObject(protObj,false,folder);
			}
		}
		var sum = new saturn.client.programs.blocks.TargetSummary(target);
		sum.setSequences(constructs);
		sum.setParentFolder(folder);
		sum.getTargetSequence();
	}
	,calculate: function() {
		var _g = this;
		this.getApplication().showMessage("Please wait","Please wait.....");
		var constructStore = this.getStore();
		var constructCount = constructStore.count() - 1;
		var allelesMap = new haxe.ds.StringMap();
		var vectorMap = new haxe.ds.StringMap();
		var resMap = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < constructCount) {
			var i = _g1++;
			var constructModel = constructStore.getAt(i);
			var alleleId = constructModel.get("allele.alleleId");
			var vectorId = constructModel.get("vector.vectorId");
			if(this.isNullOrEmpty(alleleId)) {
				this.setRecordValid(constructModel,"Allele is missing");
				continue;
			}
			if(this.isNullOrEmpty(vectorId)) {
				this.setRecordValid(constructModel,"Vector is missing");
				continue;
			}
			if(__map_reserved[alleleId] != null) allelesMap.setReserved(alleleId,""); else allelesMap.h[alleleId] = "";
			if(__map_reserved[vectorId] != null) vectorMap.setReserved(vectorId,""); else vectorMap.h[vectorId] = "";
			var resId1 = constructModel.get("res1.enzymeName");
			var resId2 = constructModel.get("res2.enzymeName");
			if(resId1 != null && resId1 != "") {
				if(__map_reserved[resId1] != null) resMap.setReserved(resId1,""); else resMap.h[resId1] = "";
			}
			if(resId2 != null && resId2 != "") {
				if(__map_reserved[resId2] != null) resMap.setReserved(resId2,""); else resMap.h[resId2] = "";
			}
		}
		var alleles = [];
		var $it0 = allelesMap.keys();
		while( $it0.hasNext() ) {
			var allele = $it0.next();
			alleles.push(allele);
		}
		var vectors = [];
		var $it1 = vectorMap.keys();
		while( $it1.hasNext() ) {
			var vector = $it1.next();
			vectors.push(vector);
		}
		var resSites = [];
		var $it2 = resMap.keys();
		while( $it2.hasNext() ) {
			var res = $it2.next();
			resSites.push(res);
		}
		var batchFetch = new saturn.db.BatchFetch(function(obj,err) {
			_g.getApplication().showMessage("Batch fetch failure",err);
		});
		batchFetch.getByIds(alleles,saturn.core.domain.SgcAllele,"ALLELES",null);
		batchFetch.getByIds(vectors,saturn.core.domain.SgcVector,"VECTORS",null);
		if(resSites.length > 0) batchFetch.getByIds(resSites,saturn.core.domain.SgcRestrictionSite,"RESS",null);
		batchFetch.onComplete = function() {
			var vectorResSites = new haxe.ds.StringMap();
			var alleles1 = batchFetch.getObject("ALLELES");
			var vectors1 = batchFetch.getObject("VECTORS");
			var ress = batchFetch.getObject("RESS");
			var _g2 = 0;
			while(_g2 < vectors1.length) {
				var vector1 = vectors1[_g2];
				++_g2;
				vectorResSites.set(vector1.res1Id == null?"null":"" + vector1.res1Id,"");
				vectorResSites.set(vector1.res2Id == null?"null":"" + vector1.res2Id,"");
			}
			batchFetch.onComplete = function() {
				var alleleToObj = new haxe.ds.StringMap();
				var vectorToObj = new haxe.ds.StringMap();
				var resToObj = new haxe.ds.StringMap();
				var _g3 = 0;
				while(_g3 < alleles1.length) {
					var allele1 = alleles1[_g3];
					++_g3;
					alleleToObj.set(allele1.alleleId,allele1);
				}
				var _g4 = 0;
				while(_g4 < vectors1.length) {
					var vector2 = vectors1[_g4];
					++_g4;
					vectorToObj.set(vector2.vectorId,vector2);
				}
				if(ress != null) {
					var _g5 = 0;
					while(_g5 < ress.length) {
						var res1 = ress[_g5];
						++_g5;
						resToObj.set(res1.enzymeName,res1);
					}
				}
				saturn.client.WorkspaceApplication.suspendUpdates();
				var _g6 = 0;
				while(_g6 < constructCount) {
					var i1 = _g6++;
					var constructModel1 = constructStore.getAt(i1);
					var alleleId1 = constructModel1.get("allele.alleleId");
					var vectorId1 = constructModel1.get("vector.vectorId");
					var resId11 = constructModel1.get("res1.enzymeName");
					var resId21 = constructModel1.get("res2.enzymeName");
					var skip = false;
					var values = [alleleId1,vectorId1];
					var _g11 = 0;
					while(_g11 < values.length) {
						var value = values[_g11];
						++_g11;
						if(value == null || value == "") skip = true;
					}
					if(skip) continue;
					var allele2;
					allele2 = __map_reserved[alleleId1] != null?alleleToObj.getReserved(alleleId1):alleleToObj.h[alleleId1];
					if(allele2 == null) {
						_g.setRecordValid(constructModel1,"Allele " + alleleId1 + " is missing");
						continue;
					}
					var vector3;
					vector3 = __map_reserved[vectorId1] != null?vectorToObj.getReserved(vectorId1):vectorToObj.h[vectorId1];
					if(vector3 == null) {
						_g.setRecordValid(constructModel1,"Vector " + vectorId1 + " is missing");
						continue;
					}
					var vRes1 = vector3.res1;
					if(vRes1 == null) {
						_g.setRecordValid(constructModel1,"Restriction Site: " + Std.string(vRes1) + " not found");
						continue;
					}
					var vRes2 = vector3.res2;
					if(vRes2 == null) {
						_g.setRecordValid(constructModel1,"Restriction Site: " + Std.string(vRes2) + " not found");
						continue;
					}
					var res11;
					var res2;
					if(resId11 != null && resId11 != "") {
						res11 = __map_reserved[resId11] != null?resToObj.getReserved(resId11):resToObj.h[resId11];
						if(res11 == null) {
							_g.setRecordValid(constructModel1,"Restriction Site: " + resId11 + " not found");
							continue;
						}
					} else {
						res11 = vRes1;
						constructModel1.set("res1.enzymeName",vRes1.enzymeName);
					}
					if(resId21 != null && resId21 != "") {
						res2 = __map_reserved[resId21] != null?resToObj.getReserved(resId21):resToObj.h[resId21];
						if(res2 == null) {
							_g.setRecordValid(constructModel1,"Restriction Site: " + resId21 + " not found");
							continue;
						}
					} else {
						res2 = vRes2;
						constructModel1.set("res2.enzymeName",vRes2.enzymeName);
					}
					try {
						var alleleSequence = new saturn.core.DNA(allele2.dnaSeq);
						var res1Seq = new saturn.core.RestrictionSite(res11.cutSequence);
						var res2Seq = new saturn.core.RestrictionSite(res2.cutSequence);
						var v_res1Seq = new saturn.core.RestrictionSite(vRes1.cutSequence);
						var v_res2Seq = new saturn.core.RestrictionSite(vRes2.cutSequence);
						var vectorSequence = new saturn.core.DNA(vector3.getSequence());
						var proteaseCutSeq = new saturn.core.CleavageSite(vector3.proteaseCutSequence);
						var proteaseProduct = vector3.proteaseProduct;
						var direction;
						if(proteaseProduct == "UPSTREAM") direction = saturn.core.CutProductDirection.UPSTREAM; else if(proteaseProduct == "DOWNSTREAM") direction = saturn.core.CutProductDirection.DOWNSTREAM; else if(proteaseProduct == "UPDOWN") direction = saturn.core.CutProductDirection.UPDOWN; else {
							_g.setRecordValid(constructModel1,"Invalid value for Vector field protease product direction should be either UPSTREAM or DOWNSTREAM");
							continue;
						}
						var alleleDigest = new saturn.core.DoubleDigest(alleleSequence,res1Seq,res2Seq);
						var vectorDigest = new saturn.core.DoubleDigest(vectorSequence,v_res1Seq,v_res2Seq);
						var ligation = new saturn.core.Ligation(vectorDigest,alleleDigest);
						ligation.calculateProduct();
						var startCodonPosition = ligation.getFirstStartCodonPosition(saturn.core.GeneticCodes.STANDARD);
						if(startCodonPosition == -1) {
							_g.setRecordValid(constructModel1,"Ligation product is missing a start codon");
							continue;
						}
						var uncutSequence = new saturn.core.Protein(ligation.getTranslation(saturn.core.GeneticCodes.STANDARD,startCodonPosition,true));
						var cutSequence = proteaseCutSeq.getCutProduct(uncutSequence,direction);
						constructModel1.set("expectedMass",saturn.util.MathUtils.sigFigs(uncutSequence.getMW(),4));
						constructModel1.set("expectedMassNoTag",saturn.util.MathUtils.sigFigs(new saturn.core.Protein(cutSequence).getMW(),4));
						constructModel1.set("dnaSeq",ligation.getSequence());
						constructModel1.set("proteinSeq",uncutSequence.getSequence());
						constructModel1.set("proteinSeqNoTag",cutSequence);
					} catch( $e3 ) {
						if ($e3 instanceof js._Boot.HaxeError) $e3 = $e3.val;
						if( js.Boot.__instanceof($e3,saturn.util.HaxeException) ) {
							var ex = $e3;
							_g.setRecordValid(constructModel1,ex.getMessage());
						} else {
						var e = $e3;
						_g.setRecordValid(constructModel1,"Unknown exception");
						}
					}
				}
				_g.calculateConstructIds(false,function(err1) {
					if(err1 == null) _g.getApplication().showMessage("Finished","Calculation finished");
					_g.theTable.getView().refresh();
					saturn.client.WorkspaceApplication.resumeUpdates(false);
				});
			};
			batchFetch.execute();
		};
		batchFetch.execute();
	}
	,calculateConstructIds: function(overwriteIds,cb) {
		var targetSet = new haxe.ds.StringMap();
		var constructStore = this.getStore();
		var constructCount = constructStore.count() - 1;
		var _g = 0;
		while(_g < constructCount) {
			var i = _g++;
			var constructModel = constructStore.getAt(i);
			var alleleId = constructModel.get("allele.alleleId");
			if(alleleId != null && alleleId.indexOf("-") > -1) {
				var targetId = alleleId.split("-")[0];
				if(__map_reserved[targetId] != null) targetSet.setReserved(targetId,1); else targetSet.h[targetId] = 1;
			}
		}
		var targets = [];
		var $it0 = targetSet.keys();
		while( $it0.hasNext() ) {
			var target = $it0.next();
			targets.push(target);
		}
		saturn.core.domain.SgcUtil.generateNextID(this.getProvider(),targets,saturn.core.domain.SgcConstruct,function(constructs,err) {
			if(err != null) cb(err); else {
				var _g1 = 0;
				while(_g1 < constructCount) {
					var i1 = _g1++;
					var constructModel1 = constructStore.getAt(i1);
					var alleleId1 = constructModel1.get("allele.alleleId");
					if(alleleId1 != null && alleleId1.indexOf("-") > -1) {
						var targetId1 = alleleId1.split("-")[0];
						var constructId = constructModel1.get("constructId");
						if(constructId == null || constructId == "" || overwriteIds) {
							constructModel1.set("constructId",targetId1 + "-c" + StringTools.lpad(Std.string(__map_reserved[targetId1] != null?constructs.getReserved(targetId1):constructs.h[targetId1]),"0",3));
							var value;
							value = (__map_reserved[targetId1] != null?constructs.getReserved(targetId1):constructs.h[targetId1]) + 1;
							if(__map_reserved[targetId1] != null) constructs.setReserved(targetId1,value); else constructs.h[targetId1] = value;
						}
					}
				}
				cb(null);
			}
		});
	}
	,insertOrDeletePerformed: function() {
		var wo = this.getWorkspace().getObjectSafely(this.getActiveObjectId(),saturn.client.workspace.MultiConstructHelperWO);
		if(wo != null) {
			var plateName = wo.getObject().getPlateName();
			if(plateName != null) this.getProvider().evictNamedQuery("FETCH_CONSTRUCT_PLATE",[plateName]);
		}
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.TableHelper.prototype.setActiveObject.call(this,objectId);
		var wo = this.getWorkspace().getObjectSafely(objectId,saturn.client.workspace.MultiConstructHelperWO);
		if(wo != null) {
			this.setTitle(wo.getName());
			if(!this.loadedExisting) {
				var plateName = wo.getObject().getPlateName();
				if(plateName != null) {
					if(this.viewReady) this.queryLoad(); else this.loadRequired = true;
				}
			}
		}
	}
	,queryLoad: function() {
		var _g = this;
		var wo = this.getWorkspace().getObjectSafely(this.getActiveObjectId(),saturn.client.workspace.MultiConstructHelperWO);
		if(wo != null) {
			var plateName = wo.getObject().getPlateName();
			if(plateName != null) this.getProvider().getByNamedQuery("FETCH_CONSTRUCT_PLATE",[plateName],saturn.core.domain.SgcConstruct,true,function(objs,exception) {
				if(exception == null && objs != null) _g.loadObjects(objs); else _g.getApplication().showMessage("Construct plate fetch failure","Unable to fetch constructs for " + plateName);
			});
		}
	}
	,setTitle: function(title) {
		this.getApplication().setProgramTabTitle(this,title);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.TableHelper.prototype.onFocus.call(this);
		var exportMenu = this.getApplication().getExportMenu();
		exportMenu.add({ text : "Construct (DNA) to FASTA", hidden : false, handler : function() {
			var entityStore = _g.getStore();
			var entityCount = entityStore.count();
			var strBuf = new StringBuf();
			var fields = _g.theModel.getFields();
			var priField = _g.theModel.getPrimaryKey();
			var _g1 = 0;
			while(_g1 < entityCount) {
				var i = _g1++;
				var entityModel = entityStore.getAt(i);
				var dnaStr = entityModel.get("dnaSeq");
				if(dnaStr != null && dnaStr != "") strBuf.add(saturn.core.FastaEntity.formatFastaFile(entityModel.get("constructId"),dnaStr));
			}
			var wo = _g.getActiveObject(saturn.client.workspace.WorkspaceObject);
			_g.getApplication().saveTextFile(strBuf.b,wo.getName() + "-constructs-dna.fasta");
		}});
		exportMenu.add({ text : "Construct (Protein) to FASTA", hidden : false, handler : function() {
			var entityStore1 = _g.getStore();
			var entityCount1 = entityStore1.count();
			var strBuf1 = new StringBuf();
			var fields1 = _g.theModel.getFields();
			var priField1 = _g.theModel.getPrimaryKey();
			var _g11 = 0;
			while(_g11 < entityCount1) {
				var i1 = _g11++;
				var entityModel1 = entityStore1.getAt(i1);
				var protStr = entityModel1.get("proteinSeq");
				if(protStr != null && protStr != "") strBuf1.add(saturn.core.FastaEntity.formatFastaFile(entityModel1.get("constructId"),protStr));
			}
			var wo1 = _g.getActiveObject(saturn.client.workspace.WorkspaceObject);
			_g.getApplication().saveTextFile(strBuf1.b,wo1.getName() + "-constructs-protein.fasta");
		}});
		exportMenu.add({ text : "Construct (Protein No Tag) to FASTA", hidden : false, handler : function() {
			var entityStore2 = _g.getStore();
			var entityCount2 = entityStore2.count();
			var strBuf2 = new StringBuf();
			var fields2 = _g.theModel.getFields();
			var priField2 = _g.theModel.getPrimaryKey();
			var _g12 = 0;
			while(_g12 < entityCount2) {
				var i2 = _g12++;
				var entityModel2 = entityStore2.getAt(i2);
				var protStr1 = entityModel2.get("proteinSeqNoTag");
				if(protStr1 != null && protStr1 != "") strBuf2.add(saturn.core.FastaEntity.formatFastaFile(entityModel2.get("constructId"),protStr1));
			}
			var wo2 = _g.getActiveObject(saturn.client.workspace.WorkspaceObject);
			_g.getApplication().saveTextFile(strBuf2.b,wo2.getName() + "-constructs-protein-no-tag.fasta");
		}});
		this.getApplication().getImportMenu().add({ text : "Import all Constructs (DNA)", handler : function() {
			_g.loadAllConstructDNA();
		}});
		this.getApplication().getImportMenu().add({ text : "Import all Constructs (Protein)", handler : function() {
			_g.loadAllConstructProtein();
		}});
		this.getApplication().getImportMenu().add({ text : "Import all Constructs (Protein No Tag)", handler : function() {
			_g.loadAllConstructProteinNoTag();
		}});
		this.getApplication().getImportMenu().add({ text : "Import all alleles (DNA)", handler : function() {
			_g.loadAllAllelesDNA();
		}});
		this.getApplication().getImportMenu().add({ text : "Import all alleles (Protein)", handler : function() {
			_g.loadAllAllelesDNA();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Calculate", handler : function() {
			_g.calculate();
		}, tooltip : { dismissDelay : 10000, text : "Calculate DNA/Protein sequences and MW"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Calculate Positions", handler : function() {
			_g.doAlignments();
		}, tooltip : { dismissDelay : 10000, text : "Calculate start/end positions of construct on target"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "Update IDs", handler : function() {
			_g.calculateConstructIds(true,function(err) {
				if(err != null) _g.getApplication().showMessage("Error updating IDs",err);
			});
		}, tooltip : { dismissDelay : 10000, text : "Calculate start/end positions of construct on target"}});
		this.getApplication().getToolBar().add({ text : "Save<br/>Primer Report", iconCls : "x-btn-copy", handler : function() {
			_g.savePrimerReport();
		}, tooltip : { dismissDelay : 10000, text : "Saves unique list of primers in a format that can be sent to MWG"}});
		this.getApplication().getToolBar().add({ text : "Email<br/>Primer Order", iconCls : "x-btn-copy", handler : function() {
			_g.promptSendPrimerReport();
		}, tooltip : { dismissDelay : 10000, text : "Email BioTech and yourself with a unique list of primers to order from MWG<br/>(CSV format can be uploaded straight to the MWG web-site)"}});
	}
	,loadAllAllelesDNA: function() {
		var _g = this;
		var bFetch = new saturn.db.BatchFetch(function(obj,err) {
			_g.getApplication().showMessage("Batch fetch failure",err);
		});
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var alleleSet = new haxe.ds.StringMap();
		var rIdset = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < alleleCount) {
			var i = _g1++;
			var alleleModel = alleleStore.getAt(i);
			var alleleId = alleleModel.get("allele.alleleId");
			if(alleleId != null && alleleId != "") {
				if(__map_reserved[alleleId] != null) alleleSet.setReserved(alleleId,""); else alleleSet.h[alleleId] = "";
			}
		}
		var alleleIds = [];
		var $it0 = alleleSet.keys();
		while( $it0.hasNext() ) {
			var alleleId1 = $it0.next();
			alleleIds.push(alleleId1);
		}
		bFetch.getByIds(alleleIds,saturn.core.domain.SgcAllele,"__IGNORE_ME__",null);
		bFetch.onComplete = function() {
			var _g2 = 0;
			while(_g2 < alleleIds.length) {
				var alleleId2 = alleleIds[_g2];
				++_g2;
				var obj1 = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcAllele,"alleleId",alleleId2);
				if(obj1 != null) {
					var dna = new saturn.core.DNA(obj1.dnaSeq);
					var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,alleleId2);
					_g.getWorkspace()._addObject(wo,false,false);
				}
			}
			_g.getWorkspace().reloadWorkspace();
		};
		bFetch.execute();
	}
	,loadAllAllelesProtein: function() {
		var _g = this;
		var bFetch = new saturn.db.BatchFetch(function(obj,err) {
			_g.getApplication().showMessage("Batch fetch failure",err);
		});
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var alleleSet = new haxe.ds.StringMap();
		var rIdset = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < alleleCount) {
			var i = _g1++;
			var alleleModel = alleleStore.getAt(i);
			var alleleId = alleleModel.get("allele.alleleId");
			if(alleleId != null && alleleId != "") {
				if(__map_reserved[alleleId] != null) alleleSet.setReserved(alleleId,""); else alleleSet.h[alleleId] = "";
			}
		}
		var alleleIds = [];
		var $it0 = alleleSet.keys();
		while( $it0.hasNext() ) {
			var alleleId1 = $it0.next();
			alleleIds.push(alleleId1);
		}
		bFetch.getByIds(alleleIds,saturn.core.domain.SgcAllele,"__IGNORE_ME__",null);
		bFetch.onComplete = function() {
			var _g2 = 0;
			while(_g2 < alleleIds.length) {
				var alleleId2 = alleleIds[_g2];
				++_g2;
				var obj1 = _g.getProvider().getObjectFromCache(saturn.core.domain.SgcAllele,"alleleId",alleleId2);
				if(obj1 != null) {
					var protein = new saturn.core.Protein(obj1.proteinSeq);
					var wo = new saturn.client.workspace.ProteinWorkspaceObject(protein,alleleId2);
					_g.getWorkspace()._addObject(wo,false,false);
				}
			}
			_g.getWorkspace().reloadWorkspace();
		};
		bFetch.execute();
	}
	,loadAllConstructDNA: function() {
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var _g = 0;
		while(_g < alleleCount) {
			var i = _g++;
			var alleleModel = alleleStore.getAt(i);
			var constructId = alleleModel.get("constructId");
			if(constructId != null && constructId != "") {
				var dna = new saturn.core.DNA(alleleModel.get("dnaSeq"));
				var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,constructId);
				this.getWorkspace()._addObject(wo,false,false);
			}
		}
		this.getWorkspace().reloadWorkspace();
	}
	,loadAllConstructProtein: function() {
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var _g = 0;
		while(_g < alleleCount) {
			var i = _g++;
			var alleleModel = alleleStore.getAt(i);
			var constructId = alleleModel.get("constructId");
			if(constructId != null && constructId != "") {
				var dna = new saturn.core.DNA(alleleModel.get("proteinSeq"));
				var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,constructId);
				this.getWorkspace()._addObject(wo,false,false);
			}
		}
		this.getWorkspace().reloadWorkspace();
	}
	,loadAllConstructProteinNoTag: function() {
		var alleleStore = this.getStore();
		var alleleCount = alleleStore.count();
		var _g = 0;
		while(_g < alleleCount) {
			var i = _g++;
			var alleleModel = alleleStore.getAt(i);
			var constructId = alleleModel.get("constructId");
			if(constructId != null && constructId != "") {
				var dna = new saturn.core.DNA(alleleModel.get("proteinSeqNoTag"));
				var wo = new saturn.client.workspace.DNAWorkspaceObject(dna,constructId);
				this.getWorkspace()._addObject(wo,false,false);
			}
		}
		this.getWorkspace().reloadWorkspace();
	}
	,getConstructList: function() {
		var constructStore = this.getStore();
		var constructCount = constructStore.count();
		var constructIds = [];
		var _g = 0;
		while(_g < constructCount) {
			var i = _g++;
			var constructModel = constructStore.getAt(i);
			var constructId = constructModel.get("constructId");
			if(constructId != null && constructId != "") constructIds.push(constructId);
		}
		return constructIds;
	}
	,generatePrimerReport: function(cb) {
	}
	,savePrimerReport: function() {
		var _g = this;
		this.generatePrimerReport(function(content) {
			_g.getApplication().saveTextFile(content,_g.getActiveObjectName() + ".csv");
		});
	}
	,promptSendPrimerReport: function() {
		var _g = this;
		this.getApplication().userPrompt("Send report?","Are you sure you wish to email the primer report?",function() {
			_g.sendPrimerReport();
		});
	}
	,sendPrimerReport: function() {
		var _g = this;
		this.generatePrimerReport(function(content) {
			saturn.client.core.ClientCore.getClientCore().sendRequest("_email_.sgc_primer_email",{ fileName : _g.getActiveObjectName() + ".csv", content : content, description : _g.getActiveObjectName()},function(data,err) {
				if(err != null) _g.getApplication().showMessage("Error",err); else _g.getApplication().showMessage("Success","Report sent - check your inbox");
			});
		});
	}
	,__class__: saturn.client.programs.MultiConstructHelper
});
saturn.client.workspace.StructureModelWO = $hxClasses["saturn.client.workspace.StructureModelWO"] = function(object,name) {
	if(object == null) object = new saturn.core.domain.StructureModel();
	if(name == null) name = "PDB";
	this.iconPath = "/static/js/images/structure_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.StructureModelWO.__name__ = ["saturn","client","workspace","StructureModelWO"];
saturn.client.workspace.StructureModelWO.getNewMenuText = function() {
	return "PDB";
};
saturn.client.workspace.StructureModelWO.getDefaultFolderName = function() {
	return "PDB";
};
saturn.client.workspace.StructureModelWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.StructureModelWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.StructureModelWO
});
saturn.client.programs.PDBViewer = $hxClasses["saturn.client.programs.PDBViewer"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.PDBViewer.__name__ = ["saturn","client","programs","PDBViewer"];
saturn.client.programs.PDBViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-structure", html : "PDB<br/>Viewer", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.StructureModelWO(null,null),true);
	}, tooltip : { dismissDelay : 10000, text : "View PDB structures"}}];
};
saturn.client.programs.PDBViewer.parseFile = function(file,cb,asNewOpenProgram) {
	if(asNewOpenProgram == null) asNewOpenProgram = true;
	saturn.client.core.CommonCore.getFileAsText(file,function(contents) {
		var fileName = file.name;
		var extension = saturn.client.core.CommonCore.getFileExtension(file.name);
		if(extension == "pdb") {
			var pdbCode = saturn.core.PDBParser.extractPDBID(fileName);
			var obj = new saturn.core.domain.StructureModel();
			obj.modelId = pdbCode;
			obj.contents = contents;
			var wo = new saturn.client.workspace.StructureModelWO(obj,pdbCode);
			saturn.client.WorkspaceApplication.getApplication().getWorkspace()._addObject(wo,true,true);
		} else if(extension == "icb") saturn.client.core.CommonCore.getFileAsArrayBuffer(file,function(content) {
			var base64 = saturn.client.core.CommonCore.convertArrayBufferToBase64(content);
			saturn.client.BioinformaticsServicesClient.getClient().upload(base64,"icb",function(data,error) {
				if(error != null) saturn.client.WorkspaceApplication.getApplication().showMessage("Unable to show ICB",error); else {
					var obj1 = new saturn.core.domain.StructureModel();
					obj1.icbURL = saturn.client.core.CommonCore.makeFullyQualified(data.json.url);
					var wo1 = new saturn.client.workspace.StructureModelWO(obj1,fileName);
					saturn.client.WorkspaceApplication.getApplication().getWorkspace()._addObject(wo1,true,true);
				}
			});
		}); else {
			Ext.Msg.alert("","Unknown file format");
			return;
		}
	});
};
saturn.client.programs.PDBViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.PDBViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,renderer: null
	,delayedLoad: null
	,ready: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.delayedLoad = false;
		this.ready = false;
		this.theComponent = Ext.create("Ext.Panel",{ width : "100%", height : "100%", layout : { type : "fit"}, items : [{ xtype : "component", region : "north", autoEl : { tag : "div", height : "100%", width : "100%"}, 'flex' : 1, listeners : { 'render' : function() {
		}}, style : { 'background-color' : "white"}}], listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}, 'resize' : function() {
			_g.resize();
		}}, bodyCls : "glmol-container", flex : 1});
	}
	,setPluginsInstalled: function() {
	}
	,initialiseRenderer: function() {
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().getEditMenu().add({ text : "Click me", handler : function() {
			_g.getApplication().showMessage("Menu","You clicked me!");
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-import", text : "Import sequences", handler : function() {
			var object = _g.getActiveObjectObject();
			var seqObjs = saturn.core.PDBParser.getSequences(object.contents,object.modelId,null);
			var open = true;
			var _g1 = 0;
			while(_g1 < seqObjs.length) {
				var seqObj = seqObjs[_g1];
				++_g1;
				var name = seqObj.getName();
				name = HxOverrides.substr(name,1,name.length - 1);
				_g.getWorkspace()._addObject(new saturn.client.workspace.ProteinWorkspaceObject(new saturn.core.Protein(seqObj.getSequence()),name),open,false);
				open = false;
			}
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Ribbon", handler : function() {
			_g.toggleRibbon();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Wire", handler : function() {
			_g.toggleWire();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Surface", handler : function() {
			_g.toggleSurface();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Labels", handler : function() {
			_g.toggleLabels();
		}});
		this.getWorkspace().reloadWorkspace();
		this.getApplication().enableProgramSearchField(true);
		this.getApplication().setProgramSearchFieldEmptyText("Enter PDB ID ");
		this.getApplication().hideMiddleSouthPanel();
		this.getApplication().installOutlineTree("DEFAULT",true,false,"WorkspaceObject","GRID");
		var options = [];
		var pluginToName = new haxe.ds.StringMap();
		var _g2 = 0;
		var _g11 = this.plugins;
		while(_g2 < _g11.length) {
			var plugin = _g11[_g2];
			++_g2;
			if(js.Boot.__instanceof(plugin,saturn.client.programs.plugins.AbstractPDBRendererPlugin)) {
				var renderer = plugin;
				var name1 = renderer.getName();
				options.unshift({ name : name1});
				if(__map_reserved[name1] != null) pluginToName.setReserved(name1,renderer); else pluginToName.h[name1] = renderer;
			}
		}
		var myStore = Ext.create("Ext.data.Store",{ fields : ["name"], data : options});
		this.getApplication().getToolBar().add({ xtype : "combo", store : myStore, displayField : "name", valueField : "name", listeners : { change : function(This,value) {
			_g.switchRenderer(__map_reserved[value] != null?pluginToName.getReserved(value):pluginToName.h[value]);
		}}, value : options[0].name});
	}
	,switchRenderer: function(newRenderer) {
		this.getActiveObjectObject().renderer = Type.getClassName(newRenderer == null?null:js.Boot.getClass(newRenderer));
		if(this.renderer != null) this.renderer.destroy();
		newRenderer.initialise();
		this.renderer = newRenderer;
		this.reload();
	}
	,toggleRibbon: function() {
		if(this.getActiveObjectObject().ribbonOn) {
			this.getActiveObjectObject().ribbonOn = false;
			this.ribbonOff();
		} else {
			this.getActiveObjectObject().ribbonOn = true;
			this.ribbonOn();
		}
	}
	,ribbonOn: function() {
		this.renderer.ribbonOn();
	}
	,ribbonOff: function() {
		this.renderer.ribbonOff();
	}
	,toggleLabels: function() {
		if(this.getActiveObjectObject().labelsOn) {
			this.getActiveObjectObject().labelsOn = false;
			this.labelsOff();
		} else {
			this.getActiveObjectObject().labelsOn = true;
			this.labelsOn();
		}
	}
	,labelsOn: function() {
		this.renderer.labelsOn();
	}
	,labelsOff: function() {
		this.renderer.labelsOff();
	}
	,toggleSurface: function() {
		if(this.getActiveObjectObject().surfaceOn) {
			this.getActiveObjectObject().surfaceOn = false;
			this.surfaceOff();
		} else {
			this.getActiveObjectObject().surfaceOn = true;
			this.surfaceOn();
		}
	}
	,surfaceOn: function() {
		this.renderer.surfaceOn();
	}
	,surfaceOff: function() {
		this.renderer.surfaceOff();
	}
	,toggleWire: function() {
		if(this.getActiveObjectObject().wireOn) {
			this.getActiveObjectObject().wireOn = false;
			this.wireOff();
		} else {
			this.getActiveObjectObject().wireOn = true;
			this.wireOn();
		}
	}
	,wireOn: function() {
		this.renderer.wireOn();
	}
	,wireOff: function() {
		this.renderer.wireOff();
	}
	,search: function(text) {
		if(text.length >= 4) {
			if(this.getActiveObjectObject().modelId != text) {
				this.loadPdbFromId(text);
				this.getWorkspace().renameWorkspaceObject(this.getActiveObjectId(),text);
			}
		}
	}
	,loadPdbFromId: function(modelId) {
		var _g = this;
		this.getActiveObjectObject().modelId = modelId;
		if(this.getProvider().getModel(saturn.core.domain.StructureModel).isValidId(modelId)) this.getProvider().getById(modelId,saturn.core.domain.StructureModel,function(obj,err) {
			if(err != null) _g.getApplication().showMessage("","Unable to retrieve model"); else _g.getProvider().activate([obj],2,function(err1) {
				if(err1 != null) _g.getApplication().showMessage("","Unable to retrieve model"); else {
					var content = obj.getContent();
					_g.setPdbString(content);
					_g.reload();
				}
			});
		}); else saturn.client.BioinformaticsServicesClient.getClient().sendPDBRequest(modelId,function(response,error) {
			if(error == null) {
				_g.setPdbString(response.json.pdb);
				_g.reload();
			} else _g.getApplication().showMessage("Retrieval failure","Unable to retrieve PDB for " + modelId);
		});
	}
	,setPdbString: function(contents) {
		this.getActiveObjectObject().contents = contents;
	}
	,loadPdb: function() {
		this.renderer.loadPDB();
	}
	,loadICB: function() {
		this.renderer.loadICB();
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.setTitle(this.getActiveObjectName());
		if(this.getActiveObjectObject().renderer == null) {
			var _g = 0;
			var _g1 = this.plugins;
			while(_g < _g1.length) {
				var plugin = _g1[_g];
				++_g;
				if(js.Boot.__instanceof(plugin,saturn.client.programs.plugins.AbstractPDBRendererPlugin)) this.getActiveObjectObject().renderer = Type.getClassName(plugin == null?null:js.Boot.getClass(plugin));
			}
		}
		if(this.getActiveObjectObject().modelId != null || this.getActiveObjectObject().contents != null || this.getActiveObjectObject().icbURL != null) this.reload();
	}
	,configureRenderer: function() {
		var rendererClazz = this.getActiveObjectObject().renderer;
		var load = false;
		if(this.renderer == null) load = true; else {
			var currentRendererClazz = Type.getClassName(Type.getClass(this.renderer));
			if(rendererClazz != currentRendererClazz) load = true;
		}
		if(load) {
			var _g = 0;
			var _g1 = this.plugins;
			while(_g < _g1.length) {
				var plugin = _g1[_g];
				++_g;
				if(Std["is"](plugin,Type.resolveClass(rendererClazz))) {
					if(this.renderer != null) this.renderer.destroy();
					var newRenderer = plugin;
					newRenderer.initialise();
					this.theComponent.updateLayout();
					this.renderer = newRenderer;
					break;
				}
			}
		}
	}
	,resize: function() {
		if(this.renderer != null) this.renderer.resize();
	}
	,getWidth: function() {
		return this.getComponent().getEl().dom.offsetWidth;
	}
	,getHeight: function() {
		return this.getComponent().getEl().dom.offsetHeight;
	}
	,reload: function() {
		if(this.getActiveObjectId() != null) {
			this.configureRenderer();
			var w0;
			w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.StructureModelWO) , saturn.client.workspace.StructureModelWO);
			var obj;
			obj = js.Boot.__cast(w0.getObject() , saturn.core.domain.StructureModel);
			this.addModelToOutline(obj,true);
			if(obj.contents != null) this.loadPdb(); else if(obj.modelId != null) this.loadPdbFromId(obj.modelId); else if(obj.icbURL != null) this.loadICB();
		}
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,__class__: saturn.client.programs.PDBViewer
});
saturn.client.workspace.Phylo5WorkspaceObject = $hxClasses["saturn.client.workspace.Phylo5WorkspaceObject"] = function(object,name) {
	this.newickStr = null;
	if(object == null) object = new saturn.core.domain.Alignment();
	if(name == null) name = "Phylogenetic tree";
	this.iconPath = "/static/js/images/tree_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.Phylo5WorkspaceObject.__name__ = ["saturn","client","workspace","Phylo5WorkspaceObject"];
saturn.client.workspace.Phylo5WorkspaceObject.getNewMenuText = function() {
	return "Phylogenetic tree";
};
saturn.client.workspace.Phylo5WorkspaceObject.getDefaultFolderName = function() {
	return "Trees";
};
saturn.client.workspace.Phylo5WorkspaceObject.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.Phylo5WorkspaceObject.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	newickStr: null
	,__class__: saturn.client.workspace.Phylo5WorkspaceObject
});
saturn.client.programs.Phylo5Viewer = $hxClasses["saturn.client.programs.Phylo5Viewer"] = function() {
	this.newickStr = "";
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.Phylo5Viewer.__name__ = ["saturn","client","programs","Phylo5Viewer"];
saturn.client.programs.Phylo5Viewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-tree", html : "Phylogenetic<br/>Viewer", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.Phylo5WorkspaceObject(new saturn.core.domain.Alignment(),"Tree"),true);
	}, tooltip : { dismissDelay : 10000, text : "Generate a phylogenetic tree from DNA or Protein sequences"}}];
};
saturn.client.programs.Phylo5Viewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.Phylo5Viewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,internalFrameId: null
	,canvas: null
	,newickStr: null
	,emptyInit: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.internalFrameId = "INTERNAL_ALN_FRAME";
		var self = this;
		this.getApplication().hideMiddleSouthPanel();
		this.theComponent = Ext.create("Ext.panel.Panel",{ title : "Phylo5 Viewer", width : "100%", height : "95%", autoScroll : true, layout : "fit", listeners : { 'render' : function() {
			self.initialiseDOMComponent();
		}}, cls : "x-tree-background"});
		this.registerDropFolder("Sequences",null,true);
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		var parent = this.getComponent().getEl().dom.firstChild;
		this.newickStr = "((UFSP1:0.00,UFSP2:0.00):0.77,((((SENP1:0.00,SENP2:0.00):0.70,(SENP3:0.00,SENP5:0.00):0.73):0.82,SENP8:0.00):0.99,(SENP6:0.00,SENP7:0.00):0.77):1.00,((((((((((FAM105B:0.00,(OTUD6A:0.00,OTUD6B:0.00):0.46):0.92,(OTUB1:0.00,OTUB2:0.00):0.55):0.99,OTUD1:0.00):0.99,YOD1:0.00):0.99,(OTUD3:0.00,OTUD5:0.00):0.86):0.99,OTUD4:0.00):0.99,ZRANB1:0.00):0.99,TNFAIP3:0.00):0.99,(OTUD7A:0.00,OTUD7B:0.00):0.48):0.99,VCPIP1:0.00):1.00,(((KHNYN:0.00,NYNRIN:0.00):0.65,N4BP1:0.00):0.86,((ZC3H12A:0.00,(ZC3H12B:0.00,ZC3H12C:0.00):0.53):0.64,ZC3H12D:0.00):0.65):0.94,(BAP1:0.00,((UCHL1:0.00,UCHL3:0.00):0.46,UCHL5:0.00):0.82):0.99,(DESI1:0.00,DESI2:0.00):0.82,(((((((BRCC3:0.00,(COPS5:0.00,PSMD14:0.00):0.74):0.93,(COPS6:0.00,(EIF3F:0.00,PSMD7:0.00):0.79):0.81):0.95,EIF3H:0.00):0.99,MPND:0.00):0.99,(STAMBP:0.00,STAMBPL1:0.00):0.43):0.99,MYSM1:0.00):0.99,PRPF8:0.00):0.99,((ATXN3:0.00,ATXN3L:0.00):0.30,(JOSD1:0.00,JOSD2:0.00):0.51):0.99,((ATG4A:0.00,ATG4B:0.00):0.53,(ATG4C:0.00,ATG4D:0.00):0.63):0.80);";
		var parser = new phylo.PhyloNewickParser();
		var rootNode = parser.parse(this.newickStr);
		rootNode.calculateScale();
		rootNode.postOrderTraversal();
		rootNode.preOrderTraversal(1);
		var parentWidth = this.getComponent().getEl().getWidth();
		var parentHeight = this.getComponent().getEl().getHeight();
		var config = new phylo.PhyloCanvasConfiguration();
		config.enableTools = true;
		config.enableToolbar = true;
		config.enableZoom = true;
		this.canvas = new phylo.PhyloCanvasRenderer(parentWidth,parentHeight,parent,rootNode,config,null);
	}
	,setTree: function(tree) {
		this.newickStr = tree;
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.Phylo5WorkspaceObject) , saturn.client.workspace.Phylo5WorkspaceObject);
		w0.newickStr = tree;
		if(this.newickStr == null || this.newickStr == "") {
			this.theComponent.addCls("x-tree-background");
			return;
		} else this.theComponent.removeCls("x-tree-background");
		this.canvas.setNewickString(this.newickStr);
	}
	,zoomIn: function() {
		this.canvas.zoomIn();
	}
	,zoomOut: function() {
		this.canvas.zoomOut();
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
		var self = this;
		this.getApplication().getViewMenu().add({ text : "Update tree", handler : function() {
			self.updateAlignment();
		}});
		this.getApplication().getFileMenu().add({ text : "Import all Protein Sequences", handler : function() {
			self.addAllProteinSequencesFromWorkspace();
		}});
		this.getApplication().getFileMenu().add({ text : "Import all DNA Sequences", handler : function() {
			self.addAllDNASequencesFromWorkspace();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Update", handler : function() {
			self.updateAlignment();
		}, tooltip : { dismissDelay : 10000, text : "Update tree with current sequences"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Import Protein", handler : function() {
			self.addAllProteinSequencesFromWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Import all protein sequences from the workspace (click update to update tree)"}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Import DNA", handler : function() {
			self.addAllDNASequencesFromWorkspace();
		}, tooltip : { dismissDelay : 10000, text : "Import all DNA sequences from the workspace (click update to update tree)"}});
	}
	,setAlignmentURL: function(alignmentURL) {
		var frame = this.theComponent.getComponent(this.internalFrameId).getEl().dom;
		frame.src = alignmentURL;
		this.getActiveAlignmentObject().setAlignmentURL(alignmentURL);
	}
	,updateAlignment: function() {
		var _g = this;
		var self = this;
		var objectIds = this.getState().getReferences("Sequences");
		var strBuf = new StringBuf();
		var _g1 = 0;
		while(_g1 < objectIds.length) {
			var objectId = objectIds[_g1];
			++_g1;
			var w0 = this.getWorkspace().getObject(objectId);
			if(js.Boot.__instanceof(w0,saturn.client.workspace.DNAWorkspaceObject)) {
				var object = this.getWorkspace().getObjectSafely(objectId,saturn.client.workspace.DNAWorkspaceObject);
				strBuf.add(">" + w0.getName() + "\n" + object.getObject().getSequence() + "\n");
			} else if(js.Boot.__instanceof(w0,saturn.client.workspace.ProteinWorkspaceObject)) {
				var object1;
				object1 = js.Boot.__cast(w0 , saturn.client.workspace.ProteinWorkspaceObject);
				strBuf.add(">" + w0.getName() + "\n" + object1.getObject().getSequence() + "\n");
			} else {
				var d = w0;
				strBuf.add(">" + Std.string(d.getName()) + "\n" + Std.string(d.getSequence()) + "\n");
			}
		}
		saturn.client.BioinformaticsServicesClient.getClient().sendPhyloReportRequest(strBuf.b,function(response,error) {
			if(error == null) {
				var phyloReport = response.json.phyloReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + phyloReport;
				Ext.Ajax.request({ url : dstURL, success : function(response1,opts) {
					var obj = response1.responseText;
					self.setTree(obj);
				}, failure : function(response2,opts1) {
				}});
			} else _g.getApplication().showMessage("Tree generation error",error);
		});
	}
	,addAllDNASequencesFromWorkspace: function() {
		this.registerAllFromWorkspace(saturn.client.workspace.DNAWorkspaceObject,"Sequences");
	}
	,addAllProteinSequencesFromWorkspace: function() {
		this.registerAllFromWorkspace(saturn.client.workspace.ProteinWorkspaceObject,"Sequences");
	}
	,getActiveAlignmentObject: function() {
		var activeObject = saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.Phylo5WorkspaceObject);
		if(activeObject != null) {
			var w0;
			w0 = js.Boot.__cast(activeObject , saturn.client.workspace.Phylo5WorkspaceObject);
			return w0.getObject();
		} else return null;
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.Phylo5WorkspaceObject) , saturn.client.workspace.Phylo5WorkspaceObject);
		var alnObj = w0.getObject();
		var alnUrl = alnObj.getAlignmentURL();
		if(alnUrl != null) this.setAlignmentURL(alnUrl);
		this.setTitle(w0.getName());
		if(w0.newickStr != null) this.setTree(w0.newickStr);
	}
	,getAlignmentObject: function() {
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.Phylo5WorkspaceObject) , saturn.client.workspace.Phylo5WorkspaceObject);
		return w0.getObject();
	}
	,'export': function() {
		var domElem = this.theComponent.down("component").getEl().dom;
		this.getApplication().saveTextFile(domElem.innerHTML,this.getActiveObjectName() + ".svg");
	}
	,__class__: saturn.client.programs.Phylo5Viewer
});
saturn.client.workspace.ProteinWorkspaceObject = $hxClasses["saturn.client.workspace.ProteinWorkspaceObject"] = function(object,name) {
	if(object == null) object = new saturn.core.Protein("");
	if(name == null) name = "Protein Sequence";
	this.iconPath = "/static/js/images/structure_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.ProteinWorkspaceObject.__name__ = ["saturn","client","workspace","ProteinWorkspaceObject"];
saturn.client.workspace.ProteinWorkspaceObject.getNewMenuText = function() {
	return "Protein Sequence";
};
saturn.client.workspace.ProteinWorkspaceObject.getDefaultFolderName = function() {
	return "Protein";
};
saturn.client.workspace.ProteinWorkspaceObject.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.ProteinWorkspaceObject.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	setName: function(name) {
		saturn.client.workspace.WorkspaceObjectBase.prototype.setName.call(this,name);
		if(this.object != null) this.object.setMoleculeName(name);
	}
	,setObject: function(obj) {
		saturn.client.workspace.WorkspaceObjectBase.prototype.setObject.call(this,obj);
		obj.setMoleculeName(this.name);
	}
	,__class__: saturn.client.workspace.ProteinWorkspaceObject
});
saturn.client.programs.ProteinSequenceEditor = $hxClasses["saturn.client.programs.ProteinSequenceEditor"] = function(delayLoad) {
	saturn.client.programs.sequenceeditor.SequenceEditor.call(this);
};
saturn.client.programs.ProteinSequenceEditor.__name__ = ["saturn","client","programs","ProteinSequenceEditor"];
saturn.client.programs.ProteinSequenceEditor.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.ProteinSequenceEditor.readFastaFile = function(file,onLoad) {
	var fileReader = new FileReader();
	fileReader.onload = function(e) {
		var contents = e.target.result;
		var fileName = file.name;
		var seqObjs = null;
		if(StringTools.endsWith(fileName,".fasta")) seqObjs = saturn.core.FastaEntity.parseFasta(contents); else if(StringTools.endsWith(fileName,".pdb")) {
			var pdbCode = saturn.core.PDBParser.extractPDBID(fileName);
			seqObjs = saturn.core.PDBParser.getSequences(contents,pdbCode,null);
		} else {
			Ext.Msg.alert("","Unknown file format");
			return;
		}
		if(seqObjs == null || seqObjs.length == 0) Ext.Msg.alert("","No sequences found in FASTA file");
		onLoad(seqObjs);
	};
	fileReader.readAsText(file);
};
saturn.client.programs.ProteinSequenceEditor.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-structure", html : "Protein<br/>Editor", cls : "quickLaunchButton", handler : function() {
		var prot = new saturn.core.Protein("");
		prot.setMoleculeName("Protein");
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(prot,true);
	}, tooltip : { dismissDelay : 10000, text : "Editor for protein sequences.<br/>Supports annotations and submission to BLAST."}}];
};
saturn.client.programs.ProteinSequenceEditor.__super__ = saturn.client.programs.sequenceeditor.SequenceEditor;
saturn.client.programs.ProteinSequenceEditor.prototype = $extend(saturn.client.programs.sequenceeditor.SequenceEditor.prototype,{
	selectedStatsFolder: null
	,lastWasMouseMoved: null
	,frameOffSet: null
	,emptyInit: function() {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.emptyInit.call(this);
		this.frameOffSet = 0;
		this.selectedStatsFolder = null;
		this.lastWasMouseMoved = false;
		this.setAnnotationCount(0);
		this.addSequenceChangeListener(this);
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.setActiveObject.call(this,objectId);
		var proteinObject = this.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject);
		var object;
		if(js.Boot.__instanceof(proteinObject,saturn.core.Protein)) object = proteinObject; else object = proteinObject.object;
		var sequence = object.getSequence();
		this.blockChanged(null,null,0,null,sequence);
	}
	,onFocus: function() {
		var _g2 = this;
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.onFocus.call(this);
		var self = this;
		var viewMenu = this.getApplication().getViewMenu();
		var toolsMenu = this.getApplication().getToolsMenu();
		var blastMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0", 'z-index' : 1000000});
		toolsMenu.add({ text : "BLAST", iconCls : "bmenu", menu : blastMenu, cls : "menu-item-FILE"});
		var blastItems = [];
		var blastDatabases = saturn.client.BioinformaticsServicesClient.getClient(null).getBlastList().PROT;
		var _g = 0;
		var _g1 = Reflect.fields(blastDatabases);
		while(_g < _g1.length) {
			var dbName = [_g1[_g]];
			++_g;
			var blastItem = blastMenu.add({ text : dbName[0], hidden : false, handler : (function(dbName) {
				return function() {
					var blastName = "Blastp " + _g2.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject).getName() + " 1 - " + self.sequence.length;
					self.blastSequence(self.sequence,dbName[0],blastName);
				};
			})(dbName)});
			blastItems.push({ text : dbName[0], hidden : false, handler : (function(dbName) {
				return function() {
					var blastName1 = "Blastp " + _g2.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject).getName() + " 1 - " + self.sequence.length;
					self.blastSequence(self.sequence,dbName[0],blastName1);
				};
			})(dbName)});
		}
		var blastButton = Ext.create("Ext.button.Button",{ renderTo : Ext.getBody(), text : "BLAST", handler : function() {
		}, menu : Ext.create("Ext.menu.Menu",{ items : blastItems}), iconCls : "x-btn-blast", cls : "x-btn-split-black-background", tooltip : { dismissDelay : 10000, text : "BLAST against a sequence database"}});
		this.getApplication().getToolBar().add(blastButton);
		viewMenu.add({ text : "SS report", handler : function() {
			var name = "PSIPred " + _g2.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject).getName() + " 1 - " + self.sequence.length;
			_g2.psiPredSequence(_g2.sequence,name);
		}});
		viewMenu.add({ text : "Transmembrane Report", handler : function() {
			var name1 = "TMHMM " + _g2.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject).getName() + " 1 - " + self.sequence.length;
			_g2.tmhmmSequence(_g2.sequence,name1);
		}});
		this.installOutlineTree();
		this.updateOutline();
		this.getApplication().getExportMenu().add({ text : "FASTA", handler : function() {
			var name2 = _g2.getActiveObjectName();
			name2 = StringTools.replace(name2," (Protein)","");
			var contents = saturn.core.FastaEntity.formatFastaFile(name2,_g2.getSequence());
			_g2.getApplication().saveTextFile(contents,name2 + ".fasta");
		}});
		var fetchItems = [];
		fetchItems.push({ text : "NCBI Gene", hidden : false, handler : function() {
			var idStr = _g2.getLastSearch();
			var ids = null;
			if(idStr.indexOf(",") > -1) ids = idStr.split(","); else ids = [idStr];
			saturn.app.SaturnClient.addProteinsFromNCBIGene(ids,_g2);
		}});
		fetchItems.push({ text : "UniProtKB", hidden : false, handler : function() {
			var idStr1 = _g2.getLastSearch();
			var ids1 = null;
			if(idStr1.indexOf(",") > -1) ids1 = idStr1.split(","); else ids1 = [idStr1];
			saturn.app.SaturnClient.addProteinsFromUniProtKB(ids1,_g2);
		}});
		var fetchButton = Ext.create("Ext.button.Button",{ renderTo : Ext.getBody(), text : "Fetch", handler : function() {
		}, menu : Ext.create("Ext.menu.Menu",{ items : fetchItems}), iconCls : "x-btn-fetch", cls : "x-btn-split-black-background", tooltip : { dismissDelay : 10000, text : "Fetch from remote database"}});
		this.getApplication().getToolBar().add(fetchButton);
		this.getApplication().getToolBar().add({ text : "Load DNA", handler : function() {
			_g2.loadDNA();
		}});
	}
	,loadDNA: function() {
		var object = this.getObject();
		if(object != null) {
			var dna = this.getObject().getDNA();
			this.getWorkspace().addObject(dna,true);
		}
	}
	,getAddToPlateContextMenu: function(name,start,stop) {
		var _g1 = this;
		var addPlateMenu = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0"});
		if(name == null) {
			var obj = this.getWorkspaceObject();
			if(obj.getDNA() != null) obj = obj.getDNA();
			name = obj.getName();
		}
		var objs = this.getWorkspace().getAllObjects(saturn.core.ConstructDesignTable);
		var _g = 0;
		while(_g < objs.length) {
			var obj1 = [objs[_g]];
			++_g;
			addPlateMenu.add({ text : obj1[0].getName(), handler : (function(obj1) {
				return function() {
					var objectId = obj1[0].getUUID();
					var prog = _g1.getWorkspace().getProgramForObject(objectId);
					if(prog != null) {
						var constructDesigner;
						constructDesigner = js.Boot.__cast(prog , saturn.client.programs.ConstructDesigner);
						constructDesigner.getTable().addRow({ 'Entry Clone' : name, 'Start position' : start, 'Stop position' : stop});
						_g1.getWorkspace().setActiveObject(objectId);
					}
				};
			})(obj1)});
		}
		addPlateMenu.add({ text : "New plate", handler : function() {
			var table = new saturn.core.ConstructDesignTable(false);
			table.getData().push({ 'Entry Clone' : name, 'Start position' : start, 'Stop position' : stop});
			_g1.getWorkspace().addObject(table,true);
		}});
		return addPlateMenu;
	}
	,updateModelField: function(obj,field,value) {
		var p;
		p = js.Boot.__cast(this.getObject() , saturn.core.Protein);
		if(p.isLinked()) {
			if(p.linkedOriginField == field) {
				saturn.client.programs.sequenceeditor.SequenceEditor.prototype.updateModelField.call(this,obj,field,this.getSequence());
				return;
			}
		}
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.updateModelField.call(this,obj,field,value);
	}
	,getWorkspaceContextMenuItems: function() {
		var items = [];
		var obj = this.getEntity();
		if(js.Boot.__instanceof(obj,saturn.core.Protein)) {
			var p;
			p = js.Boot.__cast(obj , saturn.core.Protein);
			if(!p.isLinked()) {
				var dnaItems = this.getWorkspace().getObjectsByClass(saturn.core.DNA);
				var attachItems = Ext.create("Ext.menu.Menu",{ margin : "0 0 10 0"});
				var _g = 0;
				while(_g < dnaItems.length) {
					var dnaObj = [dnaItems[_g]];
					++_g;
					if(!dnaObj[0].isLinked()) attachItems.add({ text : dnaObj[0].getName(), handler : (function(dnaObj) {
						return function() {
							p.setDNA(dnaObj[0]);
						};
					})(dnaObj)});
				}
				items.push({ text : "Attach DNA", menu : attachItems});
			} else items.push({ text : "Deattach DNA", handler : function() {
				obj.setDNA(null);
			}});
		}
		return items;
	}
	,setFrameOffSet: function(offSet) {
		this.frameOffSet = offSet;
	}
	,psiPredSequence: function(theSequence,name) {
		var _g = this;
		saturn.client.BioinformaticsServicesClient.getClient().sendPsiPredReportRequest(theSequence,name,function(response,error) {
			if(error == null) {
				var htmlReportFile = response.json.htmlPsiPredReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + htmlReportFile;
				var webPage = new saturn.client.workspace.WebPage();
				webPage.setURL(dstURL);
				var w0 = new saturn.client.workspace.WebPageWorkspaceObject(webPage,name);
				_g.getApplication().getWorkspace().addObject(w0,true);
			} else _g.getApplication().showMessage("PSIPred Error",error);
		});
	}
	,tmhmmSequence: function(theSequence,name) {
		var _g = this;
		saturn.client.BioinformaticsServicesClient.getClient().sendTMHMMReportRequest(theSequence,name,function(response,error) {
			if(error == null) {
				var htmlReportFile = response.json.htmlTMHMMReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + htmlReportFile;
				var webPage = new saturn.client.workspace.WebPage();
				webPage.setURL(dstURL);
				var w0 = new saturn.client.workspace.WebPageWorkspaceObject(webPage,name);
				_g.getApplication().getWorkspace().addObject(w0,true);
			} else _g.getApplication().showMessage("TMHMM Error",error);
		});
	}
	,blastSequence: function(theSequence,database,blastName) {
		var _g = this;
		saturn.client.BioinformaticsServicesClient.getClient().sendBlastReportRequest(theSequence,blastName,database,function(response,error) {
			if(error == null) {
				var reportFile = response.json.reportFile;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + reportFile;
				var webPage = new saturn.client.workspace.WebPage();
				webPage.setURL(dstURL);
				var w0 = new saturn.client.workspace.WebPageWorkspaceObject(webPage,blastName);
				window.console.log("Gekk");
				_g.getApplication().getWorkspace()._addObject(w0,true,true,"BLAST");
			} else _g.getApplication().showMessage("BLAST Error",error);
		});
	}
	,onBlur: function() {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.onBlur.call(this);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
	}
	,installOutlineTree: function() {
		this.getApplication().installOutlineTree("DEFAULT",false,false,null);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var rootNode = dataStore.getRootNode();
		var folderNames = ["Current","Selected"];
		Ext.suspendLayouts();
		var _g = 0;
		while(_g < folderNames.length) {
			var folderName = folderNames[_g];
			++_g;
			var gcContentStr = "0";
			var dnaNucCountStr = "0";
			var mw = "0";
			var currentStats = rootNode.appendChild({ text : folderName, leaf : false, expanded : true, id : folderName});
			var lenNode = currentStats.appendChild({ text : "Length : " + dnaNucCountStr, leaf : true, id : folderName + " : Length"});
			var mwNode = currentStats.appendChild({ text : "MW : " + mw, leaf : true, id : folderName + " : MW"});
			currentStats.appendChild({ text : "HP : ", leaf : true, id : folderName + " : HP"});
			currentStats.appendChild({ text : "pI : ", leaf : true, id : folderName + " : pI"});
			currentStats.appendChild({ text : "E (R) : ", leaf : true, id : folderName + " : E (R)"});
			currentStats.appendChild({ text : "E (NR) : ", leaf : true, id : folderName + " : E (NR)"});
		}
		Ext.resumeLayouts(true);
	}
	,blockChanged: function(textField,blockNumber,startDelPosition,endDelPosition,newSequence) {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.blockChanged.call(this,textField,blockNumber,startDelPosition,endDelPosition,newSequence);
	}
	,selectionUpdated: function() {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.selectionUpdated.call(this);
	}
	,updateOutline: function() {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.updateOutline.call(this);
		var webApp = saturn.client.WorkspaceApplication.getApplication();
		var dataStore = webApp.getOutlineDataStore("DEFAULT");
		var node = dataStore.getNodeById("Current" + " : Length");
		if(node != null && this.sequence != null) {
			node.set("text","Length : " + this.sequence.length);
			node.commit();
			node = dataStore.getNodeById("Current" + " : MW");
			if(node != null) {
				var mw = 0.;
				if(this.sequence.length > 0) mw = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(this.sequence).getMW(),2);
				node.set("text","MW : " + mw);
				node.commit();
			}
			node = dataStore.getNodeById("Current" + " : HP");
			if(node != null) {
				var hp = 0.;
				if(this.sequence.length > 0) hp = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(this.sequence).getHydrophobicity(),2);
				node.set("text","HP : " + hp);
				node.commit();
			}
			node = dataStore.getNodeById("Current" + " : pI");
			if(node != null) {
				var pI = 0.;
				if(this.sequence.length > 0) pI = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(this.sequence).getpI(),2);
				node.set("text","pI : " + pI);
				node.commit();
			}
			node = dataStore.getNodeById("Current" + " : E (R)");
			if(node != null) {
				var E = 0.;
				if(this.sequence.length > 0) E = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(this.sequence).getExtinctionReduced(),2);
				node.set("text","E (R): " + E);
				node.commit();
			}
			node = dataStore.getNodeById("Current" + " : E (NR)");
			if(node != null) {
				var E1 = 0.;
				if(this.sequence.length > 0) E1 = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(this.sequence).getExtinctionNonReduced(),2);
				node.set("text","E (NR): " + E1);
				node.commit();
			}
		}
		node = dataStore.getNodeById("Selected" + " : Length");
		if(node != null) {
			var sel = this.getSelectedRegion();
			if(sel != null) {
				var selSeq = sel.getSequence();
				if(selSeq != null) {
					node.set("text","Length : " + selSeq.length);
					node.commit();
					node = dataStore.getNodeById("Selected" + " : MW");
					var mw1 = 0.;
					if(selSeq.length > 0) mw1 = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(selSeq).getMW(),2);
					node.set("text","MW : " + mw1);
					node.commit();
					node = dataStore.getNodeById("Selected" + " : HP");
					var hp1 = 0.;
					if(selSeq.length > 0) hp1 = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(selSeq).getHydrophobicity(),2);
					node.set("text","HP : " + hp1);
					node.commit();
					node = dataStore.getNodeById("Selected" + " : pI");
					var pI1 = 0.;
					if(selSeq.length > 0) pI1 = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(selSeq).getpI(),2);
					node.set("text","pI : " + pI1);
					node.commit();
					node = dataStore.getNodeById("Selected" + " : E (R)");
					var E2 = 0.;
					if(selSeq.length > 0) E2 = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(selSeq).getExtinctionReduced(),2);
					node.set("text","E (R): " + E2);
					node.commit();
					node = dataStore.getNodeById("Selected" + " : E (NR)");
					var E3 = 0.;
					if(selSeq.length > 0) E3 = saturn.util.MathUtils.sigFigs(new saturn.core.Protein(selSeq).getExtinctionNonReduced(),2);
					node.set("text","E (NR): " + E3);
					node.commit();
				}
			}
		}
	}
	,openFile: function(file,asNew,asNewOpenProgram) {
		if(asNewOpenProgram == null) asNewOpenProgram = true;
		if(asNew) {
			var workspace = this.getWorkspace();
			saturn.client.programs.ProteinSequenceEditor.readFastaFile(file,Ext.bind(function(seqObjs) {
				var openTabs = true;
				saturn.client.WorkspaceApplication.suspendUpdates();
				var _g = 0;
				while(_g < seqObjs.length) {
					var seqObj = seqObjs[_g];
					++_g;
					var w0;
					if(seqObj.guessType() == saturn.core.FastaEntryType.DNA) w0 = new saturn.client.workspace.DNAWorkspaceObject(new saturn.core.DNA(seqObj.getSequence()),seqObj.getName()); else if(seqObj.guessType() == saturn.core.FastaEntryType.PROTEIN) w0 = new saturn.client.workspace.ProteinWorkspaceObject(new saturn.core.Protein(seqObj.getSequence()),seqObj.getName()); else throw new js._Boot.HaxeError(new saturn.util.HaxeException("Unsupported FASTA file"));
					workspace.addObject(w0,openTabs);
					openTabs = false;
				}
				saturn.client.WorkspaceApplication.resumeUpdates(true);
			},this));
		} else this.openFastaFile(file);
	}
	,openFastaFile: function(file) {
		var _g = this;
		saturn.client.programs.ProteinSequenceEditor.readFastaFile(file,Ext.bind(function(seqObjs) {
			if(seqObjs.length > 0) {
				_g.blockChanged(null,null,0,null,seqObjs[0].getSequence());
				_g.getWorkspace().renameWorkspaceObject(_g.getActiveObjectId(),seqObjs[0].getName());
			}
		},this));
	}
	,sequenceChanged: function(sequence) {
	}
	,getSelectedRegion: function() {
		var region = saturn.client.programs.sequenceeditor.SequenceEditor.prototype.getSelectedRegion.call(this);
		return region;
	}
	,serialise: function() {
		var object = saturn.client.programs.sequenceeditor.SequenceEditor.prototype.serialise.call(this);
		object.FRAME_OFFSET = this.frameOffSet;
		return object;
	}
	,deserialise: function(object) {
		saturn.client.programs.sequenceeditor.SequenceEditor.prototype.deserialise.call(this,object);
		this.frameOffSet = object.FRAME_OFFSET;
	}
	,getNewMoleculeInstance: function() {
		return new saturn.core.Protein(this.sequence);
	}
	,getSequenceEditorBlock: function(blockNumber,editor) {
		return new saturn.client.programs.ProteinSequenceEditorBlock(blockNumber,editor);
	}
	,__class__: saturn.client.programs.ProteinSequenceEditor
});
saturn.client.programs.BlastDatabase = $hxClasses["saturn.client.programs.BlastDatabase"] = { __ename__ : ["saturn","client","programs","BlastDatabase"], __constructs__ : ["Constructs_DNA","Constructs_Protein"] };
saturn.client.programs.BlastDatabase.Constructs_DNA = ["Constructs_DNA",0];
saturn.client.programs.BlastDatabase.Constructs_DNA.toString = $estr;
saturn.client.programs.BlastDatabase.Constructs_DNA.__enum__ = saturn.client.programs.BlastDatabase;
saturn.client.programs.BlastDatabase.Constructs_Protein = ["Constructs_Protein",1];
saturn.client.programs.BlastDatabase.Constructs_Protein.toString = $estr;
saturn.client.programs.BlastDatabase.Constructs_Protein.__enum__ = saturn.client.programs.BlastDatabase;
saturn.client.programs.ProteinSequenceEditorBlock = $hxClasses["saturn.client.programs.ProteinSequenceEditorBlock"] = function(blockNumber,sequenceEditor) {
	saturn.client.programs.sequenceeditor.SequenceEditorBlock.call(this,blockNumber,sequenceEditor);
};
saturn.client.programs.ProteinSequenceEditorBlock.__name__ = ["saturn","client","programs","ProteinSequenceEditorBlock"];
saturn.client.programs.ProteinSequenceEditorBlock.__super__ = saturn.client.programs.sequenceeditor.SequenceEditorBlock;
saturn.client.programs.ProteinSequenceEditorBlock.prototype = $extend(saturn.client.programs.sequenceeditor.SequenceEditorBlock.prototype,{
	initialise: function(blockNumber) {
		var _g = this;
		saturn.client.programs.sequenceeditor.SequenceEditorBlock.prototype.initialise.call(this,blockNumber);
		var contextMenu1 = function(event) {
			var sequenceRegion = _g.sequenceEditor.getSelectedRegion();
			if(sequenceRegion != null) {
				var baseName = _g.sequenceEditor.getActiveObject(saturn.client.workspace.WorkspaceObject).getName() + " " + (sequenceRegion.getStartPosition() + 1) + "-" + sequenceRegion.getStopPosition();
				var blastName = "Blastn " + baseName;
				var protEditor;
				protEditor = js.Boot.__cast(_g.sequenceEditor , saturn.client.programs.ProteinSequenceEditor);
				var addPlateMenu = protEditor.getAddToPlateContextMenu(null,sequenceRegion.getStartPosition() + 1,sequenceRegion.getStopPosition());
				var items = [{ text : "Blast Selected", handler : function() {
					(js.Boot.__cast(_g.sequenceEditor , saturn.client.programs.ProteinSequenceEditor)).blastSequence(sequenceRegion.getSequence(),"UniProt (Swiss-Prot)",blastName);
				}},{ text : "New From Selected", handler : function() {
					var prot = new saturn.core.Protein(sequenceRegion.getSequence());
					prot.setMoleculeName(baseName);
					_g.sequenceEditor.getWorkspace().addObject(prot,true);
				}},{ text : "Add to plate", menu : addPlateMenu}];
				var contextMenu = Ext.create("Ext.menu.Menu",{ focusOnToFront : false, items : items});
				contextMenu.showAt(event.clientX,event.clientY);
				event.preventDefault();
			}
			return true;
		};
		var previousOnMouseUp = this.divElem.onmouseup;
		this.divElem.onmouseup = function(event1) {
			if(event1.ctrlKey) contextMenu1(event1); else previousOnMouseUp(event1);
		};
		this.divElem.oncontextmenu = contextMenu1;
	}
	,destroy: function() {
		this.divElem.onmouseup = null;
		this.divElem.oncontextmenu = null;
		this.sequenceEditor = null;
	}
	,__class__: saturn.client.programs.ProteinSequenceEditorBlock
});
saturn.client.programs.PurificationHelper = $hxClasses["saturn.client.programs.PurificationHelper"] = function() {
	saturn.client.programs.BasicTableViewer.call(this);
};
saturn.client.programs.PurificationHelper.__name__ = ["saturn","client","programs","PurificationHelper"];
saturn.client.programs.PurificationHelper.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-structure", text : "Purification Helper", cls : "quickLaunchButton", handler : function() {
		var table = new saturn.core.PurificationHelperTable();
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(table,true);
	}}];
};
saturn.client.programs.PurificationHelper.__super__ = saturn.client.programs.BasicTableViewer;
saturn.client.programs.PurificationHelper.prototype = $extend(saturn.client.programs.BasicTableViewer.prototype,{
	initialiseDOMComponent: function() {
		saturn.client.programs.BasicTableViewer.prototype.initialiseDOMComponent.call(this);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.BasicTableViewer.prototype.onFocus.call(this);
		this.getApplication().getToolBar().add({ iconCls : "x-btn-calculate", text : "generate IDs", handler : function() {
			_g.generateids();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-save", text : "Save", handler : function() {
			_g.saveNew();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-save", text : "Start", handler : function() {
			_g.startGUI();
		}});
	}
	,startGUI: function() {
		var _g = this;
		this.getApplication().userValuePrompt("Start","Enter PrepX run name",function(runname) {
			_g.runStage0(runname);
		},function() {
		});
	}
	,runStage0: function(runname) {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.PurificationHelperTable);
		table.runStage0(runname,function(err) {
			if(err != null) _g.getApplication().showMessage("Run failure",err); else {
				_g.getApplication().showMessage("Success","Run complete!!!");
				_g.updateTable(table);
			}
		});
	}
	,saveNew: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.PurificationHelperTable);
		table.saveNew(function(err) {
			if(err != null) _g.getApplication().showMessage("Save failure","Save failure " + err); else _g.getApplication().showMessage("Saved","All records saved");
		});
	}
	,generateids: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.PurificationHelperTable);
		table.generateids(function(err) {
			if(err != null) _g.getApplication().showMessage("ID generation failure",err); else _g.updateTable(table);
		});
	}
	,__class__: saturn.client.programs.PurificationHelper
});
saturn.client.programs.SHRNADesigner = $hxClasses["saturn.client.programs.SHRNADesigner"] = function() {
	this.reg_ncbi = new EReg("^\\s*\\w+_\\d+\\s*","");
	saturn.client.programs.BasicTableViewer.call(this);
};
saturn.client.programs.SHRNADesigner.__name__ = ["saturn","client","programs","SHRNADesigner"];
saturn.client.programs.SHRNADesigner.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-shrna", text : "shRNA Designer", cls : "quickLaunchButton", menu : Ext.create("Ext.menu.Menu",{ items : { text : "OGG1 Example", handler : function() {
		var table = new saturn.core.SHRNADesignTable(false);
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(table,true);
	}}}), handler : function() {
		var table1 = new saturn.core.SHRNADesignTable(true);
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(table1,true);
	}, listeners : { mouseover : function() {
		if(!this.hasVisibleMenu()) this.showMenu();
	}}}];
};
saturn.client.programs.SHRNADesigner.__super__ = saturn.client.programs.BasicTableViewer;
saturn.client.programs.SHRNADesigner.prototype = $extend(saturn.client.programs.BasicTableViewer.prototype,{
	reg_ncbi: null
	,initialiseDOMComponent: function() {
		this.hideTitle = true;
		saturn.client.programs.BasicTableViewer.prototype.initialiseDOMComponent.call(this);
		this.table.addCustomContextItem({ text : "Show construct alignment", handler : function(rowIndex) {
		}});
		this.registerDropFolder("Target Sequence",saturn.core.DNA,true);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.BasicTableViewer.prototype.onFocus.call(this);
		this.getApplication().getToolBar().add({ text : "Calculate", handler : function() {
			_g.calculate();
		}, iconCls : "x-btn-calculate"});
		this.getApplication().enableProgramSearchField(true);
	}
	,calculate: function() {
		var _g = this;
		var table;
		table = js.Boot.__cast(this.getUpdatedTable() , saturn.core.SHRNADesignTable);
		var references = this.getReferences("Target Sequence");
		if(references != null && references.length > 0) {
			var dna = this.getWorkspace().getObject(references[0]);
			table.setSequence(dna.getSequence());
			table.calculateOligos(function(err) {
				if(err == null) _g.updateTable(table); else _g.getApplication().showMessage("Calculation error","Please check all fields\n" + err);
			});
		} else this.getApplication().showMessage("Calculation error","Please set the target sequence first");
	}
	,search: function(text) {
		var _g = this;
		if(text == this.lastSearch || text == "") return; else this.lastSearch = text;
		var loadFunc = function(sequence,name) {
			var targetSequences = _g.getReferences("Target Sequence");
			if(targetSequences != null && targetSequences.length > 0) {
				var obj = _g.getWorkspace().getObject(targetSequences[0]);
				obj.setSequence(sequence);
				obj.setName(name);
				_g.getWorkspace().renameWorkspaceObject(obj.getUUID(),name);
				var prog = _g.getWorkspace().getProgramForObject(obj.getUUID());
				if(prog != null) {
					if(js.Boot.__instanceof(prog,saturn.client.programs.DNASequenceEditor)) {
						var dnaProg;
						dnaProg = js.Boot.__cast(prog , saturn.client.programs.DNASequenceEditor);
						dnaProg.setSequence(sequence);
					}
				}
			} else {
				var dna = new saturn.core.DNA(sequence);
				dna.setName(name);
				_g.getWorkspace().addObject(dna,false);
				_g.registerReference(dna.getUUID(),"Target Sequence");
			}
		};
		if(this.reg_ncbi.match(text)) saturn.core.EUtils.getDNAForAccessions([text],function(err,objs) {
			if(err == null) {
				if(objs != null && objs.length > 0) {
					_g.debug("Loading remote sequence");
					loadFunc(objs[0].getSequence(),objs[0].getName());
				} else _g.getApplication().showMessage("Download failure","No sequences found");
			} else _g.getApplication().showMessage("Download failure","Unable to download sequence for " + text);
		}); else if(text.indexOf(">") > -1) {
			var entities = saturn.core.FastaEntity.parseFasta(text);
			if(entities == null || entities.length == 0) this.getApplication().showMessage("Invalid FASTA","Invalid FASTA string"); else loadFunc(entities[0].getSequence(),entities[0].getName());
		} else loadFunc(text,"shRNA Template");
	}
	,__class__: saturn.client.programs.SHRNADesigner
});
saturn.client.workspace.ScarabELNWO = $hxClasses["saturn.client.workspace.ScarabELNWO"] = function(object,name) {
	if(object == null) object = new saturn.core.scarab.LabPage();
	if(name == null) name = "ScarabELN";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.ScarabELNWO.__name__ = ["saturn","client","workspace","ScarabELNWO"];
saturn.client.workspace.ScarabELNWO.getNewMenuText = function() {
	return "ScarabELN";
};
saturn.client.workspace.ScarabELNWO.getDefaultFolderName = function() {
	return "ScarabELN";
};
saturn.client.workspace.ScarabELNWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.ScarabELNWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	serialise: function() {
		var page = new saturn.core.scarab.LabPage();
		page.id = this.object.id;
		page.experimentNo = this.object.experimentNo;
		this.object = page;
		return saturn.client.workspace.WorkspaceObjectBase.prototype.serialise.call(this);
	}
	,__class__: saturn.client.workspace.ScarabELNWO
});
saturn.client.programs.ScarabELNViewer = $hxClasses["saturn.client.programs.ScarabELNViewer"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.ScarabELNViewer.__name__ = ["saturn","client","programs","ScarabELNViewer"];
saturn.client.programs.ScarabELNViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-dna", text : "ScarabELNViewer", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.ScarabELNWO(null,null),true);
	}}];
};
saturn.client.programs.ScarabELNViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.ScarabELNViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,editor: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "100%", autoScroll : true, region : "center", listeners : { 'afterrender' : function() {
			_g.initialiseDOMComponent();
		}}, autoEl : { tag : "div", html : ""}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Example Button"});
		this.getApplication().getEditMenu().add({ text : "Click me", handler : function() {
			_g.getApplication().showMessage("Menu","You clicked me!");
		}});
		this.getApplication().hideMiddleSouthPanel();
	}
	,setActiveObject: function(objectId) {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.ScarabELNWO) , saturn.client.workspace.ScarabELNWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.scarab.LabPage);
		this.getProvider().getById(obj.experimentNo,saturn.core.scarab.LabPage,function(obj1,err) {
			w0.setObject(obj1);
			if(err != null) _g.getApplication().showMessage("",err); else _g.getProvider().activate([obj1],4,function(err1) {
				_g.setTitle(w0.getName());
				_g.renderPage();
			});
		});
	}
	,setTitle: function(title) {
		if(this.theComponent.tab != null) this.theComponent.tab.setText(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,getDomElement: function() {
		return this.theComponent.getEl().down("div[id*=innerCt]").dom;
	}
	,renderPage: function() {
		var obj = this.getActiveObjectObject();
		var container = this.getDomElement();
		var _g = 0;
		var _g1 = container.childNodes;
		while(_g < _g1.length) {
			var child = _g1[_g];
			++_g;
			container.removeChild(child);
		}
		container.className = "scarab_page";
		var headerDiv;
		var _this = window.document;
		headerDiv = _this.createElement("div");
		headerDiv.className = "scarab_header";
		var titleDiv;
		var _this1 = window.document;
		titleDiv = _this1.createElement("div");
		titleDiv.innerText = "Title: " + obj.title;
		titleDiv.className = "scarab_title";
		var authorDiv;
		var _this2 = window.document;
		authorDiv = _this2.createElement("div");
		authorDiv.innerText = "Author: " + obj.userObj.fullName;
		authorDiv.className = "scarab_author";
		var dateDiv;
		var _this3 = window.document;
		dateDiv = _this3.createElement("div");
		if(obj.dateStarted != null && Object.prototype.hasOwnProperty.call(obj.dateStarted,"getDate")) {
			dateDiv.innerText = "Created: " + obj.dateStarted.getDate() + "/" + (obj.dateStarted.getMonth() + 1) + "/" + obj.dateStarted.getFullYear();
			dateDiv.className = "scarab_date";
		}
		var dateUpdatedDiv;
		var _this4 = window.document;
		dateUpdatedDiv = _this4.createElement("div");
		dateUpdatedDiv.innerText = "Created: " + obj.lastEdited.getDate() + "/" + (obj.lastEdited.getMonth() + 1) + "/" + obj.lastEdited.getFullYear();
		dateUpdatedDiv.className = "scarab_date_updated";
		headerDiv.appendChild(titleDiv);
		headerDiv.appendChild(authorDiv);
		headerDiv.appendChild(dateDiv);
		headerDiv.appendChild(dateUpdatedDiv);
		container.appendChild(headerDiv);
		var counter = 1;
		var _g2 = 0;
		var _g11 = obj.items;
		while(_g2 < _g11.length) {
			var item = _g11[_g2];
			++_g2;
			if(!js.Boot.__instanceof(item,saturn.core.scarab.LabPageText) && !js.Boot.__instanceof(item,saturn.core.scarab.LabPageImage)) continue;
			var captionDiv;
			var _this5 = window.document;
			captionDiv = _this5.createElement("div");
			captionDiv.innerText = item.caption;
			container.appendChild(captionDiv);
			var sectionDiv;
			var _this6 = window.document;
			sectionDiv = _this6.createElement("div");
			sectionDiv.className = "scarab_section";
			sectionDiv.id = "scarab_section" + "_" + counter;
			sectionDiv.style.width = "100%";
			sectionDiv.ondblclick = $bind(this,this.doubleClickHandler);
			if(js.Boot.__instanceof(item,saturn.core.scarab.LabPageText)) {
				var textSection = item;
				var iframe;
				var _this7 = window.document;
				iframe = _this7.createElement("iframe");
				iframe.srcdoc = textSection.content;
				iframe.setAttribute("data-caption",textSection.caption);
				iframe.setAttribute("data-elnsectionid",textSection.elnSectionId == null?"null":"" + textSection.elnSectionId);
				iframe.setAttribute("data-sectionid",textSection.id == null?"null":"" + textSection.id);
				iframe.setAttribute("data-sectionorder",textSection.itemOrder == null?"null":"" + textSection.itemOrder);
				iframe.onload = $bind(this,this.iframeResizeHandler);
				iframe.onchange = $bind(this,this.iframeResizeHandler);
				iframe.width = "100%";
				iframe.style.marginTop = "5px";
				iframe.style.maxHeight = "400";
				iframe.scrolling = "auto";
				iframe.setAttribute("seamless","seamless");
				iframe.className = "scarab_text_read";
				iframe.id = "scarab_text_read" + "_" + counter;
				sectionDiv.appendChild(iframe);
			} else if(js.Boot.__instanceof(item,saturn.core.scarab.LabPageImage)) {
				var imageSection = item;
				var image;
				var _this8 = window.document;
				image = _this8.createElement("img");
				var $window = window;
				var blob = new Blob([imageSection.imageEdit],{ type : "image/jpeg"});
				var urlCreator = $window.URL || $window.webkitURL;
				var imageUrl = urlCreator.createObjectURL(blob);
				image.src = imageUrl;
				image.style.maxWidth = "100%";
				image.style.maxHeight = "400px";
				image.style.display = "block";
				image.style.marginTop = "5px";
				sectionDiv.appendChild(image);
				image.className = "scarab_image_read";
				image.id = "scarab_image_read" + "_" + counter;
			}
			container.appendChild(sectionDiv);
			counter++;
		}
	}
	,doubleClickHandler: function(event) {
		var sectionDiv;
		var config = { };
		config.allowedContent = true;
		config.extraAllowedContent = "span;ul;li;table;td;style;*[id];*(*);*{*}";
		if(this.editor) {
			var iframeId1 = this.editor.name;
			$("#" + iframeId1).contents().find("body").html(this.editor.getData());
			this.updateActiveObject(iframeId1);
			this.editor.destroy();
			$("#" + iframeId1).trigger("change");
		}
		sectionDiv = $(event.target) || $(event.srcElement);
		var iframeId = $(sectionDiv).children().first().attr("id");
		this.editor = CKEDITOR.replace(iframeId,config);
		this.editor.setData($(sectionDiv).children().first().contents().find("body").html());
	}
	,iframeResizeHandler: function(event) {
		var element = event.target || event.srcElement;
		element.style.height = element.contentWindow.document.body.offsetHeight + 30 + "px";
	}
	,updateActiveObject: function(iframeId) {
		var obj = this.getActiveObjectObject();
		var temp = null;
		var itemId = null;
		itemId = $("#" + iframeId).attr("data-sectionid");
		var _g = 0;
		var _g1 = obj.items;
		while(_g < _g1.length) {
			var item = _g1[_g];
			++_g;
			if(js.Boot.__instanceof(item,saturn.core.scarab.LabPageText) && (item.id == null?"null":"" + item.id) == itemId) {
				temp = item;
				HxOverrides.remove(obj.items,item);
				var iframeContent = $("#" + iframeId).contents().find("body").html();
				temp.content = this.constructScarabCompatibleHtml(iframeId,iframeContent);
				obj.items.push(temp);
				break;
			} else continue;
		}
		this.getApplication().getProvider().update(temp,$bind(this,this.updateCallBack));
	}
	,updateCallBack: function() {
	}
	,constructScarabCompatibleHtml: function(iframeId,iframeContent) {
		var content = null;
		var iframeSource = $("#" + iframeId).attr("srcdoc");
		var header = iframeSource.split("<body")[0];
		var fullBody = iframeSource.split("</head>")[1];
		var bodyOpenningTag = fullBody.split(">")[0] + ">";
		content = Std.string(header) + bodyOpenningTag + Std.string(iframeContent) + "</body></html>";
		return content;
	}
	,__class__: saturn.client.programs.ScarabELNViewer
});
saturn.client.programs.Sequence = $hxClasses["saturn.client.programs.Sequence"] = function() {
};
saturn.client.programs.Sequence.__name__ = ["saturn","client","programs","Sequence"];
saturn.client.programs.Sequence.main = function() {
};
saturn.client.programs.Sequence.prototype = {
	length: null
	,sequenceStr: null
	,getLength: function() {
		return this.length;
	}
	,setLength: function(len) {
		this.length = len;
	}
	,setSequence: function(sequenceStr) {
		this.sequenceStr = sequenceStr;
		this.setLength(this.sequenceStr.length);
	}
	,__class__: saturn.client.programs.Sequence
};
saturn.client.programs.TableHelperModelData = $hxClasses["saturn.client.programs.TableHelperModelData"] = function() { };
saturn.client.programs.TableHelperModelData.__name__ = ["saturn","client","programs","TableHelperModelData"];
saturn.client.programs.TableHelperModelData.prototype = {
	setModelsToCopy: null
	,getModelsToCopy: null
	,setModels: null
	,getModels: null
	,setRawModels: null
	,setObjects: null
	,getRawModels: null
	,getObjects: null
	,__class__: saturn.client.programs.TableHelperModelData
};
saturn.client.programs.ClipBoardRow = $hxClasses["saturn.client.programs.ClipBoardRow"] = function() {
	this.contents = new haxe.ds.StringMap();
};
saturn.client.programs.ClipBoardRow.__name__ = ["saturn","client","programs","ClipBoardRow"];
saturn.client.programs.ClipBoardRow.prototype = {
	contents: null
	,set: function(key,value) {
		var value1 = value;
		this.contents.set(key,value1);
	}
	,getContents: function() {
		return this.contents;
	}
	,__class__: saturn.client.programs.ClipBoardRow
};
saturn.client.programs.TextEditor = $hxClasses["saturn.client.programs.TextEditor"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.TextEditor.__name__ = ["saturn","client","programs","TextEditor"];
saturn.client.programs.TextEditor.runCode = function(code) {
	var app = saturn.client.WorkspaceApplication.getApplication();
	app.clearPrintBuffer();
	app.setInformationPanelText(app.getPrintBufferContent(),true);
	eval(code + "\nflush();");
};
saturn.client.programs.TextEditor.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-copy", text : "Script", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.core.domain.TextFile(),true);
	}, tooltip : { dismissDelay : 10000, text : "Create a new script"}}];
};
saturn.client.programs.TextEditor.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.TextEditor.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,editor: null
	,autoRunCBX: null
	,saveAsFileName: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", autoScroll : true, layout : "border", region : "center", items : [{ xtype : "component", region : "north", autoEl : { tag : "div", itemid : "editor", style : { width : "100%", height : "100%", position : "relative", top : 0, left : 0, overflow : "auto"}}}], listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}, 'resize' : function() {
			_g.editor.resize();
		}}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		this.installEditorComponent();
	}
	,installEditorComponent: function() {
		var _g = this;
		var dWin = window;
		var ace = dWin.ace;
		ace.require("ace/ext/language_tools");
		var dom = this.getEditorComponent();
		this.editor = ace.edit(dom.id);
		this.editor.session.setMode("ace/mode/javascript");
		this.editor.setTheme("ace/theme/tomorrow");
		this.editor.setOptions({ enableBasicAutocompletion : true, enableSnippets : true, enableLiveAutocompletion : false});
		this.editor.on("change",function() {
			_g.getObject().value = _g.editor.getSession().getValue();
		});
	}
	,getEditorComponent: function() {
		return this.theComponent.getEl().down("div[itemid*=editor]").dom;
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Run", handler : function() {
			_g.runCodeFromEditor();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "Run Selected", handler : function() {
			_g.runSelectedCode();
		}});
		this.getApplication().getToolBar().add({ iconCls : "x-btn-copy", text : "API", handler : function() {
			_g.getApplication().openLocalURL("static/pages/index.html");
		}});
		var obj = this.getActiveObjectObject();
		this.autoRunCBX = this.getApplication().getToolBar().add({ xtype : "checkbox", boxLabel : "auto-run", inputValue : "1", checked : obj != null && obj.autoRun?true:false, handler : function() {
			var This = this;
			_g.getActiveObjectObject().autoRun = This.getValue();
		}, listeners : { 'afterrender' : function(c) {
			Ext.QuickTips.register({ dismissDelay : 10000, target : c.getEl(), text : "Auto-run code when loading session<br/>Useful if you wish to extend classes or auto-load datasets dynamically"});
		}}});
		if(saturn.core.Util.isHostEnvironmentAvailable()) {
			this.getApplication().getToolBar().add({ iconCls : "x-btn-open", text : "Open", handler : function() {
				saturn.core.Util.openFileAsDialog(function(err,fileName,contents) {
					_g.setText(contents);
					_g.saveAsFileName = fileName;
				});
			}});
			this.getApplication().getToolBar().add({ iconCls : "x-btn-saveas", text : "Save As", handler : function() {
				saturn.core.Util.saveFileAsDialog(_g.getText(),function(err1,fileName1) {
					_g.saveAsFileName = fileName1;
				});
			}});
			this.getApplication().getToolBar().add({ iconCls : "x-btn-save", text : "Save", handler : function() {
				if(_g.saveAsFileName != null) saturn.core.Util.saveFile(_g.saveAsFileName,_g.getText(),function(err2) {
				}); else saturn.core.Util.saveFileAsDialog(_g.getText(),function(err3,fileName2) {
					_g.saveAsFileName = fileName2;
				});
			}});
		}
	}
	,runCodeFromEditor: function() {
		var value = this.editor.getSession().getValue();
		saturn.client.programs.TextEditor.runCode(value);
	}
	,runSelectedCode: function() {
		var value = this.editor.getSelectedText();
		saturn.client.programs.TextEditor.runCode(value);
	}
	,updateActions: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.updateActions.call(this);
		var obj = this.getActiveObjectObject();
		if(obj != null) {
			if(obj.autoRun) this.autoRunCBX.setValue(true); else this.autoRunCBX.setValue(false);
		}
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.setTitle(this.getObjectName());
		this.editor.getSession().setValue(this.getObject().value);
		this.setText(this.getObject().value);
	}
	,setText: function(text) {
		this.editor.getSession().setValue(text);
	}
	,getText: function() {
		return this.editor.getSession().getValue();
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,saveObject: function(cb) {
		var entity = this.getEntity();
		entity.setText(this.getText());
		saturn.client.programs.SimpleExtJSProgram.prototype.saveObject.call(this,cb);
	}
	,__class__: saturn.client.programs.TextEditor
});
saturn.client.programs.TiddlyWikiViewer = $hxClasses["saturn.client.programs.TiddlyWikiViewer"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.TiddlyWikiViewer.__name__ = ["saturn","client","programs","TiddlyWikiViewer"];
saturn.client.programs.TiddlyWikiViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-eln", html : "ELN", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.core.domain.TiddlyWiki(),true);
	}, tooltip : { dismissDelay : 10000, text : "Create ELN page"}}];
};
saturn.client.programs.TiddlyWikiViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.TiddlyWikiViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,emptyInit: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		var self = this;
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "95%", autoScroll : true, layout : "fit", items : [{ xtype : "component", autoEl : { tag : "iframe"}}], listeners : { 'render' : function() {
			self.initialiseDOMComponent();
		}}});
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
	}
	,getDefaultTemplateTiddlyWiki: function(cb) {
		saturn.client.core.CommonCore.getContent("/static/emptywiki.html",function(content) {
			var page = new saturn.core.domain.TiddlyWiki();
			page.content = content;
			var d = window;
			d.content = content;
			cb(null,page);
		},function(err) {
			cb("Unable to download template page",null);
		});
	}
	,setActiveObject: function(objectId) {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		if(objectId != null) {
			var obj = this.getEntity();
			if(obj.content == null) this.getDefaultTemplateTiddlyWiki(function(err,template) {
				if(err != null) _g.getApplication().showMessage("Template error","Unable to retrieve template"); else {
					obj.content = template.content;
					_g.getApplication().userValuePrompt("Wiki ID","Enter ELN ID",function(pageId) {
						obj.pageId = pageId;
						_g.getWorkspace().renameWorkspaceObject(_g.getActiveObjectId(),pageId);
						var provider = _g.getApplication().getProvider();
						provider.insert(obj,function(err1) {
							if(err1 != null) _g.getApplication().showMessage("Save failure"," Unable to save new page"); else _g.setTiddlyWikiContent(obj.content);
						});
						_g.setTitle(pageId);
						obj.pageId = pageId;
						_g.getApplication().getWorkspace().reloadWorkspace();
					},function() {
						_g.getWorkspace().removeObject(objectId);
					});
				}
			}); else {
				this.setTiddlyWikiContent(obj.content);
				this.setTitle(obj.pageId);
			}
		}
	}
	,saveObject: function(cb) {
		var _g = this;
		var obj = this.getEntity();
		obj.content = this.getTiddlyWikiContent();
		saturn.client.programs.SimpleExtJSProgram.prototype.saveObject.call(this,function(error) {
			cb(error);
			if(error != null) _g.setTiddlyWikiClean();
		});
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,getIframe: function() {
		return this.theComponent.items.items[0].getEl().dom;
	}
	,setTiddlyWikiClean: function() {
		var iframe = this.getIframe();
		if(iframe != null) haxe.Timer.delay(function() {
			iframe.contentWindow.$tw.syncer.taskQueue = { };
		},2000);
	}
	,setTiddlyWikiContent: function(content) {
		var iframe = this.getIframe();
		if(iframe != null) {
			var iframeDoc = null;
			if(iframe.contentDocument != null) iframeDoc = iframe.contentDocument; else if(iframe.contentWindow.document != null) iframeDoc = iframe.contentWindow.document;
			if(iframeDoc != null) {
				iframeDoc.write(content);
				iframeDoc.close();
			} else {
			}
		}
	}
	,getTiddlyWikiContent: function() {
		var iframe = this.getIframe();
		if(iframe != null) {
			var iframeDoc = null;
			if(iframe.contentDocument != null) iframeDoc = iframe.contentDocument; else if(iframe.contentWindow.document != null) iframeDoc = iframe.contentWindow.document;
			if(iframeDoc != null) return iframe.contentWindow.$tw.wiki.renderTiddler("text/plain","$:/core/save/all"); else {
			}
		}
		return null;
	}
	,saveWait: function(cb) {
		var obj = this.getEntity();
		obj.content = this.getTiddlyWikiContent();
		cb();
	}
	,__class__: saturn.client.programs.TiddlyWikiViewer
});
saturn.client.workspace.WONKAWO = $hxClasses["saturn.client.workspace.WONKAWO"] = function(object,name) {
	if(object == null) object = new saturn.core.WONKASession();
	if(name == null) name = "WONKA";
	this.iconPath = "/static/js/images/wonka_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.WONKAWO.__name__ = ["saturn","client","workspace","WONKAWO"];
saturn.client.workspace.WONKAWO.getNewMenuText = function() {
	return "WONKA";
};
saturn.client.workspace.WONKAWO.getDefaultFolderName = function() {
	return "WONKA";
};
saturn.client.workspace.WONKAWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.WONKAWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.WONKAWO
});
saturn.client.programs.WONKA = $hxClasses["saturn.client.programs.WONKA"] = function() {
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.WONKA.__name__ = ["saturn","client","programs","WONKA"];
saturn.client.programs.WONKA.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-wonka", text : "WONKA", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.WONKAWO(null,null),true);
	}}];
};
saturn.client.programs.WONKA.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.WONKA.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,molContainer: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "95%", autoScroll : true, layout : "border", items : [{ xtype : "component", region : "north", autoEl : { tag : "iframe", src : "/WONKA/", width : "100%", style : { height : "100%"}}}], listeners : { 'render' : function() {
			_g.initialiseDOMComponent();
		}}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
		this.load();
	}
	,getIframe: function() {
		var dom = this.getComponent().el.dom;
		var frames = dom.getElementsByTagName("iframe");
		var frame = frames[0];
		return frame;
	}
	,onFocus: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
		this.getApplication().getToolBar().add({ html : "Ligands", handler : function() {
			_g.getFrame().contentWindow.show_one("all-ph4","viewer-one","all-ph4");
		}, iconCls : "x-btn-blast", tooltip : { dismissDelay : 10000, text : "Ligands"}});
		this.getApplication().getToolBar().add({ html : "Residues", handler : function() {
			_g.getFrame().contentWindow.show_one("max-res","viewer-one","res-shows","max_shift");
		}, iconCls : "x-btn-blast", tooltip : { dismissDelay : 10000, text : "Ligands"}});
		this.getApplication().getToolBar().add({ html : "Waters", handler : function() {
			_g.getFrame().contentWindow.show_one("key-water","viewer-one","water-shows","key_waters");
		}, iconCls : "x-btn-blast", tooltip : { dismissDelay : 10000, text : "Ligands"}});
		this.getApplication().getToolBar().add({ html : "Sites", handler : function() {
			_g.getFrame().contentWindow.show_one("mol-clusts","viewer-one","clust-shows","mol_clusts");
		}, iconCls : "x-btn-blast", tooltip : { dismissDelay : 10000, text : "Ligands"}});
		if(this.molContainer != null) this.attachMolContainerToIframe();
	}
	,onBlur: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onBlur.call(this);
		if(this.molContainer != null) {
			var container = this.getApplication().getOutlineTree("DEFAULT").el.dom;
			container.appendChild(this.molContainer);
			container.childNodes[1].style.display = "block";
			this.getFrame().contentDocument.body.appendChild(this.molContainer);
		}
	}
	,attachMolContainerToIframe: function() {
		var container = this.getApplication().getOutlineTree("DEFAULT").el.dom;
		container.appendChild(this.molContainer);
		container.childNodes[1].style.display = "None";
	}
	,attachMolContainerToOutline: function() {
		var container = this.getApplication().getOutlineTree("DEFAULT").el.dom;
		container.appendChild(this.molContainer);
		container.childNodes[1].style.display = "None";
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.WONKAWO) , saturn.client.workspace.WONKAWO);
		var obj;
		obj = js.Boot.__cast(w0.getObject() , saturn.core.WONKASession);
		this.setTitle(w0.getName());
		this.load();
	}
	,load: function() {
		var _g = this;
		if(this.getActiveObjectId() != null) {
			var w0;
			w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.WONKAWO) , saturn.client.workspace.WONKAWO);
			var obj;
			obj = js.Boot.__cast(w0.getObject() , saturn.core.WONKASession);
			if(obj != null && obj.src != null) this.getIframe().src = obj.src;
		}
		var configure = null;
		configure = function() {
			var dom = _g.getComponent().el.dom;
			var frames = dom.getElementsByTagName("iframe");
			var frame = frames[0];
			var navbar = frame.contentDocument.getElementsByClassName("navbar")[0];
			if(navbar != null) {
				navbar.style.display = "None";
				frame.contentDocument.body.style.paddingTop = "0px";
				var molContainer = frame.contentDocument.getElementById("mol-container");
				if(molContainer != null) {
					_g.moveComponents();
					return;
				}
			}
			haxe.Timer.delay(configure,250);
		};
		configure();
	}
	,getFrame: function() {
		var frames = this.getComponent().el.dom.getElementsByTagName("iframe");
		var frame = frames[0];
		return frame;
	}
	,moveComponents: function() {
		var dom = this.getComponent().el.dom;
		var dwin = window;
		var frame = this.getFrame();
		frame.contentWindow.app = dwin.app;
		var navbar = frame.contentDocument.getElementsByClassName("navbar")[0];
		this.molContainer = frame.contentDocument.getElementById("mol-container");
		this.molContainer.style.overflow = "auto";
		this.molContainer.style.height = "100%";
		this.molContainer.childNodes[15].style = [];
		var aElems = this.molContainer.getElementsByTagName("a");
		var _g = 0;
		while(_g < aElems.length) {
			var aElem = aElems[_g];
			++_g;
			aElem.style.overflow = "";
			aElem.style.position = "";
			aElem.style.top = "";
			aElem.style.left = "";
			aElem.style.cursor = "";
			var elems = aElem.getElementsByTagName("img");
			if(elems != null && elems.length > 0) {
				var imgElem = elems[0];
				imgElem.setAttribute("onclick","app.getActiveProgram().getFrame().contentWindow." + imgElem.getAttribute("onclick"));
			}
		}
		var ddoc = window.document;
		var oldFunc = ($_=frame.contentDocument,$bind($_,$_.getElementById));
		frame.contentDocument.getElementById = function(id) {
			var oldFuncBind = oldFunc.bind(frame.contentDocument);
			var objs = oldFuncBind(id);
			if(objs == null || objs.length == 0) objs = ddoc.getElementById(id);
			return objs;
		};
		this.attachMolContainerToIframe();
		var tabPanel = frame.contentDocument.getElementById("first-div");
		tabPanel.style.height = "100%";
		tabPanel.getElementsByTagName("div")[0].style.height = "";
		tabPanel.childNodes[5].style.height = "100%";
		tabPanel.childNodes[5].style.overflow = "auto";
		var header1 = frame.contentDocument.getElementsByTagName("h1")[0];
		header1.style.display = "None";
		var btGroup = tabPanel.getElementsByTagName("div")[0].childNodes[1].style.display = "None";
		var ids = ["key-water-div","key-frag-div","mol-clusts-div","key-ring-div","key-water-div","coll-water-div","key-ph4-div","all-ph4-div","oo-ph4-div","oo-frag-div","max-res-div"];
		var _g1 = 0;
		while(_g1 < ids.length) {
			var id1 = ids[_g1];
			++_g1;
			var elem = frame.contentDocument.getElementById(id1);
			var h3 = elem.childNodes[1];
			h3.style.marginTop = "0px";
			h3.style.marginBottom = "0px";
		}
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,__class__: saturn.client.programs.WONKA
});
saturn.client.workspace.WebPageWorkspaceObject = $hxClasses["saturn.client.workspace.WebPageWorkspaceObject"] = function(object,name) {
	if(object == null) object = new saturn.client.workspace.WebPage();
	if(name == null) name = "Web Page";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.WebPageWorkspaceObject.__name__ = ["saturn","client","workspace","WebPageWorkspaceObject"];
saturn.client.workspace.WebPageWorkspaceObject.getNewMenuText = function() {
	return "Web Page";
};
saturn.client.workspace.WebPageWorkspaceObject.getDefaultFolderName = function() {
	return "Web Pages";
};
saturn.client.workspace.WebPageWorkspaceObject.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.WebPageWorkspaceObject.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.WebPageWorkspaceObject
});
saturn.client.programs.WebPageViewer = $hxClasses["saturn.client.programs.WebPageViewer"] = function() {
	this.pageUrl = "";
	this.internalFrameId = "INTERNAL_FRAME";
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.WebPageViewer.__name__ = ["saturn","client","programs","WebPageViewer"];
saturn.client.programs.WebPageViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.WebPageViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	theComponent: null
	,internalFrameId: null
	,pageUrl: null
	,emptyInit: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		var self = this;
		this.theComponent = Ext.create("Ext.panel.Panel",{ width : "100%", height : "95%", autoScroll : true, layout : "fit", items : [{ xtype : "component", itemId : this.internalFrameId, autoEl : { tag : "iframe"}}], listeners : { 'render' : function() {
			self.initialiseDOMComponent();
		}}});
	}
	,initialiseDOMComponent: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.initialiseDOMComponent.call(this);
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		this.getApplication().hideMiddleSouthPanel();
		var self = this;
		this.getApplication().getEditMenu().add({ text : "Set URL", hidden : false, handler : function() {
			Ext.Msg.prompt("Set URL","Enter URL",function(btn,text) {
				if(btn == "ok") {
					self.setURL(text);
					(js.Boot.__cast((js.Boot.__cast(self.getActiveObject(saturn.client.workspace.WebPageWorkspaceObject) , saturn.client.workspace.WebPageWorkspaceObject)).getObject() , saturn.client.workspace.WebPage)).setURL(text);
				}
			});
		}});
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		var w0;
		w0 = js.Boot.__cast(saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.WebPageWorkspaceObject) , saturn.client.workspace.WebPageWorkspaceObject);
		var webPage;
		webPage = js.Boot.__cast(w0.getObject() , saturn.client.workspace.WebPage);
		var url = webPage.getURL();
		if(url == null || url == "" || url == "undefined") {
			var location = window.location;
			url = location.protocol + "//" + location.hostname + ":" + location.port + "/" + "HoldingPage.html";
		}
		this.setURL(url);
		this.setTitle(w0.getName());
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,setURL: function(url) {
		var element = this.theComponent.items.items[0];
		if(element != null && url != null) {
			var frame = element.getEl().dom;
			frame.src = url;
		}
		this.pageUrl = url;
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,__class__: saturn.client.programs.WebPageViewer
});
if(!saturn.client.programs.blocks) saturn.client.programs.blocks = {};
saturn.client.programs.blocks.BaseScrollableCanvas = $hxClasses["saturn.client.programs.blocks.BaseScrollableCanvas"] = function(container) {
	this.fitToArea = false;
	this.renderSVG = false;
	this.theLastXPosition = 0;
	this.theViewPortXUnits = 0;
	this.theMaxIntensity = -1;
	this.lastPosition = 0;
	this.drawingWidth = -1;
	this.drawingHeight = -1;
	this.maximumCanvasWidth = 30000;
	this.defaultDrawingHeight = 300;
	this.defaultReadingSeparation = 2;
	this.keyCanvas = null;
	this.headerCanvas = null;
	this.xaxisCanvas = null;
	this.annotationCanvas = null;
	this.overlayCanvas = null;
	this.scrollCanvas = null;
	this.graphCanvas = null;
	this.container = container;
	this.lines = [];
};
saturn.client.programs.blocks.BaseScrollableCanvas.__name__ = ["saturn","client","programs","blocks","BaseScrollableCanvas"];
saturn.client.programs.blocks.BaseScrollableCanvas.prototype = {
	graphCanvas: null
	,scrollCanvas: null
	,overlayCanvas: null
	,annotationCanvas: null
	,xaxisCanvas: null
	,headerCanvas: null
	,keyCanvas: null
	,container: null
	,defaultReadingSeparation: null
	,defaultDrawingHeight: null
	,maximumCanvasWidth: null
	,drawingHeight: null
	,drawingWidth: null
	,lastPosition: null
	,theMaxIntensity: null
	,theLeftMargin: null
	,theRightMargin: null
	,theTopMargin: null
	,theBottomMargin: null
	,theXUnitSize: null
	,theYUnitSize: null
	,theGraphWidth: null
	,theGraphHeight: null
	,theTotalWidth: null
	,theYIntervalDivisions: null
	,theReadingsCount: null
	,theLastScrollBarXPos: null
	,theLastScrollBarYPos: null
	,theScrollBarBoxHeight: null
	,theScrollBarBoxWidth: null
	,theStartingXPosition: null
	,theViewPortXUnits: null
	,theLastXPosition: null
	,theLongestYLabel: null
	,showXAxisLabels: null
	,showXTicks: null
	,renderSVG: null
	,svgGraphCanvas: null
	,fitToArea: null
	,theXInternalDivisions: null
	,keyCanvasRequiredHeight: null
	,lines: null
	,getXUnitSize: function() {
		return this.theXUnitSize;
	}
	,setFitToArea: function(fitToArea) {
		this.fitToArea = fitToArea;
	}
	,render: function() {
		this.renderScrollBar();
		this.installScrollBarListeners();
		this.updateGraphArea();
	}
	,updateGraphArea: function() {
		this.renderGraph();
		this.renderXAxis();
		this.renderXLabels();
		this.renderYAxis();
		this.renderYAxisLabels();
		this.renderKey();
	}
	,renderKey: function() {
		this.getKeyCanvasContext().clearRect(0,0,this.keyCanvas.width,this.keyCanvas.height);
	}
	,renderGraph: function() {
		if(this.lastPosition > this.theLastXPosition) this.lastPosition = this.theLastXPosition;
		var width = this.graphCanvas.width;
		var height = this.graphCanvas.height;
		var ctx = this.graphCanvas.getContext("2d",null);
		ctx.clearRect(0,0,width,height);
		this.renderData();
		var lastIPosition = 0;
		var lineX1 = -1;
		var lineY1 = -1;
		var lineX2 = -1;
		var lineY2 = -1;
		var overlayCtx = this.overlayCanvas.getContext("2d",null);
		overlayCtx.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height);
		var annotationCtx = this.getAnnotationContext();
		annotationCtx.clearRect(0,0,this.annotationCanvas.width,this.annotationCanvas.height);
		this.paintLines();
	}
	,renderData: function() {
	}
	,renderXAxis: function() {
		var ctx = this.getXGraphCanvasContext();
		ctx.save();
		ctx.beginPath();
		ctx.lineWidth = 1;
		ctx.moveTo(this.theLeftMargin - 1,0);
		ctx.lineTo(this.theLeftMargin + this.theGraphWidth - 1,0);
		ctx.stroke();
		ctx.restore();
	}
	,renderYAxis: function() {
		var ctx = this.getGraphCanvasContext();
		ctx.save();
		ctx.beginPath();
		ctx.lineWidth = 1;
		ctx.moveTo(this.theLeftMargin - 0.5,this.theTopMargin);
		ctx.lineTo(this.theLeftMargin - 0.5,this.theGraphHeight + this.theTopMargin);
		ctx.stroke();
		ctx.restore();
	}
	,renderYAxisLabels: function() {
		var ctx = this.getGraphCanvasContext();
		var labels = this.getYAxisLabels();
		var mMetrics = ctx.measureText("M");
		var _g1 = 0;
		var _g = labels.length;
		while(_g1 < _g) {
			var i = _g1++;
			var label = labels[i];
			var y_pos = this.theYUnitSize * i;
			y_pos = y_pos + this.theYUnitSize / 2 - mMetrics.width / 2;
			var yLabelMetrics = ctx.measureText(label == null?"null":"" + label);
			ctx.fillText(label,this.theLeftMargin - yLabelMetrics.width - 2 - 2,this.theGraphHeight + this.theTopMargin - y_pos - 1);
		}
	}
	,setRenderXLabels: function(render) {
		this.showXAxisLabels = render;
	}
	,renderXLabels: function() {
		var ctx = this.getXGraphCanvasContext();
		ctx.clearRect(0,3,this.xaxisCanvas.width,20);
		this.showXTicks = true;
		if(this.showXTicks) {
			var j = this.lastPosition;
			var tickDivisions = 10;
			var magnitude = Math.pow(tickDivisions,Math.floor(Math.log(this.theGraphWidth / this.theXUnitSize) / Math.log(tickDivisions)));
			var x = this.theLeftMargin + this.theXUnitSize / 2;
			var _g1 = this.lastPosition;
			var _g = this.theReadingsCount;
			while(_g1 < _g) {
				var i = _g1++;
				var pos = i + 1;
				if(x > this.theGraphWidth + this.theLeftMargin) break; else if(pos == 1 || pos % magnitude == 0) {
					var posStr;
					if(pos == null) posStr = "null"; else posStr = "" + pos;
					var metrics = ctx.measureText(posStr);
					ctx.fillText(posStr,x - metrics.width / 2,10);
				}
				x += this.theXUnitSize;
			}
		}
		if(this.showXAxisLabels) {
			var labels = this.getXAxisLabels();
			var _g11 = this.lastPosition;
			var _g2 = labels.length;
			while(_g11 < _g2) {
				var i1 = _g11++;
				var correctedI = i1 - this.lastPosition;
				var label = labels[i1];
				var metrics1 = ctx.measureText(label);
				var x_pixel_pos;
				x_pixel_pos = js.Boot.__cast(this.theXUnitSize * correctedI + this.theLeftMargin , Float);
				if(x_pixel_pos + this.theXUnitSize > this.theGraphWidth + this.theLeftMargin) break;
				x_pixel_pos = x_pixel_pos + this.theXUnitSize / 2 - metrics1.width / 2;
				ctx.fillText(labels[i1],x_pixel_pos,20);
			}
		}
	}
	,getXAxisLabels: function() {
		return [];
	}
	,getXAxisCanvasHeight: function() {
		return 25;
	}
	,getScrollCanvasHeight: function() {
		return this.getScrollBoxHeight();
	}
	,getScrollBoxHeight: function() {
		return 35;
	}
	,getBottomPanelHeight: function() {
		return this.getScrollCanvasHeight() + this.getXAxisCanvasHeight();
	}
	,configureXReadingCounts: function() {
		this.theReadingsCount = 1000;
	}
	,getYAxisLabels: function() {
		return [];
	}
	,configure: function() {
		this.theTopMargin = 0;
		this.recreateCanvasElements();
		var width = this.graphCanvas.width;
		var height = this.graphCanvas.height;
		this.configureXReadingCounts();
		this.configureLongestYLabel();
		var ctx = this.graphCanvas.getContext("2d",null);
		var yTextMetrics = ctx.measureText(Std.string(this.theLongestYLabel));
		this.theBottomMargin = 0;
		this.theLeftMargin = 5 + yTextMetrics.width + 2;
		this.theRightMargin = 20;
		this.theGraphHeight = height - this.theTopMargin - this.theBottomMargin;
		this.theGraphWidth = width - this.theLeftMargin - this.theRightMargin;
		if(this.showXAxisLabels) {
			var metrics = ctx.measureText("M");
			if(this.fitToArea || this.theXUnitSize < metrics.width) this.theXUnitSize = metrics.width;
		} else if(this.fitToArea) this.theXUnitSize = this.theGraphWidth / this.theReadingsCount;
		this.theTotalWidth = this.theXUnitSize * this.theReadingsCount;
		this.theViewPortXUnits = this.theGraphWidth / this.theXUnitSize | 0;
		this.theLastXPosition = this.theReadingsCount - this.theViewPortXUnits | 0;
		if(this.theLastXPosition < 0) this.theLastXPosition = 0;
		this.lastPosition = 0;
		this.theXInternalDivisions = this.theViewPortXUnits / 10 | 0;
	}
	,configureLongestYLabel: function() {
		this.theLongestYLabel = "Hello World";
	}
	,recreateCanvasElements: function() {
		this.removeCanvasElements();
		this.createCanvasElements();
	}
	,removeCanvasElements: function() {
		var container = this.getDomElement();
		if(this.getGraphCanvas() != null) container.removeChild(this.getGraphCanvas());
		if(this.getScrollCanvas() != null) container.removeChild(this.getScrollCanvas());
		if(this.getOverlayCanvas() != null) container.removeChild(this.getOverlayCanvas());
		if(this.getAnnotationCanvas() != null) container.removeChild(this.getAnnotationCanvas());
	}
	,getDomElement: function() {
		return this.container;
	}
	,getGraphCanvas: function() {
		return this.graphCanvas;
	}
	,getAnnotationCanvas: function() {
		return this.annotationCanvas;
	}
	,getGraphCanvasContext: function() {
		if(this.renderSVG) return this.svgGraphCanvas; else return this.graphCanvas.getContext("2d",null);
	}
	,getKeyCanvasContext: function() {
		if(this.renderSVG) return this.svgGraphCanvas; else return this.keyCanvas.getContext("2d",null);
	}
	,getXGraphCanvasContext: function() {
		if(this.renderSVG) return this.svgGraphCanvas; else return this.xaxisCanvas.getContext("2d",null);
	}
	,getScrollCanvas: function() {
		return this.scrollCanvas;
	}
	,getOverlayCanvas: function() {
		return this.overlayCanvas;
	}
	,getAnnotationContext: function() {
		if(this.renderSVG) return this.svgGraphCanvas; else return this.annotationCanvas.getContext("2d",null);
	}
	,createCanvasElements: function() {
		this.configureKeyCanvasDimensions();
		this.keyCanvas = window.document.createElement("canvas");
		this.keyCanvas.width = this.getContainerWidth();
		this.keyCanvas.height = this.getKeyCanvasHeight();
		this.headerCanvas = window.document.createElement("canvas");
		this.headerCanvas.width = this.getContainerWidth();
		this.headerCanvas.height = 20;
		this.container.appendChild(this.keyCanvas);
		this.container.appendChild(this.headerCanvas);
		var canvasContainer = window.document.createElement("div");
		canvasContainer.style.overflowY = "auto";
		var availableHeight = this.container.clientHeight - this.getBottomPanelHeight() - this.getTopCanvasHeight() - this.getKeyCanvasHeight();
		var requiredHeight = this.getGraphHeight() + this.theTopMargin;
		canvasContainer.style.height = Std.string(Math.min(availableHeight,requiredHeight) + "px");
		this.container.appendChild(canvasContainer);
		var scrollContainer = window.document.createElement("div");
		this.container.appendChild(scrollContainer);
		this.graphCanvas = window.document.createElement("canvas");
		var width = this.container.style.width;
		this.graphCanvas.width = this.getContainerWidth();
		this.graphCanvas.height = Std["int"](this.getGraphHeight() + this.theTopMargin);
		this.overlayCanvas = window.document.createElement("canvas");
		this.overlayCanvas.width = this.getContainerWidth();
		this.overlayCanvas.height = Std["int"](this.getGraphHeight() + this.theTopMargin);
		this.overlayCanvas.style.position = "relative";
		this.overlayCanvas.style.background = "transparent";
		var offset = Std["int"](this.getGraphHeight() + this.theTopMargin);
		this.overlayCanvas.style.marginTop = "-" + offset + "px";
		this.annotationCanvas = window.document.createElement("canvas");
		this.annotationCanvas.width = this.getContainerWidth();
		this.annotationCanvas.height = Std["int"](this.getGraphHeight() + this.theTopMargin);
		this.annotationCanvas.style.position = "relative";
		this.annotationCanvas.style.marginTop = "-" + offset + "px";
		this.annotationCanvas.style.background = "transparent";
		this.scrollCanvas = window.document.createElement("canvas");
		this.scrollCanvas.width = this.getContainerWidth();
		this.scrollCanvas.height = this.getScrollCanvasHeight();
		this.scrollCanvas.style.display = "block";
		canvasContainer.appendChild(this.graphCanvas);
		canvasContainer.appendChild(this.annotationCanvas);
		canvasContainer.appendChild(this.overlayCanvas);
		this.xaxisCanvas = window.document.createElement("canvas");
		this.xaxisCanvas.width = this.getContainerWidth();
		this.xaxisCanvas.height = this.getXAxisCanvasHeight();
		this.xaxisCanvas.style.display = "block";
		scrollContainer.appendChild(this.xaxisCanvas);
		scrollContainer.appendChild(this.scrollCanvas);
		this.installOverlayListeners();
	}
	,getTopCanvasHeight: function() {
		return 20;
	}
	,getKeyCanvasHeight: function() {
		return this.keyCanvasRequiredHeight;
	}
	,installOverlayListeners: function() {
		var _g = this;
		var fireOverlayEvent = function(e,clicked) {
			if(clicked == null) clicked = false;
			var ne = _g.convertToBaseCanvasEvent(e);
			ne.clicked = clicked;
			var ctx = _g.overlayCanvas.getContext("2d",null);
			ctx.clearRect(0,0,_g.overlayCanvas.width,_g.overlayCanvas.height);
			if(ne.offsetX < _g.theLeftMargin || ne.offsetX > _g.theGraphWidth + _g.theLeftMargin) return;
			_g.overlayEvent(ne);
		};
		this.overlayCanvas.onmousemove = function(e1) {
			fireOverlayEvent(e1,false);
		};
		this.overlayCanvas.onmouseup = function(e2) {
			fireOverlayEvent(e2,true);
		};
	}
	,getColumnFromEvent: function(event) {
		var column = (event.offsetX - this.theLeftMargin) / this.theXUnitSize | 0;
		column += this.lastPosition;
		return column;
	}
	,getRowFromEvent: function(event) {
		var row = (event.offsetY - this.theTopMargin) / this.theYUnitSize | 0;
		return row;
	}
	,markEvent: function(event,colour) {
		if(colour == null) colour = "red";
		this.mark(event.column,event.row,colour);
		var annotationCtx = this.getAnnotationContext();
		annotationCtx.clearRect(0,0,this.getAnnotationCanvas().width,this.getAnnotationCanvas().height);
		this.paintLines();
	}
	,mark: function(column,row,colour) {
		if(colour == null) colour = "red";
		var removed = false;
		var _g = 0;
		var _g1 = this.lines;
		while(_g < _g1.length) {
			var line = _g1[_g];
			++_g;
			if(line.column == column && line.row == row) {
				var l = this.lines.length;
				HxOverrides.remove(this.lines,line);
				removed = true;
				break;
			}
		}
		if(!removed) this.lines.push({ colour : colour, column : column, row : row});
		saturn.client.WorkspaceApplication.getApplication().debug("Lines: " + this.lines.length);
	}
	,paintLines: function() {
		var annotationCtx = this.getAnnotationContext();
		var _g = 0;
		var _g1 = this.lines;
		while(_g < _g1.length) {
			var line = _g1[_g];
			++_g;
			if(line.column < this.lastPosition) continue;
			var x = this.theLeftMargin + (line.column - this.lastPosition) * this.theXUnitSize + this.theXUnitSize / 2;
			var y1 = this.theTopMargin + this.theYUnitSize * (line.row + 1) - 1;
			var y2 = this.theTopMargin + this.theYUnitSize * line.row;
			annotationCtx.beginPath();
			annotationCtx.strokeStyle = line.colour;
			annotationCtx.moveTo(x,y1);
			annotationCtx.lineTo(x,y2);
			annotationCtx.stroke();
			annotationCtx.closePath();
		}
	}
	,overlayEvent: function(event) {
		if(event.clicked && event.button == 0) this.markEvent(event);
	}
	,getContainerHeight: function() {
		var height = this.container.style.clientHeight;
		if(height == null) return this.container.parentElement.style.clientHeight; else return height;
	}
	,getGraphHeight: function() {
		return 300;
	}
	,getContainerWidth: function() {
		return this.container.clientWidth - 40 | 0;
	}
	,onFocus: function() {
	}
	,onBlur: function() {
	}
	,renderScrollBar: function(moveX,forwards) {
		var width = this.scrollCanvas.width;
		var height = this.scrollCanvas.height;
		var ctx = this.scrollCanvas.getContext("2d",null);
		ctx.clearRect(0,0,width,height);
		if(this.theGraphWidth >= this.theTotalWidth) return;
		var shownRatio = this.theGraphWidth / this.theTotalWidth;
		var padding = 5;
		var rectWidth = (this.theGraphWidth - padding * 2) * shownRatio;
		ctx.save();
		ctx.beginPath();
		ctx.strokeStyle = "black";
		ctx.rect(this.theLeftMargin,0,this.theGraphWidth,this.getScrollBoxHeight());
		ctx.stroke();
		ctx.restore();
		this.theScrollBarBoxWidth = rectWidth;
		this.theScrollBarBoxHeight = height - padding * 2;
		var leftStop = padding + this.theLeftMargin;
		var rightStop = width - this.theRightMargin - this.theScrollBarBoxWidth - padding;
		if(moveX != null) {
			if(forwards) this.theLastScrollBarXPos = this.theLastScrollBarXPos + moveX; else this.theLastScrollBarXPos = this.theLastScrollBarXPos - moveX;
			if(this.theLastScrollBarXPos < leftStop) this.theLastScrollBarXPos = leftStop; else if(this.theLastScrollBarXPos > rightStop) this.theLastScrollBarXPos = rightStop;
		} else {
			if(this.lastPosition > 0) {
				var progress = this.lastPosition / this.theReadingsCount;
				this.theLastScrollBarXPos = this.theGraphWidth * progress + this.theLeftMargin;
				this.theLastScrollBarYPos = padding;
			} else {
				this.theLastScrollBarXPos = leftStop;
				this.theLastScrollBarYPos = padding;
			}
			if(this.theLastScrollBarXPos < leftStop) this.theLastScrollBarXPos = leftStop; else if(this.theLastScrollBarXPos > rightStop) this.theLastScrollBarXPos = rightStop;
		}
		ctx.save();
		ctx.beginPath();
		ctx.strokeStyle = "blue";
		ctx.rect(this.theLastScrollBarXPos,this.theLastScrollBarYPos,this.theScrollBarBoxWidth,this.theScrollBarBoxHeight);
		ctx.fill();
		ctx.restore();
	}
	,installScrollBarListeners: function() {
		var _g = this;
		var isInHitBox = function(e) {
			return e.offsetX >= _g.theLastScrollBarXPos && e.offsetX <= _g.theLastScrollBarXPos + _g.theScrollBarBoxWidth && e.offsetY >= _g.theLastScrollBarYPos && e.offsetY <= _g.theLastScrollBarYPos + _g.theScrollBarBoxHeight;
		};
		var lastX = this.theLeftMargin + 10;
		var lastY = 0;
		var onMouseMove = function(e1) {
			e1 = _g.convertToBaseCanvasEvent(e1);
			var forwards = true;
			var diff = _g.theReadingsCount - _g.lastPosition;
			if(e1.offsetX < lastX) forwards = false; else {
			}
			var xMove = Math.abs(lastX - e1.offsetX);
			var xScrollUnits = (_g.theGraphWidth - 10) / _g.theReadingsCount;
			var numRequested = Math.ceil(xMove / xScrollUnits);
			lastX = e1.offsetX;
			lastY = e1.offsetY;
			var oldLastPosition = _g.lastPosition;
			if(forwards) _g.lastPosition += numRequested; else _g.lastPosition -= numRequested;
			if(_g.lastPosition < 0) _g.lastPosition = 0;
			_g.renderScrollBar();
			window.console.log("lastX: " + lastX + "/" + Std.string(e1.offsetX));
			window.console.log("xMove: " + xMove + "/" + xScrollUnits);
			window.console.log("Moved: " + numRequested);
			if(_g.lastPosition != oldLastPosition) _g.updateGraphArea();
		};
		this.scrollCanvas.onmousedown = function(evt) {
			var e2 = _g.convertToBaseCanvasEvent(evt);
			if(isInHitBox(e2)) {
				lastX = e2.offsetX;
				lastY = e2.offsetY;
				_g.scrollCanvas.onmousemove = onMouseMove;
			} else onMouseMove(evt);
		};
		this.scrollCanvas.onmouseup = function(e3) {
			_g.scrollCanvas.onmousemove = null;
		};
	}
	,convertToBaseCanvasEvent: function(e) {
		var ne = { offsetX : 0., offsetY : 0., column : 0, row : 0, source : null, button : -1, clicked : false};
		if(e == null) e = new Event("");
		var target;
		if(e.target) target = e.target; else target = e.srcElement;
		var rect = target.getBoundingClientRect();
		ne.offsetX = e.clientX - rect.left;
		ne.offsetY = e.clientY - rect.top;
		ne.column = this.getColumnFromEvent(ne);
		ne.row = this.getRowFromEvent(ne);
		ne.source = e;
		ne.button = e.button;
		return ne;
	}
	,exportSVG: function() {
		var height = this.getKeyCanvasHeight() + this.getXAxisCanvasHeight() + this.getGraphHeight() + this.theTopMargin;
		var width = this.theLeftMargin + this.theXUnitSize * this.theReadingsCount + this.theRightMargin;
		this.svgGraphCanvas = new C2S(width,height);
		this.renderSVG = true;
		var canvasWidth = this.theGraphWidth;
		var originalLastPosition = this.lastPosition;
		this.lastPosition = 0;
		this.theGraphWidth = this.theXUnitSize * this.theReadingsCount;
		this.renderKey();
		this.getGraphCanvasContext().save();
		this.getGraphCanvasContext().translate(0,this.getKeyCanvasHeight());
		this.renderYAxis();
		this.renderYAxisLabels();
		this.renderData();
		this.paintLines();
		this.getGraphCanvasContext().restore();
		this.getGraphCanvasContext().save();
		this.getGraphCanvasContext().translate(0,this.getKeyCanvasHeight() + this.theGraphHeight + this.theTopMargin);
		this.renderXAxis();
		this.renderXLabels();
		this.getGraphCanvasContext().restore();
		this.renderSVG = false;
		var d = this.svgGraphCanvas;
		saturn.client.WorkspaceApplication.getApplication().saveTextFile(d.getSerializedSvg(true),"Test.svg");
		this.theGraphWidth = canvasWidth;
		this.lastPosition = originalLastPosition;
	}
	,configureKeyCanvasDimensions: function() {
	}
	,getKeyCanvas: function() {
		return this.keyCanvas;
	}
	,__class__: saturn.client.programs.blocks.BaseScrollableCanvas
};
saturn.client.programs.blocks.BaseTable = $hxClasses["saturn.client.programs.blocks.BaseTable"] = function(columns,data,title,fixedRowHeight,hideTitle,autoAddNewRow) {
	if(autoAddNewRow == null) autoAddNewRow = true;
	if(hideTitle == null) hideTitle = false;
	this.columns = columns;
	this.data = data;
	this.title = title;
	this.fixedRowHeight = fixedRowHeight;
	this.hideTitle = hideTitle;
	this.enableAutoAddNewRow = autoAddNewRow;
	this.customContextItems = [];
};
saturn.client.programs.blocks.BaseTable.__name__ = ["saturn","client","programs","blocks","BaseTable"];
saturn.client.programs.blocks.BaseTable.__interfaces__ = [saturn.client.BuildingBlock];
saturn.client.programs.blocks.BaseTable.prototype = {
	component: null
	,name: null
	,columns: null
	,model: null
	,modelName: null
	,store: null
	,data: null
	,modelFields: null
	,cellClicked: null
	,title: null
	,editListener: null
	,fixedRowHeight: null
	,errorColumns: null
	,customContextItems: null
	,hideTitle: null
	,enableAutoAddNewRow: null
	,addCustomContextItem: function(item) {
		this.customContextItems.push(item);
	}
	,setFixedRowHeight: function(height) {
		this.fixedRowHeight = height;
	}
	,getColumns: function() {
		return this.columns;
	}
	,onFocus: function() {
	}
	,onBlur: function() {
	}
	,getComponent: function() {
		return this.component;
	}
	,getRawComponent: function() {
		return this.getComponent();
	}
	,getModelFields: function() {
		return this.modelFields;
	}
	,setEditListener: function(listener) {
		this.editListener = listener;
	}
	,onEdit: function() {
		this.editListener();
	}
	,addListener: function(callBack) {
		this.component.on("containerClick",callBack);
	}
	,reconfigure: function(tableDef) {
		if(tableDef != null) {
			this.columns = tableDef.columnDefs;
			this.data = tableDef.data;
			this.title = tableDef.title;
		}
		this.build();
	}
	,build: function() {
		var _g = this;
		this.name = "store_" + Std.string(Ext.id());
		this.modelName = "model" + Std.string(Ext.id());
		this.modelFields = [];
		if(this.columns != null) {
			var _g1 = 0;
			var _g11 = this.columns;
			while(_g1 < _g11.length) {
				var column = _g11[_g1];
				++_g1;
				this.modelFields.push(column.dataIndex);
			}
		}
		if(this.store == null) {
			this.model = Ext.define(this.modelName,{ extend : "Ext.data.Model", fields : this.modelFields});
			this.store = Ext.create("Ext.data.Store",{ storeId : this.name, model : this.model, data : { 'items' : this.data}, proxy : { type : "memory", reader : { type : "json", rootProperty : "items"}}});
			this.component = Ext.create("Ext.grid.Panel",{ store : this.store, columns : this.columns, width : "100%", region : "center", scrollable : true, flex : 1, title : this.title, preventHeader : this.hideTitle, plugins : [Ext.create("Ext.grid.plugin.CellEditing",{ clicksToEdit : 2}),"gridfilters"], selType : "cellmodel", viewConfig : { enableTextSelection : true, stripeRows : false, listeners : { viewready : function(view) {
				view.keyMap = new Ext.KeyMap(view.getEl(),[{ key : "v", ctrl : true, fn : function(keyCode,e) {
					var pasteZone;
					var _this = window.document;
					pasteZone = _this.createElement("textarea");
					pasteZone.style.position = "absolute";
					pasteZone.style.top = "-1000px";
					pasteZone.style.left = "-1000px";
					window.document.body.appendChild(pasteZone);
					window.setTimeout(function() {
						_g.performPaste(pasteZone.value,_g.cellClicked);
						window.document.body.removeChild(pasteZone);
					},100);
					pasteZone.focus();
					pasteZone.select();
				}}]);
				view.tooltip = Ext.create("Ext.tip.ToolTip",{ target : view.el, delegate : view.itemSelector, trackMouse : true, renderTo : Ext.getBody(), listeners : { beforeshow : (function($this) {
					var $r;
					var updateTipBody = function(tip) {
						var msg = null;
						var record = view.getRecord(tip.triggerElement);
						if(_g.errorColumns != null) {
							var _g12 = 0;
							var _g2 = _g.errorColumns;
							while(_g12 < _g2.length) {
								var col = _g2[_g12];
								++_g12;
								var value = record.get(col);
								if(value != null && value != "") {
									msg = value;
									break;
								}
							}
						}
						if(msg == null || msg == "") msg = record.get(_g.columns[0].dataIndex);
						tip.update(msg);
					};
					$r = updateTipBody;
					return $r;
				}(this))}});
			}}, getRowClass : function(record1,rowIndex,rowParams,store) {
				var css = _g.getRecordCSS(record1);
				if(_g.fixedRowHeight != null) {
					if(css == null) css = "";
					css += "saturn-row-fixed-height";
				}
				saturn.client.WorkspaceApplication.getApplication().debug(css);
				return css;
			}}, listeners : { edit : function(editor,e1) {
				_g.autoAddNewRow();
				_g.onEdit();
			}, 'cellcontextmenu' : function(view1,cell,cellIndex,record2,row,rowIndex1,event) {
				var column1 = view1.getHeaderByCell(cell);
				var position = view1.getPositionByEvent(event);
				var columnIndex = position.column;
				var dataIndex = column1.dataIndex;
				var contextMenuItems = [{ text : "Delete Row", handler : function() {
					_g.store.removeAt(rowIndex1);
					_g.autoAddNewRow();
					_g.onEdit();
				}},{ text : "Copy", handler : function() {
					var model = _g.store.getAt(rowIndex1);
					var fields = model.getFields();
					var cb = saturn.client.WorkspaceApplication.getApplication().getClipBoard();
					var cbContents = new saturn.client.programs.blocks.ClipBoardRow();
					var _g13 = 0;
					var _g21 = _g.columns;
					while(_g13 < _g21.length) {
						var column2 = _g21[_g13];
						++_g13;
						if(column2.dataIndex != "id") cbContents.set(column2.dataIndex,model.get(column2.dataIndex));
					}
					cb.setContents(cbContents);
				}},{ text : "Fill down", handler : function() {
					var model1 = _g.store.getAt(rowIndex1);
					var val = model1.get(column1.dataIndex);
					var c = _g.store.count();
					var _g22 = rowIndex1;
					var _g14 = c - 1;
					while(_g22 < _g14) {
						var i = _g22++;
						var row1 = _g.store.getAt(i);
						row1.set(column1.dataIndex,val);
					}
					_g.onEdit();
				}},{ text : "Remove column", handler : function() {
					_g.removeColumn(dataIndex);
				}}];
				var cb1 = saturn.client.WorkspaceApplication.getApplication().getClipBoard();
				var contents = cb1.getContents();
				if(contents != null && js.Boot.__instanceof(contents,saturn.client.programs.blocks.ClipBoardRow)) {
					contextMenuItems.push({ text : "Paste After", handler : function() {
						_g.pasteRow(rowIndex1 + 1);
					}});
					contextMenuItems.push({ text : "Paste Before", handler : function() {
						_g.pasteRow(rowIndex1);
					}});
				}
				var _g15 = 0;
				var _g23 = _g.customContextItems;
				while(_g15 < _g23.length) {
					var item = [_g23[_g15]];
					++_g15;
					contextMenuItems.push({ text : item[0].text, handler : (function(item) {
						return function() {
							item[0].handler(rowIndex1);
						};
					})(item)});
				}
				var contextMenu = Ext.create("Ext.menu.Menu",{ items : contextMenuItems});
				contextMenu.showAt(event.getXY());
				event.stopEvent();
			}, cellclick : function(grid,td,cellIndex1,record3,tr,rowIndex2,e2,eOpts) {
				_g.cellClicked = [cellIndex1,rowIndex2];
				window.console.log("Clicked");
			}}});
		} else {
			this.store.model.addFields(this.modelFields);
			this.store.setData(this.data);
			this.component.reconfigure(this.store,this.columns);
		}
		this.autoAddNewRow();
		return this;
	}
	,autoAddNewRow: function() {
		if(!this.enableAutoAddNewRow) return;
		var storeLen = this.store.count();
		var newRow = true;
		if(storeLen > 0) {
			var record = this.store.getAt(storeLen - 1);
			newRow = !this.isRecordEmpty(record);
		}
		if(newRow) this.addNewRow();
	}
	,addNewRow: function() {
		var model = Ext.create(this.model,{ });
		var _g = 0;
		var _g1 = this.columns;
		while(_g < _g1.length) {
			var colDef = _g1[_g];
			++_g;
			if(colDef.defaultValue != null && colDef.defaultValue != "") model.set(colDef.dataIndex,colDef.defaultValue);
		}
		this.store.insert(this.store.count(),model);
	}
	,isRecordEmpty: function(record) {
		var rowOccupied = false;
		var _g = 0;
		var _g1 = this.columns;
		while(_g < _g1.length) {
			var col = _g1[_g];
			++_g;
			var dataIndex = col.dataIndex;
			if(dataIndex != null && dataIndex != "" && dataIndex != "id") {
				var value = record.get(dataIndex);
				if(value != null && value != "") {
					if(col.defaultValue != null && col.defaultValue != "" && col.defaultValue == value) continue;
					rowOccupied = true;
					return false;
				}
			}
		}
		return !rowOccupied;
	}
	,addColumn: function(columnDef,reconfigure) {
		if(reconfigure == null) reconfigure = true;
		var columnName = columnDef.dataIndex;
		this.columns.push(columnDef);
		this.modelFields.push(columnName);
		this.store.model.addFields([columnName]);
		if(reconfigure) this.component.reconfigure(this.store,this.columns);
	}
	,removeColumn: function(columnName) {
		var _g = 0;
		var _g1 = this.columns;
		while(_g < _g1.length) {
			var column = _g1[_g];
			++_g;
			if(column.dataIndex == columnName) HxOverrides.remove(this.columns,column);
		}
		HxOverrides.remove(this.modelFields,columnName);
		this.store.model.replaceFields(null,[columnName]);
		this.component.reconfigure(this.store,this.columns);
		this.onEdit();
	}
	,promptAddGridColumn: function(cb) {
		var _g = this;
		saturn.client.WorkspaceApplication.getApplication().userValuePrompt("New Row","Add Row",function(columnName) {
			if(columnName != null) {
				_g.addColumn({ text : columnName, dataIndex : columnName, editor : "textfield"});
				if(cb != null) cb();
			}
		},null);
	}
	,getStore: function() {
		return this.store;
	}
	,getSize: function() {
		return this.store.count();
	}
	,performPaste: function(content,index) {
		Ext.suspendLayouts();
		var colCount = this.columns.length;
		var rowSep = "\n";
		if(content.indexOf("\r\n") > -1) rowSep = "\r\n";
		var rows = content.split(rowSep);
		var colClicked = index[0];
		var rowClicked = index[1];
		var currentCol = colClicked;
		var currentRow = rowClicked;
		var storeCount = this.store.count();
		var _g = 0;
		while(_g < rows.length) {
			var row = rows[_g];
			++_g;
			if(row == "") break;
			var cols = row.split("\t");
			var pasteColIndex = 0;
			var newModel;
			if(currentRow > this.store.count() - 1) {
				newModel = Ext.create(this.model,{ });
				this.store.insert(currentRow,newModel);
			} else newModel = this.store.getAt(currentRow);
			currentRow++;
			var _g1 = currentCol;
			while(_g1 < colCount) {
				var col = _g1++;
				var field = this.columns[col].dataIndex;
				var value = cols[pasteColIndex++];
				if(value == null || value == "" && this.columns[col].defaultValue != null && this.columns[col].defaultValue != "") value = this.columns[col].defaultValue;
				if(field != "id") newModel.set(this.columns[col].dataIndex,value); else pasteColIndex++;
				if(pasteColIndex > cols.length - 1) break;
			}
			currentCol = colClicked;
		}
		this.autoAddNewRow();
		Ext.resumeLayouts(false);
		this.onEdit();
	}
	,addRow: function(data) {
		var lastRow = this.store.count() - 1;
		var record = this.store.getAt(lastRow);
		var _g = 0;
		var _g1 = Reflect.fields(data);
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			record.set(field,Reflect.field(data,field));
		}
		this.autoAddNewRow();
	}
	,pasteRow: function(atPosition) {
		var cb = saturn.client.WorkspaceApplication.getApplication().getClipBoard();
		var contents = cb.getContents();
		if(js.Boot.__instanceof(contents,saturn.client.programs.blocks.ClipBoardRow)) {
			saturn.client.WorkspaceApplication.suspendUpdates();
			var tableRowCopy = contents;
			var attributes = tableRowCopy.getContents();
			var model = this.store.insert(atPosition,Ext.create(this.model,{ }))[0];
			var _g = 0;
			var _g1 = this.columns;
			while(_g < _g1.length) {
				var column = _g1[_g];
				++_g;
				if(column.dataIndex != "id") model.set(column.dataIndex,attributes.get(column.dataIndex));
			}
			saturn.client.WorkspaceApplication.resumeUpdates(false);
		}
		this.onEdit();
	}
	,getData: function() {
		return this.storeToData();
	}
	,storeToData: function() {
		var _g = this;
		var data = [];
		this.store.each(function(record) {
			if(_g.isRecordEmpty(record)) return true;
			var model = record.getData();
			var row = { };
			var _g1 = 0;
			var _g2 = _g.columns;
			while(_g1 < _g2.length) {
				var columnDef = _g2[_g1];
				++_g1;
				var field = columnDef.dataIndex;
				if(field != "id") Reflect.setField(row,field,Reflect.field(model,field));
			}
			data.push(row);
			return true;
		});
		return data;
	}
	,getTableDefinition: function() {
		return { columnDefs : this.columns, title : this.title, data : this.storeToData(), raw : null};
	}
	,exportToString: function() {
		var entityStore = this.getStore();
		var entityCount = entityStore.count() - 1;
		var strBuf_b = "";
		var _g = 0;
		var _g1 = this.columns;
		while(_g < _g1.length) {
			var colDef = _g1[_g];
			++_g;
			strBuf_b += Std.string(colDef.text + "\t");
		}
		strBuf_b += "\n";
		var _g2 = 0;
		while(_g2 < entityCount) {
			var i = _g2++;
			var entityModel = entityStore.getAt(i);
			var _g11 = 0;
			var _g21 = this.columns;
			while(_g11 < _g21.length) {
				var field = _g21[_g11];
				++_g11;
				var value = entityModel.get(field.dataIndex);
				if(value == null) value = "";
				strBuf_b += Std.string(value + "\t");
			}
			strBuf_b += "\n";
		}
		return strBuf_b;
	}
	,exportToFile: function(name) {
		var str = this.exportToString();
		saturn.client.WorkspaceApplication.getApplication().saveTextFile(str,name + ".tsv");
	}
	,setErrorColumns: function(columns) {
		this.errorColumns = columns;
	}
	,getErrorColumns: function() {
		return this.errorColumns;
	}
	,getRecordCSS: function(record) {
		var invalid = false;
		if(this.errorColumns != null) {
			var _g = 0;
			var _g1 = this.errorColumns;
			while(_g < _g1.length) {
				var errorColumn = _g1[_g];
				++_g;
				var value = record.get(errorColumn);
				if(value != null && value != "") {
					invalid = true;
					break;
				}
			}
		}
		if(invalid) return "gridrow-invalid"; else return "x-grid-cell";
	}
	,__class__: saturn.client.programs.blocks.BaseTable
};
saturn.client.programs.blocks.ClipBoardRow = $hxClasses["saturn.client.programs.blocks.ClipBoardRow"] = function() {
	this.contents = new haxe.ds.StringMap();
};
saturn.client.programs.blocks.ClipBoardRow.__name__ = ["saturn","client","programs","blocks","ClipBoardRow"];
saturn.client.programs.blocks.ClipBoardRow.prototype = {
	contents: null
	,set: function(key,value) {
		var value1 = value;
		this.contents.set(key,value1);
	}
	,getContents: function() {
		return this.contents;
	}
	,__class__: saturn.client.programs.blocks.ClipBoardRow
};
saturn.client.programs.blocks.GridVarCanvasRenderer = $hxClasses["saturn.client.programs.blocks.GridVarCanvasRenderer"] = function(container) {
	this.cellWidth = 50;
	this.cellHeight = 50;
	saturn.client.programs.blocks.BaseScrollableCanvas.call(this,container);
};
saturn.client.programs.blocks.GridVarCanvasRenderer.__name__ = ["saturn","client","programs","blocks","GridVarCanvasRenderer"];
saturn.client.programs.blocks.GridVarCanvasRenderer.__super__ = saturn.client.programs.blocks.BaseScrollableCanvas;
saturn.client.programs.blocks.GridVarCanvasRenderer.prototype = $extend(saturn.client.programs.blocks.BaseScrollableCanvas.prototype,{
	cellHeight: null
	,cellWidth: null
	,columnOrder: null
	,data: null
	,columnToLabel: null
	,rowOrder: null
	,xLabels: null
	,valueToStyle: null
	,padding: null
	,groupToStyles: null
	,setPadding: function(padding) {
		this.padding = padding;
	}
	,setStyles: function(styles) {
		this.valueToStyle = styles;
	}
	,renderData: function() {
		var ctx = this.getGraphCanvasContext();
		var labels = this.getXAxisLabels();
		var paddingCost;
		if(this.padding && this.theXUnitSize > 1) paddingCost = 1; else paddingCost = 0;
		var height = this.theYUnitSize - 1;
		var _g1 = 0;
		var _g = this.rowOrder.length;
		while(_g1 < _g) {
			var j = _g1++;
			var row = this.rowOrder[j];
			var y = this.theGraphHeight + this.theTopMargin - this.theYUnitSize * (j + 1) + 1;
			var startingX = null;
			var endX = null;
			var lastValue = "</NULL>";
			var _g3 = this.lastPosition;
			var _g2 = labels.length;
			while(_g3 < _g2) {
				var i = _g3++;
				var column = labels[i];
				var x = this.theLeftMargin + this.theXUnitSize * (i - this.lastPosition) + paddingCost;
				var lastPaint = false;
				if(x + this.theXUnitSize > this.theGraphWidth + this.theLeftMargin) {
					if(this.padding) break; else lastPaint = true;
				}
				var value = this.data[i][j];
				var width;
				if(!this.padding) {
					if(lastValue == "</NULL>" && !lastPaint) {
						lastValue = value;
						startingX = x;
						continue;
					} else {
						if(lastValue == value && !lastPaint) {
							endX = x;
							if(i != labels.length - 1) continue;
						}
						if(endX != null) width = endX - startingX + this.theXUnitSize; else width = this.theXUnitSize;
						var t = startingX;
						var tv = lastValue;
						lastValue = value;
						startingX = x;
						endX = null;
						x = t;
						value = tv;
					}
				} else width = this.theXUnitSize - paddingCost;
				if(this.valueToStyle.exists(value)) {
					var _g4 = 0;
					var _g5 = this.valueToStyle.get(value);
					while(_g4 < _g5.length) {
						var style = _g5[_g4];
						++_g4;
						var match = false;
						var _g6 = 0;
						var _g7 = style.columns;
						while(_g6 < _g7.length) {
							var column1 = _g7[_g6];
							++_g6;
							if(column1 == "*" || row == column1) {
								match = true;
								break;
							}
						}
						if(!match) continue;
						if(style.type == "rec") {
							ctx.save();
							ctx.beginPath();
							ctx.strokeStyle = "";
							ctx.fillStyle = style.colour;
							ctx.fillRect(x,y - 1,width,height);
							ctx.stroke();
							ctx.restore();
						} else if(style.type == "line") {
							ctx.save();
							ctx.beginPath();
							ctx.strokeStyle = style.colour;
							var y1 = y + this.theYUnitSize / 2 - 1.5;
							ctx.moveTo(x,y1);
							ctx.lineTo(x + width,y1);
							ctx.stroke();
							ctx.restore();
						}
					}
				}
				if(lastPaint) break;
			}
		}
	}
	,setCellHeight: function(height) {
		this.cellHeight = height;
		this.theYUnitSize = this.cellHeight;
	}
	,setCellWidth: function(width) {
		this.cellWidth = width;
		this.theXUnitSize = width;
	}
	,setColumnOrder: function(columnOrder) {
		this.columnOrder = columnOrder;
		this.xLabels = null;
	}
	,setData: function(data) {
		this.data = data;
	}
	,getXAxisLabels: function() {
		if(this.xLabels == null) {
			this.xLabels = [];
			var _g = 0;
			var _g1 = this.columnOrder;
			while(_g < _g1.length) {
				var column = _g1[_g];
				++_g;
				this.xLabels.push(Reflect.field(this.columnToLabel,column));
			}
		}
		return this.xLabels;
	}
	,getYAxisLabels: function() {
		return this.rowOrder;
	}
	,setColumnKeyToLabels: function(mapping) {
		this.columnToLabel = mapping;
		this.xLabels = null;
	}
	,setRowOrder: function(rowOrder) {
		this.rowOrder = rowOrder;
	}
	,configureXReadingCounts: function() {
		this.theReadingsCount = Reflect.fields(this.columnToLabel).length;
	}
	,configureLongestYLabel: function() {
		this.theLongestYLabel = "";
		var _g = 0;
		var _g1 = this.rowOrder;
		while(_g < _g1.length) {
			var label = _g1[_g];
			++_g;
			if(this.theLongestYLabel.length < label.length) this.theLongestYLabel = label;
		}
	}
	,getGraphHeight: function() {
		return this.cellHeight * this.rowOrder.length | 0;
	}
	,overlayEvent: function(event) {
		saturn.client.programs.blocks.BaseScrollableCanvas.prototype.overlayEvent.call(this,event);
		var column = event.column;
		var ctx = this.headerCanvas.getContext("2d",null);
		var y = 20;
		var x = event.offsetX;
		if(this.columnOrder.length - 1 < column) return;
		var overlayCtx = this.overlayCanvas.getContext("2d",null);
		var overlayY = this.theTopMargin;
		overlayCtx.beginPath();
		overlayCtx.strokeStyle = "black";
		overlayCtx.moveTo(event.offsetX,overlayY);
		overlayCtx.lineTo(event.offsetX,this.overlayCanvas.height);
		overlayCtx.stroke();
		overlayCtx.closePath();
		ctx.clearRect(0,0,this.headerCanvas.width,this.headerCanvas.height);
		ctx.save();
		var centerLabel = { width : 0, x : 0, y : 0, font : "", label : ""};
		var leftLabel = { width : 0, x : 0, y : 0, font : "", label : ""};
		var leftPosLabel = { width : 0, x : 0, y : 0, font : "", label : ""};
		var rightLabel = { width : 0, x : 0, y : 0, font : "", label : ""};
		var rightPosLabel = { width : 0, x : 0, y : 0, font : "", label : ""};
		var labels = [centerLabel,leftLabel,leftPosLabel,rightLabel,rightPosLabel];
		centerLabel.font = "18px Arial";
		ctx.font = centerLabel.font;
		centerLabel.label = Reflect.field(this.columnToLabel,Std.string(this.columnOrder[column]));
		centerLabel.width = ctx.measureText(centerLabel.label).width;
		centerLabel.x = x - centerLabel.width / 2;
		centerLabel.y = y - 2;
		if(column - 1 > -1) {
			leftLabel.label = Reflect.field(this.columnToLabel,Std.string(this.columnOrder[column - 1]));
			leftLabel.font = "10px Arial";
			ctx.font = leftLabel.font;
			leftLabel.width = ctx.measureText(leftLabel.label).width;
			leftLabel.x = centerLabel.x - leftLabel.width - 2;
			leftLabel.y = y - 2;
			leftPosLabel.label = Std.string(Std.parseInt(this.columnOrder[column - 1]) + 1);
			leftPosLabel.font = "8px Arial";
			ctx.font = leftPosLabel.font;
			leftPosLabel.width = ctx.measureText(leftPosLabel.label).width;
			leftPosLabel.x = leftLabel.x - leftPosLabel.width;
			leftPosLabel.y = leftLabel.y - 10;
		}
		if(column + 1 < this.columnOrder.length) {
			rightLabel.label = Reflect.field(this.columnToLabel,Std.string(this.columnOrder[column + 1]));
			rightLabel.font = "10px Arial";
			ctx.font = rightLabel.font;
			rightLabel.width = ctx.measureText(rightLabel.label).width;
			rightLabel.x = centerLabel.x + centerLabel.width + 2;
			rightLabel.y = y - 2;
			rightPosLabel.label = Std.string(Std.parseInt(this.columnOrder[column + 1]) + 1);
			rightPosLabel.font = "8px Arial";
			ctx.font = rightPosLabel.font;
			rightPosLabel.width = ctx.measureText(rightPosLabel.label).width;
			rightPosLabel.x = rightLabel.x + rightLabel.width;
			rightPosLabel.y = rightLabel.y - 10;
		}
		var bStart = leftPosLabel.x;
		var bEnd = x + centerLabel.width + rightLabel.width + rightPosLabel.width;
		ctx.save();
		ctx.fillStyle = "rgba(255,255,255,0.8)";
		ctx.fillRect(bStart,y - 20,bEnd - bStart,20);
		ctx.restore();
		ctx.fillStyle = "black";
		var _g = 0;
		while(_g < labels.length) {
			var label = labels[_g];
			++_g;
			if(label.width > 0) {
				ctx.font = label.font;
				ctx.fillText(label.label,label.x,label.y);
			}
		}
		ctx.restore();
	}
	,configureKeyCanvasDimensions: function() {
		this.keyCanvasRequiredHeight = 60;
		this.groupToStyles = new haxe.ds.StringMap();
		var $it0 = this.valueToStyle.keys();
		while( $it0.hasNext() ) {
			var value = $it0.next();
			var _g = 0;
			var _g1 = this.valueToStyle.get(value);
			while(_g < _g1.length) {
				var style = _g1[_g];
				++_g;
				if(!this.groupToStyles.exists(style.group)) {
					var value1 = new haxe.ds.StringMap();
					this.groupToStyles.set(style.group,value1);
				}
				var key = style.name + "~" + style.type + "~" + style.colour;
				if(!(function($this) {
					var $r;
					var this1 = $this.groupToStyles.get(style.group);
					$r = this1.exists(key);
					return $r;
				}(this))) {
					var this2 = this.groupToStyles.get(style.group);
					this2.set(key,style);
				}
			}
		}
		var canvas = window.document.createElement("canvas");
		canvas.style.position = "absolute";
		canvas.style.left = "-100px";
		canvas.style.top = "-100px";
		canvas.width = 100;
		canvas.height = 100;
		window.document.body.appendChild(canvas);
		var width = this.getContainerWidth() - this.theLeftMargin - this.theRightMargin;
		var sep = 6;
		var boxSize = 10;
		var yPos = 2;
		var ctx = canvas.getContext("2d",null);
		var $it1 = this.groupToStyles.keys();
		while( $it1.hasNext() ) {
			var group = $it1.next();
			var xPos = this.theLeftMargin;
			var metrics = ctx.measureText(group);
			yPos += 12;
			var $it2 = (function($this) {
				var $r;
				var this3 = $this.groupToStyles.get(group);
				$r = this3.keys();
				return $r;
			}(this));
			while( $it2.hasNext() ) {
				var styleKey = $it2.next();
				var style1;
				var this4 = this.groupToStyles.get(group);
				style1 = this4.get(styleKey);
				var colStr = "";
				var label = style1.name + " " + colStr;
				var metrics1 = ctx.measureText(label);
				var totalWidth = xPos + metrics1.width + boxSize + sep;
				if(totalWidth > width) {
					xPos = this.theLeftMargin;
					yPos += 12;
				}
				xPos += boxSize + sep;
				xPos += metrics1.width + sep;
			}
			yPos += 12;
		}
		window.document.body.removeChild(canvas);
		this.keyCanvasRequiredHeight = yPos;
	}
	,renderKey: function() {
		saturn.client.programs.blocks.BaseScrollableCanvas.prototype.renderKey.call(this);
		var width = this.getContainerWidth() - this.theLeftMargin - this.theRightMargin;
		var sep = 6;
		var boxSize = 10;
		var yPos = 2;
		var ctx = this.getKeyCanvasContext();
		var $it0 = this.groupToStyles.keys();
		while( $it0.hasNext() ) {
			var group = $it0.next();
			var xPos = this.theLeftMargin;
			ctx.save();
			ctx.fillText(group,xPos,yPos + 10);
			var metrics = ctx.measureText(group);
			ctx.moveTo(xPos,yPos);
			ctx.lineTo(xPos + metrics.width,yPos);
			ctx.restore();
			yPos += 12;
			var $it1 = (function($this) {
				var $r;
				var this1 = $this.groupToStyles.get(group);
				$r = this1.keys();
				return $r;
			}(this));
			while( $it1.hasNext() ) {
				var styleKey = $it1.next();
				var style;
				var this2 = this.groupToStyles.get(group);
				style = this2.get(styleKey);
				var colStr = "";
				var label = style.name + " " + colStr;
				var metrics1 = ctx.measureText(label);
				var totalWidth = xPos + metrics1.width + boxSize + sep;
				if(totalWidth > width) {
					xPos = this.theLeftMargin;
					yPos += 12;
				}
				if(style.type == "rec") {
					ctx.save();
					ctx.fillStyle = style.colour;
					ctx.fillRect(xPos,yPos,boxSize,boxSize);
					ctx.restore();
				}
				xPos += boxSize + sep;
				ctx.fillText(label,xPos,yPos + 10);
				xPos += metrics1.width + sep;
			}
			yPos += 12;
		}
	}
	,__class__: saturn.client.programs.blocks.GridVarCanvasRenderer
});
saturn.client.programs.blocks.TargetSummary = $hxClasses["saturn.client.programs.blocks.TargetSummary"] = function(targetId) {
	this.parentFolder = null;
	this.targetId = targetId;
	this.constructNameToConstruct = new haxe.ds.StringMap();
};
saturn.client.programs.blocks.TargetSummary.__name__ = ["saturn","client","programs","blocks","TargetSummary"];
saturn.client.programs.blocks.TargetSummary.prototype = {
	targetId: null
	,constructs: null
	,targetSeq: null
	,aln: null
	,fasta: null
	,gridVar: null
	,parentFolder: null
	,constructNameToConstruct: null
	,setParentFolder: function(folderNode) {
		this.parentFolder = folderNode;
	}
	,setSequences: function(constructs) {
		this.constructs = constructs;
		var _g = 0;
		var _g1 = this.constructs;
		while(_g < _g1.length) {
			var construct = _g1[_g];
			++_g;
			this.constructNameToConstruct.set(construct.constructId,construct);
		}
	}
	,generateSummary: function() {
		this.getConstructs();
	}
	,getConstructs: function() {
		var _g = this;
		saturn.client.core.CommonCore.getDefaultProvider().getByNamedQuery("TARGET_TO_CONSTRUCTS",[this.targetId],saturn.core.domain.SgcConstruct,false,function(constructs,exception) {
			if(exception == null && constructs != null) {
				_g.constructs = constructs;
				var _g1 = 0;
				while(_g1 < constructs.length) {
					var construct = constructs[_g1];
					++_g1;
					_g.constructNameToConstruct.set(construct.constructId,construct);
				}
				_g.getConstructStatus();
			} else _g.lookupException(exception.message);
		});
	}
	,getTargetSequence: function() {
		var _g = this;
		saturn.client.core.CommonCore.getDefaultProvider().getById(this.targetId,saturn.core.domain.SgcTarget,function(targetSeq,ex) {
			if(ex == null && targetSeq != null) {
				_g.targetSeq = targetSeq;
				_g.generateAlignment();
			} else _g.lookupException(ex.message);
		});
	}
	,getConstructStatus: function() {
		var values = [];
		var constructPkeyToConstruct = new haxe.ds.StringMap();
		var _g = 0;
		var _g1 = this.constructs;
		while(_g < _g1.length) {
			var construct = _g1[_g];
			++_g;
			values.push(construct.id == null?"null":"" + construct.id);
			constructPkeyToConstruct.set(construct.id == null?"null":"" + construct.id,construct);
		}
		this.getTargetSequence();
	}
	,generateFASTA: function() {
		var objs = [];
		var fastaBuf_b = "";
		fastaBuf_b += Std.string(">" + this.targetId + "\n" + this.targetSeq.proteinSeq + "\n");
		var _g = 0;
		var _g1 = this.constructs;
		while(_g < _g1.length) {
			var construct = _g1[_g];
			++_g;
			if(construct.proteinSeqNoTag != null) fastaBuf_b += Std.string(">" + construct.constructId + "\n" + construct.proteinSeqNoTag + "\n");
		}
		this.fasta = fastaBuf_b;
	}
	,generateAlignment: function() {
		var _g = this;
		this.generateFASTA();
		saturn.client.BioinformaticsServicesClient.getClient().sendClustalReportRequest(this.fasta,function(response,error) {
			if(error == null) {
				var clustalReport = response.json.clustalReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + clustalReport;
				saturn.client.core.CommonCore.getContent(dstURL,function(content) {
					_g.aln = content;
					_g.finish();
				});
			} else saturn.client.WorkspaceApplication.getApplication().showMessage("Clustal Error",error);
		});
	}
	,finish: function() {
		this.gridVar = new saturn.core.GridVar();
		this.gridVar.dataTableDefinition = saturn.client.programs.plugins.AlignmentGVPlugin.getTableDefinitionFromAlignment(this.aln);
		this.gridVar.fit = true;
		this.gridVar.padding = false;
		this.gridVar.showXLabels = false;
		this.gridVar.configCollapse = true;
		this.colourConstructs();
		var wo = new saturn.client.workspace.GridVarWO(this.gridVar,this.targetId + " (Construct summary - no tag)");
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(wo,true,this.parentFolder);
	}
	,colourConstructs: function() {
		var styles = { 'No progress' : { val : 6, colour : "grey"}, 'Cloned' : { val : 2, colour : "green"}, 'Purified' : { val : 7, colour : "orange"}, 'In xtal trials' : { val : 5, colour : "blue"}, 'Diffraction criteria met' : { val : 4, colour : "red"}, 'Deposited' : { val : 3, colour : "purple"}, 'Unknown' : { val : 1, colour : "grey"}};
		var _g1 = 1;
		var _g = this.gridVar.dataTableDefinition.columnDefs.length;
		while(_g1 < _g) {
			var i = _g1++;
			var def = this.gridVar.dataTableDefinition.columnDefs[i];
			var constructName = def.dataIndex;
			var construct = this.constructNameToConstruct.get(constructName);
			var status = construct.status;
			var num = 1;
			if(Object.prototype.hasOwnProperty.call(styles,status)) num = Reflect.field(styles,status).val;
			var _g3 = 0;
			var _g2 = this.gridVar.dataTableDefinition.data.length;
			while(_g3 < _g2) {
				var j = _g3++;
				if(Reflect.field(this.gridVar.dataTableDefinition.data[j],constructName) == 1) this.gridVar.dataTableDefinition.data[j][constructName] = num;
			}
		}
		this.gridVar.styleTableDefinition.data = [];
		var _g4 = 0;
		var _g11 = Reflect.fields(styles);
		while(_g4 < _g11.length) {
			var style = _g11[_g4];
			++_g4;
			var num1 = Reflect.field(styles,style).val;
			this.gridVar.styleTableDefinition.data.push({ 'data_type' : "Construct Status", 'mapping' : num1, style : "rec", 'color' : Reflect.field(styles,style).colour, 'label' : style, 'columns' : "*"});
		}
	}
	,lookupException: function(msg) {
		saturn.client.WorkspaceApplication.getApplication().showMessage("Lookup exception",msg);
	}
	,__class__: saturn.client.programs.blocks.TargetSummary
};
if(!saturn.client.programs.chromohub) saturn.client.programs.chromohub = {};
saturn.client.programs.chromohub.ChromoHubAnnotationManager = $hxClasses["saturn.client.programs.chromohub.ChromoHubAnnotationManager"] = function(legacyViewer) {
	this.legacyViewer = legacyViewer;
	phylo.PhyloAnnotationManager.call(this);
};
saturn.client.programs.chromohub.ChromoHubAnnotationManager.__name__ = ["saturn","client","programs","chromohub","ChromoHubAnnotationManager"];
saturn.client.programs.chromohub.ChromoHubAnnotationManager.__super__ = phylo.PhyloAnnotationManager;
saturn.client.programs.chromohub.ChromoHubAnnotationManager.prototype = $extend(phylo.PhyloAnnotationManager.prototype,{
	legacyViewer: null
	,treeName: null
	,subtreeName: null
	,createViewOptions: function() {
		var _g = this;
		this.viewOptions = [];
		if(this.jsonFile == null) return;
		var i = 0;
		var j = 0;
		while(i < this.jsonFile.btnGroup.length) {
			this.viewOptions[j] = { text : this.jsonFile.btnGroup[i].title, margin : "0 10 5 0", xtype : "label", cls : "x-title-viewoptions"};
			var z = 0;
			j++;
			while(z < this.jsonFile.btnGroup[i].buttons.length) {
				var b = [this.jsonFile.btnGroup[i].buttons[z]];
				if(!b[0].enabled) {
					z++;
					continue;
				}
				if(b[0].annotCode == 26 && this.treeName == "E1" || b[0].annotCode == 26 && this.treeName == "E2" || b[0].annotCode == 26 && this.treeName == "USP") {
					z++;
					continue;
				}
				if(b[0].hidden == true) {
					z++;
					continue;
				}
				if(b[0].isTitle == true) this.viewOptions[j] = { text : b[0].label, margin : "0 0 5 0", xtype : "label", cls : "x-title-viewsuboptions"}; else {
					var auxtext;
					if(b[0].submenu) {
						var k = b[0].optionSelected[0];
						auxtext = b[0].label + " (" + b[0].options[k].label + ")";
					} else auxtext = b[0].label;
					var tit = [b[0].label + " Options"];
					var _viewOptions_Items = [{ text : "", margin : "0", xtype : "button", cls : "x-button-helpicon", icon : "/static/js/images/helpicon.png", handler : (function() {
						return function() {
						};
					})(), listeners : { mouseout : (function() {
						return function(e) {
							_g.closeHelpingDiv();
						};
					})(), mouseover : (function(b) {
						return function(e1) {
							_g.prepareHelpingDiv(e1,b[0].helpText);
						};
					})(b)}},{ text : "", margin : "0", xtype : this.activeAnnotation[b[0].annotCode] == true?"button":"container", width : 19, cls : this.activeAnnotation[b[0].annotCode] == true?"x-button-uncheck-icon":"x-button-hidden", icon : "/static/js/images/checkicon.png", handler : (function(b) {
						return function() {
							var elem = window.document.getElementById("optionToolBarId");
							_g.menuScroll = elem.scrollTop;
							var container = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
							_g.closeAnnotWindows();
							_g.showAnnotation(b[0].annotCode,false);
							if(b[0].annotCode == 25) _g.showAnnotation(30,false);
							if(b[0].annotCode == 28) _g.showAnnotation(29,false);
							if(b[0].annotCode == 27) _g.showAnnotation(31,false);
							container.clearOptionsToolBar();
							_g.createViewOptions();
							container.addElemToOptionsToolBar(_g.viewOptions);
							var elem1 = window.document.getElementById("optionToolBarId");
							elem1.scrollTop = _g.menuScroll;
						};
					})(b), listeners : { mouseout : (function() {
						return function(e2) {
						};
					})(), mouseover : (function() {
						return function(e3) {
							_g.closeHelpingDiv();
						};
					})()}},{ html : "<span>" + auxtext + "</span>", margin : "0 10 5 0", xtype : "button", cls : b[0].submenu?this.activeAnnotation != null && this.activeAnnotation.length > 0 && this.activeAnnotation[b[0].annotCode] == true?"x-btn-viewoptions-suboptions-checked":"x-btn-viewoptions-suboptions":b[0].popUpWindows?this.activeAnnotation != null && this.activeAnnotation.length > 0 && this.activeAnnotation[b[0].annotCode] == true?"x-btn-viewoptions-popup-checked":"x-btn-viewoptions-popup":this.activeAnnotation != null && this.activeAnnotation.length > 0 && this.activeAnnotation[b[0].annotCode] == true?"x-btn-viewoptions-checked":"x-btn-viewoptions", icon : "", handler : b[0].popUpWindows == true?(function($this) {
						var $r;
						var ia = [i];
						var za = [z];
						$r = (function(za,ia,tit,b) {
							return function() {
								var elem2 = window.document.getElementById("optionToolBarId");
								_g.menuScroll = elem2.scrollTop;
								var container1 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
								_g.closeAnnotWindows();
								container1.clearPopUpWindow();
								container1.setPosPopUpWindow(300,150);
								container1.setPopUpWindowTitle(tit[0]);
								var optt = _g.jsonFile.btnGroup[ia[0]].buttons[za[0]].windowsData[0];
								container1.addFormItemToPopUpWindow(optt.form.items,b[0].annotCode,optt.hasClass,optt.popMethod,_g.treeType,_g.treeName,null,_g);
								container1.showPopUpWindow();
								var fileref = window.document.createElement("script");
								fileref.setAttribute("type","text/javascript");
								fileref.setAttribute("src","/static/js/annotation.js");
								window.document.head.appendChild(fileref);
							};
						})(za,ia,tit,b);
						return $r;
					}(this)):(function(b) {
						return function() {
							var elem3 = window.document.getElementById("optionToolBarId");
							_g.menuScroll = elem3.scrollTop;
							var act = _g.activeAnnotation[b[0].annotCode];
							if(_g.activeAnnotation[b[0].annotCode] == null || _g.activeAnnotation[b[0].annotCode] == false) {
								var container2 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
								_g.closeAnnotWindows();
								container2.hideSubMenuToolBar();
								_g.showAnnotation(b[0].annotCode,true);
								var cert = !_g.activeAnnotation[b[0].annotCode];
								_g.legacyViewer.updateLegend(b[0],cert);
								container2.clearOptionsToolBar();
								_g.createViewOptions();
								container2.addElemToOptionsToolBar(_g.viewOptions);
								var elem4 = window.document.getElementById("optionToolBarId");
								elem4.scrollTop = _g.menuScroll;
								if(_g.legacyViewer.tableActive == true) _g.legacyViewer.baseTable.reconfigure(_g.legacyViewer.tableAnnot.tableDefinition);
								if(cert == false) container2.legendPanel.expand();
							} else {
								var elem5 = window.document.getElementById("optionToolBarId");
								_g.menuScroll = elem5.scrollTop;
								var container3 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
								_g.closeAnnotWindows();
								_g.showAnnotation(b[0].annotCode,false);
								container3.clearOptionsToolBar();
								_g.createViewOptions();
								container3.addElemToOptionsToolBar(_g.viewOptions);
								var elem6 = window.document.getElementById("optionToolBarId");
								elem6.scrollTop = _g.menuScroll;
							}
						};
					})(b), listeners : { mouseout : (function() {
						return function(e4) {
							var container4 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
							container4.hideHelpingDiv();
							if(_g.onSubmenu == false) container4.hideSubMenuToolBar();
						};
					})(), mouseover : b[0].submenu?(function($this) {
						var $r;
						var a = j;
						var subm = [];
						var t = [0];
						var t1;
						var i11 = [];
						var z1 = [];
						subm[0] = [];
						t1 = 0;
						var nuopt = b[0].options.length;
						while(t[0] < b[0].options.length) {
							i11[0] = i;
							z1[0] = z;
							t1 = t[0];
							subm[0][t[0]] = { text : b[0].options[t[0]].label, xtype : b[0].options[t[0]].isTitle == false && b[0].options[t[0]].isLabelTitle == false?"button":"label", cls : b[0].options[t[0]].isTitle == true || b[0].options[t[0]].isLabelTitle == true?b[0].options[t[0]].isTitle == true?"x-btn-viewoptions-title":"x-btn-viewoptions-label":b[0].optionSelected[0] == t[0]?"x-btn-viewoptions-default":"x-btn-viewoptions", handler : b[0].options[t[0]].isTitle == false && b[0].options[t[0]].isLabelTitle == false?(function($this) {
								var $r;
								var t2 = [t[0]];
								$r = (function(t2,z1,i11,b) {
									return function() {
										var container5 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
										_g.closeAnnotWindows();
										var check;
										check = _g.changeDefaultOption(t2[0],i11[0],z1[0]);
										_g.showAnnotation(b[0].annotCode,check);
										container5.hideExportSubMenu();
										container5.hideHelpingDiv();
										container5.hideSubMenuToolBar();
										_g.onSubmenu = false;
										container5.clearOptionsToolBar();
										_g.createViewOptions();
										container5.addElemToOptionsToolBar(_g.viewOptions);
									};
								})(t2,z1,i11,b);
								return $r;
							}($this)):(function() {
								return function() {
								};
							})(), tooltip : { text : b[0].options[t[0]].helpText}};
							t[0]++;
						}
						$r = (function(t,subm) {
							return function(e5) {
								var h = e5.ownerCt.y - e5.ownerCt.ownerCt.el.dom.scrollTop;
								var n = t[0];
								var container6 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
								container6.hideHelpingDiv();
								container6.clearSubMenuToolBar();
								container6.addElemToSubMenuToolBar(subm[0]);
								container6.setTopSubMenuToolBar(h);
								container6.setHeightSubMenuToolBar(n * 25);
								container6.showSubMenuToolBar();
								_g.onSubmenu = true;
							};
						})(t,subm);
						return $r;
					}(this)):(function() {
						return function(e6) {
							var container7 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
							$bind(container7,container7.hideHelpingDiv);
							container7.hideSubMenuToolBar();
							_g.onSubmenu = false;
						};
					})()}}];
					var _viewOptions = { xtype : "container", cls : "x-group2btns", layout : "hbox", items : _viewOptions_Items};
					this.viewOptions[j] = _viewOptions;
				}
				j++;
				z++;
			}
			i++;
		}
		var l = this.activeAnnotation.length;
		var i1 = 1;
		var num = 0;
		var showhide = false;
		while(i1 < l && num < 2) {
			if(this.activeAnnotation[i1] == true) num++;
			i1++;
		}
		if(num == 2) showhide = true;
		if(showhide == true) this.viewOptions[j] = { text : "Hide all", margin : "20 10 5 0", xtype : "button", cls : "x-btn-viewoptions x-btn-viewoptions-hide", handler : function() {
			_g.onSubmenu = false;
			var l1 = _g.activeAnnotation.length;
			var i2 = 1;
			while(i2 < l1) {
				_g.activeAnnotation[i2] = false;
				i2++;
			}
			var container8 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
			container8.hideExportSubMenu();
			container8.hideHelpingDiv();
			_g.closeAnnotWindows();
			container8.hideSubMenuToolBar();
			container8.clearOptionsToolBar();
			_g.createViewOptions();
			container8.emptyLegend();
			container8.addElemToOptionsToolBar(_g.viewOptions);
		}, listeners : { mouseover : function(e7) {
			_g.onSubmenu = false;
			var container9 = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
			container9.hideExportSubMenu();
			container9.hideHelpingDiv();
			container9.hideSubMenuToolBar();
		}}, tooltip : { dismissDelay : 10000, text : "Remove all Annotations"}};
	}
	,showAnnotation: function(annotCode,active) {
		var _g = this;
		var currentAnnot = annotCode;
		this.activeAnnotation[currentAnnot] = active;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var container = null;
		if(app != null) container = app.getSingleAppContainer();
		if(active == true) {
			var i;
			var needToExpandLegend = false;
			var _g1 = 0;
			var _g2 = this.activeAnnotation.length;
			while(_g1 < _g2) {
				var i1 = _g1++;
				if(this.activeAnnotation[i1] == true) {
					if(this.annotations[i1].legend != "" && this.annotations[i1].legendClazz == "") {
						needToExpandLegend = true;
						if(container != null) container.addImageToLegend(this.annotations[i1].legend,i1);
					} else if(this.annotations[i1].legend != null && this.annotations[i1].legendClazz != "" && this.annotations[i1].legendMethod != "") {
						var clazz = Type.resolveClass(this.annotations[i1].legendClazz);
						var method = Reflect.field(clazz,this.annotations[i1].legendMethod);
						var legend = method(this.treeName);
						if(container != null) container.addImageToLegend(legend,i1);
					}
				}
			}
			if(needToExpandLegend == true) {
				if(container != null) container.legendPanel.expand();
			}
			var annot = this.annotations[currentAnnot];
			if(annot.hookName != null && annot.hookName != "") {
				var myGeneList;
				myGeneList = this.rootNode.targets;
				var currentOption = 100;
				var alias;
				var dbAccessed = false;
				var u;
				if(annot.options.length == 0) {
					alias = annot.hookName;
					annot.defaultImg = 0;
					if((function($this) {
						var $r;
						var key = alias;
						$r = $this.alreadyGotAnnotation.exists(key);
						return $r;
					}(this)) == false) {
						var key1 = alias;
						this.alreadyGotAnnotation.set(key1,true);
						dbAccessed = false;
					} else dbAccessed = true;
				} else if(annot.optionSelected.length == 1) {
					currentOption = annot.optionSelected[0];
					alias = annot.options[currentOption];
					if(annot.defaultImg == null) annot.defaultImg = 0; else annot.defaultImg = currentOption;
					dbAccessed = false;
				} else {
					dbAccessed = false;
					alias = "";
				}
				var error;
				dbAccessed = false;
				if(dbAccessed == false) {
					var parameter;
					if(this.treeName != "") {
						if(this.treeName.indexOf("/") != -1) {
							var aux = this.treeName.split("/");
							parameter = aux[1];
						} else parameter = this.treeName;
						if(this.treeType == "gene") alias = "gene_" + Std.string(alias);
					} else parameter = this.rootNode.targets;
					saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(alias,{ param : parameter},null,true,function(db_results,error1) {
						if(error1 == null) _g.addAnnotData(db_results,currentAnnot,currentOption,function() {
							_g.legacyViewer.newposition(0,0);
						}); else saturn.client.WorkspaceApplication.getApplication().debug(error1);
					});
				} else this.legacyViewer.newposition(0,0);
			}
			if(annot.familyMethod != "") {
				var hook;
				var clazz1;
				var method1;
				this.activeAnnotation[currentAnnot] = false;
				clazz1 = this.annotations[currentAnnot].hasClass;
				method1 = this.annotations[currentAnnot].familyMethod + "table";
				var data = new phylo.PhyloScreenData();
				data.renderer = this.legacyViewer.radialR;
				data.target = "";
				data.targetClean = "";
				data.annot = currentAnnot;
				data.divAccessed = false;
				data.root = this.rootNode;
				data.title = this.annotations[currentAnnot].label;
				hook = Reflect.field(Type.resolveClass(clazz1),method1);
				this.legacyViewer.dom = this.legacyViewer.theComponent.down("component").getEl().dom;
				var posXDiv = this.legacyViewer.dom.clientWidth / 2 - 100;
				var posYDiv = this.legacyViewer.dom.clientHeight / 5;
				this.closeDivInTable();
				hook(data,Math.round(posXDiv),Math.round(posYDiv),this.treeName,this.treeType,function(div) {
					data.created = true;
					data.div = div;
					var nn = "";
					if(data.target != data.targetClean) {
						if(data.target.indexOf("(") != -1 || data.target.indexOf("-") != -1) {
							var auxArray = data.target.split("");
							var j;
							var _g11 = 0;
							var _g3 = auxArray.length;
							while(_g11 < _g3) {
								var j1 = _g11++;
								if(auxArray[j1] == "(" || auxArray[j1] == "-") {
									nn = auxArray[j1 + 1];
									break;
								}
							}
						}
					}
					if(currentAnnot == 4) {
						if(data.annotation.text.indexOf(".") != -1) {
							var auxArray1 = data.annotation.text.split("");
							var j2;
							var naux = "";
							var _g12 = 0;
							var _g4 = auxArray1.length;
							while(_g12 < _g4) {
								var j3 = _g12++;
								if(auxArray1[j3] != ".") naux += auxArray1[j3];
							}
							nn = nn + naux;
						} else if(data.annotation.text.indexOf("/") != -1) {
							var auxArray2 = data.annotation.text.split("");
							var j4;
							var naux1 = "";
							var _g13 = 0;
							var _g5 = auxArray2.length;
							while(_g13 < _g5) {
								var j5 = _g13++;
								if(auxArray2[j5] != "/") naux1 += auxArray2[j5];
							}
							nn = nn + naux1;
						} else nn = nn + data.annotation.text;
					}
					var nom = "";
					if(data.targetClean.indexOf("/") != -1) {
						var auxArray3 = data.targetClean.split("");
						var j6;
						var _g14 = 0;
						var _g6 = auxArray3.length;
						while(_g14 < _g6) {
							var j7 = _g14++;
							if(auxArray3[j7] != "/") nom += auxArray3[j7];
						}
					} else nom = data.targetClean;
					var id = currentAnnot + "-" + nom + nn;
					saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer().showAnnotWindow(div,Math.round(posXDiv),Math.round(posYDiv),data.title,id,data);
				});
			}
		} else {
			this.legacyViewer.newposition(0,0);
			if(container != null) container.emptyLegend();
			var i2;
			var needToExpandLegend1 = false;
			var _g15 = 0;
			var _g7 = this.activeAnnotation.length;
			while(_g15 < _g7) {
				var i3 = _g15++;
				if(this.activeAnnotation[i3] == true) {
					if(this.annotations[i3].legend != "") {
						needToExpandLegend1 = true;
						if(container != null) container.addImageToLegend(this.annotations[i3].legend,i3);
					}
				}
			}
			if(needToExpandLegend1 == false) {
				if(container != null) container.legendPanel.collapse();
			}
		}
	}
	,dataforTable: function(annotlist,leaves) {
		var d = [];
		var total = this.numTotalAnnot;
		if(this.treeName != "") {
			var results = [];
			var _g1 = 0;
			var _g = leaves.length;
			while(_g1 < _g) {
				var i = _g1++;
				if((function($this) {
					var $r;
					var key = leaves[i];
					$r = $this.rootNode.leafNameToNode.exists(key);
					return $r;
				}(this))) {
					var leaf;
					var key1 = leaves[i];
					leaf = this.rootNode.leafNameToNode.get(key1);
					var j;
					var _g3 = 1;
					var _g2 = total + 1;
					while(_g3 < _g2) {
						var j1 = _g3++;
						if(annotlist[j1] != null && annotlist[j1].familyMethod != "") {
							results[j1] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().showFamilyMethodDivInTable(" + j1 + ",'" + Std.string(annotlist[j1].familyMethod) + "')\";return false;\"><span style=\"text-align:center;color:\">Visualize</span></a> ";
							saturn.core.Util.debug("Here!");
						} else {
							saturn.core.Util.debug("Here2!");
							if(leaf.annotations[j1] != null) {
								if(leaf.annotations[j1] != null) {
									if(leaf.annotations[j1].hasAnnot == true) {
										if(leaf.annotations[j1].alfaAnnot.length == 0) {
											var _g4 = this.annotations[j1].shape;
											switch(_g4) {
											case "cercle":
												results[j1] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf.annotations[j1].color[0].color + "\">O</span></a> ";
												break;
											case "html":
												results[j1] = this.generateIcon(j1,leaf.annotations[j1].myleaf.name,leaf.results);
												break;
											case "square":
												results[j1] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><div id=\"rectangle\" style=\"text-align:center;width:10px; height:10px; background-color:" + leaf.annotations[j1].color[0].color + "\"/> </div></a> ";
												break;
											case "text":
												results[j1] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf.annotations[j1].color[0].color + "\">" + leaf.annotations[j1].text + "</span></a> ";
												break;
											case "image":
												var t = leaf.annotations[j1].defaultImg;
												if(t == null) t = 0;
												if(this.annotations[j1].annotImg[t] != null && this.annotations[j1].annotImg[t].currentSrc != null) {
													if(t != 100) {
														if(j1 == 1) results[j1] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j1].annotImg[t].currentSrc) + "\" width=\"20px\"/><a> "; else results[j1] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j1].annotImg[t].currentSrc) + "\"/><a> ";
													} else results[j1] = "";
												}
												break;
											}
										} else {
											results[j1] = "";
											if(leaf.annotations[j1].hasAnnot == true) {
												var _g41 = this.annotations[j1].shape;
												switch(_g41) {
												case "cercle":
													results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf.annotations[j1].color[0].color + "\">O</span></a> ";
													break;
												case "square":
													results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><div id=\"rectangle\" style=\"text-align:center;width:10px; height:10px; background-color:" + leaf.annotations[j1].color[0].color + "\"/> </div></a> ";
													break;
												case "html":
													results[j1] = results[j1] + this.generateIcon(j1,leaf.annotations[j1].myleaf.name,leaf.results);
													break;
												case "text":
													results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "','" + leaf.annotations[j1].text + "')\";return false;\"><span style=\"text-align:center;color:" + leaf.annotations[j1].color[0].color + "\">" + leaf.annotations[j1].text + "</span></a> ";
													break;
												case "image":
													var t1 = leaf.annotations[j1].defaultImg;
													if(t1 == null) t1 = 0;
													if(this.annotations[j1].annotImg[t1] != null && this.annotations[j1].annotImg[t1].currentSrc != null) {
														if(t1 != 100) results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j1].annotImg[t1].currentSrc) + "\"/><a> ";
													}
													break;
												}
											}
											var b;
											var _g5 = 0;
											var _g42 = leaf.annotations[j1].alfaAnnot.length;
											while(_g5 < _g42) {
												var b1 = _g5++;
												if(leaf.annotations[j1].alfaAnnot[b1] != null) {
													var _g6 = this.annotations[j1].shape;
													switch(_g6) {
													case "cercle":
														results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf.annotations[j1].alfaAnnot[b1].color[0].color + "\">O</span></a> ";
														break;
													case "square":
														results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><div id=\"rectangle\" style=\"text-align:center;width:10px; height:10px; background-color:" + leaf.annotations[j1].alfaAnnot[b1].color[0].color + "\"/> </div></a> ";
														break;
													case "html":
														results[j1] = results[j1] + this.generateIcon(j1,leaf.annotations[j1].myleaf.name,leaf.results);
														break;
													case "text":
														results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "','" + leaf.annotations[j1].alfaAnnot[b1].text + "')\";return false;\"><span style=\"text-align:center;color:" + leaf.annotations[j1].alfaAnnot[b1].color[0].color + "\">" + leaf.annotations[j1].alfaAnnot[b1].text + "</span></a> ";
														break;
													case "image":
														var t2 = leaf.annotations[j1].alfaAnnot[b1].defaultImg;
														if(t2 == null) t2 = 0;
														if(this.annotations[j1].annotImg[t2] != null && this.annotations[j1].annotImg[t2].currentSrc != null) {
															if(t2 != 100) results[j1] = results[j1] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j1 + ",'" + leaf.annotations[j1].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j1].annotImg[t2].currentSrc) + "\"/><a> ";
														}
														break;
													}
												}
											}
										}
									} else results[j1] = "";
								} else results[j1] = "";
							} else results[j1] = "";
						}
					}
					d[i] = { };
					var a = 0;
					d[i].Target = leaf.name;
					var _g31 = 0;
					var _g21 = this.annotations.length;
					while(_g31 < _g21) {
						var a1 = _g31++;
						if(a1 == 12) {
							var iwanttostop = true;
						}
						if(results[a1 + 1] != null) {
							if(a1 != 10) d[i][this.annotations[a1 + 1].label] = results[a1 + 1];
						}
					}
				}
			}
		} else {
			var results1 = [];
			var leaf1;
			var _g11 = 0;
			var _g7 = this.searchedGenes.length;
			while(_g11 < _g7) {
				var i1 = _g11++;
				leaf1 = this.legacyViewer.geneMap.get(this.searchedGenes[i1]);
				var j2;
				var _g32 = 1;
				var _g22 = total + 1;
				while(_g32 < _g22) {
					var j3 = _g32++;
					if(annotlist[j3] != null && annotlist[j3].familyMethod != "") {
						if(leaf1.targetFamilyGene != null && leaf1.targetFamilyGene.length != 0) {
							var ii = 0;
							var r = "";
							var _g51 = 0;
							var _g43 = leaf1.targetFamilyGene.length;
							while(_g51 < _g43) {
								var ii1 = _g51++;
								r = r + leaf1.targetFamilyGene[ii1] + " ";
							}
							results1[j3] = r;
						} else results1[j3] = "";
					} else if(leaf1.annotations[j3] != null) {
						if(leaf1.annotations[j3].hasAnnot == true) {
							if(leaf1.annotations[j3].alfaAnnot.length == 0) {
								var _g44 = this.annotations[j3].shape;
								switch(_g44) {
								case "cercle":
									results1[j3] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf1.annotations[j3].color[0].color + "\">O</span></a> ";
									break;
								case "square":
									results1[j3] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><div id=\"rectangle\" style=\"text-align:center;width:10px; height:10px; background-color:" + leaf1.annotations[j3].color[0].color + "\"/> </div></a> ";
									break;
								case "html":
									results1[j3] = this.generateIcon(j3,leaf1.annotations[j3].myleaf.name,leaf1.results);
									break;
								case "text":
									results1[j3] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf1.annotations[j3].color[0].color + "\">" + leaf1.annotations[j3].text + "</span></a> ";
									break;
								case "image":
									var t3 = leaf1.annotations[j3].defaultImg;
									if(t3 == null) t3 = 0;
									if(this.annotations[j3].annotImg[t3] != null && this.annotations[j3].annotImg[t3].currentSrc != null) {
										if(t3 != 100) {
											if(j3 == 1) results1[j3] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j3].annotImg[t3].currentSrc) + "\" width=\"20px\"/><a> "; else results1[j3] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j3].annotImg[t3].currentSrc) + "\"/><a> ";
										} else results1[j3] = "";
									}
									break;
								}
							} else {
								results1[j3] = "";
								if(leaf1.annotations[j3].hasAnnot == true) {
									var _g45 = this.annotations[j3].shape;
									switch(_g45) {
									case "cercle":
										results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf1.annotations[j3].color[0].color + "\">O</span></a> ";
										break;
									case "square":
										results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><div id=\"rectangle\" style=\"text-align:center;width:10px; height:10px; background-color:" + leaf1.annotations[j3].color[0].color + "\"/> </div></a> ";
										break;
									case "html":
										results1[j3] = results1[j3] + this.generateIcon(j3,leaf1.annotations[j3].myleaf.name,leaf1.results);
										break;
									case "text":
										results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "','" + leaf1.annotations[j3].text + "')\";return false;\"><span style=\"text-align:center;color:" + leaf1.annotations[j3].color[0].color + "\">" + leaf1.annotations[j3].text + "</span></a> ";
										break;
									case "image":
										var t4 = leaf1.annotations[j3].defaultImg;
										if(t4 == null) t4 = 0;
										if(this.annotations[j3].annotImg[t4] != null && this.annotations[j3].annotImg[t4].currentSrc != null) {
											if(t4 != 100) {
												if(j3 == 1) results1[j3] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j3].annotImg[t4].currentSrc) + "\" width=\"20px\"/><a> "; else results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j3].annotImg[t4].currentSrc) + "\"/><a> ";
											}
										}
										break;
									}
								}
								var b2;
								var _g52 = 0;
								var _g46 = leaf1.annotations[j3].alfaAnnot.length;
								while(_g52 < _g46) {
									var b3 = _g52++;
									if(leaf1.annotations[j3].alfaAnnot[b3] != null) {
										var _g61 = this.annotations[j3].shape;
										switch(_g61) {
										case "cercle":
											results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><span style=\"text-align:center;color:" + leaf1.annotations[j3].alfaAnnot[b3].color[0].color + "\">O</span></a> ";
											break;
										case "square":
											results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><div id=\"rectangle\" style=\"text-align:center;width:10px; height:10px; background-color:" + leaf1.annotations[j3].alfaAnnot[b3].color[0].color + "\"/> </div></a> ";
											break;
										case "html":
											results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><div id=\"rectangle\" style=\"text-align:center;width:10px; height:10px; background-color:" + leaf1.annotations[j3].alfaAnnot[b3].color[0].color + "\"/> </div></a> ";
											break;
										case "text":
											results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "','" + leaf1.annotations[j3].alfaAnnot[b3].text + "')\";return false;\"><span style=\"text-align:center;color:" + leaf1.annotations[j3].alfaAnnot[b3].color[0].color + "\">" + leaf1.annotations[j3].alfaAnnot[b3].text + "</span></a> ";
											break;
										case "image":
											var t5 = leaf1.annotations[j3].alfaAnnot[b3].defaultImg;
											if(t5 == null) t5 = 0;
											if(this.annotations[j3].annotImg[t5] != null && this.annotations[j3].annotImg[t5].currentSrc != null) {
												if(t5 != 100) {
													if(j3 == 1) results1[j3] = "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j3].annotImg[t5].currentSrc) + "\" width=\"20px\"/><a> "; else results1[j3] = results1[j3] + "<a id=\"myLink\" title=\"Click to visualize annotation details\"  href=\"#\" onclick=\"app.getActiveProgram().annotationManager.showDivInTable(" + j3 + ",'" + leaf1.annotations[j3].myleaf.name + "')\";return false;\"><img src=\"" + Std.string(this.annotations[j3].annotImg[t5].currentSrc) + "\"/><a> ";
												}
											}
											break;
										}
									}
								}
							}
						} else results1[j3] = "";
					} else results1[j3] = "";
				}
				d[i1] = { };
				var a2 = 0;
				d[i1].Target = leaf1.name;
				var tt = "";
				var _g33 = 0;
				var _g23 = this.annotations.length;
				while(_g33 < _g23) {
					var a3 = _g33++;
					if(results1[a3 + 1] != null) {
						if(a3 != 10) {
							if(a3 + 1 == 5) d[i1]["Family Domains"] = results1[a3 + 1]; else d[i1][this.annotations[a3 + 1].label] = results1[a3 + 1];
						}
					}
				}
			}
		}
		return d;
	}
	,fillInDataInAnnotTable: function(type,callback) {
		var _g = this;
		var annotlist = this.annotations;
		var leaves;
		var myGeneList;
		if(type == "family") {
			myGeneList = this.rootNode.targets;
			leaves = this.rootNode.targets;
		} else {
			myGeneList = this.searchedGenes;
			leaves = this.searchedGenes;
		}
		var total = this.numTotalAnnot;
		var completedAnnotations = 0;
		var onDone = function(error,annotation) {
			if(completedAnnotations == total) {
				saturn.core.Util.debug("All results fetch");
				var d = _g.dataforTable(annotlist,leaves);
				callback(d,null);
				return;
			}
		};
		var _g1 = 1;
		var _g2 = total + 1;
		while(_g1 < _g2) {
			var currentAnnot = [_g1++];
			if(currentAnnot[0] == 11) {
				completedAnnotations += 1;
				onDone(null,currentAnnot[0]);
				continue;
			}
			var alias = annotlist[currentAnnot[0]].hookName;
			if(alias == "") {
				completedAnnotations += 1;
				onDone(null,currentAnnot[0]);
				continue;
			}
			var parameter;
			if(this.treeName != "") {
				if(this.treeType == "gene") alias = "gene_" + alias;
				parameter = this.treeName;
				if(annotlist[currentAnnot[0]].popup == false) {
					var u = [annotlist[currentAnnot[0]].optionSelected[0]];
					saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(alias,{ param : parameter},null,true,(function(u,currentAnnot) {
						return function(db_results,error1) {
							if(error1 == null) _g.addAnnotData(db_results,currentAnnot[0],u[0],(function(currentAnnot) {
								return function() {
									completedAnnotations += 1;
									onDone(null,currentAnnot[0]);
								};
							})(currentAnnot)); else {
								saturn.core.Util.debug(error1);
								completedAnnotations += 1;
								onDone(error1,currentAnnot[0]);
							}
						};
					})(u,currentAnnot));
				} else {
					var l = currentAnnot[0];
					var popMethod = annotlist[currentAnnot[0]].popMethod;
					var hasClass = annotlist[currentAnnot[0]].hasClass;
					var hook = Reflect.field(Type.resolveClass(hasClass),popMethod);
					hook(currentAnnot[0],null,this.treeType,this.treeName,null,this,(function(currentAnnot) {
						return function(results,error2) {
							completedAnnotations += 1;
							if(error2 == null) onDone(null,currentAnnot[0]); else {
								saturn.core.Util.debug(error2);
								onDone(error2,currentAnnot[0]);
							}
						};
					})(currentAnnot));
				}
			} else if(annotlist[currentAnnot[0]].popup == false) {
				alias = "list_" + alias;
				var parameter1 = this.searchedGenes;
				if(this.treeType == "gene") alias = "gene_" + alias;
				saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(alias,{ param : parameter1},null,true,(function(currentAnnot) {
					return function(db_results1,error3) {
						if(error3 == null) _g.addAnnotDataGenes(db_results1,currentAnnot[0],(function(currentAnnot) {
							return function() {
								completedAnnotations += 1;
								onDone(null,currentAnnot[0]);
							};
						})(currentAnnot)); else {
							saturn.client.WorkspaceApplication.getApplication().showMessage("Unknown",error3);
							completedAnnotations += 1;
							onDone(error3,currentAnnot[0]);
						}
					};
				})(currentAnnot));
			} else {
				var l1 = currentAnnot[0];
				var popMethod1 = annotlist[currentAnnot[0]].popMethod;
				var hasClass1 = annotlist[currentAnnot[0]].hasClass;
				var hook1 = Reflect.field(Type.resolveClass(hasClass1),popMethod1);
				hook1(currentAnnot[0],null,this.treeType,this.treeName,this.searchedGenes,this,(function(currentAnnot) {
					return function(results1,error4) {
						completedAnnotations += 1;
						onDone(null,currentAnnot[0]);
					};
				})(currentAnnot));
			}
		}
	}
	,showFamilyMethodDivInTable: function(annotation) {
		if(this.annotations[annotation].hasClass != null && this.annotations[annotation].familyMethod != null) {
			var hook;
			var clazz;
			var method;
			clazz = this.annotations[annotation].hasClass;
			method = this.annotations[annotation].familyMethod + "table";
			var data = new phylo.PhyloScreenData();
			data.renderer = this.legacyViewer.radialR;
			data.target = "";
			data.targetClean = "";
			data.annot = annotation;
			data.divAccessed = false;
			data.root = this.rootNode;
			data.title = this.annotations[annotation].label;
			hook = Reflect.field(Type.resolveClass(clazz),method);
			this.legacyViewer.dom = this.legacyViewer.theComponent.down("component").getEl().dom;
			var posXDiv = this.legacyViewer.dom.clientWidth / 2 - 100;
			var posYDiv = this.legacyViewer.dom.clientHeight / 5;
			hook(data,Math.round(posXDiv),Math.round(posYDiv),this.treeName,this.treeType,function(div) {
				data.created = true;
				data.div = div;
				var nn = "";
				if(data.target != data.targetClean) {
					if(data.target.indexOf("(") != -1 || data.target.indexOf("-") != -1) {
						var auxArray = data.target.split("");
						var j;
						var _g1 = 0;
						var _g = auxArray.length;
						while(_g1 < _g) {
							var j1 = _g1++;
							if(auxArray[j1] == "(" || auxArray[j1] == "-") {
								nn = auxArray[j1 + 1];
								break;
							}
						}
					}
				}
				var nom = "";
				if(data.targetClean.indexOf("/") != -1) {
					var auxArray1 = data.targetClean.split("");
					var j2;
					var _g11 = 0;
					var _g2 = auxArray1.length;
					while(_g11 < _g2) {
						var j3 = _g11++;
						if(auxArray1[j3] != "/") nom += auxArray1[j3];
					}
				} else nom = data.targetClean;
				var id = annotation + "-" + nom + nn;
				saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer().showAnnotWindow(div,Math.round(posXDiv),Math.round(posYDiv),data.title,id,data);
			});
		}
	}
	,showDivInTable: function(annotation,target,text) {
		var leaf;
		if(this.treeName == "") leaf = this.legacyViewer.geneMap.get(target); else leaf = this.rootNode.leafNameToNode.get(target);
		if(this.annotations[annotation].hasClass != null && this.annotations[annotation].divMethod != null) {
			var hook;
			var clazz;
			var method;
			clazz = this.annotations[annotation].hasClass;
			method = this.annotations[annotation].divMethod;
			var data = new phylo.PhyloScreenData();
			data.renderer = this.legacyViewer.radialR;
			data.target = target;
			data.annot = annotation;
			if(text != null) data.annotation.text = text; else data.annotation.text = leaf.annotations[annotation].text;
			var name = "";
			if(target.indexOf("(") != -1 || target.indexOf("-") != -1) {
				var auxArray = target.split("");
				var j;
				var _g1 = 0;
				var _g = auxArray.length;
				while(_g1 < _g) {
					var j1 = _g1++;
					if(auxArray[j1] == "(" || auxArray[j1] == "-") break;
					name += auxArray[j1];
				}
				data.targetClean = name;
			} else data.targetClean = target;
			data.annot = annotation;
			data.divAccessed = false;
			data.root = this.rootNode;
			data.title = this.annotations[annotation].label;
			hook = Reflect.field(Type.resolveClass(clazz),method);
			this.legacyViewer.dom = this.legacyViewer.theComponent.down("component").getEl().dom;
			var posXDiv = this.legacyViewer.dom.clientWidth / 2 - 100;
			var posYDiv = this.legacyViewer.dom.clientHeight / 5;
			hook(data,Math.round(posXDiv),Math.round(posYDiv),this.treeType,function(div) {
				data.created = true;
				data.div = div;
				var nn = "";
				if(data.target != data.targetClean) {
					if(data.target.indexOf("(") != -1 || data.target.indexOf("-") != -1) {
						var auxArray1 = data.target.split("");
						var j2;
						var _g11 = 0;
						var _g2 = auxArray1.length;
						while(_g11 < _g2) {
							var j3 = _g11++;
							if(auxArray1[j3] == "(" || auxArray1[j3] == "-") {
								nn = auxArray1[j3 + 1];
								break;
							}
						}
					}
				}
				if(annotation == 4) {
					if(data.annotation.text.indexOf(".") != -1) {
						var auxArray2 = data.annotation.text.split("");
						var j4;
						var naux = "";
						var _g12 = 0;
						var _g3 = auxArray2.length;
						while(_g12 < _g3) {
							var j5 = _g12++;
							if(auxArray2[j5] != ".") naux += auxArray2[j5];
						}
						nn = nn + naux;
					} else if(data.annotation.text.indexOf("/") != -1) {
						var auxArray3 = data.annotation.text.split("");
						var j6;
						var naux1 = "";
						var _g13 = 0;
						var _g4 = auxArray3.length;
						while(_g13 < _g4) {
							var j7 = _g13++;
							if(auxArray3[j7] != "/") naux1 += auxArray3[j7];
						}
						nn = nn + naux1;
					} else nn = nn + data.annotation.text;
				}
				var nom = "";
				if(data.targetClean.indexOf("/") != -1) {
					var auxArray4 = data.targetClean.split("");
					var j8;
					var _g14 = 0;
					var _g5 = auxArray4.length;
					while(_g14 < _g5) {
						var j9 = _g14++;
						if(auxArray4[j9] != "/") nom += auxArray4[j9];
					}
				} else nom = data.targetClean;
				var id = annotation + "-" + nom + nn;
				saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer().showAnnotWindow(div,Math.round(posXDiv),Math.round(posYDiv),data.title,id,data);
			});
		}
	}
	,closeDivInTable: function() {
		var container = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
	}
	,addAnnotDataGenes: function(annotData,annotation,callback) {
		var i;
		var mapResults;
		mapResults = new haxe.ds.StringMap();
		var target;
		var j = 0;
		var _g1 = 0;
		var _g = annotData.length;
		while(_g1 < _g) {
			var i2 = _g1++;
			if(annotation == 1) {
				var aux = annotData[i2].pmid_list;
				var aux2 = aux.split(";");
				var max = aux2.length;
				var v = this.annotations[1].fromresults[1];
				if(max > v || this.annotations[1].fromresults[1] == null) this.annotations[1].fromresults[1] = max;
			}
			target = Std.string(annotData[i2].target_id) + "_" + j;
			while(__map_reserved[target] != null?mapResults.existsReserved(target):mapResults.h.hasOwnProperty(target)) {
				j++;
				target = Std.string(annotData[i2].target_id) + "_" + j;
			}
			j = 0;
			var value = annotData[i2];
			mapResults.set(target,value);
		}
		var items = [];
		var i1 = 0;
		var _g11 = 0;
		var _g2 = this.searchedGenes.length;
		while(_g11 < _g2) {
			var i3 = _g11++;
			items[i3] = this.searchedGenes[i3];
		}
		this.processGeneAnnotations(items,mapResults,annotation,callback);
	}
	,processGeneAnnotations: function(items,mapResults,annotation,cb) {
		var _g1 = this;
		var toComplete = items.length;
		var onDone = function() {
			if(toComplete == 0) cb();
		};
		if(toComplete == 0) {
			cb();
			return;
		}
		var _g = 0;
		while(_g < items.length) {
			var name = items[_g];
			++_g;
			var target = [name + "_0"];
			if(__map_reserved[target[0]] != null?mapResults.existsReserved(target[0]):mapResults.h.hasOwnProperty(target[0])) {
				var res;
				res = __map_reserved[target[0]] != null?mapResults.getReserved(target[0]):mapResults.h[target[0]];
				var leafaux = [this.legacyViewer.geneMap.get(name)];
				var index = null;
				var variant = "1";
				if(annotation == 13 && Object.prototype.hasOwnProperty.call(res,"family_id")) leafaux[0].targetFamily = (__map_reserved[target[0]] != null?mapResults.getReserved(target[0]):mapResults.h[target[0]]).family_id;
				if(this.annotations[annotation].hasClass != null && this.annotations[annotation].hasMethod != null) {
					var clazz = this.annotations[annotation].hasClass;
					var method = this.annotations[annotation].hasMethod;
					var hook = Reflect.field(Type.resolveClass(clazz),method);
					hook(name,res,0,this.annotations,name,(function(leafaux,target) {
						return function(r) {
							if(r.hasAnnot) {
								leafaux[0].activeAnnotation[annotation] = true;
								if(leafaux[0].annotations[annotation] == null) {
									leafaux[0].annotations[annotation] = new phylo.PhyloAnnotation();
									leafaux[0].annotations[annotation].myleaf = leafaux[0];
									leafaux[0].annotations[annotation].text = r.text;
									leafaux[0].annotations[annotation].defaultImg = _g1.annotations[annotation].defaultImg;
									leafaux[0].annotations[annotation].saveAnnotationData(annotation,__map_reserved[target[0]] != null?mapResults.getReserved(target[0]):mapResults.h[target[0]],100,r);
								} else if(leafaux[0].annotations[annotation].splitresults == true) {
									var z = 0;
									while(leafaux[0].annotations[annotation].alfaAnnot[z] != null) z++;
									leafaux[0].annotations[annotation].alfaAnnot[z] = new phylo.PhyloAnnotation();
									leafaux[0].annotations[annotation].alfaAnnot[z].myleaf = leafaux[0];
									leafaux[0].annotations[annotation].alfaAnnot[z].text = "";
									leafaux[0].annotations[annotation].alfaAnnot[z].defaultImg = _g1.annotations[annotation].defaultImg;
									leafaux[0].annotations[annotation].alfaAnnot[z].saveAnnotationData(annotation,__map_reserved[target[0]] != null?mapResults.getReserved(target[0]):mapResults.h[target[0]],100,r);
								}
							}
							toComplete--;
							onDone();
						};
					})(leafaux,target));
				} else {
					var col = "";
					if(this.annotations[annotation].color[0] != null) col = this.annotations[annotation].color[0].color;
					var r1 = { hasAnnot : true, text : "", color : { color : col, used : true}, defImage : this.annotations[annotation].defaultImg};
					var leafaux1 = this.legacyViewer.geneMap.get(name);
					leafaux1.activeAnnotation[annotation] = true;
					if(leafaux1.annotations[annotation] == null) {
						leafaux1.annotations[annotation] = new phylo.PhyloAnnotation();
						leafaux1.annotations[annotation].myleaf = leafaux1;
						leafaux1.annotations[annotation].text = "";
						leafaux1.annotations[annotation].defaultImg = this.annotations[annotation].defaultImg;
						leafaux1.annotations[annotation].saveAnnotationData(annotation,__map_reserved[target[0]] != null?mapResults.getReserved(target[0]):mapResults.h[target[0]],100,r1);
					} else if(leafaux1.annotations[annotation].splitresults == true) {
						var z1 = 0;
						while(leafaux1.annotations[annotation].alfaAnnot[z1] != null) z1++;
						leafaux1.annotations[annotation].alfaAnnot[z1] = new phylo.PhyloAnnotation();
						leafaux1.annotations[annotation].alfaAnnot[z1].myleaf = leafaux1;
						leafaux1.annotations[annotation].alfaAnnot[z1].text = "";
						leafaux1.annotations[annotation].alfaAnnot[z1].defaultImg = this.annotations[annotation].defaultImg;
						leafaux1.annotations[annotation].alfaAnnot[z1].saveAnnotationData(annotation,__map_reserved[target[0]] != null?mapResults.getReserved(target[0]):mapResults.h[target[0]],100,r1);
					}
					toComplete--;
					onDone();
				}
			} else {
				var leafaux2 = this.legacyViewer.geneMap.get(name);
				leafaux2.activeAnnotation[annotation] = false;
				leafaux2.annotations[annotation] = null;
				toComplete--;
				onDone();
			}
		}
	}
	,addAnnotData: function(annotData,annotation,option,callback) {
		var i;
		var mapResults;
		mapResults = new haxe.ds.StringMap();
		var j = 0;
		var target;
		var _g1 = 0;
		var _g = annotData.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			if(annotation == 1) {
				var aux = annotData[i1].pmid_list;
				var aux2 = aux.split(";");
				var max = aux2.length;
				var v = this.annotations[1].fromresults[1];
				if(max > v || this.annotations[1].fromresults[1] == null) this.annotations[1].fromresults[1] = max;
			}
			target = Std.string(annotData[i1].target_id) + "_" + j;
			while(__map_reserved[target] != null?mapResults.existsReserved(target):mapResults.h.hasOwnProperty(target)) {
				j++;
				target = Std.string(annotData[i1].target_id) + "_" + j;
			}
			j = 0;
			var value = annotData[i1];
			mapResults.set(target,value);
		}
		var items = [];
		var _g11 = 0;
		var _g2 = this.rootNode.targets.length;
		while(_g11 < _g2) {
			var i2 = _g11++;
			items[i2] = this.rootNode.targets[i2];
		}
		this.processFamilyAnnotations(items,mapResults,annotation,option,callback);
		var cookies = Cookies;
		var cookie = cookies.getJSON("annot-icons-tip");
		if(cookie == null) {
			var dialog = new phylo.PhyloTooltipWidget(window.document.body,"Click on icons on the tree for more details","Tooltip");
		}
	}
	,showScreenData: function(active,data,mx,my) {
		if(this.canvas == null) return;
		if(active == false) {
			var mxx;
			mxx = mx + "px";
			var myy;
			myy = my + "px";
			if(data.created == false) {
				var container = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
				container.hideExportSubMenu();
				container.hideHelpingDiv();
				container.hideSubMenuToolBar();
				data.divAccessed = false;
				if(this.annotations[data.annotation.type].hasClass != null && this.annotations[data.annotation.type].divMethod != null) {
					var hook;
					var clazz;
					var method;
					data.suboption = this.annotations[data.annotation.type].optionSelected[0];
					data.title = this.annotations[data.annotation.type].label;
					data.family = this.treeName;
					clazz = this.annotations[data.annotation.type].hasClass;
					method = this.annotations[data.annotation.type].divMethod;
					hook = Reflect.field(Type.resolveClass(clazz),method);
					hook(data,mxx,myy,this.treeType,function(div) {
						data.created = true;
						data.div = div;
						var nn = "";
						if(data.target != data.targetClean) {
							if(data.target.indexOf("(") != -1 || data.target.indexOf("-") != -1) {
								var auxArray = data.target.split("");
								var j;
								var _g1 = 0;
								var _g = auxArray.length;
								while(_g1 < _g) {
									var j1 = _g1++;
									if(auxArray[j1] == "(" || auxArray[j1] == "-") {
										nn = auxArray[j1 + 1];
										break;
									}
								}
							}
						}
						if(data.annotation.type == 4) {
							if(data.annotation.text.indexOf(".") != -1) {
								var auxArray1 = data.annotation.text.split("");
								var j2;
								var naux = "";
								var _g11 = 0;
								var _g2 = auxArray1.length;
								while(_g11 < _g2) {
									var j3 = _g11++;
									if(auxArray1[j3] != ".") naux += auxArray1[j3];
								}
								nn = nn + naux;
							} else if(data.annotation.text.indexOf("/") != -1) {
								var auxArray2 = data.annotation.text.split("");
								var j4;
								var naux1 = "";
								var _g12 = 0;
								var _g3 = auxArray2.length;
								while(_g12 < _g3) {
									var j5 = _g12++;
									if(auxArray2[j5] != "/") naux1 += auxArray2[j5];
								}
								nn = nn + naux1;
							} else nn = nn + data.annotation.text;
						}
						var nom = "";
						if(data.targetClean.indexOf("/") != -1) {
							var auxArray3 = data.targetClean.split("");
							var j6;
							var _g13 = 0;
							var _g4 = auxArray3.length;
							while(_g13 < _g4) {
								var j7 = _g13++;
								if(auxArray3[j7] != "/") nom += auxArray3[j7];
							}
						} else nom = data.targetClean;
						var id = data.annotation.type + "-" + nom + nn;
						container.showAnnotWindow(div,mx,my,data.title,id,data);
					});
				}
			} else {
			}
		} else if(this.rootNode.divactive != 99999) {
			if(this.rootNode.screen[this.rootNode.divactive] != null) this.rootNode.screen[this.rootNode.divactive].created = false;
			this.rootNode.divactive = 99999;
		}
	}
	,closeHelpingDiv: function() {
		var container = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
		var i = 0;
		var _g = 0;
		while(_g < 300000000) {
			var i1 = _g++;
		}
		if(container.hideHelp == true) container.hideHelpingDiv();
	}
	,prepareHelpingDiv: function(e,text) {
		var h = e.ownerCt.y - e.ownerCt.ownerCt.el.dom.scrollTop;
		var container = saturn.client.WorkspaceApplication.getApplication().getSingleAppContainer();
		container.hideHelp = true;
		container.clearHelpingDiv();
		container.addHtmlTextHelpingDiv(text);
		container.setTopHelpingDiv(h);
		container.showHelpingDiv();
	}
	,closeAnnotWindows: function() {
		var app = saturn.client.WorkspaceApplication.getApplication();
		if(app != null) {
			var container = app.getSingleAppContainer();
			var annotWindow = container.annotWindow;
			var key;
			var numWindows = 0;
			var $it0 = annotWindow.keys();
			while( $it0.hasNext() ) {
				var key1 = $it0.next();
				numWindows++;
			}
			if(numWindows > 1) saturn.client.WorkspaceApplication.getApplication().userPrompt("Question","You have popup windows opened. Do you want to close them?",function() {
				container.removeAnnotWindows();
			}); else if(numWindows == 1) container.removeAnnotWindows();
		}
	}
	,changeDefaultOption: function(newDef,groupBtn,btn) {
		this.jsonFile.btnGroup[groupBtn].buttons[btn].optionSelected[0] = newDef;
		var currentAnnot = this.jsonFile.btnGroup[groupBtn].buttons[btn].annotCode;
		var u = this.annotations[currentAnnot].optionSelected[0];
		if(u != newDef) {
			var alias = this.annotations[currentAnnot].options[u];
			if(this.alreadyGotAnnotation.exists(alias) == true) this.alreadyGotAnnotation.remove(alias);
		}
		this.annotations[this.jsonFile.btnGroup[groupBtn].buttons[btn].annotCode].optionSelected[0] = newDef;
		return true;
	}
	,getTreeName: function() {
		return this.treeName + "_" + this.treeType;
	}
	,hideAnnotationWindows: function() {
		var app = saturn.client.WorkspaceApplication.getApplication();
		if(app != null) {
			var container = app.getSingleAppContainer();
			if(container != null) {
				container.hideExportSubMenu();
				container.hideHelpingDiv();
				if(saturn.client.WorkspaceApplication.getApplication().getScreenMode() != saturn.client.ScreenMode.DEFAULT) container.hideSubMenuToolBar();
			}
		}
	}
	,__class__: saturn.client.programs.chromohub.ChromoHubAnnotationManager
});
saturn.client.workspace.ChromoHubWorkspaceObject = $hxClasses["saturn.client.workspace.ChromoHubWorkspaceObject"] = function(object,name) {
	this.standaloneMode = false;
	this.newickStr = null;
	if(object == null) object = new saturn.core.domain.Alignment();
	if(name == null) name = "Phylogenetic tree";
	this.iconPath = "/static/js/images/tree_16.png";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.ChromoHubWorkspaceObject.__name__ = ["saturn","client","workspace","ChromoHubWorkspaceObject"];
saturn.client.workspace.ChromoHubWorkspaceObject.getNewMenuText = function() {
	return "Phylogenetic tree";
};
saturn.client.workspace.ChromoHubWorkspaceObject.getDefaultFolderName = function() {
	return "Trees";
};
saturn.client.workspace.ChromoHubWorkspaceObject.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.ChromoHubWorkspaceObject.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	newickStr: null
	,standaloneMode: null
	,__class__: saturn.client.workspace.ChromoHubWorkspaceObject
});
saturn.client.programs.chromohub.ChromoHubViewer = $hxClasses["saturn.client.programs.chromohub.ChromoHubViewer"] = function() {
	this.currentWedgeColour = null;
	this.enableColourAdjustWedge = false;
	this.config = new phylo.PhyloCanvasConfiguration();
	this.drawingMode = saturn.client.programs.chromohub.ChromoHubDrawingMode.CIRCULAR;
	this.subtreeName = null;
	this.enableColourAdjust = false;
	this.currentAdjustmentColour = null;
	this.enableEditMode = true;
	this.standaloneMode = false;
	this.tipOfDay = true;
	this.recovered = false;
	this.userDomainMessage = true;
	this.userMessage = true;
	this.scale = 1.0;
	this.tipActive = 0;
	this.newickStr = "";
	saturn.client.programs.SimpleExtJSProgram.call(this);
};
saturn.client.programs.chromohub.ChromoHubViewer.__name__ = ["saturn","client","programs","chromohub","ChromoHubViewer"];
saturn.client.programs.chromohub.ChromoHubViewer.getQuickLaunchItems = function() {
	return [{ iconCls : "x-btn-tree", html : "Phylogenetic<br/>ViewerA", cls : "quickLaunchButton", handler : function() {
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(new saturn.client.workspace.ChromoHubWorkspaceObject(new saturn.core.domain.Alignment(),"Tree"),true);
	}, tooltip : { dismissDelay : 10000, text : "Generate a phylogenetic tree from DNA or Protein sequences"}}];
};
saturn.client.programs.chromohub.ChromoHubViewer.__super__ = saturn.client.programs.SimpleExtJSProgram;
saturn.client.programs.chromohub.ChromoHubViewer.prototype = $extend(saturn.client.programs.SimpleExtJSProgram.prototype,{
	rootNode: null
	,theComponent: null
	,radialR: null
	,internalFrameId: null
	,currentView: null
	,canvas: null
	,dom: null
	,newickStr: null
	,geneMap: null
	,viewOptionsActive: null
	,controlToolsActive: null
	,tableActive: null
	,jsonTipsFile: null
	,tableAnnot: null
	,baseTable: null
	,tips: null
	,tipActive: null
	,treeName: null
	,scale: null
	,userMessage: null
	,userDomainMessage: null
	,treeType: null
	,centralTargetPanel: null
	,undolist: null
	,updatedlist: null
	,recovered: null
	,tipOfDay: null
	,standaloneMode: null
	,singleAppContainer: null
	,enableEditMode: null
	,currentAdjustmentColour: null
	,enableColourAdjust: null
	,subtreeName: null
	,drawingMode: null
	,config: null
	,enableColourAdjustWedge: null
	,currentWedgeColour: null
	,annotationManager: null
	,emptyInit: function() {
		var _g = this;
		saturn.client.programs.SimpleExtJSProgram.prototype.emptyInit.call(this);
		this.annotationManager = new saturn.client.programs.chromohub.ChromoHubAnnotationManager(this);
		this.config.enableTools = true;
		this.config.enableZoom = true;
		this.config.enableToolbar = true;
		this.undolist = [];
		this.updatedlist = [];
		this.config.highlightedGenes = new haxe.ds.StringMap();
		this.geneMap = new haxe.ds.StringMap();
		this.treeType = "domain";
		this.annotationManager.treeType = this.treeType;
		this.treeName = "";
		this.annotationManager.treeName = this.treeName;
		this.rootNode = null;
		this.getJSonViewOptions();
		this.internalFrameId = "INTERNAL_ALN_FRAME";
		var self = this;
		this.theComponent = Ext.create("Ext.panel.Panel",{ flex : 1, title : "ChromoHub Viewer", simpleDrag : true, width : "100%", height : "100%", region : "center", layout : "fit", items : [{ xtype : "component", itemId : this.internalFrameId, autoEl : { tag : "div"}, height : "100%", autoScroll : true, width : "100%"}], listeners : { 'afterrender' : function() {
			self.initialiseDOMComponent();
		}, 'render' : $bind(this,this.afterRender), 'resize' : function() {
			_g.redraw();
		}}, cls : "x-tree-background"});
		this.registerDropFolder("Sequences",saturn.client.workspace.WorkspaceObject,true);
	}
	,afterRender: function(panel) {
		var moving = "No";
		var leaving = false;
		var current_x;
		var current_y;
		var current_mx;
		var current_my;
		var new_x;
		var new_y;
		var new_mx;
		var new_my;
	}
	,newposition: function(new_x,new_y) {
		this.canvas.newPosition(new_x,new_y);
		return;
	}
	,redraw: function() {
		if(this.canvas == null) return; else this.canvas.redraw();
	}
	,setTreeFromNewickStr: function(myNewickStr) {
		if(myNewickStr == "" || myNewickStr == null) return;
		this.getObject().newickStr = myNewickStr;
		this.newickStr = myNewickStr;
		var parent = this.theComponent.down("component").getEl().dom;
		this.canvas = phylo.PhyloUtil.drawRadialFromNewick(this.newickStr,parent,this.config,this.annotationManager);
		this.rootNode = this.canvas.rootNode;
	}
	,checkAnnotationJSonData: function() {
		var a = this.getApplication();
		var atLeastOneBtn = false;
		var i = 0;
		var j = 0;
		var z = 0;
		var codesUsed;
		var codesUsed1;
		var namesUsed;
		var m = saturn.client.WorkspaceApplication.getApplication();
		codesUsed1 = new haxe.ds.IntMap();
		namesUsed = new haxe.ds.StringMap();
		if(this.annotationManager.jsonFile.btnGroup.length == 0) {
			a.debug("No buttons groups defined in JSON File");
			m.showMessage("Alert","Annotations JSon file is not correct.");
			return false;
		}
		while(i < this.annotationManager.jsonFile.btnGroup.length) {
			j = 0;
			while(j < this.annotationManager.jsonFile.btnGroup[i].buttons.length) {
				atLeastOneBtn = true;
				var btn = this.annotationManager.jsonFile.btnGroup[i].buttons[j];
				if(btn.isTitle == false) {
					if(btn.annotCode == null) {
						a.debug("Annotation without Code assigned");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if(codesUsed1.h.hasOwnProperty(btn.annotCode)) {
						a.debug("Annotation Code already used");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					} else codesUsed1.h[btn.annotCode] = true;
					if(btn.label == null) {
						a.debug("Annotation without Name/Label");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if(namesUsed.exists(btn.label)) {
						a.debug("Annotation Name already used");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					} else namesUsed.set(btn.label,true);
					if(btn.shape == null) {
						a.debug("Annotation without assigned SHAPE");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if(btn.shape != "image" && btn.shape != "text" && btn.shape != "cercle" && btn.shape != "square" && btn.shape != "html") {
						a.debug("Annotation SHAPE is not supported");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if(btn.shape == "image" && btn.annotImg == null) {
						a.debug("Annotation img path not specified");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if(btn.shape != "image" && btn.color == null) {
						a.debug("Annotation color not specified");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if(btn.hookName == null) {
						a.debug("Annotation mysql alias not specified");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if((btn.hasMethod != null || btn.divMethod != null || btn.familyMethod != "") && btn.hasClass == null) {
						a.debug("Annotation hasClass needed and not specified");
						m.showMessage("Alert","Annotations JSon file is not correct.");
						return false;
					}
					if(btn.options != null && btn.options.length > 0) {
						btn.submenu = true;
						var optsel = 10000;
						var z1 = 0;
					}
				}
				j++;
			}
			i++;
		}
		if(atLeastOneBtn == false) {
			a.debug("No buttons defined in JSON File");
			m.showMessage("Alert","Annotations JSon file is not correct.");
			return false;
		} else return true;
	}
	,fillTipswithJSonData: function() {
		var i = 0;
		var j = 0;
		var z = 0;
		this.tipActive = this.jsonTipsFile.active;
		this.tips = [];
		var b = 0;
		var _g1 = 0;
		var _g = this.jsonTipsFile.tips.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			this.tips.push({ position : this.jsonTipsFile.tips[i1].position, title : this.jsonTipsFile.tips[i1].title, html : this.jsonTipsFile.tips[i1].html});
		}
	}
	,updateLegend: function(bntJson,activate) {
		var currentAnnot = bntJson.annotCode;
		if(this.annotationManager.annotations[currentAnnot].legend != "") {
			if(activate == false) this.getApplication().getSingleAppContainer().addImageToLegend(this.annotationManager.annotations[currentAnnot].legend,currentAnnot); else this.getApplication().getSingleAppContainer().removeComponentFromLegend(currentAnnot);
		}
	}
	,zoomIn: function(activeAnnotation) {
		if(this.standaloneMode) {
			var container = this.getApplication().getSingleAppContainer();
			this.annotationManager.closeAnnotWindows();
			container.hideHelpingDiv();
		}
		this.canvas.zoomIn();
		this.newposition(0,0);
	}
	,adviseUser: function(b) {
		this.userMessage = b;
	}
	,adviseDomainUser: function(b) {
		this.userDomainMessage = b;
	}
	,zoomOut: function(activeAnnotation) {
		if(this.standaloneMode) {
			var container = this.getApplication().getSingleAppContainer();
			container.hideHelpingDiv();
			this.annotationManager.closeAnnotWindows();
		}
		this.canvas.zoomOut();
		this.newposition(0,0);
	}
	,setTitle: function(title) {
		this.theComponent.setTitle(title);
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,getRawComponent: function() {
		return this.theComponent;
	}
	,onFocus: function() {
		saturn.client.programs.SimpleExtJSProgram.prototype.onFocus.call(this);
		if(this.standaloneMode) this.chromohubOnFocus(); else this.treeViewInterface();
	}
	,addCanvasButton: function(button) {
		if(this.standaloneMode) this.getApplication().getSingleAppContainer().addComponentToCentralPanel(button); else this.getApplication().getToolBar().add(button);
	}
	,chromohubOnFocus: function() {
		var _g = this;
		if(this.annotationManager.jsonFile != null) {
			var res = this.checkAnnotationJSonData();
			if(res == false) {
				saturn.client.WorkspaceApplication.getApplication().showMessage("Alert","Annotations JSon file is not correct.");
				return;
			} else this.annotationManager.fillAnnotationwithJSonData();
			this.fillTipswithJSonData();
		}
		var obj = this.getActiveObject(saturn.client.workspace.ChromoHubWorkspaceObject);
		var container = this.getApplication().getSingleAppContainer();
		if(container == null) return;
		this.getApplication().hideMiddleSouthPanel();
		if(this.standaloneMode) this.currentView = 0; else this.currentView = 1;
		container.createControlToolBar();
		container.addElemToControlToolBar({ iconCls : "x-btn-export-single", handler : function() {
		}, tooltip : { dismissDelay : 10000, text : "Export table as xls"}});
		container.createMessageDomainWindow(this);
		container.hideControlToolBar();
		container.createEditToolBar();
		container.addElemToEditToolBar({ iconCls : "x-btn-undo-single", handler : function() {
		}, tooltip : { dismissDelay : 10000, text : "Undo last action"}});
		container.addElemToEditToolBar({ iconCls : "x-btn-save-single", handler : function() {
			if(_g.recovered == true) saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("hookDelTree",[{ 'domain' : _g.subtreeName, 'family' : _g.treeName}],null,false,function(db_results,error) {
				if(error == null) {
					if(_g.undolist.length > 0) {
						var blocks = [];
						var nodelist;
						nodelist = new haxe.ds.IntMap();
						var k = 0;
						while(_g.undolist.length > 0) {
							k = _g.undolist.length - 1;
							var auxpop = _g.undolist.pop();
							_g.updatedlist[k] = auxpop;
							k++;
							var d = auxpop.data;
							if(nodelist.h.hasOwnProperty(d.nodeId) == false) {
								var s = { 'nodeId' : d.nodeId, 'family' : _g.subtreeName, 'domain' : _g.treeType, 'nodeX' : auxpop.x, 'nodeY' : auxpop.y, 'angle' : auxpop.angle, 'clock' : auxpop.clock};
								blocks.push(s);
								nodelist.h[d.nodeId] = true;
							}
						}
						_g.updatedlist = [];
						saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("hookUpTree",blocks,null,false,function(db_results1,error1) {
							if(error1 == null) {
								_g.getApplication().showMessage("Message","Your changes have been saved.");
								_g.undolist = [];
								_g.updatedlist = [];
								_g.recovered = false;
								_g.config.editmode = false;
								container.removeComponentFromEditToolBar("recover");
								container.hideEditToolBar();
								_g.undolist = [];
								if(_g.viewOptionsActive == false) {
									_g.viewOptionsActive = true;
									container.showOptionsToolBar();
								} else {
									_g.viewOptionsActive = false;
									container.hideOptionsToolBar();
									container.hideSubMenuToolBar();
									if(_g.controlToolsActive == true) container.showControlToolBar();
								}
								_g.newposition(0,0);
							} else saturn.client.WorkspaceApplication.getApplication().debug(error1);
						});
					} else {
						_g.getApplication().showMessage("Message","Your changes have been saved.");
						_g.undolist = [];
						_g.recovered = false;
						_g.config.editmode = false;
						container.removeComponentFromEditToolBar("recover");
						container.hideEditToolBar();
						_g.undolist = [];
						_g.updatedlist = [];
						if(_g.viewOptionsActive == false) {
							_g.viewOptionsActive = true;
							container.showOptionsToolBar();
						} else {
							_g.viewOptionsActive = false;
							container.hideOptionsToolBar();
							container.hideSubMenuToolBar();
							if(_g.controlToolsActive == true) container.showControlToolBar();
						}
						_g.newposition(0,0);
					}
				} else saturn.client.WorkspaceApplication.getApplication().debug(error);
			}); else if(_g.undolist.length > 0) {
				var blocks1 = [];
				var nodelist1;
				nodelist1 = new haxe.ds.IntMap();
				var k1 = 0;
				while(_g.undolist.length > 0) {
					k1 = _g.undolist.length - 1;
					var auxpop1 = _g.undolist.pop();
					_g.updatedlist[k1] = auxpop1;
					k1++;
					var d1 = auxpop1.data;
					if(nodelist1.h.hasOwnProperty(d1.nodeId) == false) {
						var s1 = { 'nodeId' : d1.nodeId, 'family' : _g.treeName, 'domain' : _g.treeType, 'nodeX' : auxpop1.x, 'nodeY' : auxpop1.y, 'angle' : auxpop1.angle, 'clock' : auxpop1.clock};
						blocks1.push(s1);
						nodelist1.h[d1.nodeId] = true;
					}
				}
				saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("hookUpTree",blocks1,null,false,function(db_results2,error2) {
					if(error2 == null) {
						_g.getApplication().showMessage("Message","Your changes have been saved.");
						_g.undolist = [];
						_g.recovered = false;
						_g.config.editmode = false;
						container.hideEditToolBar();
						_g.undolist = [];
						if(_g.viewOptionsActive == false) {
							_g.viewOptionsActive = true;
							container.showOptionsToolBar();
						} else {
							_g.viewOptionsActive = false;
							container.hideOptionsToolBar();
							container.hideSubMenuToolBar();
							container.hideExportSubMenu();
							container.hideHelpingDiv();
							if(_g.controlToolsActive == true) container.showControlToolBar();
						}
						_g.newposition(0,0);
					} else saturn.client.WorkspaceApplication.getApplication().debug(error2);
				});
			}
		}, tooltip : { dismissDelay : 10000, text : "Save Tree"}});
		this.config.editmode = false;
		container.hideEditToolBar();
		this.undolist = [];
		container.createOptionsToolBar();
		container.hideOptionsToolBar();
		container.createSubMenuToolBar();
		container.createHelpingDiv();
		container.createExportSubMenu(this);
		container.hideSubMenuToolBar();
		container.hideExportSubMenu();
		container.hideHelpingDiv();
		container.createPopUpWindow();
		container.hidePopUpWindow();
		var mapFam = new haxe.ds.StringMap();
		this.createBtnsForLandingPage(true,mapFam);
		this.createTargetCentralPanel();
		container.addComponentToCentralPanel(this.centralTargetPanel);
		var modeToolBar = container.getModeToolBar();
		this.addBtnsToMainToolBar(false);
		var cookies = Cookies;
		var cookie = cookies.getJSON("tipday");
		if(cookie == null) this.showTipOfTheDay();
	}
	,refreshOptionsToolBar: function(active) {
		var container = this.getApplication().getSingleAppContainer();
		container.updateOptionsToolBar(active);
	}
	,addControlBtnsToCentralPanel: function() {
		var _g = this;
		if(this.standaloneMode) {
			var text;
			if(this.treeType == "domain") text = " tree based on alignment of the " + this.treeName + " domain"; else text = " tree based on alignment of full-length proteins";
			if(this.treeName != null) text = this.treeName + text;
			this.config.title = text;
			var container = this.getApplication().getSingleAppContainer();
		} else {
			this.addCanvasButton({ iconCls : "x-btn-export", text : "Export SVG", handler : function() {
				_g.exportSVG();
			}, tooltip : { dismissDelay : 10000, text : "Export tree as SVG (open in Illustrator or Inkscape)"}});
			this.addCanvasButton({ iconCls : "x-btn-export", text : "Export PNG", handler : function() {
				_g.exportPNG();
			}, tooltip : { dismissDelay : 10000, text : "Export tree as PNG"}});
			this.addCanvasButton({ iconCls : "x-btn-copy", text : "Update", handler : function() {
				_g.updateAlignment();
			}, tooltip : { dismissDelay : 10000, text : "Update tree with current sequences"}});
			this.addCanvasButton({ iconCls : "x-btn-copy", text : "Import Protein", handler : function() {
				_g.addAllProteinSequencesFromWorkspace();
			}, tooltip : { dismissDelay : 10000, text : "Import all protein sequences from the workspace (click update to update tree)"}});
			this.addCanvasButton({ iconCls : "x-btn-copy", text : "Import DNA", handler : function() {
				_g.addAllDNASequencesFromWorkspace();
			}, tooltip : { dismissDelay : 10000, text : "Import all DNA sequences from the workspace (click update to update tree)"}});
			this.addCanvasButton({ cls : "x-btn-magplus", xtype : "button", handler : function() {
				_g.zoomIn(_g.annotationManager.activeAnnotation);
			}, tooltip : { dismissDelay : 10000, text : "Zoom in on tree"}});
			this.addCanvasButton({ cls : "x-btn-magminus", xtype : "button", handler : function() {
				_g.zoomOut(_g.annotationManager.activeAnnotation);
			}, tooltip : { dismissDelay : 10000, text : "Zoom out of tree"}});
		}
	}
	,redrawTree: function() {
		this.setTreeFromNewickStr(this.newickStr);
	}
	,updateAlignment: function() {
		var _g = this;
		var self = this;
		var objectIds = this.getState().getReferences("Sequences");
		var strBuf = new StringBuf();
		var _g1 = 0;
		while(_g1 < objectIds.length) {
			var objectId = objectIds[_g1];
			++_g1;
			var w0 = this.getWorkspace().getObject(objectId);
			if(js.Boot.__instanceof(w0,saturn.client.workspace.DNAWorkspaceObject)) {
				var object = this.getWorkspace().getObjectSafely(objectId,saturn.client.workspace.DNAWorkspaceObject);
				strBuf.add(">" + w0.getName() + "\n" + object.getObject().getSequence() + "\n");
			} else if(js.Boot.__instanceof(w0,saturn.client.workspace.ProteinWorkspaceObject)) {
				var object1;
				object1 = js.Boot.__cast(w0 , saturn.client.workspace.ProteinWorkspaceObject);
				strBuf.add(">" + w0.getName() + "\n" + object1.getObject().getSequence() + "\n");
			} else {
				var d = w0;
				strBuf.add(">" + Std.string(d.getName()) + "\n" + Std.string(d.getSequence()) + "\n");
			}
		}
		saturn.client.BioinformaticsServicesClient.getClient().sendPhyloReportRequest(strBuf.b,function(response,error) {
			if(error == null) {
				var phyloReport = response.json.phyloReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + phyloReport;
				Ext.Ajax.request({ url : dstURL, success : function(response1,opts) {
					var obj = response1.responseText;
					self.setTreeFromNewickStr(obj);
				}, failure : function(response2,opts1) {
				}});
			} else _g.getApplication().showMessage("Tree generation error",error);
		});
	}
	,addAllDNASequencesFromWorkspace: function() {
		this.registerAllFromWorkspace(saturn.client.workspace.DNAWorkspaceObject,"Sequences");
	}
	,addAllProteinSequencesFromWorkspace: function() {
		this.registerAllFromWorkspace(saturn.client.workspace.ProteinWorkspaceObject,"Sequences");
	}
	,treeViewInterface: function() {
		var container = this.getApplication().getSingleAppContainer();
		if(!this.standaloneMode || this.currentView != 1) {
			if(this.standaloneMode && this.treeName == "" && this.newickStr == "") {
				if(this.currentView == 0) this.getApplication().showMessage("Alert","Please select a family"); else if(this.currentView == 2) saturn.client.WorkspaceApplication.getApplication().showMessage("Alert","This functionality is not available. Please select a family domain from Home page.");
				return false;
			} else {
				this.currentView = 1;
				if(this.standaloneMode) {
					if(this.canvas != null) {
						this.canvas.destroy();
						this.canvas = null;
					}
					container.setCentralComponent(this.theComponent);
					this.theComponent.doLayout();
					if($bind(container,container.getControlToolBar) != null) container.hideControlToolBar();
					this.viewOptionsActive = true;
					var modeToolBar = container.getModeToolBar();
					container.clearModeToolBar();
					this.addBtnsToMainToolBar(false);
					if($bind(container,container.getOptionsToolBar) != null) {
						this.annotationManager.createViewOptions();
						container.clearOptionsToolBar();
						container.addElemToOptionsToolBar(this.annotationManager.viewOptions);
						container.optionsToolBar.doLayout();
						container.showOptionsToolBar();
					}
					container.legendPanel = null;
					container.createLegendPanel();
					var i;
					var needToExpandLegend = false;
					var _g1 = 0;
					var _g = this.annotationManager.activeAnnotation.length;
					while(_g1 < _g) {
						var i1 = _g1++;
						if(this.annotationManager.activeAnnotation[i1] == true) {
							needToExpandLegend = true;
							container.addImageToLegend(this.annotationManager.annotations[i1].legend,i1);
						}
					}
					if(needToExpandLegend == true) container.legendPanel.expand();
				}
				this.addControlBtnsToCentralPanel();
				if(this.standaloneMode) this.theComponent.doLayout();
				return true;
			}
		} else if(this.config.editmode == true) return true; else return false;
	}
	,renderTable: function() {
		if(!this.standaloneMode) return;
		var container = this.getApplication().getSingleAppContainer();
		this.config.editmode = false;
		container.hideEditToolBar();
		this.undolist = [];
		this.currentView = 2;
		if(this.canvas != null) {
			this.canvas.destroy();
			this.canvas = null;
		}
		container.setCentralComponent(this.theComponent);
		this.theComponent.doLayout();
		container.hideSubMenuToolBar();
		container.hideOptionsToolBar();
		var modeToolBar = container.getModeToolBar();
		container.clearModeToolBar();
		this.addBtnsToMainToolBar(true);
		this.generateAnnotTable();
	}
	,tableViewFunction: function() {
		var container = this.getApplication().getSingleAppContainer();
		container.hideExportSubMenu();
		container.hideHelpingDiv();
		this.annotationManager.closeAnnotWindows();
		if(this.currentView != 2) {
			if(this.annotationManager.annotations[1] != null && this.annotationManager.annotations[1].fromresults != null) this.annotationManager.annotations[1].fromresults[1] = 0;
			if(this.treeName == "") {
				if(this.annotationManager.searchedGenes.length == 0) saturn.client.WorkspaceApplication.getApplication().showMessage("Alert","Use the search box on your righ to add genes."); else this.renderTable();
			} else {
				var keepgoing = false;
				if(this.config.editmode == true) {
					if(this.undolist.length > 0) saturn.client.WorkspaceApplication.getApplication().userPrompt("Question","You are going to lose your changes. Do you want to continue?",$bind(this,this.renderTable)); else keepgoing = true;
				} else keepgoing = true;
				if(keepgoing == true) {
					container.showProgressBar();
					this.renderTable();
				}
			}
		} else this.generateAnnotTable();
	}
	,generateAnnotTable: function() {
		var _g = this;
		if(!this.standaloneMode) return;
		this.currentView = 2;
		var type = "";
		if(this.treeName == "" || this.newickStr == "") type = "genes"; else type = "family";
		var d;
		d = [];
		var ti = 0;
		this.annotationManager.fillInDataInAnnotTable(type,function(d1,error) {
			if(error != null) saturn.core.Util.debug("An error has occurred");
			if(d1 != null) {
				_g.tableAnnot = new saturn.core.Table();
				_g.tableAnnot.setFixedRowHeight(120);
				_g.tableAnnot.setData(d1);
				var title = "Annotation Table";
				if(_g.treeName != "") title = title + " for " + _g.treeName;
				_g.tableAnnot.setTitle(title);
				_g.tableAnnot.name = "Annotations Table";
				_g.baseTable = new saturn.client.programs.blocks.BaseTable(null,null,"Annotations Table",null,false,false);
				_g.baseTable.reconfigure(_g.tableAnnot.tableDefinition);
				_g.baseTable.addListener(function(event) {
					_g.annotationManager.closeAnnotWindows();
				});
				var tt = _g.baseTable.getComponent();
				tt.addCls("x-tableAnnot");
				var container = _g.getApplication().getSingleAppContainer();
				container.setCentralComponent(_g.theComponent);
				container.addComponentToCentralPanel(tt);
				_g.theComponent.doLayout();
				container.hideProgressBar();
			}
		});
	}
	,rebuildBtns: function(results) {
		var container = this.getApplication().getSingleAppContainer();
		container.setCentralComponent(this.theComponent);
		this.theComponent.doLayout();
		var mapFam;
		mapFam = new haxe.ds.StringMap();
		var i;
		var _g1 = 0;
		var _g = results.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			if(mapFam.exists(results[i1].family) == false) mapFam.set(results[i1].family,true);
		}
		this.createBtnsForLandingPage(false,mapFam);
		this.createTargetCentralPanel();
		container.addComponentToCentralPanel(this.centralTargetPanel);
		var centralPanel = container.getCentralPanel();
		centralPanel.doLayout();
	}
	,renderHome: function() {
		var _g = this;
		if(!this.standaloneMode) return;
		var container = this.getApplication().getSingleAppContainer();
		container.clearCentralPanel();
		container.hideHelpingDiv();
		var centralPanel = container.getCentralPanel();
		centralPanel.doLayout();
		this.config.editmode = false;
		container.hideEditToolBar();
		this.undolist = [];
		this.currentView = 0;
		var mapFam;
		mapFam = new haxe.ds.StringMap();
		this.createBtnsForLandingPage(false,mapFam);
		var itemslist = this.centralTargetPanel.items;
		itemslist.each(function(item,index,length) {
			_g.centralTargetPanel.remove(item,false);
		});
		this.centralTargetPanel.doLayout();
		this.treeTypeSelection.doLayout();
		this.createTargetCentralPanel();
		centralPanel.doLayout();
		if(this.canvas != null) {
			this.canvas.destroy();
			this.canvas = null;
		}
		container.setCentralComponent(this.theComponent);
		this.theComponent.doLayout();
		container.hideExportSubMenu();
		if($bind(container,container.getOptionsToolBar) != null) container.hideOptionsToolBar();
		if($bind(container,container.getSubMenuToolBar) != null) container.hideSubMenuToolBar();
		if($bind(container,container.getControlToolBar) != null) container.hideControlToolBar();
		var modeToolBar = container.getModeToolBar();
		container.clearModeToolBar();
		this.addBtnsToMainToolBar(false);
		container.addComponentToCentralPanel(this.centralTargetPanel);
		centralPanel.doLayout();
	}
	,showTipOfTheDay: function() {
		if(this.tips == null || this.tips.length == 0) return;
		var container = this.getApplication().getSingleAppContainer();
		var mydom;
		mydom = window.document.childNodes[0];
		var top;
		var left;
		var width;
		var height;
		var w = mydom.clientWidth;
		width = w * 0.6 | 0;
		left = w * 0.2 | 0;
		var h = mydom.clientHeight;
		height = h | 0;
		top = h * 0.15 | 0;
		if(container.getTipWindow() == null) {
			var title = this.tips[this.tipActive].title;
			var html = this.tips[this.tipActive].html;
			var text = "<h2>" + title + "</h2>" + html;
			container.createTipWindow(this,top,left,width,height,text);
		} else container.showTipWindow();
	}
	,addBtnsToMainToolBar: function(searchField) {
		var _g = this;
		if(!this.standaloneMode) return;
		var container = this.getApplication().getSingleAppContainer();
		container.addElemToModeToolBar({ cls : this.currentView == 0?"btn-selected":"", xtype : "button", text : "Home", handler : function() {
			if(_g.currentView != 0) {
				var container1 = _g.getApplication().getSingleAppContainer();
				container1.hideExportSubMenu();
				container1.hideHelpingDiv();
				_g.annotationManager.closeAnnotWindows();
				if(_g.annotationManager.annotations[1] != null && _g.annotationManager.annotations[1].fromresults != null) _g.annotationManager.annotations[1].fromresults[1] = 0;
				var keepgoing = false;
				if(_g.config.editmode == true) {
					if(_g.undolist.length > 0) saturn.client.WorkspaceApplication.getApplication().userPrompt("Question","You are going to lose your changes. Do you want to continue?",$bind(_g,_g.renderHome)); else keepgoing = true;
				} else keepgoing = true;
				if(keepgoing == true) _g.renderHome();
			}
		}, tooltip : { dismissDelay : 10000, text : "Protein Family Selection"}});
		container.addElemToModeToolBar({ cls : this.currentView == 1?"btn-selected":"", xtype : "button", text : "Tree View", handler : function() {
			if(_g.treeName == "") {
				if(_g.currentView == 0) _g.getApplication().showMessage("Alert","Please select a family"); else if(_g.currentView == 2) saturn.client.WorkspaceApplication.getApplication().showMessage("Alert","This functionality is not available. Please select a family domain from Home page.");
			} else {
				_g.annotationManager.menuScroll = 0;
				if(_g.annotationManager.annotations[1] != null && _g.annotationManager.annotations[1].fromresults != null) _g.annotationManager.annotations[1].fromresults[1] = 0;
				_g.showTree(_g.newickStr);
				var elem = window.document.getElementById("optionToolBarId");
				elem.scrollTop = _g.annotationManager.menuScroll;
			}
		}, tooltip : { dismissDelay : 10000, text : "Phylogenetic Viewer"}});
		container.addElemToModeToolBar({ cls : this.currentView == 2?"btn-selected":"", xtype : "button", text : "Annotation Table", handler : $bind(this,this.tableViewFunction), tooltip : { dismissDelay : 10000, text : "Annotation List"}});
		if(searchField == true && this.treeName == "") {
			container.addElemToModeToolBar({ xtype : "label", text : "Add Genes", cls : "addGene-menu-title", handler : function() {
			}, tooltip : { text : "", dismissDelay : 0}, iconCls : ""});
			var searchFieldObj = this.getApplication().getGlobalSearchFieldObj();
			searchFieldObj.setValue("");
			container.addElemToModeToolBar(searchFieldObj);
		}
		container.addElemToModeToolBar({ cls : this.currentView == 3?"btn-selected":"", xtype : "button", text : "Help", handler : function() {
			var keepgoing1 = false;
			var container2 = _g.getApplication().getSingleAppContainer();
			container2.hideHelpingDiv();
			if(_g.config.editmode == true) {
				if(_g.undolist.length > 0) saturn.client.WorkspaceApplication.getApplication().userPrompt("Question","You are going to lose your changes. Do you want to continue?",function() {
					keepgoing1 = false;
					_g.config.editmode = false;
					container2.viewClose(true);
					container2.hideEditToolBar();
					_g.undolist = [];
					if(_g.viewOptionsActive == false) {
						_g.viewOptionsActive = true;
						container2.showOptionsToolBar();
					}
					_g.newposition(0,0);
				}); else keepgoing1 = true;
			} else keepgoing1 = true;
			if(keepgoing1 == true) {
				_g.config.editmode = false;
				container2.hideEditToolBar();
				_g.undolist = [];
				if(_g.viewOptionsActive == false) {
					_g.viewOptionsActive = true;
					container2.showOptionsToolBar();
				}
				_g.showTipOfTheDay();
			}
		}, tooltip : { dismissDelay : 10000, text : "Help"}});
	}
	,redrawTable: function() {
		var _g = this;
		var type = "";
		if(this.treeName == "" || this.newickStr == "") type = "genes"; else type = "family";
		var leaves;
		if(type == "family") leaves = this.canvas.rootNode.targets; else leaves = this.annotationManager.searchedGenes;
		var d = this.annotationManager.dataforTable(this.annotationManager.annotations,leaves);
		this.tableAnnot = new saturn.core.Table();
		this.tableAnnot.setFixedRowHeight(120);
		this.tableAnnot.setData(d);
		var title = "Annotation Table";
		if(this.treeName != "") title = title + " for " + this.treeName;
		this.tableAnnot.setTitle(title);
		this.tableAnnot.name = "Annotations Table";
		this.baseTable = new saturn.client.programs.blocks.BaseTable(null,null,"Annotations Table",null,false,false);
		this.baseTable.reconfigure(this.tableAnnot.tableDefinition);
		this.baseTable.addListener(function(event) {
			_g.annotationManager.closeAnnotWindows();
		});
		var tt = this.baseTable.getComponent();
		tt.addCls("x-tableAnnot");
		var container = this.getApplication().getSingleAppContainer();
		container.setCentralComponent(this.theComponent);
		container.addComponentToCentralPanel(tt);
		this.theComponent.doLayout();
		container.hideProgressBar();
	}
	,generateFamilyDomainList: function(families) {
		var i;
		var tt;
		tt = "";
		var _g1 = 0;
		var _g = families.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			tt += "<a id=\"myLink\" title=\"Click to visualize family domain tree\"  href=\"#\" onclick=\"app.getActiveProgram().changeToFamilyDomain('" + Std.string(families[i1].family) + "')\";return false;\">" + Std.string(families[i1].family) + "</a> ";
		}
		return tt;
	}
	,changeToFamilyDomain: function(treeName) {
		var _g = this;
		saturn.client.WorkspaceApplication.getApplication().userPrompt("Question","You are going to lose your gene list. Do you want to continue?",function() {
			_g.treeName = treeName;
			_g.annotationManager.searchedGenes = [];
			_g.geneMap = new haxe.ds.StringMap();
			_g.generateTree(treeName,_g.treeType);
		});
	}
	,myDoLayout: function(el) {
		el.doLayout();
	}
	,createTargetCentralPanel: function() {
		var _g = this;
		this.centralTargetPanel = Ext.create("Ext.panel.Panel",{ region : "center", cls : "x-page-targetclass", autoScroll : true, listeners : { resize : { fn : function(el) {
			_g.myDoLayout(el);
		}}, render : { fn : function(el1) {
			_g.myDoLayout(el1);
		}}}});
		var title = "Search/Add Genes";
		this.centralTargetPanel.add({ xtype : "label", text : title, cls : "searchgene-title", handler : function() {
		}, tooltip : { text : "", dismissDelay : 0}, iconCls : ""});
		var sobj = this.getApplication().getGlobalSearchFieldObj();
		this.centralTargetPanel.add(sobj);
		this.centralTargetPanel.add(this.treeTypeSelection);
		this.centralTargetPanel.add({ xtype : "label", text : "Chemical Modification of Proteins", cls : "targetclass-title"});
		this.centralTargetPanel.add(Ext.create("Ext.panel.Panel",{ width : "100%", layout : "hbox", bodyPadding : "10px 0px", cls : "x-table-targeticons", defaults : { frame : true, bodyPadding : 10}, items : [{ title : "Writers", flex : 3, xtype : "panel", items : this.chmodproWriters},{ title : "Readers", flex : 6, xtype : "panel", items : this.chmodproReaders},{ title : "Erasers", flex : 3, xtype : "panel", items : this.chmodproErasers}]}));
		this.centralTargetPanel.doLayout();
		this.centralTargetPanel.add(Ext.create("Ext.panel.Panel",{ layout : "hbox", cls : "x-table-targetgroup", defaults : { frame : false, bodyPadding : 0}, items : [{ title : "Chemical Modifications of DNA", flex : 4, margin : "0 10 0 0", xtype : "panel", layout : "column", cls : "chmodDRnagroup", items : this.chmodDna},{ title : "Chemical Modifications of RNA", flex : 4, margin : "0 10 0 0", xtype : "panel", layout : "column", cls : "chmodDRnagroup", items : this.chmodRna}]}));
		this.centralTargetPanel.doLayout();
		var items = [{ title : "Chromation Remodelling", flex : 2, margin : "0 10 0 0", xtype : "panel", items : this.chromatin},{ title : "Histones", flex : 1, margin : "0 10 0 0", xtype : "panel", items : this.histones},{ title : "WDR", flex : 1, margin : "0 10 0 0", xtype : "panel", items : this.wdr},{ title : "NUDIX", flex : 3, margin : "0 10 0 0", xtype : "panel", items : this.nudix},{ title : " ", flex : 1, margin : "0 10 0 0", xtype : "panel", cls : "x-target-addmore", items : this.addicon}];
		this.centralTargetPanel.add(Ext.create("Ext.panel.Panel",{ layout : "hbox", bodyPadding : 10, cls : "x-table-targetlasticons", defaults : { frame : false, bodyPadding : "10 10 10 0"}, items : items}));
		this.centralTargetPanel.doLayout();
		this.centralTargetPanel.add({ xtype : "panel", html : "If you find this resource helpful in your research, thank you for citing the following article:<br>\r\n                   Liu L, Zhen XT, Denton E, Marsden BD, Schapira M., Bioinformatics (2012): <b>ChromoHub: a data hub for navigators of chromatin-mediated signalling</b> <a href=\"http://www.ncbi.nlm.nih.gov/pubmed/22718786\" target=\"_blank\">[pubmed]</a>", cls : "targetclass-citation"});
	}
	,setAlignmentURL: function(alignmentURL) {
		var frame = this.theComponent.getComponent(this.internalFrameId).getEl().dom;
		frame.src = alignmentURL;
		this.getActiveAlignmentObject().setAlignmentURL(alignmentURL);
	}
	,getActiveAlignmentObject: function() {
		var activeObject = saturn.client.programs.SimpleExtJSProgram.prototype.getActiveObject.call(this,saturn.client.workspace.ChromoHubWorkspaceObject);
		if(activeObject != null) {
			var w0;
			w0 = js.Boot.__cast(activeObject , saturn.client.workspace.ChromoHubWorkspaceObject);
			return w0.getObject();
		} else return null;
	}
	,setActiveObject: function(objectId) {
		saturn.client.programs.SimpleExtJSProgram.prototype.setActiveObject.call(this,objectId);
		this.standaloneMode = this.getObject().standloneMode;
		if(!this.standaloneMode) this.setTreeFromNewickStr(this.getObject().newickStr);
	}
	,exportPNG: function() {
	}
	,exportSVG: function() {
	}
	,getCentralPanelLayout: function() {
		return "hbox";
	}
	,showTree: function(myNewickStr) {
		var _g = this;
		var container = null;
		if(this.standaloneMode) {
			container = this.getApplication().getSingleAppContainer();
			container.hideHelpingDiv();
			if(container.getExportSubMenu() != null) container.hideExportSubMenu();
			this.annotationManager.closeAnnotWindows();
		}
		var keepgoing = false;
		if(this.recovered == true) keepgoing = true; else if(this.config.editmode == true) {
			if(this.undolist.length > 0) saturn.client.WorkspaceApplication.getApplication().userPrompt("Question","You are going to lose your changes. Do you want to continue?",function() {
				keepgoing = false;
				_g.config.editmode = false;
				if(_g.standaloneMode) {
					container.viewClose(true);
					container.hideEditToolBar();
				}
				_g.undolist = [];
				if(_g.viewOptionsActive == false) {
					_g.viewOptionsActive = true;
					if(_g.standaloneMode) container.showOptionsToolBar();
				}
				_g.annotationManager.activeAnnotation = [];
				var go = _g.treeViewInterface();
				if(go == true) {
					var a = _g.annotationManager.annotations;
					_g.setTreeFromNewickStr(myNewickStr);
					_g.rootNode.targetFamily = _g.treeName;
				}
				_g.newposition(0,0);
				var elem = window.document.getElementById("optionToolBarId");
				elem.scrollTop = _g.annotationManager.menuScroll;
			}); else keepgoing = true;
		} else keepgoing = true;
		if(keepgoing == true) {
			if(this.recovered == false) {
				this.undolist = [];
				if(this.viewOptionsActive == false) {
					this.viewOptionsActive = true;
					if(this.standaloneMode) container.showOptionsToolBar();
					var elem1 = window.document.getElementById("optionToolBarId");
					elem1.scrollTop = this.annotationManager.menuScroll;
				}
			}
			this.annotationManager.activeAnnotation = [];
			var go1 = this.treeViewInterface();
			if(this.recovered == false) {
				this.config.editmode = false;
				if(this.standaloneMode) container.hideEditToolBar();
			}
			if(go1 == true) {
				var a1 = this.annotationManager.annotations;
				this.setTreeFromNewickStr(myNewickStr);
				if(this.standaloneMode) container.viewClose(true);
				this.rootNode.targetFamily = this.treeName;
			}
			this.newposition(0,0);
			var nav = window.navigator.appName;
			if(this.standaloneMode) {
				var elem2 = window.document.getElementById("optionToolBarId");
				elem2.scrollTop = this.annotationManager.menuScroll;
			}
		}
	}
	,showSearchedGenes: function(targetId) {
		var _g = this;
		if(this.currentView == 0) saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("getFamilies",{ gene : "%" + targetId + "%"},null,true,function(db_results,error) {
			if(error == null) _g.rebuildBtns(db_results); else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	}
	,showAddedGenes: function(targetId) {
		this.treeName = "";
		this.annotationManager.treeName = "";
		this.treeType = "gene";
		this.newickStr = "";
		if(this.geneMap.exists(targetId) == true) saturn.client.WorkspaceApplication.getApplication().showMessage("Alert","This gene already exists in the gene list."); else {
			this.annotationManager.searchedGenes[this.annotationManager.searchedGenes.length] = targetId;
			var geneNode = new phylo.PhyloTreeNode(null,targetId,true,0);
			geneNode.l = 1;
			geneNode.annotations = [];
			geneNode.activeAnnotation = [];
			this.geneMap.set(targetId,geneNode);
			if(this.currentView == 0) {
				this.treeName = "";
				this.annotationManager.treeName = "";
				this.tableViewFunction();
			} else if(this.currentView == 2) this.generateAnnotTable();
		}
	}
	,generateTree: function(name,type,subtreeName) {
		var _g = this;
		this.annotationManager.treeName = name;
		this.annotationManager.subtreeName = subtreeName;
		this.annotationManager.treeType = this.treeType;
		this.config.drawingMode = phylo.PhyloDrawingMode.CIRCULAR;
		saturn.client.WorkspaceApplication.getApplication().debug(name);
		this.annotationManager.searchedGenes = [];
		this.config.highlightedGenes = new haxe.ds.StringMap();
		this.geneMap = new haxe.ds.StringMap();
		if((name == "KAT" || name == "E1" || name == "E2" || name == "NON_USP" || name == "USP" || name == "Histone" || name == "MACRO" || name == "WDR" || name == "NUDIX") && type == "domain") {
			if(this.userDomainMessage == true) {
				var container = this.getApplication().getSingleAppContainer();
				container.showMessageDomainWindow();
			}
			this.treeType = "gene";
			this.annotationManager.treeType = this.treeType;
			type = this.treeType;
		}
		if(subtreeName == null) subtreeName = name;
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("getNewickStr",{ family : subtreeName, type : type},null,true,function(db_results,error) {
			if(error == null) {
				if(_g.treeName.indexOf("/") != -1) {
					var aux = _g.treeName.split("/");
					_g.treeName = aux[1];
					_g.annotationManager.treeName = _g.treeName;
				}
				_g.setNewickStr(db_results[0].newickstr);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	}
	,setNewickStr: function(newickStr) {
		var _g = this;
		var myNewickStr = newickStr;
		if(myNewickStr == "") saturn.client.WorkspaceApplication.getApplication().debug("newickstr is empty"); else {
			this.showTree(myNewickStr);
			if(this.recovered == false && this.treeName != null) saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("getTreeUpdates",{ family : this.subtreeName, domain : this.treeType},null,false,function(results,error) {
				if(error == null && results.length != 0) {
					var i = 0;
					var auxlist;
					auxlist = [];
					_g.updatedlist = [];
					var _g2 = 0;
					var _g1 = results.length;
					while(_g2 < _g1) {
						var i1 = _g2++;
						_g.updatedlist.push(results[i1]);
						auxlist.push(results[i1]);
					}
					var j = 0;
					while(auxlist.length > 0) {
						var node;
						var alpha;
						var n;
						var auxpop = auxlist.pop();
						var z = 0;
						var d;
						d = null;
						var _g21 = 0;
						var _g11 = _g.rootNode.screen.length;
						while(_g21 < _g11) {
							var z1 = _g21++;
							if(_g.rootNode.screen[z1].nodeId == auxpop.nodeId) d = _g.rootNode.screen[z1];
						}
						node = _g.rootNode.nodeIdToNode.h[auxpop.nodeId];
						node.x = auxpop.nodeX;
						node.y = auxpop.nodeY;
						node.angle = auxpop.angle;
						if(auxpop.clock == true) alpha = 0.3; else alpha = -0.3;
						node.x = (node.x - d.parentx) * Math.cos(alpha) - (node.y - d.parenty) * Math.sin(alpha) + d.parentx;
						node.y = (node.x - d.parentx) * Math.sin(alpha) + (node.y - d.parenty) * Math.cos(alpha) + d.parenty;
						node.angle = node.angle + alpha;
						n = node.angle;
						var i2 = 0;
						while(i2 < node.children.length) {
							node.children[i2].wedge = node.children[i2].l / node.children[i2].root.l * 2 * Math.PI + Math.PI / 20;
							node.children[i2].angle = n;
							n = n + node.children[i2].wedge;
							if(_g.drawingMode == saturn.client.programs.chromohub.ChromoHubDrawingMode.STRAIGHT) node.children[i2].preOrderTraversal2(0); else if(_g.drawingMode == saturn.client.programs.chromohub.ChromoHubDrawingMode.CIRCULAR) node.children[i2].preOrderTraversal(0);
							i2++;
						}
						_g.newposition(0,0);
					}
				} else if(error != null) saturn.client.WorkspaceApplication.getApplication().debug("Error getting the tree updates from the db: " + error); else saturn.client.WorkspaceApplication.getApplication().debug("No tree updates from the db");
			});
		}
	}
	,treeTypeSelection: null
	,chmodproWriters: null
	,chmodproReaders: null
	,chmodproErasers: null
	,chmodDnaWriters: null
	,chmodDnaReaders: null
	,chmodDnaErasers: null
	,chmodRnaWriters: null
	,chmodRnaReaders: null
	,chmodRnaErasers: null
	,nudix: null
	,chromatin: null
	,histones: null
	,wdr: null
	,addicon: null
	,chmodDna: null
	,chmodRna: null
	,ubiButtons: null
	,createBtnsForLandingPage: function(first,mapFam) {
		var _g = this;
		var ge = false;
		var dom = true;
		if(this.treeType != "domain") {
			ge = true;
			dom = false;
		}
		if(first == true) {
			this.treeTypeSelection = null;
			this.treeTypeSelection = Ext.create("Ext.form.Panel",{ bodyPadding : 10, id : "treeTypeCmp", width : 300, items : [{ xtype : "radiogroup", fieldLabel : "View trees based on alignment of", cls : "x-treetype-select", defaults : { flex : 1}, id : "treeType", layout : "hbox", items : [{ boxLabel : "the specified domain", name : "type", inputValue : "domain", id : "domain-radio", checked : dom, handler : function(e) {
				if(e.getValue()) {
					_g.treeType = "domain";
					_g.annotationManager.treeType = _g.treeType;
				}
			}},{ boxLabel : "full-length proteins", name : "type", inputValue : "gene", checked : ge, id : "gene-radio", handler : function(e1) {
				if(e1.getValue()) {
					_g.treeType = "gene";
					_g.annotationManager.treeType = _g.treeType;
				}
			}}], listeners : { change : function(field,newValue,oldValue) {
				_g.treeType = newValue.type;
				_g.annotationManager.treeType = _g.treeType;
				_g.renderHome();
			}}}]});
		} else {
			this.treeTypeSelection.items.items[0].items.items[0].setValue(dom);
			this.treeTypeSelection.items.items[0].items.items[1].setValue(ge);
		}
		this.chmodproWriters = [];
		this.chmodproWriters = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.HMT != null?mapFam.existsReserved("HMT"):mapFam.h.hasOwnProperty("HMT")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-pmt":(__map_reserved.PMT != null?mapFam.existsReserved("PMT"):mapFam.h.hasOwnProperty("PMT")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-pmt-gene":(__map_reserved.PMT != null?mapFam.existsReserved("PMT"):mapFam.h.hasOwnProperty("PMT")) == false && this.treeType == "domain"?"x-btn-target-pmt":"x-btn-target-pmt-gene", handler : function() {
			_g.treeName = "PMT/HMT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "PMT: Methylate lysines"}}];
		if(this.treeType == "domain") this.chmodproWriters.push({ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.HMT != null?mapFam.existsReserved("HMT"):mapFam.h.hasOwnProperty("HMT")) == true?"x-btn-target-found x-btn-target-pmt2":"x-btn-target-pmt2", handler : function() {
			_g.treeName = "PMT-2/HMT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "PMT: Methylate lysines"}});
		this.chmodproWriters.push({ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.KAT != null?mapFam.existsReserved("KAT"):mapFam.h.hasOwnProperty("KAT")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-kat":(__map_reserved.KAT != null?mapFam.existsReserved("KAT"):mapFam.h.hasOwnProperty("KAT")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-kat-gene":(__map_reserved.KAT != null?mapFam.existsReserved("KAT"):mapFam.h.hasOwnProperty("KAT")) == false && this.treeType == "domain"?"x-btn-target-kat":"x-btn-target-kat-gene", handler : function(e2) {
			_g.treeName = "KAT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : this.treeType == "gene"?"KAT: Acetylate lysines":"There is no domain-based alignment for this family. Select \"full length proteins\" above to see access this tree."}});
		this.chmodproWriters.push({ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.PARP != null?mapFam.existsReserved("PARP"):mapFam.h.hasOwnProperty("PARP")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-parp":(__map_reserved.PARP != null?mapFam.existsReserved("PARP"):mapFam.h.hasOwnProperty("PARP")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-parp-gene":(__map_reserved.PARP != null?mapFam.existsReserved("PARP"):mapFam.h.hasOwnProperty("PARP")) == false && this.treeType == "domain"?"x-btn-target-parp":"x-btn-target-parp-gene", handler : function() {
			_g.treeName = "PARP";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "PARP: ADP - ribosylate proteins"}});
		this.chmodproReaders = [];
		this.chmodproReaders = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.ADD != null?mapFam.existsReserved("ADD"):mapFam.h.hasOwnProperty("ADD")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-add":(__map_reserved.ADD != null?mapFam.existsReserved("ADD"):mapFam.h.hasOwnProperty("ADD")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-add-gene":(__map_reserved.ADD != null?mapFam.existsReserved("ADD"):mapFam.h.hasOwnProperty("ADD")) == false && this.treeType == "domain"?"x-btn-target-add":"x-btn-target-add-gene", handler : function() {
			_g.treeName = "ADD";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "ADD"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.BAH != null?mapFam.existsReserved("BAH"):mapFam.h.hasOwnProperty("BAH")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-bah":(__map_reserved.BAH != null?mapFam.existsReserved("BAH"):mapFam.h.hasOwnProperty("BAH")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-bah-gene":(__map_reserved.BAH != null?mapFam.existsReserved("BAH"):mapFam.h.hasOwnProperty("BAH")) == false && this.treeType == "domain"?"x-btn-target-bah":"x-btn-target-bah-gene", handler : function() {
			_g.treeName = "BAH";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "BAH: Read methyl-lysines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.BROMO != null?mapFam.existsReserved("BROMO"):mapFam.h.hasOwnProperty("BROMO")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-bromo":(__map_reserved.BROMO != null?mapFam.existsReserved("BROMO"):mapFam.h.hasOwnProperty("BROMO")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-bromo-gene":(__map_reserved.BROMO != null?mapFam.existsReserved("BROMO"):mapFam.h.hasOwnProperty("BROMO")) == false && this.treeType == "domain"?"x-btn-target-bromo":"x-btn-target-bromo-gene", handler : function() {
			_g.treeName = "BROMO";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "BROMO: Read Acetyl-lysines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.CW != null?mapFam.existsReserved("CW"):mapFam.h.hasOwnProperty("CW")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-cw":(__map_reserved.CW != null?mapFam.existsReserved("CW"):mapFam.h.hasOwnProperty("CW")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-cw-gene":(__map_reserved.CW != null?mapFam.existsReserved("CW"):mapFam.h.hasOwnProperty("CW")) == false && this.treeType == "domain"?"x-btn-target-cw":"x-btn-target-cw-gene", handler : function() {
			_g.treeName = "CW";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "CW: methyl-lysine reader"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.CHROMO != null?mapFam.existsReserved("CHROMO"):mapFam.h.hasOwnProperty("CHROMO")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-chromo":(__map_reserved.CHROMO != null?mapFam.existsReserved("CHROMO"):mapFam.h.hasOwnProperty("CHROMO")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-chromo-gene":(__map_reserved.CHROMO != null?mapFam.existsReserved("CHROMO"):mapFam.h.hasOwnProperty("CHROMO")) == false && this.treeType == "domain"?"x-btn-target-chromo":"x-btn-target-chromo-gene", handler : function() {
			_g.treeName = "CHROMO";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "CHROMO: Read methyl-lysines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.MACRO != null?mapFam.existsReserved("MACRO"):mapFam.h.hasOwnProperty("MACRO")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-macro":(__map_reserved.MACRO != null?mapFam.existsReserved("MACRO"):mapFam.h.hasOwnProperty("MACRO")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-macro-gene":(__map_reserved.MACRO != null?mapFam.existsReserved("MACRO"):mapFam.h.hasOwnProperty("MACRO")) == false && this.treeType == "domain"?"x-btn-target-macro":"x-btn-target-macro-gene", handler : function() {
			_g.treeName = "MACRO";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : this.treeType == "gene"?"MACRO: bind ADP-ribosylated proteins":"There is no domain-based alignment for this family. Select \"full length proteins\" above to see access this tree."}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.MBT != null?mapFam.existsReserved("MBT"):mapFam.h.hasOwnProperty("MBT")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-mbt":(__map_reserved.MBT != null?mapFam.existsReserved("MBT"):mapFam.h.hasOwnProperty("MBT")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-mbt-gene":(__map_reserved.MBT != null?mapFam.existsReserved("MBT"):mapFam.h.hasOwnProperty("MBT")) == false && this.treeType == "domain"?"x-btn-target-mbt":"x-btn-target-mbt-gene", handler : function() {
			_g.treeName = "MBT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "MBT: Read methyl-lysines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.PHD != null?mapFam.existsReserved("PHD"):mapFam.h.hasOwnProperty("PHD")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-phd":(__map_reserved.PHD != null?mapFam.existsReserved("PHD"):mapFam.h.hasOwnProperty("PHD")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-phd-gene":(__map_reserved.PHD != null?mapFam.existsReserved("PHD"):mapFam.h.hasOwnProperty("PHD")) == false && this.treeType == "domain"?"x-btn-target-phd":"x-btn-target-phd-gene", handler : function() {
			_g.treeName = "PHD";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "PHD: Read methyl-lysines, acetylated lysines, methyl-arginines, unmodified lysines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.PWWP != null?mapFam.existsReserved("PWWP"):mapFam.h.hasOwnProperty("PWWP")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-pwwp":(__map_reserved.PWWP != null?mapFam.existsReserved("PWWP"):mapFam.h.hasOwnProperty("PWWP")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-pwwp-gene":(__map_reserved.PWWP != null?mapFam.existsReserved("PWWP"):mapFam.h.hasOwnProperty("PWWP")) == false && this.treeType == "domain"?"x-btn-target-pwwp":"x-btn-target-pwwp-gene", handler : function() {
			_g.treeName = "PWWP";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "PWWP: Read methyl-lysines, bind DNA"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.SPINDLIN != null?mapFam.existsReserved("SPINDLIN"):mapFam.h.hasOwnProperty("SPINDLIN")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-spindlin":(__map_reserved.SPINDLIN != null?mapFam.existsReserved("SPINDLIN"):mapFam.h.hasOwnProperty("SPINDLIN")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-spindlin-gene":(__map_reserved.SPINDLIN != null?mapFam.existsReserved("SPINDLIN"):mapFam.h.hasOwnProperty("SPINDLIN")) == false && this.treeType == "domain"?"x-btn-target-spindlin":"x-btn-target-spindlin-gene", handler : function() {
			_g.treeName = "SPINDLIN";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "SPINDLIN: methyl-lysine/arginine reader"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.TUDOR != null?mapFam.existsReserved("TUDOR"):mapFam.h.hasOwnProperty("TUDOR")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-tudor":(__map_reserved.TUDOR != null?mapFam.existsReserved("TUDOR"):mapFam.h.hasOwnProperty("TUDOR")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-tudor-gene":(__map_reserved.TUDOR != null?mapFam.existsReserved("TUDOR"):mapFam.h.hasOwnProperty("TUDOR")) == false && this.treeType == "domain"?"x-btn-target-tudor":"x-btn-target-tudor-gene", handler : function() {
			_g.treeName = "TUDOR";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "TUDOR: Read methyl-lysines, methyl-arginines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.YEATS != null?mapFam.existsReserved("YEATS"):mapFam.h.hasOwnProperty("YEATS")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-yeats":(__map_reserved.YEATS != null?mapFam.existsReserved("YEATS"):mapFam.h.hasOwnProperty("YEATS")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-yeats-gene":(__map_reserved.YEATS != null?mapFam.existsReserved("YEATS"):mapFam.h.hasOwnProperty("YEATS")) == false && this.treeType == "domain"?"x-btn-target-yeats":"x-btn-target-yeats-gene", handler : function() {
			_g.treeName = "YEATS";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "YEATS: read acetyl-lysines and crotonyl-lysines"}}];
		this.chmodproErasers = [];
		this.chmodproErasers = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.HDAC != null?mapFam.existsReserved("HDAC"):mapFam.h.hasOwnProperty("HDAC")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-hdac":(__map_reserved.HDAC != null?mapFam.existsReserved("HDAC"):mapFam.h.hasOwnProperty("HDAC")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-hdac-gene":(__map_reserved.HDAC != null?mapFam.existsReserved("HDAC"):mapFam.h.hasOwnProperty("HDAC")) == false && this.treeType == "domain"?"x-btn-target-hdac":"x-btn-target-hdac-gene", handler : function() {
			_g.treeName = "HDAC_SIRT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "HDAC: Deacetylate lysines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.KDM != null?mapFam.existsReserved("KDM"):mapFam.h.hasOwnProperty("KDM")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-kdm":(__map_reserved.KDM != null?mapFam.existsReserved("KDM"):mapFam.h.hasOwnProperty("KDM")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-kdm-gene":(__map_reserved.KDM != null?mapFam.existsReserved("KDM"):mapFam.h.hasOwnProperty("KDM")) == false && this.treeType == "domain"?"x-btn-target-kdm":"x-btn-target-kdm-gene", handler : function() {
			_g.treeName = "KDM";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "KDM: De-methylate lysines"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.PADI != null?mapFam.existsReserved("PADI"):mapFam.h.hasOwnProperty("PADI")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-padi":(__map_reserved.PADI != null?mapFam.existsReserved("PADI"):mapFam.h.hasOwnProperty("PADI")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-padi-gene":(__map_reserved.PADI != null?mapFam.existsReserved("PADI"):mapFam.h.hasOwnProperty("PADI")) == false && this.treeType == "domain"?"x-btn-target-padi":"x-btn-target-padi-gene", handler : function() {
			_g.treeName = "PADI";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "PADI: Deiminate arginines"}}];
		this.chmodDnaWriters = [];
		this.chmodDnaWriters = [{ margin : "0 10 5 0", bodyPadding : "0 0 0 9px", xtype : "button", cls : (__map_reserved.DNMT != null?mapFam.existsReserved("DNMT"):mapFam.h.hasOwnProperty("DNMT")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-dnmt":(__map_reserved.DNMT != null?mapFam.existsReserved("DNMT"):mapFam.h.hasOwnProperty("DNMT")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-dnmt-gene":(__map_reserved.DNMT != null?mapFam.existsReserved("DNMT"):mapFam.h.hasOwnProperty("DNMT")) == false && this.treeType == "domain"?"x-btn-target-dnmt":"x-btn-target-dnmt-gene", handler : function() {
			_g.treeName = "DNMT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "DNMT: Methylate CpG dinucleotides"}}];
		this.chmodDnaReaders = [];
		this.chmodDnaReaders = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.CXXC != null?mapFam.existsReserved("CXXC"):mapFam.h.hasOwnProperty("CXXC")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-cxxc":(__map_reserved.CXXC != null?mapFam.existsReserved("CXXC"):mapFam.h.hasOwnProperty("CXXC")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-cxxc-gene":(__map_reserved.CXXC != null?mapFam.existsReserved("CXXC"):mapFam.h.hasOwnProperty("CXXC")) == false && this.treeType == "domain"?"x-btn-target-cxxc":"x-btn-target-cxxc-gene", handler : function() {
			_g.treeName = "CXXC";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "CXXC: Bind to nonmethyl-CpG dinucleotides"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.MBD != null?mapFam.existsReserved("MBD"):mapFam.h.hasOwnProperty("MBD")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-mbd":(__map_reserved.MBD != null?mapFam.existsReserved("MBD"):mapFam.h.hasOwnProperty("MBD")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-mbd-gene":(__map_reserved.MBD != null?mapFam.existsReserved("MBD"):mapFam.h.hasOwnProperty("MBD")) == false && this.treeType == "domain"?"x-btn-target-mbd":"x-btn-target-mbd-gene", handler : function() {
			_g.treeName = "MBD";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "MBD: Bind to methyl-CpG dinucleotides"}}];
		this.chmodDnaErasers = [];
		this.chmodDnaErasers = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.TET != null?mapFam.existsReserved("TET"):mapFam.h.hasOwnProperty("TET")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-tet":(__map_reserved.TET != null?mapFam.existsReserved("TET"):mapFam.h.hasOwnProperty("TET")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-tet-gene":(__map_reserved.TET != null?mapFam.existsReserved("TET"):mapFam.h.hasOwnProperty("TET")) == false && this.treeType == "domain"?"x-btn-target-tet":"x-btn-target-tet-gene", handler : function() {
			_g.treeName = "TET";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "TET: DNA hydroxylases. Participate in DNA de-methylation"}}];
		this.chmodRnaWriters = [];
		this.chmodRnaWriters = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.RNMT != null?mapFam.existsReserved("RNMT"):mapFam.h.hasOwnProperty("RNMT")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-rnmt":(__map_reserved.RNMT != null?mapFam.existsReserved("RNMT"):mapFam.h.hasOwnProperty("RNMT")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-rnmt-gene":(__map_reserved.RNMT != null?mapFam.existsReserved("RNMT"):mapFam.h.hasOwnProperty("RNMT")) == false && this.treeType == "domain"?"x-btn-target-rnmt":"x-btn-target-rnmt-gene", handler : function() {
			_g.treeName = "RNMT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "RNMT: Methylate RNA"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.PUS != null?mapFam.existsReserved("PUS"):mapFam.h.hasOwnProperty("PUS")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-pus":(__map_reserved.PUS != null?mapFam.existsReserved("PUS"):mapFam.h.hasOwnProperty("PUS")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-pus-gene":(__map_reserved.PUS != null?mapFam.existsReserved("PUS"):mapFam.h.hasOwnProperty("PUS")) == false && this.treeType == "domain"?"x-btn-target-pus":"x-btn-target-pus-gene", handler : function() {
			_g.treeName = "PUS";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "Pseudouridine synthases: catalyze the site-specific isomerization of uridines on RNA"}}];
		this.chmodRnaReaders = [];
		this.chmodRnaReaders = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.YTH != null?mapFam.existsReserved("YTH"):mapFam.h.hasOwnProperty("YTH")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-yth":(__map_reserved.YTH != null?mapFam.existsReserved("YTH"):mapFam.h.hasOwnProperty("YTH")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-yth-gene":(__map_reserved.YTH != null?mapFam.existsReserved("YTH"):mapFam.h.hasOwnProperty("YTH")) == false && this.treeType == "domain"?"x-btn-target-yth":"x-btn-target-yth-gene", handler : function() {
			_g.treeName = "YTH";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "YTH: bind to methylated RNA"}}];
		this.chmodRnaErasers = [];
		this.chmodRnaErasers = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved["RNA-DMT"] != null?mapFam.existsReserved("RNA-DMT"):mapFam.h.hasOwnProperty("RNA-DMT")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-rna-dmt":(__map_reserved["RNA-DMT"] != null?mapFam.existsReserved("RNA-DMT"):mapFam.h.hasOwnProperty("RNA-DMT")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-rna-dmt-gene":(__map_reserved["RNA-DMT"] != null?mapFam.existsReserved("RNA-DMT"):mapFam.h.hasOwnProperty("RNA-DMT")) == false && this.treeType == "domain"?"x-btn-target-rna-dmt":"x-btn-target-rna-dmt-gene", handler : function() {
			_g.treeName = "RNA-DMT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "RNA-DMT"}}];
		this.chmodDna = [];
		this.chmodDna = [{ title : "Writers", flex : 1, margin : "0 10 0 0", xtype : "panel", cls : "x-panel-floating", items : this.chmodDnaWriters},{ title : "Readers", flex : 2, margin : "0 10 0 0", xtype : "panel", cls : "x-panel-floating2", items : this.chmodDnaReaders},{ title : "Erasers", flex : 1, margin : "0 10 0 0", xtype : "panel", cls : "x-panel-floating", items : this.chmodDnaErasers}];
		this.chmodRna = [];
		this.chmodRna = [{ title : "Writers", flex : 2, margin : "0 10 0 0", xtype : "panel", cls : "x-panel-floating2", items : this.chmodRnaWriters},{ title : "Readers", flex : 1, margin : "0 10 0 0", xtype : "panel", cls : "x-panel-floating", items : this.chmodRnaReaders},{ title : "Erasers", flex : 1, margin : "0 10 0 0", xtype : "panel", cls : "x-panel-floating", items : this.chmodRnaErasers}];
		this.chromatin = [];
		this.chromatin = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.DEXDc != null?mapFam.existsReserved("DEXDc"):mapFam.h.hasOwnProperty("DEXDc")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-dexdc":(__map_reserved.DEXDc != null?mapFam.existsReserved("DEXDc"):mapFam.h.hasOwnProperty("DEXDc")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-dexdc-gene":(__map_reserved.DEXDc != null?mapFam.existsReserved("DEXDc"):mapFam.h.hasOwnProperty("DEXDc")) == false && this.treeType == "domain"?"x-btn-target-dexdc":"x-btn-target-dexdc-gene", handler : function() {
			_g.treeName = "DEXDc";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "DEXDc"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.Helicases != null?mapFam.existsReserved("Helicases"):mapFam.h.hasOwnProperty("Helicases")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-helicc":(__map_reserved.Helicases != null?mapFam.existsReserved("Helicases"):mapFam.h.hasOwnProperty("Helicases")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-helicc-gene":(__map_reserved.Helicases != null?mapFam.existsReserved("Helicases"):mapFam.h.hasOwnProperty("Helicases")) == false && this.treeType == "domain"?"x-btn-target-helicc":"x-btn-target-helicc-gene", handler : function() {
			_g.treeName = "HELICC/Helicases";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "HELICc"}},{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.SANT != null?mapFam.existsReserved("SANT"):mapFam.h.hasOwnProperty("SANT")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-sant":(__map_reserved.SANT != null?mapFam.existsReserved("SANT"):mapFam.h.hasOwnProperty("SANT")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-sant-gene":(__map_reserved.SANT != null?mapFam.existsReserved("SANT"):mapFam.h.hasOwnProperty("SANT")) == false && this.treeType == "domain"?"x-btn-target-sant":"x-btn-target-sant-gene", handler : function() {
			_g.treeName = "SANT";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : "SANT: Involved in chromatin remodeling"}}];
		this.histones = [];
		this.histones = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.HISTONE != null?mapFam.existsReserved("HISTONE"):mapFam.h.hasOwnProperty("HISTONE")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-histone":(__map_reserved.HISTONE != null?mapFam.existsReserved("HISTONE"):mapFam.h.hasOwnProperty("HISTONE")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-histone-gene":(__map_reserved.HISTONE != null?mapFam.existsReserved("HISTONE"):mapFam.h.hasOwnProperty("HISTONE")) == false && this.treeType == "domain"?"x-btn-target-histone":"x-btn-target-histone-gene", handler : function() {
			_g.treeName = "Histone";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : this.treeType == "gene"?"Histone":"There is no domain-based alignment for this family. Select \"full length proteins\" above to see access this tree."}}];
		this.wdr = [];
		this.wdr = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.WDR != null?mapFam.existsReserved("WDR"):mapFam.h.hasOwnProperty("WDR")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-wdr":(__map_reserved.WDR != null?mapFam.existsReserved("WDR"):mapFam.h.hasOwnProperty("WDR")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-wdr-gene":(__map_reserved.WDR != null?mapFam.existsReserved("WDR"):mapFam.h.hasOwnProperty("WDR")) == false && this.treeType == "domain"?"x-btn-target-wdr":"x-btn-target-wdr-gene", handler : function() {
			_g.treeName = "WDR";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : this.treeType == "gene"?"WDR: Versatile binding module":"There is no domain-based alignment for this family. Select \"full length proteins\" above to see access this tree."}}];
		this.nudix = [];
		this.nudix = [{ margin : "0 10 5 0", xtype : "button", cls : (__map_reserved.NUDIX != null?mapFam.existsReserved("NUDIX"):mapFam.h.hasOwnProperty("NUDIX")) == true && this.treeType == "domain"?"x-btn-target-found x-btn-target-nudix":(__map_reserved.NUDIX != null?mapFam.existsReserved("NUDIX"):mapFam.h.hasOwnProperty("NUDIX")) == true && this.treeType == "gene"?"x-btn-target-found x-btn-target-nudix-gene":(__map_reserved.NUDIX != null?mapFam.existsReserved("NUDIX"):mapFam.h.hasOwnProperty("NUDIX")) == false && this.treeType == "domain"?"x-btn-target-nudix":"x-btn-target-nudix-gene", handler : function() {
			_g.treeName = "NUDIX";
			_g.subtreeName = _g.treeName;
			_g.generateTree(_g.treeName,_g.treeType);
		}, tooltip : { dismissDelay : 10000, text : this.treeType == "gene"?"NUDIX: Break a phosphate bond from RNA caps and other substrates":"There is no domain-based alignment for this family. Select \"full length proteins\" above to see access this tree."}}];
		this.addicon = [];
		this.addicon = [{ margin : "0 10 5 0", xtype : "button", cls : "x-btn-target-ultradd", handler : function() {
			_g.showUltraDDGenes();
		}, tooltip : { dismissDelay : 10000, text : "Show UltraDD genes list"}}];
	}
	,showUltraDDGenes: function() {
		var _g = this;
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("getUltraDDGenes",{ param : ""},null,true,function(db_results,error) {
			if(error == null) {
				if(db_results.length != 0) {
					var div;
					div = [];
					var i = 0;
					var title = db_results.length;
					var _g1 = 0;
					var _g2 = db_results.length;
					while(_g1 < _g2) {
						var i1 = _g1++;
						div[i1] = { xtype : "checkboxfield", boxLabel : db_results[i1].target_id, labelSeparator : "", name : "ultradd", cls : "ultradd-checkbox", inputValue : db_results[i1].target_id, id : "ultradd-" + i1};
					}
					var container = _g.getApplication().getSingleAppContainer();
					var mydom = window.document.getElementById("id-centralPanel");
					var parentWidth = mydom.clientWidth;
					var parentHeight = mydom.clientHeight;
					var cx = Math.round(parentWidth / 2) - 350;
					var cy = Math.round(parentHeight / 5);
					container.showUltraDDWindow(div,cx,cy,title,_g);
				} else saturn.client.WorkspaceApplication.getApplication().showMessage("Alert","No UltraDD genes in the current database.");
			}
		});
	}
	,getJSonViewOptions: function() {
		var _g = this;
		saturn.client.core.CommonCore.getContent("/static/json/ViewOptionsBtns.json",function(content) {
			var d = saturn.client.WorkspaceApplication.getApplication().getActiveProgram();
			d.annotationManager.jsonFile = JSON.parse(content);
			_g.getJSonTips();
		},function(err) {
			saturn.client.WorkspaceApplication.getApplication().debug(err);
			_g.getJSonTips();
		});
	}
	,getJSonTips: function() {
		if(this.standaloneMode) saturn.client.core.CommonCore.getContent("/static/json/tipsHtmlData.json",function(content) {
			var d = saturn.client.WorkspaceApplication.getApplication().getActiveProgram();
			d.jsonTipsFile = JSON.parse(content);
			saturn.client.WorkspaceApplication.getApplication().setMode(saturn.client.ScreenMode.SINGLE_APP);
		},function(err) {
			saturn.client.WorkspaceApplication.getApplication().debug(err);
			saturn.client.WorkspaceApplication.getApplication().setMode(saturn.client.ScreenMode.SINGLE_APP);
		});
	}
	,showTips: function(show) {
		var cookies = Cookies;
		if(show == true) {
			var cookie = cookies.getJSON("tipday");
			if(cookie != null) cookies.remove("tipday");
		} else cookies.set("tipday",false,{ 'expires' : 14});
	}
	,__class__: saturn.client.programs.chromohub.ChromoHubViewer
});
saturn.client.programs.chromohub.ChromoHubDrawingMode = $hxClasses["saturn.client.programs.chromohub.ChromoHubDrawingMode"] = { __ename__ : ["saturn","client","programs","chromohub","ChromoHubDrawingMode"], __constructs__ : ["STRAIGHT","CIRCULAR"] };
saturn.client.programs.chromohub.ChromoHubDrawingMode.STRAIGHT = ["STRAIGHT",0];
saturn.client.programs.chromohub.ChromoHubDrawingMode.STRAIGHT.toString = $estr;
saturn.client.programs.chromohub.ChromoHubDrawingMode.STRAIGHT.__enum__ = saturn.client.programs.chromohub.ChromoHubDrawingMode;
saturn.client.programs.chromohub.ChromoHubDrawingMode.CIRCULAR = ["CIRCULAR",1];
saturn.client.programs.chromohub.ChromoHubDrawingMode.CIRCULAR.toString = $estr;
saturn.client.programs.chromohub.ChromoHubDrawingMode.CIRCULAR.__enum__ = saturn.client.programs.chromohub.ChromoHubDrawingMode;
saturn.client.programs.chromohub.ChromoHubViewerHome = $hxClasses["saturn.client.programs.chromohub.ChromoHubViewerHome"] = function(viewer) {
	this.viewer = viewer;
};
saturn.client.programs.chromohub.ChromoHubViewerHome.__name__ = ["saturn","client","programs","chromohub","ChromoHubViewerHome"];
saturn.client.programs.chromohub.ChromoHubViewerHome.prototype = {
	viewer: null
	,uploadForm: null
	,annotations: null
	,addUploadForm: function() {
		var _g = this;
		var items = [];
		items.push({ xtype : "textarea", fieldLabel : "FASTA upload", name : "fasta_content"});
		items.push({ xtype : "button", text : "Generate Tree", handler : function() {
			_g.generateTreeFromFASTA(_g.uploadForm.form.findField("fasta_content").lastValue);
		}});
		items.push({ xtype : "textarea", fieldLabel : "Newick upload", name : "newick_content"});
		items.push({ xtype : "button", text : "Show Tree", handler : function() {
			_g.viewer.setNewickStr(_g.uploadForm.form.findField("newick_content").lastValue);
		}});
		items.push({ xtype : "textarea", fieldLabel : "Annotations", name : "annotation_content"});
		items.push({ xtype : "button", text : "Upload", handler : function() {
			_g.loadAnnotations(_g.uploadForm.form.findField("annotation_content").lastValue);
		}});
		this.uploadForm = Ext.create("Ext.form.Panel",{ items : items});
		this.viewer.centralTargetPanel.add(this.uploadForm);
	}
	,generateTreeFromFASTA: function(fasta) {
		var _g = this;
		saturn.client.BioinformaticsServicesClient.getClient().sendPhyloReportRequest(fasta,function(response,error) {
			var phyloReport = response.json.phyloReport;
			var location = window.location;
			var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + phyloReport;
			Ext.Ajax.request({ url : dstURL, success : function(response1,opts) {
				var newickString = response1.responseText;
				_g.viewer.setNewickStr(newickString);
			}, failure : function(response2,opts1) {
			}});
		});
	}
	,handleAnnotation: function(alias,params,clazz,cb) {
		var annotationIndex = Std.parseInt(alias.charAt(alias.length - 1));
		cb(this.annotations[annotationIndex],null);
	}
	,loadAnnotations: function(annotationString) {
		var _g2 = this;
		var lines = annotationString.split("\n");
		var header = lines[0];
		var cols = header.split(",");
		this.annotations = [];
		this.viewer.annotationManager.jsonFile = { btnGroup : [{ title : "Annotations", buttons : []}]};
		var _g1 = 1;
		var _g = cols.length;
		while(_g1 < _g) {
			var i = [_g1++];
			this.annotations[i[0] - 1] = [];
			var hookName = ["STANDALONE_ANNOTATION_" + (i[0] - 1)];
			var styleAnnotation = (function(i) {
				return function(target,data,selected,annotList,item,callBack) {
					var colours = ["red","blue"];
					var r = { hasAnnot : true, text : "", color : { color : colours[i[0] - 1], used : false}, defImage : 100};
					if(data == null || data.annotation == "No") r.hasAnnot = false;
					callBack(r);
				};
			})(i);
			this.viewer.annotationManager.jsonFile.btnGroup[0].buttons.push({ label : cols[i[0]], hookName : hookName[0], annotCode : i[0], isTitle : false, enabled : true, familyMethod : "", hasMethod : styleAnnotation, hasClass : "", color : [{ color : "#ed0e2d", used : "false"}], shape : "cercle"});
			saturn.client.core.CommonCore.getDefaultProvider((function(hookName) {
				return function(error,provider) {
					provider.resetCache();
					provider.addHook($bind(_g2,_g2.handleAnnotation),hookName[0]);
				};
			})(hookName));
		}
		var _g11 = 1;
		var _g3 = lines.length;
		while(_g11 < _g3) {
			var i1 = _g11++;
			var cols1 = lines[i1].split(",");
			var _g31 = 1;
			var _g21 = cols1.length;
			while(_g31 < _g21) {
				var j = _g31++;
				this.annotations[j - 1].push({ 'target_id' : cols1[0], 'annotation' : cols1[j]});
			}
		}
		this.viewer.annotationManager.fillAnnotationwithJSonData();
		this.viewer.annotationManager.createViewOptions();
	}
	,__class__: saturn.client.programs.chromohub.ChromoHubViewerHome
};
if(!saturn.client.programs.phylo5) saturn.client.programs.phylo5 = {};
saturn.client.programs.phylo5.Phylo5Annotation = $hxClasses["saturn.client.programs.phylo5.Phylo5Annotation"] = function() {
	this.hasAnnot = false;
	this.text = "";
	this.splitresults = false;
};
saturn.client.programs.phylo5.Phylo5Annotation.__name__ = ["saturn","client","programs","phylo5","Phylo5Annotation"];
saturn.client.programs.phylo5.Phylo5Annotation.prototype = {
	type: null
	,summary: null
	,summary_img: null
	,imgtest: null
	,annotImg: null
	,defaultImg: null
	,shape: null
	,color: null
	,mysqlAlias: null
	,text: null
	,options: null
	,optionSelected: null
	,dbData: null
	,legend: null
	,hasClass: null
	,hasMethod: null
	,divMethod: null
	,familyMethod: null
	,hasAnnot: null
	,alfaAnnot: null
	,splitresults: null
	,myleaf: null
	,uploadImg: function(imgList) {
		var i;
		this.annotImg = [];
		var _g1 = 0;
		var _g = imgList.length;
		while(_g1 < _g) {
			var i1 = _g1++;
			this.annotImg[i1] = window.document.createElement("img");
			this.annotImg[i1].src = imgList[i1];
			this.annotImg[i1].onload = function() {
			};
		}
	}
	,saveAnnotationData: function(annotation,data) {
		var _g = this;
		this.type = annotation;
		this.dbData = [];
		this.dbData = data;
		this.color = saturn.core.Util.clone(this.myleaf.root.annotations[annotation].color);
		var hook;
		var r_hasAnnot = true;
		var r_text = "";
		var r_color = "";
		var r_defImage = 100;
		var clazz;
		var method;
		if(this.myleaf.root.annotations[annotation].hasClass != null && this.myleaf.root.annotations[annotation].hasMethod != null) {
			clazz = this.myleaf.root.annotations[annotation].hasClass;
			method = this.myleaf.root.annotations[annotation].hasMethod;
			hook = Reflect.field(Type.resolveClass(clazz),method);
			hook(this.myleaf.name,this.dbData,this.myleaf.root,function(r) {
				_g.defaultImg = r.defImage;
				if(_g.color[0] != null) _g.color[0].color = r.color;
				_g.text = r.text;
				_g.hasAnnot = r.hasAnnot;
			});
		} else {
			this.hasAnnot = true;
			this.color = this.myleaf.root.annotations[annotation].color;
		}
	}
	,delAnnotation: function(annotation) {
	}
	,__class__: saturn.client.programs.phylo5.Phylo5Annotation
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods = $hxClasses["saturn.client.programs.phylo5.Phylo5AnnotationMethods"] = function() {
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.__name__ = ["saturn","client","programs","phylo5","Phylo5AnnotationMethods"];
saturn.client.programs.phylo5.Phylo5AnnotationMethods.hasPubmed = function(target,data,root,callBack) {
	var r = { hasAnnot : true, text : "", color : "", defImage : 100};
	if(data.pubs < 10) r.defImage = 0; else if(data.pubs >= 10 && data.pubs < 20) r.defImage = 1; else if(data.pubs >= 20 && data.pubs < 50) r.defImage = 2; else if(data.pubs >= 50 && data.pubs < 100) r.defImage = 3; else if(data.pubs >= 100) r.defImage = 4;
	callBack(r);
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.hasFunding = function(target,data,root,callBack) {
	var r = { hasAnnot : false, text : "", color : "", defImage : 100};
	if(data.funds > 15000000) {
		r.text = "$$$";
		r.color = "#f60808";
		r.hasAnnot = true;
	} else if(data.funds > 5000000) {
		r.text = "$$";
		r.color = "#f69908";
		r.hasAnnot = true;
	} else if(data.funds > 500000) {
		r.text = "$";
		r.color = "#085cf6";
		r.hasAnnot = true;
	}
	callBack(r);
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.hasSubstrate = function(target,data,root,callBack) {
	var r = { hasAnnot : true, text : data.sub, color : "", defImage : 100};
	if((function($this) {
		var $r;
		var key = data.sub;
		$r = root.auxMap.exists(key);
		return $r;
	}(this))) {
		var key1 = data.sub;
		r.color = root.auxMap.get(key1);
	} else {
		var k;
		var c;
		var _g1 = 0;
		var _g = root.annotations[4].color.length;
		while(_g1 < _g) {
			var k1 = _g1++;
			var g = root.annotations[4].color[k1].used;
			if(g == false) {
				c = root.annotations[4].color[k1].color;
				root.annotations[4].color[k1].used = true;
				var key2 = data.sub;
				root.auxMap.set(key2,c);
				r.color = c;
				break;
			}
		}
	}
	callBack(r);
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.hasSubcellular = function(target,data,root,callBack) {
	var r = { hasAnnot : true, text : "", color : "", defImage : 100};
	if(data.location.indexOf("Nucleus") != -1) r.defImage = 0; else r.defImage = 1;
	callBack(r);
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.hasHighlight = function(target,data,root,callBack) {
	var r = { hasAnnot : false, text : "", color : "", defImage : 100};
	var year = root.annotations[17].optionSelected;
	var tg = target;
	saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("highlightJumpInLast1",{ target_id : tg, year : year},null,true,function(db_results,error) {
		if(error == null) {
			if(db_results != null) {
				r.defImage = 0;
				r.hasAnnot = true;
				callBack(r);
			}
		} else saturn.client.WorkspaceApplication.getApplication().debug(error);
	});
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.hasNonSilent = function(target,data,root,callBack) {
	var r = { hasAnnot : false, text : "", color : "", defImage : 100};
	saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("nonSilentSPNsPoly",{ uniprot : data.uniprot, pkey : data.variant_pkey},null,true,function(db_results,error) {
		if(error == null) {
			if(db_results[0].num_total == null || db_results[0].num_total == "0") {
				r.text = "";
				r.hasAnnot = false;
			} else {
				r.text = "" + db_results[0].num_total + "";
				r.hasAnnot = true;
				if(db_results[0].is_disease == "Disease" && db_results[0].num_dom != 0) r.color = "#9026b3"; else if(db_results[0].is_disease == "Disease") r.color = "#e60841"; else if(db_results[0].num_dom != 0) r.color = "#06fff7"; else r.color = "#000000";
			}
			callBack(r);
		} else saturn.client.WorkspaceApplication.getApplication().debug(error);
	});
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.hasLigands = function(target,data,root,callBack) {
	var r = { hasAnnot : true, text : data.variant_pkey, color : "#68229d", defImage : 100};
	callBack(r);
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divDiseaseAssociation = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("diseaseAssociationDiv",{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				var numMax;
				var numMid;
				var numMidt;
				var infH = 150;
				var cancerH = 150;
				var virInfH = 150;
				var neuDisH = 150;
				var metDisH = 150;
				var immDisH = 150;
				var regMedH = 150;
				var infN = 0;
				var cancerN = 0;
				var virInfN = 0;
				var neuDisN = 0;
				var metDisN = 0;
				var immDisN = 0;
				var regMedN = 0;
				var infNt;
				var cancerNt;
				var virInfNt;
				var neuDisNt;
				var metDisNt;
				var immDisNt;
				var regMedNt;
				var pmids = [];
				var br = 5;
				var bw = 25;
				var i;
				var mapResults;
				mapResults = new haxe.ds.StringMap();
				var _g1 = 0;
				var _g = results.length;
				while(_g1 < _g) {
					var i1 = _g1++;
					var aux;
					aux = results[i1].pmid_list;
					var aux2 = aux.split(";");
					pmids[i1] = aux2.length;
					mapResults.set(results[i1].id,pmids[i1]);
					var _g2 = results[i1].id;
					switch(_g2) {
					case "Inflammation":
						infN = pmids[i1];
						break;
					case "Cancer":
						cancerN = pmids[i1];
						break;
					case "Viral Infections":
						virInfN = pmids[i1];
						break;
					case "Neurological Diseases":
						neuDisN = pmids[i1];
						break;
					case "Metabolic Disorders":
						metDisN = pmids[i1];
						break;
					case "Immune Disorders":
						immDisN = pmids[i1];
						break;
					case "Regenerative Medicine":
						regMedN = pmids[i1];
						break;
					}
				}
				numMax = pmids[0];
				var _g11 = 1;
				var _g3 = pmids.length;
				while(_g11 < _g3) {
					var i2 = _g11++;
					if(pmids[i2] > numMax) numMax = pmids[i2];
				}
				if(numMax != 1) {
					var a = numMax / 2;
					numMid = Math.round(a);
					numMidt = "" + numMid;
				} else numMidt = "";
				infH = Math.round(150 * infN / numMax);
				cancerH = Math.round(150 * cancerN / numMax);
				virInfH = Math.round(150 * virInfN / numMax);
				neuDisH = Math.round(150 * neuDisN / numMax);
				metDisH = Math.round(150 * metDisN / numMax);
				immDisH = Math.round(150 * immDisN / numMax);
				regMedH = Math.round(150 * regMedN / numMax);
				if(infN == 0) infNt = ""; else infNt = "" + infN + "";
				if(cancerN == 0) cancerNt = ""; else cancerNt = "" + cancerN + "";
				if(virInfN == 0) virInfNt = ""; else virInfNt = "" + virInfN + "";
				if(neuDisN == 0) neuDisNt = ""; else neuDisNt = "" + neuDisN + "";
				if(metDisN == 0) metDisNt = ""; else metDisNt = "" + metDisN + "";
				if(immDisN == 0) immDisNt = ""; else immDisNt = "" + immDisN + "";
				if(regMedN == 0) regMedNt = ""; else regMedNt = "" + regMedN + "";
				var t = "<style type=\"text/css\">\r\n                    .disAsTableContent {width:300px; background-color:#ffffff; border:1px solid #cccccc; padding:5px;}\r\n                    .disAsTable  {border-collapse:collapse;border-spacing:0;}\r\n                    .disAsTable th{vertical-align: bottom!important;}\r\n                    .disAsTablePreText{margin-top:30px;padding:0 3px; float:left;-webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg);-ms-transform: rotate(-90deg);-o-transform: rotate(-90deg);transform: rotate(-90deg); font-size:11px;}\r\n                    .disAsTableNum{float:left;width:25px;border-right:1px solid #000;}\r\n                    .disAsTableNum {}\r\n                    .disAsTableNum .disAsTableTop {height:70px;}\r\n                    .disAsTableNum .disAsTableMiddle {height:70px;}\r\n                    .disAsTableNum .disAsTableBottom {}\r\n                    .disAsTable .disAsTableInf {font-size:10px;background-color:#2980d6;width:20px;height:" + infH + "px;}\r\n                    .disAsTable .disAsTableCancer {font-size:10px;background-color:#bf0000;width:20px;height:" + cancerH + "px;}\r\n                    .disAsTable .disAsTableVirInf {font-size:10px;background-color:#63cf1b;width:20px;height:" + virInfH + "px;}\r\n                    .disAsTable .disAsTableNeuDis {font-size:10px;background-color:#ff8000;width:20px;height:" + neuDisH + "px;}\r\n                    .disAsTable .disAsTableMetDis {font-size:10px;background-color:#c05691;width:20px;height:" + metDisH + "px;}\r\n                    .disAsTable .disAsTableImmDis {font-size:10px;background-color:#ffcc00;width:20px;height:" + immDisH + "px;}\r\n                    .disAsTable .disAsTableRegMed {font-size:10px;background-color:#793ff3;width:20px;height:" + regMedH + "px;}\r\n                    </style>\r\n                    <div class=\"disAsTableContent\">\r\n                    <h3>Disease Association (" + screenData.target + ")</h3>\r\n                    <div class=\"disAsTablePreText\"># of Articles</div>\r\n                    <div class=\"disAsTableNum\"> <div class=\"disAsTableTop\">" + numMax + "</div><div class=\"disAsTableMiddle\">" + numMidt + "</div><div class=\"disAsTableBottom\">0</div></div>\r\n                    <table class=\"disAsTable\">\r\n                      <tr>\r\n                        <th><div class=\"disAsTableInf\">" + infNt + "</div></th>\r\n                        <th><div class=\"disAsTableCancer\">" + cancerNt + "</div></th>\r\n                        <th><div class=\"disAsTableVirInf\">" + virInfNt + "</div></th>\r\n                        <th><div class=\"disAsTableNeuDis\">" + neuDisNt + "</div></th>\r\n                        <th><div class=\"disAsTableMetDis\">" + metDisNt + "</div></th>\r\n                        <th><div class=\"disAsTableImmDis\">" + immDisNt + "</div></th>\r\n                        <th><div class=\"disAsTableRegMed\">" + regMedNt + "</div></th>\r\n                      </tr>\r\n                    </table>\r\n                    </div>\r\n                    ";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divPubmed = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "pubmedAllDiv";
		auxtext = "";
		if(screenData.suboption == 1) {
			al = "pubmedCSNDiv";
			auxtext = "in Cell/Science/Nature";
		}
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var numMax;
				var numMid;
				var numMidt = "";
				var numArray;
				var heightArray;
				numArray = [];
				heightArray = [];
				if(results[0] != null) {
					numMax = results[0].pubs;
					var _g1 = 1;
					var _g = results.length;
					while(_g1 < _g) {
						var i = _g1++;
						if(results[i].pubs > numMax) numMax = results[i].pubs;
					}
					var a = numMax / 2;
					if(numMax != 1) {
						var a1 = numMax / 2;
						numMid = Math.round(a1);
						numMidt = "" + numMid;
					} else numMidt = "";
					var _g11 = 0;
					var _g2 = results.length;
					while(_g11 < _g2) {
						var i1 = _g11++;
						heightArray[i1] = Math.round(150 * results[i1].pubs / numMax);
						if(results[i1].pubs == 0) numArray[i1] = ""; else numArray[i1] = "" + results[i1].pubs + "";
					}
				} else {
					numMax = 1;
					numArray[0] = "0";
					heightArray[0] = 0;
					numMidt = "" + "";
				}
				var totalwidth = results.length * 35 + 180;
				var t = "<style type=\"text/css\">\r\n                    .pubmedTableContent {width:" + totalwidth + "px; background-color:#ffffff; border:1px solid #cccccc; padding:5px; }\r\n                    .pubmedTable  {border-collapse:collapse;border-spacing:0;}\r\n                    .pubmedTableN2  {margin-left:117px; margin-top:8px;}\r\n                    .pubmedTable th{vertical-align: bottom!important;}\r\n                    .pubmedTablePreText{margin-top:30px;padding:0 3px; float:left;-webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg);-ms-transform: rotate(-90deg);-o-transform: rotate(-90deg);transform: rotate(-90deg); font-size:11px;}\r\n                    .pubmedTableNum{float:left;width:25px;border-right:1px solid #000;}\r\n                    .pubmedTable th a {text-decoration:none!important;}\r\n                    .pubmedTableNum .pubmedTableTop {height:70px;}\r\n                    .pubmedTableNum .pubmedTableMiddle {height:70px;}\r\n                    .pubmedTableNum .pubmedTableBottom {}\r\n                    .pubmedTableYear{width:18px; -webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg);-ms-transform: rotate(-90deg);-o-transform: rotate(-90deg);transform: rotate(-90deg); font-size:9px;}";
				var _g12 = 0;
				var _g3 = numArray.length;
				while(_g12 < _g3) {
					var i2 = _g12++;
					t = t + ".pubmedTable .pubmedTable" + i2 + " {font-size:10px;background-color:#2980d6;width:20px;height:" + heightArray[i2] + "px;}";
				}
				t = t + "\r\n                    </style>\r\n                    <div class=\"pubmedTableContent\">\r\n                    <h3>Pubmed for " + screenData.target + " " + auxtext + "</h3>\r\n                    <div class=\"pubmedTablePreText\"># of Publications</div>\r\n                    <div class=\"pubmedTableNum\"> <div class=\"pubmedTableTop\">" + numMax + "</div><div class=\"pubmedTableMiddle\">" + numMidt + "</div><div class=\"pubmedTableBottom\">0</div></div>\r\n                    <table class=\"pubmedTable\">\r\n                      <tr>";
				var _g13 = 0;
				var _g4 = numArray.length;
				while(_g13 < _g4) {
					var i3 = _g13++;
					t = t + "<th><a href=\"http://www.google.com\" target=\"_blank\"><div class=\"pubmedTable" + i3 + "\">" + numArray[i3] + "</div></a></th>";
				}
				t = t + "\r\n                      </tr>\r\n                    </table>\r\n                    <table class=\"pubmedTableN2\">\r\n                      <tr>";
				var _g14 = 0;
				var _g5 = results.length;
				while(_g14 < _g5) {
					var i4 = _g14++;
					t = t + "<th><div class=\"pubmedTableYear\">" + results[i4].year + "</div></th>";
				}
				t = t + "\r\n                      </tr>\r\n                    </table>\r\n                    </div>\r\n                    ";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divNonSilent = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var div = window.document.createElement("div");
		div.id = "box";
		var t = "<style type=\"text/css\">\r\n                    .interactionContent {width:500px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .interactionTitle{background-color:#eee; padding:5px 15px; }\r\n                    .interactionInfo{font-size:10px}\r\n                    .interactionResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"interactionContent\">\r\n                    <div class=\"interactionTitle\">\r\n                    <h3>Non-silent SNPs (" + screenData.target + ")</h3>\r\n                    <img src=\"http://apps.thesgc.org/resources/phylogenetic_trees/polymorphism_images/" + screenData.root.targetFamily + "/" + screenData.target + "-1_" + screenData.root.targetFamily + ".png\"><br>\r\n                    </div></div>\r\n                ";
		div.innerHTML = t;
		div.id = "divAnnotTable";
		div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
		callBack(div);
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divInteraction = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var div = window.document.createElement("div");
		div.id = "box";
		var t = "<style type=\"text/css\">\r\n                    .interactionContent {width:500px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .interactionTitle{background-color:#eee; padding:5px 15px; }\r\n                    .interactionInfo{font-size:10px}\r\n                    .interactionResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"interactionContent\">\r\n                    <div class=\"interactionTitle\">\r\n                    <h3>Protein Interaction (" + screenData.target + ")</h3>\r\n                    <img src=\"http://apps.thesgc.org/resources/phylogenetic_trees/interaction/" + screenData.target + ".png\"><br>\r\n                    <span class=\"interactionInfo\">Image Source: http://string-db.org</span>\r\n                    </div></div>\r\n                ";
		div.innerHTML = t;
		div.id = "divAnnotTable";
		div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
		callBack(div);
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divSummary = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "summaryDiv";
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				var uniprot;
				ttext = "";
				uniprot = "";
				var _g1 = 0;
				var _g = results.length;
				while(_g1 < _g) {
					var ii1 = _g1++;
					ttext = ttext + results[ii1].fun + "<br><br>";
					uniprot = results[ii1].uniprot;
				}
				if(ttext == "null<br><br>" || ttext == "<br><br>") ttext = "No Summary Available";
				var t = "<style type=\"text/css\">\r\n                    .summaryContent {width:300px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .summaryTitle{background-color:#eee; padding:5px 15px; }\r\n                    .summaryInfo{font-size:10px}\r\n                    .summaryResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"summaryContent\">\r\n                    <div class=\"summaryTitle\">\r\n                    <h3><a href=\"http://www.uniprot.org/uniprot/" + uniprot + "\" target=\"_blank\">" + screenData.target + "</a></h3>\r\n                    <span class=\"summaryInfo\">Click title for Uniprot reference page</span>\r\n                    </div><br><br>\r\n                    <div class=\"summaryResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divChemicalProbes = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "chemicalDiv";
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				ttext = "";
				ii = 0;
				var _g1 = 0;
				var _g = results.length;
				while(_g1 < _g) {
					var ii1 = _g1++;
					ttext = ttext + "<div class=\"inhibitorsRes\"><img src=\"http://apps.thesgc.org/resources/phylogenetic_trees/ligands_images/ligand" + results[ii1].pkey + ".png\"><br>\r\n                        " + results[ii1].name + "<br>";
					if(results[ii1].ic50 != null) ttext = ttext + "IC50/Kd/Ki: " + results[ii1].ic50 + "&microM<br>";
					if(results[ii1].pmid != null || results[ii1].pmid != "") ttext = ttext + "Pubmed ID: <a href=\"http://www.ncbi.nlm.nih.gov/pubmed/" + results[ii1].pmid + "\" target=\"_blank\">" + results[ii1].pmid + "</a>";
					if(results[ii1].ref != null || results[ii1].ref != "") ttext = ttext + results[ii1].ref + "<br>";
					ttext = ttext + "</div>";
				}
				var l;
				l = (ii + 1) * 310;
				var t = "\r\n                    <style type=\"text/css\">\r\n                    .inhibitorsContent {width:" + l + "px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .inhibitorsTitle{background-color:#eee; padding:5px 15px; }\r\n                    .inhibitorsInfo{font-size:10px}\r\n                    .inhibitorsResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"inhibitorsContent\">\r\n                    <div class=\"inhibitorsTitle\">\r\n                    <h3>" + screenData.target + "</h3>\r\n                    <span class=\"inhibitorsInfo\">Activity indicated is that reported by authors, but does not necessarily indicate an examination of the mechanism of action of the compound</span>\r\n                    <div class=\"inhibitorsResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divLigands = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "";
		var _g = screenData.suboption;
		switch(_g) {
		case 1:
			al = "ligands95Div";
			break;
		case 2:
			al = "ligands95BestDiv";
			break;
		case 3:
			al = "ligands40Div";
			break;
		}
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ pkey : screenData.annotation.text},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				ttext = "";
				var k;
				var myArray;
				var keyArray;
				myArray = [];
				keyArray = [];
				var kt = 0;
				var pdbi = 0;
				ii = 0;
				var _g1 = 0;
				var _g2 = results.length;
				while(_g1 < _g2) {
					var ii1 = _g1++;
					k = results[ii1].lig_pkey;
					if(myArray[k] == null) {
						keyArray[kt] = k;
						kt++;
						myArray[k] = { pkey : results[ii1].lig_pkey, id : results[ii1].lig_id, formula : results[ii1].lig_formula, name : results[ii1].lig_name, title : results[ii1].title, pdbs : [], pdb : new haxe.ds.StringMap()};
						pdbi = 0;
						myArray[k].pdbs[pdbi] = results[ii1].pdb_id;
						pdbi++;
						var h;
						h = { percent : results[ii1].percent_id, title : results[ii1].title};
						myArray[k].pdb.set(results[ii1].pdb_id,h);
					}
					if(myArray[k].pdb.exists(results[ii1].pdb_id) == false) {
						var h1;
						h1 = { percent : results[ii1].percent_id, title : results[ii1].title};
						myArray[k].pdb.set(results[ii1].pdb_id,h1);
						myArray[k].pdbs[pdbi] = results[ii1].pdb_id;
						pdbi++;
					} else {
						var pd = myArray[k].pdb.get(results[ii1].pdb_id);
						var per;
						per = pd.percent;
						var h2;
						h2 = { percent : results[ii1].percent_id, title : results[ii1].title};
						if(results[ii1].percent_id > per) myArray[k].pdb.set(results[ii1].pdb_id,h2);
					}
				}
				var lig;
				var _g11 = 0;
				var _g3 = keyArray.length;
				while(_g11 < _g3) {
					var kt1 = _g11++;
					var a = keyArray[kt1];
					ttext = ttext + "<div class=\"ligandRes\"><img src=\"http://apps.thesgc.org/resources/phylogenetic_trees/pdb_ligand_images/" + myArray[a].id + ".gif\" width=\"250px\"><br>\r\n                        " + myArray[a].id + "<br>structures:";
					var _g31 = 0;
					var _g21 = myArray[a].pdbs.length;
					while(_g31 < _g21) {
						var pdbi1 = _g31++;
						var pdbb = myArray[a].pdb.get(myArray[a].pdbs[pdbi1]);
						var tit = pdbb.title;
						var cent = pdbb.percent;
						ttext = ttext + "<a href=\"http://www.rcsb.org/pdb/explore/explore.do?structureId=" + myArray[a].pdbs[pdbi1] + "\" alt=\"" + tit + "\" target=\"_blank\">" + myArray[a].pdbs[pdbi1] + "</a>(" + cent + "%) - ";
					}
					ttext = ttext + "</div><br>";
				}
				var t = "\r\n                    <style type=\"text/css\">\r\n                    .inhibitorsContent {width:400px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .inhibitorsTitle{background-color:#eee; padding:5px 15px; }\r\n                    .inhibitorsInfo{font-size:10px}\r\n                    .inhibitorsResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"inhibitorsContent\">\r\n                    <div class=\"inhibitorsTitle\">\r\n                    <h3>" + screenData.target + "</h3>\r\n                    <div class=\"inhibitorsResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divInhibitors = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "";
		var _g = screenData.suboption;
		switch(_g) {
		case 0:
			al = "inhibitorsAllDiv";
			break;
		case 1:
			al = "inhibitors5nDiv";
			break;
		case 2:
			al = "inhibitors2nDiv";
			break;
		case 3:
			al = "inhibitors05nDiv";
			break;
		}
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				ttext = "";
				ii = 0;
				var _g1 = 0;
				var _g2 = results.length;
				while(_g1 < _g2) {
					var ii1 = _g1++;
					ttext = ttext + "<div class=\"inhibitorsRes\"><img src=\"http://apps.thesgc.org/resources/phylogenetic_trees/ligands_images/ligand" + results[ii1].pkey + ".png\"><br>\r\n                        " + results[ii1].name + "<br>";
					if(results[ii1].ic50 != null) ttext = ttext + "IC50/Kd/Ki: " + results[ii1].ic50 + "&microM<br>";
					if(results[ii1].pmid != null || results[ii1].pmid != "") ttext = ttext + "Pubmed ID: <a href=\"http://www.ncbi.nlm.nih.gov/pubmed/" + results[ii1].pmid + "\" target=\"_blank\">" + results[ii1].pmid + "</a>";
					if(results[ii1].ref != null || results[ii1].ref != "") ttext = ttext + results[ii1].ref + "<br>";
					ttext = ttext + "</div>";
				}
				var l;
				l = (ii + 1) * 310;
				var t = "\r\n                    <style type=\"text/css\">\r\n                    .inhibitorsContent {width:" + l + "px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .inhibitorsTitle{background-color:#eee; padding:5px 15px; }\r\n                    .inhibitorsInfo{font-size:10px}\r\n                    .inhibitorsResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"inhibitorsContent\">\r\n                    <div class=\"inhibitorsTitle\">\r\n                    <h3>" + screenData.target + "</h3>\r\n                    <span class=\"inhibitorsInfo\">Activity indicated is that reported by authors, but does not necessarily indicate an examination of the mechanism of action of the compound</span>\r\n                    <div class=\"inhibitorsResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divSubstrate = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "substrateDiv";
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target, subb : screenData.annotation.text},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				var subs;
				ttext = "Pubmed Ids: <br>";
				subs = "";
				var _g1 = 0;
				var _g = results.length;
				while(_g1 < _g) {
					var ii1 = _g1++;
					ttext = ttext + "<a href=\"http://www.ncbi.nlm.nih.gov/pubmed/" + results[ii1].pmid_list + "\" target=\"_blank\">" + results[ii1].pmid_list + "</a><br><br>";
					subs = results[ii1].sub;
					break;
				}
				var t = "<style type=\"text/css\">\r\n                    .substrateContent {width:300px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .substrateTitle{background-color:#eee; padding:5px 15px; }\r\n                    .substrateResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"substrateContent\">\r\n                    <div class=\"substrateTitle\">\r\n                    <h3>" + screenData.target + " (" + subs + ")</h3>\r\n                    </div><br><br>\r\n                    <div class=\"substrateResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divSubcellular = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "subcellularDiv";
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				var subs;
				ttext = results[0].location + "<br>";
				var t = "<style type=\"text/css\">\r\n                    .subcellularContent {width:300px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .subcellularTitle{background-color:#eee; padding:5px 15px; }\r\n                    .subcellularInfo{font-size:10px}\r\n                    .subcellularResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"subcellularContent\">\r\n                    <div class=\"subcellularTitle\">\r\n                    <h3><a href=\"http://www.uniprot.org/uniprot/" + results[0].uniprot + "\" target=\"_blank\">" + screenData.target + "</a></h3>\r\n                    <span class=\"subcellularInfo\">Click title for Uniprot reference page</span>\r\n                    </div><br><br>\r\n                    <div class=\"subcellularResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divInteractome = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "interactomeDiv";
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				var subs;
				ttext = "";
				var _g1 = 0;
				var _g = results.length;
				while(_g1 < _g) {
					var ii1 = _g1++;
					ttext = ttext + "<a href=\"http://www.ncbi.nlm.nih.gov/gene/?term=" + results[ii1].geneid_b + "\" target=\"_blank\">" + results[ii1].target_id_b + "</a><br>";
				}
				var t = "<style type=\"text/css\">\r\n                    .interactomeContent {width:300px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .interactomeTitle{background-color:#eee; padding:5px 15px; }\r\n                    .interactomeResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"interactomeContent\">\r\n                    <div class=\"interactomeTitle\">\r\n                    <h3>Protein Interactome (" + screenData.target + ")</h3>\r\n                    </div><br><br>\r\n                    <div class=\"interactomeResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.divOrphanet = function(screenData,x,y,callBack) {
	if(screenData.divAccessed == false) {
		screenData.divAccessed = true;
		var al;
		var auxtext;
		saturn.client.WorkspaceApplication.getApplication().debug("access db");
		al = "orphanetDiv";
		auxtext = "";
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery(al,{ target : screenData.target},null,true,function(results,error) {
			if(error == null) {
				var div = window.document.createElement("div");
				div.id = "box";
				var ii;
				var ttext;
				var geneid;
				ttext = "";
				geneid = "";
				var _g1 = 0;
				var _g = results.length;
				while(_g1 < _g) {
					var ii1 = _g1++;
					ttext = ttext + results[ii1].disorder_gene_assoc_type + " " + results[ii1].disorder_name + " (" + results[ii1].disorder_gene_assoc_status + ")<br><br>";
					geneid = results[ii1].geneid;
				}
				var t = "<style type=\"text/css\">\r\n                    .orphanetContent {width:300px; background-color:#ffffff; border:1px solid #cccccc;}\r\n                    .orphanetTitle{background-color:#eee; padding:5px 15px; }\r\n                    .orphanetInfo{font-size:10px}\r\n                    .orphanetResult{padding:3px 10px ;}\r\n                    </style>\r\n                    <div class=\"orphanetContent\">\r\n                    <div class=\"orphanetTitle\">\r\n                    <h3><a href=\"http://www.orpha.net/consor/cgi-bin/Disease_Genes.php?lng=EN&data_id=" + geneid + "\" target=\"_blank\">" + screenData.target + "</a></h3>\r\n                    <span class=\"orphanetInfo\">Click title for Orphanet reference page</span>\r\n                    </div><br><br>\r\n                    <div class=\"orphanetResult\">\r\n                    " + ttext + "\r\n                    </div>\r\n                    </div>";
				div.innerHTML = t;
				div.id = "divAnnotTable";
				div.style.cssText = "position:fixed;width:50px;left:" + x + ";top:" + y + ";-moz-border-radius:100px;border:1px  solid #ddd;-moz-box-shadow: 0px 0px 8px  #fff;";
				callBack(div);
			} else saturn.client.WorkspaceApplication.getApplication().debug(error);
		});
	} else saturn.client.WorkspaceApplication.getApplication().debug("NOT access db");
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.familyDomain = function(targetFamily,callBack) {
	var component = Ext.create("Ext.Img",{ src : "http://apps.thesgc.org/resources/phylogenetic_trees/static_images/" + targetFamily + "_tree.png", renderTo : Ext.getBody()});
	callBack(component);
};
saturn.client.programs.phylo5.Phylo5AnnotationMethods.prototype = {
	__class__: saturn.client.programs.phylo5.Phylo5AnnotationMethods
};
saturn.client.programs.phylo5.Phylo5RendererI = $hxClasses["saturn.client.programs.phylo5.Phylo5RendererI"] = function() { };
saturn.client.programs.phylo5.Phylo5RendererI.__name__ = ["saturn","client","programs","phylo5","Phylo5RendererI"];
saturn.client.programs.phylo5.Phylo5RendererI.prototype = {
	drawLine: null
	,drawText: null
	,startGroup: null
	,endGroup: null
	,__class__: saturn.client.programs.phylo5.Phylo5RendererI
};
saturn.client.programs.phylo5.Phylo5CanvasRenderer = $hxClasses["saturn.client.programs.phylo5.Phylo5CanvasRenderer"] = function(width,height,parentElement,rootNode) {
	this.scale = 1.0;
	var doc;
	this.canvas = window.document.createElement("canvas");
	this.parent = parentElement;
	parentElement.appendChild(this.canvas);
	this.canvas.width = width;
	this.canvas.height = height;
	this.rootNode = rootNode;
	this.ctx = this.canvas.getContext("2d");
	this.ctx.translate(0.5,0.5);
};
saturn.client.programs.phylo5.Phylo5CanvasRenderer.__name__ = ["saturn","client","programs","phylo5","Phylo5CanvasRenderer"];
saturn.client.programs.phylo5.Phylo5CanvasRenderer.__interfaces__ = [saturn.client.programs.phylo5.Phylo5RendererI];
saturn.client.programs.phylo5.Phylo5CanvasRenderer.prototype = {
	canvas: null
	,ctx: null
	,scale: null
	,parent: null
	,rootNode: null
	,cx: null
	,cy: null
	,drawLine: function(x0,y0,x1,y1,strokeStyle) {
		this.ctx.strokeStyle = strokeStyle;
		this.ctx.beginPath();
		this.ctx.moveTo(Math.round(x0),Math.round(y0));
		this.ctx.lineTo(Math.round(x1),Math.round(y1));
		this.ctx.stroke();
	}
	,drawText: function(text,tx,ty,x,y,rotation,textAlign,color) {
		this.ctx.save();
		this.ctx.translate(tx,ty);
		this.ctx.rotate(rotation);
		this.ctx.textAlign = textAlign;
		this.ctx.fillStyle = color;
		this.ctx.fillText(text,x,y);
		this.ctx.restore();
	}
	,drawSquare: function(tx,ty,color) {
		this.ctx.save();
		this.ctx.beginPath();
		this.ctx.rect(tx,ty,10,10);
		this.ctx.fillStyle = color;
		this.ctx.fill();
		this.ctx.restore();
	}
	,drawCircle: function(tx,ty,color) {
		var radius = 5;
		this.ctx.save();
		this.ctx.beginPath();
		this.ctx.strokeStyle = color;
		this.ctx.arc(tx,ty,radius,0,2 * Math.PI);
		this.ctx.fillStyle = color;
		this.ctx.fill();
		this.ctx.restore();
	}
	,drawImg: function(tx,ty,img) {
		this.ctx.drawImage(img,tx,ty);
	}
	,mesureText: function(text) {
		return this.ctx.measureText(text).width;
	}
	,startGroup: function(groupName) {
	}
	,endGroup: function() {
	}
	,zoomIn: function(annotations) {
		this.scale = this.scale + 0.2;
		var newWidth = this.canvas.width * this.scale;
		var newHeight = this.canvas.height * this.scale;
		this.ctx.save();
		this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);
		this.ctx.translate(this.cx,this.cy);
		this.ctx.scale(this.scale,this.scale);
		var radialRendererObj = new saturn.client.programs.phylo5.Phylo5RadialTreeLayout(this.canvas.width,this.canvas.height);
		radialRendererObj.render(this.rootNode,this,annotations);
		this.ctx.restore();
	}
	,zoomOut: function(annotations) {
		if(this.scale > 0.4) {
			this.scale = this.scale - 0.2;
			var newWidth = this.canvas.width * this.scale;
			var newHeight = this.canvas.height * this.scale;
			this.ctx.save();
			this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);
			this.ctx.translate(this.cx,this.cy);
			this.ctx.scale(this.scale,this.scale);
			var radialRendererObj = new saturn.client.programs.phylo5.Phylo5RadialTreeLayout(this.canvas.width,this.canvas.height);
			radialRendererObj.render(this.rootNode,this,annotations);
			this.ctx.restore();
		}
	}
	,__class__: saturn.client.programs.phylo5.Phylo5CanvasRenderer
};
saturn.client.programs.phylo5.Phylo5Math = $hxClasses["saturn.client.programs.phylo5.Phylo5Math"] = function() { };
saturn.client.programs.phylo5.Phylo5Math.__name__ = ["saturn","client","programs","phylo5","Phylo5Math"];
saturn.client.programs.phylo5.Phylo5Math.degreesToRadians = function(a) {
	return a * (Math.PI / 180);
};
saturn.client.programs.phylo5.Phylo5Math.radiansToDegrees = function(b) {
	return b * (180 / Math.PI);
};
saturn.client.programs.phylo5.Phylo5Math.getMaxOfArray = function(a) {
	var i;
	var n;
	n = a[0];
	var _g1 = 1;
	var _g = a.length;
	while(_g1 < _g) {
		var i1 = _g1++;
		if(n < a[i1]) n = a[i1];
	}
	return n;
};
saturn.client.programs.phylo5.Phylo5NewickParser = $hxClasses["saturn.client.programs.phylo5.Phylo5NewickParser"] = function() {
};
saturn.client.programs.phylo5.Phylo5NewickParser.__name__ = ["saturn","client","programs","phylo5","Phylo5NewickParser"];
saturn.client.programs.phylo5.Phylo5NewickParser.prototype = {
	parse: function(newickString) {
		var rootNode;
		rootNode = new saturn.client.programs.phylo5.Phylo5TreeNode();
		var currentNode = rootNode;
		var a;
		var branch;
		var charArray = newickString.split("");
		var j = 0;
		var _g1 = 0;
		var _g = charArray.length;
		while(_g1 < _g) {
			var j1 = _g1++;
			var i = j1;
			if(charArray[i] == "(" && charArray[i + 1] == "(") {
				var childNode = new saturn.client.programs.phylo5.Phylo5TreeNode(currentNode,"",false,0);
				currentNode = childNode;
			} else if(charArray[i] == "(" && charArray[i + 1] != "(" || charArray[i] == "," && charArray[i + 1] != "(") {
				i++;
				var name = "";
				while(charArray[i] != ":" && charArray[i] != "," && charArray[i] != ")") {
					name += charArray[i];
					i++;
				}
				if(charArray[i] == ":") {
					i++;
					branch = "";
					while(charArray[i] != "," && charArray[i] != ")" && charArray[i] != ";") {
						branch += charArray[i];
						i++;
					}
					i--;
					branch = Std.parseFloat(branch);
				} else branch = 1;
				var child = new saturn.client.programs.phylo5.Phylo5TreeNode(currentNode,name,true,branch);
			} else if(charArray[i] == "," && charArray[i + 1] == "(") {
				var child1 = new saturn.client.programs.phylo5.Phylo5TreeNode(currentNode,"",false,0);
				currentNode = child1;
			} else if(charArray[i] == ")") {
				if(charArray[i + 1] == ":") {
					i += 2;
					branch = "";
					while(charArray[i] != "," && charArray[i] != ")" && charArray[i] != ";") {
						branch += charArray[i];
						i++;
					}
					i--;
					currentNode.branch = Std.parseFloat(branch);
				}
				currentNode = currentNode.parent;
			}
		}
		if(currentNode == null) return rootNode; else return currentNode;
	}
	,__class__: saturn.client.programs.phylo5.Phylo5NewickParser
};
saturn.client.programs.phylo5.Phylo5RadialTreeLayout = $hxClasses["saturn.client.programs.phylo5.Phylo5RadialTreeLayout"] = function(width,height) {
	this.cx = width / 2;
	this.cy = height / 2;
};
saturn.client.programs.phylo5.Phylo5RadialTreeLayout.__name__ = ["saturn","client","programs","phylo5","Phylo5RadialTreeLayout"];
saturn.client.programs.phylo5.Phylo5RadialTreeLayout.prototype = {
	cx: null
	,cy: null
	,render: function(treeNode,renderer,annotations) {
		var i = 0;
		var x = treeNode.x;
		var y = treeNode.y;
		while(i < treeNode.children.length) {
			treeNode.children[i].space = 0;
			if(treeNode.children[i].isLeaf()) {
				renderer.drawLine(x,y,treeNode.children[i].x,treeNode.children[i].y,"rgb(28,102,224)");
				var t;
				if(treeNode.children[i].angle > Math.PI / 2 && treeNode.children[i].angle < 3 * Math.PI / 2) {
					renderer.drawText(treeNode.children[i].name,treeNode.children[i].x,treeNode.children[i].y,-2,3,treeNode.children[i].angle + Math.PI + Math.PI / 20,"end","#585b5f");
					t = renderer.mesureText(treeNode.children[i].name) + 10;
				} else {
					renderer.drawText(" " + treeNode.children[i].name,treeNode.children[i].x,treeNode.children[i].y,-2,3,treeNode.children[i].angle + Math.PI / 20,"start","#585b5f");
					t = renderer.mesureText(treeNode.children[i].name) + 10;
				}
				var j;
				var _g1 = 1;
				var _g = annotations.length;
				while(_g1 < _g) {
					var j1 = _g1++;
					if(annotations[j1] == true) {
						var added;
						added = this.addAnnotation(treeNode.children[i],j1,t,renderer);
						if(treeNode.children[i].annotations[j1] != null && treeNode.children[i].annotations[j1].alfaAnnot != null && treeNode.children[i].annotations[j1].alfaAnnot.length > 0) {
							var u = 0;
							treeNode.children[i].space = treeNode.children[i].space + 1;
							var _g3 = 0;
							var _g2 = treeNode.children[i].annotations[j1].alfaAnnot.length;
							while(_g3 < _g2) {
								var u1 = _g3++;
								added = this.addAlfaAnnotation(treeNode.children[i],treeNode.children[i].annotations[j1].alfaAnnot[u1],j1,t,renderer);
								if(added == true) treeNode.children[i].space = treeNode.children[i].space + 1;
							}
						} else if(added == true) treeNode.children[i].space = treeNode.children[i].space + 1;
					}
				}
			} else {
				this.render(treeNode.children[i],renderer,annotations);
				renderer.drawLine(x,y,treeNode.children[i].x,treeNode.children[i].y,"rgb(28,102,224)");
			}
			i++;
		}
	}
	,addAnnotation: function(leave,annotation,$long,renderer) {
		var res = false;
		var data;
		data = new saturn.client.programs.phylo5.Phylo5ScreenData();
		data.target = leave.name;
		data.annot = annotation;
		data.annotation = leave.annotations[annotation];
		var rootN = leave.root;
		var _g = rootN.annotations[annotation].shape;
		switch(_g) {
		case "cercle":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					if(leave.space == 0) $long = $long + 1; else $long = $long + 27 * leave.space;
					var nx = leave.x + Math.cos(leave.angle + Math.PI / 20) * $long;
					var ny = leave.y + Math.sin(leave.angle + Math.PI / 20) * $long;
					renderer.drawCircle(nx,ny,leave.annotations[annotation].color[0].color);
					var aux = nx * renderer.scale;
					data.x = Math.round(aux);
					aux = ny * renderer.scale;
					data.y = Math.round(aux);
					aux = 7 * renderer.scale;
					data.width = Math.round(aux);
					data.height = Math.round(aux);
					data.point = 1;
					res = true;
				} else return false;
			}
			break;
		case "image":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					if(leave.space == 0) $long = $long + 7; else $long = $long + 27 * leave.space;
					var aux_x = leave.x;
					var aux_y = leave.y;
					if(leave.root.annotations[annotation].annotImg[leave.annotations[annotation].defaultImg] != null) {
						aux_x = leave.x - leave.root.annotations[annotation].annotImg[leave.annotations[annotation].defaultImg].width / 2;
						aux_y = leave.y - leave.root.annotations[annotation].annotImg[leave.annotations[annotation].defaultImg].height / 2;
						var nx1 = aux_x + Math.cos(leave.angle + Math.PI / 20) * $long;
						var ny1 = aux_y + Math.sin(leave.angle + Math.PI / 20) * $long;
						var imge = leave.root.annotations[annotation].annotImg[leave.annotations[annotation].defaultImg];
						if(imge != null) {
							renderer.drawImg(nx1,ny1,imge);
							var aux1 = nx1 * renderer.scale;
							data.x = Math.round(aux1);
							aux1 = ny1 * renderer.scale;
							data.y = Math.round(aux1);
							aux1 = 22 * renderer.scale;
							data.width = Math.round(aux1);
							aux1 = 21 * renderer.scale;
							data.height = Math.round(aux1);
							data.point = 1;
						}
					}
					res = true;
				} else return false;
			}
			break;
		case "square":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					if(leave.space == 0) $long = $long + 1; else $long = $long + 27 * leave.space;
					var aux_x1 = leave.x;
					var aux_y1 = leave.y;
					aux_x1 = leave.x - 7;
					aux_y1 = leave.y - 7;
					var nx2 = aux_x1 + Math.cos(leave.angle + Math.PI / 20) * $long;
					var ny2 = aux_y1 + Math.sin(leave.angle + Math.PI / 20) * $long;
					renderer.drawSquare(nx2,ny2,leave.annotations[annotation].color[0].color);
					data.point = 1;
					var aux2 = nx2 * renderer.scale;
					data.x = Math.round(aux2);
					aux2 = ny2 * renderer.scale;
					data.y = Math.round(aux2);
					aux2 = 20 * renderer.scale;
					data.width = Math.round(aux2);
					aux2 = 20 * renderer.scale;
					data.height = Math.round(aux2);
					res = true;
				} else return false;
			}
			break;
		case "text":
			if(leave.activeAnnotation[annotation] == true) {
				if(leave.annotations[annotation].hasAnnot == true) {
					if(leave.space == 0) $long = $long + 5; else $long = $long + 25 * leave.space;
					var aux_x2 = leave.x;
					var aux_y2 = leave.y;
					aux_x2 = leave.x - 7;
					aux_y2 = leave.y - 7;
					data.point = 2;
					var nx3 = aux_x2 + Math.cos(leave.angle + Math.PI / 20) * $long;
					var ny3 = aux_y2 + Math.sin(leave.angle + Math.PI / 20) * $long;
					renderer.drawText(leave.annotations[annotation].text,nx3,ny3,-2,3,0,"start",leave.annotations[annotation].color[0].color);
					var aux3 = nx3 * renderer.scale;
					data.x = Math.round(aux3) - 12;
					aux3 = ny3 * renderer.scale;
					data.y = Math.round(aux3);
					aux3 = leave.annotations[annotation].text.length * renderer.scale;
					data.width = 7 * Math.round(aux3);
					aux3 = 10 * renderer.scale;
					data.height = Math.round(aux3);
					res = true;
				} else return false;
			}
			break;
		}
		leave.root.screen[leave.root.screen.length] = data;
		return res;
	}
	,addAlfaAnnotation: function(leave,alfaAnnot,annotation,$long,renderer) {
		var res = false;
		var data;
		data = new saturn.client.programs.phylo5.Phylo5ScreenData();
		data.target = leave.name;
		data.annot = annotation;
		data.annotation = alfaAnnot;
		var rootN = leave.root;
		var _g = rootN.annotations[annotation].shape;
		switch(_g) {
		case "cercle":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					if(leave.space == 0) $long = $long + 1; else $long = $long + 27 * leave.space;
					var nx = leave.x + Math.cos(leave.angle + Math.PI / 20) * $long;
					var ny = leave.y + Math.sin(leave.angle + Math.PI / 20) * $long;
					renderer.drawCircle(nx,ny,alfaAnnot.color[0].color);
					var aux = nx * renderer.scale;
					data.x = Math.round(aux);
					aux = ny * renderer.scale;
					data.y = Math.round(aux);
					aux = 7 * renderer.scale;
					data.width = Math.round(aux);
					data.height = Math.round(aux);
					data.point = 1;
					res = true;
				} else return false;
			}
			break;
		case "image":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					if(leave.space == 0) $long = $long + 7; else $long = $long + 27 * leave.space;
					var aux_x = leave.x;
					var aux_y = leave.y;
					if(leave.root.annotations[annotation].annotImg[alfaAnnot.defaultImg] != null) {
						aux_x = leave.x - leave.root.annotations[annotation].annotImg[alfaAnnot.defaultImg].width / 2;
						aux_y = leave.y - leave.root.annotations[annotation].annotImg[alfaAnnot.defaultImg].height / 2;
						var nx1 = aux_x + Math.cos(leave.angle + Math.PI / 20) * $long;
						var ny1 = aux_y + Math.sin(leave.angle + Math.PI / 20) * $long;
						var imge = leave.root.annotations[annotation].annotImg[alfaAnnot.defaultImg];
						if(imge != null) {
							renderer.drawImg(nx1,ny1,imge);
							var aux1 = nx1 * renderer.scale;
							data.x = Math.round(aux1);
							aux1 = ny1 * renderer.scale;
							data.y = Math.round(aux1);
							aux1 = 22 * renderer.scale;
							data.width = Math.round(aux1);
							aux1 = 21 * renderer.scale;
							data.height = Math.round(aux1);
							data.point = 1;
						}
					}
					res = true;
				} else return false;
			}
			break;
		case "square":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					if(leave.space == 0) $long = $long + 1; else $long = $long + 27 * leave.space;
					var aux_x1 = leave.x;
					var aux_y1 = leave.y;
					aux_x1 = leave.x - 7;
					aux_y1 = leave.y - 7;
					var nx2 = aux_x1 + Math.cos(leave.angle + Math.PI / 20) * $long;
					var ny2 = aux_y1 + Math.sin(leave.angle + Math.PI / 20) * $long;
					renderer.drawSquare(nx2,ny2,alfaAnnot.color[0].color);
					data.point = 1;
					var aux2 = nx2 * renderer.scale;
					data.x = Math.round(aux2);
					aux2 = ny2 * renderer.scale;
					data.y = Math.round(aux2);
					aux2 = 20 * renderer.scale;
					data.width = Math.round(aux2);
					aux2 = 20 * renderer.scale;
					data.height = Math.round(aux2);
					res = true;
				} else return false;
			}
			break;
		case "text":
			if(leave.activeAnnotation[annotation] == true) {
				if(alfaAnnot.hasAnnot == true) {
					if(leave.space == 0) $long = $long + 5; else $long = $long + 25 * leave.space;
					var aux_x2 = leave.x;
					var aux_y2 = leave.y;
					aux_x2 = leave.x - 7;
					aux_y2 = leave.y - 7;
					data.point = 2;
					var nx3 = aux_x2 + Math.cos(leave.angle + Math.PI / 20) * $long;
					var ny3 = aux_y2 + Math.sin(leave.angle + Math.PI / 20) * $long;
					renderer.drawText(alfaAnnot.text,nx3,ny3,-2,3,0,"start",alfaAnnot.color[0].color);
					var aux3 = nx3 * renderer.scale;
					data.x = Math.round(aux3) - 12;
					aux3 = ny3 * renderer.scale;
					data.y = Math.round(aux3);
					aux3 = alfaAnnot.text.length * renderer.scale;
					data.width = 7 * Math.round(aux3);
					aux3 = 10 * renderer.scale;
					data.height = Math.round(aux3);
					res = true;
				} else return false;
			}
			break;
		}
		leave.root.screen[leave.root.screen.length] = data;
		return res;
	}
	,addScreenPos: function(annotation,nx,ny,root) {
		var x0;
		var y0;
		x0 = Math.round(nx);
		y0 = Math.round(ny);
		switch(annotation) {
		case 1:
			break;
		case 2:
			break;
		}
	}
	,__class__: saturn.client.programs.phylo5.Phylo5RadialTreeLayout
};
saturn.client.programs.phylo5.Phylo5ScreenData = $hxClasses["saturn.client.programs.phylo5.Phylo5ScreenData"] = function() {
	this.suboption = 0;
	this.annotation = new saturn.client.programs.phylo5.Phylo5Annotation();
	this.created = false;
	this.divAccessed = false;
};
saturn.client.programs.phylo5.Phylo5ScreenData.__name__ = ["saturn","client","programs","phylo5","Phylo5ScreenData"];
saturn.client.programs.phylo5.Phylo5ScreenData.prototype = {
	point: null
	,x: null
	,y: null
	,width: null
	,height: null
	,annotation: null
	,created: null
	,target: null
	,annot: null
	,root: null
	,div: null
	,divAccessed: null
	,suboption: null
	,checkMouse: function(mx,my) {
		var _g = this.point;
		switch(_g) {
		case 3:
			if(this.x < mx && mx < this.x + this.width / 2 && (my < this.y && my > this.y - this.height / 2)) return true; else return false;
			break;
		case 1:
			if(mx > this.x - this.width && mx < this.x && my < this.y + this.height && my > this.y) return true; else return false;
			break;
		case 2:
			if(mx > this.x && mx < this.x + this.width && my > this.y - this.height / 2 && my < this.y + this.height / 2) return true; else return false;
			break;
		default:
			return false;
		}
	}
	,__class__: saturn.client.programs.phylo5.Phylo5ScreenData
};
saturn.client.programs.phylo5.Phylo5TreeNode = $hxClasses["saturn.client.programs.phylo5.Phylo5TreeNode"] = function(parent,name,leaf,branch) {
	this.leaves = 0;
	this.ratio = 0.6;
	this.dist = 40;
	this.space = 0;
	this.parent = parent;
	this.children = [];
	this.name = name;
	this.leaf = leaf;
	if(branch < 0) branch = 0;
	this.branch = branch;
	if(this.parent != null) {
		this.parent.addChild(this);
		this.root = this.parent.root;
	} else {
		this.targets = [];
		this.root = this;
		this.screen = [];
		this.divactive = 99999;
		this.leafNameToNode = new haxe.ds.StringMap();
		this.auxMap = new haxe.ds.StringMap();
	}
	this.angle = 0;
	this.x = 0;
	this.y = 0;
	this.wedge = 0;
	this.length = 0;
	this.l = 0;
};
saturn.client.programs.phylo5.Phylo5TreeNode.__name__ = ["saturn","client","programs","phylo5","Phylo5TreeNode"];
saturn.client.programs.phylo5.Phylo5TreeNode.prototype = {
	parent: null
	,name: null
	,targetFamily: null
	,leaf: null
	,branch: null
	,angle: null
	,x: null
	,y: null
	,wedge: null
	,length: null
	,l: null
	,root: null
	,annotations: null
	,activeAnnotation: null
	,targets: null
	,screen: null
	,divactive: null
	,space: null
	,auxMap: null
	,children: null
	,dist: null
	,ratio: null
	,leaves: null
	,leafNameToNode: null
	,postOrderTraversal: function() {
		if(this.isLeaf() == true) {
			this.l = 1;
			this.root.targets[this.root.leaves] = this.name;
			this.root.leaves = this.root.leaves + 1;
			this.annotations = [];
			this.activeAnnotation = [];
			this.root.leafNameToNode.set(this.name,this);
		} else {
			var i = 0;
			while(i < this.children.length) {
				this.children[i].postOrderTraversal();
				this.l = this.l + this.children[i].l;
				i++;
			}
		}
	}
	,preOrderTraversal: function() {
		if(this.parent != null) {
			var parent = this.parent;
			this.x = parent.x + Math.cos(this.angle + this.wedge / 2) * this.root.dist;
			this.y = parent.y + Math.sin(this.angle + this.wedge / 2) * this.root.dist;
		}
		var n = this.angle;
		var i = 0;
		while(i < this.children.length) {
			this.children[i].wedge = this.children[i].l / this.children[i].root.l * 2 * Math.PI + Math.PI / 20;
			this.children[i].angle = n;
			n = n + this.children[i].wedge;
			this.children[i].preOrderTraversal();
			i++;
		}
	}
	,getChildren: function() {
		return this.children;
	}
	,getChildN: function(i) {
		return this.children[i];
	}
	,addChild: function(child) {
		this.children[this.children.length] = child;
	}
	,isLeaf: function() {
		return this.leaf;
	}
	,getLeafCount: function() {
		if(this.isLeaf() == true) return 1; else {
			var total = 0;
			var i;
			i = 0;
			var _g1 = 0;
			var _g = this.children.length;
			while(_g1 < _g) {
				var i1 = _g1++;
				total += this.children[i1].getLeafCount();
			}
			return total;
		}
	}
	,getDepth: function() {
		if(this.parent == null) return 0; else return 1 + this.parent.getDepth();
	}
	,getHeight: function() {
		if(this.isLeaf()) return 0; else {
			var heightList = [];
			var i;
			i = 0;
			var _g1 = 0;
			var _g = this.children.length;
			while(_g1 < _g) {
				var i1 = _g1++;
				heightList[i1] = this.children[i1].getHeight() + 1;
			}
			return saturn.client.programs.phylo5.Phylo5Math.getMaxOfArray(heightList);
		}
	}
	,__class__: saturn.client.programs.phylo5.Phylo5TreeNode
};
if(!saturn.client.programs.plugins) saturn.client.programs.plugins = {};
saturn.client.programs.plugins.AbstractPDBRendererPlugin = $hxClasses["saturn.client.programs.plugins.AbstractPDBRendererPlugin"] = function() {
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.AbstractPDBRendererPlugin.__name__ = ["saturn","client","programs","plugins","AbstractPDBRendererPlugin"];
saturn.client.programs.plugins.AbstractPDBRendererPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.AbstractPDBRendererPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	surfaceOn: function() {
	}
	,surfaceOff: function() {
	}
	,resize: function() {
	}
	,loadPDB: function() {
	}
	,loadICB: function() {
	}
	,initialise: function() {
	}
	,ribbonOn: function() {
	}
	,ribbonOff: function() {
	}
	,wireOn: function() {
	}
	,wireOff: function() {
	}
	,labelsOn: function() {
	}
	,labelsOff: function() {
	}
	,getName: function() {
		return "PDB Renderer";
	}
	,__class__: saturn.client.programs.plugins.AbstractPDBRendererPlugin
});
saturn.client.programs.plugins.ActiveICMPlugin = $hxClasses["saturn.client.programs.plugins.ActiveICMPlugin"] = function() {
	saturn.client.programs.plugins.AbstractPDBRendererPlugin.call(this);
};
saturn.client.programs.plugins.ActiveICMPlugin.__name__ = ["saturn","client","programs","plugins","ActiveICMPlugin"];
saturn.client.programs.plugins.ActiveICMPlugin.__super__ = saturn.client.programs.plugins.AbstractPDBRendererPlugin;
saturn.client.programs.plugins.ActiveICMPlugin.prototype = $extend(saturn.client.programs.plugins.AbstractPDBRendererPlugin.prototype,{
	id: null
	,object: null
	,loadPDB: function() {
		var pdbId = this.theProgram.getActiveObjectObject().pdbId;
		var url = "\"http://www.rcsb.org/pdb/files/" + pdbId.toUpperCase() + ".pdb\"";
		this.clear();
		this.object.RunCommands("read pdb " + url);
		this.display();
		this.applyConfiguration();
	}
	,loadICB: function() {
		this.object.RunCommands("read binary \"" + Std.string(this.theProgram.getActiveObjectObject().icbURL) + "\"");
		this.display();
	}
	,clear: function() {
		this.object.RunCommands("delete all");
	}
	,display: function() {
		this.object.RunCommands("display");
	}
	,applyConfiguration: function() {
		if(this.theProgram.getActiveObjectObject().ribbonOn) this.ribbonOn(); else this.ribbonOff();
		if(this.theProgram.getActiveObjectObject().wireOn) this.wireOn(); else this.wireOff();
	}
	,ribbonOn: function() {
		this.object.RunCommands("display ribbon");
	}
	,ribbonOff: function() {
		this.object.RunCommands("undisplay ribbon");
	}
	,wireOn: function() {
		this.object.RunCommands("display wire");
	}
	,wireOff: function() {
		this.object.RunCommands("undisplay wire");
	}
	,initialise: function() {
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		this.object = window.document.createElement("object");
		this.object.setAttribute("type","application/x-molsoft-icb");
		this.object.setAttribute("width","600px");
		this.object.setAttribute("height","600px");
		this.id = Ext.id();
		this.object.setAttribute("id",this.id);
		dom.appendChild(this.object);
	}
	,destroy: function() {
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		var children = dom.children;
		var _g = 0;
		while(_g < children.length) {
			var childNode = children[_g];
			++_g;
			dom.removeChild(childNode);
		}
	}
	,onFocus: function() {
		saturn.client.programs.plugins.AbstractPDBRendererPlugin.prototype.onFocus.call(this);
		this.theProgram.reload();
	}
	,getName: function() {
		return "ActiveICM";
	}
	,__class__: saturn.client.programs.plugins.ActiveICMPlugin
});
saturn.client.programs.plugins.GridVarPlugin = $hxClasses["saturn.client.programs.plugins.GridVarPlugin"] = function() { };
saturn.client.programs.plugins.GridVarPlugin.__name__ = ["saturn","client","programs","plugins","GridVarPlugin"];
saturn.client.programs.plugins.GridVarPlugin.prototype = {
	outlineAdd: null
	,__class__: saturn.client.programs.plugins.GridVarPlugin
};
saturn.client.programs.plugins.AlignmentGVPlugin = $hxClasses["saturn.client.programs.plugins.AlignmentGVPlugin"] = function() {
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.AlignmentGVPlugin.__name__ = ["saturn","client","programs","plugins","AlignmentGVPlugin"];
saturn.client.programs.plugins.AlignmentGVPlugin.__interfaces__ = [saturn.client.programs.plugins.GridVarPlugin];
saturn.client.programs.plugins.AlignmentGVPlugin.getTableDefinitionFromAlignment = function(alignmentString) {
	var msa = saturn.core.ClustalOmegaParser.read(alignmentString);
	return saturn.client.programs.plugins.AlignmentGVPlugin.getTableDefinition(msa.getFirstName(),msa);
};
saturn.client.programs.plugins.AlignmentGVPlugin.getTableDefinition = function(baseItem,msa) {
	msa.idToAlnStr.remove(" ");
	msa.seqOrder.pop();
	var baseSequence = msa.getAlignment(baseItem);
	var overlaps = [];
	var def = { title : "Data", data : [], columnDefs : [], raw : null};
	def.raw = msa;
	var alns = [];
	var columnOrder = [];
	var _g = 0;
	var _g1 = msa.seqOrder;
	while(_g < _g1.length) {
		var column = _g1[_g];
		++_g;
		if(column != baseItem) {
			columnOrder.push(column);
			alns.push(msa.getAlignment(column));
			def.columnDefs.unshift({ text : column, dataIndex : column, editor : "textfield"});
		}
	}
	def.columnDefs.unshift({ text : "Residue", dataIndex : "residue", editor : "textfield"});
	var _g11 = 0;
	var _g2 = baseSequence.length;
	while(_g11 < _g2) {
		var i = _g11++;
		var $char = baseSequence.charAt(i);
		if($char != "-") {
			var row = { 'residue' : $char};
			var _g3 = 0;
			var _g21 = columnOrder.length;
			while(_g3 < _g21) {
				var j = _g3++;
				if(alns[j].charAt(i) != "-") row[columnOrder[j]] = "1";
			}
			def.data.push(row);
		}
	}
	return def;
};
saturn.client.programs.plugins.AlignmentGVPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.AlignmentGVPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	outlineAdd: function(objectId) {
		var object = this.getProgram().getWorkspace().getObject(objectId);
		if(js.Boot.__instanceof(object,saturn.client.workspace.AlignmentWorkspaceObject)) this.refreshAlignment(object); else if(js.Boot.__instanceof(object,saturn.client.workspace.DNAWorkspaceObject)) this.refreshDNASequence(object); else if(js.Boot.__instanceof(object,saturn.client.workspace.ProteinWorkspaceObject)) this.refreshProteinSequence(object); else if(js.Boot.__instanceof(object,saturn.core.Protein) || js.Boot.__instanceof(object,saturn.core.DNA)) this.refreshSequenceString(this.rowSequence(object.getSequence()));
	}
	,refreshDNASequence: function(object) {
		this.refreshSequenceString(this.rowSequence(object.getDNAObject().getSequence()));
	}
	,refreshProteinSequence: function(object) {
		this.refreshSequenceString(this.rowSequence(object.getObject().getSequence()));
	}
	,refreshSequenceString: function(contents) {
		var prog = this.getProgram();
		prog.getDataTable().performPaste(contents,[0,0]);
	}
	,refreshAlignment: function(object) {
		var _g = this;
		if(object != null) {
			var aln = object.getObject();
			var alnURL = aln.getAlignmentURL();
			if(alnURL != null) saturn.client.core.CommonCore.getContent(alnURL,function(content) {
				var def = saturn.client.programs.plugins.AlignmentGVPlugin.getTableDefinitionFromAlignment(content);
				var prog = _g.getProgram();
				var dataTable = prog.getDataTable();
				dataTable.reconfigure(def);
				prog.redrawGridVar();
			});
		}
	}
	,rowSequence: function(sequence) {
		var buf = new StringBuf();
		var _g1 = 0;
		var _g = sequence.length;
		while(_g1 < _g) {
			var i = _g1++;
			buf.add(sequence.charAt(i) + "\n");
		}
		return buf.b;
	}
	,__class__: saturn.client.programs.plugins.AlignmentGVPlugin
});
saturn.client.programs.plugins.AnnotationPlugin = $hxClasses["saturn.client.programs.plugins.AnnotationPlugin"] = function() {
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.AnnotationPlugin.__name__ = ["saturn","client","programs","plugins","AnnotationPlugin"];
saturn.client.programs.plugins.AnnotationPlugin.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.plugins.AnnotationPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.AnnotationPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	onFocus: function() {
		saturn.client.BaseProgramPlugin.prototype.onFocus.call(this);
		var program = this.getProgram();
		program.addAnnotation("Test Annotation");
		program.setAnnotationClass("Test Annotation",saturn.client.programs.sequenceeditor.CanvasAnnotationBlock);
	}
	,setProgram: function(program) {
		saturn.client.BaseProgramPlugin.prototype.setProgram.call(this,program);
		program.addSequenceChangeListener(this);
	}
	,sequenceChanged: function(sequence) {
		var program = this.getProgram();
		var blocks = program.getAnnotationBlocks("Test Annotation");
		var aC = "rgb(0,255,0)";
		var tC = "rgb(255,0,0)";
		var gC = "rgb(0,0,255)";
		var cC = "rgb(125,125,125)";
		var pos = 0;
		var _g = 0;
		while(_g < blocks.length) {
			var block = blocks[_g];
			++_g;
			var canvasBlock;
			canvasBlock = js.Boot.__cast(block , saturn.client.programs.sequenceeditor.CanvasAnnotationBlock);
			var canvas = canvasBlock.getCanvas();
			var ctx = canvas.getContext("2d");
			ctx.clearRect(0,0,canvas.width,canvas.height);
			var width = canvas.width;
			var charWidth = program.getDefaultCharWidth();
			var xPos = 0.;
			var yPos = Math.round(canvas.height) + 0.5;
			var charsDone = 0;
			while(charsDone < program.blockSize) {
				charsDone++;
				var $char = sequence.charAt(pos++);
				var c;
				switch($char) {
				case "A":
					c = aC;
					break;
				case "T":
					c = tC;
					break;
				case "C":
					c = cC;
					break;
				case "G":
					c = gC;
					break;
				default:
					c = aC;
				}
				ctx.beginPath();
				xPos = xPos + charWidth;
				ctx.lineWidth = 1;
				ctx.moveTo(xPos + 0.5,0);
				ctx.lineTo(xPos + 0.5,yPos);
				ctx.strokeStyle = c;
				ctx.stroke();
				ctx.closePath();
			}
			ctx.beginPath();
			var yCenterPos = yPos / 2;
			ctx.moveTo(0,yCenterPos);
			ctx.lineTo(width,yCenterPos);
			ctx.stroke();
			ctx.closePath();
		}
	}
	,__class__: saturn.client.programs.plugins.AnnotationPlugin
});
saturn.client.programs.plugins.DisoPredAnnotationPlugin = $hxClasses["saturn.client.programs.plugins.DisoPredAnnotationPlugin"] = function() {
	this.firstChangeEvent = true;
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.DisoPredAnnotationPlugin.__name__ = ["saturn","client","programs","plugins","DisoPredAnnotationPlugin"];
saturn.client.programs.plugins.DisoPredAnnotationPlugin.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.plugins.DisoPredAnnotationPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.DisoPredAnnotationPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	annotationPos: null
	,firstChangeEvent: null
	,lastCrc: null
	,lastSSStr: null
	,onFocus: function() {
		saturn.client.BaseProgramPlugin.prototype.onFocus.call(this);
	}
	,setProgram: function(program) {
		saturn.client.BaseProgramPlugin.prototype.setProgram.call(this,program);
		program.addSequenceChangeListener(this);
		this.annotationPos = program.addAnnotation("DisoPred");
		program.setAnnotationClass("DisoPred",saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv);
	}
	,destroy: function() {
		var seqProg = this.theProgram;
		seqProg.removeSequenceChangeListener(this);
		saturn.client.BaseProgramPlugin.prototype.destroy.call(this);
	}
	,paintFromString: function(ssStr) {
		this.lastSSStr = ssStr;
		var program = this.getProgram();
		var blocks = program.getAnnotationBlocks("DisoPred");
		var pos = 0;
		var blockSize = program.blockSize;
		var _g = 0;
		while(_g < blocks.length) {
			var block = blocks[_g];
			++_g;
			var dBlock;
			dBlock = js.Boot.__cast(block , saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv);
			if(ssStr == null || ssStr == "") {
				dBlock.setHtml("");
				continue;
			}
			var ss = HxOverrides.substr(ssStr,pos,blockSize);
			pos += blockSize;
			var bNum = block.getBlockNumber();
			var strBuf_b = "";
			var lChar = "-";
			var bCount = 0;
			var _g2 = 0;
			var _g1 = ss.length;
			while(_g2 < _g1) {
				var i = _g2++;
				bCount++;
				var cChar = ss.charAt(i);
				if(cChar == lChar) if(cChar == null) strBuf_b += "null"; else strBuf_b += "" + cChar; else {
					var c = "red";
					if(cChar == "*") c = "red"; else if(cChar == ".") c = "green";
					if(cChar == "E") c = "blue";
					if(i != 0) strBuf_b += "</pre></font>";
					strBuf_b += Std.string("<font color=\"" + c + "\"\"><pre block_part_start =" + (bCount - 1) + " blockNumber =" + bNum + " style=\"display:inline-block\" class=\"molbio-sequenceeditor-block-part\">" + cChar);
				}
			}
			dBlock.setHtml(strBuf_b);
		}
		program.setAnnotationSequence(this.annotationPos,ssStr);
	}
	,sequenceChanged: function(sequence) {
		var _g = this;
		var program = this.getProgram();
		if(!program.isAnnotationOn(this.annotationPos)) return;
		if(!program.liveUpdateEnabled()) return;
		var crc = haxe.crypto.Md5.encode(sequence);
		if(crc == this.lastCrc && sequence != null && sequence != "") {
			this.paintFromString(this.lastSSStr);
			return;
		} else this.lastCrc = crc;
		var wo = program.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject);
		var name = wo.getName();
		program.getApplication().showMessage("Disopred Warning","Disorder prediction can be slow.  You can use MolBio whilst it is being predicted by clicking OK");
		saturn.client.BioinformaticsServicesClient.getClient().sendDisoPredReportRequest(sequence,name,function(response,error) {
			if(error == null) {
				var report = response.json.rawHoriReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + report;
				Ext.Ajax.request({ url : dstURL, success : function(response1,opts) {
					var obj = response1.responseText;
					_g.paintFromDisoPredString(obj);
				}, failure : function(response2,opts1) {
					program.getApplication().showMessage("DisoPred Error","DisoPred error");
				}});
			} else program.getApplication().showMessage("DisoPred Error",error);
		});
	}
	,paintFromDisoPredString: function(psiPredStr) {
		var ssStr_b = "";
		var lines = psiPredStr.split("\n");
		var _g = 0;
		while(_g < lines.length) {
			var line = lines[_g];
			++_g;
			if(saturn.client.programs.plugins.DisoPredAnnotationPlugin.reg_predLines.match(line)) {
				var ss = saturn.client.programs.plugins.DisoPredAnnotationPlugin.reg_predLines.matched(1);
				if(ss == null) ssStr_b += "null"; else ssStr_b += "" + ss;
			}
		}
		this.paintFromString(ssStr_b);
	}
	,__class__: saturn.client.programs.plugins.DisoPredAnnotationPlugin
});
saturn.client.programs.plugins.DomainAnnotationPlugin = $hxClasses["saturn.client.programs.plugins.DomainAnnotationPlugin"] = function() {
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.DomainAnnotationPlugin.__name__ = ["saturn","client","programs","plugins","DomainAnnotationPlugin"];
saturn.client.programs.plugins.DomainAnnotationPlugin.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.plugins.DomainAnnotationPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.DomainAnnotationPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	onFocus: function() {
		saturn.client.BaseProgramPlugin.prototype.onFocus.call(this);
	}
	,setProgram: function(program) {
		saturn.client.BaseProgramPlugin.prototype.setProgram.call(this,program);
		program.addSequenceChangeListener(this);
		program.addAnnotation("Pfam");
		program.setAnnotationClass("Pfam",saturn.client.programs.sequenceeditor.CanvasAnnotationBlock);
	}
	,destroy: function() {
		var seqProg = this.theProgram;
		seqProg.removeSequenceChangeListener(this);
		saturn.client.BaseProgramPlugin.prototype.destroy.call(this);
	}
	,paintDomains: function(domains,sequence) {
		var program = this.getProgram();
		var orderedDomains = [];
		var domainToLevel = new haxe.ds.ObjectMap();
		var maxLevel = -1;
		var _g = 0;
		while(_g < domains.length) {
			var domain = domains[_g];
			++_g;
			var level = 1;
			var _g1 = 0;
			while(_g1 < orderedDomains.length) {
				var oDomain = orderedDomains[_g1];
				++_g1;
				if(domain.start >= oDomain.start && domain.start <= oDomain.stop) {
					level = domainToLevel.h[oDomain.__id__] + 1;
					break;
				}
			}
			if(level > maxLevel) maxLevel = level;
			domainToLevel.set(domain,level);
			orderedDomains.unshift(domain);
		}
		var blocks = program.getAnnotationBlocks("Pfam");
		var pos = 0;
		var yUnit = 17 / (maxLevel * 2);
		var _g2 = 0;
		while(_g2 < blocks.length) {
			var block = blocks[_g2];
			++_g2;
			var canvasBlock;
			canvasBlock = js.Boot.__cast(block , saturn.client.programs.sequenceeditor.CanvasAnnotationBlock);
			var canvas = canvasBlock.getCanvas();
			var ctx = canvas.getContext("2d");
			ctx.clearRect(0,0,canvas.width,canvas.height);
			var width = canvas.width;
			var charWidth = program.getDefaultCharWidth();
			var xPos = 0.;
			var charsDone = 0;
			while(charsDone < program.blockSize) {
				charsDone++;
				var cPos = ++pos;
				var _g11 = 0;
				while(_g11 < orderedDomains.length) {
					var domain1 = orderedDomains[_g11];
					++_g11;
					if(domain1.start != 1 && cPos >= domain1.start && cPos <= domain1.stop) {
						var l = domainToLevel.h[domain1.__id__] * yUnit;
						ctx.lineWidth = 1;
						ctx.save();
						ctx.beginPath();
						ctx.moveTo(xPos,l);
						ctx.lineTo(xPos + charWidth,l);
						ctx.strokeStyle = "#00ff00";
						ctx.closePath();
						ctx.stroke();
						ctx.restore();
						if(cPos == domain1.start) {
							ctx.save();
							ctx.beginPath();
							ctx.moveTo(xPos,l - 1);
							ctx.lineTo(xPos,l + 1);
							ctx.strokeStyle = "#0000ff";
							ctx.closePath();
							ctx.stroke();
							ctx.restore();
							var bb_w = width;
							var c_pos = xPos;
							var t_w = ctx.measureText(domain1.accession).width;
							var h_w = t_w / 2;
							var l_w = xPos;
							var r_w = bb_w - l_w;
							var t_pos = c_pos - h_w;
							if(t_w > bb_w) t_pos = 0.; else if(h_w > l_w) {
								var shift_w = h_w - l_w;
								t_pos = t_pos + shift_w;
							} else if(h_w > r_w) {
								var shift_w1 = h_w - r_w;
								t_pos = t_pos - shift_w1;
							}
							ctx.fillText(domain1.accession,t_pos | 0,l - 2);
						} else if(cPos == domain1.stop) {
							ctx.save();
							ctx.beginPath();
							ctx.moveTo(xPos + charWidth,l - 1);
							ctx.lineTo(xPos + charWidth,l + 1);
							ctx.strokeStyle = "#ff0000";
							ctx.closePath();
							ctx.stroke();
							ctx.restore();
						}
					}
				}
				xPos = xPos + charWidth;
			}
		}
	}
	,sequenceChanged: function(sequence) {
		var _g = this;
		var program = this.getProgram();
		var wo = program.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject);
		if(wo != null) {
			var domainObj = wo.getDomainObj();
			if(domainObj != null && js.Boot.__instanceof(domainObj,saturn.core.domain.SgcSeqData)) {
				var targetId = domainObj.targetId;
				if(targetId != null) {
					var crc = domainObj.crc;
					var cCrc = haxe.crypto.Md5.encode(sequence);
					if(crc == cCrc) {
						if(Object.prototype.hasOwnProperty.call(domainObj,"domains")) this.paintDomains(domainObj.domains,sequence); else program.getProvider().getByNamedQuery("TARGET_PKEY_TO_DOMAIN",[domainObj.targetId],saturn.core.domain.SgcDomain,false,function(domains,err) {
							if(err == null) {
								domainObj.domains = domains;
								_g.paintDomains(domains,sequence);
							}
						});
					} else domainObj.domains = null;
				}
			}
		}
	}
	,__class__: saturn.client.programs.plugins.DomainAnnotationPlugin
});
saturn.client.programs.plugins.FASTAGridVarPlugin = $hxClasses["saturn.client.programs.plugins.FASTAGridVarPlugin"] = function() {
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.FASTAGridVarPlugin.__name__ = ["saturn","client","programs","plugins","FASTAGridVarPlugin"];
saturn.client.programs.plugins.FASTAGridVarPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.FASTAGridVarPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	openFile: function(file,next) {
		var _g = this;
		var ext = saturn.client.core.CommonCore.getFileExtension(file.name);
		if(ext == "fasta") saturn.client.core.CommonCore.getFileAsText(file,function(content) {
			var entities = saturn.core.FastaEntity.parseFasta(content);
			if(entities.length > 0) {
				content = entities[0].getSequence().split("").join("\n");
				var prog = _g.getProgram();
				prog.getDataTable().performPaste(content,[0,0]);
			}
		}); else next();
	}
	,__class__: saturn.client.programs.plugins.FASTAGridVarPlugin
});
saturn.client.programs.plugins.GLmolViewerPlugin = $hxClasses["saturn.client.programs.plugins.GLmolViewerPlugin"] = function() {
	saturn.client.programs.plugins.AbstractPDBRendererPlugin.call(this);
};
saturn.client.programs.plugins.GLmolViewerPlugin.__name__ = ["saturn","client","programs","plugins","GLmolViewerPlugin"];
saturn.client.programs.plugins.GLmolViewerPlugin.__super__ = saturn.client.programs.plugins.AbstractPDBRendererPlugin;
saturn.client.programs.plugins.GLmolViewerPlugin.prototype = $extend(saturn.client.programs.plugins.AbstractPDBRendererPlugin.prototype,{
	glmol: null
	,loadPDB: function() {
		this.glmol.loadMoleculeStr(true,this.theProgram.getActiveObjectObject().contents);
	}
	,initialise: function() {
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		dom.width = "600px";
		dom.height = "600px";
		var id = dom.id;
		this.glmol = new GLmol(id, true);
	}
	,destroy: function() {
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		var children = dom.children;
		var _g = 0;
		while(_g < children.length) {
			var childNode = children[_g];
			++_g;
			dom.removeChild(childNode);
		}
	}
	,getName: function() {
		return "GLmol";
	}
	,__class__: saturn.client.programs.plugins.GLmolViewerPlugin
});
saturn.client.programs.plugins.IViewPlugin = $hxClasses["saturn.client.programs.plugins.IViewPlugin"] = function() {
	saturn.client.programs.plugins.AbstractPDBRendererPlugin.call(this);
};
saturn.client.programs.plugins.IViewPlugin.__name__ = ["saturn","client","programs","plugins","IViewPlugin"];
saturn.client.programs.plugins.IViewPlugin.loadResources = function() {
	var head = window.document.head;
	var scripts = ["js/iview/three.min.js","js/iview/AnaglyphEffect.js","js/iview/ParallaxBarrierEffect.js","js/iview/OculusRiftEffect.js","js/iview/StereoEffect.js","js/iview/iview.js","js/iview/surface.min.js"];
	var _g = 0;
	while(_g < scripts.length) {
		var script = scripts[_g];
		++_g;
		var scriptElem;
		var _this = window.document;
		scriptElem = _this.createElement("script");
		scriptElem.setAttribute("src",script);
		scriptElem.setAttribute("type","text/javascript");
		head.appendChild(scriptElem);
	}
};
saturn.client.programs.plugins.IViewPlugin.__super__ = saturn.client.programs.plugins.AbstractPDBRendererPlugin;
saturn.client.programs.plugins.IViewPlugin.prototype = $extend(saturn.client.programs.plugins.AbstractPDBRendererPlugin.prototype,{
	iview: null
	,loadPDB: function() {
		this.iview.loadPDB(this.theProgram.getActiveObjectObject().contents);
	}
	,initialise: function() {
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		window.console.log("w:" + dom.width);
		var canvas = window.document.createElement("canvas");
		canvas.width = 600;
		canvas.height = 600;
		canvas.id = Ext.id();
		dom.appendChild(canvas);
		var id = dom.id;
		this.iview = new iview(canvas.id);
		this.iview.options.secondaryStructure = "ribbon";
		this.iview.options.surface = "Van der Waals surface";
	}
	,destroy: function() {
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		var children = dom.children;
		var _g = 0;
		while(_g < children.length) {
			var childNode = children[_g];
			++_g;
			dom.removeChild(childNode);
		}
	}
	,getName: function() {
		return "IView";
	}
	,__class__: saturn.client.programs.plugins.IViewPlugin
});
saturn.client.programs.plugins.SSAnnotationPlugin = $hxClasses["saturn.client.programs.plugins.SSAnnotationPlugin"] = function() {
	this.firstChangeEvent = true;
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.SSAnnotationPlugin.__name__ = ["saturn","client","programs","plugins","SSAnnotationPlugin"];
saturn.client.programs.plugins.SSAnnotationPlugin.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.plugins.SSAnnotationPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.SSAnnotationPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	annotationPos: null
	,firstChangeEvent: null
	,lastCrc: null
	,lastSSStr: null
	,onFocus: function() {
		saturn.client.BaseProgramPlugin.prototype.onFocus.call(this);
	}
	,destroy: function() {
		var seqProg = this.theProgram;
		seqProg.removeSequenceChangeListener(this);
		saturn.client.BaseProgramPlugin.prototype.destroy.call(this);
	}
	,setProgram: function(program) {
		saturn.client.BaseProgramPlugin.prototype.setProgram.call(this,program);
		program.addSequenceChangeListener(this);
		this.annotationPos = program.addAnnotation("SS");
		program.setAnnotationClass("SS",saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv);
	}
	,paintFromString: function(ssStr) {
		this.lastSSStr = ssStr;
		var program = this.getProgram();
		var blocks = program.getAnnotationBlocks("SS");
		var pos = 0;
		var blockSize = program.blockSize;
		var _g = 0;
		while(_g < blocks.length) {
			var block = blocks[_g];
			++_g;
			var dBlock;
			dBlock = js.Boot.__cast(block , saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv);
			if(ssStr == null || ssStr == "") {
				dBlock.setHtml("");
				continue;
			}
			var ss = HxOverrides.substr(ssStr,pos,blockSize);
			pos += blockSize;
			var replacements_0 = { p1 : "E", p2 : "C", c : "red"};
			var replacements_1 = { p1 : "E", p2 : "H", c : "green"};
			var replacements_2 = { p1 : "H", p2 : "C", c : "red"};
			var replacements_3 = { p1 : "H", p2 : "E", c : "blue"};
			var replacements_4 = { p1 : "C", p2 : "E", c : "blue"};
			var replacements_5 = { p1 : "C", p2 : "H", c : "green"};
			var bNum = block.getBlockNumber();
			var strBuf_b = "";
			var lChar = "-";
			var bCount = 0;
			var _g2 = 0;
			var _g1 = ss.length;
			while(_g2 < _g1) {
				var i = _g2++;
				bCount++;
				var cChar = ss.charAt(i);
				if(cChar == lChar) if(cChar == null) strBuf_b += "null"; else strBuf_b += "" + cChar; else {
					var c = "red";
					if(cChar == "C") c = "red"; else if(cChar == "H") c = "green";
					if(cChar == "E") c = "blue";
					if(i != 0) strBuf_b += "</pre></font>";
					strBuf_b += Std.string("<font color=\"" + c + "\"\"><pre block_part_start =" + (bCount - 1) + " blockNumber =" + bNum + " style=\"display:inline-block\" class=\"molbio-sequenceeditor-block-part\">" + cChar);
				}
			}
			dBlock.setHtml(strBuf_b);
		}
		program.setAnnotationSequence(this.annotationPos,ssStr);
		program.getApplication().getMiddleSouthPanel().body.update("<b>Secondary structure prediction performed using PSIPred - <a target=\"_blank\" href=\"http://bioinfadmin.cs.ucl.ac.uk/downloads/psipred/LICENSE\">license</a></b>");
	}
	,sequenceChanged: function(sequence) {
		var _g = this;
		var program = this.getProgram();
		if(!program.isAnnotationOn(this.annotationPos)) return;
		if(!program.liveUpdateEnabled()) return;
		var crc = haxe.crypto.Md5.encode(sequence);
		if(crc == this.lastCrc && sequence != null && sequence != "") {
			this.paintFromString(this.lastSSStr);
			return;
		} else this.lastCrc = crc;
		var wo = program.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject);
		var name = wo.getName();
		saturn.client.BioinformaticsServicesClient.getClient().sendPsiPredReportRequest(sequence,name,function(response,error) {
			if(error == null) {
				var rawHoriReport = response.json.rawHoriReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + rawHoriReport;
				Ext.Ajax.request({ url : dstURL, success : function(response1,opts) {
					var obj = response1.responseText;
					_g.paintFromPsiPredString(obj);
				}, failure : function(response2,opts1) {
					program.getApplication().showMessage("PSIPred Error","PSIPred error");
				}});
			} else program.getApplication().showMessage("PSIPred Error",error);
		});
	}
	,paintFromPsiPredString: function(psiPredStr) {
		var ssStr_b = "";
		var lines = psiPredStr.split("\n");
		var _g = 0;
		while(_g < lines.length) {
			var line = lines[_g];
			++_g;
			if(saturn.client.programs.plugins.SSAnnotationPlugin.reg_predLines.match(line)) {
				var ss = saturn.client.programs.plugins.SSAnnotationPlugin.reg_predLines.matched(1);
				if(ss == null) ssStr_b += "null"; else ssStr_b += "" + ss;
			}
		}
		this.paintFromString(ssStr_b);
	}
	,__class__: saturn.client.programs.plugins.SSAnnotationPlugin
});
saturn.client.programs.plugins.SVGDomainAnnotationPlugin = $hxClasses["saturn.client.programs.plugins.SVGDomainAnnotationPlugin"] = function() {
	this.firstChangeEvent = true;
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.SVGDomainAnnotationPlugin.__name__ = ["saturn","client","programs","plugins","SVGDomainAnnotationPlugin"];
saturn.client.programs.plugins.SVGDomainAnnotationPlugin.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.plugins.SVGDomainAnnotationPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.SVGDomainAnnotationPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	firstChangeEvent: null
	,annotationId: null
	,bgStyle: null
	,onFocus: function() {
		var _g = this;
		saturn.client.BaseProgramPlugin.prototype.onFocus.call(this);
		this.getProgram().getApplication().getViewMenu().add({ text : "Domain report", handler : function() {
			_g.displayRawAnnotationData("PFAM");
		}});
	}
	,destroy: function() {
		var seqProg = this.theProgram;
		seqProg.removeSequenceChangeListener(this);
		saturn.client.BaseProgramPlugin.prototype.destroy.call(this);
	}
	,setProgram: function(program) {
		saturn.client.BaseProgramPlugin.prototype.setProgram.call(this,program);
		program.addSequenceChangeListener(this);
		this.annotationId = program.addAnnotation("Domains");
		program.setAnnotationClass("Domains",saturn.client.programs.sequenceeditor.SVGAnnotationBlock);
		program.setAnnotationPosition(this.annotationId,saturn.client.programs.sequenceeditor.AnnotationPosition.TOP);
	}
	,paintDomains: function(domains,sequence) {
		var _g2 = this;
		this.bgStyle = "rgb(255,255,255)";
		var program = this.getProgram();
		var blocks = program.getAnnotationBlocks("Domains");
		if(domains == null) {
			var _g = 0;
			while(_g < blocks.length) {
				var block = blocks[_g];
				++_g;
				var canvasBlock;
				canvasBlock = js.Boot.__cast(block , saturn.client.programs.sequenceeditor.SVGAnnotationBlock);
				var canvas = canvasBlock.getCanvas();
				canvasBlock.clear(this.bgStyle);
			}
			return;
		}
		var orderedDomains = [];
		var domainToLevel = new haxe.ds.ObjectMap();
		var maxLevel = -1;
		var _g1 = 0;
		while(_g1 < domains.length) {
			var domain = domains[_g1];
			++_g1;
			var level = 1;
			var _g11 = 0;
			while(_g11 < orderedDomains.length) {
				var oDomain = orderedDomains[_g11];
				++_g11;
				if(oDomain == domain) continue;
				if(Math.max(domain.start,oDomain.start) <= Math.min(domain.stop,oDomain.stop)) {
					level = domainToLevel.h[oDomain.__id__] + 1;
					saturn.core.Util.debug("Overlap " + domain.referent.entityId + " with " + oDomain.referent.entityId);
					break;
				}
			}
			if(level > maxLevel) maxLevel = level;
			domainToLevel.set(domain,level);
			orderedDomains.unshift(domain);
		}
		var pos = 0;
		saturn.core.Util.debug("Max level " + maxLevel);
		var height = maxLevel * 20 + 4;
		var color = "green";
		var levelToColor = new haxe.ds.IntMap();
		var _g12 = 1;
		var _g3 = maxLevel + 1;
		while(_g12 < _g3) {
			var i = _g12++;
			levelToColor.h[i] = "green";
		}
		var _g4 = 0;
		while(_g4 < blocks.length) {
			var block1 = blocks[_g4];
			++_g4;
			var canvasBlock1;
			canvasBlock1 = js.Boot.__cast(block1 , saturn.client.programs.sequenceeditor.SVGAnnotationBlock);
			var canvas1 = canvasBlock1.getCanvas();
			canvasBlock1.clear(this.bgStyle);
			canvasBlock1.setHeight(height + "px");
			var charWidth = program.getDefaultCharWidth();
			var xPos = 0.;
			var charsDone = 0;
			while(charsDone < program.blockSize) {
				charsDone++;
				var cPos = ++pos;
				var _g13 = 0;
				while(_g13 < orderedDomains.length) {
					var domain1 = [orderedDomains[_g13]];
					++_g13;
					if(domain1[0].start != 1 && cPos >= domain1[0].start && cPos <= domain1[0].stop) {
						var l = domainToLevel.h[domain1[0].__id__] * 20;
						var color1;
						var key = domainToLevel.h[domain1[0].__id__];
						color1 = levelToColor.h[key];
						if(cPos == domain1[0].start) {
							var text = window.document.createElementNS("http://www.w3.org/2000/svg","text");
							text.textContent = domain1[0].referent.entityId + ":" + domain1[0].referent.altName;
							if(color1 == "green") color1 = "orange"; else if(color1 == "orange") color1 = "green";
							var key1 = domainToLevel.h[domain1[0].__id__];
							levelToColor.h[key1] = color1;
							text.setAttribute("x",-1000);
							text.setAttribute("y",-1000);
							text.setAttribute("font-size","10");
							text.setAttribute("fill",color1);
							var protEditor;
							protEditor = js.Boot.__cast(this.getProgram() , saturn.client.programs.ProteinSequenceEditor);
							var addPlateMenu = protEditor.getAddToPlateContextMenu(null,domain1[0].start,domain1[0].stop);
							var items = [[]];
							items[0].push({ text : "New Protein", handler : (function(domain1) {
								return function() {
									var name = _g2.getProgram().getActiveObject(saturn.client.workspace.WorkspaceObject).getName();
									var seq = sequence.substring(domain1[0].start,domain1[0].stop);
									var protSeq = new saturn.core.Protein(seq);
									var wo = new saturn.client.workspace.ProteinWorkspaceObject(protSeq,name + "(" + domain1[0].referent.entityId + " " + domain1[0].start + "-" + domain1[0].stop + ")");
									_g2.getProgram().getWorkspace().addObject(wo,true);
								};
							})(domain1)});
							items[0].push({ text : "Goto Pfam", handler : (function(domain1) {
								return function() {
									var ac = domain1[0].referent.entityId;
									var id = "";
									if(saturn.client.programs.plugins.SVGDomainAnnotationPlugin.reg_pfam.match(ac)) id = "PF" + saturn.client.programs.plugins.SVGDomainAnnotationPlugin.reg_pfam.matched(1); else id = ac;
									_g2.getProgram().getApplication().openUrl("http://pfam.xfam.org/family/" + id);
								};
							})(domain1)});
							items[0].push({ text : "Add to plate", menu : addPlateMenu});
							var contextMenu1 = [(function(items) {
								return function(event) {
									var contextMenu = Ext.create("Ext.menu.Menu",{ focusOnToFront : false, items : items[0]});
									contextMenu.showAt(event.clientX,event.clientY);
									event.preventDefault();
									return true;
								};
							})(items)];
							text.onclick = (function(contextMenu1) {
								return function(event1) {
									contextMenu1[0](event1);
								};
							})(contextMenu1);
							canvas1.appendChild(text);
							var bb_w = Std.parseInt(canvas1.style.width);
							var c_pos = xPos;
							var t_w = text.getComputedTextLength();
							var h_w = t_w / 2;
							var l_w = xPos;
							var r_w = bb_w - l_w;
							var t_pos = c_pos - h_w;
							if(t_w > bb_w) t_pos = 0.; else if(h_w > l_w) {
								var shift_w = h_w - l_w;
								t_pos = t_pos + shift_w;
							} else if(h_w > r_w) {
								var shift_w1 = h_w - r_w;
								t_pos = t_pos - shift_w1;
							}
							text.setAttribute("x",t_pos == null?"null":"" + t_pos);
							text.setAttribute("y",Std.string(l - 4));
						}
						var path = window.document.createElementNS("http://www.w3.org/2000/svg","path");
						path.setAttribute("d","M " + (xPos + 1) + " " + l + " L " + (xPos + charWidth + 1) + " " + l + " ");
						path.setAttribute("charWidth",charWidth == null?"null":"" + charWidth);
						path.setAttribute("stroke",color1);
						canvas1.appendChild(path);
					}
				}
				xPos = xPos + charWidth;
			}
		}
	}
	,sequenceChanged: function(sequence) {
		var _g = this;
		var program = this.getProgram();
		if(!program.isAnnotationOn(this.annotationId)) return;
		if(!program.liveUpdateEnabled()) return;
		var wo = program.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject);
		if(wo != null) {
			if(Reflect.isFunction($bind(wo,wo.getDomainObj)) && wo.getDomainObj() != null && Std["is"](wo.getDomainObj(),saturn.core.domain.SgcSeqData)) {
				var domainObj = wo.getDomainObj();
				var targetId = domainObj.targetId;
				if(targetId != null) {
					var crc = domainObj.crc;
					var cCrc = haxe.crypto.Md5.encode(sequence);
					if(crc == cCrc) {
						if(Object.prototype.hasOwnProperty.call(domainObj,"domains")) this.paintDomains(this.getProgram().getEntity().getAnnotations("PFAM"),sequence); else program.getProvider().getByNamedQuery("TARGET_PKEY_TO_DOMAIN",[domainObj.targetId],saturn.core.domain.SgcDomain,false,function(domains,err) {
							if(err == null) {
								var objs = [];
								var _g1 = 0;
								while(_g1 < domains.length) {
									var domain = domains[_g1];
									++_g1;
									var obj = new saturn.core.domain.MoleculeAnnotation();
									obj.start = domain.start;
									obj.stop = domain.stop;
									obj.referent = new saturn.core.domain.Entity();
									obj.referent.entityId = domain.accession;
									if(domain.accession == "userdefined:Full_Length") continue;
									objs.push(obj);
								}
								_g.getProgram().getEntity().setAnnotations(objs,"PFAM");
								_g.paintDomains(objs,sequence);
							}
						});
					} else {
						this.getProgram().getEntity().setAnnotations(null,"PFAM");
						domainObj.domains = null;
					}
				}
			} else this.updateAnnotation("PFAM",function(err1,objs1) {
				if(err1 == null) {
					var editor = _g.getProgram();
					_g.paintDomains(objs1,editor.getSequence());
				}
			});
		}
	}
	,updateAnnotation: function(annotationName,cb) {
		var m;
		m = js.Boot.__cast(this.getProgram().getWorkspaceObject() , saturn.core.molecule.Molecule);
		var editor = this.getProgram();
		m.setSequence(editor.getSequence());
		m.updateAnnotations(annotationName,{ 'removeOverlaps' : true},saturn.client.core.CommonCore.getAnnotationManager(),cb);
	}
	,displayRawAnnotationData: function(annotationName) {
		var _g = this;
		var m;
		m = js.Boot.__cast(this.getProgram().getWorkspaceObject() , saturn.core.molecule.Molecule);
		this.updateAnnotation(annotationName,function(err,objs) {
			if(err == null) {
				var m1;
				m1 = js.Boot.__cast(_g.getProgram().getEntity() , saturn.core.molecule.Molecule);
				var dstURL = m1.getRawAnnotationData(annotationName);
				var webPage = new saturn.client.workspace.WebPage();
				webPage.setURL(dstURL);
				var w0 = new saturn.client.workspace.WebPageWorkspaceObject(webPage,m1.getMoleculeName() + "(" + annotationName + ")");
				_g.getProgram().getApplication().getWorkspace().addObject(w0,true);
			}
		});
	}
	,__class__: saturn.client.programs.plugins.SVGDomainAnnotationPlugin
});
saturn.client.programs.plugins.TMHMMAnnotationPlugin = $hxClasses["saturn.client.programs.plugins.TMHMMAnnotationPlugin"] = function() {
	this.seqObserved = false;
	saturn.client.BaseProgramPlugin.call(this);
};
saturn.client.programs.plugins.TMHMMAnnotationPlugin.__name__ = ["saturn","client","programs","plugins","TMHMMAnnotationPlugin"];
saturn.client.programs.plugins.TMHMMAnnotationPlugin.__interfaces__ = [saturn.client.programs.sequenceeditor.SequenceChangeListener];
saturn.client.programs.plugins.TMHMMAnnotationPlugin.__super__ = saturn.client.BaseProgramPlugin;
saturn.client.programs.plugins.TMHMMAnnotationPlugin.prototype = $extend(saturn.client.BaseProgramPlugin.prototype,{
	seqObserved: null
	,annotationId: null
	,domains: null
	,lastCrc: null
	,bgStyle: null
	,onFocus: function() {
		saturn.client.BaseProgramPlugin.prototype.onFocus.call(this);
	}
	,destroy: function() {
		var seqProg = this.theProgram;
		seqProg.removeSequenceChangeListener(this);
		saturn.client.BaseProgramPlugin.prototype.destroy.call(this);
	}
	,setProgram: function(program) {
		saturn.client.BaseProgramPlugin.prototype.setProgram.call(this,program);
		program.addSequenceChangeListener(this);
		this.annotationId = program.addAnnotation("TM");
		program.setAnnotationClass("TMHMM",saturn.client.programs.sequenceeditor.SVGAnnotationBlock);
		program.setAnnotationPosition(this.annotationId,saturn.client.programs.sequenceeditor.AnnotationPosition.TOP);
	}
	,paintDomains: function(domains,sequence) {
		var _g3 = this;
		this.bgStyle = "rgb(255,255,255)";
		var program = this.getProgram();
		var blocks = program.getAnnotationBlocks("TM");
		var pos = 0;
		var yUnit = 5;
		var _g = 0;
		while(_g < blocks.length) {
			var block = blocks[_g];
			++_g;
			var canvasBlock;
			canvasBlock = js.Boot.__cast(block , saturn.client.programs.sequenceeditor.SVGAnnotationBlock);
			var canvas = canvasBlock.getCanvas();
			canvasBlock.clear(this.bgStyle);
			if(domains == null || domains.length == 0) continue;
			var charWidth = program.getDefaultCharWidth();
			var xPos = 0.;
			var domainColours;
			var _g1 = new haxe.ds.StringMap();
			if(__map_reserved.inside != null) _g1.setReserved("inside","green"); else _g1.h["inside"] = "green";
			if(__map_reserved.outside != null) _g1.setReserved("outside","blue"); else _g1.h["outside"] = "blue";
			if(__map_reserved.TMhelix != null) _g1.setReserved("TMhelix","red"); else _g1.h["TMhelix"] = "red";
			domainColours = _g1;
			var charsDone = 0;
			while(charsDone < program.blockSize) {
				charsDone++;
				var cPos = ++pos;
				var _g2 = 0;
				while(_g2 < domains.length) {
					var domain = [domains[_g2]];
					++_g2;
					if(cPos >= domain[0].start && cPos <= domain[0].stop) {
						var l = 15;
						var c = domainColours.get(domain[0].accession);
						var path = window.document.createElementNS("http://www.w3.org/2000/svg","path");
						path.setAttribute("d","M " + (xPos + 1) + " " + l + " L " + (xPos + charWidth + 1) + " " + l + " ");
						path.setAttribute("charWidth",charWidth == null?"null":"" + charWidth);
						path.setAttribute("stroke",c);
						canvas.appendChild(path);
						if(cPos == domain[0].start) {
							var text = window.document.createElementNS("http://www.w3.org/2000/svg","text");
							text.textContent = domain[0].accession;
							text.setAttribute("x",-1000);
							text.setAttribute("y",-1000);
							text.setAttribute("font-size","10");
							text.setAttribute("fill",c);
							var contextMenu1 = [(function(domain) {
								return function(event) {
									var contextMenu = Ext.create("Ext.menu.Menu",{ focusOnToFront : false, items : [{ text : "New Protein", handler : (function(domain) {
										return function() {
											var name = _g3.getProgram().getActiveObject(saturn.client.workspace.WorkspaceObject).getName();
											var seq = sequence.substring(domain[0].start - 1,domain[0].stop);
											var protSeq = new saturn.core.Protein(seq);
											var wo = new saturn.client.workspace.ProteinWorkspaceObject(protSeq,name + "(" + domain[0].accession + " " + domain[0].start + "-" + domain[0].stop + ")");
											_g3.getProgram().getWorkspace().addObject(wo,true);
										};
									})(domain)}], listeners : { 'close' : (function() {
										return function() {
											program.redraw();
										};
									})()}});
									contextMenu.showAt(event.clientX,event.clientY);
									event.preventDefault();
									return true;
								};
							})(domain)];
							text.onclick = (function(contextMenu1) {
								return function(event1) {
									contextMenu1[0](event1);
								};
							})(contextMenu1);
							canvas.appendChild(text);
							var bb_w = Std.parseInt(canvas.style.width);
							var c_pos = xPos;
							var t_w = text.getComputedTextLength();
							var h_w = t_w / 2;
							var l_w = xPos;
							var r_w = bb_w - l_w;
							var t_pos = c_pos - h_w;
							if(t_w > bb_w) t_pos = 0.; else if(h_w > l_w) {
								var shift_w = h_w - l_w;
								t_pos = t_pos + shift_w;
							} else if(h_w > r_w) {
								var shift_w1 = h_w - r_w;
								t_pos = t_pos - shift_w1;
							}
							text.setAttribute("x",t_pos == null?"null":"" + t_pos);
							text.setAttribute("y",Std.string(l - 4));
						} else if(cPos == domain[0].stop) {
						}
					}
				}
				xPos = xPos + charWidth;
			}
		}
	}
	,sequenceChanged: function(sequence) {
		var _g = this;
		var program = this.getProgram();
		if(!program.isAnnotationOn(this.annotationId)) return;
		if(!program.liveUpdateEnabled()) return;
		var crc = haxe.crypto.Md5.encode(sequence);
		if(crc == this.lastCrc && this.domains != null) {
			this.paintDomains(this.domains,sequence);
			return;
		} else this.lastCrc = crc;
		var wo = program.getActiveObject(saturn.client.workspace.ProteinWorkspaceObject);
		var name = wo.getName();
		if(wo != null) saturn.client.BioinformaticsServicesClient.getClient().sendTMHMMReportRequest(sequence,name,function(response,error) {
			if(error == null) {
				var report = response.json.rawReport;
				var location = window.location;
				var dstURL = location.protocol + "//" + location.hostname + ":" + location.port + "/" + report;
				Ext.Ajax.request({ url : dstURL, success : function(response1,opts) {
					var content = response1.responseText;
					var lines = content.split("\n");
					_g.domains = [];
					var _g1 = 0;
					while(_g1 < lines.length) {
						var line = lines[_g1];
						++_g1;
						if(!StringTools.startsWith(line,"#")) {
							if(saturn.client.programs.plugins.TMHMMAnnotationPlugin.reg_tmhmm_domain.match(line)) {
								var domain = new saturn.core.domain.SgcDomain();
								domain.start = Std.parseInt(saturn.client.programs.plugins.TMHMMAnnotationPlugin.reg_tmhmm_domain.matched(2));
								domain.stop = Std.parseInt(saturn.client.programs.plugins.TMHMMAnnotationPlugin.reg_tmhmm_domain.matched(3));
								domain.accession = saturn.client.programs.plugins.TMHMMAnnotationPlugin.reg_tmhmm_domain.matched(1);
								_g.domains.push(domain);
							}
						}
					}
					_g.paintDomains(_g.domains,sequence);
				}, failure : function(response2,opts1) {
					program.getApplication().showMessage("TMHMM Error","TMHMM error");
				}});
			} else program.getApplication().showMessage("TMHMM Error",error);
		});
	}
	,__class__: saturn.client.programs.plugins.TMHMMAnnotationPlugin
});
saturn.client.programs.plugins.ThreeDMolViewer = $hxClasses["saturn.client.programs.plugins.ThreeDMolViewer"] = function() {
	this.waiting = false;
	this.delayedLoad = false;
	this.ready = false;
	saturn.client.programs.plugins.AbstractPDBRendererPlugin.call(this);
};
saturn.client.programs.plugins.ThreeDMolViewer.__name__ = ["saturn","client","programs","plugins","ThreeDMolViewer"];
saturn.client.programs.plugins.ThreeDMolViewer.__super__ = saturn.client.programs.plugins.AbstractPDBRendererPlugin;
saturn.client.programs.plugins.ThreeDMolViewer.prototype = $extend(saturn.client.programs.plugins.AbstractPDBRendererPlugin.prototype,{
	viewer: null
	,ready: null
	,delayedLoad: null
	,waiting: null
	,loadPDB: function() {
		if(this.ready) {
			this.viewer.clear();
			this.viewer.addModel(this.theProgram.getActiveObjectObject().contents,"pdb");
			this.viewer.zoomTo();
			this.viewer.render();
			this.viewer.addSurface($3Dmol.SurfaceType.VDW,{ opacity : 0.7, color : "white"},{ },{ });
			this.viewer.setStyle({ },{ cartoon : { color : "spectrum"}});
			this.viewer.setBackgroundColor("white");
			this.theProgram.getActiveObjectObject().surfaceOn = true;
			this.theProgram.getActiveObjectObject().ribbonOn = true;
		} else this.delayedLoad = true;
	}
	,labelsOn: function() {
		if(this.viewer != null) {
			this.viewer.addResLabels({ });
			this.viewer.render();
		}
	}
	,labelsOff: function() {
		if(this.viewer != null) {
			this.viewer.removeAllLabels({ });
			this.viewer.render();
		}
	}
	,surfaceOn: function() {
		if(this.viewer != null) this.viewer.addSurface($3Dmol.SurfaceType.VDW,{ opacity : 0.7, color : "white"},{ },{ });
	}
	,surfaceOff: function() {
		if(this.viewer != null) this.viewer.removeAllSurfaces();
	}
	,ribbonOn: function() {
		if(this.viewer != null) {
			this.viewer.setStyle({ },{ cartoon : { color : "spectrum"}});
			this.viewer.render();
		}
	}
	,ribbonOff: function() {
		if(this.viewer != null) {
			this.viewer.setStyle({ },{ line : { }});
			this.viewer.render();
		}
	}
	,initialise: function() {
		var _g = this;
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		dom.style.height = this.theProgram.getHeight();
		dom.style.width = this.theProgram.getWidth();
		var run = null;
		run = function() {
			var dom1 = _g.theProgram.getComponent().down("component").getEl().dom;
			var height = dom1.offsetHeight;
			if(height > 1) {
				var id = dom1.id;
				var config = {defaultcolors: $3Dmol.rasmolElementColors }
				_g.viewer = $3Dmol.createViewer(id, config);
				_g.ready = true;
				if(_g.delayedLoad) {
					_g.loadPDB();
					_g.delayedLoad = false;
				}
			} else haxe.Timer.delay(run,1000);
		};
		run();
	}
	,resize: function() {
		var _g = this;
		if(this.waiting) return; else {
			this.waiting = true;
			haxe.Timer.delay(function() {
				try {
					var dom = _g.theProgram.getComponent().down("component").getEl().dom;
					dom.style.height = _g.theProgram.getHeight();
					dom.style.width = _g.theProgram.getWidth();
					_g.viewer.resize();
				} catch( exception ) {
					if (exception instanceof js._Boot.HaxeError) exception = exception.val;
				}
				_g.waiting = false;
			},500);
		}
	}
	,destroy: function() {
		var dom = this.theProgram.getComponent().down("component").getEl().dom;
		var children = dom.children;
		var _g = 0;
		while(_g < children.length) {
			var childNode = children[_g];
			++_g;
			dom.removeChild(childNode);
		}
	}
	,getName: function() {
		return "3DMol";
	}
	,__class__: saturn.client.programs.plugins.ThreeDMolViewer
});
saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv = $hxClasses["saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv"] = function(blockNumber,sequenceEditor,annotationNumber) {
	saturn.client.programs.sequenceeditor.AnnotationEditorBlock.call(this,blockNumber,sequenceEditor,annotationNumber);
};
saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv.__name__ = ["saturn","client","programs","sequenceeditor","AnnotationEditorBlockDiv"];
saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv.__super__ = saturn.client.programs.sequenceeditor.AnnotationEditorBlock;
saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv.prototype = $extend(saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype,{
	createElement: function() {
		var _this = window.document;
		this.elem = _this.createElement("div");
	}
	,setHtml: function(str) {
		this.elem.innerHTML = str;
	}
	,__class__: saturn.client.programs.sequenceeditor.AnnotationEditorBlockDiv
});
saturn.client.programs.sequenceeditor.CanvasAnnotationBlock = $hxClasses["saturn.client.programs.sequenceeditor.CanvasAnnotationBlock"] = function(blockNumber,sequenceEditor,annotationNumber) {
	saturn.client.programs.sequenceeditor.AnnotationEditorBlock.call(this,blockNumber,sequenceEditor,annotationNumber);
};
saturn.client.programs.sequenceeditor.CanvasAnnotationBlock.__name__ = ["saturn","client","programs","sequenceeditor","CanvasAnnotationBlock"];
saturn.client.programs.sequenceeditor.CanvasAnnotationBlock.__super__ = saturn.client.programs.sequenceeditor.AnnotationEditorBlock;
saturn.client.programs.sequenceeditor.CanvasAnnotationBlock.prototype = $extend(saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype,{
	theCanvas: null
	,createElement: function() {
		var _this = window.document;
		this.theCanvas = _this.createElement("canvas");
		this.theCanvas.height = 17;
		this.elem = this.theCanvas;
	}
	,initialise: function(blockNumber) {
		saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype.initialise.call(this,blockNumber);
		this.theCanvas.setAttribute("width",this.theCanvas.style.width);
		this.theCanvas.setAttribute("height","17px");
		var ctx = this.theCanvas.getContext("2d");
		var width = this.theCanvas.width;
		var charWidth = width / this.getSequenceEditor().blockSize;
		var xPos = 0.;
		var yPos = Math.round(this.theCanvas.height) + 0.5;
		while(xPos < width) {
			ctx.beginPath();
			xPos = Math.round(xPos + charWidth) + 0.5;
			ctx.lineWidth = 1;
			ctx.moveTo(xPos,0);
			ctx.lineTo(xPos,yPos);
			ctx.stroke();
			ctx.closePath();
		}
		ctx.beginPath();
		var yCenterPos = yPos / 2;
		ctx.moveTo(0,yCenterPos);
		ctx.lineTo(width,yCenterPos);
		ctx.stroke();
		ctx.closePath();
	}
	,getCanvas: function() {
		return this.theCanvas;
	}
	,__class__: saturn.client.programs.sequenceeditor.CanvasAnnotationBlock
});
saturn.client.programs.sequenceeditor.SVGAnnotationBlock = $hxClasses["saturn.client.programs.sequenceeditor.SVGAnnotationBlock"] = function(blockNumber,sequenceEditor,annotationNumber) {
	saturn.client.programs.sequenceeditor.AnnotationEditorBlock.call(this,blockNumber,sequenceEditor,annotationNumber);
};
saturn.client.programs.sequenceeditor.SVGAnnotationBlock.__name__ = ["saturn","client","programs","sequenceeditor","SVGAnnotationBlock"];
saturn.client.programs.sequenceeditor.SVGAnnotationBlock.__super__ = saturn.client.programs.sequenceeditor.AnnotationEditorBlock;
saturn.client.programs.sequenceeditor.SVGAnnotationBlock.prototype = $extend(saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype,{
	theCanvas: null
	,createElement: function() {
		this.theCanvas = window.document.createElementNS("http://www.w3.org/2000/svg","svg");
		this.theCanvas.classList.add("molbio-sequenceeditor-block");
		this.theCanvas.setAttribute("style",Std.string(this.theCanvas.style) + ";margin-top:2px;margin-left:2px;margin-right:2px");
		this.elem = this.theCanvas;
	}
	,initialise: function(blockNumber) {
		saturn.client.programs.sequenceeditor.AnnotationEditorBlock.prototype.initialise.call(this,blockNumber);
		this.theCanvas.setAttribute("width",this.theCanvas.style.width);
		this.theCanvas.setAttribute("height","30");
	}
	,getCanvas: function() {
		return this.theCanvas;
	}
	,clear: function(fillStyle) {
		var canvas = this.getCanvas();
		if(canvas.children != null) {
			var foo = canvas;
			while(foo.firstChild != null) foo.removeChild(foo.firstChild);
		}
		var rect = window.document.createElementNS("http://www.w3.org/2000/svg","rect");
		rect.setAttribute("width",canvas.getAttribute("width"));
		rect.setAttribute("height",canvas.getAttribute("height"));
		rect.setAttribute("style","fill:" + fillStyle);
		canvas.appendChild(rect);
	}
	,setHeight: function(height) {
		this.theCanvas.style.height = height;
		this.theCanvas.parentElement.style.height = height;
	}
	,__class__: saturn.client.programs.sequenceeditor.SVGAnnotationBlock
});
saturn.client.programs.sequenceeditor.AnnotationPosition = $hxClasses["saturn.client.programs.sequenceeditor.AnnotationPosition"] = { __ename__ : ["saturn","client","programs","sequenceeditor","AnnotationPosition"], __constructs__ : ["TOP","BOTTOM"] };
saturn.client.programs.sequenceeditor.AnnotationPosition.TOP = ["TOP",0];
saturn.client.programs.sequenceeditor.AnnotationPosition.TOP.toString = $estr;
saturn.client.programs.sequenceeditor.AnnotationPosition.TOP.__enum__ = saturn.client.programs.sequenceeditor.AnnotationPosition;
saturn.client.programs.sequenceeditor.AnnotationPosition.BOTTOM = ["BOTTOM",1];
saturn.client.programs.sequenceeditor.AnnotationPosition.BOTTOM.toString = $estr;
saturn.client.programs.sequenceeditor.AnnotationPosition.BOTTOM.__enum__ = saturn.client.programs.sequenceeditor.AnnotationPosition;
saturn.client.programs.sequenceeditor.SequenceRegion = $hxClasses["saturn.client.programs.sequenceeditor.SequenceRegion"] = function(startPosition,stopPosition,selectedRow) {
	this.startPosition = startPosition;
	this.stopPosition = stopPosition;
	this.selectedRow = selectedRow;
};
saturn.client.programs.sequenceeditor.SequenceRegion.__name__ = ["saturn","client","programs","sequenceeditor","SequenceRegion"];
saturn.client.programs.sequenceeditor.SequenceRegion.prototype = {
	startPosition: null
	,stopPosition: null
	,selectedRow: null
	,sequence: null
	,annotationStartPosition: null
	,annotationStopPosition: null
	,annotationSequence: null
	,forwardSelection: null
	,setStartPosition: function(startPosition) {
		this.startPosition = startPosition;
	}
	,setStopPosition: function(stopPosition) {
		this.stopPosition = stopPosition;
	}
	,setIsForward: function(isForwardSelection) {
		this.forwardSelection = isForwardSelection;
	}
	,isForwardSelection: function() {
		return this.forwardSelection;
	}
	,setAnnotationSequence: function(annotationSequence) {
		this.annotationSequence = annotationSequence;
	}
	,getAnnotationSequence: function() {
		return this.annotationSequence;
	}
	,setAnnotationStartPosition: function(startPosition) {
		this.annotationStartPosition = startPosition;
	}
	,getAnnotationStartPosition: function() {
		return this.annotationStartPosition;
	}
	,setAnnotationStopPosition: function(stopPosition) {
		this.annotationStopPosition = stopPosition;
	}
	,getAnnotationStopPosition: function() {
		return this.annotationStopPosition;
	}
	,getSelectedRow: function() {
		return this.selectedRow;
	}
	,setSequence: function(sequence) {
		this.sequence = sequence;
	}
	,getSequence: function() {
		return this.sequence;
	}
	,getStartPosition: function() {
		return this.startPosition;
	}
	,getStopPosition: function() {
		return this.stopPosition;
	}
	,__class__: saturn.client.programs.sequenceeditor.SequenceRegion
};
saturn.client.workspace.TextFileWO = $hxClasses["saturn.client.workspace.TextFileWO"] = function(object,name) {
	if(object == null) object = new saturn.core.domain.TextFile();
	if(name == null) name = "TextFile";
	saturn.client.workspace.WorkspaceObjectBase.call(this,object,name);
};
saturn.client.workspace.TextFileWO.__name__ = ["saturn","client","workspace","TextFileWO"];
saturn.client.workspace.TextFileWO.getNewMenuText = function() {
	return "TextFile";
};
saturn.client.workspace.TextFileWO.getDefaultFolderName = function() {
	return "TextFiles";
};
saturn.client.workspace.TextFileWO.__super__ = saturn.client.workspace.WorkspaceObjectBase;
saturn.client.workspace.TextFileWO.prototype = $extend(saturn.client.workspace.WorkspaceObjectBase.prototype,{
	__class__: saturn.client.workspace.TextFileWO
});
saturn.client.workspace.WebPage = $hxClasses["saturn.client.workspace.WebPage"] = function() {
};
saturn.client.workspace.WebPage.__name__ = ["saturn","client","workspace","WebPage"];
saturn.client.workspace.WebPage.prototype = {
	url: null
	,setURL: function(url) {
		this.url = url;
	}
	,getURL: function() {
		return this.url;
	}
	,__class__: saturn.client.workspace.WebPage
};
saturn.client.workspace.Workspace = $hxClasses["saturn.client.workspace.Workspace"] = function() {
	this.reg_linked = new EReg("__LINKED_(\\d+)","");
	this.reloading = false;
	this.theListeners = new List();
	this.theObjects = new haxe.ds.StringMap();
	this.nameToObjectUUID = new haxe.ds.StringMap();
	this.objectIdToOpenProgramId = new haxe.ds.StringMap();
	this.programIdToObjectIds = new haxe.ds.StringMap();
	this.programIdToProgram = new haxe.ds.StringMap();
	this.nextObjectId = 0;
	this.nextProgramId = 0;
	this.treeUpdatesSuspended = false;
	this.wkModel = Ext.define("WorkspaceObject",{ extend : "Ext.data.TreeModel", fields : [{ name : "objectId", type : "string"},{ name : "text", type : "string"},{ name : "type", type : "string"}], idProperty : "objectId"});
	this.initialiseComponent();
	this.initialiseWorkspaceStore();
	this.theWorkspaceName = "DEFAULT";
};
saturn.client.workspace.Workspace.__name__ = ["saturn","client","workspace","Workspace"];
saturn.client.workspace.Workspace.__interfaces__ = [saturn.client.BuildingBlock];
saturn.client.workspace.Workspace.convertId = function(id) {
	var underScorePos = id.indexOf("_");
	if(underScorePos > -1) id = id.substring(0,underScorePos);
	return id;
};
saturn.client.workspace.Workspace.generateClass = function(name) {
	__js__("" + hxClasses + "[name] = function(){};");
	__js__("" + hxClasses + "[name].__name__ = name.split('.')");
};
saturn.client.workspace.Workspace.installWorkspaceExtensions = function(obj) {
	obj.uuid = null;
	obj.iconPath = null;
	if(!Object.prototype.hasOwnProperty.call(obj,"name") || Reflect.field(obj,"name") == null || Reflect.field(obj,"name") == "") {
		var name = "Object";
		var clazz1 = Type.getClass(obj);
		if(clazz1 != null) {
			var model = saturn.client.WorkspaceApplication.getApplication().getProvider().getModel(clazz1);
			if(model != null) {
				var nameField = model.getFirstKey();
				if(Object.prototype.hasOwnProperty.call(obj,nameField)) name = Reflect.field(obj,nameField);
			}
		}
		obj.name = name;
	}
	var clazz = Type.getClass(obj);
	if(clazz != null) {
		var model1 = saturn.client.WorkspaceApplication.getApplication().getProvider().getModel(clazz);
		if(model1 != null) {
			var icon = model1.getIcon();
			if(icon != null) obj.iconPath = "/static/js/images/" + icon;
		}
	}
	obj.object = null;
	obj.hidden = null;
	var type_str = typeof(obj.__class__);
	if(type_str != "function" || Reflect.field(obj,"__class__") == null || Reflect.field(obj,"__class__") == "") obj.__class__ = "GENERIC";
	obj.objectMap = new haxe.ds.StringMap();
	saturn.client.workspace.Workspace.installWOExtensionFunctions(obj);
	obj.__WOEXTENSIONS = true;
};
saturn.client.workspace.Workspace.removeWOExtensionFunctions = function(obj) {
	obj.clone = null;
	obj.getIconPath = null;
	obj.serialise = null;
	obj.deserialise = null;
	obj.setName = null;
	obj.getName = null;
	obj.getUUID = null;
	obj.setUUID = null;
	obj.getObject = null;
	obj.setObject = null;
	obj.toJSON = null;
	obj.isHidden = null;
	obj.hide = null;
	obj.addReference = null;
	obj.getReferences = null;
	obj.hasReference = null;
	obj.removeReferences = null;
	obj.getMatchingReferences = null;
};
saturn.client.workspace.Workspace.installWOExtensionFunctions = function(obj) {
	obj.clone = function() {
		var cloneData = obj.serialise();
		var unserObj = haxe.Unserializer.run(cloneData);
		saturn.client.workspace.Workspace.installWorkspaceExtensions(unserObj);
		unserObj.setUUID(null);
		return unserObj;
	};
	obj.getIconPath = function() {
		return obj.iconPath;
	};
	var serFunc = function(obj1) {
		return haxe.Serializer.run(obj1);
	};
	obj.serialise = function() {
		saturn.client.workspace.Workspace.removeWOExtensionFunctions(obj);
		var serial = serFunc(obj);
		saturn.client.workspace.Workspace.installWorkspaceExtensions(obj);
		return serial;
	};
	obj.deserialise = function(object) {
		obj.setName(object.NAME);
		obj.setUUID(object.UUID);
		obj.hide(object.HIDDEN);
		obj.setIconPath(object.iconPath);
	};
	obj.setName = function(name) {
		obj.name = name;
		var model = saturn.client.WorkspaceApplication.getApplication().getProvider().getModel(Type.getClass(obj));
		var field = model.getFirstKey();
		if(field != null) obj[field] = name;
	};
	obj.getName = function() {
		return obj.name;
	};
	obj.getUUID = function() {
		return obj.uuid;
	};
	obj.setUUID = function(uuid) {
		obj.uuid = uuid;
	};
	obj.getObject = function() {
		return obj;
	};
	obj.setObject = function(object1) {
		obj.object = object1;
	};
	obj.toJSON = function() {
		return "";
	};
	obj.isHidden = function() {
		return obj.hidden;
	};
	obj.hide = function(hide) {
		obj.hidden = hide;
	};
	obj.addReference = function(group,objectId) {
		if(!obj.objectMap.exists(group)) obj.objectMap.set(group,[]);
		obj.objectMap.get(group).push(objectId);
	};
	obj.getReferences = function(group1) {
		var refs = [];
		if(obj.objectMap.exists(group1)) {
			var ids = obj.objectMap.get(group1);
			var _g = 0;
			while(_g < ids.length) {
				var objectId1 = ids[_g];
				++_g;
				refs.push(objectId1);
			}
		}
		return refs;
	};
	obj.hasReference = function(group2,objectId2) {
		var match = false;
		if(obj.objectMap.exists(group2)) {
			var ids1 = obj.objectMap.get(group2);
			var _g1 = 0;
			while(_g1 < ids1.length) {
				var id = ids1[_g1];
				++_g1;
				var cId = saturn.client.workspace.Workspace.convertId(id);
				if(cId == objectId2) {
					match = true;
					break;
				}
			}
		}
		return match;
	};
	obj.removeReferences = function(referenceId) {
		var removed = [];
		var map = obj.objectMap;
		var $it0 = map.keys();
		while( $it0.hasNext() ) {
			var group3 = $it0.next();
			var ids2 = obj.objectMap.get(group3);
			var _g2 = 0;
			while(_g2 < ids2.length) {
				var objectId3 = ids2[_g2];
				++_g2;
				if(referenceId == objectId3 || saturn.client.workspace.Workspace.convertId(objectId3) == referenceId) {
					obj.objectMap.get(group3).remove(objectId3);
					removed.push(objectId3);
				}
			}
		}
		return removed;
	};
	obj.getMatchingReferences = function(referenceId1) {
		var refs1 = [];
		var map1 = obj.objectMap;
		var $it1 = map1.keys();
		while( $it1.hasNext() ) {
			var group4 = $it1.next();
			var ids3 = obj.objectMap.get(group4);
			var _g3 = 0;
			while(_g3 < ids3.length) {
				var objectId4 = ids3[_g3];
				++_g3;
				if(referenceId1 == objectId4 || saturn.client.workspace.Workspace.convertId(objectId4) == referenceId1) refs1.push(objectId4);
			}
		}
		return refs1;
	};
};
saturn.client.workspace.Workspace.prototype = {
	theComponent: null
	,theListeners: null
	,theObjects: null
	,nameToObjectUUID: null
	,objectIdToOpenProgramId: null
	,programIdToObjectIds: null
	,programIdToProgram: null
	,nextObjectId: null
	,nextProgramId: null
	,theWorkspaceDatabase: null
	,theWorkspaceName: null
	,theWorkspaceDataStore: null
	,treeUpdatesSuspended: null
	,wkModel: null
	,reloading: null
	,getProgramForObject: function(objectId) {
		if(this.objectIdToOpenProgramId.exists(objectId)) {
			var programId = this.objectIdToOpenProgramId.get(objectId);
			if(this.programIdToProgram.exists(programId)) return this.programIdToProgram.get(programId);
		}
		return null;
	}
	,getProgram: function(programId) {
		return this.programIdToProgram.get(programId);
	}
	,getTreeStore: function() {
		return this.theWorkspaceDataStore;
	}
	,closeWorkspace: function() {
		this.beginUpdate();
		this.setReloading(true);
		var $it0 = this.programIdToProgram.iterator();
		while( $it0.hasNext() ) {
			var program = $it0.next();
			saturn.client.WorkspaceApplication.getApplication().closeProgram(program);
		}
		var $it1 = this.theObjects.keys();
		while( $it1.hasNext() ) {
			var key = $it1.next();
			this.theObjects.remove(key);
		}
		var $it2 = this.objectIdToOpenProgramId.keys();
		while( $it2.hasNext() ) {
			var key1 = $it2.next();
			this.objectIdToOpenProgramId.remove(key1);
		}
		var $it3 = this.programIdToProgram.keys();
		while( $it3.hasNext() ) {
			var key2 = $it3.next();
			this.programIdToProgram.remove(key2);
		}
		var $it4 = this.programIdToObjectIds.keys();
		while( $it4.hasNext() ) {
			var key3 = $it4.next();
			this.programIdToObjectIds.remove(key3);
		}
		var $it5 = this.nameToObjectUUID.keys();
		while( $it5.hasNext() ) {
			var name = $it5.next();
			this.nameToObjectUUID.remove(name);
		}
		this.nextObjectId = 0;
		this.nextProgramId = 0;
		this.setReloading(false);
		saturn.client.WorkspaceApplication.getApplication().cleanEnvironment();
		this.reloadWorkspace();
		this.theWorkspaceName = "DEFAULT";
		saturn.client.WorkspaceApplication.getApplication().setActiveProgram(null);
		this.createTreeStore();
		this.theComponent.reconfigure(this.theWorkspaceDataStore);
	}
	,registerProgram: function(program) {
		if(program.getId() == null) {
			program.setId(Std.string(this.nextProgramId));
			this.nextProgramId++;
		}
		if(!(function($this) {
			var $r;
			var key = program.getId();
			$r = $this.programIdToProgram.exists(key);
			return $r;
		}(this))) {
			var haxeApp = saturn.client.WorkspaceApplication.getApplication();
			haxeApp.addProgram(program,true);
			if(!this.isReloading()) haxeApp.setActiveProgram(program);
			var programId = Std.string(program.getId());
			this.programIdToProgram.set(programId,program);
		}
	}
	,isReloading: function() {
		return this.reloading;
	}
	,setReloading: function(reloading) {
		this.reloading = reloading;
	}
	,registerObjectWith: function(object,program) {
		if(object == null) return;
		this.registerProgram(program);
		var objectId = object.getUUID();
		if(objectId == null) {
			this.addObject(object,false);
			objectId = object.getUUID();
		}
		var programId = Std.string(program.getId());
		this.objectIdToOpenProgramId.set(objectId,programId);
		if(this.programIdToObjectIds.exists(programId) == false) {
			var value = [];
			this.programIdToObjectIds.set(programId,value);
		}
		this.programIdToObjectIds.get(programId).push(objectId);
		program.addWorkspaceObject(objectId);
	}
	,removeObject: function(objectId,reload) {
		if(reload == null) reload = true;
		if(!this.theObjects.exists(objectId)) throw new js._Boot.HaxeError(new saturn.client.workspace.WorkspaceObjectNotFoundException("Object " + objectId + " not found in object tree")); else {
			var object = this.theObjects.get(objectId);
			var _g_head = this.theListeners.h;
			var _g_val = null;
			while(_g_head != null) {
				var listener;
				listener = (function($this) {
					var $r;
					_g_val = _g_head[0];
					_g_head = _g_head[1];
					$r = _g_val;
					return $r;
				}(this));
				listener.objectRemoved(object);
			}
			this.theObjects.remove(objectId);
			var key = object.getName();
			this.nameToObjectUUID.remove(key);
		}
		if(this.objectIdToOpenProgramId.exists(objectId)) {
			var programId = this.objectIdToOpenProgramId.get(objectId);
			this.objectIdToOpenProgramId.remove(objectId);
			var program = this.programIdToProgram.get(programId);
			program.closeWorkspaceObject(objectId);
			var _this = this.programIdToObjectIds.get(programId);
			HxOverrides.remove(_this,objectId);
			if(this.programIdToObjectIds.get(programId).length == 0) {
				saturn.client.WorkspaceApplication.getApplication().closeProgram(program);
				this.programIdToObjectIds.remove(programId);
				this.programIdToProgram.remove(programId);
			}
			if(!this.programIdToObjectIds.keys().hasNext()) saturn.client.WorkspaceApplication.getApplication().setActiveProgram(null);
		}
		if(!reload) this.theWorkspaceDataStore.suspendEvents();
		var node = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId,true);
		if(node != null) {
			node.remove(true);
			this.theWorkspaceDataStore.remove(node,true);
		}
		if(reload) this.reloadWorkspace();
	}
	,getOpenProgram: function(objectId) {
		if(this.objectIdToOpenProgramId.exists(objectId)) {
			var key = this.objectIdToOpenProgramId.get(objectId);
			return this.programIdToProgram.get(key);
		} else return null;
	}
	,closeOtherObjects: function(keepId) {
		this.setReloading(true);
		var $it0 = this.objectIdToOpenProgramId.keys();
		while( $it0.hasNext() ) {
			var objectId = $it0.next();
			if(objectId != keepId) this._closeObject(objectId,false);
		}
		this.setReloading(false);
		saturn.client.WorkspaceApplication.getApplication().cleanEnvironment();
		this.setActiveObject(keepId);
		this.reloadWorkspace();
	}
	,closeAllObjects: function() {
		this.setReloading(true);
		var $it0 = this.objectIdToOpenProgramId.keys();
		while( $it0.hasNext() ) {
			var objectId = $it0.next();
			this._closeObject(objectId,false);
		}
		this.setReloading(false);
		saturn.client.WorkspaceApplication.getApplication().cleanEnvironment();
		this.reloadWorkspace();
	}
	,closeObjectAndDelete: function(objectId) {
		this.closeObject(objectId);
		this.removeObject(objectId);
	}
	,closeObject: function(objectId) {
		this._closeObject(objectId,true);
	}
	,_closeObject: function(objectId,refresh) {
		if(this.objectIdToOpenProgramId.exists(objectId)) {
			var programId = this.objectIdToOpenProgramId.get(objectId);
			var program = this.programIdToProgram.get(programId);
			program.closeWorkspaceObject(objectId);
			var _this = this.programIdToObjectIds.get(programId);
			HxOverrides.remove(_this,objectId);
			this.objectIdToOpenProgramId.remove(objectId);
			if(this.programIdToObjectIds.get(programId).length == 0) {
				saturn.client.WorkspaceApplication.getApplication().closeProgram(program);
				this.programIdToObjectIds.remove(programId);
				this.programIdToProgram.remove(programId);
			}
		}
		if(refresh) this.reloadWorkspace();
	}
	,setActiveObject: function(objectId) {
		var programId = this.objectIdToOpenProgramId.get(objectId);
		var program = this.programIdToProgram.get(programId);
		var haxeApp = saturn.client.WorkspaceApplication.getApplication();
		if(program == null) {
			var object = this.getObject(objectId);
			var objectId1 = object.getUUID();
			var progReg = haxeApp.getProgramRegistry();
			var programType = progReg.getDefaultProgram(object == null?null:js.Boot.getClass(object));
			if(programType != null) {
				var program1 = Type.createInstance(programType,[]);
				progReg.installPlugins(program1);
				this.registerObjectWith(object,program1);
			}
		} else {
			haxeApp.setActiveProgram(program);
			Ext.resumeLayouts(false);
		}
	}
	,getActiveObject: function() {
		return this.getObject(saturn.client.WorkspaceApplication.getApplication().getActiveProgram().getActiveObjectId());
	}
	,initialiseWorkspaceStore: function() {
		if(saturn.client.WorkspaceApplication.getApplication().isNaked() == false) this.theWorkspaceDatabase = new saturn.client.workspace.WorkspaceStore("WORKSPACE_SESSIONS",1,function(e) {
			saturn.client.WorkspaceApplication.getApplication().showMessage("",e);
		});
	}
	,installRemoteWorkspaceStore: function() {
		if(saturn.client.WorkspaceApplication.getApplication().isNaked() == false) this.theWorkspaceDatabase = new saturn.client.workspace.WorkspaceStoreProvider("WORKSPACE_SESSIONS",1,function(e) {
			saturn.client.WorkspaceApplication.getApplication().showMessage("",e);
		});
	}
	,saveWorkspace: function() {
		var _g = this;
		var cb = function(res) {
			_g.theWorkspaceDatabase.store(res,function(e) {
				saturn.client.WorkspaceApplication.getApplication().showMessage("",e);
			},function(e1) {
			});
		};
		this.serialise(cb);
	}
	,saveWorkspaceToFile: function(fileName) {
		var cb = function(res) {
			saturn.client.WorkspaceApplication.getApplication().saveTextFile(haxe.Serializer.run(res),fileName);
		};
		this.serialise(cb);
	}
	,getDOMComponent: function() {
		return this.getComponent().el.dom;
	}
	,createTreeStore: function() {
		this.theWorkspaceDataStore = Ext.create("Ext.data.TreeStore",{ model : "WorkspaceObject", root : { expanded : true, autoSync : false}, proxy : { type : "memory", reader : { type : "json"}}});
	}
	,initialiseComponent: function() {
		var _g = this;
		this.createTreeStore();
		var menu = function(view,record,item,index,event) {
			var self = _g;
			var objectId = record.get("objectId");
			var object = self.getObject(objectId);
			var menuArray = [{ text : "Rename " + Std.string(record.get("text")), handler : function() {
				_g.renameItem(objectId);
			}},{ text : "Remove " + Std.string(record.get("text")), handler : function() {
				_g.removeItem(objectId);
			}},{ text : "Duplicate " + Std.string(record.get("text")), handler : function() {
				_g.duplicateItem(objectId);
			}},{ text : "Close Programs", handler : function() {
				_g.closeItem(objectId);
			}}];
			var prog = _g.getProgramForObject(objectId);
			if(prog != null) {
				var items = prog.getWorkspaceContextMenuItems();
				if(items != null) {
					var _g1 = 0;
					while(_g1 < items.length) {
						var item1 = items[_g1];
						++_g1;
						menuArray.push(item1);
					}
				}
			}
			if(record.get("type") == "folder") menuArray.push({ text : "Add folder", handler : function() {
				_g.addFolderPrompt(objectId);
			}});
			var contextMenu = Ext.create("Ext.menu.Menu",{ items : menuArray});
			contextMenu.showAt(event.getXY());
			event.stopEvent();
		};
		var me = this;
		this.theComponent = Ext.create("Ext.tree.Panel",{ store : this.theWorkspaceDataStore, rootVisible : false, enableDrag : true, border : false, autoScroll : true, viewConfig : { plugins : { ptype : "treeviewdragdrop", enableDrop : true, pluginId : "treedd", allowContainerDrops : true, appendOnly : true, containerScroll : true}, listeners : { }}, listeners : { itemclick : function(view1,rec,item2,index1,event1) {
			if(event1.ctrlKey) menu(view1,rec,item2,index1,event1); else {
				var id = rec.get("objectId");
				if(rec.get("type") != "folder") _g.setActiveObject(id);
			}
		}, render : Ext.bind(function(self1) {
			_g.initialiseDOMComponent();
		},this), containercontextmenu : function(node,event2) {
			var menuItems = [];
			menuItems.push({ text : "Add folder", handler : function() {
				_g.addFolderPrompt(null);
			}});
			var contextMenu1 = Ext.create("Ext.menu.Menu",{ items : menuItems});
			contextMenu1.showAt(event2.getXY());
			event2.stopEvent();
		}}, cls : "x-drag-drop-background"});
		this.theComponent.on("itemcontextmenu",menu,this);
	}
	,renameWorkspaceObjectPrompt: function(objectId) {
		var self = this;
		var dialog = Ext.Msg.prompt("Rename object","Type new name",function(btn,text) {
			if(btn == "ok") self.renameWorkspaceObject(objectId,text);
		},this,false,this.theObjects.get(objectId).getName());
	}
	,removeItem: function(objectId) {
		this.theWorkspaceDataStore.suspendEvents();
		var firstNode = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId,true);
		if(firstNode.get("type") != "folder") this.removeObject(objectId,true); else {
			Ext.suspendLayouts();
			saturn.client.WorkspaceApplication.suspendUpdates();
			var objectIdsToRemove = this.getObjectIdsBelow(firstNode);
			var _g = 0;
			while(_g < objectIdsToRemove.length) {
				var woId = objectIdsToRemove[_g];
				++_g;
				this.removeObject(woId,false);
			}
			firstNode.parentNode.removeChild(firstNode,false,false,true);
			Ext.resumeLayouts(true);
			this.reloadWorkspace();
		}
	}
	,duplicateItem: function(objectId) {
		this.theWorkspaceDataStore.suspendEvents();
		var firstNode = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId,true);
		if(firstNode.get("type") != "folder") this.duplicateObject(objectId,true); else {
			Ext.suspendLayouts();
			var objectIdsToDuplicate = this.getObjectIdsBelow(firstNode);
			var folder = this._addFolder(firstNode.get("text"),firstNode.parentNode);
			var _g = 0;
			while(_g < objectIdsToDuplicate.length) {
				var woId = objectIdsToDuplicate[_g];
				++_g;
				this.duplicateObject(woId,false,folder);
			}
			this.reloadWorkspace();
		}
	}
	,duplicateObject: function(objectId,refresh,folder) {
		var object = this.getObject(objectId);
		if(folder == null) folder = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId,true).parentNode;
		var workspaceObj = object.clone();
		if(workspaceObj != null) this._addObject(workspaceObj,false,refresh,folder); else Ext.Msg.alert("","Duplicate not supported for object");
	}
	,closeItem: function(itemId) {
		var firstNode = this.theWorkspaceDataStore.getRootNode().findChild("objectId",itemId,true);
		if(firstNode.get("type") != "folder") this.closeObject(itemId); else {
			var objectIdsToClose = this.getObjectIdsBelow(firstNode);
			var _g = 0;
			while(_g < objectIdsToClose.length) {
				var woId = objectIdsToClose[_g];
				++_g;
				this._closeObject(woId,false);
			}
			this.reloadWorkspace();
		}
	}
	,findNode: function(itemId) {
		return this.theWorkspaceDataStore.getRootNode().findChild("objectId",itemId,true);
	}
	,getObjectIdsBelow: function(node) {
		var nodes = [node];
		var objectIdsToRemove = [];
		while(nodes.length > 0) {
			var node1 = nodes.pop();
			var children = node1.childNodes;
			if(children != null) {
				var _g = 0;
				while(_g < children.length) {
					var child = children[_g];
					++_g;
					nodes.push(child);
				}
			}
			if(node1.get("type") != "folder") objectIdsToRemove.push(node1.get("objectId"));
		}
		return objectIdsToRemove;
	}
	,getTreeAsSimple: function() {
		var nodes = [{ model : this.theWorkspaceDataStore.getRootNode()}];
		var root = nodes[0];
		while(nodes.length > 0) {
			var node = nodes.pop();
			node.text = node.model.get("text");
			node.objectId = node.model.get("objectId");
			node.type = node.model.get("type");
			node.leaf = node.model.get("leaf");
			node.expanded = node.model.get("expanded");
			node.icon = node.model.get("icon");
			node.children = [];
			var childNodes = node.model.childNodes;
			if(childNodes != null) {
				var _g = 0;
				while(_g < childNodes.length) {
					var childNode = childNodes[_g];
					++_g;
					var childNodeObj = { model : childNode};
					node.children.unshift(childNodeObj);
					nodes.push(childNodeObj);
				}
			}
			node.model = null;
		}
		root = { 'children' : root.children};
		return root;
	}
	,beginUpdate: function() {
		Ext.suspendLayouts();
		this.theWorkspaceDataStore.suspendEvents();
	}
	,restoreTreeFromSimple: function(root) {
		this.theWorkspaceDataStore.suspendEvents();
		Ext.suspendLayouts();
		var nodes = root.children;
		var _g = 0;
		while(_g < nodes.length) {
			var node = nodes[_g];
			++_g;
			node.parentNode = this.theWorkspaceDataStore.getRootNode();
		}
		while(nodes.length > 0) {
			var node1 = nodes.pop();
			var parentNode = node1.parentNode;
			var treeNode = parentNode.appendChild(Ext.create("WorkspaceObject",{ text : node1.text, leaf : node1.leaf, expandable : true, expanded : node1.expanded, objectId : node1.objectId, type : node1.type, icon : node1.icon}));
			var children = node1.children;
			if(children != null && children.length > 0) {
				var _g1 = 0;
				while(_g1 < children.length) {
					var child = children[_g1];
					++_g1;
					child.parentNode = treeNode;
					nodes.push(child);
				}
			}
		}
		this.reloadWorkspace();
	}
	,renameItem: function(objectId) {
		var _g = this;
		var node = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId,true);
		var dialog = Ext.Msg.prompt("Rename object","Type new name",function(btn,text) {
			if(btn == "ok") {
				if(node.get("type") == "folder") {
					node.set("text",text);
					node.commit();
					_g.reloadWorkspace();
				} else _g.renameWorkspaceObject(objectId,text);
			}
		},this,false,node.get("text"));
	}
	,renameWorkspaceObject: function(objectId,newName) {
		var object = this.getObject(objectId);
		newName = this.generateName(newName,1,object.getUUID());
		var key = object.getName();
		this.nameToObjectUUID.remove(key);
		var entity = object;
		if(js.Boot.__instanceof(object,saturn.client.workspace.WorkspaceObject)) entity = object.getObject();
		var clazz;
		if(entity == null) clazz = null; else clazz = js.Boot.getClass(entity);
		if(clazz != null) {
			var model = saturn.client.WorkspaceApplication.getApplication().getProvider().getModel(clazz);
			if(model != null) {
				var id_field = model.getFirstKey();
				if(id_field != null) {
					saturn.client.WorkspaceApplication.getApplication().getActiveProgram().setModelOutlineValue(id_field,newName);
					entity[id_field] = newName;
				}
			}
		}
		object.setName(newName);
		var key1 = object.getName();
		var value = object.getUUID();
		this.nameToObjectUUID.set(key1,value);
		var node = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId == null?"null":"" + objectId,true);
		if(node != null) {
			node.set("text",newName);
			node.commit();
		}
		var program = this.getOpenProgram(objectId);
		if(program != null) program.setTitle(newName);
		var _g_head = this.theListeners.h;
		var _g_val = null;
		while(_g_head != null) {
			var listener;
			listener = (function($this) {
				var $r;
				_g_val = _g_head[0];
				_g_head = _g_head[1];
				$r = _g_val;
				return $r;
			}(this));
			listener.objectRenamed(object);
		}
		this.reloadWorkspace();
	}
	,initialiseDOMComponent: function() {
		this.initialiseDragAndDrop();
	}
	,initialiseDragAndDrop: function() {
		var elem = this.getDOMComponent();
		var self = this;
		elem.addEventListener("dragenter",function(e) {
			e.preventDefault();
			elem.style.backgroundColor = "rgba(168,168,168,0.5) ";
			return false;
		});
		elem.addEventListener("dragexit",function(e1) {
			e1.preventDefault();
			elem.style.backgroundColor = "green";
			return false;
		});
		elem.addEventListener("dragover",function(e2) {
			e2.preventDefault();
			return false;
		});
		elem.addEventListener("dragleave",function(e3) {
			e3.preventDefault();
			elem.style.backgroundColor = "white";
			return false;
		});
		elem.addEventListener("drop",function(e4) {
			e4.preventDefault();
			var file = e4.dataTransfer.files[0];
			self.openFile(file);
			elem.style.backgroundColor = "white";
			return false;
		});
	}
	,onFocus: function() {
	}
	,onBlur: function() {
	}
	,getComponent: function() {
		return this.theComponent;
	}
	,getRawComponent: function() {
		return this.getRawComponent();
	}
	,addListener: function(listener) {
		this.theListeners.add(listener);
	}
	,removeListener: function(listener) {
		this.theListeners.remove(listener);
	}
	,openFile: function(file,openProgram) {
		var _g = this;
		if(file == null) return;
		var r = new EReg("\\.(\\w+)","");
		r.match(file.name);
		var extension = r.matched(1);
		if(extension == "zip") this.openZipFile(file); else if(extension == "sat") saturn.client.core.CommonCore.getFileAsText(file,function(contents) {
			var obj = haxe.Unserializer.run(contents);
			_g._openWorkspace(obj);
		}); else {
			var programRegistry = saturn.client.WorkspaceApplication.getApplication().getProgramRegistry();
			var clazz = programRegistry.getDefaultProgramByFileExtension(extension);
			if(clazz != null) {
				if(Object.prototype.hasOwnProperty.call(clazz,"parseFile")) {
					var func = Reflect.field(clazz,"parseFile");
					func.apply(clazz,[file,null,openProgram]);
				} else {
					var program = Type.createInstance(clazz,[]);
					program.openFile(file,true,openProgram);
				}
			}
		}
	}
	,openZipFile: function(file) {
		var _g2 = this;
		var load = function(buf) {
			var zip = new JSZip(buf);
			var open = true;
			var _g = 0;
			var _g1 = Reflect.fields(zip.files);
			while(_g < _g1.length) {
				var file1 = _g1[_g];
				++_g;
				var fh = zip.file(file1);
				_g2.openFile(fh,open);
				open = false;
			}
		};
		if(js.Boot.__instanceof(file,saturn.core.FileShim)) load(file.getAsArrayBuffer()); else {
			var fileReader = new FileReader();
			fileReader.onload = function(e) {
				load(e.target.result);
			};
			fileReader.readAsArrayBuffer(file);
		}
	}
	,addObject: function(object,autoOpen,folderNode) {
		this._addObject(object,autoOpen,true,folderNode);
	}
	,getParentFolder: function(objectId) {
		var node = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId,true);
		return node.parentNode;
	}
	,generateName: function(name,nextId,uuid) {
		if(!this.nameToObjectUUID.exists(name)) return name; else if(this.nameToObjectUUID.get(name) == uuid) return name;
		var newName = name + " (" + nextId + ")";
		if(this.nameToObjectUUID.exists(newName)) {
			if(this.nameToObjectUUID.get(newName) == uuid) return newName; else return this.generateName(name,++nextId,uuid);
		} else return newName;
	}
	,changeObjectType: function(objectId,model) {
		var newObj = Type.createInstance(model.getClass(),[]);
		return this.switchObject(objectId,newObj);
	}
	,switchObject: function(objectId,newObj) {
		if(!js.Boot.__instanceof(newObj,saturn.client.workspace.WorkspaceObject)) saturn.client.workspace.Workspace.installWorkspaceExtensions(newObj);
		var currentObject = this.getObject(objectId);
		newObj.setUUID(currentObject.getUUID());
		newObj.setName(currentObject.getName());
		this._addObject(newObj,false,false,null,true);
		if(Reflect.isFunction(newObj.setup)) newObj.setup();
		return newObj;
	}
	,_addObject: function(object,autoOpen,reload,folderNode,replacing) {
		if(replacing == null) replacing = false;
		if(object == null) return;
		if(!js.Boot.__instanceof(object,saturn.client.workspace.WorkspaceObject) && !Object.prototype.hasOwnProperty.call(object,"__WOEXTENSIONS")) saturn.client.workspace.Workspace.installWorkspaceExtensions(object);
		if(object.getUUID() == null || object.getUUID() == "") {
			object.setUUID(Std.string(this.nextObjectId));
			var name = this.generateName(object.getName(),1,object.getUUID());
			object.setName(name);
			this.nextObjectId++;
		}
		if((function($this) {
			var $r;
			var key = object.getUUID();
			$r = $this.theObjects.exists(key);
			return $r;
		}(this)) && (function($this) {
			var $r;
			var key1 = object.getUUID();
			$r = $this.theObjects.get(key1);
			return $r;
		}(this)) == object) {
			if(autoOpen) this.setActiveObject(object.getUUID());
			return;
		}
		var key2 = object.getName();
		var value = object.getUUID();
		this.nameToObjectUUID.set(key2,value);
		var key3 = object.getUUID();
		var value1 = object;
		this.theObjects.set(key3,value1);
		var _g_head = this.theListeners.h;
		var _g_val = null;
		while(_g_head != null) {
			var listener;
			listener = (function($this) {
				var $r;
				_g_val = _g_head[0];
				_g_head = _g_head[1];
				$r = _g_val;
				return $r;
			}(this));
			listener.objectAdded(object);
		}
		if(autoOpen) this.setActiveObject(object.getUUID());
		if(replacing == false && !this.isTreeUpdatesSuspended()) {
			var rootNode = this.theWorkspaceDataStore.getRootNode();
			var folderName = "Objects";
			if(folderNode == null) {
				var clazz = Type.getClass(object);
				var className;
				if(clazz != null) {
					var o = object;
					if(js.Boot.__instanceof(object,saturn.client.workspace.WorkspaceObject)) o = object.getObject();
					var ot;
					if(o == null) ot = null; else ot = js.Boot.getClass(o);
					var model = saturn.client.WorkspaceApplication.getApplication().getProvider().getModel(ot);
					if(model != null) folderName = model.getAlias(); else if(Object.prototype.hasOwnProperty.call(clazz,"getDefaultFolderName")) folderName = Reflect.callMethod(clazz,Reflect.field(clazz,"getDefaultFolderName"),[]); else folderName = Type.getClassName(clazz);
				}
			}
			if(folderNode == null) folderNode = this.theWorkspaceDataStore.getRootNode().findChild("text",folderName,false); else if(typeof(folderNode) == "string") {
				folderName = folderNode;
				folderNode = this.theWorkspaceDataStore.getRootNode().findChild("text",folderName,false);
			}
			if(folderNode == null) folderNode = rootNode.appendChild(Ext.create("WorkspaceObject",{ text : folderName, leaf : false, expanded : true, objectId : this.nextObjectId++, type : "folder"}));
			folderNode.appendChild(Ext.create("WorkspaceObject",{ text : object.getName(), leaf : true, expanded : true, objectId : object.getUUID(), type : "object", icon : object.getIconPath()}));
		}
		if(reload) this.reloadWorkspace();
	}
	,addFolderPrompt: function(objectId) {
		var _g = this;
		var dialog = Ext.Msg.prompt("Add Folder","Folder name",function(btn,text) {
			if(btn == "ok") _g.addFolder(objectId,text);
		},this,false,"");
	}
	,addFolder: function(objectId,folderName) {
		var folderNode;
		if(objectId == null) folderNode = this.theWorkspaceDataStore.getRootNode(); else folderNode = this.theWorkspaceDataStore.getRootNode().findChild("objectId",objectId,true);
		var folder = this._addFolder(folderName,folderNode);
		this.theComponent.view.refresh();
		return folder;
	}
	,_addFolder: function(folderName,parentFolder) {
		var nextId = this.nextObjectId++;
		if(parentFolder == null) parentFolder = this.theWorkspaceDataStore.getRootNode();
		var folder = parentFolder.appendChild(Ext.create("WorkspaceObject",{ text : folderName, leaf : false, expanded : true, id : nextId, objectId : nextId, type : "folder"}));
		return folder;
	}
	,getObject: function(id) {
		return this.getObjectSafely(id,null);
	}
	,_getObject: function(id) {
		var obj = this.getObjectSafely(id,null);
		return obj;
	}
	,getObjectSafely: function(id,type) {
		if(id == null) return null;
		id = saturn.client.workspace.Workspace.convertId(id);
		if(this.theObjects.exists(id)) {
			var obj = this.theObjects.get(id);
			if(type == null) return obj; else if(js.Boot.__instanceof(obj,type)) return obj; else return obj;
		} else return null;
	}
	,isObject: function(id) {
		id = saturn.client.workspace.Workspace.convertId(id);
		if(this.theObjects.exists(id)) return true; else return false;
	}
	,getAllObjects: function(clazz) {
		var objects = [];
		var $it0 = this.theObjects.keys();
		while( $it0.hasNext() ) {
			var objectId = $it0.next();
			var object = this.theObjects.get(objectId);
			if(js.Boot.__instanceof(object,clazz)) objects.push(object);
		}
		return objects;
	}
	,getObjectsByClass: function(clazz) {
		var objects = [];
		var $it0 = this.theObjects.keys();
		while( $it0.hasNext() ) {
			var objectId = $it0.next();
			var object = this.theObjects.get(objectId);
			if(js.Boot.__instanceof(object,clazz)) objects.push(object);
		}
		return objects;
	}
	,reloadWorkspace: function() {
		this.theWorkspaceDataStore.resumeEvents();
		this.theComponent.view.refresh();
		this.theWorkspaceDataStore.sync();
		Ext.resumeLayouts(true);
	}
	,serialise: function(cb) {
		var _g = this;
		var programs = [];
		var $it0 = this.programIdToProgram.iterator();
		while( $it0.hasNext() ) {
			var programObj = $it0.next();
			programs.push(programObj);
		}
		var next = null;
		next = function() {
			if(programs.length == 0) {
				cb(_g._serialise());
				return;
			}
			var program = programs.pop();
			program.saveWait(next);
		};
		next();
	}
	,_serialise: function() {
		var serialisedObjects = [];
		var retVal = { workspaceName : this.theWorkspaceName, nextObjectId : this.nextObjectId, nextProgramId : this.nextProgramId, workspaceObjects : [], programs : [], programStateMap : { }, activeProgramId : saturn.client.WorkspaceApplication.getApplication().getActiveProgramId()};
		var i = 0;
		var $it0 = this.theObjects.iterator();
		while( $it0.hasNext() ) {
			var workspaceObj = $it0.next();
			var fieldMap = new haxe.ds.StringMap();
			var _g = 0;
			var _g1 = Reflect.fields(workspaceObj);
			while(_g < _g1.length) {
				var field = _g1[_g];
				++_g;
				var val = Reflect.field(workspaceObj,field);
				if(val != null && (js.Boot.__instanceof(val,saturn.client.workspace.WorkspaceObject) || Object.prototype.hasOwnProperty.call(val,"__WOEXTENSIONS"))) {
					var value = val;
					fieldMap.set(field,value);
					Reflect.setField(workspaceObj,field,"__LINKED_" + Std.string(val.getUUID()));
				}
			}
			retVal.workspaceObjects[i] = workspaceObj.serialise();
			var $it1 = fieldMap.keys();
			while( $it1.hasNext() ) {
				var field1 = $it1.next();
				Reflect.setField(workspaceObj,field1,__map_reserved[field1] != null?fieldMap.getReserved(field1):fieldMap.h[field1]);
			}
			i++;
		}
		i = 0;
		var $it2 = this.programIdToProgram.iterator();
		while( $it2.hasNext() ) {
			var programObj = $it2.next();
			retVal.programs[i] = programObj.serialise();
			i++;
		}
		var $it3 = this.objectIdToOpenProgramId.keys();
		while( $it3.hasNext() ) {
			var objectId = $it3.next();
			retVal.programStateMap.objectId = this.objectIdToOpenProgramId.get(objectId);
		}
		retVal.programStateMap = this.objectIdToOpenProgramId;
		retVal.workspaceTree = this.getTreeAsSimple();
		return retVal;
	}
	,getWorkspaceName: function() {
		return this.theWorkspaceName;
	}
	,setWorkspaceName: function(workspaceName) {
		this.theWorkspaceName = workspaceName;
	}
	,openDefaultWorkspace: function() {
		this.openWorkspace("DEFAULT");
	}
	,openWorkspace: function(workspaceName) {
		var _g = this;
		this.theWorkspaceDatabase.query(workspaceName,function(e) {
			saturn.client.WorkspaceApplication.getApplication().showMessage("",e);
		},function(workspaceObject) {
			_g._openWorkspace(workspaceObject);
		});
	}
	,suspendTreeUpdates: function(suspend) {
		this.treeUpdatesSuspended = suspend;
	}
	,isTreeUpdatesSuspended: function() {
		return this.treeUpdatesSuspended;
	}
	,reg_linked: null
	,_openWorkspace: function(workspaceObject) {
		this.closeWorkspace();
		this.restoreTreeFromSimple(workspaceObject.workspaceTree);
		this.theWorkspaceName = workspaceObject.workspaceName;
		Ext.suspendLayouts();
		this.suspendTreeUpdates(true);
		var objects = workspaceObject.workspaceObjects;
		var _g = 0;
		while(_g < objects.length) {
			var workspaceObject1 = objects[_g];
			++_g;
			var unserObj = haxe.Unserializer.run(workspaceObject1);
			var clazz;
			if(unserObj == null) clazz = null; else clazz = js.Boot.getClass(unserObj);
			if(clazz != null) {
				if(!js.Boot.__instanceof(unserObj,saturn.client.workspace.WorkspaceObject)) saturn.client.workspace.Workspace.installWOExtensionFunctions(unserObj);
			}
			this._addObject(unserObj,false,false);
		}
		var $it0 = this.theObjects.keys();
		while( $it0.hasNext() ) {
			var uuid = $it0.next();
			var obj = this.theObjects.get(uuid);
			var _g1 = 0;
			var _g11 = Reflect.fields(obj);
			while(_g1 < _g11.length) {
				var field = _g11[_g1];
				++_g1;
				var val = Reflect.field(obj,field);
				if(val != null && typeof(val) == "string" && this.reg_linked.match(val)) {
					var linkedId = this.reg_linked.matched(1);
					Reflect.setField(obj,field,this.theObjects.get(linkedId));
				}
			}
		}
		this.setReloading(true);
		var progReg = saturn.client.WorkspaceApplication.getApplication().getProgramRegistry();
		var programs = workspaceObject.programs;
		var _g2 = 0;
		while(_g2 < programs.length) {
			var program = programs[_g2];
			++_g2;
			var newProg = Type.createInstance(Type.resolveClass(program.CLASS),[]);
			newProg.deserialise(program);
			progReg.installPlugins(newProg);
			this.registerProgram(newProg);
		}
		var programStateMap = workspaceObject.programStateMap;
		var _g3 = 0;
		var _g12 = Reflect.fields(programStateMap.h);
		while(_g3 < _g12.length) {
			var field1 = _g12[_g3];
			++_g3;
			var programId = Reflect.field(programStateMap.h,field1);
			var objectId = field1;
			var program1 = this.getProgram(programId);
			this.registerObjectWith(this.getObject(objectId),program1);
			program1._setActiveObject(objectId);
			program1.setTitle(this._getObject(objectId).getName());
			this.setActiveObject(objectId);
			program1.postRestore();
		}
		this.setReloading(false);
		if(workspaceObject.activeProgramId != "-1") this.setActiveObject(this.getProgram(workspaceObject.activeProgramId).getActiveObjectId());
		this.nextObjectId = workspaceObject.nextObjectId;
		this.nextProgramId = workspaceObject.nextProgramId;
		var $it1 = this.theObjects.keys();
		while( $it1.hasNext() ) {
			var objId = $it1.next();
			var wo = this.theObjects.get(objId);
			if(js.Boot.__instanceof(wo,saturn.client.workspace.TextFileWO)) {
				var obj1 = wo.getObject();
				if(obj1.autoRun) {
					if(obj1.value != null) saturn.client.programs.TextEditor.runCode(obj1.value);
				}
			}
		}
		Ext.resumeLayouts(true);
		this.suspendTreeUpdates(false);
		Ext.suspendLayouts();
		Ext.resumeLayouts(true);
	}
	,getWorkspaceNames: function(onSuccess) {
		this.theWorkspaceDatabase.getWorkspaceNames(onSuccess);
	}
	,__class__: saturn.client.workspace.Workspace
};
saturn.client.workspace.WorkspaceStore = $hxClasses["saturn.client.workspace.WorkspaceStore"] = function(databaseName,version,onErrorAction) {
	this.databaseName = databaseName;
	this.version = version;
	this.onErrorAction = onErrorAction;
	this.init();
};
saturn.client.workspace.WorkspaceStore.__name__ = ["saturn","client","workspace","WorkspaceStore"];
saturn.client.workspace.WorkspaceStore.prototype = {
	databaseName: null
	,version: null
	,conn: null
	,onErrorAction: null
	,init: function() {
		var _g = this;
		if(window.indexedDB) {
			var request = indexedDB.open(this.databaseName,this.version);
			request.onupgradeneeded = function(e) {
				var db = e.target.result;
				e.target.transaction.onerror = _g.onErrorAction;
				if(db.objectStoreNames.contains(_g.databaseName)) db.deleteObjectStore(_g.databaseName);
				var store = db.createObjectStore(_g.databaseName,{ keyPath : "workspaceName"});
			};
			request.onsuccess = function(e1) {
				_g.conn = e1.target.result;
			};
			request.onerror = this.onErrorAction;
		}
	}
	,store: function(object,onErrorAction,onSuccessAction) {
		var trans = this.conn.transaction([this.databaseName],"readwrite");
		var store = trans.objectStore(this.databaseName);
		var request = store.put(object);
	}
	,query: function(key,onError,onSuccess) {
		var trans = this.conn.transaction([this.databaseName]);
		var objectStore = trans.objectStore(this.databaseName);
		var request = objectStore.get(key);
		request.onerror = onError;
		request.onsuccess = function(result) {
			onSuccess(result.target.result);
		};
	}
	,getWorkspaceNames: function(onSuccess) {
		var trans = this.conn.transaction([this.databaseName],"readonly");
		var objectStore = trans.objectStore(this.databaseName);
		var workspaceNames = [];
		objectStore.openCursor().onsuccess = function(event) {
			var cursor = this.result;
			if(cursor != null) {
				workspaceNames.push(cursor.key);
				cursor.advance(1);
			} else onSuccess(workspaceNames);
		};
	}
	,__class__: saturn.client.workspace.WorkspaceStore
};
saturn.client.workspace.WorkspaceStoreProvider = $hxClasses["saturn.client.workspace.WorkspaceStoreProvider"] = function(databaseName,version,onErrorAction) {
	saturn.client.workspace.WorkspaceStore.call(this,databaseName,version,onErrorAction);
};
saturn.client.workspace.WorkspaceStoreProvider.__name__ = ["saturn","client","workspace","WorkspaceStoreProvider"];
saturn.client.workspace.WorkspaceStoreProvider.__super__ = saturn.client.workspace.WorkspaceStore;
saturn.client.workspace.WorkspaceStoreProvider.prototype = $extend(saturn.client.workspace.WorkspaceStore.prototype,{
	store: function(rawSession,onErrorAction,onSuccessAction) {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var name = saturn.client.core.ClientCore.getClientCore().getUser().fullname + " - " + Std.string(rawSession.workspaceName);
		rawSession = JSON.stringify(rawSession);
		app.getProvider().getByValue(name,saturn.core.domain.SaturnSession,"sessionName",function(obj,error) {
			if(error != null) onErrorAction(error); else if(obj == null) {
				obj = new saturn.core.domain.SaturnSession();
				obj.sessionName = name;
				obj.sessionContent = rawSession;
				obj.isPublic = "yes";
				app.getProvider().insertObjects([obj],function(error1) {
					app.getProvider().resetCache();
					if(error1 != null) onErrorAction(error1); else onSuccessAction();
				});
			} else {
				obj.sessionContent = rawSession;
				app.getProvider().updateObjects([obj],function(error2) {
					app.getProvider().resetCache();
					if(error2 != null) onErrorAction(error2); else onSuccessAction();
				});
			}
		});
	}
	,query: function(key,onError,onSuccess) {
		var app = saturn.client.WorkspaceApplication.getApplication();
		if(key.indexOf("~") == -1) key = saturn.client.core.ClientCore.getClientCore().getUser().fullname + " - " + key;
		app.getProvider().getByValue(key,saturn.core.domain.SaturnSession,"sessionName",function(obj,error) {
			app.getProvider().resetCache();
			if(error != null) onError(error); else if(obj != null) {
				var rawSession = obj.sessionContent;
				rawSession = JSON.parse(rawSession);
				onSuccess(rawSession);
			} else onError("A default session doesn't exist for your account.");
		});
	}
	,getWorkspaceNames: function(onSuccess) {
		var workspaceNames = [];
		var app = saturn.client.WorkspaceApplication.getApplication();
		app.getProvider().getByValues([saturn.client.core.ClientCore.getClientCore().getUser().username],saturn.core.domain.SaturnSession,"userName",function(objs,error) {
			app.getProvider().resetCache();
			var names = [];
			if(objs != null) {
				var _g = 0;
				while(_g < objs.length) {
					var obj = objs[_g];
					++_g;
					names.push(obj.sessionName);
				}
			}
			onSuccess(names);
		});
	}
	,init: function() {
	}
	,__class__: saturn.client.workspace.WorkspaceStoreProvider
});
saturn.client.workspace.WorkspaceObjectNotFoundException = $hxClasses["saturn.client.workspace.WorkspaceObjectNotFoundException"] = function(message) {
	saturn.util.HaxeException.call(this,message);
};
saturn.client.workspace.WorkspaceObjectNotFoundException.__name__ = ["saturn","client","workspace","WorkspaceObjectNotFoundException"];
saturn.client.workspace.WorkspaceObjectNotFoundException.__super__ = saturn.util.HaxeException;
saturn.client.workspace.WorkspaceObjectNotFoundException.prototype = $extend(saturn.util.HaxeException.prototype,{
	__class__: saturn.client.workspace.WorkspaceObjectNotFoundException
});
saturn.core.Alignment = $hxClasses["saturn.core.Alignment"] = function(seqA,seqB) {
	this.seqID = 0;
	this.lMinScore = 2;
	this.lMaxScore = -1;
	this.lMaxI = 0;
	this.lMaxJ = 0;
	this.localMode = false;
	this.missMatchScore = -2;
	this.matchScore = 1;
	this.gapScore = -1;
	this.sequenceA = seqA.toUpperCase();
	this.sequenceB = seqB.toUpperCase();
	this.localBlocks = [];
};
saturn.core.Alignment.__name__ = ["saturn","core","Alignment"];
saturn.core.Alignment.prototype = {
	sequenceA: null
	,sequenceB: null
	,alnMatrix: null
	,alnDMatrix: null
	,sequenceALen: null
	,sequenceBLen: null
	,gapScore: null
	,matchScore: null
	,missMatchScore: null
	,sequenceAAlnStr: null
	,sequenceBAlnStr: null
	,localMode: null
	,lMaxJ: null
	,lMaxI: null
	,lMaxScore: null
	,lMinScore: null
	,localBlocks: null
	,seqID: null
	,setAlignmentType: function(alnType) {
		if(alnType == saturn.core.AlignmentType.SW) this.localMode = true; else this.localMode = false;
	}
	,getAlignment: function() {
		var localBlock = this.localBlocks[0];
		var retArray = [localBlock.sequenceA,localBlock.sequenceB];
		return retArray;
	}
	,getAlignmentRegion: function() {
		return this.getAlignment();
	}
	,setBlock: function(block) {
		this.localBlocks.push(block);
	}
	,getAllLocalAlignments: function() {
		return this.localBlocks;
	}
	,align: function() {
		this.lMaxJ = 0;
		this.lMaxI = 0;
		this.lMaxScore = -1;
		this.alnMatrix = [];
		this.alnDMatrix = [];
		this.localBlocks = [];
		this.sequenceALen = this.sequenceA.length;
		this.sequenceBLen = this.sequenceB.length;
		var _g1 = 0;
		var _g = this.sequenceBLen + 1;
		while(_g1 < _g) {
			var i = _g1++;
			var iAln = [];
			var iDAln = [];
			var _g3 = 0;
			var _g2 = this.sequenceALen + 1;
			while(_g3 < _g2) {
				var j = _g3++;
				iAln.push(0);
				iDAln.push("");
			}
			this.alnMatrix.push(iAln);
			this.alnDMatrix.push(iDAln);
		}
		this.alnMatrix[0][0] = 0;
		this.alnDMatrix[0][0] = "N";
		var _g11 = 1;
		var _g4 = this.sequenceALen + 1;
		while(_g11 < _g4) {
			var i1 = _g11++;
			this.alnMatrix[0][i1] = i1 * this.gapScore;
			this.alnDMatrix[0][i1] = "L";
		}
		var _g12 = 1;
		var _g5 = this.sequenceBLen + 1;
		while(_g12 < _g5) {
			var j1 = _g12++;
			this.alnMatrix[j1][0] = j1 * this.gapScore;
			this.alnDMatrix[j1][0] = "L";
		}
		var _g13 = 1;
		var _g6 = this.sequenceBLen + 1;
		while(_g13 < _g6) {
			var j2 = _g13++;
			var _g31 = 1;
			var _g21 = this.sequenceALen + 1;
			while(_g31 < _g21) {
				var i2 = _g31++;
				var dScore;
				if(this.sequenceB.charAt(j2 - 1) == this.sequenceA.charAt(i2 - 1)) dScore = this.alnMatrix[j2 - 1][i2 - 1] + this.matchScore; else dScore = this.alnMatrix[j2 - 1][i2 - 1] + this.missMatchScore;
				var lScore = this.alnMatrix[j2][i2 - 1] + this.gapScore;
				var uScore = this.alnMatrix[j2 - 1][i2] + this.gapScore;
				if(dScore >= uScore) {
					if(dScore >= lScore) {
						this.alnMatrix[j2][i2] = dScore;
						this.alnDMatrix[j2][i2] = "D";
					} else {
						this.alnMatrix[j2][i2] = lScore;
						this.alnDMatrix[j2][i2] = "L";
					}
				} else if(uScore >= lScore) {
					this.alnMatrix[j2][i2] = uScore;
					this.alnDMatrix[j2][i2] = "U";
				} else {
					this.alnMatrix[j2][i2] = lScore;
					this.alnDMatrix[j2][i2] = "L";
				}
				if(this.localMode) {
					if(0 > this.alnMatrix[j2][i2]) {
						this.alnMatrix[j2][i2] = 0;
						this.alnDMatrix[j2][i2] = "S";
					} else {
						if(this.alnMatrix[j2][i2] > this.lMaxScore) {
							this.lMaxScore = this.alnMatrix[j2][i2];
							this.lMaxJ = j2;
							this.lMaxI = i2;
						}
						if(this.alnMatrix[j2][i2] > this.lMinScore) this.localBlocks.push(new saturn.core.LocalBlock(j2,i2,this.alnMatrix[j2][i2]));
					}
				}
			}
		}
		var blocksToProcess = [];
		if(this.localMode) {
			var scoreToBlocks = new haxe.ds.IntMap();
			var _g14 = 0;
			var _g7 = this.localBlocks.length;
			while(_g14 < _g7) {
				var l = _g14++;
				var localBlock = this.localBlocks[l];
				if(!scoreToBlocks.h.hasOwnProperty(localBlock.score)) {
					var value = [];
					scoreToBlocks.h[localBlock.score] = value;
				}
				scoreToBlocks.h[localBlock.score].push(localBlock);
			}
			var scoreList = [];
			var $it0 = scoreToBlocks.keys();
			while( $it0.hasNext() ) {
				var key = $it0.next();
				scoreList.push(key);
			}
			scoreList.sort(function(a,b) {
				return b - a;
			});
			var _g8 = 0;
			while(_g8 < scoreList.length) {
				var score = scoreList[_g8];
				++_g8;
				var _g15 = 0;
				var _g22 = scoreToBlocks.h[score];
				while(_g15 < _g22.length) {
					var localBlock1 = _g22[_g15];
					++_g15;
					blocksToProcess.push(localBlock1);
				}
			}
		} else blocksToProcess.push(new saturn.core.LocalBlock(this.sequenceBLen,this.sequenceALen,0));
		this.localBlocks = [];
		this.seqID = 0;
		var visitedPositions = new haxe.ds.StringMap();
		var _g16 = 0;
		var _g9 = blocksToProcess.length;
		while(_g16 < _g9) {
			var l1 = _g16++;
			var sequenceAAln = [];
			var sequenceBAln = [];
			var localBlock2 = blocksToProcess[l1];
			var i3 = localBlock2.iPosition;
			var j3 = localBlock2.jPosition;
			var breaked = false;
			while(true) if(this.alnDMatrix[j3][i3] == "N" || this.alnDMatrix[j3][i3] == "S" || 0 > i3) break; else if(this.alnDMatrix[j3][i3] == "D") {
				if(visitedPositions.exists("I" + Std.string(i3 - 1))) {
					breaked = true;
					break;
				} else if(visitedPositions.exists("J" + Std.string(j3 - 1))) {
					breaked = true;
					break;
				}
				visitedPositions.set("I" + Std.string(i3 - 1),"");
				visitedPositions.set("J" + Std.string(j3 - 1),"");
				sequenceAAln.push(this.sequenceA.charAt(i3 - 1));
				sequenceBAln.push(this.sequenceB.charAt(j3 - 1));
				if(this.sequenceA.charAt(i3 - 1) == this.sequenceB.charAt(j3 - 1)) this.seqID++;
				j3--;
				i3--;
			} else if(this.alnDMatrix[j3][i3] == "L") {
				if(visitedPositions.exists("I" + Std.string(i3 - 1))) {
					breaked = true;
					break;
				}
				visitedPositions.set("I" + Std.string(i3 - 1),"");
				sequenceAAln.push(this.sequenceA.charAt(i3 - 1));
				sequenceBAln.push("-");
				i3--;
			} else if(this.alnDMatrix[j3][i3] == "U") {
				if(visitedPositions.exists("J" + Std.string(j3 - 1))) {
					breaked = true;
					break;
				}
				visitedPositions.set("J" + Std.string(j3 - 1),"");
				sequenceBAln.push(this.sequenceB.charAt(j3 - 1));
				sequenceAAln.push("-");
				j3--;
			}
			if(!breaked) {
				sequenceAAln.reverse();
				this.sequenceAAlnStr = sequenceAAln.join("");
				sequenceBAln.reverse();
				this.sequenceBAlnStr = sequenceBAln.join("");
				localBlock2.sequenceA = this.sequenceAAlnStr;
				localBlock2.sequenceB = this.sequenceBAlnStr;
				this.localBlocks.push(localBlock2);
			}
		}
	}
	,getSeqAId: function() {
		return this.seqID / this.sequenceA.length * 100;
	}
	,__class__: saturn.core.Alignment
};
saturn.core.LocalBlock = $hxClasses["saturn.core.LocalBlock"] = function(j,i,hitScore) {
	this.iPosition = i;
	this.jPosition = j;
	this.score = hitScore;
};
saturn.core.LocalBlock.__name__ = ["saturn","core","LocalBlock"];
saturn.core.LocalBlock.prototype = {
	iPosition: null
	,jPosition: null
	,score: null
	,sequenceA: null
	,sequenceB: null
	,__class__: saturn.core.LocalBlock
};
saturn.core.AlignmentType = $hxClasses["saturn.core.AlignmentType"] = { __ename__ : ["saturn","core","AlignmentType"], __constructs__ : ["SW","NW"] };
saturn.core.AlignmentType.SW = ["SW",0];
saturn.core.AlignmentType.SW.toString = $estr;
saturn.core.AlignmentType.SW.__enum__ = saturn.core.AlignmentType;
saturn.core.AlignmentType.NW = ["NW",1];
saturn.core.AlignmentType.NW.toString = $estr;
saturn.core.AlignmentType.NW.__enum__ = saturn.core.AlignmentType;
if(!saturn.core.molecule) saturn.core.molecule = {};
saturn.core.molecule.Molecule = $hxClasses["saturn.core.molecule.Molecule"] = function(seq) {
	this.linked = false;
	this.allowStar = false;
	this.floatAttributes = new haxe.ds.StringMap();
	this.stringAttributes = new haxe.ds.StringMap();
	this.annotations = new haxe.ds.StringMap();
	this.rawAnnotationData = new haxe.ds.StringMap();
	this.annotationCRC = new haxe.ds.StringMap();
	this.setSequence(seq);
};
saturn.core.molecule.Molecule.__name__ = ["saturn","core","molecule","Molecule"];
saturn.core.molecule.Molecule.prototype = {
	sequence: null
	,starPosition: null
	,originalSequence: null
	,linkedOriginField: null
	,sequenceField: null
	,floatAttributes: null
	,stringAttributes: null
	,name: null
	,alternativeName: null
	,annotations: null
	,rawAnnotationData: null
	,annotationCRC: null
	,crc: null
	,allowStar: null
	,parent: null
	,linked: null
	,getValue: function() {
		return this.getSequence();
	}
	,isLinked: function() {
		return this.linked;
	}
	,setParent: function(parent) {
		this.parent = parent;
	}
	,getParent: function() {
		return this.parent;
	}
	,isChild: function() {
		return this.parent != null;
	}
	,setCRC: function(crc) {
		this.crc = crc;
	}
	,updateCRC: function() {
		if(this.sequence != null) this.crc = haxe.crypto.Md5.encode(this.sequence);
	}
	,getAnnotationCRC: function(annotationName) {
		return this.annotationCRC.get(annotationName);
	}
	,getCRC: function() {
		return this.crc;
	}
	,setRawAnnotationData: function(rawAnnotationData,annotationName) {
		var value = rawAnnotationData;
		this.rawAnnotationData.set(annotationName,value);
	}
	,getRawAnnotationData: function(annotationName) {
		return this.rawAnnotationData.get(annotationName);
	}
	,setAllAnnotations: function(annotations) {
		this.removeAllAnnotations();
		var $it0 = annotations.keys();
		while( $it0.hasNext() ) {
			var annotationName = $it0.next();
			this.setAnnotations(__map_reserved[annotationName] != null?annotations.getReserved(annotationName):annotations.h[annotationName],annotationName);
		}
	}
	,removeAllAnnotations: function() {
		var $it0 = this.annotations.keys();
		while( $it0.hasNext() ) {
			var annotationName = $it0.next();
			this.annotations.remove(annotationName);
			this.annotationCRC.remove(annotationName);
		}
	}
	,setAnnotations: function(annotations,annotationName) {
		this.annotations.set(annotationName,annotations);
		var value = this.getCRC();
		this.annotationCRC.set(annotationName,value);
	}
	,getAnnotations: function(name) {
		return this.annotations.get(name);
	}
	,getAllAnnotations: function() {
		return this.annotations;
	}
	,getAlternativeName: function() {
		return this.alternativeName;
	}
	,setAlternativeName: function(altName) {
		this.alternativeName = altName;
	}
	,getMoleculeName: function() {
		return this.name;
	}
	,setMoleculeName: function(name) {
		this.name = name;
	}
	,getName: function() {
		return this.getMoleculeName();
	}
	,setName: function(name) {
		this.setMoleculeName(name);
	}
	,getSequence: function() {
		return this.sequence;
	}
	,setSequence: function(seq) {
		if(seq != null) {
			seq = seq.toUpperCase();
			seq = saturn.core.molecule.Molecule.whiteSpaceReg.replace(seq,"");
			seq = saturn.core.molecule.Molecule.newLineReg.replace(seq,"");
			seq = saturn.core.molecule.Molecule.carLineReg.replace(seq,"");
			this.starPosition = seq.indexOf("*");
			if(!this.allowStar) {
				this.originalSequence = seq;
				seq = saturn.core.molecule.Molecule.reg_starReplace.replace(seq,"");
			}
			this.sequence = seq;
		}
		this.updateCRC();
	}
	,getFirstPosition: function(seq) {
		return this.sequence.indexOf(seq);
	}
	,getLastPosition: function(seq) {
		if(seq == "") return -1;
		var c = 0;
		var lastMatchPos = -1;
		var lastLastMatchPos = -1;
		while(true) {
			lastMatchPos = this.sequence.indexOf(seq,lastMatchPos + 1);
			if(lastMatchPos != -1) {
				lastLastMatchPos = lastMatchPos;
				c++;
			} else break;
		}
		return lastLastMatchPos;
	}
	,getLocusCount: function(seq) {
		if(seq == "") return 0;
		var c = 0;
		var lastMatchPos = -1;
		while(true) {
			lastMatchPos = this.sequence.indexOf(seq,lastMatchPos + 1);
			if(lastMatchPos != -1) c++; else break;
		}
		return c;
	}
	,contains: function(seq) {
		if(this.sequence.indexOf(seq) > -1) return true; else return false;
	}
	,getLength: function() {
		return this.sequence.length;
	}
	,getStarPosition: function() {
		return this.starPosition;
	}
	,setStarPosition: function(starPosition) {
		this.starPosition = starPosition;
	}
	,getStarSequence: function() {
		return this.originalSequence;
	}
	,equals: function(other) {
		if(other.getStarPosition() != this.getStarPosition()) return false; else if(this.getSequence() != other.getSequence()) return false;
		return true;
	}
	,getCutPosition: function(template) {
		if(template.getLocusCount(this.getSequence()) > 0) {
			var siteStartPosition = template.getFirstPosition(this.getSequence());
			return siteStartPosition + this.starPosition;
		} else return -1;
	}
	,getAfterCutSequence: function(template) {
		var cutPosition = this.getCutPosition(template);
		if(cutPosition == -1) return ""; else {
			var seq = template.getSequence();
			return seq.substring(cutPosition,seq.length);
		}
	}
	,getBeforeCutSequence: function(template) {
		var cutPosition = this.getCutPosition(template);
		if(cutPosition == -1) return ""; else {
			var seq = template.getSequence();
			return seq.substring(0,cutPosition);
		}
	}
	,getLastCutPosition: function(template) {
		if(template.getLocusCount(this.getSequence()) > 0) {
			var siteStartPosition = template.getLastPosition(this.getSequence());
			return siteStartPosition + this.starPosition;
		} else return -1;
	}
	,getLastBeforeCutSequence: function(template) {
		var cutPosition = this.getLastCutPosition(template);
		if(cutPosition == -1) return ""; else {
			var seq = template.getSequence();
			return seq.substring(0,cutPosition);
		}
	}
	,getLastAfterCutSequence: function(template) {
		var cutPosition = this.getLastCutPosition(template);
		if(cutPosition == -1) return ""; else {
			var seq = template.getSequence();
			return seq.substring(cutPosition,seq.length);
		}
	}
	,getCutProduct: function(template,direction) {
		if(direction == saturn.core.CutProductDirection.UPSTREAM) return this.getBeforeCutSequence(template); else if(direction == saturn.core.CutProductDirection.DOWNSTREAM) return this.getAfterCutSequence(template); else if(direction == saturn.core.CutProductDirection.UPDOWN) {
			var startPos = this.getCutPosition(template);
			var endPos = this.getLastCutPosition(template) - this.getLength();
			return template.getSequence().substring(startPos,endPos);
		} else return null;
	}
	,getFloatAttribute: function(attr) {
		return this._getFloatAttribute(Std.string(attr));
	}
	,_getFloatAttribute: function(attributeName) {
		if(this.floatAttributes.exists(attributeName)) return this.floatAttributes.get(attributeName);
		return null;
	}
	,setValue: function(value) {
		this.setSequence(value);
	}
	,_setFloatAttribute: function(attributeName,val) {
		this.floatAttributes.set(attributeName,val);
	}
	,setFloatAttribute: function(attr,val) {
		this._setFloatAttribute(Std.string(attr),val);
	}
	,getStringAttribute: function(attr) {
		return this._getStringAttribute(Std.string(attr));
	}
	,_getStringAttribute: function(attributeName) {
		if(this.stringAttributes.exists(attributeName)) return this.stringAttributes.get(attributeName);
		return null;
	}
	,_setStringAttribute: function(attributeName,val) {
		this.stringAttributes.set(attributeName,val);
	}
	,setStringAttribute: function(attr,val) {
		this._setStringAttribute(Std.string(attr),val);
		return;
	}
	,getMW: function() {
		return this.getFloatAttribute(saturn.core.molecule.MoleculeFloatAttribute.MW);
	}
	,findMatchingLocuses: function(locus,mode) {
		var collookup_single = new EReg("^(\\d+)$","");
		if(collookup_single.match(locus)) {
			var num = collookup_single.matched(1);
			var locusPosition = new saturn.core.LocusPosition();
			locusPosition.start = Std.parseInt(num) - 1;
			locusPosition.end = locusPosition.start;
			return [locusPosition];
		}
		var collookup_double = new EReg("^(\\d+)-(\\d+)$","");
		if(collookup_double.match(locus)) {
			var locusPosition1 = new saturn.core.LocusPosition();
			locusPosition1.start = Std.parseInt(collookup_double.matched(1)) - 1;
			locusPosition1.end = Std.parseInt(collookup_double.matched(2)) - 1;
			return [locusPosition1];
		}
		var collookup_toend = new EReg("^(\\d+)-$","");
		if(collookup_toend.match(locus)) {
			var locusPosition2 = new saturn.core.LocusPosition();
			locusPosition2.start = Std.parseInt(collookup_toend.matched(1)) - 1;
			locusPosition2.end = this.getLength() - 1;
			return [locusPosition2];
		}
		var re_missMatchTotal = new EReg("^(\\d+)(.+)","");
		if(mode == null) {
			mode = saturn.core.molecule.MoleculeAlignMode.REGEX;
			if(re_missMatchTotal.match(locus)) mode = saturn.core.molecule.MoleculeAlignMode.SIMPLE;
		}
		if(mode == saturn.core.molecule.MoleculeAlignMode.REGEX) return this.findMatchingLocusesRegEx(locus); else if(mode == saturn.core.molecule.MoleculeAlignMode.SIMPLE) {
			var missMatchesAllowed = 0;
			if(re_missMatchTotal.match(locus)) {
				missMatchesAllowed = Std.parseInt(re_missMatchTotal.matched(1));
				locus = re_missMatchTotal.matched(2);
			}
			return this.findMatchingLocusesSimple(locus,missMatchesAllowed);
		} else return null;
	}
	,findMatchingLocusesSimple: function(locus,missMatchesAllowed) {
		if(missMatchesAllowed == null) missMatchesAllowed = 0;
		var positions = [];
		if(locus == null || locus == "") return positions;
		var currentMissMatches = 0;
		var seqI = -1;
		var lI = -1;
		var startPos = 0;
		var missMatchLimit = missMatchesAllowed + 1;
		var missMatchPositions = [];
		while(true) {
			lI++;
			seqI++;
			if(seqI > this.sequence.length - 1) break;
			if(locus.charAt(lI) != this.sequence.charAt(seqI)) {
				currentMissMatches++;
				missMatchPositions.push(seqI);
			}
			if(lI == 0) startPos = seqI;
			if(currentMissMatches == missMatchLimit) {
				seqI = startPos;
				lI = -1;
				currentMissMatches = 0;
				missMatchPositions = [];
			} else if(lI == locus.length - 1) {
				var locusPosition = new saturn.core.LocusPosition();
				locusPosition.start = startPos;
				locusPosition.end = seqI;
				locusPosition.missMatchPositions = missMatchPositions;
				positions.push(locusPosition);
				lI = -1;
				currentMissMatches = 0;
				missMatchPositions = [];
			}
		}
		return positions;
	}
	,findMatchingLocusesRegEx: function(regex) {
		var r = new EReg(regex,"i");
		var positions = [];
		if(regex == null || regex == "") return positions;
		var offSet = 0;
		var matchAgainst = this.sequence;
		while(matchAgainst != null) if(r.match(matchAgainst)) {
			var locusPosition = new saturn.core.LocusPosition();
			var match = r.matchedPos();
			locusPosition.start = match.pos + offSet;
			locusPosition.end = match.pos + match.len - 1 + offSet;
			offSet = locusPosition.end + 1;
			matchAgainst = r.matchedRight();
			positions.push(locusPosition);
		} else break;
		return positions;
	}
	,updateAnnotations: function(annotationName,config,annotationManager,cb) {
		if(this.getAnnotationCRC(annotationName) == this.getCRC()) cb(null,this.getAnnotations(annotationName)); else annotationManager.annotateMolecule(this,annotationName,config,function(err,res) {
			cb(err,res);
		});
	}
	,__class__: saturn.core.molecule.Molecule
};
saturn.core.DNA = $hxClasses["saturn.core.DNA"] = function(seq) {
	this.reg_tReplace = new EReg("T","g");
	this.proteins = new haxe.ds.StringMap();
	saturn.core.molecule.Molecule.call(this,seq);
};
saturn.core.DNA.__name__ = ["saturn","core","DNA"];
saturn.core.DNA.isDNA = function(sequence) {
	var seqLen = sequence.length;
	var valid_nucs;
	var _g = new haxe.ds.StringMap();
	if(__map_reserved.A != null) _g.setReserved("A",true); else _g.h["A"] = true;
	if(__map_reserved.T != null) _g.setReserved("T",true); else _g.h["T"] = true;
	if(__map_reserved.G != null) _g.setReserved("G",true); else _g.h["G"] = true;
	if(__map_reserved.C != null) _g.setReserved("C",true); else _g.h["C"] = true;
	if(__map_reserved.U != null) _g.setReserved("U",true); else _g.h["U"] = true;
	valid_nucs = _g;
	var _g1 = 0;
	while(_g1 < seqLen) {
		var i = _g1++;
		var nuc = sequence.charAt(i).toUpperCase();
		if(!((__map_reserved[nuc] != null?valid_nucs.existsReserved(nuc):valid_nucs.h.hasOwnProperty(nuc)) && (__map_reserved[nuc] != null?valid_nucs.getReserved(nuc):valid_nucs.h[nuc]))) return false;
	}
	return true;
};
saturn.core.DNA.__super__ = saturn.core.molecule.Molecule;
saturn.core.DNA.prototype = $extend(saturn.core.molecule.Molecule.prototype,{
	protein: null
	,proteins: null
	,addProtein: function(name,protein) {
		if(protein != null) this.proteins.set(name,protein);
	}
	,removeProtein: function(name) {
		this.proteins.remove(name);
	}
	,getProtein: function(name) {
		return this.proteins.get(name);
	}
	,getProteinNames: function() {
		var names = [];
		var $it0 = this.proteins.keys();
		while( $it0.hasNext() ) {
			var name = $it0.next();
			names.push(name);
		}
		return names;
	}
	,getGCFraction: function() {
		var dnaComposition = this.getComposition();
		return (dnaComposition.cCount + dnaComposition.gCount) / this.getLength();
	}
	,reg_tReplace: null
	,convertToRNA: function() {
		return this.reg_tReplace.replace(this.getSequence(),"U");
	}
	,getHydrogenBondCount: function() {
		var dnaComposition = this.getComposition();
		return (dnaComposition.gCount + dnaComposition.cCount) * 3 + (dnaComposition.aCount + dnaComposition.tCount) * 2;
	}
	,getMolecularWeight: function(phosphateAt5Prime) {
		var dnaComposition = this.getComposition();
		var seqMW = 0.0;
		seqMW += dnaComposition.aCount * saturn.core.molecule.MoleculeConstants.aChainMW;
		seqMW += dnaComposition.tCount * saturn.core.molecule.MoleculeConstants.tChainMW;
		seqMW += dnaComposition.gCount * saturn.core.molecule.MoleculeConstants.gChainMW;
		seqMW += dnaComposition.cCount * saturn.core.molecule.MoleculeConstants.cChainMW;
		if(phosphateAt5Prime == false) seqMW -= saturn.core.molecule.MoleculeConstants.PO3;
		seqMW += saturn.core.molecule.MoleculeConstants.OH;
		return seqMW;
	}
	,setSequence: function(sequence) {
		saturn.core.molecule.Molecule.prototype.setSequence.call(this,sequence);
		if(this.isChild()) {
			var p = this.getParent();
			p.dnaSequenceUpdated(this.sequence);
		}
	}
	,proteinSequenceUpdated: function(sequence) {
	}
	,getComposition: function() {
		var aCount = 0;
		var tCount = 0;
		var gCount = 0;
		var cCount = 0;
		var seqLen = this.sequence.length;
		var _g = 0;
		while(_g < seqLen) {
			var i = _g++;
			var nuc = this.sequence.charAt(i);
			switch(nuc) {
			case "A":
				aCount++;
				break;
			case "T":
				tCount++;
				break;
			case "G":
				gCount++;
				break;
			case "C":
				cCount++;
				break;
			case "U":
				tCount++;
				break;
			}
		}
		return new saturn.core.DNAComposition(aCount,tCount,gCount,cCount);
	}
	,getMeltingTemperature: function() {
		var saltConc = 50;
		var primerConc = 500;
		var testTmCalc = new saturn.core.TmCalc();
		return testTmCalc.tmCalculation(this,saltConc,primerConc);
	}
	,findPrimer: function(startPos,minLength,maxLength,minMelting,maxMelting,extensionSequence,minLengthExtended,minMeltingExtended,maxMeltingExtentded) {
		if(maxMeltingExtentded == null) maxMeltingExtentded = -1;
		if(minMeltingExtended == null) minMeltingExtended = -1;
		if(minLengthExtended == null) minLengthExtended = -1;
		var cCount;
		var gCount;
		var tCount;
		var aCount = 0;
		var seq = HxOverrides.substr(this.sequence,startPos - 1,minLength - 1);
		var comp = new saturn.core.DNA(seq).getComposition();
		cCount = comp.cCount;
		gCount = comp.gCount;
		tCount = comp.tCount;
		aCount = comp.aCount;
		var rangeStart = startPos - 1 + minLength - 1;
		var rangeStop = rangeStart + maxLength;
		var _g = rangeStart;
		while(_g < rangeStop) {
			var i = _g++;
			var $char = this.sequence.charAt(i);
			if($char == "C") cCount++; else if($char == "G") gCount++; else if($char == "A") aCount++; else if($char == "T") tCount++;
			seq += $char;
			var mt = new saturn.core.DNA(seq).getMeltingTemperature();
			if(mt > maxMelting) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Maximum melting temperature exceeded")); else if(mt >= minMelting && mt <= maxMelting) {
				if(extensionSequence == null) return seq; else {
					var completeSequence = new saturn.core.DNA(extensionSequence + seq);
					var completeMT = completeSequence.getMeltingTemperature();
					if(completeMT >= minMeltingExtended && completeMT <= maxMeltingExtentded && completeSequence.getLength() >= minLengthExtended) return seq; else if(completeMT < minMeltingExtended) continue; else if(completeMT > maxMeltingExtentded) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Maximum melting temperature for extended primer sequence exceeded")); else if(completeSequence.getLength() < minLengthExtended) continue;
				}
			}
		}
		throw new js._Boot.HaxeError(new saturn.util.HaxeException("Unable to find region with required parameters"));
	}
	,getNumGC: function() {
		var seqLen = this.sequence.length;
		var gcNum = 0;
		var _g = 0;
		while(_g < seqLen) {
			var i = _g++;
			var nuc = this.sequence.charAt(i);
			if(nuc == "G" || nuc == "C") gcNum++;
		}
		return gcNum;
	}
	,getInverse: function() {
		var newSequence_b = "";
		var seqLen = this.sequence.length;
		var _g = 0;
		while(_g < seqLen) {
			var i = _g++;
			var j = seqLen - i - 1;
			var nuc = this.sequence.charAt(j);
			if(nuc == null) newSequence_b += "null"; else newSequence_b += "" + nuc;
		}
		return newSequence_b;
	}
	,getComplement: function() {
		var newSequence_b = "";
		var seqLen = this.sequence.length;
		var _g = 0;
		while(_g < seqLen) {
			var i = _g++;
			var nuc = this.sequence.charAt(i);
			switch(nuc) {
			case "A":
				nuc = "T";
				break;
			case "T":
				nuc = "A";
				break;
			case "G":
				nuc = "C";
				break;
			case "C":
				nuc = "G";
				break;
			}
			if(nuc == null) newSequence_b += "null"; else newSequence_b += "" + nuc;
		}
		return newSequence_b;
	}
	,getInverseComplement: function() {
		var newSequence_b = "";
		var seqLen = this.sequence.length;
		var _g = 0;
		while(_g < seqLen) {
			var i = _g++;
			var j = seqLen - i - 1;
			var nuc = this.sequence.charAt(j);
			switch(nuc) {
			case "A":
				nuc = "T";
				break;
			case "T":
				nuc = "A";
				break;
			case "G":
				nuc = "C";
				break;
			case "C":
				nuc = "G";
				break;
			}
			if(nuc == null) newSequence_b += "null"; else newSequence_b += "" + nuc;
		}
		return newSequence_b;
	}
	,getFirstStartCodonPosition: function(geneticCode) {
		var geneticCode1 = saturn.core.GeneticCodeRegistry.getRegistry().getGeneticCodeByEnum(geneticCode);
		var codons = geneticCode1.getStartCodons();
		var minStartPos = -1;
		var $it0 = codons.keys();
		while( $it0.hasNext() ) {
			var codon = $it0.next();
			var index = this.sequence.indexOf(codon);
			if(index > -1) {
				if(minStartPos == -1 || minStartPos > index) minStartPos = index;
			}
		}
		return minStartPos;
	}
	,getTranslation: function(geneticCode,offSetPosition,stopAtFirstStop) {
		if(offSetPosition == null) offSetPosition = 0;
		if(!this.canHaveCodons()) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Unable to translate a sequence with less than 3 nucleotides"));
		var proteinSequenceBuffer_b = "";
		var seqLength = this.sequence.length;
		var finalCodonPosition = seqLength - (seqLength - offSetPosition) % 3;
		var geneticCode1 = saturn.core.GeneticCodeRegistry.getRegistry().getGeneticCodeByEnum(geneticCode);
		var startIndex = offSetPosition;
		var stopCodons = geneticCode1.getStopCodons();
		while(startIndex < finalCodonPosition) {
			var endIndex = startIndex + 3;
			var codon = this.sequence.substring(startIndex,endIndex);
			var code = geneticCode1.lookupCodon(codon);
			if(stopAtFirstStop && code == "!") break;
			if(code == null) proteinSequenceBuffer_b += "null"; else proteinSequenceBuffer_b += "" + code;
			startIndex = endIndex;
		}
		return proteinSequenceBuffer_b;
	}
	,getFrameTranslation: function(geneticCode,frame) {
		if(this.sequence == null) return null;
		var offSetPos = 0;
		if(frame == saturn.core.Frame.TWO) offSetPos = 1; else if(frame == saturn.core.Frame.THREE) offSetPos = 2;
		return this.getTranslation(geneticCode,offSetPos,true);
	}
	,getThreeFrameTranslation: function(geneticCode) {
		var threeFrameTranslations = new haxe.ds.StringMap();
		var value = this.getFrameTranslation(geneticCode,saturn.core.Frame.ONE);
		threeFrameTranslations.set(Std.string(saturn.core.Frame.ONE),value);
		var value1 = this.getFrameTranslation(geneticCode,saturn.core.Frame.TWO);
		threeFrameTranslations.set(Std.string(saturn.core.Frame.TWO),value1);
		var value2 = this.getFrameTranslation(geneticCode,saturn.core.Frame.THREE);
		threeFrameTranslations.set(Std.string(saturn.core.Frame.THREE),value2);
		return threeFrameTranslations;
	}
	,getSixFrameTranslation: function(geneticCode) {
		var forwardFrames = this.getThreeFrameTranslation(geneticCode);
		var dnaSeq = this.getInverseComplement();
		var inverseComplementDNAObj = new saturn.core.DNA(dnaSeq);
		var reverseFrames = inverseComplementDNAObj.getThreeFrameTranslation(geneticCode);
		var value;
		value = __map_reserved.ONE != null?reverseFrames.getReserved("ONE"):reverseFrames.h["ONE"];
		if(__map_reserved.ONE_IC != null) forwardFrames.setReserved("ONE_IC",value); else forwardFrames.h["ONE_IC"] = value;
		var value1;
		value1 = __map_reserved.TWO != null?reverseFrames.getReserved("TWO"):reverseFrames.h["TWO"];
		if(__map_reserved.TWO_IC != null) forwardFrames.setReserved("TWO_IC",value1); else forwardFrames.h["TWO_IC"] = value1;
		var value2;
		value2 = __map_reserved.THREE != null?reverseFrames.getReserved("THREE"):reverseFrames.h["THREE"];
		if(__map_reserved.THREE_IC != null) forwardFrames.setReserved("THREE_IC",value2); else forwardFrames.h["THREE_IC"] = value2;
		return forwardFrames;
	}
	,getFirstStartCodonPositionByFrame: function(geneticCode,frame) {
		var startCodons = this.getStartCodonPositions(geneticCode,frame,true);
		if(startCodons.length == 0) return -1; else return startCodons[0];
	}
	,getStartCodonPositions: function(geneticCode,frame,stopAtFirst) {
		var offSet = 0;
		if(frame == saturn.core.Frame.TWO) offSet = 1; else if(frame == saturn.core.Frame.THREE) offSet = 2;
		var seqLength = this.sequence.length;
		var startingIndex = offSet;
		if(seqLength < startingIndex + 3) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Insufficient DNA length to find codon start position for frame " + Std.string(frame)));
		var startCodonPositions = [];
		var finalCodonPosition = seqLength - (seqLength - offSet) % 3;
		var geneticCode1 = saturn.core.GeneticCodeRegistry.getRegistry().getGeneticCodeByEnum(geneticCode);
		var startIndex = startingIndex;
		while(startIndex < finalCodonPosition) {
			var endIndex = startIndex + 3;
			var codon = this.sequence.substring(startIndex,endIndex);
			if(geneticCode1.isStartCodon(codon)) {
				startCodonPositions.push(startIndex);
				if(stopAtFirst) break;
			}
			startIndex = endIndex;
		}
		return startCodonPositions;
	}
	,getFirstStopCodonPosition: function(geneticCode,frame) {
		var startCodons = this.getStopCodonPositions(geneticCode,frame,true);
		if(startCodons.isEmpty()) return -1; else return startCodons.first();
	}
	,getStopCodonPositions: function(geneticCode,frame,stopAtFirst) {
		var offSet = 0;
		if(frame == saturn.core.Frame.TWO) offSet = 1; else if(frame == saturn.core.Frame.THREE) offSet = 2;
		var seqLength = this.sequence.length;
		var startingIndex = offSet;
		if(seqLength < startingIndex + 3) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Insufficient DNA length to find codon start position for frame " + Std.string(frame)));
		var startCodonPositions = new List();
		var finalCodonPosition = seqLength - (seqLength - offSet) % 3;
		var geneticCode1 = saturn.core.GeneticCodeRegistry.getRegistry().getGeneticCodeByEnum(geneticCode);
		var startIndex = startingIndex;
		while(startIndex < finalCodonPosition) {
			var endIndex = startIndex + 3;
			var codon = this.sequence.substring(startIndex,endIndex);
			if(geneticCode1.isStopCodon(codon)) {
				startCodonPositions.add(startIndex);
				if(stopAtFirst) break;
			}
			startIndex = endIndex;
		}
		return startCodonPositions;
	}
	,canHaveCodons: function() {
		if(this.sequence.length >= 3) return true; else return false;
	}
	,getFrameRegion: function(frame,start,stop) {
		var dnaStart;
		var dnaStop;
		if(frame == saturn.core.Frame.ONE) {
			dnaStart = start * 3 - 2;
			dnaStop = stop * 3;
		} else if(frame == saturn.core.Frame.TWO) {
			dnaStart = start * 3 - 1;
			dnaStop = stop * 3 + 1;
		} else if(frame == saturn.core.Frame.THREE) {
			dnaStart = start * 3;
			dnaStop = stop * 3 + 2;
		} else return null;
		return this.sequence.substring(dnaStart - 1,dnaStop);
	}
	,mutateResidue: function(frame,geneticCode,pos,mutAA) {
		var nucPos = this.getCodonStartPosition(frame,pos);
		if(nucPos >= this.sequence.length) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Sequence not long enough for requested frame and position"));
		var geneticCode1 = saturn.core.GeneticCodeRegistry.getRegistry().getGeneticCodeByEnum(geneticCode);
		var codon = geneticCode1.getFirstCodon(mutAA);
		return this.sequence.substring(0,nucPos - 1) + codon + this.sequence.substring(nucPos + 2,this.sequence.length);
	}
	,getCodonStartPosition: function(frame,start) {
		var dnaStart;
		if(frame == saturn.core.Frame.ONE) dnaStart = start * 3 - 2; else if(frame == saturn.core.Frame.TWO) dnaStart = start * 3 - 1; else if(frame == saturn.core.Frame.THREE) dnaStart = start * 3; else return null;
		return dnaStart;
	}
	,getCodonStopPosition: function(frame,stop) {
		var dnaStop;
		if(frame == saturn.core.Frame.ONE) dnaStop = stop * 3; else if(frame == saturn.core.Frame.TWO) dnaStop = stop * 3 + 1; else if(frame == saturn.core.Frame.THREE) dnaStop = stop * 3 + 2; else return null;
		return dnaStop;
	}
	,getRegion: function(start,stop) {
		return HxOverrides.substr(this.sequence,start - 1,stop - start + 1);
	}
	,getFrom: function(start,len) {
		return HxOverrides.substr(this.sequence,start - 1,len);
	}
	,findMatchingLocuses: function(regex,mode) {
		var direction = saturn.core.Direction.Forward;
		if(StringTools.startsWith(regex,"r")) {
			var templateIC = new saturn.core.DNA(this.getInverseComplement());
			var regexIC = regex.substring(1,regex.length);
			var positions = templateIC.findMatchingLocuses(regexIC,mode);
			var length = this.getLength();
			var _g = 0;
			while(_g < positions.length) {
				var position = positions[_g];
				++_g;
				var originalStart = position.start;
				position.start = length - 1 - position.end;
				position.end = length - 1 - originalStart;
				if(position.missMatchPositions != null) {
					var fPositions = [];
					var _g1 = 0;
					var _g2 = position.missMatchPositions;
					while(_g1 < _g2.length) {
						var position1 = _g2[_g1];
						++_g1;
						fPositions.push(length - 1 - position1);
					}
					position.missMatchPositions = fPositions;
				}
			}
			return positions;
		} else return saturn.core.molecule.Molecule.prototype.findMatchingLocuses.call(this,regex);
	}
	,__class__: saturn.core.DNA
});
saturn.core.PCRProduct = $hxClasses["saturn.core.PCRProduct"] = function(srcDNA,fPrimer,rPrimer) {
	saturn.core.DNA.call(this,"");
	this.theSrcDNA = srcDNA;
	this.theReversePrimer = rPrimer;
	this.theForwardPrimer = fPrimer;
	if(srcDNA != null) this.calculateProduct();
};
saturn.core.PCRProduct.__name__ = ["saturn","core","PCRProduct"];
saturn.core.PCRProduct.__super__ = saturn.core.DNA;
saturn.core.PCRProduct.prototype = $extend(saturn.core.DNA.prototype,{
	theSequenceMinusExtensions: null
	,theForwardPrimer: null
	,theReversePrimer: null
	,theSrcDNA: null
	,setForwardPrimer: function(fPrimer) {
		this.theForwardPrimer = fPrimer;
	}
	,setReversePrimer: function(rPrimer) {
		this.theReversePrimer = rPrimer;
	}
	,setTemplate: function(template) {
		this.theSrcDNA = template;
	}
	,calculateProduct: function() {
		var fPrimerSequence = this.theForwardPrimer.getPrimerSequence(false);
		var fLocusCount = this.theSrcDNA.getLocusCount(fPrimerSequence);
		if(fLocusCount > 1) throw new js._Boot.HaxeError(new saturn.core.exceptions.MultiLocusPrimerException("The forward primer sequence " + fPrimerSequence + " is present " + fLocusCount + " in the source DNA sequence",this.theForwardPrimer));
		var startPosition = this.theSrcDNA.getFirstPosition(this.theForwardPrimer.getPrimerSequence(false));
		if(startPosition == -1) throw new js._Boot.HaxeError(new saturn.core.exceptions.LocusPrimerMissingException("The forward primer sequence " + fPrimerSequence + " is not present in the source DNA sequence",this.theForwardPrimer));
		var icSrcDNA = new saturn.core.DNA(this.theSrcDNA.getInverseComplement());
		var rPrimerSequence = this.theReversePrimer.getPrimerSequence(false);
		var rLocusCount = icSrcDNA.getLocusCount(rPrimerSequence);
		if(rLocusCount > 1) throw new js._Boot.HaxeError(new saturn.core.exceptions.MultiLocusPrimerException("The reverse primer sequence " + rPrimerSequence + " is present " + rLocusCount + " in the source DNA sequence",this.theReversePrimer));
		var endPosition = icSrcDNA.getFirstPosition(this.theReversePrimer.getPrimerSequence(false));
		if(endPosition > -1) endPosition = this.theSrcDNA.getLength() - endPosition; else throw new js._Boot.HaxeError(new saturn.core.exceptions.LocusPrimerMissingException("The reverse primer sequence " + rPrimerSequence + " is not present in the source DNA sequence",this.theReversePrimer));
		var fExtension = this.theForwardPrimer.get5PrimeExtensionSequence();
		var rExtension = new saturn.core.DNA(this.theReversePrimer.get5PrimeExtensionSequence()).getInverseComplement();
		this.theSequenceMinusExtensions = this.theSrcDNA.getSequence().substring(startPosition,endPosition);
		this.setSequence(fExtension + this.theSequenceMinusExtensions + rExtension);
	}
	,getPCRProduct: function(includePrimerExtensions) {
		if(includePrimerExtensions) return this.getSequence(); else return this.theSequenceMinusExtensions;
	}
	,getForwardPrimer: function() {
		return this.theForwardPrimer;
	}
	,getReversePrimer: function() {
		return this.theReversePrimer;
	}
	,__class__: saturn.core.PCRProduct
});
saturn.core.Allele = $hxClasses["saturn.core.Allele"] = function(srcDNA,fPrimer,rPrimer) {
	saturn.core.PCRProduct.call(this,srcDNA,fPrimer,rPrimer);
};
saturn.core.Allele.__name__ = ["saturn","core","Allele"];
saturn.core.Allele.__super__ = saturn.core.PCRProduct;
saturn.core.Allele.prototype = $extend(saturn.core.PCRProduct.prototype,{
	__class__: saturn.core.Allele
});
saturn.core.BasePrimer = $hxClasses["saturn.core.BasePrimer"] = { __ename__ : ["saturn","core","BasePrimer"], __constructs__ : ["LIC_FORWARD","LIC_REVERSE","ATT_B1","ATT_B2"] };
saturn.core.BasePrimer.LIC_FORWARD = ["LIC_FORWARD",0];
saturn.core.BasePrimer.LIC_FORWARD.toString = $estr;
saturn.core.BasePrimer.LIC_FORWARD.__enum__ = saturn.core.BasePrimer;
saturn.core.BasePrimer.LIC_REVERSE = ["LIC_REVERSE",1];
saturn.core.BasePrimer.LIC_REVERSE.toString = $estr;
saturn.core.BasePrimer.LIC_REVERSE.__enum__ = saturn.core.BasePrimer;
saturn.core.BasePrimer.ATT_B1 = ["ATT_B1",2];
saturn.core.BasePrimer.ATT_B1.toString = $estr;
saturn.core.BasePrimer.ATT_B1.__enum__ = saturn.core.BasePrimer;
saturn.core.BasePrimer.ATT_B2 = ["ATT_B2",3];
saturn.core.BasePrimer.ATT_B2.toString = $estr;
saturn.core.BasePrimer.ATT_B2.__enum__ = saturn.core.BasePrimer;
saturn.core.BlastDatabase = $hxClasses["saturn.core.BlastDatabase"] = { __ename__ : ["saturn","core","BlastDatabase"], __constructs__ : ["Constructs_DNA","Constructs_Protein"] };
saturn.core.BlastDatabase.Constructs_DNA = ["Constructs_DNA",0];
saturn.core.BlastDatabase.Constructs_DNA.toString = $estr;
saturn.core.BlastDatabase.Constructs_DNA.__enum__ = saturn.core.BlastDatabase;
saturn.core.BlastDatabase.Constructs_Protein = ["Constructs_Protein",1];
saturn.core.BlastDatabase.Constructs_Protein.toString = $estr;
saturn.core.BlastDatabase.Constructs_Protein.__enum__ = saturn.core.BlastDatabase;
saturn.core.Protein = $hxClasses["saturn.core.Protein"] = function(seq) {
	this.max_pH = 13;
	this.min_pH = 3;
	this.threshold = 0.1;
	this.lu_extinction = (function($this) {
		var $r;
		var _g = new haxe.ds.StringMap();
		if(__map_reserved.Y != null) _g.setReserved("Y",1490); else _g.h["Y"] = 1490;
		if(__map_reserved.W != null) _g.setReserved("W",5500); else _g.h["W"] = 5500;
		if(__map_reserved.C != null) _g.setReserved("C",125); else _g.h["C"] = 125;
		$r = _g;
		return $r;
	}(this));
	this.lu_charge = (function($this) {
		var $r;
		var _g = new haxe.ds.StringMap();
		if(__map_reserved.D != null) _g.setReserved("D",-1); else _g.h["D"] = -1;
		if(__map_reserved.E != null) _g.setReserved("E",-1); else _g.h["E"] = -1;
		if(__map_reserved.H != null) _g.setReserved("H",1); else _g.h["H"] = 1;
		if(__map_reserved.Y != null) _g.setReserved("Y",-1); else _g.h["Y"] = -1;
		if(__map_reserved.K != null) _g.setReserved("K",1); else _g.h["K"] = 1;
		if(__map_reserved.R != null) _g.setReserved("R",1); else _g.h["R"] = 1;
		if(__map_reserved.C != null) _g.setReserved("C",-1); else _g.h["C"] = -1;
		if(__map_reserved["N-Term"] != null) _g.setReserved("N-Term",1); else _g.h["N-Term"] = 1;
		if(__map_reserved["C-Term"] != null) _g.setReserved("C-Term",-1); else _g.h["C-Term"] = -1;
		$r = _g;
		return $r;
	}(this));
	this.lu_pKa = (function($this) {
		var $r;
		var _g = new haxe.ds.StringMap();
		if(__map_reserved.D != null) _g.setReserved("D",4.05); else _g.h["D"] = 4.05;
		if(__map_reserved.E != null) _g.setReserved("E",4.45); else _g.h["E"] = 4.45;
		if(__map_reserved.H != null) _g.setReserved("H",5.98); else _g.h["H"] = 5.98;
		if(__map_reserved.Y != null) _g.setReserved("Y",10); else _g.h["Y"] = 10;
		if(__map_reserved.K != null) _g.setReserved("K",10.4); else _g.h["K"] = 10.4;
		if(__map_reserved.R != null) _g.setReserved("R",12.5); else _g.h["R"] = 12.5;
		if(__map_reserved.C != null) _g.setReserved("C",9); else _g.h["C"] = 9;
		if(__map_reserved["N-Term"] != null) _g.setReserved("N-Term",8); else _g.h["N-Term"] = 8;
		if(__map_reserved["C-Term"] != null) _g.setReserved("C-Term",3.55); else _g.h["C-Term"] = 3.55;
		$r = _g;
		return $r;
	}(this));
	this.hydrophobicityLookUp = (function($this) {
		var $r;
		var _g = new haxe.ds.StringMap();
		if(__map_reserved.A != null) _g.setReserved("A",1.8); else _g.h["A"] = 1.8;
		if(__map_reserved.G != null) _g.setReserved("G",-0.4); else _g.h["G"] = -0.4;
		if(__map_reserved.M != null) _g.setReserved("M",1.9); else _g.h["M"] = 1.9;
		if(__map_reserved.S != null) _g.setReserved("S",-0.8); else _g.h["S"] = -0.8;
		if(__map_reserved.C != null) _g.setReserved("C",2.5); else _g.h["C"] = 2.5;
		if(__map_reserved.H != null) _g.setReserved("H",-3.2); else _g.h["H"] = -3.2;
		if(__map_reserved.N != null) _g.setReserved("N",-3.5); else _g.h["N"] = -3.5;
		if(__map_reserved.T != null) _g.setReserved("T",-0.7); else _g.h["T"] = -0.7;
		if(__map_reserved.D != null) _g.setReserved("D",-3.5); else _g.h["D"] = -3.5;
		if(__map_reserved.I != null) _g.setReserved("I",4.5); else _g.h["I"] = 4.5;
		if(__map_reserved.P != null) _g.setReserved("P",-1.6); else _g.h["P"] = -1.6;
		if(__map_reserved.V != null) _g.setReserved("V",4.2); else _g.h["V"] = 4.2;
		if(__map_reserved.E != null) _g.setReserved("E",-3.5); else _g.h["E"] = -3.5;
		if(__map_reserved.K != null) _g.setReserved("K",-3.9); else _g.h["K"] = -3.9;
		if(__map_reserved.Q != null) _g.setReserved("Q",-3.5); else _g.h["Q"] = -3.5;
		if(__map_reserved.W != null) _g.setReserved("W",-0.9); else _g.h["W"] = -0.9;
		if(__map_reserved.F != null) _g.setReserved("F",2.8); else _g.h["F"] = 2.8;
		if(__map_reserved.L != null) _g.setReserved("L",3.8); else _g.h["L"] = 3.8;
		if(__map_reserved.R != null) _g.setReserved("R",-4.5); else _g.h["R"] = -4.5;
		if(__map_reserved.Y != null) _g.setReserved("Y",-1.3); else _g.h["Y"] = -1.3;
		$r = _g;
		return $r;
	}(this));
	saturn.core.molecule.Molecule.call(this,seq);
};
saturn.core.Protein.__name__ = ["saturn","core","Protein"];
saturn.core.Protein._insertGene = function(geneId,source,cb) {
	var provider = saturn.core.Util.getProvider();
	provider.getById(geneId,saturn.core.domain.Entity,function(obj,err) {
		if(err != null) cb(err); else if(obj != null) cb(null); else {
			var gene = new saturn.core.domain.Entity();
			gene.entityId = geneId;
			gene.source = new saturn.core.domain.DataSource();
			gene.source.name = source;
			gene.entityType = new saturn.core.EntityType();
			gene.entityType.name = "DNA";
			saturn.core.EUtils.getGeneInfo(Std.parseInt(geneId),function(err1,info) {
				gene.altName = info.symbol;
				gene.description = info.description;
				provider.insertObjects([gene],function(err2) {
					cb(err2);
				});
			});
		}
	});
};
saturn.core.Protein.insertTranslation = function(dnaId,dnaAltName,dnaSeq,dnaSource,protId,protAltName,protSeq,protSource,geneId,geneSource,cb) {
	var provider = saturn.core.Util.getProvider();
	saturn.core.Protein._insertGene(geneId,geneSource,function(err) {
		if(err != null) cb(err); else {
			var dna = new saturn.core.domain.Entity();
			dna.entityId = dnaId;
			dna.altName = dnaAltName;
			dna.source = new saturn.core.domain.DataSource();
			dna.source.name = dnaSource;
			dna.entityType = new saturn.core.EntityType();
			dna.entityType.name = "DNA";
			var dna_mol = new saturn.core.domain.Molecule();
			dna_mol.entity = dna;
			dna_mol.sequence = dnaSeq;
			var annotation = new saturn.core.domain.MoleculeAnnotation();
			annotation.entity = dna;
			annotation.referent = new saturn.core.domain.Entity();
			annotation.referent.entityId = geneId;
			annotation.referent.source = new saturn.core.domain.DataSource();
			annotation.referent.source.name = "GENE";
			var prot = new saturn.core.domain.Entity();
			prot.entityId = protId;
			prot.altName = protAltName;
			prot.source = new saturn.core.domain.DataSource();
			prot.source.name = protSource;
			prot.entityType = new saturn.core.EntityType();
			prot.entityType.name = "PROTEIN";
			var prot_mol = new saturn.core.domain.Molecule();
			prot_mol.entity = prot;
			prot_mol.sequence = protSeq;
			var reaction = new saturn.core.Reaction();
			reaction.name = dnaId + "-TRANS";
			reaction.reactionType = new saturn.core.ReactionType();
			reaction.reactionType.name = "TRANSLATION";
			prot.reaction = reaction;
			var reactionComp = new saturn.core.ReactionComponent();
			reactionComp.entity = dna;
			reactionComp.reactionRole = new saturn.core.ReactionRole();
			reactionComp.reactionRole.name = "TEMPLATE";
			reactionComp.reaction = reaction;
			reactionComp.position = 1;
			provider.insertObjects([dna],function(err1) {
				if(err1 != null) cb(err1); else provider.insertObjects([dna_mol],function(err2) {
					if(err2 != null) cb(err2); else provider.insertObjects([reaction],function(err3) {
						if(err3 != null) cb(err3); else provider.insertObjects([reactionComp],function(err4) {
							if(err4 != null) cb(err4); else provider.insertObjects([prot],function(err5) {
								if(err5 != null) cb(err5); else provider.insertObjects([prot_mol],function(err6) {
									if(err6 != null) cb(err6); else provider.insertObjects([annotation],function(err7) {
										if(err7 != null) saturn.core.Util.debug(err7);
										cb(err7);
									});
								});
							});
						});
					});
				});
			});
		}
	});
};
saturn.core.Protein.isProtein = function(sequence) {
	var seqLen = sequence.length;
	var valid_res = saturn.core.GeneticCodeRegistry.getDefault().getAAToCodonTable();
	var _g = 0;
	while(_g < seqLen) {
		var i = _g++;
		var res = sequence.charAt(i).toUpperCase();
		if(!(__map_reserved[res] != null?valid_res.existsReserved(res):valid_res.h.hasOwnProperty(res))) return false;
	}
	return true;
};
saturn.core.Protein.__super__ = saturn.core.molecule.Molecule;
saturn.core.Protein.prototype = $extend(saturn.core.molecule.Molecule.prototype,{
	dna: null
	,coordinates: null
	,hydrophobicityLookUp: null
	,lu_pKa: null
	,lu_charge: null
	,lu_extinction: null
	,threshold: null
	,min_pH: null
	,max_pH: null
	,setSequence: function(sequence) {
		saturn.core.molecule.Molecule.prototype.setSequence.call(this,sequence);
		if(sequence != null) {
			var mSet = saturn.core.molecule.MoleculeSetRegistry.getStandardMoleculeSet();
			var mw = mSet.getMolecule("H2O").getFloatAttribute(saturn.core.molecule.MoleculeFloatAttribute.MW);
			var _g1 = 0;
			var _g = this.sequence.length;
			while(_g1 < _g) {
				var i = _g1++;
				var molecule = mSet.getMolecule(this.sequence.charAt(i));
				if(molecule != null) mw += molecule.getFloatAttribute(saturn.core.molecule.MoleculeFloatAttribute.MW_CONDESATION); else {
					mw = -1;
					break;
				}
			}
			this.setFloatAttribute(saturn.core.molecule.MoleculeFloatAttribute.MW,mw);
		}
		if(this.isLinked()) {
			var d = this.getParent();
			if(d != null) d.proteinSequenceUpdated(this.sequence);
		}
	}
	,getHydrophobicity: function() {
		var proteinSequence = this.sequence;
		var seqLength = this.sequence.length;
		var totalGravy = 0.0;
		var averageGravy = 0.0;
		var _g = 0;
		while(_g < seqLength) {
			var i = _g++;
			var aminoAcid = HxOverrides.substr(proteinSequence,i,1);
			var hydroValue = this.hydrophobicityLookUp.get(aminoAcid);
			totalGravy += hydroValue;
		}
		averageGravy = totalGravy / seqLength;
		return averageGravy;
	}
	,setDNA: function(dna) {
		this.dna = dna;
	}
	,dnaSequenceUpdated: function(sequence) {
	}
	,getDNA: function() {
		return this.dna;
	}
	,setReferenceCoordinates: function(coordinates) {
		this.coordinates = coordinates;
	}
	,getReferenceCoordinates: function() {
		return this.coordinates;
	}
	,getAminoAcidCharge: function(aa,mid_pH) {
		var aminoAcid = aa;
		var pH = mid_pH;
		var ratio = 1 / (1 + Math.pow(10,pH - this.lu_pKa.get(aminoAcid)));
		if(this.lu_charge.get(aminoAcid) == 1) return ratio; else return ratio - 1;
	}
	,getProteinCharge: function(mid_pH) {
		var seqLength = this.sequence.length;
		var proteinSequence = this.sequence;
		var aa = "N-Term";
		var proteinCharge = this.getAminoAcidCharge(aa,mid_pH);
		aa = "C-Term";
		proteinCharge += this.getAminoAcidCharge(aa,mid_pH);
		var _g = 0;
		while(_g < seqLength) {
			var i = _g++;
			aa = HxOverrides.substr(proteinSequence,i,1);
			if(this.lu_pKa.exists(aa)) proteinCharge += this.getAminoAcidCharge(aa,mid_pH);
		}
		return proteinCharge;
	}
	,getpI: function() {
		var proteinSequence = this.sequence;
		while(true) {
			var mid_pH = 0.5 * (this.max_pH + this.min_pH);
			var proteinCharge = this.getProteinCharge(mid_pH);
			if(proteinCharge > this.threshold) this.min_pH = mid_pH; else if(proteinCharge < -this.threshold) this.max_pH = mid_pH; else return mid_pH;
		}
	}
	,getExtinctionNonReduced: function() {
		var proteinSequence = this.sequence;
		var seqLength = this.sequence.length;
		var aa;
		var extinctionNonReduced = 0.0;
		var numberCysteines = 0.0;
		var pairsCysteins = 0.0;
		var _g = 0;
		while(_g < seqLength) {
			var i = _g++;
			aa = HxOverrides.substr(proteinSequence,i,1);
			if(this.lu_extinction.exists(aa) && aa != "C") extinctionNonReduced += this.lu_extinction.get(aa);
			if(aa == "C") numberCysteines += 1;
		}
		if(numberCysteines % 2 == 0) pairsCysteins = numberCysteines / 2; else pairsCysteins = numberCysteines / 2 - 0.5;
		extinctionNonReduced += pairsCysteins * this.lu_extinction.get("C");
		return extinctionNonReduced;
	}
	,getExtinctionReduced: function() {
		var proteinSequence = this.sequence;
		var seqLength = this.sequence.length;
		var aa;
		var extinctionReduced = 0.0;
		var _g = 0;
		while(_g < seqLength) {
			var i = _g++;
			aa = HxOverrides.substr(proteinSequence,i,1);
			if(this.lu_extinction.exists(aa) && aa != "C") extinctionReduced += this.lu_extinction.get(aa);
		}
		return extinctionReduced;
	}
	,__class__: saturn.core.Protein
});
saturn.core.CleavageSite = $hxClasses["saturn.core.CleavageSite"] = function(seq) {
	saturn.core.Protein.call(this,seq);
};
saturn.core.CleavageSite.__name__ = ["saturn","core","CleavageSite"];
saturn.core.CleavageSite.__super__ = saturn.core.Protein;
saturn.core.CleavageSite.prototype = $extend(saturn.core.Protein.prototype,{
	__class__: saturn.core.CleavageSite
});
saturn.core.ClustalOmegaParser = $hxClasses["saturn.core.ClustalOmegaParser"] = function() { };
saturn.core.ClustalOmegaParser.__name__ = ["saturn","core","ClustalOmegaParser"];
saturn.core.ClustalOmegaParser.read = function(content) {
	var msaMap = new haxe.ds.StringMap();
	var wr = new EReg("\\s+","g");
	if(content != null) {
		var lines = content.split("\n");
		var seqOrder = [];
		var s = -1;
		var _g1 = 3;
		var _g = lines.length;
		while(_g1 < _g) {
			var i = _g1++;
			var line = lines[i];
			line = StringTools.replace(line,"\n","");
			line = StringTools.replace(line,"\r","");
			if(line != "") {
				var cols = wr.split(line);
				if(cols.length <= 1) continue; else if(cols[0] == "") cols[0] = " ";
				if(s == -1) s = line.length - cols[1].length;
				if(!msaMap.exists(cols[0])) {
					var value = HxOverrides.substr(line,s,line.length);
					msaMap.set(cols[0],value);
					seqOrder.push(cols[0]);
				} else {
					var value1 = msaMap.get(cols[0]) + HxOverrides.substr(line,s,line.length);
					msaMap.set(cols[0],value1);
				}
			}
		}
		return new saturn.core.MSA(msaMap,seqOrder);
	} else return new saturn.core.MSA();
};
saturn.core.ClustalOmegaParser.readStartStop = function(content,consreuctIdLength) {
	var alignmentSymbols = "";
	var startEndPos = [];
	var lengthOfLeadingChars = 0;
	var alignmentConstruct = "";
	var alignmentTarget = "";
	var alignmentSymbols1 = "";
	var targetOffset = 0;
	var lines = content.split("\n");
	var firstConstructLine = lines[3];
	var _g1 = consreuctIdLength;
	var _g = firstConstructLine.length;
	while(_g1 < _g) {
		var i = _g1++;
		if(firstConstructLine.charAt(i) != " ") {
			lengthOfLeadingChars = i;
			break;
		}
	}
	var lineNumber = 4;
	while(lineNumber < lines.length) {
		var line = lines[lineNumber];
		line = StringTools.replace(line,"\n","");
		line = StringTools.replace(line,"\r","");
		line = line.substring(lengthOfLeadingChars);
		alignmentTarget = alignmentTarget + line;
		lineNumber += 4;
	}
	var lineNumber1 = 5;
	while(lineNumber1 < lines.length) {
		var line1 = lines[lineNumber1];
		line1 = StringTools.replace(line1,"\n","");
		line1 = StringTools.replace(line1,"\r","");
		line1 = line1.substring(lengthOfLeadingChars);
		alignmentSymbols1 = alignmentSymbols1 + line1;
		lineNumber1 += 4;
	}
	var lineNumber2 = 3;
	while(lineNumber2 < lines.length) {
		var line2 = lines[lineNumber2];
		line2 = StringTools.replace(line2,"\n","");
		line2 = StringTools.replace(line2,"\r","");
		line2 = line2.substring(lengthOfLeadingChars);
		alignmentConstruct = alignmentConstruct + line2;
		lineNumber2 += 4;
	}
	var _g11 = 0;
	var _g2 = alignmentTarget.length;
	while(_g11 < _g2) {
		var i1 = _g11++;
		if(alignmentTarget.charAt(i1) != "-") {
			targetOffset = i1;
			break;
		}
	}
	var startPos = alignmentSymbols1.indexOf("*") - targetOffset;
	var endPos = alignmentSymbols1.lastIndexOf("*") - targetOffset;
	var alignmentTargetSub = alignmentTarget.substring(startPos + targetOffset,endPos + targetOffset + 1);
	var numberOfGaps = 0;
	var _g12 = 0;
	var _g3 = alignmentTargetSub.length;
	while(_g12 < _g3) {
		var i2 = _g12++;
		if(alignmentTargetSub.charAt(i2) == "-") numberOfGaps += 1;
	}
	startEndPos.push(startPos);
	startEndPos.push(endPos);
	startEndPos.push(numberOfGaps);
	return startEndPos;
};
saturn.core.Table = $hxClasses["saturn.core.Table"] = function() {
};
saturn.core.Table.__name__ = ["saturn","core","Table"];
saturn.core.Table.prototype = {
	tableDefinition: null
	,errorColumns: null
	,fixedRowHeight: null
	,name: null
	,setName: function(name) {
		this.name = name;
		if(this.tableDefinition != null) this.tableDefinition.title = name;
	}
	,getName: function() {
		return this.name;
	}
	,setErrorColumns: function(columns) {
		this.errorColumns = columns;
	}
	,getErrorColumns: function() {
		return this.errorColumns;
	}
	,setFixedRowHeight: function(height) {
		this.fixedRowHeight = height;
	}
	,getFixedRowHeight: function() {
		return this.fixedRowHeight;
	}
	,setTitle: function(title) {
		this.tableDefinition.title = title;
	}
	,setData: function(data,fieldConfig) {
		var obj = data[0];
		var columnDefs = [];
		var _g = 0;
		var _g1 = Reflect.fields(obj);
		while(_g < _g1.length) {
			var field = _g1[_g];
			++_g;
			var filterType = "string";
			var _g3 = 0;
			var _g2 = data.length;
			while(_g3 < _g2) {
				var i = _g3++;
				var obj1 = data[i];
				var value = Reflect.field(obj,field);
				if(value != null) {
					if(js.Boot.__instanceof(value,Date)) filterType = "date"; else if(saturn.core.Table.r_d.match(value)) filterType = "numeric";
					break;
				}
			}
			var config = { text : field, dataIndex : field, editor : null, filter : { type : filterType}};
			if(fieldConfig != null && Object.prototype.hasOwnProperty.call(fieldConfig,field)) {
				if(Reflect.hasField(Reflect.field(fieldConfig,field),"renderer")) Reflect.setField(config,"renderer",Reflect.field(Reflect.field(fieldConfig,field),"renderer"));
				if(Reflect.hasField(Reflect.field(fieldConfig,field),"editor")) Reflect.setField(config,"editor",Reflect.field(Reflect.field(fieldConfig,field),"editor"));
				if(Reflect.hasField(Reflect.field(fieldConfig,field),"xtype")) Reflect.setField(config,"xtype",Reflect.field(Reflect.field(fieldConfig,field),"xtype"));
				if(Reflect.hasField(Reflect.field(fieldConfig,field),"dataindex")) Reflect.setField(config,"dataindex",Reflect.field(Reflect.field(fieldConfig,field),"dataindex"));
				if(Reflect.hasField(Reflect.field(fieldConfig,field),"text")) Reflect.setField(config,"text",Reflect.field(Reflect.field(fieldConfig,field),"text"));
				if(Reflect.hasField(Reflect.field(fieldConfig,field),"default")) Reflect.setField(config,"defaultValue",Reflect.field(Reflect.field(fieldConfig,field),"default"));
			}
			columnDefs.push(config);
		}
		this.tableDefinition = { columnDefs : columnDefs, title : "Assay Results", data : data, raw : null};
	}
	,getData: function() {
		return this.tableDefinition.data;
	}
	,updateData: function(data) {
		this.tableDefinition.data = data;
	}
	,__class__: saturn.core.Table
};
saturn.core.ComplexPlan = $hxClasses["saturn.core.ComplexPlan"] = function(useExample) {
	if(useExample == null) useExample = false;
	saturn.core.Table.call(this);
	this.setErrorColumns([]);
	var exampleData = null;
	if(useExample) exampleData = [{ 'Select' : true, 'Construct ID 1' : "XXXXXX-c265", 'Construct ID 2' : "XXXXXX-c009", 'Construct ID 3' : "", 'Construct ID 4' : "", 'ELN ID' : "", 'Plate Name' : "MultiBac-Plate-3", 'Plate Well' : "H05", 'Target ID' : "", 'Entry Clone ID' : "", 'Allele ID' : "", 'Construct ID' : ""}]; else exampleData = [{ 'Select' : true, 'Construct ID 1' : "", 'Construct ID 2' : "", 'Construct ID 3' : "", 'Construct ID 4' : "", 'ELN ID' : "", 'Target ID' : "", 'Entry Clone ID' : "", 'Allele ID' : "", 'Construct ID' : "", 'Plate Name' : "", 'Plate Well' : ""}];
	this.setData(exampleData,{ 'Select' : { 'xtype' : "checkcolumn", 'name' : "checkbox_name", 'dataindex' : "Select"}, 'Construct ID 1' : { 'editor' : "textfield"}, 'Construct ID 2' : { 'editor' : "textfield"}, 'Construct ID 3' : { 'editor' : "textfield"}, 'Construct ID 4' : { 'editor' : "textfield"}, 'Target ID' : { 'editor' : "textfield"}, 'Entry Clone ID' : { 'editor' : "textfield"}, 'Allele ID' : { 'editor' : "textfield"}, 'Construct ID' : { 'editor' : "textfield"}, 'ELN ID' : { 'editor' : "textfield"}, 'Plate Name' : { 'editor' : "textfield"}, 'Plate Well' : { 'editor' : "textfield"}});
	this.setName("Complex Plan");
};
saturn.core.ComplexPlan.__name__ = ["saturn","core","ComplexPlan"];
saturn.core.ComplexPlan.__super__ = saturn.core.Table;
saturn.core.ComplexPlan.prototype = $extend(saturn.core.Table.prototype,{
	provider: null
	,getProvider: function() {
		if(this.provider != null) return this.provider; else return saturn.client.WorkspaceApplication.getApplication().getProvider();
	}
	,save: function(cb) {
		var data = this.getData();
		var targetSet = new haxe.ds.StringMap();
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var targetId = Reflect.field(row,"Construct ID 1").split("-")[0];
			if(__map_reserved[targetId] != null) targetSet.setReserved(targetId,null); else targetSet.h[targetId] = null;
		}
		var targetIds = [];
		var $it0 = targetSet.keys();
		while( $it0.hasNext() ) {
			var targetId1 = $it0.next();
			targetIds.push(targetId1);
		}
		var provider = this.getProvider();
		provider.getByIds(targetIds,saturn.core.domain.SgcTarget,function(targets,err) {
			if(err != null) cb(err); else {
				var targetIdToTarget = new haxe.ds.StringMap();
				var _g1 = 0;
				while(_g1 < targets.length) {
					var target = targets[_g1];
					++_g1;
					targetIdToTarget.set(target.targetId,target);
				}
				var complexTargets = [];
				var complexEntryClones = [];
				var complexAlleles = [];
				var complexConstructs = [];
				var defaultVector = new saturn.core.domain.SgcVector();
				defaultVector.vectorId = "Mock-receptable-vector";
				var _g2 = 0;
				while(_g2 < data.length) {
					var row1 = data[_g2];
					++_g2;
					var targetId2 = Reflect.field(row1,"Construct ID 1").split("-")[0];
					var eln = Reflect.field(row1,"ELN");
					var targetObj;
					targetObj = __map_reserved[targetId2] != null?targetIdToTarget.getReserved(targetId2):targetIdToTarget.h[targetId2];
					var complexTargetId = Reflect.field(row1,"Target ID");
					var complexTargetObj = new saturn.core.domain.SgcTarget();
					complexTargetObj.targetId = complexTargetId;
					complexTargetObj.pi = targetObj.pi;
					complexTargetObj.geneId = targetObj.geneId;
					complexTargetObj.activeStatus = "10: Complex";
					var complexComponents = [];
					var maxComponents = 4;
					var _g11 = 1;
					while(_g11 < 4) {
						var i = _g11++;
						complexComponents.push(Reflect.field(row1,"Construct ID " + (i == null?"null":"" + i)));
					}
					complexTargetObj.complexComments = complexComponents.join(",");
					complexTargetObj.complex = "Yes";
					complexTargetObj.eln = eln;
					var complexEntryClone = new saturn.core.domain.SgcEntryClone();
					complexEntryClone.target = complexTargetObj;
					complexEntryClone.entryCloneId = Reflect.field(row1,"Entry Clone ID");
					complexEntryClone.elnId = eln;
					complexEntryClone.complex = "Yes";
					complexEntryClone.seqSource = "NA";
					complexEntryClone.sequenceConfirmed = "NA";
					var complexAllele = new saturn.core.domain.SgcAllele();
					complexAllele.elnId = eln;
					complexAllele.alleleId = Reflect.field(row1,"Allele ID");
					complexAllele.alleleStatus = "NA";
					complexAllele.complex = "Yes";
					complexAllele.entryClone = complexEntryClone;
					var allelePlate = new saturn.core.domain.SgcAllelePlate();
					allelePlate.plateName = Reflect.field(row1,"Plate Name");
					complexAllele.plate = allelePlate;
					complexAllele.plateWell = Reflect.field(row1,"Plate Well");
					var complexConstruct = new saturn.core.domain.SgcConstruct();
					complexConstruct.allele = complexAllele;
					complexConstruct.constructId = Reflect.field(row1,"Construct ID");
					complexConstruct.elnId = eln;
					complexConstruct.complex = "Yes";
					complexConstruct.vector = defaultVector;
					var constructPlate = new saturn.core.domain.SgcConstructPlate();
					constructPlate.plateName = allelePlate.plateName;
					complexConstruct.constructPlate = constructPlate;
					complexConstruct.wellId = complexAllele.plateWell;
					complexTargets.push(complexTargetObj);
					complexEntryClones.push(complexEntryClone);
					complexAlleles.push(complexAllele);
					complexConstructs.push(complexConstruct);
				}
				provider.insertOrUpdate(complexTargets,function(err1) {
					if(err1 == null) provider.insertOrUpdate(complexEntryClones,function(err2) {
						if(err2 == null) provider.insertOrUpdate(complexAlleles,function(err3) {
							if(err3 == null) provider.insertOrUpdate(complexConstructs,function(err4) {
								cb(err4);
							},true); else cb(err3);
						},true); else cb(err2);
					},true);
				},true);
			}
		});
	}
	,generateIds: function(cb) {
		var _g = this;
		var data = this.getData();
		var targetToNextId = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < data.length) {
			var row = data[_g1];
			++_g1;
			var constructId = Reflect.field(row,"Construct ID 1");
			var targetId = constructId.split("-")[0];
			if(__map_reserved[targetId] != null) targetToNextId.setReserved(targetId,0); else targetToNextId.h[targetId] = 0;
		}
		var targetList = [];
		var $it0 = targetToNextId.keys();
		while( $it0.hasNext() ) {
			var targetId1 = $it0.next();
			targetList.push(targetId1);
		}
		var next = null;
		next = function() {
			if(targetList.length == 0) {
				var _g2 = 0;
				while(_g2 < data.length) {
					var row1 = data[_g2];
					++_g2;
					var constructId1 = Reflect.field(row1,"Construct ID 1");
					var targetId3 = constructId1.split("-")[0];
					var nextId;
					nextId = (__map_reserved[targetId3] != null?targetToNextId.getReserved(targetId3):targetToNextId.h[targetId3]) + 1;
					var complexTargetId = "XX" + StringTools.lpad(nextId == null?"null":"" + nextId,"0",2) + targetId3;
					row1["Target ID"] = complexTargetId;
					row1["Entry Clone ID"] = complexTargetId + "-s001";
					row1["Allele ID"] = complexTargetId + "-a001";
					row1["Construct ID"] = complexTargetId + "-c001";
					if(__map_reserved[targetId3] != null) targetToNextId.setReserved(targetId3,nextId); else targetToNextId.h[targetId3] = nextId;
				}
				cb(null);
				return;
			}
			var targetId2 = targetList.pop();
			var clazz = Type.resolveClass("saturn.core.domain.SgcTarget");
			var query = new saturn.db.query_lang.Query(_g.getProvider());
			query.fetchRawResults();
			query.getSelect().add(new saturn.db.query_lang.Field(clazz,"targetId")["as"]("targetId"));
			query.getWhere().add(new saturn.db.query_lang.Field(clazz,"targetId").like(new saturn.db.query_lang.Value("%").concat("TREM2A")));
			query.run(function(targets,err) {
				if(err != null) cb(err); else {
					var regex = new EReg("XX(\\d\\d)" + targetId2,"");
					var leadingZeroRegEx = new EReg("^0+","");
					var maxValue = 0;
					var _g11 = 0;
					while(_g11 < targets.length) {
						var target = targets[_g11];
						++_g11;
						if(regex.match(target.targetId)) {
							var digit = regex.matched(1);
							var digitInt = Std.parseInt(leadingZeroRegEx.replace(digit,""));
							if(digitInt > maxValue) maxValue = digitInt;
						}
					}
					var value = ++maxValue;
					if(__map_reserved[targetId2] != null) targetToNextId.setReserved(targetId2,value); else targetToNextId.h[targetId2] = value;
					next();
				}
			});
		};
		next();
	}
	,__class__: saturn.core.ComplexPlan
});
saturn.core.ConstructDesignTable = $hxClasses["saturn.core.ConstructDesignTable"] = function(useExample) {
	this.minLengthExtended = 32;
	this.maxTMExtended = 75;
	this.minTMExtended = 60;
	this.maxLength = 50;
	this.minLength = 18;
	this.maxTM = 75;
	this.minTM = 45;
	saturn.core.Table.call(this);
	this.setErrorColumns(["Forward Error","Reverse Error","PCR Error","Construct Error"]);
	var exampleData = null;
	if(useExample) exampleData = [{ 'Select' : true, 'Plate Name' : "BioTech15", 'Allele ID' : "BRD1A-a001", 'Allele Well' : "A01", 'Construct ID' : "BRD1A-c001", 'Construct Well' : "A01", 'Vector Name' : "pNIC28-Bsa4", 'Entry Clone' : "BRD1A-s001", 'Restriction Site 1' : "Lic5", 'Restriction Site 2' : "Lic3", 'Start position' : 10, 'Stop position' : 60, 'ELN ID' : "PAGE15-00001", 'Forward Primer' : "BRD1A-f001", 'Reverse Primer' : "BRD1A-r001", 'Forward Seq' : "", 'Forward Error' : "", 'Reverse Seq' : "", 'Reverse Error' : "", 'Allele DNA Sequence' : "", 'Allele Protein Sequence' : "", 'PCR Error' : "", 'Construct Error' : "", 'Construct DNA' : "", 'Construct Protein' : "", 'Construct Protein (no tag)' : "", 'Construct Mass' : "", 'Construct Mass (no tag)' : ""}]; else exampleData = [{ 'Select' : true, 'Plate Name' : "", 'Allele ID' : "", 'Allele Well' : "", 'Construct ID' : "", 'Construct Well' : "", 'Vector Name' : "", 'Entry Clone' : "", 'Restriction Site 1' : "", 'Restriction Site 2' : "", 'Start position' : 0, 'Stop position' : 0, 'ELN ID' : "", 'Forward Primer' : "", 'Reverse Primer' : "", 'Forward Seq' : "", 'Forward Error' : "", 'Reverse Seq' : "", 'Reverse Error' : "", 'Allele DNA Sequence' : "", 'Allele Protein Sequence' : "", 'PCR Error' : "", 'Construct Error' : "", 'Construct DNA' : "", 'Construct Protein' : "", 'Construct Protein (no tag)' : "", 'Construct Mass' : "", 'Construct Mass (no tag)' : ""}];
	this.setData(exampleData,{ 'Select' : { 'xtype' : "checkcolumn", 'name' : "checkbox_name", 'dataindex' : "Select"}, 'Plate Name' : { 'editor' : "textfield"}, 'Allele ID' : { 'editor' : "textfield"}, 'Allele Well' : { 'editor' : "textfield"}, 'Construct ID' : { 'editor' : "textfield"}, 'Construct Well' : { 'editor' : "textfield"}, 'Vector Name' : { 'editor' : "textfield"}, 'Entry Clone' : { 'editor' : "textfield"}, 'Start position' : { 'editor' : "textfield"}, 'Stop position' : { 'editor' : "textfield"}, 'ELN ID' : { 'editor' : "textfield"}, 'Forward Primer' : { 'editor' : "textfield"}, 'Reverse Primer' : { 'editor' : "textfield"}, 'Forward Seq' : { 'editor' : "textfield"}, 'Reverse Seq' : { 'editor' : "textfield"}, 'Forward Error' : { 'editor' : "textfield"}, 'Reverse Error' : { 'editor' : "textfield"}, 'Allele DNA Sequence' : { 'editor' : "textfield"}, 'Allele Protein Sequence' : { 'editor' : "textfield"}, 'PCR Error' : { 'editor' : "textfield"}, 'Restriction Site 1' : { 'editor' : "textfield"}, 'Restriction Site 2' : { 'editor' : "textfield"}, 'Construct DNA' : { 'editor' : "textfield"}, 'Construct Protein' : { 'editor' : "textfield"}, 'Construct Protein (no tag)' : { 'editor' : "textfield"}, 'Construct Mass' : { 'editor' : "textfield"}, 'Construct Mass (no tag)' : { 'editor' : "textfield"}});
	this.setName("Construct Plan");
};
saturn.core.ConstructDesignTable.__name__ = ["saturn","core","ConstructDesignTable"];
saturn.core.ConstructDesignTable.getPcrKey = function(row) {
	var entryClone = Reflect.field(row,"Entry Clone");
	var startPos = Reflect.field(row,"Start position");
	var stopPos = Reflect.field(row,"Stop position");
	return entryClone + "-" + startPos + "-" + stopPos;
};
saturn.core.ConstructDesignTable.__super__ = saturn.core.Table;
saturn.core.ConstructDesignTable.prototype = $extend(saturn.core.Table.prototype,{
	minTM: null
	,maxTM: null
	,minLength: null
	,maxLength: null
	,minTMExtended: null
	,maxTMExtended: null
	,minLengthExtended: null
	,provider: null
	,getProvider: function() {
		if(this.provider != null) return this.provider; else return saturn.client.WorkspaceApplication.getApplication().getProvider();
	}
	,getMinTM: function() {
		return this.minTM;
	}
	,getMaxTM: function() {
		return this.maxTM;
	}
	,getMinLength: function() {
		return this.minLength;
	}
	,getMaxLength: function() {
		return this.maxLength;
	}
	,generateids: function(cb) {
		var _g1 = this;
		var data = this.getData();
		var targetSet = new haxe.ds.StringMap();
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var entryClone = Reflect.field(row,"Entry Clone");
			var targetId = entryClone.split("-")[0];
			if(__map_reserved[targetId] != null) targetSet.setReserved(targetId,""); else targetSet.h[targetId] = "";
		}
		var targets;
		var _g2 = [];
		var $it0 = targetSet.keys();
		while( $it0.hasNext() ) {
			var targetId1 = $it0.next();
			_g2.push(targetId1);
		}
		targets = _g2;
		saturn.core.domain.SgcUtil.generateNextID(this.getProvider(),targets,saturn.core.domain.SgcAllele,function(alleleMap,err) {
			if(err == null) saturn.core.domain.SgcUtil.generateNextID(_g1.getProvider(),targets,saturn.core.domain.SgcForwardPrimer,function(fPrimers,err1) {
				if(err1 == null) saturn.core.domain.SgcUtil.generateNextID(_g1.getProvider(),targets,saturn.core.domain.SgcReversePrimer,function(rPrimers,err2) {
					if(err2 == null) saturn.core.domain.SgcUtil.generateNextID(_g1.getProvider(),targets,saturn.core.domain.SgcConstruct,function(constructs,err3) {
						if(err3 == null) {
							var forwardMap = new haxe.ds.StringMap();
							var reverseMap = new haxe.ds.StringMap();
							var pcrMap = new haxe.ds.StringMap();
							var _g21 = 0;
							while(_g21 < data.length) {
								var row1 = data[_g21];
								++_g21;
								var entryClone1 = Reflect.field(row1,"Entry Clone");
								var targetId2 = entryClone1.split("-")[0];
								var pcrKey = saturn.core.ConstructDesignTable.getPcrKey(row1);
								if(!(__map_reserved[pcrKey] != null?pcrMap.existsReserved(pcrKey):pcrMap.h.hasOwnProperty(pcrKey))) {
									var alleleId = targetId2 + "-a" + StringTools.lpad(Std.string(__map_reserved[targetId2] != null?alleleMap.getReserved(targetId2):alleleMap.h[targetId2]),"0",3);
									var value;
									value = (__map_reserved[targetId2] != null?alleleMap.getReserved(targetId2):alleleMap.h[targetId2]) + 1;
									if(__map_reserved[targetId2] != null) alleleMap.setReserved(targetId2,value); else alleleMap.h[targetId2] = value;
									if(__map_reserved[pcrKey] != null) pcrMap.setReserved(pcrKey,alleleId); else pcrMap.h[pcrKey] = alleleId;
								}
								Reflect.setField(row1,"Allele ID",__map_reserved[pcrKey] != null?pcrMap.getReserved(pcrKey):pcrMap.h[pcrKey]);
								var forwardSeq = Reflect.field(row1,"Forward Seq");
								if(__map_reserved[forwardSeq] != null?forwardMap.existsReserved(forwardSeq):forwardMap.h.hasOwnProperty(forwardSeq)) Reflect.setField(row1,"Forward Primer",__map_reserved[forwardSeq] != null?forwardMap.getReserved(forwardSeq):forwardMap.h[forwardSeq]); else {
									Reflect.setField(row1,"Forward Primer",targetId2 + "-f" + StringTools.lpad(Std.string(__map_reserved[targetId2] != null?fPrimers.getReserved(targetId2):fPrimers.h[targetId2]),"0",3));
									var value1;
									value1 = (__map_reserved[targetId2] != null?fPrimers.getReserved(targetId2):fPrimers.h[targetId2]) + 1;
									if(__map_reserved[targetId2] != null) fPrimers.setReserved(targetId2,value1); else fPrimers.h[targetId2] = value1;
									var value2 = Reflect.field(row1,"Forward Primer");
									if(__map_reserved[forwardSeq] != null) forwardMap.setReserved(forwardSeq,value2); else forwardMap.h[forwardSeq] = value2;
								}
								var reverseSeq = Reflect.field(row1,"Reverse Seq");
								if(__map_reserved[reverseSeq] != null?reverseMap.existsReserved(reverseSeq):reverseMap.h.hasOwnProperty(reverseSeq)) Reflect.setField(row1,"Reverse Primer",__map_reserved[reverseSeq] != null?reverseMap.getReserved(reverseSeq):reverseMap.h[reverseSeq]); else {
									Reflect.setField(row1,"Reverse Primer",targetId2 + "-r" + StringTools.lpad(Std.string(__map_reserved[targetId2] != null?rPrimers.getReserved(targetId2):rPrimers.h[targetId2]),"0",3));
									var value3;
									value3 = (__map_reserved[targetId2] != null?rPrimers.getReserved(targetId2):rPrimers.h[targetId2]) + 1;
									if(__map_reserved[targetId2] != null) rPrimers.setReserved(targetId2,value3); else rPrimers.h[targetId2] = value3;
								}
								Reflect.setField(row1,"Construct ID",targetId2 + "-c" + StringTools.lpad(Std.string(__map_reserved[targetId2] != null?constructs.getReserved(targetId2):constructs.h[targetId2]),"0",3));
								var value4;
								value4 = (__map_reserved[targetId2] != null?constructs.getReserved(targetId2):constructs.h[targetId2]) + 1;
								if(__map_reserved[targetId2] != null) constructs.setReserved(targetId2,value4); else constructs.h[targetId2] = value4;
							}
							cb(null);
						} else cb(err3);
					}); else cb(err2);
				}); else cb(err1);
			}); else cb(err);
		});
	}
	,_fetchAll: function(cb) {
		var bFetch = new saturn.db.BatchFetch(function(obj,err) {
			saturn.client.WorkspaceApplication.getApplication().showMessage("Batch fetch failure",err);
		});
		var entryCloneSet = new haxe.ds.StringMap();
		var vectorSet = new haxe.ds.StringMap();
		var restrictionSet = new haxe.ds.StringMap();
		var constructSet = new haxe.ds.StringMap();
		var alleleSet = new haxe.ds.StringMap();
		var forwardPrimerSet = new haxe.ds.StringMap();
		var reversePrimerSet = new haxe.ds.StringMap();
		var data = this.getData();
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var entryClone = Reflect.field(row,"Entry Clone");
			var vector = Reflect.field(row,"Vector Name");
			var allele = Reflect.field(row,"Allele ID");
			var construct = Reflect.field(row,"Construct ID");
			var forwardPrimer = Reflect.field(row,"Forward Primer");
			var reversePrimer = Reflect.field(row,"Reverse Primer");
			var key = Reflect.field(row,"Restriction Site 1");
			if(__map_reserved[key] != null) restrictionSet.setReserved(key,""); else restrictionSet.h[key] = "";
			var key1 = Reflect.field(row,"Restriction Site 2");
			if(__map_reserved[key1] != null) restrictionSet.setReserved(key1,""); else restrictionSet.h[key1] = "";
			if(__map_reserved[entryClone] != null) entryCloneSet.setReserved(entryClone,""); else entryCloneSet.h[entryClone] = "";
			if(__map_reserved[vector] != null) vectorSet.setReserved(vector,""); else vectorSet.h[vector] = "";
			if(__map_reserved[allele] != null) alleleSet.setReserved(allele,""); else alleleSet.h[allele] = "";
			if(__map_reserved[construct] != null) constructSet.setReserved(construct,""); else constructSet.h[construct] = "";
			if(__map_reserved[forwardPrimer] != null) forwardPrimerSet.setReserved(forwardPrimer,""); else forwardPrimerSet.h[forwardPrimer] = "";
			if(__map_reserved[reversePrimer] != null) reversePrimerSet.setReserved(reversePrimer,""); else reversePrimerSet.h[reversePrimer] = "";
		}
		var entryClones = [];
		var vectors = [];
		var sites = [];
		var alleles = [];
		var constructs = [];
		var forwardPrimers = [];
		var reversePrimers = [];
		var $it0 = entryCloneSet.keys();
		while( $it0.hasNext() ) {
			var entryClone1 = $it0.next();
			entryClones.push(entryClone1);
		}
		var $it1 = vectorSet.keys();
		while( $it1.hasNext() ) {
			var vector1 = $it1.next();
			vectors.push(vector1);
		}
		var $it2 = restrictionSet.keys();
		while( $it2.hasNext() ) {
			var site = $it2.next();
			sites.push(site);
		}
		var $it3 = alleleSet.keys();
		while( $it3.hasNext() ) {
			var allele1 = $it3.next();
			alleles.push(allele1);
		}
		var $it4 = constructSet.keys();
		while( $it4.hasNext() ) {
			var construct1 = $it4.next();
			constructs.push(construct1);
		}
		var $it5 = forwardPrimerSet.keys();
		while( $it5.hasNext() ) {
			var forwardPrimer1 = $it5.next();
			forwardPrimers.push(forwardPrimer1);
		}
		var $it6 = reversePrimerSet.keys();
		while( $it6.hasNext() ) {
			var reversePrimer1 = $it6.next();
			reversePrimers.push(reversePrimer1);
		}
		bFetch.getByIds(vectors,saturn.core.domain.SgcVector,"__IGNORE_ME__",null);
		bFetch.getByIds(sites,saturn.core.domain.SgcRestrictionSite,"__IGNORE_ME__",null);
		bFetch.getByIds(entryClones,saturn.core.domain.SgcEntryClone,"__IGNORE_ME__",null);
		bFetch.getByIds(alleles,saturn.core.domain.SgcAllele,"__IGNORE_ME__",null);
		bFetch.getByIds(constructs,saturn.core.domain.SgcConstruct,"__IGNORE_ME__",null);
		bFetch.getByIds(forwardPrimers,saturn.core.domain.SgcForwardPrimer,"__IGNORE_ME__",null);
		bFetch.getByIds(reversePrimers,saturn.core.domain.SgcReversePrimer,"__IGNORE_ME__",null);
		bFetch.onComplete = cb;
		bFetch.execute();
	}
	,calculate: function(cb) {
		var _g = this;
		this._fetchAll(function() {
			_g._calculateFromCache(cb);
		});
	}
	,saveNew: function(cb) {
		this._saveNew(cb);
	}
	,_saveNew: function(cb) {
		var p = this.getProvider();
		var data = this.getData();
		var forwardPrimerSet = new haxe.ds.StringMap();
		var reversePrimerSet = new haxe.ds.StringMap();
		var allelePlates = [];
		var constructPlates = [];
		var alleleSet = new haxe.ds.StringMap();
		var constructs = [];
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var pcrKey = saturn.core.ConstructDesignTable.getPcrKey(row);
			var allelePlate = new saturn.core.domain.SgcAllelePlate();
			var constructPlate = new saturn.core.domain.SgcConstructPlate();
			var construct = new saturn.core.domain.SgcConstruct();
			var forwardPrimer = null;
			var forwardPrimerId = Reflect.field(row,"Forward Primer");
			if(__map_reserved[forwardPrimerId] != null?forwardPrimerSet.existsReserved(forwardPrimerId):forwardPrimerSet.h.hasOwnProperty(forwardPrimerId)) forwardPrimer = __map_reserved[forwardPrimerId] != null?forwardPrimerSet.getReserved(forwardPrimerId):forwardPrimerSet.h[forwardPrimerId]; else {
				forwardPrimer = new saturn.core.domain.SgcForwardPrimer();
				forwardPrimer.setSequence(Reflect.field(row,"Forward Seq"));
				forwardPrimer.primerId = forwardPrimerId;
				if(__map_reserved[forwardPrimerId] != null) forwardPrimerSet.setReserved(forwardPrimerId,forwardPrimer); else forwardPrimerSet.h[forwardPrimerId] = forwardPrimer;
			}
			var reversePrimer = null;
			var reversePrimerId = Reflect.field(row,"Reverse Primer");
			if(__map_reserved[reversePrimerId] != null?reversePrimerSet.existsReserved(reversePrimerId):reversePrimerSet.h.hasOwnProperty(reversePrimerId)) reversePrimer = __map_reserved[reversePrimerId] != null?reversePrimerSet.getReserved(reversePrimerId):reversePrimerSet.h[reversePrimerId]; else {
				reversePrimer = new saturn.core.domain.SgcReversePrimer();
				reversePrimer.setSequence(Reflect.field(row,"Reverse Seq"));
				reversePrimer.primerId = reversePrimerId;
				if(__map_reserved[reversePrimerId] != null) reversePrimerSet.setReserved(reversePrimerId,reversePrimer); else reversePrimerSet.h[reversePrimerId] = reversePrimer;
			}
			allelePlate.plateName = Reflect.field(row,"Plate Name");
			constructPlate.plateName = Reflect.field(row,"Plate Name");
			var allele = null;
			if(__map_reserved[pcrKey] != null?alleleSet.existsReserved(pcrKey):alleleSet.h.hasOwnProperty(pcrKey)) allele = __map_reserved[pcrKey] != null?alleleSet.getReserved(pcrKey):alleleSet.h[pcrKey]; else {
				allele = new saturn.core.domain.SgcAllele();
				allele.entryClone = new saturn.core.domain.SgcEntryClone();
				allele.entryClone.entryCloneId = Reflect.field(row,"Entry Clone");
				allele.plateWell = Reflect.field(row,"Allele Well");
				allele.alleleId = Reflect.field(row,"Allele ID");
				allele.dnaSeq = Reflect.field(row,"Allele DNA Sequence");
				allele.proteinSeq = Reflect.field(row,"Allele Protein Sequence");
				allele.forwardPrimer = forwardPrimer;
				allele.reversePrimer = reversePrimer;
				allele.plate = allelePlate;
				if(__map_reserved[pcrKey] != null) alleleSet.setReserved(pcrKey,allele); else alleleSet.h[pcrKey] = allele;
			}
			construct.constructId = Reflect.field(row,"Construct ID");
			construct.wellId = Reflect.field(row,"Construct Well");
			construct.vector = new saturn.core.domain.SgcVector();
			construct.vector.vectorId = Reflect.field(row,"Vector Name");
			construct.dnaSeq = Reflect.field(row,"Construct DNA");
			construct.proteinSeq = Reflect.field(row,"Construct Protein");
			construct.proteinSeqNoTag = Reflect.field(row,"Construct Protein (no tag)");
			construct.expectedMass = Reflect.field(row,"Construct Mass");
			construct.expectedMassNoTag = Reflect.field(row,"Construct Mass (no tag)");
			construct.res1 = new saturn.core.domain.SgcRestrictionSite();
			construct.res1.enzymeName = Reflect.field(row,"Restriction Site 1");
			construct.res2 = new saturn.core.domain.SgcRestrictionSite();
			construct.res2.enzymeName = Reflect.field(row,"Restriction Site 2");
			construct.allele = allele;
			construct.constructPlate = constructPlate;
			construct.constructStart = Reflect.field(row,"Start position");
			construct.constructStop = Reflect.field(row,"Stop position");
			allelePlates.push(allelePlate);
			constructPlates.push(constructPlate);
			constructs.push(construct);
		}
		var alleles = [];
		var $it0 = alleleSet.keys();
		while( $it0.hasNext() ) {
			var pcrKey1 = $it0.next();
			alleles.push(__map_reserved[pcrKey1] != null?alleleSet.getReserved(pcrKey1):alleleSet.h[pcrKey1]);
		}
		var forwardPrimers = [];
		var $it1 = forwardPrimerSet.keys();
		while( $it1.hasNext() ) {
			var forwardPrimerId1 = $it1.next();
			forwardPrimers.push(__map_reserved[forwardPrimerId1] != null?forwardPrimerSet.getReserved(forwardPrimerId1):forwardPrimerSet.h[forwardPrimerId1]);
		}
		var reversePrimers = [];
		var $it2 = reversePrimerSet.keys();
		while( $it2.hasNext() ) {
			var reversePrimerId1 = $it2.next();
			reversePrimers.push(__map_reserved[reversePrimerId1] != null?reversePrimerSet.getReserved(reversePrimerId1):reversePrimerSet.h[reversePrimerId1]);
		}
		p.insertOrUpdate(forwardPrimers,function(err) {
			if(err != null) {
				cb(err);
				return;
			}
			p.insertOrUpdate(reversePrimers,function(err1) {
				if(err1 != null) {
					cb(err1);
					return;
				}
				p.insertOrUpdate(allelePlates,function(err2) {
					if(err2 != null) {
						cb(err2);
						return;
					}
					p.insertOrUpdate(constructPlates,function(err3) {
						if(err3 != null) {
							cb(err3);
							return;
						}
						p.insertOrUpdate(alleles,function(err4) {
							if(err4 != null) {
								cb(err4);
								return;
							}
							p.insertOrUpdate(constructs,function(err5) {
								if(err5 != null) {
									cb(err5);
									return;
								} else cb(null);
							},true);
						},true);
					},true);
				},true);
			},true);
		},true);
	}
	,fetchall: function(cb) {
		var _g = this;
		this._fetchAll(function() {
			var p = _g.getProvider();
			var data = _g.getData();
			var _g1 = 0;
			while(_g1 < data.length) {
				var row = data[_g1];
				++_g1;
				var entryCloneId = Reflect.field(row,"Entry Clone");
				var vectorId = Reflect.field(row,"Vector Name");
				var res1Id = Reflect.field(row,"Restriction Site 1");
				var res2Id = Reflect.field(row,"Restriction Site 2");
				var forwardPrimerId = Reflect.field(row,"Forward Primer");
				var reversePrimerId = Reflect.field(row,"Reverse Primer");
				var alleleId = Reflect.field(row,"Allele ID");
				var constructId = Reflect.field(row,"Construct ID");
				var entryClone = p.getObjectFromCache(saturn.core.domain.SgcEntryClone,"entryCloneId",entryCloneId);
				var vector = p.getObjectFromCache(saturn.core.domain.SgcVector,"vectorId",vectorId);
				var allele = p.getObjectFromCache(saturn.core.domain.SgcAllele,"alleleId",alleleId);
				var construct = p.getObjectFromCache(saturn.core.domain.SgcConstruct,"constructId",constructId);
				var forwardPrimer = p.getObjectFromCache(saturn.core.domain.SgcForwardPrimer,"primerId",forwardPrimerId);
				var reversePrimer = p.getObjectFromCache(saturn.core.domain.SgcReversePrimer,"primerId",reversePrimerId);
				if(allele != null) {
					row["Allele Well"] = allele.plateWell;
					if(allele.plate != null) row["Plate Name"] = allele.plate.plateName;
					row["Allele Well"] = allele.plateWell;
					if(allele.entryClone != null) row["Entry Clone"] = allele.entryClone.entryCloneId;
					row["Allele DNA Sequence"] = allele.dnaSeq;
					row["Allele Protein Sequence"] = allele.proteinSeq;
					if(allele.forwardPrimer != null) {
						row["Forward Primer"] = allele.forwardPrimer.primerId;
						row["Forward Seq"] = allele.forwardPrimer.dnaSequence;
					}
					if(allele.reversePrimer != null) {
						row["Reverse Primer"] = allele.reversePrimer.primerId;
						row["Reverse Seq"] = allele.reversePrimer.dnaSequence;
					}
				}
				if(construct != null) {
					row["Construct Well"] = construct.wellId;
					if(construct.vector != null) row["Vector Name"] = construct.vector.vectorId;
					if(construct.res1 != null) row["Restriction Site 1"] = construct.res1.enzymeName;
					if(construct.res2 != null) row["Restriction Site 2"] = construct.res2.enzymeName;
					row["Construct DNA"] = construct.dnaSeq;
					row["Construct Protein"] = construct.proteinSeq;
					row["Construct Protein (no tag)"] = construct.proteinSeqNoTag;
					row["Construct Mass"] = construct.expectedMass;
					row["Construct Mass (no tag)"] = construct.expectedMassNoTag;
				}
				cb();
			}
		});
	}
	,_calculateFromCache: function(cb) {
		var p = this.getProvider();
		var data = this.getData();
		var primerReg = saturn.core.PrimerRegistry.getDefaultInstance();
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var entryCloneId = Reflect.field(row,"Entry Clone");
			var vectorId = Reflect.field(row,"Vector Name");
			var startPosition = Reflect.field(row,"Start position");
			var stopPosition = Reflect.field(row,"Stop position");
			var res1Id = Reflect.field(row,"Restriction Site 1");
			var res2Id = Reflect.field(row,"Restriction Site 2");
			var entryClone = p.getObjectFromCache(saturn.core.domain.SgcEntryClone,"entryCloneId",entryCloneId);
			var vector = p.getObjectFromCache(saturn.core.domain.SgcVector,"vectorId",vectorId);
			var pcrErrors = [];
			if(entryClone == null) pcrErrors.push(entryCloneId + " invalid");
			var res1 = null;
			var res2 = null;
			if(vector == null) {
				if(vectorId == null || vectorId == "") pcrErrors.push("Missing vector"); else pcrErrors.push(vectorId + " invalid");
			} else {
				if(res1Id == null || res1Id == "") res1 = vector.res1;
				if(res2Id == null || res2Id == "") res2 = vector.res2;
			}
			if(res1 == null && res1Id != null) res1 = p.getObjectFromCache(saturn.core.domain.SgcRestrictionSite,"enzymeName",res1Id);
			if(res2 == null && res2Id != null) res2 = p.getObjectFromCache(saturn.core.domain.SgcRestrictionSite,"enzymeName",res2Id);
			if(res1 == null) {
				if(res1Id == null || res1Id == "") pcrErrors.push("5` restriction site missing"); else pcrErrors.push(res1Id + " invalid");
			}
			if(res2 == null) {
				if(res2Id == null || res2Id == "") pcrErrors.push("3` restriction site missing"); else pcrErrors.push(res2Id + " invalid");
			}
			if(pcrErrors.length > 0) {
				Reflect.setField(row,"PCR Error",pcrErrors.join(" / "));
				continue;
			}
			row["Forward Seq"] = "";
			row["Reverse Seq"] = "";
			row["Forward Error"] = "";
			row["Reverse Error"] = "";
			row["PCR Error"] = "";
			row["Allele DNA Sequence"] = "";
			row["Allele Protein Sequence"] = "";
			row["Construct Protein"] = "";
			row["Construct Protein (no tag)"] = "";
			row["Construct DNA"] = "";
			row["Construct Mass"] = "";
			row["Construct Mass (no tag)"] = "";
			row["Construct Error"] = "";
			var template = new saturn.core.DNA(entryClone.dnaSeq);
			var forwardExtensionLength = 0;
			var reverseExtensionLength = 0;
			try {
				var nucPosition = template.getCodonStartPosition(saturn.core.Frame.ONE,startPosition);
				var forwardSeq1 = template.getRegion(nucPosition,template.getLength());
				var forwardObj = new saturn.core.DNA(forwardSeq1);
				var extensionSeq = "";
				if(vector.requiredForwardExtension != null) {
					extensionSeq = vector.requiredForwardExtension;
					if(HxOverrides.substr(forwardSeq1,0,3) == "ATG") {
						if(HxOverrides.substr(extensionSeq,extensionSeq.length - 3,3) == "ATG") extensionSeq = HxOverrides.substr(extensionSeq,0,extensionSeq.length - 3);
					} else if(HxOverrides.substr(extensionSeq,extensionSeq.length - 3,3) != "ATG") {
						extensionSeq = extensionSeq + "ATG";
						forwardExtensionLength += 3;
					}
					forwardExtensionLength += extensionSeq.length;
				}
				Reflect.setField(row,"Forward Seq",extensionSeq + forwardObj.findPrimer(1,this.minLength,this.maxLength,this.minTM,this.maxTM,extensionSeq,this.minLengthExtended,this.minTMExtended,this.maxTMExtended));
			} catch( ex ) {
				if (ex instanceof js._Boot.HaxeError) ex = ex.val;
				if( js.Boot.__instanceof(ex,saturn.util.HaxeException) ) {
					row["Forward Error"] = ex;
				} else throw(ex);
			}
			try {
				var nucPosition1 = template.getCodonStopPosition(saturn.core.Frame.ONE,stopPosition);
				var reverseSeq1 = new saturn.core.DNA(template.getRegion(1,nucPosition1)).getInverseComplement();
				var icCut = new saturn.core.DNA(reverseSeq1);
				var extensionSeq1 = "";
				if(vector.requiredReverseExtension != null) {
					extensionSeq1 = vector.requiredReverseExtension;
					reverseExtensionLength += extensionSeq1.length;
				}
				if(vector.addStopCodon == "yes") {
					extensionSeq1 += "TCA";
					reverseExtensionLength += 3;
				}
				Reflect.setField(row,"Reverse Seq",extensionSeq1 + icCut.findPrimer(1,this.minLength,this.maxLength,this.minTM,this.maxTM,extensionSeq1,this.minLengthExtended,this.minTMExtended,this.maxTMExtended));
			} catch( ex1 ) {
				if (ex1 instanceof js._Boot.HaxeError) ex1 = ex1.val;
				if( js.Boot.__instanceof(ex1,saturn.util.HaxeException) ) {
					row["Reverse Error"] = ex1;
				} else throw(ex1);
			}
			var forwardSeq = Reflect.field(row,"Forward Seq");
			var reverseSeq = Reflect.field(row,"Reverse Seq");
			if(forwardSeq != null && forwardSeq != "" && reverseSeq != null && reverseSeq != "") {
				try {
					var forwardPrimer = new saturn.core.Primer(forwardSeq);
					forwardPrimer.set5PrimeExtensionLength(forwardExtensionLength);
					var reversePrimer = new saturn.core.Primer(reverseSeq);
					reversePrimer.set5PrimeExtensionLength(reverseExtensionLength);
					var pcr = new saturn.core.PCRProduct(template,forwardPrimer,reversePrimer);
					var product = new saturn.core.DNA(pcr.getPCRProduct(true));
					var pos = product.getFirstStartCodonPosition(saturn.core.GeneticCodes.STANDARD);
					Reflect.setField(row,"Allele DNA Sequence",product.getSequence());
					Reflect.setField(row,"Allele Protein Sequence",product.getTranslation(saturn.core.GeneticCodes.STANDARD,pos,true));
				} catch( ex2 ) {
					if (ex2 instanceof js._Boot.HaxeError) ex2 = ex2.val;
					if( js.Boot.__instanceof(ex2,saturn.util.HaxeException) ) {
						row["PCR Error"] = ex2;
					} else throw(ex2);
				}
				try {
					var alleleSequence = new saturn.core.DNA(Reflect.field(row,"Allele DNA Sequence"));
					var res1Seq = new saturn.core.RestrictionSite(res1.cutSequence);
					var res2Seq = new saturn.core.RestrictionSite(res2.cutSequence);
					var v_res1Seq = new saturn.core.RestrictionSite(vector.res1.cutSequence);
					var v_res2Seq = new saturn.core.RestrictionSite(vector.res2.cutSequence);
					var vectorSequence = new saturn.core.DNA(vector.getSequence());
					var proteaseCutSeq = new saturn.core.CleavageSite(vector.proteaseCutSequence);
					var proteaseProduct = vector.proteaseProduct;
					var direction;
					if(proteaseProduct == "UPSTREAM") direction = saturn.core.CutProductDirection.UPSTREAM; else if(proteaseProduct == "DOWNSTREAM") direction = saturn.core.CutProductDirection.DOWNSTREAM; else {
						row["Construct Error"] = "Invalid value for Vector field protease product direction should be either UPSTREAM or DOWNSTREAM";
						continue;
					}
					var alleleDigest = new saturn.core.DoubleDigest(alleleSequence,res1Seq,res2Seq);
					var vectorDigest = new saturn.core.DoubleDigest(vectorSequence,v_res1Seq,v_res2Seq);
					var ligation = new saturn.core.Ligation(vectorDigest,alleleDigest);
					ligation.calculateProduct();
					var startCodonPosition = ligation.getFirstStartCodonPosition(saturn.core.GeneticCodes.STANDARD);
					if(startCodonPosition == -1) {
						row["Construct Error"] = "Ligation product is missing a start codon";
						continue;
					}
					var uncutSequence = new saturn.core.Protein(ligation.getTranslation(saturn.core.GeneticCodes.STANDARD,startCodonPosition,true));
					var cutSequence = proteaseCutSeq.getCutProduct(uncutSequence,direction);
					Reflect.setField(row,"Construct Mass",saturn.util.MathUtils.sigFigs(uncutSequence.getMW(),4));
					Reflect.setField(row,"Construct Mass (no tag)",saturn.util.MathUtils.sigFigs(new saturn.core.Protein(cutSequence).getMW(),4));
					Reflect.setField(row,"Construct DNA",ligation.getSequence());
					Reflect.setField(row,"Construct Protein",uncutSequence.getSequence());
					row["Construct Protein (no tag)"] = cutSequence;
				} catch( $e0 ) {
					if ($e0 instanceof js._Boot.HaxeError) $e0 = $e0.val;
					if( js.Boot.__instanceof($e0,saturn.util.HaxeException) ) {
						var ex3 = $e0;
						row["Construct Error"] = ex3;
					} else {
					var e = $e0;
					row["Construct Error"] = e;
					}
				}
			}
		}
		cb();
	}
	,duplicateAndChangeVector: function(newVectorName,cb) {
		var data = this.getData();
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var selected = Reflect.field(row,"Select");
			if(selected) {
				var newRow = saturn.core.Util.clone(row);
				newRow["Vector Name"] = newVectorName;
				newRow.Select = false;
				data.push(newRow);
			}
		}
		cb();
	}
	,assignWells: function(cb) {
		var data = this.getData();
		var pcrKeyToAlleleWell = new haxe.ds.StringMap();
		var ai = 65;
		var aj = 1;
		var ci = 65;
		var cj = 1;
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var pcrKey = saturn.core.ConstructDesignTable.getPcrKey(row);
			if(!(__map_reserved[pcrKey] != null?pcrKeyToAlleleWell.existsReserved(pcrKey):pcrKeyToAlleleWell.h.hasOwnProperty(pcrKey))) {
				var alleleWell = String.fromCharCode(ai) + StringTools.lpad(aj == null?"null":"" + aj,"0",2);
				aj++;
				if(aj > 12) {
					ai++;
					aj = 1;
				}
				if(__map_reserved[pcrKey] != null) pcrKeyToAlleleWell.setReserved(pcrKey,alleleWell); else pcrKeyToAlleleWell.h[pcrKey] = alleleWell;
			}
			var constructWell = String.fromCharCode(ci) + StringTools.lpad(cj == null?"null":"" + cj,"0",2);
			cj++;
			if(cj > 12) {
				ci++;
				cj = 1;
			}
			Reflect.setField(row,"Allele Well",__map_reserved[pcrKey] != null?pcrKeyToAlleleWell.getReserved(pcrKey):pcrKeyToAlleleWell.h[pcrKey]);
			row["Construct Well"] = constructWell;
		}
		cb(null);
	}
	,prepare: function(cb) {
		var _g = this;
		this.calculate(function() {
			_g.generateids(function(err) {
				if(err != null) cb(err); else _g.assignWells(cb);
			});
		});
	}
	,__class__: saturn.core.ConstructDesignTable
});
saturn.core.ConstructPlan = $hxClasses["saturn.core.ConstructPlan"] = function() {
};
saturn.core.ConstructPlan.__name__ = ["saturn","core","ConstructPlan"];
saturn.core.ConstructPlan.prototype = {
	__class__: saturn.core.ConstructPlan
};
saturn.core.ConstructSet = $hxClasses["saturn.core.ConstructSet"] = function(constructs) {
	this.setConstructs(constructs);
};
saturn.core.ConstructSet.__name__ = ["saturn","core","ConstructSet"];
saturn.core.ConstructSet.prototype = {
	constructs: null
	,setConstructs: function(constructs) {
		this.constructs = constructs;
	}
	,getForwardPrimers: function() {
		var primers = new haxe.ds.StringMap();
		var _g = 0;
		var _g1 = this.constructs;
		while(_g < _g1.length) {
			var construct = _g1[_g];
			++_g;
			if(construct.allele != null && construct.allele.forwardPrimer != null) {
				var primer = construct.allele.forwardPrimer;
				if(!primers.exists(primer.primerId)) primers.set(primer.primerId,primer);
			}
		}
		return primers;
	}
	,getReversePrimers: function() {
		var primers = new haxe.ds.StringMap();
		var _g = 0;
		var _g1 = this.constructs;
		while(_g < _g1.length) {
			var construct = _g1[_g];
			++_g;
			if(construct.allele != null && construct.allele.reversePrimer != null) {
				var primer = construct.allele.reversePrimer;
				if(!primers.exists(primer.primerId)) primers.set(primer.primerId,primer);
			}
		}
		return primers;
	}
	,generatePrimerReport: function() {
		var forwardPrimers = this.getForwardPrimers();
		var reversePrimers = this.getReversePrimers();
		var primers = [];
		var $it0 = forwardPrimers.keys();
		while( $it0.hasNext() ) {
			var id = $it0.next();
			primers.push(__map_reserved[id] != null?forwardPrimers.getReserved(id):forwardPrimers.h[id]);
		}
		var $it1 = reversePrimers.keys();
		while( $it1.hasNext() ) {
			var id1 = $it1.next();
			primers.push(__map_reserved[id1] != null?reversePrimers.getReserved(id1):reversePrimers.h[id1]);
		}
		primers.sort(function(p1,p2) {
			var a = p1.primerId.toLowerCase();
			var b = p2.primerId.toLowerCase();
			if(a.indexOf("-f") != -1) {
				if(b.indexOf("-r") != -1) return -1;
			} else if(a.indexOf("-r") != -1) {
				if(b.indexOf("-f") != -1) return 1;
			}
			if(a < b) return -1;
			if(a > b) return 1;
			return 0;
		});
		var row = "A";
		var col = 1;
		var buf_b = "";
		var _g = 0;
		while(_g < primers.length) {
			var primer = primers[_g];
			++_g;
			var well = row + col;
			buf_b += Std.string(well + "," + Std.string(primer.primerId) + "," + Std.string(primer.dnaSequence) + "\n");
			if(col == 12) {
				col = 1;
				row = String.fromCharCode(HxOverrides.cca(row,0) + 1);
			} else col++;
		}
		return buf_b;
	}
	,__class__: saturn.core.ConstructSet
};
saturn.core.CrystalHelperData = $hxClasses["saturn.core.CrystalHelperData"] = function() {
};
saturn.core.CrystalHelperData.__name__ = ["saturn","core","CrystalHelperData"];
saturn.core.CrystalHelperData.prototype = {
	data: null
	,setData: function(obj) {
		this.data = obj;
	}
	,getData: function(obj) {
		return this.data;
	}
	,__class__: saturn.core.CrystalHelperData
};
saturn.core.CutProductDirection = $hxClasses["saturn.core.CutProductDirection"] = { __ename__ : ["saturn","core","CutProductDirection"], __constructs__ : ["UPSTREAM","DOWNSTREAM","UPDOWN"] };
saturn.core.CutProductDirection.UPSTREAM = ["UPSTREAM",0];
saturn.core.CutProductDirection.UPSTREAM.toString = $estr;
saturn.core.CutProductDirection.UPSTREAM.__enum__ = saturn.core.CutProductDirection;
saturn.core.CutProductDirection.DOWNSTREAM = ["DOWNSTREAM",1];
saturn.core.CutProductDirection.DOWNSTREAM.toString = $estr;
saturn.core.CutProductDirection.DOWNSTREAM.__enum__ = saturn.core.CutProductDirection;
saturn.core.CutProductDirection.UPDOWN = ["UPDOWN",2];
saturn.core.CutProductDirection.UPDOWN.toString = $estr;
saturn.core.CutProductDirection.UPDOWN.__enum__ = saturn.core.CutProductDirection;
saturn.core.Frame = $hxClasses["saturn.core.Frame"] = { __ename__ : ["saturn","core","Frame"], __constructs__ : ["ONE","TWO","THREE"] };
saturn.core.Frame.ONE = ["ONE",0];
saturn.core.Frame.ONE.toString = $estr;
saturn.core.Frame.ONE.__enum__ = saturn.core.Frame;
saturn.core.Frame.TWO = ["TWO",1];
saturn.core.Frame.TWO.toString = $estr;
saturn.core.Frame.TWO.__enum__ = saturn.core.Frame;
saturn.core.Frame.THREE = ["THREE",2];
saturn.core.Frame.THREE.toString = $estr;
saturn.core.Frame.THREE.__enum__ = saturn.core.Frame;
saturn.core.Frames = $hxClasses["saturn.core.Frames"] = function() { };
saturn.core.Frames.__name__ = ["saturn","core","Frames"];
saturn.core.Frames.toInt = function(frame) {
	switch(frame[1]) {
	case 0:
		return 0;
	case 1:
		return 1;
	case 2:
		return 2;
	}
};
saturn.core.Direction = $hxClasses["saturn.core.Direction"] = { __ename__ : ["saturn","core","Direction"], __constructs__ : ["Forward","Reverse"] };
saturn.core.Direction.Forward = ["Forward",0];
saturn.core.Direction.Forward.toString = $estr;
saturn.core.Direction.Forward.__enum__ = saturn.core.Direction;
saturn.core.Direction.Reverse = ["Reverse",1];
saturn.core.Direction.Reverse.toString = $estr;
saturn.core.Direction.Reverse.__enum__ = saturn.core.Direction;
saturn.core.DNAComposition = $hxClasses["saturn.core.DNAComposition"] = function(aCount,tCount,gCount,cCount) {
	this.aCount = aCount;
	this.tCount = tCount;
	this.gCount = gCount;
	this.cCount = cCount;
};
saturn.core.DNAComposition.__name__ = ["saturn","core","DNAComposition"];
saturn.core.DNAComposition.prototype = {
	aCount: null
	,tCount: null
	,gCount: null
	,cCount: null
	,__class__: saturn.core.DNAComposition
};
saturn.core.GeneticCode = $hxClasses["saturn.core.GeneticCode"] = function() {
	this.codonLookupTable = new haxe.ds.StringMap();
	this.aaToCodonTable = new haxe.ds.StringMap();
	this.startCodons = new haxe.ds.StringMap();
	this.stopCodons = new haxe.ds.StringMap();
	this.populateTable();
};
saturn.core.GeneticCode.__name__ = ["saturn","core","GeneticCode"];
saturn.core.GeneticCode.prototype = {
	codonLookupTable: null
	,aaToCodonTable: null
	,startCodons: null
	,stopCodons: null
	,addStartCodon: function(codon) {
		this.startCodons.set(codon,"1");
	}
	,isStartCodon: function(codon) {
		return this.startCodons.exists(codon);
	}
	,addStopCodon: function(codon) {
		this.stopCodons.set(codon,"1");
	}
	,isStopCodon: function(codon) {
		return this.stopCodons.exists(codon);
	}
	,getStopCodons: function() {
		return this.stopCodons;
	}
	,getCodonCount: function() {
		return Lambda.count(this.codonLookupTable);
	}
	,getStartCodons: function() {
		var clone = new haxe.ds.StringMap();
		var $it0 = this.startCodons.keys();
		while( $it0.hasNext() ) {
			var key = $it0.next();
			var value = this.startCodons.get(key);
			if(__map_reserved[key] != null) clone.setReserved(key,value); else clone.h[key] = value;
		}
		return clone;
	}
	,populateTable: function() {
	}
	,lookupCodon: function(codon) {
		if(this.codonLookupTable.exists(codon)) return this.codonLookupTable.get(codon); else return "?";
	}
	,getCodonLookupTable: function() {
		return this.codonLookupTable;
	}
	,getAAToCodonTable: function() {
		return this.aaToCodonTable;
	}
	,getFirstCodon: function(aa) {
		if(this.aaToCodonTable.exists(aa)) {
			var codons = this.aaToCodonTable.get(aa);
			return codons.first();
		} else return null;
	}
	,__class__: saturn.core.GeneticCode
};
saturn.core.StandardGeneticCode = $hxClasses["saturn.core.StandardGeneticCode"] = function() {
	saturn.core.GeneticCode.call(this);
	saturn.core.GeneticCode.prototype.addStartCodon.call(this,"ATG");
	saturn.core.GeneticCode.prototype.addStopCodon.call(this,"TAA");
	saturn.core.GeneticCode.prototype.addStopCodon.call(this,"TGA");
	saturn.core.GeneticCode.prototype.addStopCodon.call(this,"TAG");
};
saturn.core.StandardGeneticCode.__name__ = ["saturn","core","StandardGeneticCode"];
saturn.core.StandardGeneticCode.getDefaultInstance = function() {
	return saturn.core.StandardGeneticCode.instance;
};
saturn.core.StandardGeneticCode.__super__ = saturn.core.GeneticCode;
saturn.core.StandardGeneticCode.prototype = $extend(saturn.core.GeneticCode.prototype,{
	populateTable: function() {
		this.codonLookupTable.set("TTT","F");
		this.codonLookupTable.set("TTC","F");
		this.codonLookupTable.set("TTA","L");
		this.codonLookupTable.set("TTG","L");
		this.codonLookupTable.set("TCT","S");
		this.codonLookupTable.set("TCC","S");
		this.codonLookupTable.set("TCA","S");
		this.codonLookupTable.set("TCG","S");
		this.codonLookupTable.set("TAT","Y");
		this.codonLookupTable.set("TAC","Y");
		this.codonLookupTable.set("TAA","!");
		this.codonLookupTable.set("TAG","!");
		this.codonLookupTable.set("TGT","C");
		this.codonLookupTable.set("TGC","C");
		this.codonLookupTable.set("TGA","!");
		this.codonLookupTable.set("TGG","W");
		this.codonLookupTable.set("CTT","L");
		this.codonLookupTable.set("CTC","L");
		this.codonLookupTable.set("CTA","L");
		this.codonLookupTable.set("CTG","L");
		this.codonLookupTable.set("CCT","P");
		this.codonLookupTable.set("CCC","P");
		this.codonLookupTable.set("CCA","P");
		this.codonLookupTable.set("CCG","P");
		this.codonLookupTable.set("CAT","H");
		this.codonLookupTable.set("CAC","H");
		this.codonLookupTable.set("CAA","Q");
		this.codonLookupTable.set("CAG","Q");
		this.codonLookupTable.set("CGT","R");
		this.codonLookupTable.set("CGC","R");
		this.codonLookupTable.set("CGA","R");
		this.codonLookupTable.set("CGG","R");
		this.codonLookupTable.set("ATT","I");
		this.codonLookupTable.set("ATC","I");
		this.codonLookupTable.set("ATA","I");
		this.codonLookupTable.set("ATG","M");
		this.codonLookupTable.set("ACT","T");
		this.codonLookupTable.set("ACC","T");
		this.codonLookupTable.set("ACA","T");
		this.codonLookupTable.set("ACG","T");
		this.codonLookupTable.set("AAT","N");
		this.codonLookupTable.set("AAC","N");
		this.codonLookupTable.set("AAA","K");
		this.codonLookupTable.set("AAG","K");
		this.codonLookupTable.set("AGT","S");
		this.codonLookupTable.set("AGC","S");
		this.codonLookupTable.set("AGA","R");
		this.codonLookupTable.set("AGG","R");
		this.codonLookupTable.set("GTT","V");
		this.codonLookupTable.set("GTC","V");
		this.codonLookupTable.set("GTA","V");
		this.codonLookupTable.set("GTG","V");
		this.codonLookupTable.set("GCT","A");
		this.codonLookupTable.set("GCC","A");
		this.codonLookupTable.set("GCA","A");
		this.codonLookupTable.set("GCG","A");
		this.codonLookupTable.set("GAT","D");
		this.codonLookupTable.set("GAC","D");
		this.codonLookupTable.set("GAA","E");
		this.codonLookupTable.set("GAG","E");
		this.codonLookupTable.set("GGT","G");
		this.codonLookupTable.set("GGC","G");
		this.codonLookupTable.set("GGA","G");
		this.codonLookupTable.set("GGG","G");
		var $it0 = this.codonLookupTable.keys();
		while( $it0.hasNext() ) {
			var key = $it0.next();
			var aa = this.codonLookupTable.get(key);
			if(!this.aaToCodonTable.exists(aa)) {
				var value = new List();
				this.aaToCodonTable.set(aa,value);
			}
			this.aaToCodonTable.get(aa).add(key);
		}
	}
	,__class__: saturn.core.StandardGeneticCode
});
saturn.core.GeneticCodes = $hxClasses["saturn.core.GeneticCodes"] = { __ename__ : ["saturn","core","GeneticCodes"], __constructs__ : ["STANDARD"] };
saturn.core.GeneticCodes.STANDARD = ["STANDARD",0];
saturn.core.GeneticCodes.STANDARD.toString = $estr;
saturn.core.GeneticCodes.STANDARD.__enum__ = saturn.core.GeneticCodes;
saturn.core.GeneticCodeRegistry = $hxClasses["saturn.core.GeneticCodeRegistry"] = function() {
	this.shortNameToCodeObj = new haxe.ds.StringMap();
	var value = saturn.core.StandardGeneticCode.getDefaultInstance();
	this.shortNameToCodeObj.set(Std.string(saturn.core.GeneticCodes.STANDARD),value);
};
saturn.core.GeneticCodeRegistry.__name__ = ["saturn","core","GeneticCodeRegistry"];
saturn.core.GeneticCodeRegistry.getRegistry = function() {
	return saturn.core.GeneticCodeRegistry.CODE_REGISTRY;
};
saturn.core.GeneticCodeRegistry.getDefault = function() {
	return saturn.core.GeneticCodeRegistry.getRegistry().getGeneticCodeByEnum(saturn.core.GeneticCodes.STANDARD);
};
saturn.core.GeneticCodeRegistry.prototype = {
	shortNameToCodeObj: null
	,getGeneticCodeNames: function() {
		var nameList = new List();
		var $it0 = this.shortNameToCodeObj.keys();
		while( $it0.hasNext() ) {
			var key = $it0.next();
			nameList.add(key);
		}
		return nameList;
	}
	,getGeneticCodeByName: function(shortName) {
		if(!this.shortNameToCodeObj.exists(shortName)) throw new js._Boot.HaxeError(new saturn.core.InvalidGeneticCodeException(shortName + " doesn't correspond to a genetic code in the main registry.")); else return this.shortNameToCodeObj.get(shortName);
	}
	,getGeneticCodeByEnum: function(code) {
		return this.getGeneticCodeByName(Std.string(code));
	}
	,__class__: saturn.core.GeneticCodeRegistry
};
saturn.core.InvalidGeneticCodeException = $hxClasses["saturn.core.InvalidGeneticCodeException"] = function(message) {
	saturn.util.HaxeException.call(this,message);
};
saturn.core.InvalidGeneticCodeException.__name__ = ["saturn","core","InvalidGeneticCodeException"];
saturn.core.InvalidGeneticCodeException.__super__ = saturn.util.HaxeException;
saturn.core.InvalidGeneticCodeException.prototype = $extend(saturn.util.HaxeException.prototype,{
	__class__: saturn.core.InvalidGeneticCodeException
});
saturn.core.InvalidCodonException = $hxClasses["saturn.core.InvalidCodonException"] = function(message) {
	saturn.util.HaxeException.call(this,message);
};
saturn.core.InvalidCodonException.__name__ = ["saturn","core","InvalidCodonException"];
saturn.core.InvalidCodonException.__super__ = saturn.util.HaxeException;
saturn.core.InvalidCodonException.prototype = $extend(saturn.util.HaxeException.prototype,{
	__class__: saturn.core.InvalidCodonException
});
saturn.core.DoubleDigest = $hxClasses["saturn.core.DoubleDigest"] = function(template,res1,res2) {
	this.theTemplate = template;
	this.theRes1 = res1;
	this.theRes2 = res2;
	if(template != null) this.digest();
	saturn.core.DNA.call(this,"");
};
saturn.core.DoubleDigest.__name__ = ["saturn","core","DoubleDigest"];
saturn.core.DoubleDigest.__super__ = saturn.core.DNA;
saturn.core.DoubleDigest.prototype = $extend(saturn.core.DNA.prototype,{
	theTemplate: null
	,theRes1: null
	,theRes2: null
	,leftProduct: null
	,centerProduct: null
	,rightProduct: null
	,setTemplate: function(template) {
		this.theTemplate = template;
	}
	,setRestrictionSite1: function(res1) {
		this.theRes1 = res1;
	}
	,setRestrictionSite2: function(res2) {
		this.theRes2 = res2;
	}
	,digest: function() {
		var cutSeq = this.theRes1.getAfterCutSequence(this.theTemplate);
		cutSeq = this.theRes2.getLastBeforeCutSequence(new saturn.core.DNA(cutSeq));
		this.centerProduct = new saturn.core.DNA(cutSeq);
		this.leftProduct = new saturn.core.DNA(this.theRes1.getBeforeCutSequence(this.theTemplate));
		this.rightProduct = new saturn.core.DNA(this.theRes2.getLastAfterCutSequence(this.theTemplate));
	}
	,getLeftProduct: function() {
		return this.leftProduct;
	}
	,getCenterProduct: function() {
		return this.centerProduct;
	}
	,getRightProduct: function() {
		return this.rightProduct;
	}
	,__class__: saturn.core.DoubleDigest
});
saturn.core.EUtils = $hxClasses["saturn.core.EUtils"] = function() {
};
saturn.core.EUtils.__name__ = ["saturn","core","EUtils"];
saturn.core.EUtils.getProteinsForGene = function(geneId,cb) {
	saturn.core.EUtils.getProteinGIsForGene(geneId,function(err,ids) {
		if(err != null) cb(err,null); else saturn.core.EUtils.getProteinInfo(ids,true,function(err1,objs) {
			cb(err1,objs);
		});
	});
};
saturn.core.EUtils.getProteinInfo = function(ids,lookupDNA,cb) {
	if(lookupDNA == null) lookupDNA = false;
	var c1 = saturn.core.EUtils.eutils.efetch({ db : "protein", id : ids, retmode : "xml"}).then(function(d) {
		if(!Object.prototype.hasOwnProperty.call(d,"GBSet")) {
			cb("Unable to retrieve proteins for  " + ids.toString(),null);
			return;
		}
		var objs;
		if((d.GBSet.GBSeq instanceof Array) && d.GBSet.GBSeq.__enum__ == null) objs = d.GBSet.GBSeq; else objs = [d.GBSet.GBSeq];
		if(objs == null || objs.length == 0) {
			cb("Unable to retrieve proteins for  " + ids.join(","),null);
			return;
		}
		var protObjs = [];
		var _g = 0;
		while(_g < objs.length) {
			var seqObj = objs[_g];
			++_g;
			var protein = new saturn.core.Protein(seqObj.GBSeq_sequence);
			protObjs.push(protein);
			protein.setMoleculeName(Reflect.field(seqObj,"GBSeq_accession-version"));
			if(Object.prototype.hasOwnProperty.call(seqObj,"GBSeq_other-seqids")) {
				var seqIdElems = Reflect.field(Reflect.field(seqObj,"GBSeq_other-seqids"),"GBSeqid");
				var _g1 = 0;
				while(_g1 < seqIdElems.length) {
					var seqIdElem = seqIdElems[_g1];
					++_g1;
					var seqId = seqIdElem;
					if(seqId.indexOf("gi|") == 0) {
						protein.setAlternativeName(seqId);
						break;
					}
				}
			}
			if(Object.prototype.hasOwnProperty.call(seqObj,"GBSeq_feature-table")) {
				var table = Reflect.field(seqObj,"GBSeq_feature-table");
				var features = table.GBFeature;
				var _g11 = 0;
				while(_g11 < features.length) {
					var feature = features[_g11];
					++_g11;
					if(feature.GBFeature_key == "CDS") {
						var feature_quals = feature.GBFeature_quals.GBQualifier;
						var _g2 = 0;
						while(_g2 < feature_quals.length) {
							var feature1 = feature_quals[_g2];
							++_g2;
							if(feature1.GBQualifier_name == "coded_by") {
								var acStr = feature1.GBQualifier_value;
								var parts = acStr.split(":");
								if(parts.length > 2) {
									cb("Parts greater than two for  " + protein.getMoleculeName(),null);
									return;
								} else {
									var dna = new saturn.core.DNA(null);
									var name = parts[0];
									dna.setMoleculeName(name);
									dna.addProtein("default",protein);
									protein.setReferenceCoordinates(parts[1]);
								}
							}
						}
					}
				}
			}
		}
		if(lookupDNA) {
			var dnaRefs = [];
			var _g3 = 0;
			while(_g3 < protObjs.length) {
				var protObj = protObjs[_g3];
				++_g3;
				dnaRefs.push(protObj.getDNA().getMoleculeName());
			}
			saturn.core.EUtils.getDNAForAccessions(dnaRefs,function(err,dnaObjs) {
				if(err != null) cb(err,null); else {
					var refMap = new haxe.ds.StringMap();
					var _g4 = 0;
					while(_g4 < dnaObjs.length) {
						var obj = dnaObjs[_g4];
						++_g4;
						var key = obj.getMoleculeName();
						if(__map_reserved[key] != null) refMap.setReserved(key,obj); else refMap.h[key] = obj;
					}
					var _g5 = 0;
					while(_g5 < protObjs.length) {
						var protObj1 = protObjs[_g5];
						++_g5;
						var dnaAccession = protObj1.getDNA().getMoleculeName();
						if(__map_reserved[dnaAccession] != null?refMap.existsReserved(dnaAccession):refMap.h.hasOwnProperty(dnaAccession)) {
							var dna1;
							dna1 = __map_reserved[dnaAccession] != null?refMap.getReserved(dnaAccession):refMap.h[dnaAccession];
							protObj1.setDNA(dna1);
							var coords = protObj1.getReferenceCoordinates().split("..");
							if(coords.length > 2) {
								cb("Invalid coordinate string for " + protObj1.getMoleculeName() + " " + protObj1.getReferenceCoordinates(),null);
								return;
							}
							dna1.setSequence(dna1.getRegion(Std.parseInt(coords[0]),Std.parseInt(coords[1])));
							var protSeq = dna1.getFrameTranslation(saturn.core.GeneticCodes.STANDARD,saturn.core.Frame.ONE);
						} else {
							cb(dnaAccession + " not found",null);
							return;
						}
					}
					cb(null,protObjs);
				}
			});
		} else cb(null,protObjs);
	});
	c1.catch(function(d){cb(d)});;
};
saturn.core.EUtils.getDNAForAccessions = function(accessions,cb) {
	var c1 = saturn.core.EUtils.eutils.efetch({ db : "nucleotide", id : accessions, retmode : "xml"}).then(function(d) {
		var objs;
		if((d.GBSet.GBSeq instanceof Array) && d.GBSet.GBSeq.__enum__ == null) objs = d.GBSet.GBSeq; else objs = [d.GBSet.GBSeq];
		if(objs == null || objs.length == 0) {
			cb("Unable to retrieve proteins for  " + accessions.join(","),null);
			return;
		}
		var dnaObjs = [];
		var _g = 0;
		while(_g < objs.length) {
			var seqObj = objs[_g];
			++_g;
			var dna = new saturn.core.DNA(seqObj.GBSeq_sequence);
			dnaObjs.push(dna);
			dna.setMoleculeName(Reflect.field(seqObj,"GBSeq_accession-version"));
			if(Object.prototype.hasOwnProperty.call(seqObj,"GBSeq_other-seqids")) {
				var seqIdElems = Reflect.field(Reflect.field(seqObj,"GBSeq_other-seqids"),"GBSeqid");
				var _g1 = 0;
				while(_g1 < seqIdElems.length) {
					var seqIdElem = seqIdElems[_g1];
					++_g1;
					var seqId = seqIdElem;
					if(seqId.indexOf("gi|") == 0) {
						dna.setAlternativeName(seqId);
						break;
					}
				}
			}
		}
		cb(null,dnaObjs);
	});
	c1.catch(function(d){cb(d)});;
};
saturn.core.EUtils.getProteinGIsForGene = function(geneId,cb) {
	var c1 = saturn.core.EUtils.eutils.esearch({ db : "gene", term : geneId}).then(saturn.core.EUtils.eutils.elink({ dbto : "protein"})).then(function(d) {
		saturn.core.Util.debug("");
		var found = false;
		if(Object.prototype.hasOwnProperty.call(d,"linksets")) {
			var linksets = d.linksets;
			if(linksets.length > 0) {
				if(Object.prototype.hasOwnProperty.call(linksets[0],"linksetdbs")) {
					var linksetdbs = linksets[0].linksetdbs;
					if(linksetdbs.length > 0) {
						var _g = 0;
						while(_g < linksetdbs.length) {
							var set = linksetdbs[_g];
							++_g;
							if(set.linkname == "gene_protein_refseq") {
								var ids = set.links;
								cb(null,ids);
								found = true;
								break;
							}
						}
					}
				}
			}
		}
		if(!found) cb("Unable to lookup gene entry " + geneId,null);
	});
	c1.catch(function(d){cb(d)});;
};
saturn.core.EUtils.insertProteins = function(objs,cb) {
	var run = null;
	run = function() {
		if(objs.length == 0) return;
		var protein = objs.pop();
		saturn.core.Util.debug("Inserting: " + protein.getMoleculeName());
		saturn.core.Protein.insertTranslation(protein.getDNA().getMoleculeName(),protein.getDNA().getAlternativeName(),protein.getDNA().getSequence(),"NUCLEOTIDE",protein.getMoleculeName(),protein.getAlternativeName(),protein.getSequence(),"PROTEIN","7158","GENE",function(err) {
			if(err != null) saturn.core.Util.debug(err); else run();
		});
	};
	run();
};
saturn.core.EUtils.getGeneInfo = function(geneId,cb) {
	saturn.core.Util.debug("Fetching gene record (tends to be very slow)");
	var c1 = saturn.core.EUtils.eutils.efetch({ db : "gene", id : geneId}).then(function(d) {
		var set1 = Reflect.field(d,"Entrezgene-Set");
		var set2 = Reflect.field(set1,"Entrezgene");
		var set3 = Reflect.field(set2,"Entrezgene_gene");
		var set4 = Reflect.field(set3,"Gene-ref");
		cb(null,{ symbol : Reflect.field(set4,"Gene-ref_locus"), description : Reflect.field(set4,"Gene-ref_desc")});
	});
	c1.catch(function(d){cb(d)});;
};
saturn.core.EUtils.prototype = {
	__class__: saturn.core.EUtils
};
saturn.core.EntityType = $hxClasses["saturn.core.EntityType"] = function() {
};
saturn.core.EntityType.__name__ = ["saturn","core","EntityType"];
saturn.core.EntityType.prototype = {
	id: null
	,name: null
	,__class__: saturn.core.EntityType
};
saturn.core.FastaEntity = $hxClasses["saturn.core.FastaEntity"] = function(name,sequence) {
	this.theName = name;
	this.theSequence = sequence;
};
saturn.core.FastaEntity.__name__ = ["saturn","core","FastaEntity"];
saturn.core.FastaEntity.handleStrippedNewLines = function(line) {
	var blockSizeCounts = new haxe.ds.IntMap();
	var whiteBlocks = line.split(" ");
	var _g = 0;
	while(_g < whiteBlocks.length) {
		var whiteBlock = whiteBlocks[_g];
		++_g;
		if(!blockSizeCounts.h.hasOwnProperty(whiteBlock.length)) blockSizeCounts.h[whiteBlock.length] = 0;
		var value = blockSizeCounts.h[whiteBlock.length] + 1;
		blockSizeCounts.h[whiteBlock.length] = value;
	}
	var blockLen = 0;
	var blockSizeCountMax = -1;
	var $it0 = blockSizeCounts.keys();
	while( $it0.hasNext() ) {
		var len = $it0.next();
		var blockSizeCount = blockSizeCounts.h[len];
		if(blockSizeCountMax < blockSizeCount) {
			blockSizeCountMax = blockSizeCount;
			blockLen = len;
		}
	}
	var lines = [];
	whiteBlocks.reverse();
	lines.unshift(whiteBlocks.shift());
	var header = "";
	var _g1 = 0;
	while(_g1 < whiteBlocks.length) {
		var whiteBlock1 = whiteBlocks[_g1];
		++_g1;
		if(whiteBlock1.length == blockLen) lines.unshift(whiteBlock1); else header = whiteBlock1 + " " + header;
	}
	lines.unshift(header);
	return lines;
};
saturn.core.FastaEntity.parseFasta = function(contents) {
	var seqObjs = [];
	var currentName = null;
	var currentSeqBuf = new StringBuf();
	var lines = contents.split("\n");
	if(lines.length == 1) lines = saturn.core.FastaEntity.handleStrippedNewLines(lines[0]);
	var numLines = lines.length;
	var _g = 0;
	while(_g < numLines) {
		var i = _g++;
		var seqLine = true;
		var line = lines[i];
		if(line.indexOf(">") > -1) seqLine = false;
		if(seqLine == true) if(line == null) currentSeqBuf.b += "null"; else currentSeqBuf.b += "" + line;
		if(seqLine == false || i == numLines - 1) {
			if(currentName != null) {
				var currentSeq = currentSeqBuf.b;
				if(currentSeq.length > 0) {
					seqObjs.push(new saturn.core.FastaEntity(HxOverrides.substr(currentName,1,currentName.length),currentSeq));
					currentSeqBuf = new StringBuf();
				}
			}
			if(seqLine == false) currentName = line;
		}
	}
	return seqObjs;
};
saturn.core.FastaEntity.formatFastaFile = function(header,sequence) {
	var buf = new StringBuf();
	buf.b += Std.string(">" + header + "\n");
	var sequenceLength = sequence.length - 1;
	var i = 0;
	while(true) {
		var j = i + 50;
		if(j > sequenceLength) j = sequenceLength + 1;
		window.console.log("Hello" + i + "/" + j);
		buf.add(sequence.substring(i,j) + "\n");
		i = j;
		if(i >= sequenceLength + 1) break;
	}
	return buf.b;
};
saturn.core.FastaEntity.prototype = {
	theName: null
	,theSequence: null
	,getName: function() {
		return this.theName;
	}
	,getSequence: function() {
		return this.theSequence;
	}
	,append: function(sequence) {
		this.theSequence = this.theSequence + sequence;
	}
	,guessType: function() {
		var c = 0;
		var l = 1;
		var sLen = this.theSequence.length;
		var pos = 0;
		while(sLen > pos) {
			var res = this.theSequence.charAt(pos);
			if(!saturn.core.FastaEntity.DNA_CHARS.exists(res)) {
				c++;
				if(c > l) return saturn.core.FastaEntryType.PROTEIN;
			}
			pos++;
		}
		return saturn.core.FastaEntryType.DNA;
	}
	,__class__: saturn.core.FastaEntity
};
saturn.core.FastaEntryType = $hxClasses["saturn.core.FastaEntryType"] = { __ename__ : ["saturn","core","FastaEntryType"], __constructs__ : ["DNA","PROTEIN"] };
saturn.core.FastaEntryType.DNA = ["DNA",0];
saturn.core.FastaEntryType.DNA.toString = $estr;
saturn.core.FastaEntryType.DNA.__enum__ = saturn.core.FastaEntryType;
saturn.core.FastaEntryType.PROTEIN = ["PROTEIN",1];
saturn.core.FastaEntryType.PROTEIN.toString = $estr;
saturn.core.FastaEntryType.PROTEIN.__enum__ = saturn.core.FastaEntryType;
saturn.core.FileShim = $hxClasses["saturn.core.FileShim"] = function(name,base64) {
	this.name = name;
	this.base64 = base64;
};
saturn.core.FileShim.__name__ = ["saturn","core","FileShim"];
saturn.core.FileShim.prototype = {
	name: null
	,base64: null
	,getAsText: function() {
		return window.atob(this.base64);
	}
	,getAsArrayBuffer: function() {
		var bstr = window.atob(this.base64);
		var buffer = new Uint8Array(bstr.length);
		var _g1 = 0;
		var _g = bstr.length;
		while(_g1 < _g) {
			var i = _g1++;
			buffer[i] = HxOverrides.cca(bstr,i);
		}
		return buffer;
	}
	,__class__: saturn.core.FileShim
};
saturn.core.Generator = $hxClasses["saturn.core.Generator"] = function(limit) {
	this.limit = limit;
	this.processed = 0;
	this.done = false;
	this.items = [];
	this.maxAtOnce = 1;
};
saturn.core.Generator.__name__ = ["saturn","core","Generator"];
saturn.core.Generator.prototype = {
	limit: null
	,processed: null
	,done: null
	,cb: null
	,endCb: null
	,maxAtOnce: null
	,items: null
	,push: function(item) {
		this.items.push(item);
	}
	,pop: function(item) {
		return this.items.pop();
	}
	,die: function(err) {
		saturn.core.Util.debug(err);
		this.stop(err);
	}
	,stop: function(err) {
		this.finished();
		this.endCb(err);
	}
	,next: function() {
		var _g = this;
		if(this.done && this.items.length == 0 || this.limit != -1 && this.processed == this.limit) {
			this.endCb(null);
			return;
		} else if(this.items.length > 0) {
			if(this.maxAtOnce != 1) {
				var list = [];
				var added = 0;
				while(this.items.length > 0) {
					var item = this.items.pop();
					list.push(item);
					this.processed++;
					added++;
					if(added == this.maxAtOnce) break;
				}
				this.cb(list,function() {
					haxe.Timer.delay($bind(_g,_g.next),1);
				},this);
			} else {
				var item1 = this.items.pop();
				this.processed++;
				this.cb(item1,function() {
					haxe.Timer.delay($bind(_g,_g.next),1);
				},this);
			}
		} else {
			saturn.core.Util.debug("waiting");
			haxe.Timer.delay($bind(this,this.next),100);
		}
	}
	,count: function() {
		return this.processed;
	}
	,setMaxAtOnce: function(maxAtOnce) {
		this.maxAtOnce = maxAtOnce;
	}
	,setLimit: function(limit) {
		this.limit = limit;
	}
	,onEnd: function(cb) {
		this.endCb = cb;
	}
	,onNext: function(cb) {
		this.cb = cb;
		this.next();
	}
	,finished: function() {
		this.done = true;
	}
	,__class__: saturn.core.Generator
};
saturn.core.GridVar = $hxClasses["saturn.core.GridVar"] = function() {
	this.configCollapse = false;
	this.fit = true;
	this.padding = true;
	this.xCellSize = 10;
	this.showXLabels = true;
	this.styleTableDefinition = { columnDefs : [{ text : "Annotation Group", dataIndex : "data_type", editor : "textfield"},{ text : "Annotation Label", dataIndex : "label", editor : "textfield"},{ text : "Apply to rows", dataIndex : "columns", editor : "textfield"},{ text : "Mapping Value", dataIndex : "mapping", editor : "textfield"},{ text : "Color", dataIndex : "color", editor : "textfield"},{ text : "Style", dataIndex : "style", editor : "textfield"}], title : "Styles", data : [], raw : null};
	this.dataTableDefinition = { title : "Raw Data", data : [], columnDefs : [{ text : "Position", dataIndex : "position", editor : "textfield"},{ text : "Domain", dataIndex : "Domain", editor : "textfield"}], raw : null};
	this.annotationTableDefinition = { columnDefs : [{ text : "Start", dataIndex : "start", editor : "textfield"},{ text : "Stop", dataIndex : "stop", editor : "textfield"},{ text : "Value", dataIndex : "value", editor : "textfield"},{ text : "Row", dataIndex : "column", editor : "textfield"}], title : "Annotations", data : [], raw : null};
};
saturn.core.GridVar.__name__ = ["saturn","core","GridVar"];
saturn.core.GridVar.prototype = {
	dataTableDefinition: null
	,styleTableDefinition: null
	,annotationTableDefinition: null
	,fileContent: null
	,showXLabels: null
	,xCellSize: null
	,padding: null
	,fit: null
	,configCollapse: null
	,lines: null
	,setShowXLabels: function(show) {
		this.showXLabels = show;
	}
	,setFit: function(fit) {
		this.fit = fit;
	}
	,addStyle: function(label,group,styleCode,styleShape,styleColour,columns) {
		if(columns == null) columns = "*";
		this.styleTableDefinition.data.push({ data_type : group, mapping : styleCode, style : styleShape, color : styleColour, label : label, columns : columns});
	}
	,setLength: function(length) {
		this.dataTableDefinition.data = [];
		if(this.dataTableDefinition.columnDefs.length == 0) this.dataTableDefinition.columnDefs.push({ dataIndex : "position", editor : "textfield", text : "Position"});
		var _g = 0;
		while(_g < length) {
			var i = _g++;
			var obj = { };
			var j = 0;
			var _g1 = 0;
			var _g2 = this.dataTableDefinition.columnDefs;
			while(_g1 < _g2.length) {
				var columnDef = _g2[_g1];
				++_g1;
				if(j == 0) obj[columnDef.dataIndex] = i; else obj[columnDef.dataIndex] = null;
				j++;
			}
			this.dataTableDefinition.data.push(obj);
		}
	}
	,setSequence: function(sequence) {
		this.dataTableDefinition.data = [];
		if(this.dataTableDefinition.columnDefs.length == 0) this.dataTableDefinition.columnDefs.push({ dataIndex : "position", editor : "textfield", text : "Position"});
		var _g1 = 0;
		var _g = sequence.length;
		while(_g1 < _g) {
			var i = _g1++;
			var obj = { };
			var j = 0;
			var _g2 = 0;
			var _g3 = this.dataTableDefinition.columnDefs;
			while(_g2 < _g3.length) {
				var columnDef = _g3[_g2];
				++_g2;
				if(j == 0) Reflect.setField(obj,columnDef.dataIndex,sequence.charAt(i)); else obj[columnDef.dataIndex] = null;
				j++;
			}
			this.dataTableDefinition.data.push(obj);
		}
	}
	,addAnnotation: function(type,start,stop,styleCode) {
		if(stop > this.dataTableDefinition.data.length) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Annotation stop coordinate is larger than the table dimension"));
		var _g = start;
		while(_g < stop) {
			var i = _g++;
			this.dataTableDefinition.data[i][type] = styleCode;
		}
		var match = false;
		var _g1 = 0;
		var _g11 = this.dataTableDefinition.columnDefs;
		while(_g1 < _g11.length) {
			var columnDef = _g11[_g1];
			++_g1;
			if(Reflect.field(columnDef,"dataIndex") == type) {
				match = true;
				break;
			}
		}
		this.annotationTableDefinition.data.push({ start : start, stop : stop, value : styleCode, column : type});
		if(!match) this.dataTableDefinition.columnDefs.push({ dataIndex : type, editor : "textfield", text : type});
	}
	,setStyle: function(annotationKey,colour,value,styleName,styleGroup) {
		var _g1 = 0;
		var _g = this.dataTableDefinition.data.length;
		while(_g1 < _g) {
			var j = _g1++;
			if(Reflect.field(this.dataTableDefinition.data[j],annotationKey) == 1) this.dataTableDefinition.data[j][annotationKey] = value;
		}
		this.addStyle(styleName,styleGroup,value,"rec",colour,"*");
	}
	,__class__: saturn.core.GridVar
};
saturn.core.HelloType = $hxClasses["saturn.core.HelloType"] = function() {
};
saturn.core.HelloType.__name__ = ["saturn","core","HelloType"];
saturn.core.HelloType.prototype = {
	__class__: saturn.core.HelloType
};
saturn.core.Home = $hxClasses["saturn.core.Home"] = function() {
};
saturn.core.Home.__name__ = ["saturn","core","Home"];
saturn.core.Home.prototype = {
	__class__: saturn.core.Home
};
saturn.core.Ligation = $hxClasses["saturn.core.Ligation"] = function(acceptor,donor) {
	this.theAcceptor = acceptor;
	this.theDonor = donor;
	saturn.core.DNA.call(this,"");
	this.calculateProduct();
};
saturn.core.Ligation.__name__ = ["saturn","core","Ligation"];
saturn.core.Ligation.__super__ = saturn.core.DNA;
saturn.core.Ligation.prototype = $extend(saturn.core.DNA.prototype,{
	theAcceptor: null
	,theDonor: null
	,setAcceptor: function(acceptor) {
		this.theAcceptor = acceptor;
	}
	,setDonor: function(donor) {
		this.theDonor = donor;
	}
	,calculateProduct: function() {
		if(this.theAcceptor != null && this.theDonor != null && this.theAcceptor.getLeftProduct() != null && this.theDonor.getCenterProduct() != null && this.theAcceptor.getRightProduct() != null) this.setSequence(this.theAcceptor.getLeftProduct().getSequence() + this.theDonor.getCenterProduct().getSequence() + this.theAcceptor.getRightProduct().getSequence());
	}
	,__class__: saturn.core.Ligation
});
saturn.core.LocusPosition = $hxClasses["saturn.core.LocusPosition"] = function() {
};
saturn.core.LocusPosition.__name__ = ["saturn","core","LocusPosition"];
saturn.core.LocusPosition.prototype = {
	start: null
	,end: null
	,missMatchPositions: null
	,__class__: saturn.core.LocusPosition
};
saturn.core.MSA = $hxClasses["saturn.core.MSA"] = function(msaMap,seqOrder) {
	this.blockSize = 60;
	if(msaMap == null) this.idToAlnStr = new haxe.ds.StringMap(); else this.idToAlnStr = msaMap;
	if(seqOrder == null) seqOrder = []; else this.seqOrder = seqOrder;
	this.calculateStats();
};
saturn.core.MSA.__name__ = ["saturn","core","MSA"];
saturn.core.MSA.padString = function(text,padLen) {
	var buf_b = "";
	if(text == null) buf_b += "null"; else buf_b += "" + text;
	var _g1 = 0;
	var _g = padLen - text.length;
	while(_g1 < _g) {
		var i = _g1++;
		buf_b += " ";
	}
	return buf_b;
};
saturn.core.MSA.prototype = {
	idToAlnStr: null
	,seqOrder: null
	,psi: null
	,blockSize: null
	,getAlignmentRegion: function() {
		var lines = [];
		var _g = 0;
		var _g1 = this.seqOrder;
		while(_g < _g1.length) {
			var id = _g1[_g];
			++_g;
			if(id != " ") lines.push(this.idToAlnStr.get(id));
		}
		return lines;
	}
	,fetchNucAlignmentToResidue: function(queryName,residueNumber,targetName) {
		if(!this.idToAlnStr.exists(queryName)) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Invalid sequence name"));
		var alignmentString = this.idToAlnStr.get(queryName);
		var realPosition = -1;
		var _g1 = 0;
		var _g = alignmentString.length;
		while(_g1 < _g) {
			var i = _g1++;
			if(alignmentString.charAt(i) != "-") {
				realPosition++;
				if(residueNumber < 0) {
					var j = i + residueNumber;
					if(j < 0) throw new js._Boot.HaxeError(new saturn.util.HaxeException(residueNumber + "isn't within the alignment")); else return this.fetchNucAtAlignmentColumn(j,targetName);
				} else if(realPosition == residueNumber) return this.fetchNucAtAlignmentColumn(i,targetName);
			}
		}
		throw new js._Boot.HaxeError(new saturn.util.HaxeException(residueNumber + " not found for " + queryName));
	}
	,fetchNucAtAlignmentColumn: function(column,name) {
		if(!this.idToAlnStr.exists(name)) throw new js._Boot.HaxeError(new saturn.util.HaxeException("Invalid sequence name"));
		var alignmentString = this.idToAlnStr.get(name);
		if(alignmentString.length < column) throw new js._Boot.HaxeError(new saturn.util.HaxeException("" + column + " out of range 0..." + (alignmentString.length - 1)));
		return alignmentString.charAt(column);
	}
	,calculateStats: function() {
		if(this.idToAlnStr.exists(" ")) {
			var idCount = 0;
			var idLine = this.idToAlnStr.get(" ");
			var _g1 = 0;
			var _g = idLine.length;
			while(_g1 < _g) {
				var i = _g1++;
				if(idLine.charAt(i) == "*") idCount++;
			}
			this.psi = idCount / idLine.length;
		}
	}
	,getPSI: function() {
		return this.psi;
	}
	,inverseComplement: function() {
		var $it0 = this.idToAlnStr.keys();
		while( $it0.hasNext() ) {
			var id = $it0.next();
			var alnStr = this.idToAlnStr.get(id);
			var i = alnStr.length;
			var ic_b = "";
			while(i > -1) {
				var c = alnStr.charAt(i);
				if(c == "A") c = "T"; else if(c == "T") c = "A"; else if(c == "C") c = "G"; else if(c == "G") c = "C";
				if(c == null) ic_b += "null"; else ic_b += "" + c;
				i -= 1;
			}
			this.idToAlnStr.set(id,ic_b);
		}
	}
	,getSequence: function(name) {
		if(this.idToAlnStr.exists(name)) {
			var sequence = this.idToAlnStr.get(name);
			sequence = StringTools.replace(sequence,"-","");
			return sequence;
		} else return "";
	}
	,getAlignment: function(name) {
		if(this.idToAlnStr.exists(name)) {
			var sequence = this.idToAlnStr.get(name);
			return sequence;
		} else return "";
	}
	,getFirstSequence: function() {
		return this.getSequence(this.seqOrder[0]);
	}
	,getFirstName: function() {
		return this.seqOrder[0];
	}
	,toString: function() {
		var maxIdLen = -1;
		var $it0 = this.idToAlnStr.keys();
		while( $it0.hasNext() ) {
			var id = $it0.next();
			if(id.length > maxIdLen) maxIdLen = id.length;
		}
		var idToPadId = new haxe.ds.StringMap();
		var $it1 = this.idToAlnStr.keys();
		while( $it1.hasNext() ) {
			var id1 = $it1.next();
			var value = saturn.core.MSA.padString(id1,maxIdLen);
			if(__map_reserved[id1] != null) idToPadId.setReserved(id1,value); else idToPadId.h[id1] = value;
		}
		var buf = new StringBuf();
		buf.b += "CLUSTAL O(1.2.0) multiple sequence alignment\n\n\n";
		var i = 0;
		var l = this.idToAlnStr.get(this.seqOrder[0]).length;
		while(true) {
			var _g = 0;
			var _g1 = this.seqOrder;
			while(_g < _g1.length) {
				var id2 = _g1[_g];
				++_g;
				buf.add((__map_reserved[id2] != null?idToPadId.getReserved(id2):idToPadId.h[id2]) + "      " + (function($this) {
					var $r;
					var _this = $this.idToAlnStr.get(id2);
					$r = HxOverrides.substr(_this,i,$this.blockSize);
					return $r;
				}(this)) + "\n");
			}
			i += this.blockSize;
			if(i > l - 1) break;
		}
		buf.b += "\n\n";
		return buf.b;
	}
	,toGrid: function() {
		var g = new saturn.core.GridVar();
		var baseItem = this.getFirstName();
		var baseSequence = this.getAlignment(baseItem);
		var overlaps = [];
		g.dataTableDefinition.raw = this;
		var alns = [];
		var columnOrder = [];
		var _g1 = 0;
		var _g = this.seqOrder.length - 1;
		while(_g1 < _g) {
			var i = _g1++;
			var column = this.seqOrder[i];
			if(column != baseItem) {
				columnOrder.push(column);
				alns.push(this.getAlignment(column));
				g.dataTableDefinition.columnDefs.unshift({ text : column, dataIndex : column, editor : "textfield"});
			}
		}
		g.addStyle("Aligned","Styles","1","rec","grey","*");
		g.dataTableDefinition.columnDefs.unshift({ text : baseItem, dataIndex : "residue", editor : "textfield"});
		var _g11 = 0;
		var _g2 = baseSequence.length;
		while(_g11 < _g2) {
			var i1 = _g11++;
			var $char = baseSequence.charAt(i1);
			if($char != "-") {
				var row = { 'residue' : $char};
				var _g3 = 0;
				var _g21 = columnOrder.length;
				while(_g3 < _g21) {
					var j = _g3++;
					if(alns[j].charAt(i1) != "-") row[columnOrder[j]] = "1";
				}
				g.dataTableDefinition.data.push(row);
			}
		}
		return g;
	}
	,__class__: saturn.core.MSA
};
saturn.core.TableHelperData = $hxClasses["saturn.core.TableHelperData"] = function(objs) {
	this.data = [];
	if(objs != null) this.setObjects(objs);
};
saturn.core.TableHelperData.__name__ = ["saturn","core","TableHelperData"];
saturn.core.TableHelperData.__interfaces__ = [saturn.client.programs.TableHelperModelData];
saturn.core.TableHelperData.prototype = {
	data: null
	,modelsToCopy: null
	,models: null
	,objs: null
	,getRawModels: function() {
		return null;
	}
	,setRawModels: function(models) {
		null;
		return;
	}
	,setData: function(obj) {
		this.data = obj;
	}
	,setModelsToCopy: function(models) {
		this.modelsToCopy = models;
	}
	,getModelsToCopy: function() {
		return this.modelsToCopy;
	}
	,setModels: function(models) {
		this.models = models;
	}
	,getModels: function() {
		return this.models;
	}
	,getData: function(obj) {
		return this.data;
	}
	,setObjects: function(objs) {
		this.objs = objs;
	}
	,getObjects: function() {
		return this.objs;
	}
	,__class__: saturn.core.TableHelperData
};
saturn.core.MultiAlleleHelperData = $hxClasses["saturn.core.MultiAlleleHelperData"] = function() {
	this.data = [];
	saturn.core.TableHelperData.call(this);
};
saturn.core.MultiAlleleHelperData.__name__ = ["saturn","core","MultiAlleleHelperData"];
saturn.core.MultiAlleleHelperData.__super__ = saturn.core.TableHelperData;
saturn.core.MultiAlleleHelperData.prototype = $extend(saturn.core.TableHelperData.prototype,{
	setPlateName: function(plateName) {
		this.data.plateName = plateName;
	}
	,getPlateName: function() {
		return this.data.plateName;
	}
	,__class__: saturn.core.MultiAlleleHelperData
});
saturn.core.MultiConstructHelperData = $hxClasses["saturn.core.MultiConstructHelperData"] = function() {
	this.data = [];
	saturn.core.TableHelperData.call(this);
};
saturn.core.MultiConstructHelperData.__name__ = ["saturn","core","MultiConstructHelperData"];
saturn.core.MultiConstructHelperData.__super__ = saturn.core.TableHelperData;
saturn.core.MultiConstructHelperData.prototype = $extend(saturn.core.TableHelperData.prototype,{
	plateName: null
	,rawModels: null
	,setPlateName: function(plateName) {
		this.plateName = plateName;
	}
	,getPlateName: function() {
		return this.plateName;
	}
	,getRawModels: function() {
		return this.rawModels;
	}
	,setRawModels: function(models) {
		this.rawModels = models;
	}
	,__class__: saturn.core.MultiConstructHelperData
});
saturn.core.PDBParser = $hxClasses["saturn.core.PDBParser"] = function() {
};
saturn.core.PDBParser.__name__ = ["saturn","core","PDBParser"];
saturn.core.PDBParser.extractPDBID = function(fileName) {
	return fileName;
};
saturn.core.PDBParser.getExpression = function(fileContent,pdbCode,outFd) {
	var lines = fileContent.split("\n");
	var molToChain = new haxe.ds.StringMap();
	var attributes = new haxe.ds.StringMap();
	var readingChains = false;
	var value = new haxe.ds.StringMap();
	attributes.set("SOURCE",value);
	var value1 = new haxe.ds.StringMap();
	attributes.set("CHAINS",value1);
	if(__map_reserved.PDB_CODE != null) attributes.setReserved("PDB_CODE",pdbCode); else attributes.h["PDB_CODE"] = pdbCode;
	var currentMolId = "-1";
	var srcMolId = "-1";
	var _g = 0;
	while(_g < lines.length) {
		var line = lines[_g];
		++_g;
		var type = HxOverrides.substr(line,0,6);
		type = saturn.core.PDBParser.whiteSpaceReg.replace(type,"");
		var desc = HxOverrides.substr(line,10,70);
		if(type == "SOURCE") {
			if(saturn.core.PDBParser.reg_mol_id.match(desc)) {
				srcMolId = saturn.core.PDBParser.reg_mol_id.matched(1);
				srcMolId = saturn.core.PDBParser.whiteSpaceReg.replace(srcMolId,"");
				(__map_reserved.SOURCE != null?attributes.getReserved("SOURCE"):attributes.h["SOURCE"]).set(srcMolId,new haxe.ds.StringMap());
				continue;
			}
		}
		if(type == "REVDAT") {
			var modType = HxOverrides.substr(line,31,1);
			if(modType == "0") {
				var relDate = line.substring(13,22);
				if(__map_reserved.RELDATE != null) attributes.setReserved("RELDATE",relDate); else attributes.h["RELDATE"] = relDate;
			}
		}
		if(saturn.core.PDBParser.attribute_to_regex.exists(type)) {
			var $it0 = (function($this) {
				var $r;
				var this1 = saturn.core.PDBParser.attribute_to_regex.get(type);
				$r = this1.keys();
				return $r;
			}(this));
			while( $it0.hasNext() ) {
				var attribute_name = $it0.next();
				var regex;
				var this2 = saturn.core.PDBParser.attribute_to_regex.get(type);
				regex = this2.get(attribute_name);
				if(type == "SOURCE") {
					if(regex.match(desc)) {
						var attribute_value = regex.matched(1);
						if(type == "SOURCE") {
							console.log(srcMolId);
							(__map_reserved.SOURCE != null?attributes.getReserved("SOURCE"):attributes.h["SOURCE"]).get(srcMolId).set(attribute_name,attribute_value);
						}
					}
				} else if(regex.match(line)) {
					var attribute_value1 = regex.matched(1);
					if(__map_reserved[attribute_name] != null?attributes.existsReserved(attribute_name):attributes.h.hasOwnProperty(attribute_name)) {
						var value2 = Std.string(__map_reserved[attribute_name] != null?attributes.getReserved(attribute_name):attributes.h[attribute_name]) + attribute_value1;
						attributes.set(attribute_name,value2);
					} else if(__map_reserved[attribute_name] != null) attributes.setReserved(attribute_name,attribute_value1); else attributes.h[attribute_name] = attribute_value1;
				}
			}
		} else if(saturn.core.PDBParser.attribute_to_range.exists(type)) {
			if(type == "REMARK") {
				var remark_id = HxOverrides.substr(line,7,9);
				remark_id = saturn.core.PDBParser.whiteSpaceReg.replace(remark_id,"");
				type = type + ":" + remark_id;
			}
			var $it1 = (function($this) {
				var $r;
				var this3 = saturn.core.PDBParser.attribute_to_range.get(type);
				$r = this3.keys();
				return $r;
			}(this));
			while( $it1.hasNext() ) {
				var attribute_name1 = $it1.next();
				var regex1;
				var this4;
				var this5 = saturn.core.PDBParser.attribute_to_range.get(type);
				this4 = this5.get(attribute_name1);
				regex1 = this4.get("REGEX");
				if(regex1 != null) {
				}
				var start;
				var this6;
				var this7 = saturn.core.PDBParser.attribute_to_range.get(type);
				this6 = this7.get(attribute_name1);
				start = this6.get("START");
				var stop;
				var this8;
				var this9 = saturn.core.PDBParser.attribute_to_range.get(type);
				this8 = this9.get(attribute_name1);
				stop = this8.get("STOP");
				var attribute_value2 = line.substring(start,stop);
				attribute_value2 = saturn.core.PDBParser.re_terminalWhiteSpace.replace(attribute_value2,"");
				if(__map_reserved[attribute_name1] != null?attributes.existsReserved(attribute_name1):attributes.h.hasOwnProperty(attribute_name1)) {
					var value3 = Std.string(__map_reserved[attribute_name1] != null?attributes.getReserved(attribute_name1):attributes.h[attribute_name1]) + attribute_value2;
					attributes.set(attribute_name1,value3);
				} else if(__map_reserved[attribute_name1] != null) attributes.setReserved(attribute_name1,attribute_value2); else attributes.h[attribute_name1] = attribute_value2;
			}
		} else if(type == "COMPND") {
			var desc1 = HxOverrides.substr(line,10,70);
			if(saturn.core.PDBParser.reg_mol_id.match(desc1)) {
				var molId = saturn.core.PDBParser.reg_mol_id.matched(1);
				currentMolId = saturn.core.PDBParser.whiteSpaceReg.replace(molId,"");
				var value4 = [];
				if(__map_reserved[currentMolId] != null) molToChain.setReserved(currentMolId,value4); else molToChain.h[currentMolId] = value4;
				readingChains = false;
			} else {
				var chainStr = "";
				if(readingChains) chainStr = line.substring(10,80); else if(saturn.core.PDBParser.reg_mol_chains.match(desc1)) chainStr = saturn.core.PDBParser.reg_mol_chains.matched(1); else continue;
				readingChains = line.indexOf(";") == -1;
				var chainList = [];
				if(chainStr.indexOf(",") != -1) {
					chainList = chainStr.split(",");
					var _g2 = 0;
					var _g1 = chainList.length;
					while(_g2 < _g1) {
						var i = _g2++;
						chainList[i] = saturn.core.PDBParser.whiteSpaceReg.replace(chainList[i],"");
					}
				} else chainList.push(saturn.core.PDBParser.whiteSpaceReg.replace(chainStr,""));
				var _g21 = 0;
				var _g11 = chainList.length;
				while(_g21 < _g11) {
					var i1 = _g21++;
					(__map_reserved[currentMolId] != null?molToChain.getReserved(currentMolId):molToChain.h[currentMolId]).push(chainList[i1]);
					(__map_reserved.CHAINS != null?attributes.getReserved("CHAINS"):attributes.h["CHAINS"]).set(chainList[i1],currentMolId);
				}
			}
		} else if(type == "ATOM  " || type == "HETATM") break;
	}
	if(outFd != null) {
		var keyIt = (__map_reserved.CHAINS != null?attributes.getReserved("CHAINS"):attributes.h["CHAINS"]).keys();
		while( keyIt.hasNext() ) {
			var chain = keyIt.next();
			var molId1 = (__map_reserved.CHAINS != null?attributes.getReserved("CHAINS"):attributes.h["CHAINS"]).get(chain);
			outFd.writeString(pdbCode + "~" + chain + "~" + molId1 + "~" + Std.string(__map_reserved.DEPOSITION_DATE != null?attributes.getReserved("DEPOSITION_DATE"):attributes.h["DEPOSITION_DATE"]) + "~" + Std.string(__map_reserved.HIGH_RES != null?attributes.getReserved("HIGH_RES"):attributes.h["HIGH_RES"]) + "~" + Std.string(__map_reserved.EXP_TYPE != null?attributes.getReserved("EXP_TYPE"):attributes.h["EXP_TYPE"]) + "~" + StringTools.replace(__map_reserved.TITLE != null?attributes.getReserved("TITLE"):attributes.h["TITLE"],"~","-") + "~" + Std.string(__map_reserved.AUTHOR != null?attributes.getReserved("AUTHOR"):attributes.h["AUTHOR"]));
			if((__map_reserved.SOURCE != null?attributes.getReserved("SOURCE"):attributes.h["SOURCE"]).exists(molId1)) {
				var source_def = (__map_reserved.SOURCE != null?attributes.getReserved("SOURCE"):attributes.h["SOURCE"]).get(molId1);
				var _g3 = 0;
				var _g12 = saturn.core.PDBParser.sourceOrder;
				while(_g3 < _g12.length) {
					var col = _g12[_g3];
					++_g3;
					if(source_def.exists(col)) outFd.writeString("~" + source_def.get(col)); else outFd.writeString("~-");
				}
			} else {
				var _g4 = 0;
				var _g13 = saturn.core.PDBParser.sourceOrder;
				while(_g4 < _g13.length) {
					var col1 = _g13[_g4];
					++_g4;
					outFd.writeString("~-");
				}
			}
			outFd.writeString("~" + Std.string(__map_reserved.RELDATE != null?attributes.getReserved("RELDATE"):attributes.h["RELDATE"]));
			outFd.writeString("\n");
		}
	}
	return attributes;
};
saturn.core.PDBParser.getSequences = function(fileContent,pdbCode,fastaFd) {
	var lines = fileContent.split("\n");
	var lastResNum = "-1A";
	var lastChain = "0000000";
	var chainsSeen = new haxe.ds.StringMap();
	var seqResChains = new haxe.ds.StringMap();
	var skipping = false;
	var atomReached = false;
	var fastaObjs = [];
	var fastaEntity = null;
	var first = true;
	var _g = 0;
	while(_g < lines.length) {
		var line = lines[_g];
		++_g;
		var type = HxOverrides.substr(line,0,6);
		if(atomReached == false && type == "SEQRES") {
			var chain = HxOverrides.substr(line,11,1);
			if(chain != lastChain) {
				if(first) first = false; else if(fastaFd != null) fastaFd.writeString("\n");
				lastChain = chain;
				{
					if(__map_reserved[chain] != null) seqResChains.setReserved(chain,"Y"); else seqResChains.h[chain] = "Y";
					"Y";
				}
				if(fastaEntity != null) fastaObjs.push(fastaEntity);
				if(fastaFd == null) fastaEntity = new saturn.core.FastaEntity(">" + pdbCode + "_S_" + chain + "\n",""); else fastaFd.writeString(">" + pdbCode + "_S_" + chain + "\n");
			}
			var resListStr = HxOverrides.substr(line,19,51);
			var resStrs = saturn.core.PDBParser.whiteSpaceReg.split(resListStr);
			var _g1 = 0;
			while(_g1 < resStrs.length) {
				var resName = resStrs[_g1];
				++_g1;
				if(resName == null || resName == "") continue;
				var singleResName = saturn.core.PDBParser.pdb3To1.get(resName);
				if(singleResName == null) singleResName = "X";
				if(fastaFd == null) fastaEntity.append(singleResName); else fastaFd.writeString(singleResName);
			}
		}
		if(type == "TER   ") lastChain = "0000000";
		if(type == "ATOM  " || type == "HETATM") {
			if(atomReached == false) {
				lastChain = "0000000";
				atomReached = true;
			}
			var resNum = HxOverrides.substr(line,22,4);
			if(lastResNum != resNum) lastResNum = resNum; else continue;
			var chain1 = HxOverrides.substr(line,21,1);
			if(lastChain != chain1) {
				lastChain = chain1;
				if((__map_reserved[chain1] != null?chainsSeen.existsReserved(chain1):chainsSeen.h.hasOwnProperty(chain1)) || !(__map_reserved[chain1] != null?seqResChains.existsReserved(chain1):seqResChains.h.hasOwnProperty(chain1))) {
					skipping = true;
					continue;
				} else skipping = false;
				{
					if(__map_reserved[chain1] != null) chainsSeen.setReserved(chain1,"Y"); else chainsSeen.h[chain1] = "Y";
					"Y";
				}
				var chain2 = saturn.core.PDBParser.whiteSpaceReg.replace(chain1,"");
				var resNum1 = saturn.core.PDBParser.whiteSpaceReg.replace(resNum,"");
				if(first) first = false; else if(fastaFd != null) fastaFd.writeString("\n");
				if(fastaFd != null) fastaFd.writeString(">" + pdbCode + "_A_" + chain2 + "_" + resNum1 + "\n"); else {
					if(fastaEntity != null) fastaObjs.push(fastaEntity);
					fastaEntity = new saturn.core.FastaEntity(">" + pdbCode + "_A_" + chain2 + "_" + resNum1 + "\n","");
				}
			}
			if(skipping == false) {
				var resName1 = HxOverrides.substr(line,17,3);
				var singleResName1 = saturn.core.PDBParser.pdb3To1.get(resName1);
				if(singleResName1 == null) singleResName1 = "X";
				if(fastaFd != null) fastaFd.writeString(singleResName1); else fastaEntity.append(singleResName1);
			}
		}
	}
	if(fastaFd != null) fastaFd.writeString("\n");
	fastaObjs.push(fastaEntity);
	return fastaObjs;
};
saturn.core.PDBParser.prototype = {
	__class__: saturn.core.PDBParser
};
saturn.core.Primer = $hxClasses["saturn.core.Primer"] = function(nucSeq) {
	this.val_extInFrame = false;
	this.extLength = -1;
	saturn.core.DNA.call(this,nucSeq);
	this.setSequence(nucSeq);
};
saturn.core.Primer.__name__ = ["saturn","core","Primer"];
saturn.core.Primer.__super__ = saturn.core.DNA;
saturn.core.Primer.prototype = $extend(saturn.core.DNA.prototype,{
	extLength: null
	,val_extInFrame: null
	,theType: null
	,set5PrimeExtensionLength: function(length) {
		this.extLength = length;
	}
	,get5PrimeExtensionLength: function() {
		return this.extLength;
	}
	,set5PrimeExtension: function(extNucSeq) {
		var rawPrimer = this.getSequence();
		if(rawPrimer == null) rawPrimer = "";
		this.setSequence(extNucSeq + rawPrimer);
		this.set5PrimeExtensionLength(extNucSeq.length);
	}
	,has5PrimeExtension: function() {
		if(this.extLength > 0) return true; else return false;
	}
	,get5PrimeExtensionSequence: function() {
		if(this.extLength > -1) {
			var _this = this.getSequence();
			return HxOverrides.substr(_this,0,this.extLength);
		} else return "";
	}
	,extend3Prime: function(postSeq) {
		var primerExtensionSeq = this.get5PrimeExtensionSequence();
		this.setSequence(postSeq);
		this.set5PrimeExtension(primerExtensionSeq);
	}
	,is3PrimeExtended: function() {
		if(this.has5PrimeExtension()) {
			if(this.get5PrimeExtensionLength() < this.getLength()) return true;
		}
		return false;
	}
	,get3PrimeExtendedSequence: function() {
		if(this.has5PrimeExtension()) {
			if(this.get5PrimeExtensionLength() < this.getLength()) return this.sequence.substring(this.get5PrimeExtensionLength(),this.getLength());
		}
		return "";
	}
	,getPrimerSequence: function(includeExtensionRegion) {
		var rawPrimer = this.getSequence();
		if(this.extLength == -1 || includeExtensionRegion) return rawPrimer; else return rawPrimer.substring(this.extLength,rawPrimer.length);
	}
	,setValidate5PrimeExtensionInFrame: function(validate) {
		this.val_extInFrame = validate;
	}
	,isValid: function() {
		if(this.has5PrimeExtension()) {
			if(this.val_extInFrame) {
				if(this.is3PrimeExtended()) {
					var postSequence = this.get3PrimeExtendedSequence();
					if(postSequence.length < 3) return false; else {
						var frameCheck = new saturn.core.DNA(postSequence);
						var pos = frameCheck.getFirstStartCodonPositionByFrame(saturn.core.GeneticCodes.STANDARD,saturn.core.Frame.ONE);
						if(pos == -1) return false; else return true;
					}
				} else return false;
			}
		}
		return true;
	}
	,clonePrimer: function() {
		var newPrimer = new saturn.core.Primer(this.getPrimerSequence(true));
		newPrimer.set5PrimeExtensionLength(this.get5PrimeExtensionLength());
		newPrimer.val_extInFrame = this.val_extInFrame;
		return newPrimer;
	}
	,setType: function(type) {
		this.theType = type;
	}
	,getType: function() {
		return this.theType;
	}
	,__class__: saturn.core.Primer
});
saturn.core.PrimerRegistry = $hxClasses["saturn.core.PrimerRegistry"] = function() {
	this.primers = new haxe.ds.StringMap();
	this.registerDefaultPrimers();
};
saturn.core.PrimerRegistry.__name__ = ["saturn","core","PrimerRegistry"];
saturn.core.PrimerRegistry.getDefaultInstance = function() {
	return saturn.core.PrimerRegistry.defaultInstance;
};
saturn.core.PrimerRegistry.prototype = {
	primers: null
	,registerDefaultPrimers: function() {
		var attB1 = new saturn.core.Primer("");
		attB1.set5PrimeExtension("GGGGACAAGTTTGTACAAAAAAGCAGGCT");
		attB1.setValidate5PrimeExtensionInFrame(false);
		this.addPrimer(Std.string(saturn.core.BasePrimer.ATT_B1),attB1);
		var attB2 = new saturn.core.Primer("");
		attB2.set5PrimeExtension("GGGGACCACTTTGTACAAGAAAGCTGGGT");
		attB2.setValidate5PrimeExtensionInFrame(false);
		this.addPrimer(Std.string(saturn.core.BasePrimer.ATT_B2),attB2);
	}
	,getPrimerTypes: function() {
		var primerTypes = [];
		var $it0 = this.primers.keys();
		while( $it0.hasNext() ) {
			var primerType = $it0.next();
			primerTypes.push(primerType);
		}
		return primerTypes;
	}
	,autoConfigurePrimer: function(primer) {
		var _g = 0;
		var _g1 = this.getPrimerTypes();
		while(_g < _g1.length) {
			var primerType = _g1[_g];
			++_g;
			var basePrimer = this.getPrimer(primerType);
			var primer5Ext = basePrimer.get5PrimeExtensionSequence();
			if(primer.getSequence().indexOf(primer5Ext) != -1) {
				primer.set5PrimeExtensionLength(primer5Ext.length);
				primer.setType(primerType);
			}
		}
	}
	,addPrimer: function(name,primer) {
		this.primers.set(name,primer);
	}
	,removePrimer: function(name) {
		this.primers.remove(name);
	}
	,getPrimer: function(name) {
		if(this.primers.exists(name)) return this.primers.get(name).clonePrimer(); else return null;
	}
	,getBasePrimer: function(primer) {
		return this.getPrimer(Std.string(primer));
	}
	,__class__: saturn.core.PrimerRegistry
};
saturn.core.PurificationHelperTable = $hxClasses["saturn.core.PurificationHelperTable"] = function() {
	saturn.core.Table.call(this);
	this.setErrorColumns(["Error"]);
	this.setData([{ 'Sample (1)' : "", '2nd Index (2)' : "", '3rd Index (3)' : "", 'Construct (4)' : "", 'Klone IDs (5)' : "", 'Celline (6)' : "", 'Construct IDs (7)' : "", 'Expression IDs (8)' : "", 'Break 1 (9)' : "", 'Clone IDs (10)' : "", 'Expression Scale (11)' : "", 'Purification IDs (12)' : "", 'Volume (13)' : "", 'Expression IDs (14)' : "", 'Yield (15)' : "", 'Location (16)' : "", 'Cleaved (17)' : "", 'conc. (18)' : "", 'concentrator (19)' : "", 'Volume (20)' : "", 'Aliquot size (21)' : "", 'Buffer (22)' : "", 'pH (23)' : "", 'Break 2 (24)' : "", 'Break 3 (25)' : "", 'Column 1 (26)' : "", '2.0 (27)' : "", '3.0 (28)' : "", '4.0 (29)' : "", 'Sample (30)' : "", 'Construct (31)' : "", 'Column (32)' : "", 'Volume (33)' : "", 'Abs (34)' : "", 'Extcoeff uncut (35)' : "", 'Weight uncut (36)' : "", 'Gel location (37)' : "", 'NanoSpectrum Location (38)' : "", 'conc. (39)' : "", 'Yield (40)' : "", 'Column (41)' : "", 'Volume (42)' : "", 'Abs (43)' : "", 'Extcoeff cut (44)' : "", 'Weight cut (45)' : "", 'Gel location (46)' : "", 'NanoSpectrum Location (47)' : "", 'conc. (48)' : "", 'Yield (49)' : "", 'Column (50)' : "", 'Volume (51)' : "", 'Abs (52)' : "", 'Extcoeff cut (53)' : "", 'Weight cut (54)' : "", 'Gel location (55)' : "", 'NanoSpectrum Location (56)' : "", 'conc. (57)' : "", 'Yield (58)' : "", 'Chromatograph location (59)' : "", 'MS result location (60)' : "", 'MS Molecular weight (61)' : "", 'Discrepancy (62)' : "", 'Sample (63)' : "", 'Construct (64)' : "", 'MW kDa (65)' : "", 'Yield (66)' : "", 'Comments (67)' : "", 'Break 4 (68)' : "", 'Sample (69)' : "", 'Construct (70)' : "", 'MW kDa (71)' : "", 'Yield (72)' : "", 'Comments (73)' : ""}],{ 'Sample (1)' : { 'editor' : "textfield"}, '2nd Index (2)' : { 'editor' : "textfield"}, '3rd Index (3)' : { 'editor' : "textfield"}, 'Construct (4)' : { 'editor' : "textfield"}, 'Klone IDs (5)' : { 'editor' : "textfield"}, 'Celline (6)' : { 'editor' : "textfield"}, 'Construct IDs (7)' : { 'editor' : "textfield"}, 'Expression IDs (8)' : { 'editor' : "textfield"}, 'Break 1 (9)' : { 'editor' : "textfield"}, 'Clone IDs (10)' : { 'editor' : "textfield"}, 'Expression Scale (11)' : { 'editor' : "textfield"}, 'Purification IDs (12)' : { 'editor' : "textfield"}, 'Volume (13)' : { 'editor' : "textfield"}, 'Expression IDs (14)' : { 'editor' : "textfield"}, 'Yield (15)' : { 'editor' : "textfield"}, 'Location (16)' : { 'editor' : "textfield"}, 'Cleaved (17)' : { 'editor' : "textfield"}, 'conc. (18)' : { 'editor' : "textfield"}, 'concentrator (19)' : { 'editor' : "textfield"}, 'Volume (20)' : { 'editor' : "textfield"}, 'Aliquot size (21)' : { 'editor' : "textfield"}, 'Buffer (22)' : { 'editor' : "textfield"}, 'pH (23)' : { 'editor' : "textfield"}, 'Break 2 (24)' : { 'editor' : "textfield"}, 'Break 3 (25)' : { 'editor' : "textfield"}, 'Column 1 (26)' : { 'editor' : "textfield"}, '2.0 (27)' : { 'editor' : "textfield"}, '3.0 (28)' : { 'editor' : "textfield"}, '4.0 (29)' : { 'editor' : "textfield"}, 'Sample (30)' : { 'editor' : "textfield"}, 'Construct (31)' : { 'editor' : "textfield"}, 'Column (32)' : { 'editor' : "textfield"}, 'Volume (33)' : { 'editor' : "textfield"}, 'Abs (34)' : { 'editor' : "textfield"}, 'Extcoeff uncut (35)' : { 'editor' : "textfield"}, 'Weight uncut (36)' : { 'editor' : "textfield"}, 'Gel location (37)' : { 'editor' : "textfield"}, 'NanoSpectrum Location (38)' : { 'editor' : "textfield"}, 'conc. (39)' : { 'editor' : "textfield"}, 'Yield (40)' : { 'editor' : "textfield"}, 'Column (41)' : { 'editor' : "textfield"}, 'Volume (42)' : { 'editor' : "textfield"}, 'Abs (43)' : { 'editor' : "textfield"}, 'Extcoeff cut (44)' : { 'editor' : "textfield"}, 'Weight cut (45)' : { 'editor' : "textfield"}, 'Gel location (46)' : { 'editor' : "textfield"}, 'NanoSpectrum Location (47)' : { 'editor' : "textfield"}, 'conc. (48)' : { 'editor' : "textfield"}, 'Yield (49)' : { 'editor' : "textfield"}, 'Column (50)' : { 'editor' : "textfield"}, 'Volume (51)' : { 'editor' : "textfield"}, 'Abs (52)' : { 'editor' : "textfield"}, 'Extcoeff cut (53)' : { 'editor' : "textfield"}, 'Weight cut (54)' : { 'editor' : "textfield"}, 'Gel location (55)' : { 'editor' : "textfield"}, 'NanoSpectrum Location (56)' : { 'editor' : "textfield"}, 'conc. (57)' : { 'editor' : "textfield"}, 'Yield (58)' : { 'editor' : "textfield"}, 'Chromatograph location (59)' : { 'editor' : "textfield"}, 'MS result location (60)' : { 'editor' : "textfield"}, 'MS Molecular weight (61)' : { 'editor' : "textfield"}, 'Discrepancy (62)' : { 'editor' : "textfield"}, 'Sample (63)' : { 'editor' : "textfield"}, 'Construct (64)' : { 'editor' : "textfield"}, 'MW kDa (65)' : { 'editor' : "textfield"}, 'Yield (66)' : { 'editor' : "textfield"}, 'Comments (67)' : { 'editor' : "textfield"}, 'Break 4 (68)' : { 'editor' : "textfield"}, 'Sample (69)' : { 'editor' : "textfield"}, 'Construct (70)' : { 'editor' : "textfield"}, 'MW kDa (71)' : { 'editor' : "textfield"}, 'Yield (72)' : { 'editor' : "textfield"}, 'Comments (73)' : { 'editor' : "textfield"}});
	this.setName("PrepX");
};
saturn.core.PurificationHelperTable.__name__ = ["saturn","core","PurificationHelperTable"];
saturn.core.PurificationHelperTable.__super__ = saturn.core.Table;
saturn.core.PurificationHelperTable.prototype = $extend(saturn.core.Table.prototype,{
	provider: null
	,getProvider: function() {
		if(this.provider != null) return this.provider; else return saturn.client.WorkspaceApplication.getApplication().getProvider();
	}
	,generateids: function(cb) {
		var _g1 = this;
		var data = this.getData();
		var targetSet = new haxe.ds.StringMap();
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var constructId = Reflect.field(row,"Construct (4)");
			var targetId = constructId.split("-")[0];
			if(__map_reserved[targetId] != null) targetSet.setReserved(targetId,""); else targetSet.h[targetId] = "";
		}
		var targets;
		var _g2 = [];
		var $it0 = targetSet.keys();
		while( $it0.hasNext() ) {
			var targetId1 = $it0.next();
			_g2.push(targetId1);
		}
		targets = _g2;
		saturn.core.domain.SgcUtil.generateNextID(this.getProvider(),targets,saturn.core.domain.SgcClone,function(cloneMap,err) {
			if(err == null) saturn.core.domain.SgcUtil.generateNextID(_g1.getProvider(),targets,saturn.core.domain.SgcExpression,function(expressionMap,err1) {
				if(err1 == null) saturn.core.domain.SgcUtil.generateNextID(_g1.getProvider(),targets,saturn.core.domain.SgcPurification,function(purificationMap,err2) {
					if(err2 == null) {
						var _g21 = 0;
						while(_g21 < data.length) {
							var row1 = data[_g21];
							++_g21;
							var constructId1 = Reflect.field(row1,"Construct");
							var targetId2 = constructId1.split("-")[0];
							Reflect.setField(row1,"Clone ID",targetId2 + "-k" + StringTools.lpad(Std.string(__map_reserved[targetId2] != null?cloneMap.getReserved(targetId2):cloneMap.h[targetId2]),"0",3));
							var value;
							value = (__map_reserved[targetId2] != null?cloneMap.getReserved(targetId2):cloneMap.h[targetId2]) + 1;
							if(__map_reserved[targetId2] != null) cloneMap.setReserved(targetId2,value); else cloneMap.h[targetId2] = value;
							Reflect.setField(row1,"Expression ID",targetId2 + "-e" + StringTools.lpad(Std.string(__map_reserved[targetId2] != null?expressionMap.getReserved(targetId2):expressionMap.h[targetId2]),"0",3));
							var value1;
							value1 = (__map_reserved[targetId2] != null?expressionMap.getReserved(targetId2):expressionMap.h[targetId2]) + 1;
							if(__map_reserved[targetId2] != null) expressionMap.setReserved(targetId2,value1); else expressionMap.h[targetId2] = value1;
							Reflect.setField(row1,"Purification ID",targetId2 + "-p" + StringTools.lpad(Std.string(__map_reserved[targetId2] != null?purificationMap.getReserved(targetId2):purificationMap.h[targetId2]),"0",3));
							var value2;
							value2 = (__map_reserved[targetId2] != null?purificationMap.getReserved(targetId2):purificationMap.h[targetId2]) + 1;
							if(__map_reserved[targetId2] != null) purificationMap.setReserved(targetId2,value2); else purificationMap.h[targetId2] = value2;
						}
						cb(null);
					} else cb(err2);
				}); else cb(err1);
			}); else cb(err);
		});
	}
	,saveNew: function(cb) {
		this._saveNew(cb);
	}
	,_saveNew: function(cb) {
		var p = this.getProvider();
		var data = this.getData();
		var clones = [];
		var expressions = [];
		var purifications = [];
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var clone = new saturn.core.domain.SgcClone();
			clone.cloneId = Reflect.field(row,"Clone ID");
			clone.construct = new saturn.core.domain.SgcConstruct();
			clone.construct.constructId = Reflect.field(row,"Construct (4)");
			clone.elnId = Reflect.field(row,"ELN ID");
			var expression = new saturn.core.domain.SgcExpression();
			expression.expressionId = Reflect.field(row,"Expression ID");
			expression.clone = clone;
			expression.elnId = Reflect.field(row,"ELN ID");
			var purification = new saturn.core.domain.SgcPurification();
			purification.purificationId = Reflect.field(row,"Purification ID");
			purification.expression = expression;
			purification.column = Reflect.field(row,"Column");
			purification.elnId = Reflect.field(row,"ELN ID");
			clones.push(clone);
			expressions.push(expression);
			purifications.push(purification);
		}
		p.insertOrUpdate(clones,function(err) {
			if(err != null) {
				cb(err);
				return;
			}
			p.insertOrUpdate(expressions,function(err1) {
				if(err1 != null) {
					cb(err1);
					return;
				}
				p.insertOrUpdate(purifications,function(err2) {
					if(err2 != null) {
						cb(err2);
						return;
					} else cb(null);
				},true);
			},true);
		},true);
	}
	,fetchall: function(cb) {
		var p = this.getProvider();
		var data = this.getData();
		var ids = [];
		var constructIdToRow = new haxe.ds.StringMap();
		var _g = 0;
		while(_g < data.length) {
			var row = data[_g];
			++_g;
			var constructId = Reflect.field(row,"Construct (4)");
			ids.push(constructId);
			var value = row;
			constructIdToRow.set(constructId,value);
		}
		p.getByIds(ids,saturn.core.domain.SgcConstruct,function(objs,err) {
			if(err == null) {
				var _g1 = 0;
				while(_g1 < objs.length) {
					var obj = objs[_g1];
					++_g1;
					var constructId1 = obj.constructId;
					var row1;
					row1 = __map_reserved[constructId1] != null?constructIdToRow.getReserved(constructId1):constructIdToRow.h[constructId1];
				}
				cb(null);
			} else cb(err);
		});
	}
	,runStage0: function(prepXRun,cb) {
		var _g = this;
		this.runStage(prepXRun,"0",function(err) {
			if(err != null) cb(err); else _g.fetchall(function(err1) {
				if(err1 != null) cb(err1); else _g.runStage1(prepXRun,cb);
			});
		});
	}
	,runStage1: function(prepXRun,cb) {
		var _g = this;
		this.runStage(prepXRun,"1",function(err) {
			if(err != null) cb(err); else {
				saturn.core.Util.debug("Step 1 finished");
				_g.runStage2(prepXRun,cb);
			}
		});
	}
	,runStage2: function(prepXRun,cb) {
		var _g = this;
		this.runStage(prepXRun,"2",function(err) {
			if(err != null) cb(err); else {
				saturn.core.Util.debug("Step 2 finished");
				_g.runStage3(prepXRun,cb);
			}
		});
	}
	,runStage3: function(prepXRun,cb) {
		this.runStage(prepXRun,"3",function(err) {
			if(err != null) cb(err); else {
				cb(err);
				saturn.core.Util.debug("Step 3 finished");
			}
		});
	}
	,runStage: function(prepXRun,stage,cb) {
		var _g = this;
		this.getProvider().getByNamedQuery("saturn.server.plugins.informatics.PurificationHelperPlugin.runStage",[{ 'runname' : prepXRun, 'stage' : stage, 'table' : this.getData()}],null,false,function(objs,err) {
			if(err != null) cb(err); else {
				_g.updateData(objs[0].table);
				cb(null);
			}
		});
	}
	,__class__: saturn.core.PurificationHelperTable
});
saturn.core.RNA = $hxClasses["saturn.core.RNA"] = function(seq) {
	this.reg_uReplace = new EReg("U","g");
	saturn.core.DNA.call(this,seq);
};
saturn.core.RNA.__name__ = ["saturn","core","RNA"];
saturn.core.RNA.__super__ = saturn.core.DNA;
saturn.core.RNA.prototype = $extend(saturn.core.DNA.prototype,{
	reg_uReplace: null
	,convertToDNA: function() {
		return this.reg_uReplace.replace(this.getSequence(),"T");
	}
	,__class__: saturn.core.RNA
});
saturn.core.Reaction = $hxClasses["saturn.core.Reaction"] = function() {
};
saturn.core.Reaction.__name__ = ["saturn","core","Reaction"];
saturn.core.Reaction.prototype = {
	id: null
	,name: null
	,reactionTypeId: null
	,reactionType: null
	,__class__: saturn.core.Reaction
};
saturn.core.ReactionComponent = $hxClasses["saturn.core.ReactionComponent"] = function() {
};
saturn.core.ReactionComponent.__name__ = ["saturn","core","ReactionComponent"];
saturn.core.ReactionComponent.prototype = {
	id: null
	,position: null
	,reactionRoleId: null
	,entityId: null
	,reactionId: null
	,reaction: null
	,reactionRole: null
	,entity: null
	,__class__: saturn.core.ReactionComponent
};
saturn.core.ReactionRole = $hxClasses["saturn.core.ReactionRole"] = function() {
};
saturn.core.ReactionRole.__name__ = ["saturn","core","ReactionRole"];
saturn.core.ReactionRole.prototype = {
	id: null
	,name: null
	,__class__: saturn.core.ReactionRole
};
saturn.core.ReactionType = $hxClasses["saturn.core.ReactionType"] = function() {
};
saturn.core.ReactionType.__name__ = ["saturn","core","ReactionType"];
saturn.core.ReactionType.prototype = {
	id: null
	,name: null
	,__class__: saturn.core.ReactionType
};
saturn.core.RestrictionSite = $hxClasses["saturn.core.RestrictionSite"] = function(seq) {
	saturn.core.DNA.call(this,seq);
};
saturn.core.RestrictionSite.__name__ = ["saturn","core","RestrictionSite"];
saturn.core.RestrictionSite.__super__ = saturn.core.DNA;
saturn.core.RestrictionSite.prototype = $extend(saturn.core.DNA.prototype,{
	__class__: saturn.core.RestrictionSite
});
saturn.core.SHRNADesignTable = $hxClasses["saturn.core.SHRNADesignTable"] = function(empty) {
	if(empty == null) empty = true;
	saturn.core.Table.call(this);
	this.setErrorColumns(["Errors"]);
	var data = [{ 'sequence' : "", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""}];
	if(!empty) data = [{ 'sequence' : "UUGUUGUGCAAACUGACUGCU", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGCAGCAGTCAGTTTGCACAACAATAGTGAAGCCACAGATGTATTGTTGTGCAAACTGACTGCTTTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UUUCCUGAGGUGUAGGUCCCG", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGACGGGACCTACACCTCAGGAAATAGTGAAGCCACAGATGTATTTCCTGAGGTGTAGGTCCCGCTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UCUUGUUGUGCAAACUGACUG", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGACAGTCAGTTTGCACAACAAGATAGTGAAGCCACAGATGTATCTTGTTGTGCAAACTGACTGCTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UUGUCUCCUCGGUACACAGUG", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGACACTGTGTACCGAGGAGACAATAGTGAAGCCACAGATGTATTGTCTCCTCGGTACACAGTGCTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UGCUGUUUAACAACCUUCCCU", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGAAGGGAAGGTTGTTAAACAGCATAGTGAAGCCACAGATGTATGCTGTTTAACAACCTTCCCTGTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UCAGUGUCCAUACUUGAUCCG", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGACGGATCAAGTATGGACACTGATAGTGAAGCCACAGATGTATCAGTGTCCATACTTGATCCGCTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UAGGUGACAUCAUCAAGCUGG", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGCCCAGCTTGATGATGTCACCTATAGTGAAGCCACAGATGTATAGGTGACATCATCAAGCTGGATGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UUUGGAACCCUUUCUGCGCUU", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGCAAGCGCAGAAAGGGTTCCAAATAGTGAAGCCACAGATGTATTTGGAACCCTTTCTGCGCTTTTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UCUAGCUGGAAGUACUUGCGC", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGCGCGCAAGTACTTCCAGCTAGATAGTGAAGCCACAGATGTATCTAGCTGGAAGTACTTGCGCATGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "AUAUGAGGACUCUCGUAGCUG", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGACAGCTACGAGAGTCCTCATATTAGTGAAGCCACAGATGTAATATGAGGACTCTCGTAGCTGCTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UUCCUUCUUGUAAUAAAGGGA", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGCTCCCTTTATTACAAGAAGGAATAGTGAAGCCACAGATGTATTCCTTCTTGTAATAAAGGGAATGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UUCACUUAAUUCCUCCACCUC", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGAGAGGTGGAGGAATTAAGTGAATAGTGAAGCCACAGATGTATTCACTTAATTCCTCCACCTCCTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UUGGAAGUGGGAGUCCACGGA", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGCTCCGTGGACTCCCACTTCCAATAGTGAAGCCACAGATGTATTGGAAGTGGGAGTCCACGGAATGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""},{ 'sequence' : "UGAGGACUCUCGUAGCUGCUG", 'linker' : "TAGTGAAGCCACAGATGTA", 'oligo' : "", 'target' : "TGCTGTTGACAGTGAGCGACAGCAGCTACGAGAGTCCTCATAGTGAAGCCACAGATGTATGAGGACTCTCGTAGCTGCTGCTGCCTACTGCCTCGGA", 'rule_one' : "", 'rule_two' : "", 'rule_three' : "", 'rule_four' : "", 'rule_five' : "", 'rule_six' : "", 'rule_seven' : "", 'errors' : ""}];
	this.setData(data,{ 'sequence' : { 'editor' : "textfield", 'text' : "Sequence"}, 'linker' : { 'editor' : "textfield", 'text' : "Linker", 'default' : "TAGTGAAGCCACAGATGTA"}, 'oligo' : { 'editor' : "textfield", 'text' : "Oligo"}, 'rule_one' : { 'editor' : "textfield", 'text' : "A/U position 1"}, 'rule_two' : { 'editor' : "textfield", 'text' : "A/U 40-80%"}, 'rule_three' : { 'editor' : "textfield", 'text' : ">50 % A/U 1-14"}, 'rule_four' : { 'editor' : "textfield", 'text' : "% A/U 1-14 / % A/U 15-21 > 1"}, 'rule_five' : { 'editor' : "textfield", 'text' : "Positon 20 not A"}, 'rule_six' : { 'editor' : "textfield", 'text' : "A/U @ 13 or U @ 14"}, 'rule_seven' : { 'editor' : "textfield", 'text' : "no AAAAAA, UUUUU, GGGG, CCCC"}, 'errors' : { 'editor' : "textfield", 'text' : "Errors"}});
	this.setName("shRNA Table");
};
saturn.core.SHRNADesignTable.__name__ = ["saturn","core","SHRNADesignTable"];
saturn.core.SHRNADesignTable.__super__ = saturn.core.Table;
saturn.core.SHRNADesignTable.prototype = $extend(saturn.core.Table.prototype,{
	targetSequence: null
	,setSequence: function(sequence) {
		this.targetSequence = sequence;
	}
	,calculateOligos: function(cb) {
		var _g2 = this;
		if(this.targetSequence == null || this.targetSequence.length == 0) cb("Please set the target sequence first");
		var _g = 0;
		var _g1 = this.getData();
		while(_g < _g1.length) {
			var row = [_g1[_g]];
			++_g;
			var rnaStr = row[0].sequence;
			var linker = [row[0].linker];
			var rna = [new saturn.core.RNA(rnaStr)];
			var dna = new saturn.core.DNA(rna[0].convertToDNA());
			var fivePrimeSeq = [dna.getInverseComplement()];
			var threePrimeSeq = [dna.getSequence()];
			var fasta = ">TARGET\n" + this.targetSequence;
			fasta += "\n>QUERY\n" + fivePrimeSeq[0];
			saturn.client.BioinformaticsServicesClient.getClient().getAlignment(fasta,(function(threePrimeSeq,fivePrimeSeq,rna,linker,row) {
				return function(err,msa) {
					if(err == null) try {
						var nuc5 = msa.fetchNucAlignmentToResidue("QUERY",-1,"TARGET");
						if(nuc5 == "A" || nuc5 == "T") fivePrimeSeq[0] = "C" + fivePrimeSeq[0]; else fivePrimeSeq[0] = "A" + fivePrimeSeq[0];
						threePrimeSeq[0] = threePrimeSeq[0] + new saturn.core.DNA(nuc5).getInverseComplement();
						var fivePrimeExtension = "TGCTGTTGACAGTGAGCG";
						var threePrimeExtension = "TGCCTACTGCCTCGGA";
						var oligo = fivePrimeExtension + fivePrimeSeq[0] + linker[0] + threePrimeSeq[0] + threePrimeExtension;
						_g2.updateRules(rna[0],row[0]);
						row[0].oligo = oligo;
						if(row[0].oligo == row[0].target) row[0].errors = "No Errors"; else row[0].errors = "calculated oligo doesn't match target";
						cb(null);
					} catch( ex ) {
						if (ex instanceof js._Boot.HaxeError) ex = ex.val;
						if( js.Boot.__instanceof(ex,saturn.util.HaxeException) ) {
							cb(ex.getMessage());
						} else throw(ex);
					} else cb(err);
				};
			})(threePrimeSeq,fivePrimeSeq,rna,linker,row));
		}
	}
	,updateRules: function(rna,row) {
		this.updateRuleOne(rna,row);
		this.updateRuleTwo(rna,row);
		this.updateRuleThreeAndFour(rna,row);
		this.updateRuleFive(rna,row);
		this.updateRuleSix(rna,row);
		this.updateRuleSeven(rna,row);
	}
	,updateRuleOne: function(rna,row) {
		var c = rna.getSequence().charAt(0);
		if(c == "A" || c == "U") row.rule_one = "yes"; else row.rule_one = "no";
	}
	,updateRuleTwo: function(rna,row) {
		var comp = rna.getComposition();
		var auFraction = (comp.aCount + comp.tCount) / rna.getLength();
		if(auFraction >= 0.4 && auFraction <= 0.8) row.rule_two = "yes"; else row.rule_two = "no - " + auFraction;
	}
	,updateRuleThreeAndFour: function(rna,row) {
		var subRNA1 = new saturn.core.RNA(rna.getFrom(1,14));
		var comp = subRNA1.getComposition();
		var auFraction1 = (comp.aCount + comp.tCount) / subRNA1.getLength();
		if(auFraction1 >= 0.5) row.rule_three = "yes"; else row.rule_three = "no";
		var subRNA2 = new saturn.core.RNA(rna.getFrom(15,21));
		var comp1 = subRNA2.getComposition();
		var auFraction2 = (comp1.aCount + comp1.tCount) / subRNA2.getLength();
		if(auFraction1 / auFraction2 >= 1) row.rule_four = "yes"; else row.rule_four = "no";
	}
	,updateRuleFive: function(rna,row) {
		if(rna.getSequence().charAt(19) != "A") row.rule_five = "yes"; else row.rule_five = "no";
	}
	,updateRuleSix: function(rna,row) {
		var pos13 = rna.getSequence().charAt(12);
		var pos14 = rna.getSequence().charAt(13);
		if(pos13 == "A" || pos13 == "U" || pos14 == "U") row.rule_six = "yes"; else row.rule_six = "no";
	}
	,updateRuleSeven: function(rna,row) {
		if(rna.findMatchingLocusesSimple("AAAAAA").length > 0 || rna.findMatchingLocusesSimple("UUUUU").length > 0 || rna.findMatchingLocusesSimple("GGGG").length > 0 || rna.findMatchingLocusesSimple("CCCC").length > 0) row.rule_seven = "no"; else row.rule_seven = "yes";
	}
	,__class__: saturn.core.SHRNADesignTable
});
saturn.core.molecule.MoleculeSet = $hxClasses["saturn.core.molecule.MoleculeSet"] = function() {
	this.moleculeSet = new haxe.ds.StringMap();
};
saturn.core.molecule.MoleculeSet.__name__ = ["saturn","core","molecule","MoleculeSet"];
saturn.core.molecule.MoleculeSet.prototype = {
	moleculeSet: null
	,setMolecule: function(name,molecule) {
		this.moleculeSet.set(name,molecule);
	}
	,getMolecule: function(name) {
		return this.moleculeSet.get(name);
	}
	,__class__: saturn.core.molecule.MoleculeSet
};
saturn.core.StandardMoleculeSet = $hxClasses["saturn.core.StandardMoleculeSet"] = function() {
	saturn.core.molecule.MoleculeSet.call(this);
	var mMap = [{ 'NAME' : "A", 'MW' : 71.0788},{ 'NAME' : "R", 'MW' : 156.1875},{ 'NAME' : "N", 'MW' : 114.1038},{ 'NAME' : "D", 'MW' : 115.0886},{ 'NAME' : "C", 'MW' : 103.1448},{ 'NAME' : "E", 'MW' : 129.1155},{ 'NAME' : "Q", 'MW' : 128.1308},{ 'NAME' : "G", 'MW' : 57.052},{ 'NAME' : "H", 'MW' : 137.1412},{ 'NAME' : "I", 'MW' : 113.1595},{ 'NAME' : "L", 'MW' : 113.1595},{ 'NAME' : "K", 'MW' : 128.1742},{ 'NAME' : "M", 'MW' : 131.1986},{ 'NAME' : "F", 'MW' : 147.1766},{ 'NAME' : "P", 'MW' : 97.1167},{ 'NAME' : "S", 'MW' : 87.0782},{ 'NAME' : "T", 'MW' : 101.1051},{ 'NAME' : "W", 'MW' : 186.2133},{ 'NAME' : "Y", 'MW' : 163.176},{ 'NAME' : "V", 'MW' : 99.1326}];
	var _g = 0;
	while(_g < mMap.length) {
		var mDef = mMap[_g];
		++_g;
		var m = new saturn.core.molecule.Molecule(mDef.NAME);
		m.setFloatAttribute(saturn.core.molecule.MoleculeFloatAttribute.MW_CONDESATION,mDef.MW);
		m.setStringAttribute(saturn.core.molecule.MoleculeStringAttribute.NAME,mDef.NAME);
		this.setMolecule(mDef.NAME,m);
	}
	mMap = [{ 'NAME' : "H2O", 'MW' : 18.02}];
	var _g1 = 0;
	while(_g1 < mMap.length) {
		var mDef1 = mMap[_g1];
		++_g1;
		var m1 = new saturn.core.molecule.Molecule(mDef1.NAME);
		m1.setFloatAttribute(saturn.core.molecule.MoleculeFloatAttribute.MW,mDef1.MW);
		m1.setStringAttribute(saturn.core.molecule.MoleculeStringAttribute.NAME,mDef1.NAME);
		this.setMolecule(mDef1.NAME,m1);
	}
};
saturn.core.StandardMoleculeSet.__name__ = ["saturn","core","StandardMoleculeSet"];
saturn.core.StandardMoleculeSet.__super__ = saturn.core.molecule.MoleculeSet;
saturn.core.StandardMoleculeSet.prototype = $extend(saturn.core.molecule.MoleculeSet.prototype,{
	__class__: saturn.core.StandardMoleculeSet
});
saturn.core.TmCalc = $hxClasses["saturn.core.TmCalc"] = function() {
	this.deltaHTable = new haxe.ds.StringMap();
	this.deltaSTable = new haxe.ds.StringMap();
	this.endHTable = new haxe.ds.StringMap();
	this.endSTable = new haxe.ds.StringMap();
	this.populateDeltaHTable();
	this.populateDeltaSTable();
	this.populateEndHTable();
	this.populateEndSTable();
};
saturn.core.TmCalc.__name__ = ["saturn","core","TmCalc"];
saturn.core.TmCalc.prototype = {
	deltaHTable: null
	,deltaSTable: null
	,endHTable: null
	,endSTable: null
	,populateDeltaHTable: function() {
		this.deltaHTable.set("AA",-7900);
		this.deltaHTable.set("TT",-7900);
		this.deltaHTable.set("AT",-7200);
		this.deltaHTable.set("TA",-7200);
		this.deltaHTable.set("CA",-8500);
		this.deltaHTable.set("TG",-8500);
		this.deltaHTable.set("GT",-8400);
		this.deltaHTable.set("AC",-8400);
		this.deltaHTable.set("CT",-7800);
		this.deltaHTable.set("AG",-7800);
		this.deltaHTable.set("GA",-8200);
		this.deltaHTable.set("TC",-8200);
		this.deltaHTable.set("CG",-10600);
		this.deltaHTable.set("GC",-9800);
		this.deltaHTable.set("GG",-8000);
		this.deltaHTable.set("CC",-8000);
	}
	,populateDeltaSTable: function() {
		this.deltaSTable.set("AA",-22.2);
		this.deltaSTable.set("TT",-22.2);
		this.deltaSTable.set("AT",-20.4);
		this.deltaSTable.set("TA",-21.3);
		this.deltaSTable.set("CA",-22.7);
		this.deltaSTable.set("TG",-22.7);
		this.deltaSTable.set("GT",-22.4);
		this.deltaSTable.set("AC",-22.4);
		this.deltaSTable.set("CT",-21.0);
		this.deltaSTable.set("AG",-21.0);
		this.deltaSTable.set("GA",-22.2);
		this.deltaSTable.set("TC",-22.2);
		this.deltaSTable.set("CG",-27.2);
		this.deltaSTable.set("GC",-24.4);
		this.deltaSTable.set("GG",-19.9);
		this.deltaSTable.set("CC",-19.9);
	}
	,populateEndHTable: function() {
		this.endHTable.set("A",2300);
		this.endHTable.set("T",2300);
		this.endHTable.set("G",100);
		this.endHTable.set("C",100);
	}
	,populateEndSTable: function() {
		this.endSTable.set("A",4.1);
		this.endSTable.set("T",4.1);
		this.endSTable.set("G",-2.8);
		this.endSTable.set("C",-2.8);
	}
	,getDeltaH: function(primerSeq) {
		var dnaSeq = primerSeq.getSequence();
		var seqLen = dnaSeq.length;
		var startNuc = dnaSeq.charAt(0);
		var endNuc = dnaSeq.charAt(seqLen - 1);
		var startH = this.endHTable.get(startNuc);
		var endH = this.endHTable.get(endNuc);
		var deltaH = startH + endH;
		var _g = 1;
		while(_g < seqLen) {
			var i = _g++;
			var currNuc = dnaSeq.charAt(i);
			var currH = this.deltaHTable.get(startNuc + currNuc);
			startNuc = currNuc;
			deltaH = deltaH + currH;
		}
		return deltaH;
	}
	,getDeltaS: function(primerSeq) {
		var dnaSeq = primerSeq.getSequence();
		var seqLen = dnaSeq.length;
		var startNuc = dnaSeq.charAt(0);
		var endNuc = dnaSeq.charAt(seqLen - 1);
		var startS = this.endSTable.get(startNuc);
		var endS = this.endSTable.get(endNuc);
		var deltaS = startS + endS;
		var _g = 1;
		while(_g < seqLen) {
			var i = _g++;
			var currNuc = dnaSeq.charAt(i);
			var currS = this.deltaSTable.get(startNuc + currNuc);
			startNuc = currNuc;
			deltaS = deltaS + currS;
		}
		return deltaS;
	}
	,saltCorrection: function(primerSeq,saltConc) {
		var saltPenalty = 0.368;
		var dnaSeq = primerSeq.getSequence();
		var seqLen = dnaSeq.length;
		saltConc = saltConc / 1000.0;
		var lnSalt = Math.log(saltConc);
		var deltaS = this.getDeltaS(primerSeq);
		var saltCorrDeltaS = deltaS + saltPenalty * (seqLen - 1) * lnSalt;
		return saltCorrDeltaS;
	}
	,tmCalculation: function(primerSeq,saltConc,primerConc) {
		var deltaH = this.getDeltaH(primerSeq);
		var saltCorrDeltaS = this.saltCorrection(primerSeq,saltConc);
		var gasConst = 1.987;
		var lnPrimerConc = Math.log(primerConc / 1000000000 / 2);
		var tmKelvin = deltaH / (saltCorrDeltaS + gasConst * lnPrimerConc);
		var tmCelcius = tmKelvin - 273.15;
		if(tmCelcius > 75) return 75; else return tmCelcius;
	}
	,__class__: saturn.core.TmCalc
};
saturn.core.User = $hxClasses["saturn.core.User"] = function() {
};
saturn.core.User.__name__ = ["saturn","core","User"];
saturn.core.User.prototype = {
	id: null
	,username: null
	,password: null
	,firstname: null
	,lastname: null
	,email: null
	,fullname: null
	,uuid: null
	,token: null
	,projects: null
	,__class__: saturn.core.User
};
saturn.core.Util = $hxClasses["saturn.core.Util"] = function() {
};
saturn.core.Util.__name__ = ["saturn","core","Util"];
saturn.core.Util.debug = function(msg) {
	saturn.client.core.ClientCore.getClientCore().debug(msg);
};
saturn.core.Util.inspect = function(obj) {
};
saturn.core.Util.print = function(msg) {
	saturn.client.WorkspaceApplication.getApplication().debug(msg);
};
saturn.core.Util.openw = function(path) {
	return null;
};
saturn.core.Util.opentemp = function(prefix,cb) {
};
saturn.core.Util.isHostEnvironmentAvailable = function() {
	return saturn.client.WorkspaceApplication.getApplication().isHostEnvironmentAvailable();
};
saturn.core.Util.exec = function(program,args,cb) {
	saturn.core.Util.getNewExternalProcess(function(process) {
		process.start(program,args);
		process.waitForClose(function(state) {
			if(state == "") cb(0); else cb(-1);
		});
	});
};
saturn.core.Util.getNewExternalProcess = function(cb) {
	saturn.client.WorkspaceApplication.getApplication().getNewQtProcess(cb);
};
saturn.core.Util.getNewFileDialog = function(cb) {
	saturn.client.WorkspaceApplication.getApplication().getNewFileDialog(cb);
};
saturn.core.Util.saveFileAsDialog = function(contents,cb) {
	saturn.core.Util.getNewFileDialog(function(err,dialog) {
		dialog.setSelectExisting(false);
		dialog.fileSelected.connect(function(fileName) {
			js.Browser.alert(fileName);
			saturn.core.Util.debug("Hello, saving " + fileName);
			saturn.core.Util.saveFile(fileName,contents,function(err1) {
				cb(err1,fileName);
			});
		});
		dialog.open();
	});
};
saturn.core.Util.saveFile = function(fileName,contents,cb) {
	saturn.core.Util.getNewExternalProcess(function(process) {
		process.writeFile(fileName,contents,function(err) {
			cb(err);
		});
	});
};
saturn.core.Util.jsImports = function(paths,cb) {
	var errs = new haxe.ds.StringMap();
	var next = null;
	next = function() {
		if(paths.length == 0) cb(errs); else {
			var path = paths.pop();
			saturn.core.Util.jsImport(path,function(err) {
				if(__map_reserved[path] != null) errs.setReserved(path,err); else errs.h[path] = err;
				next();
			});
		}
	};
	next();
};
saturn.core.Util.jsImport = function(path,cb) {
	saturn.core.Util.readFile(path,function(err,content) {
		if(err == null) {
			if(content != null) {
				saturn.core.Util.print(content);
				saturn.core.Util.print("Content");
				eval(content);
			} else err = "Empty import";
		}
		cb(err);
	});
};
saturn.core.Util.openFileAsDialog = function(cb) {
	saturn.core.Util.getNewFileDialog(function(err,dialog) {
		dialog.setSelectExisting(true);
		dialog.fileSelected.connect(function(fileName) {
			saturn.core.Util.readFile(fileName,function(err1,contents) {
				cb(err1,fileName,contents);
			});
		});
		dialog.open();
	});
};
saturn.core.Util.readFile = function(fileName,cb) {
	saturn.core.Util.getNewExternalProcess(function(process) {
		process.readFile(fileName,function(contents) {
			if(contents != null) cb(null,contents); else cb("Unable to read file",null);
		});
	});
};
saturn.core.Util.open = function(path,cb) {
	saturn.core.Util.getNewExternalProcess(function(process) {
		process.readFile(function(contents) {
			if(contents == null) cb("Unable to read file",null); else cb(null,contents);
		});
	});
};
saturn.core.Util.getProvider = function() {
	return saturn.client.core.CommonCore.getDefaultProvider();
};
saturn.core.Util.string = function(a) {
	return Std.string(a);
};
saturn.core.Util.clone = function(obj) {
	var ser = haxe.Serializer.run(obj);
	return haxe.Unserializer.run(ser);
};
saturn.core.Util.prototype = {
	__class__: saturn.core.Util
};
saturn.core.Stream = $hxClasses["saturn.core.Stream"] = function(streamId) {
	this.streamId = streamId;
};
saturn.core.Stream.__name__ = ["saturn","core","Stream"];
saturn.core.Stream.prototype = {
	streamId: null
	,write: function(content) {
	}
	,end: function(cb) {
	}
	,__class__: saturn.core.Stream
};
saturn.core.WONKASession = $hxClasses["saturn.core.WONKASession"] = function() {
};
saturn.core.WONKASession.__name__ = ["saturn","core","WONKASession"];
saturn.core.WONKASession.prototype = {
	src: null
	,__class__: saturn.core.WONKASession
};
saturn.core.annotations.AnnotationSupplier = $hxClasses["saturn.core.annotations.AnnotationSupplier"] = function() {
};
saturn.core.annotations.AnnotationSupplier.__name__ = ["saturn","core","annotations","AnnotationSupplier"];
saturn.core.annotations.AnnotationSupplier.prototype = {
	annotate: function(sequence,name,annotationName,config,cb) {
		var m = new saturn.core.molecule.Molecule(sequence);
		m.setMoleculeName(name);
		this.annotateMolecule(m,annotationName,config,cb);
	}
	,annotateMolecule: function(molecule,annotationName,config,cb) {
		cb(null,null);
	}
	,__class__: saturn.core.annotations.AnnotationSupplier
};
saturn.core.annotations.PfamSupplier = $hxClasses["saturn.core.annotations.PfamSupplier"] = function() {
	saturn.core.annotations.AnnotationSupplier.call(this);
};
saturn.core.annotations.PfamSupplier.__name__ = ["saturn","core","annotations","PfamSupplier"];
saturn.core.annotations.PfamSupplier.__super__ = saturn.core.annotations.AnnotationSupplier;
saturn.core.annotations.PfamSupplier.prototype = $extend(saturn.core.annotations.AnnotationSupplier.prototype,{
	annotateMolecule: function(molecule,annotationName,annotationConfig,cb) {
		molecule.setAnnotations(null,annotationName);
		molecule.setRawAnnotationData(null,annotationName);
		var chain = new saturn.workflow.Chain();
		var config = new saturn.workflow.HMMerConfig(saturn.workflow.HMMerProgram.HMMSEARCH);
		config.setFastaContent(">" + molecule.getMoleculeName() + "\n" + molecule.getSequence());
		config.setHMMPath("databases/Pfam-A.hmm");
		chain.add("saturn.workflow.HMMer.query",config);
		chain.start(function(error) {
			if(error != null) {
				saturn.client.WorkspaceApplication.getApplication().showMessage("Error",error);
				return;
			}
			var outputFile = "../" + (js.Boot.__cast(config.getResponse() , saturn.workflow.HMMerResponse)).getTableOutputPath();
			saturn.client.core.CommonCore.getContent(outputFile,function(content) {
				var annotations = [];
				var p = new saturn.core.parsers.HmmerParser(null,function(objs,iter) {
					var _g = 0;
					while(_g < objs.length) {
						var obj = objs[_g];
						++_g;
						if(obj.evalue <= 0.001 && obj.altevalue <= 0.001) {
							obj.referent.entityId = obj.referent.entityId.split(".")[0];
							annotations.push(obj);
						}
					}
					iter.next();
				},function(err) {
					if(annotationConfig.removeOverlaps) {
						var kept = [];
						var removed = [];
						var _g1 = 0;
						while(_g1 < annotations.length) {
							var obj1 = annotations[_g1];
							++_g1;
							var keep = true;
							var _g11 = 0;
							while(_g11 < annotations.length) {
								var obj2 = annotations[_g11];
								++_g11;
								if(Math.max(obj1.start,obj2.start) <= Math.min(obj1.stop,obj2.stop)) {
									if(obj1.evalue > obj2.evalue) {
										keep = false;
										break;
									} else if(obj1.evalue == obj2.evalue) {
										if(obj1.stop - obj1.start < obj2.stop - obj2.start) {
											keep = false;
											break;
										}
									}
								}
							}
							if(keep) kept.push(obj1); else saturn.core.Util.debug("Removing " + obj1.referent.entityId);
						}
						annotations = kept;
					}
					molecule.setAnnotations(annotations,annotationName);
					molecule.setRawAnnotationData(outputFile,annotationName);
					cb(err,annotations);
				});
				p.setContent(content);
			});
		});
	}
	,__class__: saturn.core.annotations.PfamSupplier
});
if(!saturn.core.domain) saturn.core.domain = {};
saturn.core.domain.ABITrace = $hxClasses["saturn.core.domain.ABITrace"] = function() {
	this.setup();
};
saturn.core.domain.ABITrace.__name__ = ["saturn","core","domain","ABITrace"];
saturn.core.domain.ABITrace.prototype = {
	id: null
	,name: null
	,CH1: null
	,CH2: null
	,CH3: null
	,CH4: null
	,LABELS: null
	,SEQ: null
	,ALN_LABELS: null
	,ANNOTATIONS: null
	,alignment: null
	,traceDataJson: null
	,setup: function() {
		this.CH1 = [];
		this.CH2 = [];
		this.CH3 = [];
		this.CH4 = [];
		this.LABELS = [];
		this.SEQ = [];
		this.ALN_LABELS = [];
		this.ANNOTATIONS = [];
		this.alignment = null;
		if(this.traceDataJson != null) this.setData(JSON.parse(this.traceDataJson));
	}
	,isEmpty: function() {
		return this.CH1.length == 0 && this.CH2.length == 0 && this.CH3.length == 0 && this.CH4.length == 0;
	}
	,setData: function(traceData) {
		this.CH1 = traceData.CH1;
		this.CH2 = traceData.CH2;
		this.CH3 = traceData.CH3;
		this.CH4 = traceData.CH4;
		this.LABELS = traceData.LABELS;
		this.SEQ = traceData.SEQ;
		this.traceDataJson = JSON.stringify(traceData);
	}
	,getSequence: function() {
		var strBuf_b = "";
		var _g = 0;
		var _g1 = this.SEQ;
		while(_g < _g1.length) {
			var $char = _g1[_g];
			++_g;
			if($char == null) strBuf_b += "null"; else strBuf_b += "" + $char;
		}
		return strBuf_b;
	}
	,trim: function(start,stop) {
		var trimmedTraceData = new saturn.core.domain.ABITrace();
		trimmedTraceData.CH1 = [];
		trimmedTraceData.CH2 = [];
		trimmedTraceData.CH3 = [];
		trimmedTraceData.CH4 = [];
		trimmedTraceData.LABELS = [];
		trimmedTraceData.SEQ = [];
		var _g = start;
		while(_g < stop) {
			var i = _g++;
			trimmedTraceData.CH1.push(this.CH1[i]);
			trimmedTraceData.CH2.push(this.CH2[i]);
			trimmedTraceData.CH3.push(this.CH3[i]);
			trimmedTraceData.CH4.push(this.CH4[i]);
			trimmedTraceData.LABELS.push(this.LABELS[i]);
			if(trimmedTraceData.LABELS[i] != "") trimmedTraceData.SEQ.push(trimmedTraceData.LABELS[i]);
		}
		if(this.ALN_LABELS.length > 0) {
			var _g1 = start;
			while(_g1 < stop) {
				var i1 = _g1++;
				trimmedTraceData.ALN_LABELS.push(this.ALN_LABELS[i1]);
			}
		}
		return trimmedTraceData;
	}
	,align: function(aln,isForwards) {
		var alnStrs = aln.getAlignmentRegion();
		var template = alnStrs[0];
		var query = alnStrs[1];
		window.console.log(template);
		window.console.log(query);
		var newTrace = new saturn.core.domain.ABITrace();
		var seqPos = 0;
		var _g1 = 0;
		var _g = this.getReadingCount();
		while(_g1 < _g) {
			var i = _g1++;
			if(this.CH1[i] == -1) continue;
			var c = this.LABELS[i];
			if(c != "") while(true) {
				var alnChar = template.charAt(seqPos);
				if(alnChar == "-") {
					var _g2 = 0;
					while(_g2 < 2) {
						var j = _g2++;
						newTrace.CH1.push(-1);
						newTrace.CH2.push(-1);
						newTrace.CH3.push(-1);
						newTrace.CH4.push(-1);
						newTrace.LABELS.push("");
						newTrace.ALN_LABELS.push("");
					}
					newTrace.CH1.push(-1);
					newTrace.CH2.push(-1);
					newTrace.CH3.push(-1);
					newTrace.CH4.push(-1);
					newTrace.LABELS.push("-");
					newTrace.ALN_LABELS.push(query.charAt(seqPos));
					var _g21 = 0;
					while(_g21 < 2) {
						var j1 = _g21++;
						newTrace.CH1.push(-1);
						newTrace.CH2.push(-1);
						newTrace.CH3.push(-1);
						newTrace.CH4.push(-1);
						newTrace.LABELS.push("");
						newTrace.ALN_LABELS.push("");
					}
					seqPos++;
				} else {
					newTrace.ALN_LABELS.push(query.charAt(seqPos++));
					break;
				}
			} else newTrace.ALN_LABELS.push("");
			newTrace.CH1.push(this.CH1[i]);
			newTrace.CH2.push(this.CH2[i]);
			newTrace.CH3.push(this.CH3[i]);
			newTrace.CH4.push(this.CH4[i]);
			newTrace.LABELS.push(this.LABELS[i]);
			newTrace.SEQ.push(this.SEQ[i]);
		}
		newTrace.alignment = aln;
		return newTrace;
	}
	,getReadingCount: function() {
		return this.CH1.length;
	}
	,setName: function(name) {
		this.name = name;
	}
	,__class__: saturn.core.domain.ABITrace
};
saturn.core.domain.Alignment = $hxClasses["saturn.core.domain.Alignment"] = function() {
	this.emptyInit();
};
saturn.core.domain.Alignment.__name__ = ["saturn","core","domain","Alignment"];
saturn.core.domain.Alignment.prototype = {
	objectIds: null
	,alignmentURL: null
	,content: null
	,name: null
	,id: null
	,emptyInit: function() {
		this.objectIds = new haxe.ds.StringMap();
	}
	,addObject: function(objectId) {
		this.objectIds.set(objectId,true);
	}
	,removeObject: function(objectId) {
		this.objectIds.remove(objectId);
	}
	,getAlignmentObjectIds: function() {
		var newObjectIds = [];
		var $it0 = this.objectIds.keys();
		while( $it0.hasNext() ) {
			var objectId = $it0.next();
			newObjectIds.push(objectId);
		}
		return newObjectIds;
	}
	,setAlignmentObjectIds: function(newObjectIds) {
		this.objectIds = new haxe.ds.StringMap();
		var _g = 0;
		while(_g < newObjectIds.length) {
			var objectId = newObjectIds[_g];
			++_g;
			this.objectIds.set(objectId,true);
		}
	}
	,objectExists: function(objectId) {
		return this.objectIds.exists(objectId);
	}
	,setAlignmentURL: function(alignmentURL) {
		this.alignmentURL = alignmentURL;
		this.content = null;
	}
	,getAlignmentURL: function() {
		return this.alignmentURL;
	}
	,setAlignmentContent: function(content) {
		this.content = content;
	}
	,getAlignmentContent: function() {
		return this.content;
	}
	,setName: function(name) {
		this.name = name;
	}
	,__class__: saturn.core.domain.Alignment
};
saturn.core.domain.Compound = $hxClasses["saturn.core.domain.Compound"] = function() {
	this.datestamp = new Date(1,2,3,4,5,6);
	this.compoundId = "Compound";
};
saturn.core.domain.Compound.__name__ = ["saturn","core","domain","Compound"];
saturn.core.domain.Compound.appendMolImage = function(objs,structureField,outputField,format) {
	var _g = 0;
	while(_g < objs.length) {
		var row = objs[_g];
		++_g;
		var value = Reflect.field(row,structureField);
		if(value == "" || value == null) value = ""; else {
			var s = saturn.core.domain.Compound.getMolImage(value,format);
			value = s;
		}
		row[outputField] = value;
	}
};
saturn.core.domain.Compound.getMolImage = function(value,format) {
	if(!saturn.core.domain.Compound.molCache.exists(format)) {
		var value1 = new haxe.ds.StringMap();
		saturn.core.domain.Compound.molCache.set(format,value1);
	}
	if(!(function($this) {
		var $r;
		var this1 = saturn.core.domain.Compound.molCache.get(format);
		$r = this1.exists(value);
		return $r;
	}(this))) try {
		var rdkit = RDKit;
		var mol = null;
		if(format == "SDF") mol = rdkit.Molecule.MolBlockToMol(value); else mol = rdkit.Molecule.fromSmiles(value);
		mol.Kekulize();
		var s = mol.Drawing2D();
		s = saturn.core.domain.Compound.r.replace(s,"");
		s = saturn.core.domain.Compound.rw.replace(s,"width=\"100%\"");
		s = saturn.core.domain.Compound.rh.replace(s,"height=\"100%\" viewBox=\"0 0 300 300\"");
		var this2 = saturn.core.domain.Compound.molCache.get(format);
		this2.set(value,s);
	} catch( err ) {
		if (err instanceof js._Boot.HaxeError) err = err.val;
		var this3 = saturn.core.domain.Compound.molCache.get(format);
		this3.set(value,null);
	}
	var this4 = saturn.core.domain.Compound.molCache.get(format);
	return this4.get(value);
};
saturn.core.domain.Compound.clearMolCache = function() {
	var $it0 = saturn.core.domain.Compound.molCache.keys();
	while( $it0.hasNext() ) {
		var format = $it0.next();
		var $it1 = (function($this) {
			var $r;
			var this1 = saturn.core.domain.Compound.molCache.get(format);
			$r = this1.keys();
			return $r;
		}(this));
		while( $it1.hasNext() ) {
			var key = $it1.next();
			var this2 = saturn.core.domain.Compound.molCache.get(format);
			this2.remove(key);
		}
	}
};
saturn.core.domain.Compound.prototype = {
	id: null
	,compoundId: null
	,supplierId: null
	,shortCompoundId: null
	,sdf: null
	,supplier: null
	,description: null
	,concentration: null
	,location: null
	,solute: null
	,comments: null
	,mw: null
	,confidential: null
	,datestamp: null
	,person: null
	,inchi: null
	,smiles: null
	,substructureSearch: function(cb) {
		js.Browser.alert("Hello World!!!!");
	}
	,assaySearch: function(cb) {
		var _g = this;
		saturn.client.WorkspaceApplication.getApplication().getProvider().getByNamedQuery("compound_assay_search",[this.compoundId],null,false,function(json,error) {
			var dwin = window;
			dwin.results = json;
			dwin.error = error;
			var r = new EReg("svg:","g");
			var rw = new EReg("width='300px'","g");
			var rh = new EReg("height='300px'","g");
			if(error == null) {
				var table = new saturn.core.Table();
				table.setFixedRowHeight(50);
				var d = json;
				table.setData(json,{ 'SDF' : { 'renderer' : function(value) {
					return "<div>" + saturn.core.domain.Compound.getMolImage(value,"SDF") + "</div>";
				}}});
				table.name = _g.compoundId + " (Assay Results)";
				saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(table,true);
			} else {
			}
		});
	}
	,test: function(cb) {
		var protein = new saturn.core.Protein("ATGC");
		protein.name = "Test Me";
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(protein,true);
	}
	,__class__: saturn.core.domain.Compound
};
saturn.core.domain.DataSource = $hxClasses["saturn.core.domain.DataSource"] = function() {
};
saturn.core.domain.DataSource.__name__ = ["saturn","core","domain","DataSource"];
saturn.core.domain.DataSource.getEntities = function(source,cb) {
	var p = saturn.core.Util.getProvider();
	p.getById(source,saturn.core.domain.DataSource,function(obj,err) {
		if(err != null) cb(err,null); else if(obj == null) cb("Data source not found " + source,null); else {
			saturn.core.Util.debug("Retreiving records for source " + source);
			p.getByValues([saturn.core.Util.string(obj.id)],saturn.core.domain.Entity,"dataSourceId",function(objs,error) {
				saturn.core.Util.debug("Entities retrieved for source " + source);
				if(error != null) cb("An error occurred retrieving data source " + source + " entities\n" + error,null); else cb(null,objs);
			});
		}
	});
};
saturn.core.domain.DataSource.getSource = function(source,insert,cb) {
	var p = saturn.core.Util.getProvider();
	p.getById(source,saturn.core.domain.DataSource,function(obj,err) {
		if(err != null) cb("An error occurred looking for source: " + source + "\n" + err,null); else if(obj == null) {
			if(insert) {
				var obj1 = new saturn.core.domain.DataSource();
				obj1.name = source;
				p.insert(source,function(err1) {
					if(err1 != null) cb("An error occurred inserting source: " + source + "\n" + err1,null); else p.getById(source,saturn.core.domain.DataSource,function(obj2,err2) {
						if(err2 != null) cb("An error occurred looking for source: " + source + "\n" + err2,null); else if(obj2 == null) cb("Inserted source " + source + " could not be found",null); else cb(null,obj2);
					});
				});
			} else cb(null,null);
		} else cb(null,obj);
	});
};
saturn.core.domain.DataSource.prototype = {
	id: null
	,name: null
	,__class__: saturn.core.domain.DataSource
};
saturn.core.domain.Entity = $hxClasses["saturn.core.domain.Entity"] = function() {
};
saturn.core.domain.Entity.__name__ = ["saturn","core","domain","Entity"];
saturn.core.domain.Entity.insertList = function(ids,source,cb) {
	var uqx = new haxe.ds.StringMap();
	var _g = 0;
	while(_g < ids.length) {
		var id = ids[_g];
		++_g;
		if(__map_reserved[id] != null) uqx.setReserved(id,id); else uqx.h[id] = id;
	}
	ids = [];
	var $it0 = uqx.keys();
	while( $it0.hasNext() ) {
		var id1 = $it0.next();
		ids.push(id1);
	}
	saturn.core.domain.DataSource.getSource(source,false,function(err,sourceObj) {
		if(err != null) cb(err,null); else if(sourceObj == null) cb("Unable to find source " + source,null); else {
			var objs = [];
			var _g1 = 0;
			while(_g1 < ids.length) {
				var id2 = ids[_g1];
				++_g1;
				var entity = new saturn.core.domain.Entity();
				entity.entityId = id2;
				entity.dataSourceId = sourceObj.id;
				objs.push(entity);
			}
			var p = saturn.core.Util.getProvider();
			p.insertObjects(objs,function(err1) {
				if(err1 != null) cb("An error occurred inserting entities\n" + err1,null); else p.getByIds(ids,saturn.core.domain.Entity,function(objs1,err2) {
					if(err2 != null) cb("An error occurred looking for inserted objects\n" + err2,null); else cb(null,objs1);
				});
			});
		}
	});
};
saturn.core.domain.Entity.getObjects = function(ids,cb) {
	var p = saturn.core.Util.getProvider();
	p.getByIds(ids,saturn.core.domain.Entity,function(objs,err) {
		if(err != null) cb(err,null); else cb(null,objs);
	});
};
saturn.core.domain.Entity.prototype = {
	id: null
	,entityId: null
	,dataSourceId: null
	,reactionId: null
	,entityTypeId: null
	,altName: null
	,description: null
	,source: null
	,reaction: null
	,entityType: null
	,__class__: saturn.core.domain.Entity
};
saturn.core.domain.FileProxy = $hxClasses["saturn.core.domain.FileProxy"] = function() {
};
saturn.core.domain.FileProxy.__name__ = ["saturn","core","domain","FileProxy"];
saturn.core.domain.FileProxy.prototype = {
	path: null
	,content: null
	,__class__: saturn.core.domain.FileProxy
};
saturn.core.domain.Glycan = $hxClasses["saturn.core.domain.Glycan"] = function() {
	this.glycanId = "Glycan";
};
saturn.core.domain.Glycan.__name__ = ["saturn","core","domain","Glycan"];
saturn.core.domain.Glycan.prototype = {
	id: null
	,glycanId: null
	,content: null
	,contentType: null
	,__class__: saturn.core.domain.Glycan
};
saturn.core.domain.Molecule = $hxClasses["saturn.core.domain.Molecule"] = function() {
};
saturn.core.domain.Molecule.__name__ = ["saturn","core","domain","Molecule"];
saturn.core.domain.Molecule.prototype = {
	id: null
	,name: null
	,sequence: null
	,entityId: null
	,entity: null
	,__class__: saturn.core.domain.Molecule
};
saturn.core.domain.MoleculeAnnotation = $hxClasses["saturn.core.domain.MoleculeAnnotation"] = function() {
};
saturn.core.domain.MoleculeAnnotation.__name__ = ["saturn","core","domain","MoleculeAnnotation"];
saturn.core.domain.MoleculeAnnotation.prototype = {
	id: null
	,entityId: null
	,labelId: null
	,start: null
	,stop: null
	,evalue: null
	,altevalue: null
	,entity: null
	,referent: null
	,__class__: saturn.core.domain.MoleculeAnnotation
};
saturn.core.domain.Uploader = $hxClasses["saturn.core.domain.Uploader"] = function(source,evalue) {
	this.initialised = false;
	this.source = source;
	this.cutoff = evalue;
};
saturn.core.domain.Uploader.__name__ = ["saturn","core","domain","Uploader"];
saturn.core.domain.Uploader.prototype = {
	referentMap: null
	,provider: null
	,generator: null
	,initialised: null
	,source: null
	,cutoff: null
	,next: function(items,generator) {
		var _g = this;
		this.generator = generator;
		if(this.initialised == false) {
			this.provider = saturn.core.Util.getProvider();
			this.setupReferentMap(function(err) {
				if(err != null) generator.die(err); else {
					_g.initialised = true;
					_g.next(items,generator);
				}
			});
		} else {
			if(items.length == 0) return;
			var ids = saturn.db.Model.generateUniqueListWithField(items,"entity.entityId");
			var acList = saturn.db.Model.generateUniqueListWithField(items,"referent.entityId");
			var newReferents = [];
			var _g1 = 0;
			while(_g1 < acList.length) {
				var id = acList[_g1];
				++_g1;
				if(!this.referentMap.exists(id)) newReferents.push(id);
			}
			var _g2 = 0;
			while(_g2 < items.length) {
				var item = items[_g2];
				++_g2;
				if(item.evalue > this.cutoff) HxOverrides.remove(items,item);
			}
			this.insertReferents(newReferents,function(err1) {
				if(err1 != null) generator.die(err1); else _g.provider.insertObjects(items,function(err2) {
					if(err2 != null) generator.die(err2); else generator.next();
				});
			});
		}
	}
	,setupReferentMap: function(cb) {
		var _g = this;
		saturn.core.domain.DataSource.getEntities(this.source,function(err,objs) {
			if(err != null) cb(err); else {
				_g.referentMap = saturn.db.Model.generateIDMap(objs);
				cb(null);
			}
		});
	}
	,insertReferents: function(accessions,cb) {
		var _g1 = this;
		if(accessions.length == 0) cb(null); else saturn.core.domain.Entity.insertList(accessions,this.source,function(err,objs) {
			if(err == null) {
				var _g = 0;
				while(_g < objs.length) {
					var obj = objs[_g];
					++_g;
					_g1.referentMap.set(obj.entityId,obj.id);
				}
			}
			cb(err);
		});
	}
	,__class__: saturn.core.domain.Uploader
};
saturn.core.domain.SaturnSession = $hxClasses["saturn.core.domain.SaturnSession"] = function() {
};
saturn.core.domain.SaturnSession.__name__ = ["saturn","core","domain","SaturnSession"];
saturn.core.domain.SaturnSession.prototype = {
	id: null
	,userName: null
	,isPublic: null
	,sessionContent: null
	,sessionName: null
	,user: null
	,load: function(cb) {
		var rawSession = JSON.parse(this.sessionContent);
		saturn.client.WorkspaceApplication.getApplication().getWorkspace()._openWorkspace(rawSession);
	}
	,getShortDescription: function() {
		if(this.user != null) return this.user.fullname + " - " + this.sessionName.split("-")[1]; else return this.sessionName;
	}
	,__class__: saturn.core.domain.SaturnSession
};
saturn.core.domain.SgcAllele = $hxClasses["saturn.core.domain.SgcAllele"] = function() {
	saturn.core.DNA.call(this,null);
	this.setup();
};
saturn.core.domain.SgcAllele.__name__ = ["saturn","core","domain","SgcAllele"];
saturn.core.domain.SgcAllele.__super__ = saturn.core.DNA;
saturn.core.domain.SgcAllele.prototype = $extend(saturn.core.DNA.prototype,{
	alleleId: null
	,id: null
	,entryCloneId: null
	,forwardPrimerId: null
	,reversePrimerId: null
	,dnaSeq: null
	,proteinSeq: null
	,plateWell: null
	,plate: null
	,entryClone: null
	,elnId: null
	,alleleStatus: null
	,complex: null
	,forwardPrimer: null
	,reversePrimer: null
	,proteinSequenceObj: null
	,setup: function() {
		this.setSequence(this.dnaSeq);
		this.sequenceField = "dnaSeq";
		if(this.proteinSequenceObj == null) this.proteinSequenceObj = new saturn.core.Protein(null);
		this.addProtein("Translation",this.proteinSequenceObj);
	}
	,getMoleculeName: function() {
		return this.alleleId;
	}
	,loadProtein: function(cb) {
		this.proteinSequenceObj.setName(this.alleleId + " (Protein)");
		this.proteinSequenceObj.setDNA(this);
		cb(this.proteinSequenceObj);
	}
	,setSequence: function(sequence) {
		saturn.core.DNA.prototype.setSequence.call(this,sequence);
		this.dnaSeq = sequence;
	}
	,__class__: saturn.core.domain.SgcAllele
});
saturn.core.domain.SgcAllelePlate = $hxClasses["saturn.core.domain.SgcAllelePlate"] = function() {
};
saturn.core.domain.SgcAllelePlate.__name__ = ["saturn","core","domain","SgcAllelePlate"];
saturn.core.domain.SgcAllelePlate.prototype = {
	plateName: null
	,id: null
	,elnRef: null
	,setup: function() {
	}
	,loadPlate: function(cb) {
		var platedata = new saturn.core.MultiAlleleHelperData();
		platedata.setPlateName(this.plateName);
		var platewo = new saturn.client.workspace.MultiAlleleHelperWO(platedata,this.plateName);
		cb(platewo);
	}
	,__class__: saturn.core.domain.SgcAllelePlate
};
saturn.core.domain.SgcClone = $hxClasses["saturn.core.domain.SgcClone"] = function() {
};
saturn.core.domain.SgcClone.__name__ = ["saturn","core","domain","SgcClone"];
saturn.core.domain.SgcClone.prototype = {
	id: null
	,cloneId: null
	,constructId: null
	,construct: null
	,elnId: null
	,comments: null
	,setup: function() {
	}
	,__class__: saturn.core.domain.SgcClone
};
saturn.core.domain.SgcConstruct = $hxClasses["saturn.core.domain.SgcConstruct"] = function() {
	saturn.core.DNA.call(this,null);
	this.setup();
};
saturn.core.domain.SgcConstruct.__name__ = ["saturn","core","domain","SgcConstruct"];
saturn.core.domain.SgcConstruct.getNewMenuText = function() {
	return "Construct";
};
saturn.core.domain.SgcConstruct.__super__ = saturn.core.DNA;
saturn.core.domain.SgcConstruct.prototype = $extend(saturn.core.DNA.prototype,{
	constructId: null
	,id: null
	,proteinSeq: null
	,proteinSeqNoTag: null
	,dnaSeq: null
	,docId: null
	,vectorId: null
	,alleleId: null
	,constructStart: null
	,constructStop: null
	,vector: null
	,person: null
	,status: null
	,allele: null
	,wellId: null
	,constructPlate: null
	,res1: null
	,res2: null
	,expectedMassNoTag: null
	,expectedMass: null
	,elnId: null
	,constructComments: null
	,proteinSequenceObj: null
	,proteinSequenceNoTagObj: null
	,complex: null
	,setup: function() {
		this.setSequence(this.dnaSeq);
		this.sequenceField = "dnaSeq";
		if(this.proteinSequenceObj == null) this.proteinSequenceObj = new saturn.core.Protein(null);
		if(this.proteinSequenceNoTagObj == null) this.proteinSequenceNoTagObj = new saturn.core.Protein(null);
		this.addProtein("Translation",this.proteinSequenceObj);
		this.addProtein("Translation No Tag",this.proteinSequenceNoTagObj);
	}
	,getMoleculeName: function() {
		return this.constructId;
	}
	,setSequence: function(sequence) {
		saturn.core.DNA.prototype.setSequence.call(this,sequence);
		this.dnaSeq = sequence;
	}
	,loadProtein: function(cb) {
		this.proteinSequenceObj.setName(this.constructId + " (Protein)");
		this.proteinSequenceObj.setDNA(this);
		cb(this.proteinSequenceObj);
	}
	,loadProteinNoTag: function(cb) {
		this.proteinSequenceNoTagObj.setName(this.constructId + " (Protein No Tag)");
		cb(this.proteinSequenceNoTagObj);
	}
	,__class__: saturn.core.domain.SgcConstruct
});
saturn.core.domain.SgcConstructPlate = $hxClasses["saturn.core.domain.SgcConstructPlate"] = function() {
};
saturn.core.domain.SgcConstructPlate.__name__ = ["saturn","core","domain","SgcConstructPlate"];
saturn.core.domain.SgcConstructPlate.prototype = {
	plateName: null
	,id: null
	,elnRef: null
	,setup: function() {
	}
	,loadPlate: function(cb) {
		var platedata = new saturn.core.MultiConstructHelperData();
		platedata.setPlateName(this.plateName);
		var platewo = new saturn.client.workspace.MultiConstructHelperWO(platedata,this.plateName);
		cb(platewo);
	}
	,__class__: saturn.core.domain.SgcConstructPlate
};
saturn.core.domain.SgcConstructStatus = $hxClasses["saturn.core.domain.SgcConstructStatus"] = function() { };
saturn.core.domain.SgcConstructStatus.__name__ = ["saturn","core","domain","SgcConstructStatus"];
saturn.core.domain.SgcConstructStatus.prototype = {
	constructPkey: null
	,status: null
	,setup: function() {
	}
	,__class__: saturn.core.domain.SgcConstructStatus
};
saturn.core.domain.SgcDomain = $hxClasses["saturn.core.domain.SgcDomain"] = function() {
};
saturn.core.domain.SgcDomain.__name__ = ["saturn","core","domain","SgcDomain"];
saturn.core.domain.SgcDomain.prototype = {
	id: null
	,accession: null
	,start: null
	,stop: null
	,targetId: null
	,setup: function() {
	}
	,__class__: saturn.core.domain.SgcDomain
};
saturn.core.domain.SgcEntryClone = $hxClasses["saturn.core.domain.SgcEntryClone"] = function() {
	saturn.core.DNA.call(this,null);
	this.setup();
};
saturn.core.domain.SgcEntryClone.__name__ = ["saturn","core","domain","SgcEntryClone"];
saturn.core.domain.SgcEntryClone.__super__ = saturn.core.DNA;
saturn.core.domain.SgcEntryClone.prototype = $extend(saturn.core.DNA.prototype,{
	entryCloneId: null
	,id: null
	,dnaSeq: null
	,target: null
	,seqSource: null
	,sourceId: null
	,sequenceConfirmed: null
	,elnId: null
	,complex: null
	,proteinSequenceObj: null
	,getMoleculeName: function() {
		return this.entryCloneId;
	}
	,setup: function() {
		this.setSequence(this.dnaSeq);
		if(this.dnaSeq != null && this.dnaSeq != "" && this.dnaSeq.length > 2) this.proteinSequenceObj = new saturn.core.Protein(this.getFrameTranslation(saturn.core.GeneticCodes.STANDARD,saturn.core.Frame.ONE)); else this.proteinSequenceObj = new saturn.core.Protein(null);
		this.proteinSequenceObj.setDNA(this);
		this.addProtein("Translation",this.proteinSequenceObj);
	}
	,setSequence: function(sequence) {
		saturn.core.DNA.prototype.setSequence.call(this,sequence);
		this.dnaSeq = sequence;
		if(this.proteinSequenceObj != null && this.dnaSeq != null && this.dnaSeq != "" && this.dnaSeq.length > 2) this.proteinSequenceObj.setSequence(this.getFrameTranslation(saturn.core.GeneticCodes.STANDARD,saturn.core.Frame.ONE));
	}
	,loadTranslation: function(cb) {
		this.proteinSequenceObj.setName(this.entryCloneId + " (Protein)");
		cb(this.proteinSequenceObj);
	}
	,__class__: saturn.core.domain.SgcEntryClone
});
saturn.core.domain.SgcExpression = $hxClasses["saturn.core.domain.SgcExpression"] = function() {
};
saturn.core.domain.SgcExpression.__name__ = ["saturn","core","domain","SgcExpression"];
saturn.core.domain.SgcExpression.prototype = {
	id: null
	,expressionId: null
	,cloneId: null
	,clone: null
	,elnId: null
	,comments: null
	,setup: function() {
	}
	,__class__: saturn.core.domain.SgcExpression
};
saturn.core.domain.SgcForwardPrimer = $hxClasses["saturn.core.domain.SgcForwardPrimer"] = function() {
	saturn.core.DNA.call(this,null);
};
saturn.core.domain.SgcForwardPrimer.__name__ = ["saturn","core","domain","SgcForwardPrimer"];
saturn.core.domain.SgcForwardPrimer.__super__ = saturn.core.DNA;
saturn.core.domain.SgcForwardPrimer.prototype = $extend(saturn.core.DNA.prototype,{
	primerId: null
	,id: null
	,dnaSequence: null
	,targetId: null
	,setup: function() {
		this.setSequence(this.dnaSequence);
	}
	,getMoleculeName: function() {
		return this.primerId;
	}
	,setSequence: function(sequence) {
		saturn.core.DNA.prototype.setSequence.call(this,sequence);
		this.dnaSequence = sequence;
	}
	,__class__: saturn.core.domain.SgcForwardPrimer
});
saturn.core.domain.SgcPurification = $hxClasses["saturn.core.domain.SgcPurification"] = function() {
};
saturn.core.domain.SgcPurification.__name__ = ["saturn","core","domain","SgcPurification"];
saturn.core.domain.SgcPurification.prototype = {
	id: null
	,purificationId: null
	,expressionId: null
	,expression: null
	,column: null
	,elnId: null
	,comments: null
	,setup: function() {
	}
	,__class__: saturn.core.domain.SgcPurification
};
saturn.core.domain.SgcRestrictionSite = $hxClasses["saturn.core.domain.SgcRestrictionSite"] = function() {
	saturn.core.DNA.call(this,null);
	this.allowStar = true;
};
saturn.core.domain.SgcRestrictionSite.__name__ = ["saturn","core","domain","SgcRestrictionSite"];
saturn.core.domain.SgcRestrictionSite.__super__ = saturn.core.DNA;
saturn.core.domain.SgcRestrictionSite.prototype = $extend(saturn.core.DNA.prototype,{
	enzymeName: null
	,cutSequence: null
	,id: null
	,setup: function() {
		this.setSequence(this.cutSequence);
	}
	,setSequence: function(sequence) {
		saturn.core.DNA.prototype.setSequence.call(this,sequence);
		this.cutSequence = sequence;
	}
	,getSequence: function() {
		return this.cutSequence;
	}
	,__class__: saturn.core.domain.SgcRestrictionSite
});
saturn.core.domain.SgcReversePrimer = $hxClasses["saturn.core.domain.SgcReversePrimer"] = function() {
	saturn.core.DNA.call(this,null);
};
saturn.core.domain.SgcReversePrimer.__name__ = ["saturn","core","domain","SgcReversePrimer"];
saturn.core.domain.SgcReversePrimer.__super__ = saturn.core.DNA;
saturn.core.domain.SgcReversePrimer.prototype = $extend(saturn.core.DNA.prototype,{
	primerId: null
	,id: null
	,dnaSequence: null
	,targetId: null
	,setup: function() {
		this.setSequence(this.dnaSequence);
	}
	,getMoleculeName: function() {
		return this.primerId;
	}
	,setSequence: function(sequence) {
		saturn.core.DNA.prototype.setSequence.call(this,sequence);
		this.dnaSequence = sequence;
	}
	,__class__: saturn.core.domain.SgcReversePrimer
});
saturn.core.domain.SgcSeqData = $hxClasses["saturn.core.domain.SgcSeqData"] = function() {
};
saturn.core.domain.SgcSeqData.__name__ = ["saturn","core","domain","SgcSeqData"];
saturn.core.domain.SgcSeqData.prototype = {
	id: null
	,type: null
	,sequence: null
	,version: null
	,targetId: null
	,target: null
	,crc: null
	,setup: function() {
		if(this.sequence != null) this.crc = haxe.crypto.Md5.encode(this.sequence); else this.crc = "";
	}
	,__class__: saturn.core.domain.SgcSeqData
};
saturn.core.domain.SgcTarget = $hxClasses["saturn.core.domain.SgcTarget"] = function() {
	saturn.core.DNA.call(this,null);
	this.setup();
};
saturn.core.domain.SgcTarget.__name__ = ["saturn","core","domain","SgcTarget"];
saturn.core.domain.SgcTarget.__super__ = saturn.core.DNA;
saturn.core.domain.SgcTarget.prototype = $extend(saturn.core.DNA.prototype,{
	targetId: null
	,id: null
	,gi: null
	,dnaSeq: null
	,proteinSeq: null
	,geneId: null
	,activeStatus: null
	,pi: null
	,comments: null
	,proteinSequenceObj: null
	,complexComments: null
	,eln: null
	,complex: null
	,setup: function() {
		this.setSequence(this.dnaSeq);
		this.setName(this.targetId);
		this.sequenceField = "dnaSeq";
		if(this.proteinSequenceObj == null) this.proteinSequenceObj = new saturn.core.Protein(null);
		this.addProtein("Translation",this.proteinSequenceObj);
	}
	,proteinSequenceUpdated: function(sequence) {
		this.proteinSeq = sequence;
	}
	,setSequence: function(sequence) {
		saturn.core.DNA.prototype.setSequence.call(this,sequence);
		this.dnaSeq = sequence;
	}
	,loadWonka: function() {
		var so = new saturn.core.WONKASession();
		so.src = "/WONKA/" + this.targetId + "/Summarise";
		var wo = new saturn.client.workspace.WONKAWO(so,"WONKA " + this.targetId);
		saturn.client.WorkspaceApplication.getApplication().getWorkspace().addObject(wo,true);
	}
	,__class__: saturn.core.domain.SgcTarget
});
saturn.core.domain.SgcUtil = $hxClasses["saturn.core.domain.SgcUtil"] = function() {
};
saturn.core.domain.SgcUtil.__name__ = ["saturn","core","domain","SgcUtil"];
saturn.core.domain.SgcUtil.generateNextIDForClasses = function(provider,targets,clazzes,cb) {
	var classToIds = new haxe.ds.StringMap();
	var next = null;
	next = function() {
		var clazz = clazzes.pop();
		saturn.core.domain.SgcUtil.generateNextID(provider,targets,clazz,function(map,error) {
			if(error != null) cb(null,error); else {
				var key = Type.getClassName(clazz);
				if(__map_reserved[key] != null) classToIds.setReserved(key,map); else classToIds.h[key] = map;
				if(clazzes.length == 0) cb(classToIds,null); else next();
			}
		});
	};
	next();
};
saturn.core.domain.SgcUtil.generateNextID = function(provider,targets,clazz,cb) {
	var q = new saturn.db.query_lang.Query(provider);
	var s = q.getSelect();
	var model = provider.getModel(clazz);
	var idField = new saturn.db.query_lang.Field(clazz,model.getFirstKey());
	q.getSelect().add(idField.substr(1,idField.instr("-",1).minus(1))["as"]("target"));
	q.getSelect().add(idField.substr(idField.instr("-",1).plus(2),idField.length())["as"]("ID"));
	var _g1 = 0;
	var _g = targets.length;
	while(_g1 < _g) {
		var i = _g1++;
		var target = targets[i];
		q.getWhere().add(idField.like(new saturn.db.query_lang.Value(target).concat("%")));
		if(i < targets.length - 1) q.getWhere().addToken(new saturn.db.query_lang.Or());
	}
	var q2 = new saturn.db.query_lang.Query(provider);
	q2.fetchRawResults();
	q2.getSelect().add(new saturn.db.query_lang.Field(null,"target","a")["as"]("targetName"));
	q2.getSelect().add(new saturn.db.query_lang.Trim(new saturn.db.query_lang.Max(new saturn.db.query_lang.Field(null,"ID","a")))["as"]("lastId"));
	q2.getFrom().add(q["as"]("a"));
	q2.getGroup().add(new saturn.db.query_lang.Field(null,"target","a"));
	q2.run(function(objs,err) {
		if(err != null) cb(null,err); else {
			var map = new haxe.ds.StringMap();
			var _g2 = 0;
			while(_g2 < objs.length) {
				var obj = objs[_g2];
				++_g2;
				var nextId = Std.parseInt(obj.lastId) + 1;
				if((function($this) {
					var $r;
					var f = nextId;
					$r = isNaN(f);
					return $r;
				}(this)) || nextId == null || nextId == "null") nextId = 0;
				obj.lastId = nextId;
				saturn.core.Util.debug(obj.targetName);
				var key = obj.targetName;
				var value = obj.lastId;
				if(__map_reserved[key] != null) map.setReserved(key,value); else map.h[key] = value;
			}
			var _g3 = 0;
			while(_g3 < targets.length) {
				var target1 = targets[_g3];
				++_g3;
				if(!(__map_reserved[target1] != null?map.existsReserved(target1):map.h.hasOwnProperty(target1))) {
					if(__map_reserved[target1] != null) map.setReserved(target1,1); else map.h[target1] = 1;
				}
			}
			cb(map,null);
		}
	});
};
saturn.core.domain.SgcUtil.prototype = {
	__class__: saturn.core.domain.SgcUtil
};
saturn.core.domain.SgcVector = $hxClasses["saturn.core.domain.SgcVector"] = function() {
	this.addStopCodon = "no";
	saturn.core.DNA.call(this,null);
};
saturn.core.domain.SgcVector.__name__ = ["saturn","core","domain","SgcVector"];
saturn.core.domain.SgcVector.__super__ = saturn.core.DNA;
saturn.core.domain.SgcVector.prototype = $extend(saturn.core.DNA.prototype,{
	vectorId: null
	,id: null
	,vectorComments: null
	,proteaseName: null
	,proteaseCutSequence: null
	,proteaseProduct: null
	,antibiotic: null
	,organism: null
	,res1Id: null
	,res2Id: null
	,res1: null
	,res2: null
	,addStopCodon: null
	,requiredForwardExtension: null
	,requiredReverseExtension: null
	,setup: function() {
	}
	,__class__: saturn.core.domain.SgcVector
});
saturn.core.domain.StructureModel = $hxClasses["saturn.core.domain.StructureModel"] = function() {
	this.ribbonOn = true;
	this.wireOn = false;
};
saturn.core.domain.StructureModel.__name__ = ["saturn","core","domain","StructureModel"];
saturn.core.domain.StructureModel.prototype = {
	id: null
	,modelId: null
	,contents: null
	,pdb: null
	,pathToPdb: null
	,ribbonOn: null
	,wireOn: null
	,labelsOn: null
	,renderer: null
	,icbURL: null
	,getContent: function() {
		if(this.contents != null) return this.contents; else if(this.pdb != null) {
			var array = new Uint8Array(this.pdb.content);
			var stringjs = String;
			var contents = "";
			var _g1 = 0;
			var _g = array.length;
			while(_g1 < _g) {
				var i = _g1++;
				contents += String.fromCharCode(array[i]);
			}
			return contents;
		} else return null;
	}
	,__class__: saturn.core.domain.StructureModel
};
saturn.core.domain.TextFile = $hxClasses["saturn.core.domain.TextFile"] = function() {
	this.autoRun = false;
	this.setup();
};
saturn.core.domain.TextFile.__name__ = ["saturn","core","domain","TextFile"];
saturn.core.domain.TextFile.prototype = {
	id: null
	,name: null
	,autoRun: null
	,value: null
	,setup: function() {
	}
	,getName: function() {
		return this.name;
	}
	,setText: function(content) {
		this.value = content;
	}
	,__class__: saturn.core.domain.TextFile
};
saturn.core.domain.TiddlyWiki = $hxClasses["saturn.core.domain.TiddlyWiki"] = function() {
};
saturn.core.domain.TiddlyWiki.__name__ = ["saturn","core","domain","TiddlyWiki"];
saturn.core.domain.TiddlyWiki.prototype = {
	id: null
	,pageId: null
	,content: null
	,setup: function() {
	}
	,__class__: saturn.core.domain.TiddlyWiki
};
if(!saturn.core.domain.chromohub) saturn.core.domain.chromohub = {};
saturn.core.domain.chromohub.Target = $hxClasses["saturn.core.domain.chromohub.Target"] = function() {
};
saturn.core.domain.chromohub.Target.__name__ = ["saturn","core","domain","chromohub","Target"];
saturn.core.domain.chromohub.Target.prototype = {
	id: null
	,targetId: null
	,symbol: null
	,geneid: null
	,uniprot: null
	,__class__: saturn.core.domain.chromohub.Target
};
if(!saturn.core.exceptions) saturn.core.exceptions = {};
saturn.core.exceptions.LocusPrimerMissingException = $hxClasses["saturn.core.exceptions.LocusPrimerMissingException"] = function(message,primer) {
	saturn.util.HaxeException.call(this,message);
	this.thePrimer = primer;
};
saturn.core.exceptions.LocusPrimerMissingException.__name__ = ["saturn","core","exceptions","LocusPrimerMissingException"];
saturn.core.exceptions.LocusPrimerMissingException.__super__ = saturn.util.HaxeException;
saturn.core.exceptions.LocusPrimerMissingException.prototype = $extend(saturn.util.HaxeException.prototype,{
	thePrimer: null
	,getPrimer: function() {
		return this.thePrimer;
	}
	,__class__: saturn.core.exceptions.LocusPrimerMissingException
});
saturn.core.exceptions.MultiLocusPrimerException = $hxClasses["saturn.core.exceptions.MultiLocusPrimerException"] = function(message,primer) {
	saturn.util.HaxeException.call(this,message);
	this.thePrimer = primer;
};
saturn.core.exceptions.MultiLocusPrimerException.__name__ = ["saturn","core","exceptions","MultiLocusPrimerException"];
saturn.core.exceptions.MultiLocusPrimerException.__super__ = saturn.util.HaxeException;
saturn.core.exceptions.MultiLocusPrimerException.prototype = $extend(saturn.util.HaxeException.prototype,{
	thePrimer: null
	,getPrimer: function() {
		return this.thePrimer;
	}
	,__class__: saturn.core.exceptions.MultiLocusPrimerException
});
saturn.core.molecule.MoleculeFloatAttribute = $hxClasses["saturn.core.molecule.MoleculeFloatAttribute"] = { __ename__ : ["saturn","core","molecule","MoleculeFloatAttribute"], __constructs__ : ["MW","MW_CONDESATION"] };
saturn.core.molecule.MoleculeFloatAttribute.MW = ["MW",0];
saturn.core.molecule.MoleculeFloatAttribute.MW.toString = $estr;
saturn.core.molecule.MoleculeFloatAttribute.MW.__enum__ = saturn.core.molecule.MoleculeFloatAttribute;
saturn.core.molecule.MoleculeFloatAttribute.MW_CONDESATION = ["MW_CONDESATION",1];
saturn.core.molecule.MoleculeFloatAttribute.MW_CONDESATION.toString = $estr;
saturn.core.molecule.MoleculeFloatAttribute.MW_CONDESATION.__enum__ = saturn.core.molecule.MoleculeFloatAttribute;
saturn.core.molecule.MoleculeStringAttribute = $hxClasses["saturn.core.molecule.MoleculeStringAttribute"] = { __ename__ : ["saturn","core","molecule","MoleculeStringAttribute"], __constructs__ : ["NAME"] };
saturn.core.molecule.MoleculeStringAttribute.NAME = ["NAME",0];
saturn.core.molecule.MoleculeStringAttribute.NAME.toString = $estr;
saturn.core.molecule.MoleculeStringAttribute.NAME.__enum__ = saturn.core.molecule.MoleculeStringAttribute;
saturn.core.molecule.MoleculeAlignMode = $hxClasses["saturn.core.molecule.MoleculeAlignMode"] = { __ename__ : ["saturn","core","molecule","MoleculeAlignMode"], __constructs__ : ["REGEX","SIMPLE"] };
saturn.core.molecule.MoleculeAlignMode.REGEX = ["REGEX",0];
saturn.core.molecule.MoleculeAlignMode.REGEX.toString = $estr;
saturn.core.molecule.MoleculeAlignMode.REGEX.__enum__ = saturn.core.molecule.MoleculeAlignMode;
saturn.core.molecule.MoleculeAlignMode.SIMPLE = ["SIMPLE",1];
saturn.core.molecule.MoleculeAlignMode.SIMPLE.toString = $estr;
saturn.core.molecule.MoleculeAlignMode.SIMPLE.__enum__ = saturn.core.molecule.MoleculeAlignMode;
saturn.core.molecule.MoleculeConstants = $hxClasses["saturn.core.molecule.MoleculeConstants"] = function() { };
saturn.core.molecule.MoleculeConstants.__name__ = ["saturn","core","molecule","MoleculeConstants"];
saturn.core.molecule.MoleculeSets = $hxClasses["saturn.core.molecule.MoleculeSets"] = { __ename__ : ["saturn","core","molecule","MoleculeSets"], __constructs__ : ["STANDARD"] };
saturn.core.molecule.MoleculeSets.STANDARD = ["STANDARD",0];
saturn.core.molecule.MoleculeSets.STANDARD.toString = $estr;
saturn.core.molecule.MoleculeSets.STANDARD.__enum__ = saturn.core.molecule.MoleculeSets;
saturn.core.molecule.MoleculeSetRegistry = $hxClasses["saturn.core.molecule.MoleculeSetRegistry"] = function() {
	this.moleculeSets = new haxe.ds.StringMap();
	this.register(saturn.core.molecule.MoleculeSets.STANDARD,new saturn.core.StandardMoleculeSet());
};
saturn.core.molecule.MoleculeSetRegistry.__name__ = ["saturn","core","molecule","MoleculeSetRegistry"];
saturn.core.molecule.MoleculeSetRegistry.getStandardMoleculeSet = function() {
	return saturn.core.molecule.MoleculeSetRegistry.defaultRegistry.get(saturn.core.molecule.MoleculeSets.STANDARD);
};
saturn.core.molecule.MoleculeSetRegistry.prototype = {
	moleculeSets: null
	,register: function(setType,set) {
		this.registerSet(Std.string(setType),set);
	}
	,get: function(setType) {
		return this.getSet(Std.string(setType));
	}
	,registerSet: function(name,set) {
		this.moleculeSets.set(name,set);
	}
	,getSet: function(name) {
		return this.moleculeSets.get(name);
	}
	,__class__: saturn.core.molecule.MoleculeSetRegistry
};
if(!saturn.core.parsers) saturn.core.parsers = {};
saturn.core.parsers.BaseParser = $hxClasses["saturn.core.parsers.BaseParser"] = function(path,handler,done) {
	this.lineCount = 0;
	var _g = this;
	saturn.core.Generator.call(this,-1);
	this.doneCB = done;
	this.path = path;
	this.setMaxAtOnce(200);
	this.onEnd(done);
	this.onNext(function(objs,next,c) {
		handler(objs,_g);
	});
	if(path != null) this.read();
};
saturn.core.parsers.BaseParser.__name__ = ["saturn","core","parsers","BaseParser"];
saturn.core.parsers.BaseParser.__super__ = saturn.core.Generator;
saturn.core.parsers.BaseParser.prototype = $extend(saturn.core.Generator.prototype,{
	doneCB: null
	,path: null
	,content: null
	,lineCount: null
	,setContent: function(content) {
		this.content = content;
		this.read();
	}
	,read: function() {
		var _g = this;
		if(this.path != null) saturn.core.Util.open(this.path,function(err,line) {
			if(err != null) _g.die("Error reading file"); else {
				_g.lineCount++;
				if(line == null) {
					saturn.core.Util.debug("Lines read: " + _g.lineCount);
					_g.finished();
				} else {
					var obj = _g.parseLine(line);
					if(obj != null) _g.push(obj);
				}
			}
		}); else if(this.content != null) {
			var lines = this.content.split("\n");
			var _g1 = 0;
			while(_g1 < lines.length) {
				var line1 = lines[_g1];
				++_g1;
				var obj1 = this.parseLine(line1);
				if(obj1 != null) this.push(obj1);
			}
			this.finished();
		}
	}
	,parseLine: function(line) {
		return null;
	}
	,__class__: saturn.core.parsers.BaseParser
});
saturn.core.parsers.HmmerParser = $hxClasses["saturn.core.parsers.HmmerParser"] = function(path,handler,done) {
	this.colSep = new EReg("\\s+","g");
	saturn.core.parsers.BaseParser.call(this,path,handler,done);
};
saturn.core.parsers.HmmerParser.__name__ = ["saturn","core","parsers","HmmerParser"];
saturn.core.parsers.HmmerParser.__super__ = saturn.core.parsers.BaseParser;
saturn.core.parsers.HmmerParser.prototype = $extend(saturn.core.parsers.BaseParser.prototype,{
	colSep: null
	,parseLine: function(line) {
		if(line.indexOf("#") == 0 || line == "") return null; else {
			var cols = this.colSep.split(line);
			var queryName = cols[0];
			var domainDescr = cols[3];
			var domainName = cols[4];
			var start = cols[19];
			var stop = cols[20];
			var evalue = parseFloat(cols[6]);
			var cdevalue = parseFloat(cols[11]);
			var entity = new saturn.core.domain.Entity();
			entity.entityId = queryName;
			var referent = new saturn.core.domain.Entity();
			referent.entityId = domainName;
			referent.altName = domainDescr;
			var annotation = new saturn.core.domain.MoleculeAnnotation();
			annotation.entity = entity;
			annotation.referent = referent;
			annotation.start = Std.parseInt(start);
			annotation.stop = Std.parseInt(stop);
			annotation.evalue = cdevalue;
			annotation.altevalue = evalue;
			return annotation;
		}
	}
	,__class__: saturn.core.parsers.HmmerParser
});
if(!saturn.core.scarab) saturn.core.scarab = {};
saturn.core.scarab.LabPage = $hxClasses["saturn.core.scarab.LabPage"] = function() {
};
saturn.core.scarab.LabPage.__name__ = ["saturn","core","scarab","LabPage"];
saturn.core.scarab.LabPage.findAll = function(phrase,cb) {
	saturn.core.Util.getProvider().getByNamedQuery("SCARAB_ELN_QUERY",[phrase,phrase,phrase,phrase],saturn.core.scarab.LabPage,false,function(objs,err) {
		cb(objs,err);
	});
};
saturn.core.scarab.LabPage.prototype = {
	id: null
	,experimentNo: null
	,dateStarted: null
	,title: null
	,userId: null
	,elnDocumentId: null
	,minEditableItem: null
	,lastEdited: null
	,user: null
	,sharingAllowed: null
	,personalTemplate: null
	,globalTemplate: null
	,dateExperimentStarted: null
	,userObj: null
	,items: null
	,relatedLabPages: null
	,sharedTo: null
	,tags: null
	,getShortDescription: function() {
		return this.title + " (" + this.experimentNo + ")";
	}
	,__class__: saturn.core.scarab.LabPage
};
saturn.core.scarab.LabPageItem = $hxClasses["saturn.core.scarab.LabPageItem"] = function() {
};
saturn.core.scarab.LabPageItem.__name__ = ["saturn","core","scarab","LabPageItem"];
saturn.core.scarab.LabPageItem.prototype = {
	id: null
	,itemOrder: null
	,caption: null
	,elnSectionId: null
	,__class__: saturn.core.scarab.LabPageItem
};
saturn.core.scarab.LabPageAttachments = $hxClasses["saturn.core.scarab.LabPageAttachments"] = function() {
	saturn.core.scarab.LabPageItem.call(this);
};
saturn.core.scarab.LabPageAttachments.__name__ = ["saturn","core","scarab","LabPageAttachments"];
saturn.core.scarab.LabPageAttachments.__super__ = saturn.core.scarab.LabPageItem;
saturn.core.scarab.LabPageAttachments.prototype = $extend(saturn.core.scarab.LabPageItem.prototype,{
	modifiedInICMdb: null
	,__class__: saturn.core.scarab.LabPageAttachments
});
saturn.core.scarab.LabPageExcel = $hxClasses["saturn.core.scarab.LabPageExcel"] = function() {
	saturn.core.scarab.LabPageItem.call(this);
};
saturn.core.scarab.LabPageExcel.__name__ = ["saturn","core","scarab","LabPageExcel"];
saturn.core.scarab.LabPageExcel.__super__ = saturn.core.scarab.LabPageItem;
saturn.core.scarab.LabPageExcel.prototype = $extend(saturn.core.scarab.LabPageItem.prototype,{
	excel: null
	,filename: null
	,html: null
	,htmlFolder: null
	,__class__: saturn.core.scarab.LabPageExcel
});
saturn.core.scarab.LabPageFileRefs = $hxClasses["saturn.core.scarab.LabPageFileRefs"] = function() {
	saturn.core.scarab.LabPageItem.call(this);
};
saturn.core.scarab.LabPageFileRefs.__name__ = ["saturn","core","scarab","LabPageFileRefs"];
saturn.core.scarab.LabPageFileRefs.__super__ = saturn.core.scarab.LabPageItem;
saturn.core.scarab.LabPageFileRefs.prototype = $extend(saturn.core.scarab.LabPageItem.prototype,{
	__class__: saturn.core.scarab.LabPageFileRefs
});
saturn.core.scarab.LabPageImage = $hxClasses["saturn.core.scarab.LabPageImage"] = function() {
	saturn.core.scarab.LabPageItem.call(this);
};
saturn.core.scarab.LabPageImage.__name__ = ["saturn","core","scarab","LabPageImage"];
saturn.core.scarab.LabPageImage.__super__ = saturn.core.scarab.LabPageItem;
saturn.core.scarab.LabPageImage.prototype = $extend(saturn.core.scarab.LabPageItem.prototype,{
	content: null
	,imageEdit: null
	,imageAnnot: null
	,vectorized: null
	,elnProperties: null
	,annotTexts: null
	,wmf: null
	,__class__: saturn.core.scarab.LabPageImage
});
saturn.core.scarab.LabPagePdf = $hxClasses["saturn.core.scarab.LabPagePdf"] = function() {
	saturn.core.scarab.LabPageItem.call(this);
};
saturn.core.scarab.LabPagePdf.__name__ = ["saturn","core","scarab","LabPagePdf"];
saturn.core.scarab.LabPagePdf.__super__ = saturn.core.scarab.LabPageItem;
saturn.core.scarab.LabPagePdf.prototype = $extend(saturn.core.scarab.LabPageItem.prototype,{
	pdf: null
	,image: null
	,__class__: saturn.core.scarab.LabPagePdf
});
saturn.core.scarab.LabPageTag = $hxClasses["saturn.core.scarab.LabPageTag"] = function() {
};
saturn.core.scarab.LabPageTag.__name__ = ["saturn","core","scarab","LabPageTag"];
saturn.core.scarab.LabPageTag.prototype = {
	id: null
	,tagName: null
	,__class__: saturn.core.scarab.LabPageTag
};
saturn.core.scarab.LabPageText = $hxClasses["saturn.core.scarab.LabPageText"] = function() {
	saturn.core.scarab.LabPageItem.call(this);
};
saturn.core.scarab.LabPageText.__name__ = ["saturn","core","scarab","LabPageText"];
saturn.core.scarab.LabPageText.__super__ = saturn.core.scarab.LabPageItem;
saturn.core.scarab.LabPageText.prototype = $extend(saturn.core.scarab.LabPageItem.prototype,{
	content: null
	,__class__: saturn.core.scarab.LabPageText
});
saturn.core.scarab.LabPageUser = $hxClasses["saturn.core.scarab.LabPageUser"] = function() {
};
saturn.core.scarab.LabPageUser.__name__ = ["saturn","core","scarab","LabPageUser"];
saturn.core.scarab.LabPageUser.prototype = {
	id: null
	,fullName: null
	,__class__: saturn.core.scarab.LabPageUser
};
saturn.core.scarab.ScarabProject = $hxClasses["saturn.core.scarab.ScarabProject"] = function() {
};
saturn.core.scarab.ScarabProject.__name__ = ["saturn","core","scarab","ScarabProject"];
saturn.core.scarab.ScarabProject.prototype = {
	id: null
	,projectName: null
	,projectOwner: null
	,projectAdmins: null
	,projectPages: null
	,__class__: saturn.core.scarab.ScarabProject
};
if(!saturn.db) saturn.db = {};
saturn.db.BatchFetch = $hxClasses["saturn.db.BatchFetch"] = function(onError) {
	this.items = new haxe.ds.StringMap();
	this.fetchList = [];
	this.retrieved = new haxe.ds.StringMap();
	this.position = 0;
	this.onError = onError;
};
saturn.db.BatchFetch.__name__ = ["saturn","db","BatchFetch"];
saturn.db.BatchFetch.prototype = {
	fetchList: null
	,userOnError: null
	,userOnComplete: null
	,position: null
	,retrieved: null
	,onComplete: null
	,onError: null
	,provider: null
	,items: null
	,onFinish: function(cb) {
		this.onComplete = cb;
	}
	,getById: function(objectId,clazz,key,callBack) {
		var list = [];
		list.push(objectId);
		return this.getByIds(list,clazz,key,callBack);
	}
	,getByIds: function(objectIds,clazz,key,callBack) {
		var work = new haxe.ds.StringMap();
		if(__map_reserved.IDS != null) work.setReserved("IDS",objectIds); else work.h["IDS"] = objectIds;
		if(__map_reserved.CLASS != null) work.setReserved("CLASS",clazz); else work.h["CLASS"] = clazz;
		if(__map_reserved.TYPE != null) work.setReserved("TYPE","getByIds"); else work.h["TYPE"] = "getByIds";
		if(__map_reserved.KEY != null) work.setReserved("KEY",key); else work.h["KEY"] = key;
		var value = callBack;
		work.set("CALLBACK",value);
		this.fetchList.push(work);
		return this;
	}
	,getByValue: function(value,clazz,field,key,callBack) {
		var list = [];
		list.push(value);
		return this.getByValues(list,clazz,field,key,callBack);
	}
	,getByValues: function(values,clazz,field,key,callBack) {
		var work = new haxe.ds.StringMap();
		if(__map_reserved.VALUES != null) work.setReserved("VALUES",values); else work.h["VALUES"] = values;
		if(__map_reserved.CLASS != null) work.setReserved("CLASS",clazz); else work.h["CLASS"] = clazz;
		if(__map_reserved.FIELD != null) work.setReserved("FIELD",field); else work.h["FIELD"] = field;
		if(__map_reserved.TYPE != null) work.setReserved("TYPE","getByValues"); else work.h["TYPE"] = "getByValues";
		if(__map_reserved.KEY != null) work.setReserved("KEY",key); else work.h["KEY"] = key;
		var value = callBack;
		work.set("CALLBACK",value);
		this.fetchList.push(work);
		return this;
	}
	,getByPkey: function(objectId,clazz,key,callBack) {
		var list = [];
		list.push(objectId);
		return this.getByPkeys(list,clazz,key,callBack);
	}
	,getByPkeys: function(objectIds,clazz,key,callBack) {
		var work = new haxe.ds.StringMap();
		if(__map_reserved.IDS != null) work.setReserved("IDS",objectIds); else work.h["IDS"] = objectIds;
		if(__map_reserved.CLASS != null) work.setReserved("CLASS",clazz); else work.h["CLASS"] = clazz;
		if(__map_reserved.TYPE != null) work.setReserved("TYPE","getByPkeys"); else work.h["TYPE"] = "getByPkeys";
		if(__map_reserved.KEY != null) work.setReserved("KEY",key); else work.h["KEY"] = key;
		var value = callBack;
		work.set("CALLBACK",value);
		this.fetchList.push(work);
		return this;
	}
	,append: function(val,field,clazz,cb) {
		var key = Type.getClassName(clazz) + "." + field;
		if(!this.items.exists(key)) {
			var value = [];
			this.items.set(key,value);
		}
		this.items.get(key).push({ val : val, field : field, clazz : clazz, cb : cb});
	}
	,next: function() {
		this.execute();
	}
	,setProvider: function(provider) {
		this.provider = provider;
	}
	,execute: function(cb) {
		var _g = this;
		var provider = this.provider;
		if(provider == null) provider = saturn.client.core.CommonCore.getDefaultProvider();
		if(cb != null) this.onFinish(cb);
		var $it0 = this.items.keys();
		while( $it0.hasNext() ) {
			var key = $it0.next();
			var units = this.items.get(key);
			var work1 = new haxe.ds.StringMap();
			if(__map_reserved.TYPE != null) work1.setReserved("TYPE","FETCHITEM"); else work1.h["TYPE"] = "FETCHITEM";
			work1.set("FIELD",units[0].field);
			work1.set("CLASS",units[0].clazz);
			if(__map_reserved.ITEMS != null) work1.setReserved("ITEMS",units); else work1.h["ITEMS"] = units;
			this.items.remove(key);
			this.fetchList.push(work1);
		}
		if(this.position == this.fetchList.length) {
			this.onComplete();
			return;
		}
		var work = this.fetchList[this.position];
		var type;
		type = __map_reserved.TYPE != null?work.getReserved("TYPE"):work.h["TYPE"];
		this.position++;
		if(type == "getByIds") provider.getByIds(__map_reserved.IDS != null?work.getReserved("IDS"):work.h["IDS"],__map_reserved.CLASS != null?work.getReserved("CLASS"):work.h["CLASS"],function(objs,exception) {
			if(exception != null || objs == null) _g.onError(objs,exception); else {
				var key1;
				key1 = __map_reserved.KEY != null?work.getReserved("KEY"):work.h["KEY"];
				_g.retrieved.set(key1,objs);
				var userCallBack;
				userCallBack = __map_reserved.CALLBACK != null?work.getReserved("CALLBACK"):work.h["CALLBACK"];
				if(userCallBack != null) userCallBack(objs,exception); else if(_g.position == _g.fetchList.length) _g.onComplete(); else _g.execute();
			}
		}); else if(type == "getByValues") provider.getByValues(__map_reserved.VALUES != null?work.getReserved("VALUES"):work.h["VALUES"],__map_reserved.CLASS != null?work.getReserved("CLASS"):work.h["CLASS"],__map_reserved.FIELD != null?work.getReserved("FIELD"):work.h["FIELD"],function(objs1,exception1) {
			if(exception1 != null || objs1 == null) _g.onError(objs1,exception1); else {
				var key2;
				key2 = __map_reserved.KEY != null?work.getReserved("KEY"):work.h["KEY"];
				_g.retrieved.set(key2,objs1);
				var userCallBack1;
				userCallBack1 = __map_reserved.CALLBACK != null?work.getReserved("CALLBACK"):work.h["CALLBACK"];
				if(userCallBack1 != null) userCallBack1(objs1,exception1); else if(_g.position == _g.fetchList.length) _g.onComplete(); else _g.execute();
			}
		}); else if(type == "getByPkeys") provider.getByPkeys(__map_reserved.IDS != null?work.getReserved("IDS"):work.h["IDS"],__map_reserved.CLASS != null?work.getReserved("CLASS"):work.h["CLASS"],function(obj,exception2) {
			if(exception2 != null || obj == null) _g.onError(obj,exception2); else {
				var key3;
				key3 = __map_reserved.KEY != null?work.getReserved("KEY"):work.h["KEY"];
				_g.retrieved.set(key3,obj);
				var userCallBack2;
				userCallBack2 = __map_reserved.CALLBACK != null?work.getReserved("CALLBACK"):work.h["CALLBACK"];
				if(userCallBack2 != null) userCallBack2(obj,exception2); else if(_g.position == _g.fetchList.length) _g.onComplete(); else _g.execute();
			}
		}); else if(type == "FETCHITEM") {
			var items;
			items = __map_reserved.ITEMS != null?work.getReserved("ITEMS"):work.h["ITEMS"];
			var itemMap = new haxe.ds.StringMap();
			var _g1 = 0;
			while(_g1 < items.length) {
				var item = items[_g1];
				++_g1;
				if(!itemMap.exists(item.val)) {
					var value = [];
					itemMap.set(item.val,value);
				}
				itemMap.get(item.val).push(item.cb);
			}
			var values = [];
			var $it1 = itemMap.keys();
			while( $it1.hasNext() ) {
				var key4 = $it1.next();
				values.push(key4);
			}
			var field;
			field = __map_reserved.FIELD != null?work.getReserved("FIELD"):work.h["FIELD"];
			provider.getByValues(values,__map_reserved.CLASS != null?work.getReserved("CLASS"):work.h["CLASS"],field,function(objs2,exception3) {
				if(exception3 != null || objs2 == null) _g.onError(objs2,exception3); else {
					var _g2 = 0;
					while(_g2 < objs2.length) {
						var obj1 = objs2[_g2];
						++_g2;
						var fieldValue = Reflect.field(obj1,field);
						if(__map_reserved[fieldValue] != null?itemMap.existsReserved(fieldValue):itemMap.h.hasOwnProperty(fieldValue)) {
							var _g11 = 0;
							var _g21;
							_g21 = __map_reserved[fieldValue] != null?itemMap.getReserved(fieldValue):itemMap.h[fieldValue];
							while(_g11 < _g21.length) {
								var cb1 = _g21[_g11];
								++_g11;
								cb1(obj1);
							}
						}
					}
					if(_g.position == _g.fetchList.length) _g.onComplete(); else _g.execute();
				}
			});
		}
	}
	,getObject: function(key) {
		return this.retrieved.get(key);
	}
	,__class__: saturn.db.BatchFetch
};
saturn.db.Connection = $hxClasses["saturn.db.Connection"] = function() { };
saturn.db.Connection.__name__ = ["saturn","db","Connection"];
saturn.db.Connection.prototype = {
	execute: null
	,close: null
	,commit: null
	,setAutoCommit: null
	,__class__: saturn.db.Connection
};
saturn.db.Provider = $hxClasses["saturn.db.Provider"] = function() { };
saturn.db.Provider.__name__ = ["saturn","db","Provider"];
saturn.db.Provider.prototype = {
	getById: null
	,getByIds: null
	,getByPkey: null
	,getByPkeys: null
	,getByIdStartsWith: null
	,update: null
	,insert: null
	,'delete': null
	,generateQualifiedName: null
	,updateObjects: null
	,insertObjects: null
	,insertOrUpdate: null
	,rollback: null
	,commit: null
	,isAttached: null
	,sql: null
	,getByNamedQuery: null
	,getObjectFromCache: null
	,activate: null
	,getModel: null
	,getObjectModel: null
	,save: null
	,modelToReal: null
	,attach: null
	,resetCache: null
	,evictNamedQuery: null
	,readModels: null
	,dataBinding: null
	,isDataBinding: null
	,setSelectClause: null
	,_update: null
	,_insert: null
	,_delete: null
	,getByValue: null
	,getByValues: null
	,getObjects: null
	,queryPath: null
	,getModels: null
	,getModelClasses: null
	,connectAsUser: null
	,setConnectAsUser: null
	,enableCache: null
	,generatedLinkedClone: null
	,setUser: null
	,getUser: null
	,closeConnection: null
	,_closeConnection: null
	,setAutoCommit: null
	,setName: null
	,getName: null
	,getConfig: null
	,setConfig: null
	,evictObject: null
	,getByExample: null
	,query: null
	,getQuery: null
	,getProviderType: null
	,getModelByStringName: null
	,getConnection: null
	,uploadFile: null
	,addHook: null
	,__class__: saturn.db.Provider
};
saturn.db.DefaultProvider = $hxClasses["saturn.db.DefaultProvider"] = function(binding_map,config,autoClose) {
	this.user = null;
	this.namedQueryHookConfigs = new haxe.ds.StringMap();
	this.namedQueryHooks = new haxe.ds.StringMap();
	this.connectWithUserCreds = false;
	this.enableBinding = true;
	this.useCache = true;
	this.setPlatform();
	if(binding_map != null) this.setModels(binding_map);
	this.config = config;
	this.autoClose = autoClose;
	this.namedQueryHooks = new haxe.ds.StringMap();
	if(config != null && Object.prototype.hasOwnProperty.call(config,"named_query_hooks")) this.addHooks(Reflect.field(config,"named_query_hooks"));
	var $it0 = this.namedQueryHooks.keys();
	while( $it0.hasNext() ) {
		var hook = $it0.next();
		saturn.core.Util.debug("Installed hook: " + hook + "/" + Std.string(this.namedQueryHooks.get(hook)));
	}
};
saturn.db.DefaultProvider.__name__ = ["saturn","db","DefaultProvider"];
saturn.db.DefaultProvider.__interfaces__ = [saturn.db.Provider];
saturn.db.DefaultProvider.prototype = {
	theBindingMap: null
	,fieldIndexMap: null
	,objectCache: null
	,namedQueryCache: null
	,useCache: null
	,enableBinding: null
	,connectWithUserCreds: null
	,namedQueryHooks: null
	,namedQueryHookConfigs: null
	,modelClasses: null
	,user: null
	,autoClose: null
	,name: null
	,config: null
	,winConversions: null
	,linConversions: null
	,conversions: null
	,regexs: null
	,platform: null
	,setPlatform: function() {
		null;
		return;
	}
	,generateQualifiedName: function(schemaName,tableName) {
		return null;
	}
	,getConfig: function() {
		return this.config;
	}
	,setConfig: function(config) {
		this.config = config;
	}
	,setName: function(name) {
		this.name = name;
	}
	,getName: function() {
		return this.name;
	}
	,setUser: function(user) {
		this.user = user;
		this._closeConnection();
	}
	,getUser: function() {
		return this.user;
	}
	,closeConnection: function(connection) {
		if(this.autoClose) this._closeConnection();
	}
	,_closeConnection: function() {
	}
	,generatedLinkedClone: function() {
		var clazz = js.Boot.getClass(this);
		var provider = Type.createEmptyInstance(clazz);
		provider.theBindingMap = this.theBindingMap;
		provider.fieldIndexMap = this.fieldIndexMap;
		provider.namedQueryCache = this.namedQueryCache;
		provider.useCache = this.useCache;
		provider.enableBinding = this.enableBinding;
		provider.connectWithUserCreds = this.connectWithUserCreds;
		provider.namedQueryHooks = this.namedQueryHooks;
		provider.modelClasses = this.modelClasses;
		provider.platform = this.platform;
		provider.linConversions = this.linConversions;
		provider.winConversions = this.winConversions;
		provider.conversions = this.conversions;
		provider.regexs = this.regexs;
		provider.namedQueryHookConfigs = this.namedQueryHookConfigs;
		provider.config = this.config;
		provider.objectCache = new haxe.ds.StringMap();
		return provider;
	}
	,enableCache: function(cached) {
		this.useCache = cached;
	}
	,connectAsUser: function() {
		return this.connectWithUserCreds;
	}
	,setConnectAsUser: function(asUser) {
		this.connectWithUserCreds = asUser;
	}
	,setModels: function(binding_map) {
		this.theBindingMap = binding_map;
		var $it0 = binding_map.keys();
		while( $it0.hasNext() ) {
			var clazz = $it0.next();
			if((function($this) {
				var $r;
				var this1;
				this1 = __map_reserved[clazz] != null?binding_map.getReserved(clazz):binding_map.h[clazz];
				$r = this1.exists("polymorphic");
				return $r;
			}(this))) {
				if(!(function($this) {
					var $r;
					var this2;
					this2 = __map_reserved[clazz] != null?binding_map.getReserved(clazz):binding_map.h[clazz];
					$r = this2.exists("fields.synthetic");
					return $r;
				}(this))) {
					var this3;
					this3 = __map_reserved[clazz] != null?binding_map.getReserved(clazz):binding_map.h[clazz];
					var value = new haxe.ds.StringMap();
					this3.set("fields.synthetic",value);
				}
				var d;
				var this4;
				this4 = __map_reserved[clazz] != null?binding_map.getReserved(clazz):binding_map.h[clazz];
				d = this4.get("fields.synthetic");
				d.set("polymorphic",(function($this) {
					var $r;
					var this5;
					this5 = __map_reserved[clazz] != null?binding_map.getReserved(clazz):binding_map.h[clazz];
					$r = this5.get("polymorphic");
					return $r;
				}(this)));
			}
		}
		this.initModelClasses();
		this.resetCache();
	}
	,readModels: function(cb) {
	}
	,postConfigureModels: function() {
		var $it0 = this.theBindingMap.keys();
		while( $it0.hasNext() ) {
			var class_name = $it0.next();
			var d = this.theBindingMap.get(class_name);
			var value = this.getName();
			d.set("provider_name",value);
			saturn.core.Util.debug(class_name + " on " + this.getName());
		}
		if(this.isModel(saturn.core.domain.FileProxy)) {
			var this1 = this.getModel(saturn.core.domain.FileProxy).getOptions();
			this.winConversions = this1.get("windows_conversions");
			var this2 = this.getModel(saturn.core.domain.FileProxy).getOptions();
			this.linConversions = this2.get("linux_conversions");
			if(this.platform == "windows") {
				this.conversions = this.winConversions;
				var this3 = this.getModel(saturn.core.domain.FileProxy).getOptions();
				this.regexs = this3.get("windows_allowed_paths_regex");
			} else if(this.platform == "linux") {
				this.conversions = this.linConversions;
				var this4 = this.getModel(saturn.core.domain.FileProxy).getOptions();
				this.regexs = this4.get("linux_allowed_paths_regex");
			}
			if(this.regexs != null) {
				var $it1 = this.regexs.keys();
				while( $it1.hasNext() ) {
					var key = $it1.next();
					var s;
					s = js.Boot.__cast(this.regexs.get(key) , String);
					var value1 = new EReg(s,"");
					this.regexs.set(key,value1);
				}
			}
		}
	}
	,getModels: function() {
		return this.theBindingMap;
	}
	,resetCache: function() {
		this.objectCache = new haxe.ds.StringMap();
		if(this.theBindingMap != null) {
			var $it0 = this.theBindingMap.keys();
			while( $it0.hasNext() ) {
				var className = $it0.next();
				var this1 = this.theBindingMap.get(className);
				var value = new haxe.ds.StringMap();
				this1.set("statements",value);
				var value1 = new haxe.ds.StringMap();
				this.objectCache.set(className,value1);
				if((function($this) {
					var $r;
					var this2 = $this.theBindingMap.get(className);
					$r = this2.exists("indexes");
					return $r;
				}(this))) {
					var $it1 = (function($this) {
						var $r;
						var this3;
						{
							var this4 = $this.theBindingMap.get(className);
							this3 = this4.get("indexes");
						}
						$r = this3.keys();
						return $r;
					}(this));
					while( $it1.hasNext() ) {
						var field = $it1.next();
						var this5 = this.objectCache.get(className);
						var value2 = new haxe.ds.StringMap();
						this5.set(field,value2);
					}
				}
			}
		}
		this.namedQueryCache = new haxe.ds.StringMap();
	}
	,getObjectFromCache: function(clazz,field,val) {
		var className = Type.getClassName(clazz);
		if(this.objectCache.exists(className)) {
			if((function($this) {
				var $r;
				var this1 = $this.objectCache.get(className);
				$r = this1.exists(field);
				return $r;
			}(this))) {
				if((function($this) {
					var $r;
					var this2;
					{
						var this3 = $this.objectCache.get(className);
						this2 = this3.get(field);
					}
					var key = val;
					$r = this2.exists(key);
					return $r;
				}(this))) {
					var this4;
					var this5 = this.objectCache.get(className);
					this4 = this5.get(field);
					var key1 = val;
					return this4.get(key1);
				} else return null;
			} else return null;
		} else return null;
	}
	,initialiseObjects: function(idsToFetch,toBind,prefetched,exception,callBack,clazz,bindField,cache,allowAutoBind) {
		if(allowAutoBind == null) allowAutoBind = true;
		if(idsToFetch.length > 0 && toBind == null || clazz == null || toBind != null && toBind.length > 0 && clazz != null && js.Boot.__instanceof(toBind[0],clazz)) callBack(toBind,exception); else {
			var model = this.getModel(clazz);
			if(model == null) {
				var boundObjs1 = [];
				var _g = 0;
				while(_g < toBind.length) {
					var item = toBind[_g];
					++_g;
					var obj = Type.createInstance(clazz,[]);
					var _g1 = 0;
					var _g2 = Type.getInstanceFields(clazz);
					while(_g1 < _g2.length) {
						var field = _g2[_g1];
						++_g1;
						if(Object.prototype.hasOwnProperty.call(item,field)) Reflect.setField(obj,field,Reflect.field(item,field));
					}
					boundObjs1.push(obj);
				}
				callBack(boundObjs1,exception);
				return;
			}
			var autoActivate = model.getAutoActivateLevel();
			var surpressSetup = false;
			if(autoActivate != -1 && this.enableBinding && allowAutoBind) surpressSetup = true;
			var boundObjs = [];
			if(toBind != null) {
				var _g3 = 0;
				while(_g3 < toBind.length) {
					var obj1 = toBind[_g3];
					++_g3;
					boundObjs.push(this.bindObject(obj1,clazz,cache,bindField,surpressSetup));
				}
			}
			if(autoActivate != -1 && this.enableBinding && allowAutoBind) this.activate(boundObjs,autoActivate,function(err) {
				if(err == null) {
					var _g4 = 0;
					while(_g4 < boundObjs.length) {
						var boundObj = boundObjs[_g4];
						++_g4;
						if(Reflect.isFunction(boundObj.setup)) boundObj.setup();
					}
					if(prefetched != null) {
						var _g5 = 0;
						while(_g5 < prefetched.length) {
							var obj2 = prefetched[_g5];
							++_g5;
							boundObjs.push(obj2);
						}
					}
					callBack(boundObjs,exception);
				} else callBack(null,err);
			}); else {
				if(prefetched != null) {
					var _g6 = 0;
					while(_g6 < prefetched.length) {
						var obj3 = prefetched[_g6];
						++_g6;
						boundObjs.push(obj3);
					}
				}
				callBack(boundObjs,exception);
			}
		}
	}
	,getById: function(id,clazz,callBack) {
		this.getByIds([id],clazz,function(objs,exception) {
			if(objs != null) callBack(objs[0],exception); else callBack(null,exception);
		});
	}
	,getByIds: function(ids,clazz,callBack) {
		var _g = this;
		var prefetched = null;
		var idsToFetch = null;
		if(this.useCache) {
			var model = this.getModel(clazz);
			if(model != null) {
				var firstKey = model.getFirstKey();
				prefetched = [];
				idsToFetch = [];
				var _g1 = 0;
				while(_g1 < ids.length) {
					var id = ids[_g1];
					++_g1;
					var cacheObject = this.getObjectFromCache(clazz,firstKey,id);
					if(cacheObject != null) prefetched.push(cacheObject); else idsToFetch.push(id);
				}
			} else idsToFetch = ids;
		} else idsToFetch = ids;
		if(idsToFetch.length > 0) this._getByIds(idsToFetch,clazz,function(toBind,exception) {
			_g.initialiseObjects(idsToFetch,toBind,prefetched,exception,callBack,clazz,null,true);
		}); else callBack(prefetched,null);
	}
	,_getByIds: function(ids,clazz,callBack) {
	}
	,getByExample: function(obj,cb) {
		var q = this.getQuery();
		q.addExample(obj);
		this.query(q,cb);
	}
	,query: function(query,cb) {
		var _g = this;
		this._query(query,function(objs,err) {
			if(_g.isDataBinding()) {
				if(err == null) {
					var clazzList = query.getSelectClassList();
					if(query.bindResults() && clazzList != null) {
						if(clazzList.length == 1) _g.initialiseObjects([],objs,[],err,cb,Type.resolveClass(clazzList[0]),null,true);
					} else cb(objs,err);
				} else cb(null,err);
			} else cb(objs,err);
		});
	}
	,_query: function(query,cb) {
	}
	,getByValue: function(value,clazz,field,callBack) {
		this.getByValues([value],clazz,field,function(objs,exception) {
			if(objs != null) callBack(objs[0],exception); else callBack(null,exception);
		});
	}
	,getByValues: function(ids,clazz,field,callBack) {
		var _g = this;
		var prefetched = null;
		var idsToFetch = null;
		saturn.core.Util.debug("Using cache " + Std.string(this.useCache));
		if(this.useCache) {
			saturn.core.Util.debug("Using cache " + Std.string(this.useCache));
			var model = this.getModel(clazz);
			if(model != null) {
				prefetched = [];
				idsToFetch = [];
				var _g1 = 0;
				while(_g1 < ids.length) {
					var id = ids[_g1];
					++_g1;
					var cacheObject = this.getObjectFromCache(clazz,field,id);
					if(cacheObject != null) {
						if((cacheObject instanceof Array) && cacheObject.__enum__ == null) {
							var objArray = cacheObject;
							var _g11 = 0;
							while(_g11 < objArray.length) {
								var obj = objArray[_g11];
								++_g11;
								prefetched.push(obj);
							}
						} else prefetched.push(cacheObject);
					} else idsToFetch.push(id);
				}
			} else idsToFetch = ids;
		} else idsToFetch = ids;
		if(idsToFetch.length > 0) this._getByValues(idsToFetch,clazz,field,function(toBind,exception) {
			_g.initialiseObjects(idsToFetch,toBind,prefetched,exception,callBack,clazz,field,true);
		}); else callBack(prefetched,null);
	}
	,_getByValues: function(values,clazz,field,callBack) {
	}
	,getObjects: function(clazz,callBack) {
		var _g = this;
		this._getObjects(clazz,function(toBind,exception) {
			if(exception != null) callBack(null,exception); else _g.initialiseObjects([],toBind,[],exception,callBack,clazz,null,true);
		});
	}
	,_getObjects: function(clazz,callBack) {
	}
	,getByPkey: function(id,clazz,callBack) {
		this.getByPkeys([id],clazz,function(objs,exception) {
			if(objs != null) callBack(objs[0],exception); else callBack(null,exception);
		});
	}
	,getByPkeys: function(ids,clazz,callBack) {
		var _g = this;
		var prefetched = null;
		var idsToFetch = null;
		if(this.useCache) {
			var model = this.getModel(clazz);
			if(model != null) {
				var priField = model.getPrimaryKey();
				prefetched = [];
				idsToFetch = [];
				var _g1 = 0;
				while(_g1 < ids.length) {
					var id = ids[_g1];
					++_g1;
					var cacheObject = this.getObjectFromCache(clazz,priField,id);
					if(cacheObject != null) prefetched.push(cacheObject); else idsToFetch.push(id);
				}
			} else idsToFetch = ids;
		} else idsToFetch = ids;
		if(idsToFetch.length > 0) this._getByPkeys(idsToFetch,clazz,function(toBind,exception) {
			_g.initialiseObjects(idsToFetch,toBind,prefetched,exception,callBack,clazz,null,true);
		}); else callBack(prefetched,null);
	}
	,_getByPkeys: function(ids,clazz,callBack) {
	}
	,getConnection: function(config,cb) {
	}
	,sql: function(sql,parameters,cb) {
		this.getByNamedQuery("saturn.db.provider.hooks.RawSQLHook:SQL",[sql,parameters],null,false,cb);
	}
	,getByNamedQuery: function(queryId,parameters,clazz,cache,callBack) {
		var _g = this;
		saturn.core.Util.debug("In getByNamedQuery " + (cache == null?"null":"" + cache));
		try {
			if(cache) {
				saturn.core.Util.debug("Looking for cached result");
				var queries = this.namedQueryCache.get(queryId);
				var serialParamString = haxe.Serializer.run(parameters);
				var crc1 = haxe.crypto.Md5.encode(queryId + "/" + serialParamString);
				if(this.namedQueryCache.exists(crc1)) {
					var qResults = this.namedQueryCache.get(crc1).queryResults;
					saturn.core.Util.debug("Use cached result");
					callBack(qResults,null);
					return;
				}
			}
			var privateCB = function(toBind,exception) {
				if(toBind == null) callBack(toBind,exception); else _g.initialiseObjects([],toBind,[],exception,function(objs,err) {
					if(_g.useCache) {
						saturn.core.Util.debug("Caching result");
						var namedQuery = new saturn.db.NamedQueryCache();
						namedQuery.queryName = queryId;
						namedQuery.queryParams = parameters;
						namedQuery.queryParamSerial = haxe.Serializer.run(parameters);
						namedQuery.queryResults = objs;
						var crc = haxe.crypto.Md5.encode(queryId + "/" + namedQuery.queryParamSerial);
						_g.namedQueryCache.set(crc,namedQuery);
					}
					callBack(objs,err);
				},clazz,null,cache);
			};
			if(queryId == "saturn.workflow") {
				var jobName = parameters[0];
				var config = parameters[1];
				saturn.core.Util.debug("Got workflow query " + jobName);
				saturn.core.Util.debug(Type.getClassName(config == null?null:js.Boot.getClass(config)));
				if(this.namedQueryHooks.exists(jobName)) this.namedQueryHooks.get(jobName)(config,function(object,error) {
					privateCB([object],object.getError());
				}); else {
					saturn.core.Util.debug("Unknown workflow query");
					this._getByNamedQuery(queryId,parameters,clazz,privateCB);
				}
			} else if(this.namedQueryHooks.exists(queryId)) {
				var config1 = null;
				if(this.namedQueryHookConfigs.exists(queryId)) config1 = this.namedQueryHookConfigs.get(queryId);
				saturn.core.Util.debug("Calling hook");
				this.namedQueryHooks.get(queryId)(queryId,parameters,clazz,privateCB,config1);
			} else this._getByNamedQuery(queryId,parameters,clazz,privateCB);
		} catch( ex ) {
			if (ex instanceof js._Boot.HaxeError) ex = ex.val;
			callBack(null,"An unexpected exception has occurred");
			saturn.core.Util.debug(ex);
		}
	}
	,addHooks: function(hooks) {
		var _g = 0;
		while(_g < hooks.length) {
			var hookdef = hooks[_g];
			++_g;
			var name = Reflect.field(hookdef,"name");
			var hook;
			if(Object.prototype.hasOwnProperty.call(hookdef,"func")) hook = Reflect.field(hookdef,"func"); else {
				var clazz = Reflect.field(hookdef,"class");
				var method = Reflect.field(hookdef,"method");
				hook = Reflect.field(Type.resolveClass(clazz),method);
			}
			this.namedQueryHooks.set(name,hook);
			var value = hookdef;
			this.namedQueryHookConfigs.set(name,value);
		}
	}
	,addHook: function(hook,name) {
		var value = hook;
		this.namedQueryHooks.set(name,value);
	}
	,_getByNamedQuery: function(queryId,parameters,clazz,callBack) {
	}
	,getByIdStartsWith: function(id,field,clazz,limit,callBack) {
		var _g = this;
		saturn.core.Util.debug("Starts with using cache " + Std.string(this.useCache));
		var queryId = "__STARTSWITH_" + Type.getClassName(clazz);
		var parameters = [];
		parameters.push(field);
		parameters.push(id);
		var crc = null;
		if(this.useCache) {
			var crc1 = haxe.crypto.Md5.encode(queryId + "/" + haxe.Serializer.run(parameters));
			if(this.namedQueryCache.exists(crc1)) {
				callBack(this.namedQueryCache.get(crc1).queryResults,null);
				return;
			}
		}
		this._getByIdStartsWith(id,field,clazz,limit,function(toBind,exception) {
			if(toBind == null) callBack(toBind,exception); else _g.initialiseObjects([],toBind,[],exception,function(objs,err) {
				if(_g.useCache) {
					var namedQuery = new saturn.db.NamedQueryCache();
					namedQuery.queryName = queryId;
					namedQuery.queryParams = parameters;
					namedQuery.queryResults = objs;
					_g.namedQueryCache.set(crc,namedQuery);
				}
				callBack(objs,err);
			},clazz,null,false,false);
		});
	}
	,_getByIdStartsWith: function(id,field,clazz,limit,callBack) {
	}
	,update: function(object,callBack) {
		this.synchronizeInternalLinks([object]);
		var className = Type.getClassName(Type.getClass(object));
		this.evictObject(object);
		var attributeMaps = [];
		attributeMaps.push(this.unbindObject(object));
		this._update(attributeMaps,className,callBack);
	}
	,insert: function(obj,cb) {
		var _g = this;
		this.synchronizeInternalLinks([obj]);
		var className = Type.getClassName(Type.getClass(obj));
		this.evictObject(obj);
		var attributeMaps = [];
		attributeMaps.push(this.unbindObject(obj));
		this._insert(attributeMaps,className,function(err) {
			if(err == null) _g.attach([obj],true,function(err1) {
				cb(err1);
			}); else cb(err);
		});
	}
	,'delete': function(obj,cb) {
		var _g = this;
		var className = Type.getClassName(Type.getClass(obj));
		var attributeMaps = [];
		attributeMaps.push(this.unbindObject(obj));
		this.evictObject(obj);
		this._delete(attributeMaps,className,function(err) {
			var model = _g.getModel(Type.getClass(obj));
			var field = model.getPrimaryKey();
			obj[field] = null;
			cb(err);
		});
	}
	,evictObject: function(object) {
		var clazz = Type.getClass(object);
		var className = Type.getClassName(clazz);
		if(this.objectCache.exists(className)) {
			var $it0 = (function($this) {
				var $r;
				var this1 = $this.objectCache.get(className);
				$r = this1.keys();
				return $r;
			}(this));
			while( $it0.hasNext() ) {
				var indexField = $it0.next();
				var val = Reflect.field(object,indexField);
				if(val != null && val != "") {
					if((function($this) {
						var $r;
						var this2;
						{
							var this3 = $this.objectCache.get(className);
							this2 = this3.get(indexField);
						}
						$r = this2.exists(val);
						return $r;
					}(this))) {
						var this4;
						var this5 = this.objectCache.get(className);
						this4 = this5.get(indexField);
						this4.remove(val);
					}
				}
			}
		}
	}
	,evictNamedQuery: function(queryId,parameters) {
		var crc = haxe.crypto.Md5.encode(queryId + "/" + haxe.Serializer.run(parameters));
		if(this.namedQueryCache.exists(crc)) this.namedQueryCache.remove(crc);
	}
	,updateObjects: function(objs,callBack) {
		this.synchronizeInternalLinks(objs);
		var className = Type.getClassName(Type.getClass(objs[0]));
		var attributeMaps = [];
		var _g = 0;
		while(_g < objs.length) {
			var object = objs[_g];
			++_g;
			this.evictObject(object);
			attributeMaps.push(this.unbindObject(object));
		}
		this._update(attributeMaps,className,callBack);
	}
	,insertObjects: function(objs,cb) {
		var _g1 = this;
		if(objs.length == 0) {
			cb(null);
			return;
		}
		this.synchronizeInternalLinks(objs);
		this.attach(objs,false,function(err) {
			if(err != null) cb(err); else {
				var className = Type.getClassName(Type.getClass(objs[0]));
				var attributeMaps = [];
				var _g = 0;
				while(_g < objs.length) {
					var object = objs[_g];
					++_g;
					_g1.evictObject(object);
					attributeMaps.push(_g1.unbindObject(object));
				}
				_g1._insert(attributeMaps,className,function(err1) {
					cb(err1);
				});
			}
		});
	}
	,rollback: function(callBack) {
		this._rollback(callBack);
	}
	,commit: function(callBack) {
		this._commit(callBack);
	}
	,_update: function(attributeMaps,className,callBack) {
	}
	,_insert: function(attributeMaps,className,callBack) {
	}
	,_delete: function(attributeMaps,className,callBack) {
	}
	,_rollback: function(callBack) {
	}
	,_commit: function(cb) {
		cb("Commit not supported");
	}
	,bindObject: function(attributeMap,clazz,cache,indexField,suspendSetup) {
		if(suspendSetup == null) suspendSetup = false;
		if(clazz == null) {
			var _g = 0;
			var _g1 = Reflect.fields(attributeMap);
			while(_g < _g1.length) {
				var key = _g1[_g];
				++_g;
				var val = Reflect.field(attributeMap,key);
				if(saturn.db.DefaultProvider.r_date.match(val)) Reflect.setField(attributeMap,key,new Date(Date.parse(val)));
			}
			return attributeMap;
		}
		if(this.enableBinding) {
			var className = Type.getClassName(clazz);
			var parts = className.split(".");
			var shortName = parts.pop();
			var packageName = parts.join(".");
			var obj = Type.createInstance(clazz,[]);
			if(this.theBindingMap.exists(className)) {
				var map;
				var this1 = this.theBindingMap.get(className);
				map = this1.get("fields");
				var indexes;
				var this2 = this.theBindingMap.get(className);
				indexes = this2.get("indexes");
				var atPriIndex = null;
				var $it0 = indexes.keys();
				while( $it0.hasNext() ) {
					var atIndexField = $it0.next();
					if((__map_reserved[atIndexField] != null?indexes.getReserved(atIndexField):indexes.h[atIndexField]) == 1) {
						atPriIndex = atIndexField;
						break;
					}
				}
				var colPriIndex = null;
				if(atPriIndex != null) colPriIndex = __map_reserved[atPriIndex] != null?map.getReserved(atPriIndex):map.h[atPriIndex];
				var priKeyValue = null;
				if(Reflect.hasField(attributeMap,colPriIndex)) priKeyValue = Reflect.field(attributeMap,colPriIndex); else if(Reflect.hasField(attributeMap,colPriIndex.toLowerCase())) priKeyValue = Reflect.field(attributeMap,colPriIndex.toLowerCase());
				var keys = [];
				var $it1 = map.keys();
				while( $it1.hasNext() ) {
					var key1 = $it1.next();
					keys.push(key1);
				}
				if(indexField != null && !(__map_reserved[indexField] != null?map.existsReserved(indexField):map.h.hasOwnProperty(indexField))) keys.push(indexField);
				var _g2 = 0;
				while(_g2 < keys.length) {
					var key2 = keys[_g2];
					++_g2;
					if(!(function($this) {
						var $r;
						var this3 = $this.objectCache.get(className);
						$r = this3.exists(key2);
						return $r;
					}(this))) {
						var this4 = this.objectCache.get(className);
						var value = new haxe.ds.StringMap();
						this4.set(key2,value);
					}
					var atKey;
					atKey = __map_reserved[key2] != null?map.getReserved(key2):map.h[key2];
					var val1 = null;
					if(Reflect.hasField(attributeMap,atKey)) val1 = Reflect.field(attributeMap,atKey); else if(Reflect.hasField(attributeMap,atKey.toLowerCase())) val1 = Reflect.field(attributeMap,atKey.toLowerCase());
					if(saturn.db.DefaultProvider.r_date.match(val1)) Reflect.setField(obj,key2,new Date(Date.parse(val))); else obj[key2] = val1;
					if(cache && indexes != null && ((__map_reserved[key2] != null?indexes.existsReserved(key2):indexes.h.hasOwnProperty(key2)) || key2 == indexField) && this.useCache) {
						if(priKeyValue != null) {
							if((function($this) {
								var $r;
								var this5;
								{
									var this6 = $this.objectCache.get(className);
									this5 = this6.get(key2);
								}
								$r = this5.exists(val1);
								return $r;
							}(this))) {
								var mappedObj;
								var this7;
								var this8 = this.objectCache.get(className);
								this7 = this8.get(key2);
								mappedObj = this7.get(val1);
								var toCheck = mappedObj;
								var isArray = (mappedObj instanceof Array) && mappedObj.__enum__ == null;
								if(!isArray) toCheck = [mappedObj];
								var match = false;
								var _g21 = 0;
								var _g11 = toCheck.length;
								while(_g21 < _g11) {
									var i = _g21++;
									var eObj = toCheck[i];
									var priValue = Reflect.field(eObj,atPriIndex);
									if(priValue == priKeyValue) {
										toCheck[i] = obj;
										match = true;
										break;
									}
								}
								if(match == false) toCheck.push(obj);
								if(toCheck.length == 1) {
									var this9;
									var this10 = this.objectCache.get(className);
									this9 = this10.get(key2);
									var value1 = toCheck[0];
									this9.set(val1,value1);
								} else {
									var this11;
									var this12 = this.objectCache.get(className);
									this11 = this12.get(key2);
									this11.set(val1,toCheck);
								}
								continue;
							}
						}
						var this13;
						var this14 = this.objectCache.get(className);
						this13 = this14.get(key2);
						this13.set(val1,obj);
					}
				}
			}
			if(!suspendSetup && Reflect.isFunction(obj.setup)) obj.setup();
			return obj;
		} else return attributeMap;
	}
	,unbindObject: function(object) {
		if(this.enableBinding) {
			var className = Type.getClassName(Type.getClass(object));
			var attributeMap = new haxe.ds.StringMap();
			if(this.theBindingMap.exists(className)) {
				var map;
				var this1 = this.theBindingMap.get(className);
				map = this1.get("fields");
				var $it0 = map.keys();
				while( $it0.hasNext() ) {
					var key = $it0.next();
					var val = Reflect.field(object,key);
					var key1;
					key1 = __map_reserved[key] != null?map.getReserved(key):map.h[key];
					if(__map_reserved[key1] != null) attributeMap.setReserved(key1,val); else attributeMap.h[key1] = val;
				}
				return attributeMap;
			} else return null;
		} else return object;
	}
	,activate: function(objects,depthLimit,callBack) {
		var _g = this;
		this._activate(objects,1,depthLimit,function(error) {
			if(error == null) _g.merge(objects);
			callBack(error);
		});
	}
	,_activate: function(objects,depth,depthLimit,callBack) {
		var _g1 = this;
		var objectsToFetch = 0;
		var batchQuery = new saturn.db.BatchFetch(function(obj,err) {
		});
		batchQuery.setProvider(this);
		var classToFetch = new haxe.ds.StringMap();
		var _g = 0;
		while(_g < objects.length) {
			var object = objects[_g];
			++_g;
			if(object == null || js.Boot.__instanceof(object,ArrayBuffer) || js.Boot.__instanceof(object,haxe.ds.StringMap)) continue;
			var clazz = Type.getClass(object);
			if(clazz == null) continue;
			var clazzName = Type.getClassName(clazz);
			if(this.theBindingMap.exists(clazzName)) {
				if((function($this) {
					var $r;
					var this1 = $this.theBindingMap.get(clazzName);
					$r = this1.exists("fields.synthetic");
					return $r;
				}(this))) {
					var synthFields;
					var this2 = this.theBindingMap.get(clazzName);
					synthFields = this2.get("fields.synthetic");
					var $it0 = synthFields.keys();
					while( $it0.hasNext() ) {
						var synthFieldName = $it0.next();
						var synthInfo;
						synthInfo = __map_reserved[synthFieldName] != null?synthFields.getReserved(synthFieldName):synthFields.h[synthFieldName];
						var fkField = synthInfo.get("fk_field");
						if(fkField == null) {
							Reflect.setField(object,synthFieldName,Type.createInstance(Type.resolveClass(synthInfo.get("class")),[Reflect.field(object,synthInfo.get("field"))]));
							continue;
						}
						var synthVal = Reflect.field(object,synthFieldName);
						if(synthVal != null) continue;
						var isPolymorphic = synthInfo.exists("selector_field");
						var synthClass;
						if(isPolymorphic) {
							var selectorField = synthInfo.get("selector_field");
							var objValue = Reflect.field(object,selectorField);
							if(synthInfo.get("selector_values").exists(objValue)) synthClass = synthInfo.get("selector_values").get(objValue); else continue;
							var selectorValue = synthInfo.get("selector_value");
							synthFieldName = "_MERGE";
						} else synthClass = synthInfo.get("class");
						var field = synthInfo.get("field");
						var val = Reflect.field(object,field);
						if(val == null || val == "" && !((val | 0) === val)) object[synthFieldName] = null; else {
							var cacheObj = this.getObjectFromCache(Type.resolveClass(synthClass),fkField,val);
							if(cacheObj == null) {
								objectsToFetch++;
								if(!(__map_reserved[synthClass] != null?classToFetch.existsReserved(synthClass):classToFetch.h.hasOwnProperty(synthClass))) {
									var value = new haxe.ds.StringMap();
									if(__map_reserved[synthClass] != null) classToFetch.setReserved(synthClass,value); else classToFetch.h[synthClass] = value;
								}
								if(!(function($this) {
									var $r;
									var this3;
									this3 = __map_reserved[synthClass] != null?classToFetch.getReserved(synthClass):classToFetch.h[synthClass];
									$r = this3.exists(fkField);
									return $r;
								}(this))) {
									var this4;
									this4 = __map_reserved[synthClass] != null?classToFetch.getReserved(synthClass):classToFetch.h[synthClass];
									var value1 = new haxe.ds.StringMap();
									this4.set(fkField,value1);
								}
								var this5;
								var this6;
								this6 = __map_reserved[synthClass] != null?classToFetch.getReserved(synthClass):classToFetch.h[synthClass];
								this5 = this6.get(fkField);
								this5.set(val,"");
							} else object[synthFieldName] = cacheObj;
						}
					}
				}
			}
		}
		var $it1 = classToFetch.keys();
		while( $it1.hasNext() ) {
			var synthClass1 = $it1.next();
			var $it2 = (function($this) {
				var $r;
				var this7;
				this7 = __map_reserved[synthClass1] != null?classToFetch.getReserved(synthClass1):classToFetch.h[synthClass1];
				$r = this7.keys();
				return $r;
			}(this));
			while( $it2.hasNext() ) {
				var fkField1 = $it2.next();
				var objList = [];
				var $it3 = (function($this) {
					var $r;
					var this8;
					{
						var this9;
						this9 = __map_reserved[synthClass1] != null?classToFetch.getReserved(synthClass1):classToFetch.h[synthClass1];
						this8 = this9.get(fkField1);
					}
					$r = this8.keys();
					return $r;
				}(this));
				while( $it3.hasNext() ) {
					var objId = $it3.next();
					objList.push(objId);
				}
				batchQuery.getByValues(objList,Type.resolveClass(synthClass1),fkField1,"__IGNORED__",null);
			}
		}
		batchQuery.onComplete = function() {
			var _g2 = 0;
			while(_g2 < objects.length) {
				var object1 = objects[_g2];
				++_g2;
				var clazz1 = Type.getClass(object1);
				if(object1 == null || js.Boot.__instanceof(object1,ArrayBuffer) || clazz1 == null) continue;
				var clazzName1 = Type.getClassName(clazz1);
				if(_g1.theBindingMap.exists(clazzName1)) {
					if((function($this) {
						var $r;
						var this10 = _g1.theBindingMap.get(clazzName1);
						$r = this10.exists("fields.synthetic");
						return $r;
					}(this))) {
						var synthFields1;
						var this11 = _g1.theBindingMap.get(clazzName1);
						synthFields1 = this11.get("fields.synthetic");
						var $it4 = synthFields1.keys();
						while( $it4.hasNext() ) {
							var synthFieldName1 = $it4.next();
							var synthVal1 = Reflect.field(object1,synthFieldName1);
							if(synthVal1 != null) continue;
							var synthInfo1;
							synthInfo1 = __map_reserved[synthFieldName1] != null?synthFields1.getReserved(synthFieldName1):synthFields1.h[synthFieldName1];
							var isPolymorphic1 = synthInfo1.exists("selector_field");
							var synthClass2;
							if(isPolymorphic1) {
								var selectorField1 = synthInfo1.get("selector_field");
								var objValue1 = Reflect.field(object1,selectorField1);
								if(synthInfo1.get("selector_values").exists(objValue1)) synthClass2 = synthInfo1.get("selector_values").get(objValue1); else continue;
								var selectorValue1 = synthInfo1.get("selector_value");
								synthFieldName1 = "_MERGE";
							} else synthClass2 = synthInfo1.get("class");
							var field1 = synthInfo1.get("field");
							var val1 = Reflect.field(object1,field1);
							if(val1 != null && val1 != "") {
								var fkField2 = synthInfo1.get("fk_field");
								if(synthInfo1.exists("selector_field")) synthFieldName1 = "_MERGE";
								var cacheObj1 = _g1.getObjectFromCache(Type.resolveClass(synthClass2),fkField2,val1);
								if(cacheObj1 != null) object1[synthFieldName1] = cacheObj1;
							}
						}
					}
				}
			}
			var newObjList = [];
			var _g3 = 0;
			while(_g3 < objects.length) {
				var object2 = objects[_g3];
				++_g3;
				var clazz2 = Type.getClass(object2);
				if(object2 == null || js.Boot.__instanceof(object2,ArrayBuffer) || clazz2 == null) continue;
				var model = _g1.getModel(clazz2);
				if(model != null) {
					var _g21 = 0;
					var _g31 = Reflect.fields(object2);
					while(_g21 < _g31.length) {
						var field2 = _g31[_g21];
						++_g21;
						var val2 = Reflect.field(object2,field2);
						if(!model.isSyntheticallyBound(field2) || val2 == null) continue;
						var objs = Reflect.field(object2,field2);
						if(!((objs instanceof Array) && objs.__enum__ == null)) objs = [objs];
						var _g4 = 0;
						while(_g4 < objs.length) {
							var newObject = objs[_g4];
							++_g4;
							newObjList.push(newObject);
						}
					}
				}
			}
			if(newObjList.length > 0 && depthLimit > depth) _g1._activate(newObjList,depth + 1,depthLimit,callBack); else callBack(null);
		};
		batchQuery.execute();
	}
	,merge: function(objects) {
		var toVisit = [];
		var _g1 = 0;
		var _g = objects.length;
		while(_g1 < _g) {
			var i = _g1++;
			toVisit.push({ 'parent' : objects, 'pos' : i, 'value' : objects[i]});
		}
		this._merge(toVisit);
	}
	,_merge: function(toVisit) {
		while(true) {
			if(toVisit.length == 0) break;
			var item = toVisit.pop();
			var original = Reflect.field(item,"value");
			if(Object.prototype.hasOwnProperty.call(original,"_MERGE")) {
				var obj = Reflect.field(original,"_MERGE");
				var _g = 0;
				var _g1 = Reflect.fields(original);
				while(_g < _g1.length) {
					var field = _g1[_g];
					++_g;
					if(field != "_MERGE") Reflect.setField(obj,field,Reflect.field(original,field));
				}
				var parent = Reflect.field(item,"parent");
				if(Object.prototype.hasOwnProperty.call(item,"pos")) parent[Reflect.field(item,"pos")] = obj; else Reflect.setField(parent,Reflect.field(item,"field"),obj);
				original = obj;
			}
			var model = this.getModel(original);
			if(model == null) continue;
			var _g2 = 0;
			var _g11 = model.getFields();
			while(_g2 < _g11.length) {
				var field1 = _g11[_g2];
				++_g2;
				var value = Reflect.field(original,field1);
				var isObject = false;
				isObject = Std["is"](value,Object);
				if(isObject) {
					if((value instanceof Array) && value.__enum__ == null) {
						var _g3 = 0;
						var _g21 = value.length;
						while(_g3 < _g21) {
							var i = _g3++;
							toVisit.push({ 'parent' : value, 'pos' : i, 'value' : value[i]});
						}
					} else toVisit.push({ 'parent' : original, 'value' : value, 'field' : field1});
				}
			}
		}
	}
	,getModel: function(clazz) {
		if(clazz == null) return null; else {
			var t = Type.getClass(clazz);
			var className = Type.getClassName(clazz);
			return this.getModelByStringName(className);
		}
	}
	,getObjectModel: function(object) {
		if(object == null) return null; else {
			var clazz = Type.getClass(object);
			return this.getModel(clazz);
		}
	}
	,save: function(object,cb,autoAttach) {
		if(autoAttach == null) autoAttach = false;
		this.insertOrUpdate([object],cb,autoAttach);
	}
	,initModelClasses: function() {
		this.modelClasses = [];
		var $it0 = this.theBindingMap.keys();
		while( $it0.hasNext() ) {
			var classStr = $it0.next();
			saturn.core.Util.debug(classStr);
			var clazz = Type.resolveClass(classStr);
			if(clazz != null) this.modelClasses.push(this.getModel(clazz));
		}
	}
	,getModelClasses: function() {
		return this.modelClasses;
	}
	,getModelByStringName: function(className) {
		if(this.theBindingMap.exists(className)) {
			if((function($this) {
				var $r;
				var this1 = $this.theBindingMap.get(className);
				$r = this1.exists("model");
				return $r;
			}(this))) return new saturn.db.Model(this.theBindingMap.get(className),className); else return new saturn.db.Model(this.theBindingMap.get(className),className);
		} else return null;
	}
	,isModel: function(clazz) {
		if(this.theBindingMap != null) {
			var key = Type.getClassName(clazz);
			return this.theBindingMap.exists(key);
		} else return false;
	}
	,setSelectClause: function(className,selClause) {
		if(this.theBindingMap.exists(className)) {
			var this1;
			var this2 = this.theBindingMap.get(className);
			this1 = this2.get("statements");
			this1.set("SELECT",selClause);
		}
	}
	,modelToReal: function(modelDef,models,cb) {
		var _g3 = this;
		var priKey = modelDef.getPrimaryKey();
		var fields = modelDef.getFields();
		var clazz = modelDef.getClass();
		var syntheticInstanceAttributes = modelDef.getSynthenticFields();
		var syntheticSet = null;
		if(syntheticInstanceAttributes != null) {
			syntheticSet = new haxe.ds.StringMap();
			var $it0 = syntheticInstanceAttributes.keys();
			while( $it0.hasNext() ) {
				var instanceName = $it0.next();
				var fkRel;
				fkRel = __map_reserved[instanceName] != null?syntheticInstanceAttributes.getReserved(instanceName):syntheticInstanceAttributes.h[instanceName];
				var parentIdColumn = fkRel.get("fk_field");
				var childIdColumn = fkRel.get("field");
				var value;
				var _g = new haxe.ds.StringMap();
				if(__map_reserved.childIdColumn != null) _g.setReserved("childIdColumn",childIdColumn); else _g.h["childIdColumn"] = childIdColumn;
				var value1 = fkRel.get("fk_field");
				_g.set("parentIdColumn",value1);
				var value2 = fkRel.get("class");
				_g.set("class",value2);
				value = _g;
				if(__map_reserved[instanceName] != null) syntheticSet.setReserved(instanceName,value); else syntheticSet.h[instanceName] = value;
			}
		}
		var clazzToFieldToIds = new haxe.ds.StringMap();
		var _g1 = 0;
		while(_g1 < models.length) {
			var model = models[_g1];
			++_g1;
			var _g11 = 0;
			var _g2 = modelDef.getFields();
			while(_g11 < _g2.length) {
				var field = _g2[_g11];
				++_g11;
				if(field.indexOf(".") > -1) {
					var parts = field.split(".");
					var instanceName1 = parts[0];
					if(syntheticSet != null && (__map_reserved[instanceName1] != null?syntheticSet.existsReserved(instanceName1):syntheticSet.h.hasOwnProperty(instanceName1))) {
						var lookupField = parts[parts.length - 1];
						var lookupClazz;
						var this1;
						this1 = __map_reserved[instanceName1] != null?syntheticSet.getReserved(instanceName1):syntheticSet.h[instanceName1];
						lookupClazz = this1.get("class");
						var val = Reflect.field(model,field);
						if(val == null || val == "" && !((val | 0) === val)) continue;
						var clazz1 = Type.resolveClass(lookupClazz);
						var cachedObject = this.getObjectFromCache(clazz1,lookupField,val);
						if(cachedObject == null) {
							if(!(function($this) {
								var $r;
								var key = lookupClazz;
								$r = __map_reserved[key] != null?clazzToFieldToIds.existsReserved(key):clazzToFieldToIds.h.hasOwnProperty(key);
								return $r;
							}(this))) {
								var key1 = lookupClazz;
								var value3 = new haxe.ds.StringMap();
								if(__map_reserved[key1] != null) clazzToFieldToIds.setReserved(key1,value3); else clazzToFieldToIds.h[key1] = value3;
							}
							if(!(function($this) {
								var $r;
								var this2;
								{
									var key2 = lookupClazz;
									this2 = __map_reserved[key2] != null?clazzToFieldToIds.getReserved(key2):clazzToFieldToIds.h[key2];
								}
								$r = this2.exists(lookupField);
								return $r;
							}(this))) {
								var this3;
								var key3 = lookupClazz;
								this3 = __map_reserved[key3] != null?clazzToFieldToIds.getReserved(key3):clazzToFieldToIds.h[key3];
								var value4 = new haxe.ds.StringMap();
								this3.set(lookupField,value4);
							}
							var this4;
							var this5;
							var key4 = lookupClazz;
							this5 = __map_reserved[key4] != null?clazzToFieldToIds.getReserved(key4):clazzToFieldToIds.h[key4];
							this4 = this5.get(lookupField);
							this4.set(val,"");
						}
					}
				}
			}
		}
		var batchFetch = new saturn.db.BatchFetch(function(obj,err) {
			cb(err,obj);
		});
		var $it1 = clazzToFieldToIds.keys();
		while( $it1.hasNext() ) {
			var clazzStr = $it1.next();
			var $it2 = (function($this) {
				var $r;
				var this6;
				this6 = __map_reserved[clazzStr] != null?clazzToFieldToIds.getReserved(clazzStr):clazzToFieldToIds.h[clazzStr];
				$r = this6.keys();
				return $r;
			}(this));
			while( $it2.hasNext() ) {
				var fieldStr = $it2.next();
				var valList = [];
				var $it3 = (function($this) {
					var $r;
					var this7;
					{
						var this8;
						this8 = __map_reserved[clazzStr] != null?clazzToFieldToIds.getReserved(clazzStr):clazzToFieldToIds.h[clazzStr];
						this7 = this8.get(fieldStr);
					}
					$r = this7.keys();
					return $r;
				}(this));
				while( $it3.hasNext() ) {
					var val1 = $it3.next();
					valList.push(val1);
				}
				batchFetch.getByIds(valList,Type.resolveClass(clazzStr),"__IGNORE__",null);
			}
		}
		batchFetch.onComplete = function(err1,objs) {
			if(err1 != null) cb(err1,null); else {
				var mappedModels = [];
				var _g4 = 0;
				while(_g4 < models.length) {
					var model1 = models[_g4];
					++_g4;
					var mappedModel = Type.createEmptyInstance(clazz);
					var _g12 = 0;
					var _g21 = modelDef.getFields();
					while(_g12 < _g21.length) {
						var field1 = _g21[_g12];
						++_g12;
						if(field1.indexOf(".") > -1) {
							var parts1 = field1.split(".");
							var instanceName2 = parts1[0];
							if(__map_reserved[instanceName2] != null?syntheticSet.existsReserved(instanceName2):syntheticSet.h.hasOwnProperty(instanceName2)) {
								var lookupField1 = parts1[parts1.length - 1];
								var lookupClazz1;
								var this9;
								this9 = __map_reserved[instanceName2] != null?syntheticSet.getReserved(instanceName2):syntheticSet.h[instanceName2];
								lookupClazz1 = this9.get("class");
								var val2 = Reflect.field(model1,field1);
								if(val2 == null || val2 == "") continue;
								var clazz2 = Type.resolveClass(lookupClazz1);
								var cachedObject1 = _g3.getObjectFromCache(clazz2,lookupField1,val2);
								if(cachedObject1 != null) {
									var idColumn;
									var this10;
									this10 = __map_reserved[instanceName2] != null?syntheticSet.getReserved(instanceName2):syntheticSet.h[instanceName2];
									idColumn = this10.get("parentIdColumn");
									var val3 = Reflect.field(cachedObject1,idColumn);
									if(val3 == null || val3 == "" && !((val3 | 0) === val3)) {
										cb("Unexpected mapping error",mappedModels);
										return;
									}
									var dstColumn;
									var this11;
									this11 = __map_reserved[instanceName2] != null?syntheticSet.getReserved(instanceName2):syntheticSet.h[instanceName2];
									dstColumn = this11.get("childIdColumn");
									Reflect.setField(mappedModel,dstColumn,val3);
								} else {
									cb("Unable to find " + val2,mappedModels);
									return;
								}
							}
						} else {
							var val4 = Reflect.field(model1,field1);
							mappedModel[field1] = val4;
						}
					}
					mappedModels.push(mappedModel);
				}
				cb(null,mappedModels);
			}
		};
		batchFetch.execute();
	}
	,dataBinding: function(enable) {
		this.enableBinding = enable;
	}
	,isDataBinding: function() {
		return this.enableBinding;
	}
	,queryPath: function(fromClazz,queryPath,fieldValue,functionName,cb) {
		var _g = this;
		var parts = queryPath.split(".");
		var fieldName = parts.pop();
		var synthField = parts.pop();
		var model = this.getModel(fromClazz);
		if(model.isSynthetic(synthField)) {
			var fieldDef;
			var this1 = model.getSynthenticFields();
			fieldDef = this1.get(synthField);
			var childClazz = Type.resolveClass(fieldDef.get("class"));
			Reflect.callMethod(this,Reflect.field(this,functionName),[[fieldValue],childClazz,fieldName,function(objs,err) {
				if(err == null) {
					var values = [];
					var _g1 = 0;
					while(_g1 < objs.length) {
						var obj = objs[_g1];
						++_g1;
						values.push(Reflect.field(obj,fieldDef.get("fk_field")));
					}
					var parentField = fieldDef.get("field");
					_g.getByValues(values,fromClazz,parentField,function(objs1,err1) {
						cb(err1,objs1);
					});
				} else cb(err,null);
			}]);
		}
	}
	,setAutoCommit: function(autoCommit,cb) {
		cb("Set auto commit mode ");
	}
	,attach: function(objs,refreshFields,cb) {
		var _g = this;
		var bf = new saturn.db.BatchFetch(function(obj,err) {
			cb(err);
		});
		bf.setProvider(this);
		this._attach(objs,refreshFields,bf);
		bf.onComplete = function() {
			_g.synchronizeInternalLinks(objs);
			cb(null);
		};
		bf.execute();
	}
	,synchronizeInternalLinks: function(objs) {
		if(!this.isDataBinding()) return;
		var _g = 0;
		while(_g < objs.length) {
			var obj = objs[_g];
			++_g;
			var clazz = Type.getClass(obj);
			var model = this.getModel(clazz);
			var synthFields = model.getSynthenticFields();
			if(synthFields != null) {
				var $it0 = synthFields.keys();
				while( $it0.hasNext() ) {
					var synthFieldName = $it0.next();
					var synthField;
					synthField = __map_reserved[synthFieldName] != null?synthFields.getReserved(synthFieldName):synthFields.h[synthFieldName];
					var synthObj = Reflect.field(obj,synthFieldName);
					var field = synthField.get("field");
					var fkField = synthField.get("fk_field");
					if(synthObj != null) {
						if(fkField == null) Reflect.setField(obj,field,synthObj.getValue()); else {
							Reflect.setField(obj,field,Reflect.field(synthObj,fkField));
							this.synchronizeInternalLinks([synthObj]);
						}
					}
				}
			}
		}
	}
	,_attach: function(objs,refreshFields,bf) {
		var _g = 0;
		while(_g < objs.length) {
			var obj = [objs[_g]];
			++_g;
			var clazz = Type.getClass(obj[0]);
			var model = this.getModel(clazz);
			var priField = [model.getPrimaryKey()];
			var secField = model.getFirstKey();
			if(Reflect.field(obj[0],priField[0]) == null || Reflect.field(obj[0],priField[0]) == "") {
				var fieldVal = Reflect.field(obj[0],secField);
				if(fieldVal != null) bf.append(fieldVal,secField,clazz,(function(priField,obj) {
					return function(dbObj) {
						if(refreshFields) {
							var _g1 = 0;
							var _g2 = Reflect.fields(dbObj);
							while(_g1 < _g2.length) {
								var field = _g2[_g1];
								++_g1;
								Reflect.setField(obj[0],field,Reflect.field(dbObj,field));
							}
						} else Reflect.setField(obj[0],priField[0],Reflect.field(dbObj,priField[0]));
					};
				})(priField,obj));
			}
			var synthFields = model.getSynthenticFields();
			if(synthFields != null) {
				var $it0 = synthFields.keys();
				while( $it0.hasNext() ) {
					var synthFieldName = $it0.next();
					var synthField;
					synthField = __map_reserved[synthFieldName] != null?synthFields.getReserved(synthFieldName):synthFields.h[synthFieldName];
					var synthObj = Reflect.field(obj[0],synthFieldName);
					if(synthObj != null) this._attach([synthObj],refreshFields,bf);
				}
			}
		}
	}
	,getQuery: function() {
		var query = new saturn.db.query_lang.Query(this);
		return query;
	}
	,getProviderType: function() {
		return "NONE";
	}
	,isAttached: function(obj) {
		var model = this.getModel(Type.getClass(obj));
		var priField = model.getPrimaryKey();
		var val = Reflect.field(obj,priField);
		if(val == null || val == "") return false; else return true;
	}
	,insertOrUpdate: function(objs,cb,autoAttach) {
		if(autoAttach == null) autoAttach = false;
		var _g1 = this;
		var run = function() {
			var insertList = [];
			var updateList = [];
			var _g = 0;
			while(_g < objs.length) {
				var obj = objs[_g];
				++_g;
				if(!_g1.isAttached(obj)) insertList.push(obj); else updateList.push(obj);
			}
			if(insertList.length > 0) _g1.insertObjects(insertList,function(err) {
				if(err == null && updateList.length > 0) _g1.updateObjects(updateList,cb); else cb(err);
			}); else if(updateList.length > 0) _g1.updateObjects(updateList,cb);
		};
		if(autoAttach) this.attach(objs,false,function(err1) {
			if(err1 == null) run(); else cb(err1);
		}); else run();
	}
	,uploadFile: function(contents,file_identifier,cb) {
		return null;
	}
	,__class__: saturn.db.DefaultProvider
};
saturn.db.NamedQueryCache = $hxClasses["saturn.db.NamedQueryCache"] = function() {
};
saturn.db.NamedQueryCache.__name__ = ["saturn","db","NamedQueryCache"];
saturn.db.NamedQueryCache.prototype = {
	queryName: null
	,queryParamSerial: null
	,queryParams: null
	,queryResults: null
	,__class__: saturn.db.NamedQueryCache
};
saturn.db.Model = $hxClasses["saturn.db.Model"] = function(model,name) {
	this.customSearchFunctionPath = null;
	this.theModel = model;
	this.theName = name;
	this.alias = "";
	this.actionMap = new haxe.ds.StringMap();
	if(this.theModel.exists("indexes")) {
		var i = 0;
		var $it0 = (function($this) {
			var $r;
			var this1 = $this.theModel.get("indexes");
			$r = this1.keys();
			return $r;
		}(this));
		while( $it0.hasNext() ) {
			var keyName = $it0.next();
			if(i == 0) this.busSingleColKey = keyName;
			if((function($this) {
				var $r;
				var this2 = $this.theModel.get("indexes");
				$r = this2.get(keyName);
				return $r;
			}(this))) this.priColKey = keyName;
			i++;
		}
	}
	if(this.theModel.exists("provider_name")) {
		var name1;
		name1 = js.Boot.__cast(this.theModel.get("provider_name") , String);
		this.setProviderName(name1);
	}
	if(this.theModel.exists("programs")) {
		this.programs = [];
		var $it1 = (function($this) {
			var $r;
			var this3 = $this.theModel.get("programs");
			$r = this3.keys();
			return $r;
		}(this));
		while( $it1.hasNext() ) {
			var program = $it1.next();
			this.programs.push(program);
		}
	}
	this.stripIdPrefix = false;
	this.autoActivate = -1;
	if(this.theModel.exists("options")) {
		var options = this.theModel.get("options");
		if(__map_reserved.id_pattern != null?options.existsReserved("id_pattern"):options.h.hasOwnProperty("id_pattern")) this.setIdRegEx(__map_reserved.id_pattern != null?options.getReserved("id_pattern"):options.h["id_pattern"]);
		if(__map_reserved.custom_search_function != null?options.existsReserved("custom_search_function"):options.h.hasOwnProperty("custom_search_function")) this.customSearchFunctionPath = __map_reserved.custom_search_function != null?options.getReserved("custom_search_function"):options.h["custom_search_function"];
		if(__map_reserved.constraints != null?options.existsReserved("constraints"):options.h.hasOwnProperty("constraints")) {
			if((__map_reserved.constraints != null?options.getReserved("constraints"):options.h["constraints"]).exists("user_constraint_field")) this.userConstraintField = (__map_reserved.constraints != null?options.getReserved("constraints"):options.h["constraints"]).get("user_constraint_field");
			if((__map_reserved.constraints != null?options.getReserved("constraints"):options.h["constraints"]).exists("public_constraint_field")) this.publicConstraintField = (__map_reserved.constraints != null?options.getReserved("constraints"):options.h["constraints"]).get("public_constraint_field");
		}
		if(__map_reserved.windows_allowed_paths != null?options.getReserved("windows_allowed_paths"):options.h["windows_allowed_paths"]) {
			var value = this.compileRegEx(__map_reserved.windows_allowed_paths != null?options.getReserved("windows_allowed_paths"):options.h["windows_allowed_paths"]);
			options.set("windows_allowed_paths_regex",value);
		}
		if(__map_reserved.linux_allowed_paths != null?options.getReserved("linux_allowed_paths"):options.h["linux_allowed_paths"]) {
			var value1 = this.compileRegEx(__map_reserved.linux_allowed_paths != null?options.getReserved("linux_allowed_paths"):options.h["linux_allowed_paths"]);
			options.set("linux_allowed_paths_regex",value1);
		}
		if(__map_reserved.strip_id_prefix != null?options.existsReserved("strip_id_prefix"):options.h.hasOwnProperty("strip_id_prefix")) this.stripIdPrefix = __map_reserved.strip_id_prefix != null?options.getReserved("strip_id_prefix"):options.h["strip_id_prefix"];
		if(__map_reserved.alias != null?options.existsReserved("alias"):options.h.hasOwnProperty("alias")) this.alias = __map_reserved.alias != null?options.getReserved("alias"):options.h["alias"];
		if(__map_reserved.flags != null?options.existsReserved("flags"):options.h.hasOwnProperty("flags")) this.flags = __map_reserved.flags != null?options.getReserved("flags"):options.h["flags"]; else this.flags = new haxe.ds.StringMap();
		if(__map_reserved["file.new.label"] != null?options.existsReserved("file.new.label"):options.h.hasOwnProperty("file.new.label")) this.file_new_label = __map_reserved["file.new.label"] != null?options.getReserved("file.new.label"):options.h["file.new.label"];
		if(__map_reserved.auto_activate != null?options.existsReserved("auto_activate"):options.h.hasOwnProperty("auto_activate")) this.autoActivate = Std.parseInt(__map_reserved.auto_activate != null?options.getReserved("auto_activate"):options.h["auto_activate"]);
		if(__map_reserved.actions != null?options.existsReserved("actions"):options.h.hasOwnProperty("actions")) {
			var actionTypeMap;
			actionTypeMap = __map_reserved.actions != null?options.getReserved("actions"):options.h["actions"];
			var $it2 = actionTypeMap.keys();
			while( $it2.hasNext() ) {
				var actionType = $it2.next();
				var actions;
				actions = __map_reserved[actionType] != null?actionTypeMap.getReserved(actionType):actionTypeMap.h[actionType];
				var value2 = new haxe.ds.StringMap();
				this.actionMap.set(actionType,value2);
				var $it3 = actions.keys();
				while( $it3.hasNext() ) {
					var actionName = $it3.next();
					var actionDef;
					actionDef = __map_reserved[actionName] != null?actions.getReserved(actionName):actions.h[actionName];
					if(!(__map_reserved.user_suffix != null?actionDef.existsReserved("user_suffix"):actionDef.h.hasOwnProperty("user_suffix"))) throw new js._Boot.HaxeError(new saturn.util.HaxeException(actionName + " action definition for " + this.getName() + " is missing user_suffix option"));
					if(!(__map_reserved["function"] != null?actionDef.existsReserved("function"):actionDef.h.hasOwnProperty("function"))) throw new js._Boot.HaxeError(new saturn.util.HaxeException(actionName + " action definition for " + this.getName() + " is missing function option"));
					var action = new saturn.db.ModelAction(actionName,__map_reserved.user_suffix != null?actionDef.getReserved("user_suffix"):actionDef.h["user_suffix"],__map_reserved["function"] != null?actionDef.getReserved("function"):actionDef.h["function"],__map_reserved.icon != null?actionDef.getReserved("icon"):actionDef.h["icon"]);
					if(actionType == "search_bar") {
						var clazz = Type.resolveClass(action.className);
						if(clazz == null) throw new js._Boot.HaxeError(new saturn.util.HaxeException(action.className + " does not exist for action " + actionName));
						var instanceFields = Type.getInstanceFields(clazz);
						var match = false;
						var _g = 0;
						while(_g < instanceFields.length) {
							var field = instanceFields[_g];
							++_g;
							if(field == action.functionName) {
								match = true;
								break;
							}
						}
						if(!match) throw new js._Boot.HaxeError(new saturn.util.HaxeException(action.className + " does not have function " + action.functionName + " for action " + actionName));
					}
					var this4 = this.actionMap.get(actionType);
					this4.set(actionName,action);
				}
			}
		}
	} else {
		this.flags = new haxe.ds.StringMap();
		var value3 = new haxe.ds.StringMap();
		this.actionMap.set("searchBar",value3);
	}
	if(this.theModel.exists("search")) {
		var fts = this.theModel.get("search");
		this.ftsColumns = new haxe.ds.StringMap();
		var $it4 = fts.keys();
		while( $it4.hasNext() ) {
			var key = $it4.next();
			var searchDef;
			searchDef = __map_reserved[key] != null?fts.getReserved(key):fts.h[key];
			var searchObj = new saturn.db.SearchDef();
			if(searchDef != null) {
				if(typeof(searchDef) == "boolean" && searchDef) this.ftsColumns.set(key,searchObj); else if(typeof(searchDef) == "string") searchObj.regex = new EReg(searchDef,""); else {
					if(searchDef.exists("search_when")) {
						var regexStr = searchDef.get("search_when");
						if(regexStr != null && regexStr != "") searchObj.regex = new EReg(regexStr,"");
					}
					if(searchDef.exists("replace_with")) searchObj.replaceWith = searchDef.get("replace_with");
				}
			}
			this.ftsColumns.set(key,searchObj);
		}
	}
	if(this.alias == null || this.alias == "") this.alias = this.theName;
};
saturn.db.Model.__name__ = ["saturn","db","Model"];
saturn.db.Model.generateIDMap = function(objs) {
	if(objs == null || objs.length == 0) return null; else {
		var map = new haxe.ds.StringMap();
		var model = saturn.core.Util.getProvider().getModel(Type.getClass(objs[0]));
		var firstKey = model.getFirstKey();
		var priKey = model.getPrimaryKey();
		var _g = 0;
		while(_g < objs.length) {
			var obj = objs[_g];
			++_g;
			var key = Reflect.field(obj,firstKey);
			var value = Reflect.field(obj,priKey);
			if(__map_reserved[key] != null) map.setReserved(key,value); else map.h[key] = value;
		}
		return map;
	}
};
saturn.db.Model.generateUniqueList = function(objs) {
	if(objs == null || objs.length == 0) return null; else {
		var model = saturn.core.Util.getProvider().getModel(Type.getClass(objs[0]));
		var firstKey = model.getFirstKey();
		return saturn.db.Model.generateUniqueListWithField(objs,firstKey);
	}
};
saturn.db.Model.generateUniqueListWithField = function(objs,field) {
	var set = new haxe.ds.StringMap();
	var _g = 0;
	while(_g < objs.length) {
		var obj = objs[_g];
		++_g;
		var key = saturn.db.Model.extractField(obj,field);
		if(__map_reserved[key] != null) set.setReserved(key,null); else set.h[key] = null;
	}
	var ids = [];
	var $it0 = set.keys();
	while( $it0.hasNext() ) {
		var key1 = $it0.next();
		ids.push(key1);
	}
	return ids;
};
saturn.db.Model.extractField = function(obj,field) {
	if(field.indexOf(".") < 0) return Reflect.field(obj,field); else {
		var a = field.indexOf(".") - 1;
		var nextField = field.substring(0,a + 1);
		var nextObj = Reflect.field(obj,nextField);
		var remaining = field.substring(a + 2,field.length);
		return saturn.db.Model.extractField(nextObj,remaining);
	}
};
saturn.db.Model.setField = function(obj,field,value,newTerminal) {
	if(newTerminal == null) newTerminal = false;
	if(field.indexOf(".") < 0) obj[field] = value; else {
		var a = field.indexOf(".") - 1;
		var nextField = field.substring(0,a + 1);
		var nextObj = Reflect.field(obj,nextField);
		var remaining = field.substring(a + 2,field.length);
		if(nextObj == null || newTerminal && remaining.indexOf(".") < 0) {
			var clazz = Type.getClass(obj);
			if(clazz != null) {
				var model = saturn.core.Util.getProvider().getModel(clazz);
				var synthDef;
				var this1 = model.getSynthenticFields();
				synthDef = this1.get(nextField);
				if(synthDef != null) {
					var clazzStr = synthDef.get("class");
					nextObj = Type.createInstance(Type.resolveClass(clazzStr),[]);
					obj[nextField] = nextObj;
					Reflect.setField(obj,synthDef.field,null);
				}
			}
		}
		saturn.db.Model.setField(nextObj,remaining,value);
	}
};
saturn.db.Model.getModel = function(obj) {
	return saturn.core.Util.getProvider().getModel(Type.getClass(obj));
};
saturn.db.Model.generateMap = function(objs) {
	var model = saturn.db.Model.getModel(objs[0]);
	var firstKey = model.getFirstKey();
	return saturn.db.Model.generateMapWithField(objs,firstKey);
};
saturn.db.Model.generateMapWithField = function(objs,field) {
	var map = new haxe.ds.StringMap();
	var _g = 0;
	while(_g < objs.length) {
		var obj = objs[_g];
		++_g;
		var key = saturn.db.Model.extractField(obj,field);
		var value = obj;
		map.set(key,value);
	}
	return map;
};
saturn.db.Model.prototype = {
	theModel: null
	,theName: null
	,busSingleColKey: null
	,priColKey: null
	,idRegEx: null
	,stripIdPrefix: null
	,file_new_label: null
	,searchMap: null
	,ftsColumns: null
	,alias: null
	,programs: null
	,flags: null
	,autoActivate: null
	,actionMap: null
	,providerName: null
	,publicConstraintField: null
	,userConstraintField: null
	,customSearchFunctionPath: null
	,getFileNewLabel: function() {
		return this.file_new_label;
	}
	,isProgramSaveAs: function(clazzName) {
		if(this.theModel.exists("programs") && (function($this) {
			var $r;
			var this1 = $this.theModel.get("programs");
			$r = this1.get(clazzName);
			return $r;
		}(this))) return true; else if((function($this) {
			var $r;
			var this2 = $this.theModel.get("options");
			$r = this2.exists("canSave");
			return $r;
		}(this))) return ((function($this) {
			var $r;
			var this3 = $this.theModel.get("options");
			$r = this3.get("canSave");
			return $r;
		}(this))).get(clazzName); else return false;
	}
	,getProviderName: function() {
		return this.providerName;
	}
	,setProviderName: function(name) {
		this.providerName = name;
	}
	,getActions: function(actionType) {
		if(this.actionMap.exists(actionType)) return this.actionMap.get(actionType); else return new haxe.ds.StringMap();
	}
	,getAutoActivateLevel: function() {
		return this.autoActivate;
	}
	,hasFlag: function(flag) {
		if(this.flags.exists(flag)) return this.flags.get(flag); else return false;
	}
	,getCustomSearchFunction: function() {
		return this.customSearchFunctionPath;
	}
	,getPrograms: function() {
		return this.programs;
	}
	,getAlias: function() {
		return this.alias;
	}
	,getFTSColumns: function() {
		if(this.ftsColumns != null) return this.ftsColumns; else return null;
	}
	,getSearchMap: function() {
		return this.searchMap;
	}
	,getOptions: function() {
		return this.theModel.get("options");
	}
	,compileRegEx: function(regexs) {
		var cregexs = new haxe.ds.StringMap();
		var $it0 = regexs.keys();
		while( $it0.hasNext() ) {
			var key = $it0.next();
			var regex;
			regex = __map_reserved[key] != null?regexs.getReserved(key):regexs.h[key];
			if(regex != "") {
				var value = new EReg(regex,"");
				if(__map_reserved[key] != null) cregexs.setReserved(key,value); else cregexs.h[key] = value;
			}
		}
		return cregexs;
	}
	,setIdRegEx: function(idRegExStr) {
		this.idRegEx = new EReg(idRegExStr,"");
	}
	,getIdRegEx: function() {
		return this.idRegEx;
	}
	,isValidId: function(id) {
		if(this.idRegEx != null) return this.idRegEx.match(id); else return false;
	}
	,stripPrefixes: function() {
		return this.stripIdPrefix;
	}
	,processId: function(id) {
		if(this.stripIdPrefix) id = this.idRegEx.replace(id,"");
		return id;
	}
	,getIndexes: function() {
		var indexFields = [];
		var $it0 = (function($this) {
			var $r;
			var this1 = $this.theModel.get("indexes");
			$r = this1.keys();
			return $r;
		}(this));
		while( $it0.hasNext() ) {
			var keyName = $it0.next();
			indexFields.push(keyName);
		}
		return indexFields;
	}
	,getAutoFunctions: function() {
		if(this.theModel.exists("auto_functions")) return this.theModel.get("auto_functions"); else return null;
	}
	,getFields: function() {
		var fields = [];
		var $it0 = (function($this) {
			var $r;
			var this1 = $this.theModel.get("model");
			$r = this1.iterator();
			return $r;
		}(this));
		while( $it0.hasNext() ) {
			var field = $it0.next();
			fields.push(field);
		}
		return fields;
	}
	,getAttributes: function() {
		var fields = [];
		if(this.theModel.exists("fields")) {
			var $it0 = (function($this) {
				var $r;
				var this1 = $this.theModel.get("fields");
				$r = this1.keys();
				return $r;
			}(this));
			while( $it0.hasNext() ) {
				var field = $it0.next();
				fields.push(field);
			}
		}
		return fields;
	}
	,isField: function(field) {
		var this1 = this.theModel.get("fields");
		return this1.exists(field);
	}
	,isRDBMSField: function(rdbmsField) {
		var fields = this.theModel.get("fields");
		var $it0 = fields.keys();
		while( $it0.hasNext() ) {
			var field = $it0.next();
			if((__map_reserved[field] != null?fields.getReserved(field):fields.h[field]) == rdbmsField) return true;
		}
		return false;
	}
	,modelAtrributeToRDBMS: function(field) {
		var this1 = this.theModel.get("fields");
		return this1.get(field);
	}
	,hasDefaults: function() {
		return this.theModel.exists("defaults");
	}
	,hasOptions: function() {
		return this.theModel.exists("options");
	}
	,getFieldDefault: function(field) {
		if(this.hasDefaults() && (function($this) {
			var $r;
			var this1 = $this.theModel.get("defaults");
			$r = this1.exists(field);
			return $r;
		}(this))) {
			var this2 = this.theModel.get("defaults");
			return this2.get(field);
		} else return null;
	}
	,hasRequired: function() {
		return this.theModel.exists("required");
	}
	,isRequired: function(field) {
		if(this.hasRequired()) {
			if((function($this) {
				var $r;
				var this1 = $this.theModel.get("required");
				$r = this1.exists(field);
				return $r;
			}(this))) return true; else if(field.indexOf(".") > 0) {
				var cmps = field.split(".");
				var refField = this.getSyntheticallyBoundField(cmps[0]);
				return this.isRequired(refField);
			}
		}
		return false;
	}
	,getFieldDefs: function() {
		var fields = [];
		var defaults = null;
		if(this.theModel.exists("defaults")) defaults = this.theModel.get("defaults"); else return this.getFields();
		var $it0 = (function($this) {
			var $r;
			var this1 = $this.theModel.get("model");
			$r = this1.iterator();
			return $r;
		}(this));
		while( $it0.hasNext() ) {
			var field = $it0.next();
			var val = null;
			if(__map_reserved[field] != null?defaults.existsReserved(field):defaults.h.hasOwnProperty(field)) {
				var this2 = this.theModel.get("defaults");
				val = this2.get(field);
			}
			fields.push({ name : field, defaultValue : val});
		}
		return fields;
	}
	,getUserFieldDefinitions: function() {
		var fields = [];
		var defaults = null;
		if(this.theModel.exists("defaults")) defaults = this.theModel.get("defaults"); else defaults = new haxe.ds.StringMap();
		var model = this.theModel.get("model");
		if(model == null) return null;
		var $it0 = model.keys();
		while( $it0.hasNext() ) {
			var field = $it0.next();
			var val = null;
			if(__map_reserved[field] != null?defaults.existsReserved(field):defaults.h.hasOwnProperty(field)) {
				var this1 = this.theModel.get("defaults");
				val = this1.get(field);
			}
			fields.push({ name : field, defaultValue : val, field : (function($this) {
				var $r;
				var this2 = $this.theModel.get("model");
				$r = this2.get(field);
				return $r;
			}(this))});
		}
		return fields;
	}
	,convertUserFieldName: function(userFieldName) {
		if(this.theModel.exists("model")) {
			if((function($this) {
				var $r;
				var this1 = $this.theModel.get("model");
				$r = this1.exists(userFieldName);
				return $r;
			}(this))) {
				var this2 = this.theModel.get("model");
				return this2.get(userFieldName);
			} else return null;
		} else return null;
	}
	,getExtTableDefinition: function() {
		var tableDefinition = [];
		var $it0 = (function($this) {
			var $r;
			var this1 = $this.theModel.get("model");
			$r = this1.keys();
			return $r;
		}(this));
		while( $it0.hasNext() ) {
			var name = $it0.next();
			var field;
			var this2 = this.theModel.get("model");
			field = this2.get(name);
			var def = { header : name, dataIndex : field, editor : "textfield"};
			if(this.isRequired(field)) {
				def.tdCls = "required-column";
				def.allowBlank = false;
			}
			tableDefinition.push(def);
		}
		return tableDefinition;
	}
	,getSynthenticFields: function() {
		return this.theModel.get("fields.synthetic");
	}
	,isSyntheticallyBound: function(fieldName) {
		var synthFields = this.theModel.get("fields.synthetic");
		if(synthFields != null) {
			var $it0 = synthFields.keys();
			while( $it0.hasNext() ) {
				var syntheticFieldName = $it0.next();
				if((__map_reserved[syntheticFieldName] != null?synthFields.getReserved(syntheticFieldName):synthFields.h[syntheticFieldName]).get("field") == fieldName) return true;
			}
		}
		return false;
	}
	,isSynthetic: function(fieldName) {
		if(this.theModel.exists("fields.synthetic")) {
			var this1 = this.theModel.get("fields.synthetic");
			return this1.exists(fieldName);
		} else return false;
	}
	,getPseudoSyntheticObjectName: function(fieldName) {
		if(this.theModel.exists("fields.synthetic")) {
			var $it0 = (function($this) {
				var $r;
				var this1 = $this.theModel.get("fields.synthetic");
				$r = this1.keys();
				return $r;
			}(this));
			while( $it0.hasNext() ) {
				var objName = $it0.next();
				if(((function($this) {
					var $r;
					var this2 = $this.theModel.get("fields.synthetic");
					$r = this2.get(objName);
					return $r;
				}(this))).get("fk_field") == null) {
					var boundField = ((function($this) {
						var $r;
						var this3 = $this.theModel.get("fields.synthetic");
						$r = this3.get(objName);
						return $r;
					}(this))).get("field");
					if(fieldName == boundField) return objName;
				}
			}
		}
		return null;
	}
	,getSyntheticallyBoundField: function(syntheticFieldName) {
		if(this.theModel.exists("fields.synthetic")) {
			if((function($this) {
				var $r;
				var this1 = $this.theModel.get("fields.synthetic");
				$r = this1.exists(syntheticFieldName);
				return $r;
			}(this))) return ((function($this) {
				var $r;
				var this2 = $this.theModel.get("fields.synthetic");
				$r = this2.get(syntheticFieldName);
				return $r;
			}(this))).get("field");
		}
		return null;
	}
	,getClass: function() {
		return Type.resolveClass(this.theName);
	}
	,getFirstKey: function() {
		return this.busSingleColKey;
	}
	,getIcon: function() {
		if(this.hasOptions()) {
			if((function($this) {
				var $r;
				var this1 = $this.getOptions();
				$r = this1.exists("icon");
				return $r;
			}(this))) {
				var this2 = this.getOptions();
				return this2.get("icon");
			}
		}
		return "";
	}
	,getWorkspaceWrapper: function() {
		if(this.hasOptions()) {
			if((function($this) {
				var $r;
				var this1 = $this.getOptions();
				$r = this1.exists("workspace_wrapper");
				return $r;
			}(this))) {
				var this2 = this.getOptions();
				return this2.get("workspace_wrapper");
			}
		}
		return "";
	}
	,getWorkspaceWrapperClass: function() {
		return Type.resolveClass(this.getWorkspaceWrapper());
	}
	,getPrimaryKey: function() {
		return this.priColKey;
	}
	,getName: function() {
		return this.theName;
	}
	,getExtModelName: function() {
		return this.theName + ".MODEL";
	}
	,getExtStoreName: function() {
		return this.theName + ".STORE";
	}
	,getFirstKey_rdbms: function() {
		var this1 = this.theModel.get("fields");
		var key = this.getFirstKey();
		return this1.get(key);
	}
	,getSqlColumn: function(field) {
		var this1 = this.theModel.get("fields");
		return this1.get(field);
	}
	,unbindFieldName: function(field) {
		return this.getSqlColumn(field);
	}
	,getPrimaryKey_rdbms: function() {
		var this1 = this.theModel.get("fields");
		var key = this.getPrimaryKey();
		return this1.get(key);
	}
	,getSchemaName: function() {
		var this1 = this.theModel.get("table_info");
		return this1.get("schema");
	}
	,getTableName: function() {
		var this1 = this.theModel.get("table_info");
		return this1.get("name");
	}
	,getQualifiedTableName: function() {
		var schemaName = this.getSchemaName();
		if(schemaName == null || schemaName == "") return this.getTableName(); else return this.getSchemaName() + "." + this.getTableName();
	}
	,hasTableInfo: function() {
		return this.theModel.exists("table_info");
	}
	,getSelectClause: function() {
		var this1 = this.theModel.get("statements");
		return this1.get("SELECT");
	}
	,setInsertClause: function(insertClause) {
		var this1 = this.theModel.get("statements");
		this1.set("INSERT",insertClause);
	}
	,getInsertClause: function() {
		var this1 = this.theModel.get("statements");
		return this1.get("INSERT");
	}
	,setUpdateClause: function(updateClause) {
		var this1 = this.theModel.get("statements");
		this1.set("UPDATE",updateClause);
	}
	,getUpdateClause: function() {
		var this1 = this.theModel.get("statements");
		return this1.get("UPDATE");
	}
	,setDeleteClause: function(deleteClause) {
		var this1 = this.theModel.get("statements");
		this1.set("DELETE",deleteClause);
	}
	,getDeleteClause: function() {
		var this1 = this.theModel.get("statements");
		return this1.get("DELETE");
	}
	,setSelectKeyClause: function(selKeyClause) {
		var this1 = this.theModel.get("statements");
		this1.set("SELECT_KEY",selKeyClause);
	}
	,getSelectKeyClause: function() {
		var this1 = this.theModel.get("statements");
		return this1.get("SELECT_KEY");
	}
	,setColumns: function(columns) {
		var this1 = this.theModel.get("statements");
		this1.set("COLUMNS",columns);
		var colSet = new haxe.ds.StringMap();
		var _g = 0;
		while(_g < columns.length) {
			var column = columns[_g];
			++_g;
			if(__map_reserved[column] != null) colSet.setReserved(column,""); else colSet.h[column] = "";
		}
		var this2 = this.theModel.get("statements");
		this2.set("COLUMNS_SET",colSet);
	}
	,getColumns: function() {
		var this1 = this.theModel.get("statements");
		return this1.get("COLUMNS");
	}
	,getColumnSet: function() {
		var this1 = this.theModel.get("statements");
		return this1.get("COLUMNS_SET");
	}
	,getSelectorField: function() {
		if(this.theModel.exists("selector")) {
			var this1 = this.theModel.get("selector");
			return this1.get("polymorph_key");
		} else return null;
	}
	,getSelectorValue: function() {
		var this1 = this.theModel.get("selector");
		return this1.get("value");
	}
	,isPolymorph: function() {
		return this.theModel.exists("selector");
	}
	,getUserConstraintField: function() {
		return this.userConstraintField;
	}
	,getPublicConstraintField: function() {
		return this.publicConstraintField;
	}
	,__class__: saturn.db.Model
};
saturn.db.SearchDef = $hxClasses["saturn.db.SearchDef"] = function() {
	this.replaceWith = null;
	this.regex = null;
};
saturn.db.SearchDef.__name__ = ["saturn","db","SearchDef"];
saturn.db.SearchDef.prototype = {
	regex: null
	,replaceWith: null
	,__class__: saturn.db.SearchDef
};
saturn.db.ModelAction = $hxClasses["saturn.db.ModelAction"] = function(name,userSuffix,qName,icon) {
	this.name = name;
	this.userSuffix = userSuffix;
	this.setQualifiedName(qName);
	this.icon = icon;
};
saturn.db.ModelAction.__name__ = ["saturn","db","ModelAction"];
saturn.db.ModelAction.prototype = {
	name: null
	,userSuffix: null
	,functionName: null
	,className: null
	,icon: null
	,setQualifiedName: function(qName) {
		var i = qName.lastIndexOf(".");
		this.functionName = qName.substring(i + 1,qName.length);
		this.className = qName.substring(0,i);
	}
	,run: function(obj,cb) {
		Reflect.callMethod(obj,Reflect.field(obj,this.functionName),[cb]);
	}
	,__class__: saturn.db.ModelAction
};
saturn.db.NodeProvider = $hxClasses["saturn.db.NodeProvider"] = function(models) {
	var _g = this;
	saturn.db.DefaultProvider.call(this,models,null,false);
	var app = saturn.client.WorkspaceApplication.getApplication();
	saturn.client.core.ClientCore.getClientCore().registerResponse("_data_receive_objects");
	saturn.client.core.ClientCore.getClientCore().registerResponse("_data_receive_objects_by_class");
	saturn.client.core.ClientCore.getClientCore().registerResponse("_data_receive_insert_response");
	saturn.client.core.ClientCore.getClientCore().registerResponse("_data_receive_update_response");
	saturn.client.core.ClientCore.getClientCore().registerResponse("_data_receive_delete_response");
	saturn.client.core.ClientCore.getClientCore().registerResponse("_data_commit_response");
	saturn.client.core.ClientCore.getClientCore().registerResponse("_error_receive");
	if(models == null) this.requestModels(function(models1,err) {
		if(err != null) saturn.core.Util.debug("Error retrieving model definitions from server"); else {
			saturn.core.Util.debug("Models retrieved");
			_g.setModels(models1);
			var models2 = _g.getModelClasses();
			saturn.core.Util.debug("Models configured: " + models2.length);
			if(app != null) {
				var _g1 = 0;
				while(_g1 < models2.length) {
					var model = models2[_g1];
					++_g1;
					var programs = model.getPrograms();
					if(programs != null) {
						var _g2 = 0;
						while(_g2 < programs.length) {
							var program = programs[_g2];
							++_g2;
							saturn.core.Util.debug("Registering " + program + "/" + model.getName());
							app.getProgramRegistry().openWith(Type.resolveClass(program),true,Type.resolveClass(model.getName()));
						}
					} else saturn.core.Util.debug("No programs for " + model.getName());
				}
				app.makeAliasesAvailable();
			}
			if(app != null) {
				if(_g.getModel(app == null?null:js.Boot.getClass(app)).hasFlag("NO_LOGIN")) {
					var u = new saturn.core.User();
					u.fullname = "SQLite";
					saturn.core.Util.debug("NO_LOGIN flag found");
					saturn.client.core.ClientCore.getClientCore().disableLogout();
					saturn.client.core.ClientCore.getClientCore().setLoggedIn(u);
				}
			}
			_g.getByNamedQuery("saturn.server.plugins.core.ConfigurationPlugin:clientConfiguration",[],null,false,function(config,err1) {
				if(err1 == null) {
					if(Object.prototype.hasOwnProperty.call(config,"connections")) {
						var connectionConfigs = Reflect.field(config,"connections");
						var _g11 = 0;
						while(_g11 < connectionConfigs.length) {
							var connectionConfig = connectionConfigs[_g11];
							++_g11;
							if(Object.prototype.hasOwnProperty.call(connectionConfig,"name")) {
								var name = Reflect.field(connectionConfig,"name");
								if(name == "DEFAULT") {
									if(Object.prototype.hasOwnProperty.call(connectionConfig,"named_query_hooks")) _g.addHooks(Reflect.field(connectionConfig,"named_query_hooks"));
								}
							}
						}
					} else {
					}
					saturn.client.core.ClientCore.getClientCore().providerUp();
				}
			});
		}
	});
};
saturn.db.NodeProvider.__name__ = ["saturn","db","NodeProvider"];
saturn.db.NodeProvider.__super__ = saturn.db.DefaultProvider;
saturn.db.NodeProvider.prototype = $extend(saturn.db.DefaultProvider.prototype,{
	hxSerialize: function(s) {
	}
	,hxUnserialize: function(u) {
	}
	,requestModels: function(cb) {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._request_models",d,function(data,err) {
			if(err != null) cb(null,err); else {
				var models = haxe.Unserializer.run(data.json.models);
				cb(models,null);
			}
		});
	}
	,_getByIds: function(ids,clazz,cb) {
		var _g = this;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		d.class_name = Type.getClassName(clazz);
		d.ids = ids;
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_objects_ids",d,function(data,err) {
			if(data.json != null) cb(_g.parseObjects(data.json.objects),err); else cb([],err);
		});
	}
	,_getByValues: function(values,clazz,field,cb) {
		var _g = this;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		d.class_name = Type.getClassName(clazz);
		d.values = values;
		d.field = field;
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_objects_values",d,function(data,err) {
			if(data.json != null) cb(_g.parseObjects(data.json.objects),err); else cb([],err);
		});
	}
	,_getByPkeys: function(ids,clazz,cb) {
		var _g = this;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		d.class_name = Type.getClassName(clazz);
		d.ids = ids;
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_objects_pkeys",d,function(data,err) {
			if(data.json != null) cb(_g.parseObjects(data.json.objects),err); else cb([],err);
		});
	}
	,_getByIdStartsWith: function(id,field,clazz,limit,cb) {
		var _g = this;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		d.class_name = Type.getClassName(clazz);
		d.id = id;
		d.limit = limit;
		if(field == null) d.field = null; else {
			var model = this.getModel(clazz);
			d.field = model.modelAtrributeToRDBMS(field);
		}
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_objects_idstartswith",d,function(data,err) {
			if(data.json != null) cb(_g.parseObjects(data.json.objects),err); else cb([],err);
		});
	}
	,_query: function(query,cb) {
		var _g = this;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		d.queryStr = query.serialise();
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_query",d,function(data,err) {
			if(data.json != null) cb(_g.parseObjects(data.json.objects),err); else cb([],err);
		});
	}
	,_getByNamedQuery: function(queryId,parameters,clazz,cb) {
		var _g = this;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		if(clazz != null) d.class_name = Type.getClassName(clazz);
		d.queryId = queryId;
		d.parameters = haxe.Serializer.run(parameters);
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_objects_namedquery",d,function(data,err) {
			if(data.json != null) cb(_g.parseObjects(data.json.objects),err); else cb([],err);
		});
	}
	,_getObjects: function(clazz,cb) {
		var _g = this;
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		d.class_name = Type.getClassName(clazz);
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_objects_by_class",d,function(data,err) {
			if(data.json != null) cb(_g.parseObjects(data.json.objects),err); else cb([],err);
		});
	}
	,_update: function(attributeMaps,className,cb) {
		this.updateOrInsert("_remote_provider_._data_update_request",attributeMaps,className,cb);
	}
	,_insert: function(attributeMaps,className,cb) {
		this.updateOrInsert("_remote_provider_._data_insert_request",attributeMaps,className,cb);
	}
	,updateOrInsert: function(msg,attributeMaps,className,cb) {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		d.class_name = className;
		var objs = [];
		var _g = 0;
		while(_g < attributeMaps.length) {
			var atMap = attributeMaps[_g];
			++_g;
			var obj = { };
			var $it0 = atMap.keys();
			while( $it0.hasNext() ) {
				var key = $it0.next();
				Reflect.setField(obj,key,__map_reserved[key] != null?atMap.getReserved(key):atMap.h[key]);
			}
			objs.push(obj);
		}
		d.objs = JSON.stringify(objs);
		saturn.client.core.ClientCore.getClientCore().sendRequest(msg,d,function(data,err) {
			cb(err);
		});
	}
	,_delete: function(attributeMaps,className,cb) {
		var model = this.getModelByStringName(className);
		var objPkeys = [];
		var priField = model.getPrimaryKey_rdbms();
		var d = { };
		d.class_name = className;
		var objs = [];
		var _g = 0;
		while(_g < attributeMaps.length) {
			var atMap = attributeMaps[_g];
			++_g;
			var obj = { };
			Reflect.setField(obj,priField,__map_reserved[priField] != null?atMap.getReserved(priField):atMap.h[priField]);
			objs.push(obj);
		}
		d.objs = JSON.stringify(objs);
		var d2 = attributeMaps;
		window.console.log(d2);
		var app = saturn.client.WorkspaceApplication.getApplication();
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_delete_request",d,function(data,err) {
			cb(err);
		});
	}
	,_rollback: function(cb) {
		cb("Updating not supported on server");
	}
	,_commit: function(cb) {
		var app = saturn.client.WorkspaceApplication.getApplication();
		var d = { };
		saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_commit_request",d,function(data,err) {
			cb(err);
		});
	}
	,parseObjects: function(data) {
		if(data != null) {
			var _g = 0;
			while(_g < data.length) {
				var item = data[_g];
				++_g;
				this.bindObject(item,null,false);
			}
		}
		return data;
	}
	,uploadFile: function(contents,file_identifier,cb) {
		return saturn.client.core.ClientCore.getClientCore().sendRequest("_remote_provider_._data_request_upload_file",{ 'contents' : contents, 'file_identifier' : file_identifier},function(data,err) {
			if(data.json != null) {
				Reflect.setField((function($this) {
					var $r;
					var this1 = saturn.client.core.ClientCore.getClientCore().msgIdToJobInfo;
					$r = this1.get(data.msgId);
					return $r;
				}(this)),"file_identifier",data.json.upload_id);
				cb(err,data.json.upload_id);
			} else cb(err,null);
		});
	}
	,__class__: saturn.db.NodeProvider
});
saturn.db.Pool = $hxClasses["saturn.db.Pool"] = function() { };
saturn.db.Pool.__name__ = ["saturn","db","Pool"];
saturn.db.Pool.prototype = {
	acquire: null
	,release: null
	,drain: null
	,destroyAllNow: null
	,__class__: saturn.db.Pool
};
saturn.db.ScarabProvider = $hxClasses["saturn.db.ScarabProvider"] = function() {
	saturn.db.DefaultProvider.call(this,new saturn.db.mapping.SGC().models,null,false);
};
saturn.db.ScarabProvider.__name__ = ["saturn","db","ScarabProvider"];
saturn.db.ScarabProvider.__super__ = saturn.db.DefaultProvider;
saturn.db.ScarabProvider.prototype = $extend(saturn.db.DefaultProvider.prototype,{
	_getByIds: function(ids,clazz,callBack) {
		var _g = this;
		if(ids.length > 0) {
			var className = Type.getClassName(clazz);
			saturn.client.ICMClient.getClient().callFunction("sgc.Provider.getByIds",[className,ids],function(data) {
				var list = _g.parseObjectList(data);
				callBack(list,null);
			},function(exception) {
				callBack(null,exception);
			});
		} else callBack(null,null);
	}
	,_getByValues: function(values,clazz,field,callBack) {
		var _g = this;
		if(values.length > 0) {
			var className = Type.getClassName(clazz);
			saturn.client.ICMClient.getClient().callFunction("sgc.Provider.getByValues",[className,values,field],function(data) {
				var list = _g.parseObjectList(data);
				callBack(list,null);
			},function(exception) {
				callBack(null,exception);
			});
		} else callBack(null,null);
	}
	,_getByPkeys: function(ids,clazz,callBack) {
		var _g = this;
		if(ids.length > 0) {
			var className = Type.getClassName(clazz);
			saturn.client.ICMClient.getClient().callFunction("sgc.Provider.getByPkeys",[className,ids],function(data) {
				var list = _g.parseObjectList(data);
				callBack(list,null);
			},function(exception) {
				callBack(null,exception);
			});
		} else callBack(null,null);
	}
	,_getByIdStartsWith: function(id,field,clazz,limit,callBack) {
		var _g = this;
		var className = Type.getClassName(clazz);
		saturn.client.ICMClient.getClient().callFunction("sgc.Provider.getByIdStartsWith",[className,id],function(data) {
			var list = _g.parseObjectList(data);
			callBack(list,null);
		},function(exception) {
			callBack(null,exception);
		});
	}
	,_getByNamedQuery: function(queryId,parameters,clazz,callBack) {
		var _g = this;
		var className = Type.getClassName(clazz);
		saturn.client.ICMClient.getClient().callFunction("sgc.Provider.getByNamedQuery",[queryId,parameters],function(data) {
			var list = _g.parseObjectList(data);
			callBack(list,null);
		},function(exception) {
			callBack(null,exception);
		});
	}
	,_update: function(attributeMaps,className,callBack) {
		var limit = 20;
		var n = attributeMaps.length;
		var i = 0;
		var next = null;
		var jobFunc = function() {
			var part = attributeMaps.splice(0,limit);
			i += limit;
			saturn.client.ICMClient.getClient().callFunction("sgc.Provider.update",[className,part],function(data) {
				var err = saturn.client.ICMClient.getError(data);
				if(err != null) {
					callBack(err);
					return;
				} else if(i >= n) callBack(null); else next();
			},function(exception) {
				callBack(exception);
			});
		};
		next = jobFunc;
		next();
	}
	,_insert: function(attributeMaps,className,callBack) {
		var limit = 20;
		var n = attributeMaps.length;
		var i = 0;
		var next = null;
		var jobFunc = function() {
			var part = attributeMaps.splice(0,limit);
			i += limit;
			saturn.client.ICMClient.getClient().callFunction("sgc.Provider.insert",[className,part],function(data) {
				var err = saturn.client.ICMClient.getError(data);
				if(err != null) callBack(err); else if(i >= n) callBack(null); else next();
			},function(exception) {
				callBack(exception);
			});
		};
		next = jobFunc;
		next();
	}
	,_delete: function(attributeMaps,className,callBack) {
		saturn.client.ICMClient.getClient().callFunction("sgc.Provider.delete",[className,attributeMaps],function(data) {
			var err = saturn.client.ICMClient.getError(data);
			if(err != null) callBack(err); else callBack(null);
		},function(exception) {
			callBack(exception);
		});
	}
	,_rollback: function(callBack) {
		saturn.client.ICMClient.getClient().callFunction("sgc.Provider.rollback",[],function(data) {
			var err = saturn.client.ICMClient.getError(data);
			if(err != null) callBack(err); else callBack(null);
		},function(exception) {
			callBack(exception);
		});
	}
	,_commit: function(callBack) {
		saturn.client.ICMClient.getClient().callFunction("sgc.Provider.commit",[],function(data) {
			var err = saturn.client.ICMClient.getError(data);
			if(err != null) callBack(err); else callBack(null);
		},function(exception) {
			callBack(exception);
		});
	}
	,parseObjectList: function(data) {
		if(data != null && saturn.client.ICMClient.instanceOf(data,"ObjectList")) {
			if(Object.prototype.hasOwnProperty.call(data,"POS")) {
				var size = Reflect.field(data,"POS");
				if(size > 0) {
					var items = Reflect.field(data,"ITEMS");
					var list = [];
					var _g1 = 1;
					var _g = size + 1;
					while(_g1 < _g) {
						var i = _g1++;
						list.push(Reflect.field(items,i == null?"null":"" + i));
					}
					return list;
				} else return null;
			} else return null;
		} else return null;
	}
	,__class__: saturn.db.ScarabProvider
});
if(!saturn.db.mapping) saturn.db.mapping = {};
saturn.db.mapping.SGC = $hxClasses["saturn.db.mapping.SGC"] = function() {
	this.buildModels();
};
saturn.db.mapping.SGC.__name__ = ["saturn","db","mapping","SGC"];
saturn.db.mapping.SGC.getNextAvailableId = function(clazz,value,db,cb) {
};
saturn.db.mapping.SGC.prototype = {
	models: null
	,buildModels: function() {
		var _g = new haxe.ds.StringMap();
		var value;
		var _g1 = new haxe.ds.StringMap();
		var value1;
		var _g2 = new haxe.ds.StringMap();
		if(__map_reserved.constructId != null) _g2.setReserved("constructId","CONSTRUCT_ID"); else _g2.h["constructId"] = "CONSTRUCT_ID";
		if(__map_reserved.id != null) _g2.setReserved("id","PKEY"); else _g2.h["id"] = "PKEY";
		if(__map_reserved.proteinSeq != null) _g2.setReserved("proteinSeq","CONSTRUCTPROTSEQ"); else _g2.h["proteinSeq"] = "CONSTRUCTPROTSEQ";
		if(__map_reserved.proteinSeqNoTag != null) _g2.setReserved("proteinSeqNoTag","CONSTRUCTPROTSEQNOTAG"); else _g2.h["proteinSeqNoTag"] = "CONSTRUCTPROTSEQNOTAG";
		if(__map_reserved.dnaSeq != null) _g2.setReserved("dnaSeq","CONSTRUCTDNASEQ"); else _g2.h["dnaSeq"] = "CONSTRUCTDNASEQ";
		if(__map_reserved.docId != null) _g2.setReserved("docId","ELNEXP"); else _g2.h["docId"] = "ELNEXP";
		if(__map_reserved.vectorId != null) _g2.setReserved("vectorId","SGCVECTOR_PKEY"); else _g2.h["vectorId"] = "SGCVECTOR_PKEY";
		if(__map_reserved.alleleId != null) _g2.setReserved("alleleId","SGCALLELE_PKEY"); else _g2.h["alleleId"] = "SGCALLELE_PKEY";
		if(__map_reserved.res1Id != null) _g2.setReserved("res1Id","SGCRESTRICTENZ1_PKEY"); else _g2.h["res1Id"] = "SGCRESTRICTENZ1_PKEY";
		if(__map_reserved.res2Id != null) _g2.setReserved("res2Id","SGCRESTRICTENZ2_PKEY"); else _g2.h["res2Id"] = "SGCRESTRICTENZ2_PKEY";
		if(__map_reserved.constructPlateId != null) _g2.setReserved("constructPlateId","SGCCONSTRUCTPLATE_PKEY"); else _g2.h["constructPlateId"] = "SGCCONSTRUCTPLATE_PKEY";
		if(__map_reserved.wellId != null) _g2.setReserved("wellId","WELLID"); else _g2.h["wellId"] = "WELLID";
		if(__map_reserved.expectedMass != null) _g2.setReserved("expectedMass","EXPECTEDMASS"); else _g2.h["expectedMass"] = "EXPECTEDMASS";
		if(__map_reserved.expectedMassNoTag != null) _g2.setReserved("expectedMassNoTag","EXPETCEDMASSNOTAG"); else _g2.h["expectedMassNoTag"] = "EXPETCEDMASSNOTAG";
		if(__map_reserved.status != null) _g2.setReserved("status","STATUS"); else _g2.h["status"] = "STATUS";
		if(__map_reserved.location != null) _g2.setReserved("location","SGCLOCATION"); else _g2.h["location"] = "SGCLOCATION";
		if(__map_reserved.elnId != null) _g2.setReserved("elnId","ELNEXP"); else _g2.h["elnId"] = "ELNEXP";
		if(__map_reserved.constructComments != null) _g2.setReserved("constructComments","CONSTRUCTCOMMENTS"); else _g2.h["constructComments"] = "CONSTRUCTCOMMENTS";
		if(__map_reserved.person != null) _g2.setReserved("person","PERSON"); else _g2.h["person"] = "PERSON";
		if(__map_reserved.constructStart != null) _g2.setReserved("constructStart","CONSTRUCTSTART"); else _g2.h["constructStart"] = "CONSTRUCTSTART";
		if(__map_reserved.constructStop != null) _g2.setReserved("constructStop","CONSTRUCTSTOP"); else _g2.h["constructStop"] = "CONSTRUCTSTOP";
		if(__map_reserved.complex != null) _g2.setReserved("complex","COMPLEX"); else _g2.h["complex"] = "COMPLEX";
		value1 = _g2;
		if(__map_reserved.fields != null) _g1.setReserved("fields",value1); else _g1.h["fields"] = value1;
		var value2;
		var _g3 = new haxe.ds.StringMap();
		if(__map_reserved.status != null) _g3.setReserved("status","In progress"); else _g3.h["status"] = "In progress";
		value2 = _g3;
		if(__map_reserved.defaults != null) _g1.setReserved("defaults",value2); else _g1.h["defaults"] = value2;
		var value3;
		var _g4 = new haxe.ds.StringMap();
		if(__map_reserved.PERSON != null) _g4.setReserved("PERSON","insert.username"); else _g4.h["PERSON"] = "insert.username";
		value3 = _g4;
		if(__map_reserved.auto_functions != null) _g1.setReserved("auto_functions",value3); else _g1.h["auto_functions"] = value3;
		var value4;
		var _g5 = new haxe.ds.StringMap();
		if(__map_reserved.wellId != null) _g5.setReserved("wellId","1"); else _g5.h["wellId"] = "1";
		if(__map_reserved.constructPlateId != null) _g5.setReserved("constructPlateId","1"); else _g5.h["constructPlateId"] = "1";
		if(__map_reserved.constructId != null) _g5.setReserved("constructId","1"); else _g5.h["constructId"] = "1";
		if(__map_reserved.alleleId != null) _g5.setReserved("alleleId","1"); else _g5.h["alleleId"] = "1";
		if(__map_reserved.vectorId != null) _g5.setReserved("vectorId","1"); else _g5.h["vectorId"] = "1";
		value4 = _g5;
		if(__map_reserved.required != null) _g1.setReserved("required",value4); else _g1.h["required"] = value4;
		var value5;
		var _g6 = new haxe.ds.StringMap();
		if(__map_reserved.constructId != null) _g6.setReserved("constructId",false); else _g6.h["constructId"] = false;
		if(__map_reserved.id != null) _g6.setReserved("id",true); else _g6.h["id"] = true;
		value5 = _g6;
		if(__map_reserved.indexes != null) _g1.setReserved("indexes",value5); else _g1.h["indexes"] = value5;
		var value6;
		var _g7 = new haxe.ds.StringMap();
		if(__map_reserved["Construct ID"] != null) _g7.setReserved("Construct ID","constructId"); else _g7.h["Construct ID"] = "constructId";
		if(__map_reserved["Construct Plate"] != null) _g7.setReserved("Construct Plate","constructPlate.plateName"); else _g7.h["Construct Plate"] = "constructPlate.plateName";
		if(__map_reserved["Well ID"] != null) _g7.setReserved("Well ID","wellId"); else _g7.h["Well ID"] = "wellId";
		if(__map_reserved["Vector ID"] != null) _g7.setReserved("Vector ID","vector.vectorId"); else _g7.h["Vector ID"] = "vector.vectorId";
		if(__map_reserved["Allele ID"] != null) _g7.setReserved("Allele ID","allele.alleleId"); else _g7.h["Allele ID"] = "allele.alleleId";
		if(__map_reserved.Status != null) _g7.setReserved("Status","status"); else _g7.h["Status"] = "status";
		if(__map_reserved["Protein Sequence"] != null) _g7.setReserved("Protein Sequence","proteinSeq"); else _g7.h["Protein Sequence"] = "proteinSeq";
		if(__map_reserved["Expected Mass"] != null) _g7.setReserved("Expected Mass","expectedMass"); else _g7.h["Expected Mass"] = "expectedMass";
		if(__map_reserved["Restriction Site 1"] != null) _g7.setReserved("Restriction Site 1","res1.enzymeName"); else _g7.h["Restriction Site 1"] = "res1.enzymeName";
		if(__map_reserved["Restriction Site 2"] != null) _g7.setReserved("Restriction Site 2","res2.enzymeName"); else _g7.h["Restriction Site 2"] = "res2.enzymeName";
		if(__map_reserved["Protein Sequence (No Tag)"] != null) _g7.setReserved("Protein Sequence (No Tag)","proteinSeqNoTag"); else _g7.h["Protein Sequence (No Tag)"] = "proteinSeqNoTag";
		if(__map_reserved["Expected Mass (No Tag)"] != null) _g7.setReserved("Expected Mass (No Tag)","expectedMassNoTag"); else _g7.h["Expected Mass (No Tag)"] = "expectedMassNoTag";
		if(__map_reserved["Construct DNA Sequence"] != null) _g7.setReserved("Construct DNA Sequence","dnaSeq"); else _g7.h["Construct DNA Sequence"] = "dnaSeq";
		if(__map_reserved.Location != null) _g7.setReserved("Location","location"); else _g7.h["Location"] = "location";
		if(__map_reserved["ELN ID"] != null) _g7.setReserved("ELN ID","elnId"); else _g7.h["ELN ID"] = "elnId";
		if(__map_reserved["Construct Comments"] != null) _g7.setReserved("Construct Comments","constructComments"); else _g7.h["Construct Comments"] = "constructComments";
		if(__map_reserved.Creator != null) _g7.setReserved("Creator","person"); else _g7.h["Creator"] = "person";
		if(__map_reserved["Construct Start"] != null) _g7.setReserved("Construct Start","constructStart"); else _g7.h["Construct Start"] = "constructStart";
		if(__map_reserved["Construct Stop"] != null) _g7.setReserved("Construct Stop","constructStop"); else _g7.h["Construct Stop"] = "constructStop";
		if(__map_reserved.__HIDDEN__PKEY__ != null) _g7.setReserved("__HIDDEN__PKEY__","id"); else _g7.h["__HIDDEN__PKEY__"] = "id";
		value6 = _g7;
		if(__map_reserved.model != null) _g1.setReserved("model",value6); else _g1.h["model"] = value6;
		var value7;
		var _g8 = new haxe.ds.StringMap();
		var value8;
		var _g9 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g9.setReserved("field","alleleId"); else _g9.h["field"] = "alleleId";
		if(__map_reserved["class"] != null) _g9.setReserved("class","saturn.core.domain.SgcAllele"); else _g9.h["class"] = "saturn.core.domain.SgcAllele";
		if(__map_reserved.fk_field != null) _g9.setReserved("fk_field","id"); else _g9.h["fk_field"] = "id";
		value8 = _g9;
		_g8.set("allele",value8);
		var value9;
		var _g10 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g10.setReserved("field","vectorId"); else _g10.h["field"] = "vectorId";
		if(__map_reserved["class"] != null) _g10.setReserved("class","saturn.core.domain.SgcVector"); else _g10.h["class"] = "saturn.core.domain.SgcVector";
		if(__map_reserved.fk_field != null) _g10.setReserved("fk_field","id"); else _g10.h["fk_field"] = "id";
		value9 = _g10;
		_g8.set("vector",value9);
		var value10;
		var _g11 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g11.setReserved("field","res1Id"); else _g11.h["field"] = "res1Id";
		if(__map_reserved["class"] != null) _g11.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g11.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g11.setReserved("fk_field","id"); else _g11.h["fk_field"] = "id";
		value10 = _g11;
		_g8.set("res1",value10);
		var value11;
		var _g12 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g12.setReserved("field","res2Id"); else _g12.h["field"] = "res2Id";
		if(__map_reserved["class"] != null) _g12.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g12.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g12.setReserved("fk_field","id"); else _g12.h["fk_field"] = "id";
		value11 = _g12;
		_g8.set("res2",value11);
		var value12;
		var _g13 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g13.setReserved("field","constructPlateId"); else _g13.h["field"] = "constructPlateId";
		if(__map_reserved["class"] != null) _g13.setReserved("class","saturn.core.domain.SgcConstructPlate"); else _g13.h["class"] = "saturn.core.domain.SgcConstructPlate";
		if(__map_reserved.fk_field != null) _g13.setReserved("fk_field","id"); else _g13.h["fk_field"] = "id";
		value12 = _g13;
		_g8.set("constructPlate",value12);
		var value13;
		var _g14 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g14.setReserved("field","proteinSeq"); else _g14.h["field"] = "proteinSeq";
		if(__map_reserved["class"] != null) _g14.setReserved("class","saturn.core.Protein"); else _g14.h["class"] = "saturn.core.Protein";
		if(__map_reserved.fk_field != null) _g14.setReserved("fk_field",null); else _g14.h["fk_field"] = null;
		value13 = _g14;
		_g8.set("proteinSequenceObj",value13);
		var value14;
		var _g15 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g15.setReserved("field","proteinSeqNoTag"); else _g15.h["field"] = "proteinSeqNoTag";
		if(__map_reserved["class"] != null) _g15.setReserved("class","saturn.core.Protein"); else _g15.h["class"] = "saturn.core.Protein";
		if(__map_reserved.fk_field != null) _g15.setReserved("fk_field",null); else _g15.h["fk_field"] = null;
		value14 = _g15;
		_g8.set("proteinSequenceNoTagObj",value14);
		value7 = _g8;
		if(__map_reserved["fields.synthetic"] != null) _g1.setReserved("fields.synthetic",value7); else _g1.h["fields.synthetic"] = value7;
		var value15;
		var _g16 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g16.setReserved("schema","SGC"); else _g16.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g16.setReserved("name","CONSTRUCT"); else _g16.h["name"] = "CONSTRUCT";
		value15 = _g16;
		if(__map_reserved.table_info != null) _g1.setReserved("table_info",value15); else _g1.h["table_info"] = value15;
		var value16;
		var _g17 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g17.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g17.h["saturn.client.programs.DNASequenceEditor"] = true;
		value16 = _g17;
		if(__map_reserved.programs != null) _g1.setReserved("programs",value16); else _g1.h["programs"] = value16;
		var value17;
		var _g18 = new haxe.ds.StringMap();
		if(__map_reserved.constructId != null) _g18.setReserved("constructId",true); else _g18.h["constructId"] = true;
		value17 = _g18;
		if(__map_reserved.search != null) _g1.setReserved("search",value17); else _g1.h["search"] = value17;
		var value18;
		var _g19 = new haxe.ds.StringMap();
		if(__map_reserved.id_pattern != null) _g19.setReserved("id_pattern","-c"); else _g19.h["id_pattern"] = "-c";
		if(__map_reserved.alias != null) _g19.setReserved("alias","Construct"); else _g19.h["alias"] = "Construct";
		if(__map_reserved["file.new.label"] != null) _g19.setReserved("file.new.label","Construct"); else _g19.h["file.new.label"] = "Construct";
		if(__map_reserved.icon != null) _g19.setReserved("icon","dna_conical_16.png"); else _g19.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.auto_activate != null) _g19.setReserved("auto_activate","3"); else _g19.h["auto_activate"] = "3";
		var value19;
		var _g20 = new haxe.ds.StringMap();
		var value20;
		var _g21 = new haxe.ds.StringMap();
		var value21;
		var _g22 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g22.setReserved("user_suffix","Protein"); else _g22.h["user_suffix"] = "Protein";
		if(__map_reserved["function"] != null) _g22.setReserved("function","saturn.core.domain.SgcConstruct.loadProtein"); else _g22.h["function"] = "saturn.core.domain.SgcConstruct.loadProtein";
		if(__map_reserved.icon != null) _g22.setReserved("icon","structure_16.png"); else _g22.h["icon"] = "structure_16.png";
		value21 = _g22;
		if(__map_reserved.protein != null) _g21.setReserved("protein",value21); else _g21.h["protein"] = value21;
		var value22;
		var _g23 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g23.setReserved("user_suffix","Protein No Tag"); else _g23.h["user_suffix"] = "Protein No Tag";
		if(__map_reserved["function"] != null) _g23.setReserved("function","saturn.core.domain.SgcConstruct.loadProteinNoTag"); else _g23.h["function"] = "saturn.core.domain.SgcConstruct.loadProteinNoTag";
		if(__map_reserved.icon != null) _g23.setReserved("icon","structure_16.png"); else _g23.h["icon"] = "structure_16.png";
		value22 = _g23;
		if(__map_reserved.proteinNoTag != null) _g21.setReserved("proteinNoTag",value22); else _g21.h["proteinNoTag"] = value22;
		value20 = _g21;
		if(__map_reserved.search_bar != null) _g20.setReserved("search_bar",value20); else _g20.h["search_bar"] = value20;
		value19 = _g20;
		_g19.set("actions",value19);
		value18 = _g19;
		if(__map_reserved.options != null) _g1.setReserved("options",value18); else _g1.h["options"] = value18;
		value = _g1;
		if(__map_reserved["saturn.core.domain.SgcConstruct"] != null) _g.setReserved("saturn.core.domain.SgcConstruct",value); else _g.h["saturn.core.domain.SgcConstruct"] = value;
		var value23;
		var _g24 = new haxe.ds.StringMap();
		var value24;
		var _g25 = new haxe.ds.StringMap();
		if(__map_reserved.constructPkey != null) _g25.setReserved("constructPkey","SGCCONSTRUCT_PKEY"); else _g25.h["constructPkey"] = "SGCCONSTRUCT_PKEY";
		if(__map_reserved.status != null) _g25.setReserved("status","STATUS"); else _g25.h["status"] = "STATUS";
		value24 = _g25;
		if(__map_reserved.fields != null) _g24.setReserved("fields",value24); else _g24.h["fields"] = value24;
		var value25;
		var _g26 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g26.setReserved("schema","SGC"); else _g26.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g26.setReserved("name","CONSTR_STATUS_SNAPSHOT"); else _g26.h["name"] = "CONSTR_STATUS_SNAPSHOT";
		value25 = _g26;
		if(__map_reserved.table_info != null) _g24.setReserved("table_info",value25); else _g24.h["table_info"] = value25;
		var value26;
		var _g27 = new haxe.ds.StringMap();
		if(__map_reserved.constructPkey != null) _g27.setReserved("constructPkey",true); else _g27.h["constructPkey"] = true;
		value26 = _g27;
		if(__map_reserved.indexes != null) _g24.setReserved("indexes",value26); else _g24.h["indexes"] = value26;
		value23 = _g24;
		if(__map_reserved["saturn.core.domain.SgcConstructStatus"] != null) _g.setReserved("saturn.core.domain.SgcConstructStatus",value23); else _g.h["saturn.core.domain.SgcConstructStatus"] = value23;
		var value27;
		var _g28 = new haxe.ds.StringMap();
		var value28;
		var _g29 = new haxe.ds.StringMap();
		if(__map_reserved.alleleId != null) _g29.setReserved("alleleId","ALLELE_ID"); else _g29.h["alleleId"] = "ALLELE_ID";
		if(__map_reserved.allelePlateId != null) _g29.setReserved("allelePlateId","SGCPLATE_PKEY"); else _g29.h["allelePlateId"] = "SGCPLATE_PKEY";
		if(__map_reserved.id != null) _g29.setReserved("id","PKEY"); else _g29.h["id"] = "PKEY";
		if(__map_reserved.entryCloneId != null) _g29.setReserved("entryCloneId","SGCENTRYCLONE_PKEY"); else _g29.h["entryCloneId"] = "SGCENTRYCLONE_PKEY";
		if(__map_reserved.forwardPrimerId != null) _g29.setReserved("forwardPrimerId","SGCPRIMER5_PKEY"); else _g29.h["forwardPrimerId"] = "SGCPRIMER5_PKEY";
		if(__map_reserved.reversePrimerId != null) _g29.setReserved("reversePrimerId","SGCPRIMER3_PKEY"); else _g29.h["reversePrimerId"] = "SGCPRIMER3_PKEY";
		if(__map_reserved.dnaSeq != null) _g29.setReserved("dnaSeq","ALLELESEQUENCERAW"); else _g29.h["dnaSeq"] = "ALLELESEQUENCERAW";
		if(__map_reserved.proteinSeq != null) _g29.setReserved("proteinSeq","ALLELEPROTSEQ"); else _g29.h["proteinSeq"] = "ALLELEPROTSEQ";
		if(__map_reserved.status != null) _g29.setReserved("status","ALLELE_STATUS"); else _g29.h["status"] = "ALLELE_STATUS";
		if(__map_reserved.location != null) _g29.setReserved("location","SGCLOCATION"); else _g29.h["location"] = "SGCLOCATION";
		if(__map_reserved.comments != null) _g29.setReserved("comments","ALLELECOMMENTS"); else _g29.h["comments"] = "ALLELECOMMENTS";
		if(__map_reserved.elnId != null) _g29.setReserved("elnId","ELNEXP"); else _g29.h["elnId"] = "ELNEXP";
		if(__map_reserved.dateStamp != null) _g29.setReserved("dateStamp","DATESTAMP"); else _g29.h["dateStamp"] = "DATESTAMP";
		if(__map_reserved.person != null) _g29.setReserved("person","PERSON"); else _g29.h["person"] = "PERSON";
		if(__map_reserved.plateWell != null) _g29.setReserved("plateWell","PLATEWELL"); else _g29.h["plateWell"] = "PLATEWELL";
		if(__map_reserved.dnaSeqLen != null) _g29.setReserved("dnaSeqLen","ALLELESEQLENGTH"); else _g29.h["dnaSeqLen"] = "ALLELESEQLENGTH";
		if(__map_reserved.complex != null) _g29.setReserved("complex","COMPLEX"); else _g29.h["complex"] = "COMPLEX";
		if(__map_reserved.domainSummary != null) _g29.setReserved("domainSummary","DOMAINSUMMARY"); else _g29.h["domainSummary"] = "DOMAINSUMMARY";
		if(__map_reserved.domainStartDelta != null) _g29.setReserved("domainStartDelta","DOMAINSTARTDELTA"); else _g29.h["domainStartDelta"] = "DOMAINSTARTDELTA";
		if(__map_reserved.domainStopDelta != null) _g29.setReserved("domainStopDelta","DOMAINSTOPDELTA"); else _g29.h["domainStopDelta"] = "DOMAINSTOPDELTA";
		if(__map_reserved.containsPharmaDomain != null) _g29.setReserved("containsPharmaDomain","CONTAINSPHARMADOMAIN"); else _g29.h["containsPharmaDomain"] = "CONTAINSPHARMADOMAIN";
		if(__map_reserved.domainSummaryLong != null) _g29.setReserved("domainSummaryLong","DOMAINSUMMARYLONG"); else _g29.h["domainSummaryLong"] = "DOMAINSUMMARYLONG";
		if(__map_reserved.impPI != null) _g29.setReserved("impPI","IMPPI"); else _g29.h["impPI"] = "IMPPI";
		if(__map_reserved.alleleStatus != null) _g29.setReserved("alleleStatus","ALLELE_STATUS"); else _g29.h["alleleStatus"] = "ALLELE_STATUS";
		value28 = _g29;
		if(__map_reserved.fields != null) _g28.setReserved("fields",value28); else _g28.h["fields"] = value28;
		var value29;
		var _g30 = new haxe.ds.StringMap();
		if(__map_reserved.status != null) _g30.setReserved("status","In process"); else _g30.h["status"] = "In process";
		value29 = _g30;
		if(__map_reserved.defaults != null) _g28.setReserved("defaults",value29); else _g28.h["defaults"] = value29;
		var value30;
		var _g31 = new haxe.ds.StringMap();
		if(__map_reserved["Allele ID"] != null) _g31.setReserved("Allele ID","alleleId"); else _g31.h["Allele ID"] = "alleleId";
		if(__map_reserved.Plate != null) _g31.setReserved("Plate","plate.plateName"); else _g31.h["Plate"] = "plate.plateName";
		if(__map_reserved["Entry Clone ID"] != null) _g31.setReserved("Entry Clone ID","entryClone.entryCloneId"); else _g31.h["Entry Clone ID"] = "entryClone.entryCloneId";
		if(__map_reserved["Forward Primer ID"] != null) _g31.setReserved("Forward Primer ID","forwardPrimer.primerId"); else _g31.h["Forward Primer ID"] = "forwardPrimer.primerId";
		if(__map_reserved["Reverse Primer ID"] != null) _g31.setReserved("Reverse Primer ID","reversePrimer.primerId"); else _g31.h["Reverse Primer ID"] = "reversePrimer.primerId";
		if(__map_reserved["DNA Sequence"] != null) _g31.setReserved("DNA Sequence","dnaSeq"); else _g31.h["DNA Sequence"] = "dnaSeq";
		if(__map_reserved["Protein Sequence"] != null) _g31.setReserved("Protein Sequence","proteinSeq"); else _g31.h["Protein Sequence"] = "proteinSeq";
		if(__map_reserved.Status != null) _g31.setReserved("Status","status"); else _g31.h["Status"] = "status";
		if(__map_reserved.Location != null) _g31.setReserved("Location","location"); else _g31.h["Location"] = "location";
		if(__map_reserved.Comments != null) _g31.setReserved("Comments","comments"); else _g31.h["Comments"] = "comments";
		if(__map_reserved["ELN ID"] != null) _g31.setReserved("ELN ID","elnId"); else _g31.h["ELN ID"] = "elnId";
		if(__map_reserved["Date Record"] != null) _g31.setReserved("Date Record","dateStamp"); else _g31.h["Date Record"] = "dateStamp";
		if(__map_reserved.Person != null) _g31.setReserved("Person","person"); else _g31.h["Person"] = "person";
		if(__map_reserved["Plate Well"] != null) _g31.setReserved("Plate Well","plateWell"); else _g31.h["Plate Well"] = "plateWell";
		if(__map_reserved["DNA Length"] != null) _g31.setReserved("DNA Length","dnaSeqLen"); else _g31.h["DNA Length"] = "dnaSeqLen";
		if(__map_reserved.Complex != null) _g31.setReserved("Complex","complex"); else _g31.h["Complex"] = "complex";
		if(__map_reserved["Domain Summary"] != null) _g31.setReserved("Domain Summary","domainSummary"); else _g31.h["Domain Summary"] = "domainSummary";
		if(__map_reserved["Domain  Start Delta"] != null) _g31.setReserved("Domain  Start Delta","domainStartDelta"); else _g31.h["Domain  Start Delta"] = "domainStartDelta";
		if(__map_reserved["Domain Stop Delta"] != null) _g31.setReserved("Domain Stop Delta","domainStopDelta"); else _g31.h["Domain Stop Delta"] = "domainStopDelta";
		if(__map_reserved["Contains Pharma Domain"] != null) _g31.setReserved("Contains Pharma Domain","containsPharmaDomain"); else _g31.h["Contains Pharma Domain"] = "containsPharmaDomain";
		if(__map_reserved["Domain Summary Long"] != null) _g31.setReserved("Domain Summary Long","domainSummaryLong"); else _g31.h["Domain Summary Long"] = "domainSummaryLong";
		if(__map_reserved["IMP PI"] != null) _g31.setReserved("IMP PI","impPI"); else _g31.h["IMP PI"] = "impPI";
		if(__map_reserved.__HIDDEN__PKEY__ != null) _g31.setReserved("__HIDDEN__PKEY__","id"); else _g31.h["__HIDDEN__PKEY__"] = "id";
		value30 = _g31;
		if(__map_reserved.model != null) _g28.setReserved("model",value30); else _g28.h["model"] = value30;
		var value31;
		var _g32 = new haxe.ds.StringMap();
		if(__map_reserved.alleleId != null) _g32.setReserved("alleleId",false); else _g32.h["alleleId"] = false;
		if(__map_reserved.id != null) _g32.setReserved("id",true); else _g32.h["id"] = true;
		value31 = _g32;
		if(__map_reserved.indexes != null) _g28.setReserved("indexes",value31); else _g28.h["indexes"] = value31;
		var value32;
		var _g33 = new haxe.ds.StringMap();
		var value33;
		var _g34 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g34.setReserved("field","entryCloneId"); else _g34.h["field"] = "entryCloneId";
		if(__map_reserved["class"] != null) _g34.setReserved("class","saturn.core.domain.SgcEntryClone"); else _g34.h["class"] = "saturn.core.domain.SgcEntryClone";
		if(__map_reserved.fk_field != null) _g34.setReserved("fk_field","id"); else _g34.h["fk_field"] = "id";
		value33 = _g34;
		_g33.set("entryClone",value33);
		var value34;
		var _g35 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g35.setReserved("field","forwardPrimerId"); else _g35.h["field"] = "forwardPrimerId";
		if(__map_reserved["class"] != null) _g35.setReserved("class","saturn.core.domain.SgcForwardPrimer"); else _g35.h["class"] = "saturn.core.domain.SgcForwardPrimer";
		if(__map_reserved.fk_field != null) _g35.setReserved("fk_field","id"); else _g35.h["fk_field"] = "id";
		value34 = _g35;
		_g33.set("forwardPrimer",value34);
		var value35;
		var _g36 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g36.setReserved("field","reversePrimerId"); else _g36.h["field"] = "reversePrimerId";
		if(__map_reserved["class"] != null) _g36.setReserved("class","saturn.core.domain.SgcReversePrimer"); else _g36.h["class"] = "saturn.core.domain.SgcReversePrimer";
		if(__map_reserved.fk_field != null) _g36.setReserved("fk_field","id"); else _g36.h["fk_field"] = "id";
		value35 = _g36;
		_g33.set("reversePrimer",value35);
		var value36;
		var _g37 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g37.setReserved("field","allelePlateId"); else _g37.h["field"] = "allelePlateId";
		if(__map_reserved["class"] != null) _g37.setReserved("class","saturn.core.domain.SgcAllelePlate"); else _g37.h["class"] = "saturn.core.domain.SgcAllelePlate";
		if(__map_reserved.fk_field != null) _g37.setReserved("fk_field","id"); else _g37.h["fk_field"] = "id";
		value36 = _g37;
		_g33.set("plate",value36);
		var value37;
		var _g38 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g38.setReserved("field","proteinSeq"); else _g38.h["field"] = "proteinSeq";
		if(__map_reserved["class"] != null) _g38.setReserved("class","saturn.core.Protein"); else _g38.h["class"] = "saturn.core.Protein";
		if(__map_reserved.fk_field != null) _g38.setReserved("fk_field",null); else _g38.h["fk_field"] = null;
		value37 = _g38;
		_g33.set("proteinSequenceObj",value37);
		value32 = _g33;
		if(__map_reserved["fields.synthetic"] != null) _g28.setReserved("fields.synthetic",value32); else _g28.h["fields.synthetic"] = value32;
		var value38;
		var _g39 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g39.setReserved("schema","SGC"); else _g39.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g39.setReserved("name","ALLELE"); else _g39.h["name"] = "ALLELE";
		value38 = _g39;
		if(__map_reserved.table_info != null) _g28.setReserved("table_info",value38); else _g28.h["table_info"] = value38;
		var value39;
		var _g40 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g40.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g40.h["saturn.client.programs.DNASequenceEditor"] = true;
		value39 = _g40;
		if(__map_reserved.programs != null) _g28.setReserved("programs",value39); else _g28.h["programs"] = value39;
		var value40;
		var _g41 = new haxe.ds.StringMap();
		if(__map_reserved.alleleId != null) _g41.setReserved("alleleId",true); else _g41.h["alleleId"] = true;
		value40 = _g41;
		if(__map_reserved.search != null) _g28.setReserved("search",value40); else _g28.h["search"] = value40;
		var value41;
		var _g42 = new haxe.ds.StringMap();
		if(__map_reserved.id_pattern != null) _g42.setReserved("id_pattern","-a"); else _g42.h["id_pattern"] = "-a";
		if(__map_reserved.alias != null) _g42.setReserved("alias","Allele"); else _g42.h["alias"] = "Allele";
		if(__map_reserved["file.new.label"] != null) _g42.setReserved("file.new.label","Allele"); else _g42.h["file.new.label"] = "Allele";
		if(__map_reserved.icon != null) _g42.setReserved("icon","dna_conical_16.png"); else _g42.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.auto_activate != null) _g42.setReserved("auto_activate","3"); else _g42.h["auto_activate"] = "3";
		var value42;
		var _g43 = new haxe.ds.StringMap();
		var value43;
		var _g44 = new haxe.ds.StringMap();
		var value44;
		var _g45 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g45.setReserved("user_suffix","Protein"); else _g45.h["user_suffix"] = "Protein";
		if(__map_reserved["function"] != null) _g45.setReserved("function","saturn.core.domain.SgcAllele.loadProtein"); else _g45.h["function"] = "saturn.core.domain.SgcAllele.loadProtein";
		if(__map_reserved.icon != null) _g45.setReserved("icon","structure_16.png"); else _g45.h["icon"] = "structure_16.png";
		value44 = _g45;
		if(__map_reserved.protein != null) _g44.setReserved("protein",value44); else _g44.h["protein"] = value44;
		value43 = _g44;
		if(__map_reserved.search_bar != null) _g43.setReserved("search_bar",value43); else _g43.h["search_bar"] = value43;
		value42 = _g43;
		_g42.set("actions",value42);
		value41 = _g42;
		if(__map_reserved.options != null) _g28.setReserved("options",value41); else _g28.h["options"] = value41;
		value27 = _g28;
		if(__map_reserved["saturn.core.domain.SgcAllele"] != null) _g.setReserved("saturn.core.domain.SgcAllele",value27); else _g.h["saturn.core.domain.SgcAllele"] = value27;
		var value45;
		var _g46 = new haxe.ds.StringMap();
		var value46;
		var _g47 = new haxe.ds.StringMap();
		if(__map_reserved.entryCloneId != null) _g47.setReserved("entryCloneId","ENTRY_CLONE_ID"); else _g47.h["entryCloneId"] = "ENTRY_CLONE_ID";
		if(__map_reserved.id != null) _g47.setReserved("id","PKEY"); else _g47.h["id"] = "PKEY";
		if(__map_reserved.dnaSeq != null) _g47.setReserved("dnaSeq","DNARAWSEQUENCE"); else _g47.h["dnaSeq"] = "DNARAWSEQUENCE";
		if(__map_reserved.targetId != null) _g47.setReserved("targetId","SGCTARGET_PKEY"); else _g47.h["targetId"] = "SGCTARGET_PKEY";
		if(__map_reserved.seqSource != null) _g47.setReserved("seqSource","SEQSOURCE"); else _g47.h["seqSource"] = "SEQSOURCE";
		if(__map_reserved.sourceId != null) _g47.setReserved("sourceId","SOURCEID"); else _g47.h["sourceId"] = "SOURCEID";
		if(__map_reserved.sequenceConfirmed != null) _g47.setReserved("sequenceConfirmed","SEQUENCECONFIRMED"); else _g47.h["sequenceConfirmed"] = "SEQUENCECONFIRMED";
		if(__map_reserved.elnId != null) _g47.setReserved("elnId","ELNEXPERIMENTID"); else _g47.h["elnId"] = "ELNEXPERIMENTID";
		if(__map_reserved.complex != null) _g47.setReserved("complex","COMPLEX"); else _g47.h["complex"] = "COMPLEX";
		value46 = _g47;
		if(__map_reserved.fields != null) _g46.setReserved("fields",value46); else _g46.h["fields"] = value46;
		var value47;
		var _g48 = new haxe.ds.StringMap();
		if(__map_reserved.entryCloneId != null) _g48.setReserved("entryCloneId",false); else _g48.h["entryCloneId"] = false;
		if(__map_reserved.id != null) _g48.setReserved("id",true); else _g48.h["id"] = true;
		value47 = _g48;
		if(__map_reserved.indexes != null) _g46.setReserved("indexes",value47); else _g46.h["indexes"] = value47;
		var value48;
		var _g49 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g49.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g49.h["saturn.client.programs.DNASequenceEditor"] = true;
		value48 = _g49;
		if(__map_reserved.programs != null) _g46.setReserved("programs",value48); else _g46.h["programs"] = value48;
		var value49;
		var _g50 = new haxe.ds.StringMap();
		if(__map_reserved.entryCloneId != null) _g50.setReserved("entryCloneId",true); else _g50.h["entryCloneId"] = true;
		value49 = _g50;
		if(__map_reserved.search != null) _g46.setReserved("search",value49); else _g46.h["search"] = value49;
		var value50;
		var _g51 = new haxe.ds.StringMap();
		if(__map_reserved.id_pattern != null) _g51.setReserved("id_pattern","-s"); else _g51.h["id_pattern"] = "-s";
		var value51;
		var _g52 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g52.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g52.h["saturn.client.programs.DNASequenceEditor"] = true;
		if(__map_reserved["saturn.client.programs.ProteinSequenceEditor"] != null) _g52.setReserved("saturn.client.programs.ProteinSequenceEditor",true); else _g52.h["saturn.client.programs.ProteinSequenceEditor"] = true;
		value51 = _g52;
		_g51.set("canSave",value51);
		if(__map_reserved.alias != null) _g51.setReserved("alias","Entry Clone"); else _g51.h["alias"] = "Entry Clone";
		if(__map_reserved["file.new.label"] != null) _g51.setReserved("file.new.label","Entry Clone"); else _g51.h["file.new.label"] = "Entry Clone";
		if(__map_reserved.icon != null) _g51.setReserved("icon","dna_conical_16.png"); else _g51.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.auto_activate != null) _g51.setReserved("auto_activate","3"); else _g51.h["auto_activate"] = "3";
		var value52;
		var _g53 = new haxe.ds.StringMap();
		var value53;
		var _g54 = new haxe.ds.StringMap();
		var value54;
		var _g55 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g55.setReserved("user_suffix","Translation"); else _g55.h["user_suffix"] = "Translation";
		if(__map_reserved["function"] != null) _g55.setReserved("function","saturn.core.domain.SgcEntryClone.loadTranslation"); else _g55.h["function"] = "saturn.core.domain.SgcEntryClone.loadTranslation";
		if(__map_reserved.icon != null) _g55.setReserved("icon","structure_16.png"); else _g55.h["icon"] = "structure_16.png";
		value54 = _g55;
		if(__map_reserved.translation != null) _g54.setReserved("translation",value54); else _g54.h["translation"] = value54;
		value53 = _g54;
		if(__map_reserved.search_bar != null) _g53.setReserved("search_bar",value53); else _g53.h["search_bar"] = value53;
		value52 = _g53;
		_g51.set("actions",value52);
		value50 = _g51;
		if(__map_reserved.options != null) _g46.setReserved("options",value50); else _g46.h["options"] = value50;
		var value55;
		var _g56 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g56.setReserved("schema","SGC"); else _g56.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g56.setReserved("name","ENTRY_CLONE"); else _g56.h["name"] = "ENTRY_CLONE";
		value55 = _g56;
		if(__map_reserved.table_info != null) _g46.setReserved("table_info",value55); else _g46.h["table_info"] = value55;
		var value56;
		var _g57 = new haxe.ds.StringMap();
		if(__map_reserved["Entry Clone ID"] != null) _g57.setReserved("Entry Clone ID","entryCloneId"); else _g57.h["Entry Clone ID"] = "entryCloneId";
		if(__map_reserved["Target ID"] != null) _g57.setReserved("Target ID","target.targetId"); else _g57.h["Target ID"] = "target.targetId";
		value56 = _g57;
		if(__map_reserved.model != null) _g46.setReserved("model",value56); else _g46.h["model"] = value56;
		var value57;
		var _g58 = new haxe.ds.StringMap();
		var value58;
		var _g59 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g59.setReserved("field","targetId"); else _g59.h["field"] = "targetId";
		if(__map_reserved["class"] != null) _g59.setReserved("class","saturn.core.domain.SgcTarget"); else _g59.h["class"] = "saturn.core.domain.SgcTarget";
		if(__map_reserved.fk_field != null) _g59.setReserved("fk_field","id"); else _g59.h["fk_field"] = "id";
		value58 = _g59;
		_g58.set("target",value58);
		value57 = _g58;
		if(__map_reserved["fields.synthetic"] != null) _g46.setReserved("fields.synthetic",value57); else _g46.h["fields.synthetic"] = value57;
		value45 = _g46;
		if(__map_reserved["saturn.core.domain.SgcEntryClone"] != null) _g.setReserved("saturn.core.domain.SgcEntryClone",value45); else _g.h["saturn.core.domain.SgcEntryClone"] = value45;
		var value59;
		var _g60 = new haxe.ds.StringMap();
		var value60;
		var _g61 = new haxe.ds.StringMap();
		if(__map_reserved.enzymeName != null) _g61.setReserved("enzymeName","RESTRICTION_ENZYME_NAME"); else _g61.h["enzymeName"] = "RESTRICTION_ENZYME_NAME";
		if(__map_reserved.cutSequence != null) _g61.setReserved("cutSequence","RESTRICTION_ENZYME_SEQUENCERAW"); else _g61.h["cutSequence"] = "RESTRICTION_ENZYME_SEQUENCERAW";
		if(__map_reserved.id != null) _g61.setReserved("id","PKEY"); else _g61.h["id"] = "PKEY";
		value60 = _g61;
		if(__map_reserved.fields != null) _g60.setReserved("fields",value60); else _g60.h["fields"] = value60;
		var value61;
		var _g62 = new haxe.ds.StringMap();
		if(__map_reserved.enzymeName != null) _g62.setReserved("enzymeName",false); else _g62.h["enzymeName"] = false;
		if(__map_reserved.id != null) _g62.setReserved("id",true); else _g62.h["id"] = true;
		value61 = _g62;
		if(__map_reserved.indexes != null) _g60.setReserved("indexes",value61); else _g60.h["indexes"] = value61;
		var value62;
		var _g63 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g63.setReserved("schema","SGC"); else _g63.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g63.setReserved("name","RESTRICTION_ENZYME"); else _g63.h["name"] = "RESTRICTION_ENZYME";
		value62 = _g63;
		if(__map_reserved.table_info != null) _g60.setReserved("table_info",value62); else _g60.h["table_info"] = value62;
		var value63;
		var _g64 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g64.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g64.h["saturn.client.programs.DNASequenceEditor"] = true;
		value63 = _g64;
		if(__map_reserved.programs != null) _g60.setReserved("programs",value63); else _g60.h["programs"] = value63;
		var value64;
		var _g65 = new haxe.ds.StringMap();
		if(__map_reserved["Enzyme Name"] != null) _g65.setReserved("Enzyme Name","enzymeName"); else _g65.h["Enzyme Name"] = "enzymeName";
		value64 = _g65;
		if(__map_reserved.model != null) _g60.setReserved("model",value64); else _g60.h["model"] = value64;
		var value65;
		var _g66 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g66.setReserved("alias","Restriction site"); else _g66.h["alias"] = "Restriction site";
		if(__map_reserved["file.new.label"] != null) _g66.setReserved("file.new.label","Restriction Site"); else _g66.h["file.new.label"] = "Restriction Site";
		value65 = _g66;
		if(__map_reserved.options != null) _g60.setReserved("options",value65); else _g60.h["options"] = value65;
		var value66;
		var _g67 = new haxe.ds.StringMap();
		if(__map_reserved.enzymeName != null) _g67.setReserved("enzymeName",null); else _g67.h["enzymeName"] = null;
		value66 = _g67;
		if(__map_reserved.search != null) _g60.setReserved("search",value66); else _g60.h["search"] = value66;
		value59 = _g60;
		if(__map_reserved["saturn.core.domain.SgcRestrictionSite"] != null) _g.setReserved("saturn.core.domain.SgcRestrictionSite",value59); else _g.h["saturn.core.domain.SgcRestrictionSite"] = value59;
		var value67;
		var _g68 = new haxe.ds.StringMap();
		var value68;
		var _g69 = new haxe.ds.StringMap();
		if(__map_reserved.vectorId != null) _g69.setReserved("vectorId","VECTOR_NAME"); else _g69.h["vectorId"] = "VECTOR_NAME";
		if(__map_reserved.id != null) _g69.setReserved("id","PKEY"); else _g69.h["id"] = "PKEY";
		if(__map_reserved.sequence != null) _g69.setReserved("sequence","VECTORSEQUENCERAW"); else _g69.h["sequence"] = "VECTORSEQUENCERAW";
		if(__map_reserved.vectorComments != null) _g69.setReserved("vectorComments","VECTORCOMMENTS"); else _g69.h["vectorComments"] = "VECTORCOMMENTS";
		if(__map_reserved.proteaseName != null) _g69.setReserved("proteaseName","PROTEASE_NAME"); else _g69.h["proteaseName"] = "PROTEASE_NAME";
		if(__map_reserved.proteaseCutSequence != null) _g69.setReserved("proteaseCutSequence","PROTEASE_CUTSEQUENCE"); else _g69.h["proteaseCutSequence"] = "PROTEASE_CUTSEQUENCE";
		if(__map_reserved.proteaseProduct != null) _g69.setReserved("proteaseProduct","PROTEASE_PRODUCT"); else _g69.h["proteaseProduct"] = "PROTEASE_PRODUCT";
		if(__map_reserved.antibiotic != null) _g69.setReserved("antibiotic","ANTIBIOTIC"); else _g69.h["antibiotic"] = "ANTIBIOTIC";
		if(__map_reserved.organism != null) _g69.setReserved("organism","ORGANISM"); else _g69.h["organism"] = "ORGANISM";
		if(__map_reserved.res1Id != null) _g69.setReserved("res1Id","SGCRESTRICTENZ1_PKEY"); else _g69.h["res1Id"] = "SGCRESTRICTENZ1_PKEY";
		if(__map_reserved.res2Id != null) _g69.setReserved("res2Id","SGCRESTRICTENZ2_PKEY"); else _g69.h["res2Id"] = "SGCRESTRICTENZ2_PKEY";
		if(__map_reserved.addStopCodon != null) _g69.setReserved("addStopCodon","REQUIRES_STOP_CODON"); else _g69.h["addStopCodon"] = "REQUIRES_STOP_CODON";
		if(__map_reserved.requiredForwardExtension != null) _g69.setReserved("requiredForwardExtension","REQUIRED_EXTENSION_FORWARD"); else _g69.h["requiredForwardExtension"] = "REQUIRED_EXTENSION_FORWARD";
		if(__map_reserved.requiredReverseExtension != null) _g69.setReserved("requiredReverseExtension","REQUIRED_EXTENSION_REVERSE"); else _g69.h["requiredReverseExtension"] = "REQUIRED_EXTENSION_REVERSE";
		value68 = _g69;
		if(__map_reserved.fields != null) _g68.setReserved("fields",value68); else _g68.h["fields"] = value68;
		var value69;
		var _g70 = new haxe.ds.StringMap();
		if(__map_reserved.vectorId != null) _g70.setReserved("vectorId",null); else _g70.h["vectorId"] = null;
		value69 = _g70;
		if(__map_reserved.search != null) _g68.setReserved("search",value69); else _g68.h["search"] = value69;
		var value70;
		var _g71 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g71.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g71.h["saturn.client.programs.DNASequenceEditor"] = true;
		value70 = _g71;
		if(__map_reserved.programs != null) _g68.setReserved("programs",value70); else _g68.h["programs"] = value70;
		var value71;
		var _g72 = new haxe.ds.StringMap();
		if(__map_reserved.vectorId != null) _g72.setReserved("vectorId",false); else _g72.h["vectorId"] = false;
		if(__map_reserved.id != null) _g72.setReserved("id",true); else _g72.h["id"] = true;
		value71 = _g72;
		if(__map_reserved.indexes != null) _g68.setReserved("indexes",value71); else _g68.h["indexes"] = value71;
		var value72;
		var _g73 = new haxe.ds.StringMap();
		var value73;
		var _g74 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g74.setReserved("field","res1Id"); else _g74.h["field"] = "res1Id";
		if(__map_reserved["class"] != null) _g74.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g74.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g74.setReserved("fk_field","id"); else _g74.h["fk_field"] = "id";
		value73 = _g74;
		_g73.set("res1",value73);
		var value74;
		var _g75 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g75.setReserved("field","res2Id"); else _g75.h["field"] = "res2Id";
		if(__map_reserved["class"] != null) _g75.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g75.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g75.setReserved("fk_field","id"); else _g75.h["fk_field"] = "id";
		value74 = _g75;
		_g73.set("res2",value74);
		value72 = _g73;
		if(__map_reserved["fields.synthetic"] != null) _g68.setReserved("fields.synthetic",value72); else _g68.h["fields.synthetic"] = value72;
		var value75;
		var _g76 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g76.setReserved("schema","SGC"); else _g76.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g76.setReserved("name","VECTOR"); else _g76.h["name"] = "VECTOR";
		value75 = _g76;
		if(__map_reserved.table_info != null) _g68.setReserved("table_info",value75); else _g68.h["table_info"] = value75;
		var value76;
		var _g77 = new haxe.ds.StringMap();
		if(__map_reserved.auto_activate != null) _g77.setReserved("auto_activate","3"); else _g77.h["auto_activate"] = "3";
		if(__map_reserved.alias != null) _g77.setReserved("alias","Vector"); else _g77.h["alias"] = "Vector";
		if(__map_reserved["file.new.label"] != null) _g77.setReserved("file.new.label","Vector"); else _g77.h["file.new.label"] = "Vector";
		value76 = _g77;
		if(__map_reserved.options != null) _g68.setReserved("options",value76); else _g68.h["options"] = value76;
		var value77;
		var _g78 = new haxe.ds.StringMap();
		if(__map_reserved.Name != null) _g78.setReserved("Name","vectorId"); else _g78.h["Name"] = "vectorId";
		if(__map_reserved.Comments != null) _g78.setReserved("Comments","vectorComments"); else _g78.h["Comments"] = "vectorComments";
		if(__map_reserved.Protease != null) _g78.setReserved("Protease","proteaseName"); else _g78.h["Protease"] = "proteaseName";
		if(__map_reserved["Protease cut sequence"] != null) _g78.setReserved("Protease cut sequence","proteaseCutSequence"); else _g78.h["Protease cut sequence"] = "proteaseCutSequence";
		if(__map_reserved["Protease product"] != null) _g78.setReserved("Protease product","proteaseProduct"); else _g78.h["Protease product"] = "proteaseProduct";
		if(__map_reserved["Forward extension"] != null) _g78.setReserved("Forward extension","requiredForwardExtension"); else _g78.h["Forward extension"] = "requiredForwardExtension";
		if(__map_reserved["Reverse extension"] != null) _g78.setReserved("Reverse extension","requiredReverseExtension"); else _g78.h["Reverse extension"] = "requiredReverseExtension";
		if(__map_reserved["Restriction site 1"] != null) _g78.setReserved("Restriction site 1","res1.enzymeName"); else _g78.h["Restriction site 1"] = "res1.enzymeName";
		if(__map_reserved["Restriction site 2"] != null) _g78.setReserved("Restriction site 2","res2.enzymeName"); else _g78.h["Restriction site 2"] = "res2.enzymeName";
		value77 = _g78;
		if(__map_reserved.model != null) _g68.setReserved("model",value77); else _g68.h["model"] = value77;
		value67 = _g68;
		if(__map_reserved["saturn.core.domain.SgcVector"] != null) _g.setReserved("saturn.core.domain.SgcVector",value67); else _g.h["saturn.core.domain.SgcVector"] = value67;
		var value78;
		var _g79 = new haxe.ds.StringMap();
		var value79;
		var _g80 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g80.setReserved("primerId","PRIMERNAME"); else _g80.h["primerId"] = "PRIMERNAME";
		if(__map_reserved.id != null) _g80.setReserved("id","PKEY"); else _g80.h["id"] = "PKEY";
		if(__map_reserved.dnaSequence != null) _g80.setReserved("dnaSequence","PRIMERRAWSEQUENCE"); else _g80.h["dnaSequence"] = "PRIMERRAWSEQUENCE";
		value79 = _g80;
		if(__map_reserved.fields != null) _g79.setReserved("fields",value79); else _g79.h["fields"] = value79;
		var value80;
		var _g81 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g81.setReserved("primerId",false); else _g81.h["primerId"] = false;
		if(__map_reserved.id != null) _g81.setReserved("id",true); else _g81.h["id"] = true;
		value80 = _g81;
		if(__map_reserved.indexes != null) _g79.setReserved("indexes",value80); else _g79.h["indexes"] = value80;
		var value81;
		var _g82 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g82.setReserved("schema","SGC"); else _g82.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g82.setReserved("name","PRIMER"); else _g82.h["name"] = "PRIMER";
		value81 = _g82;
		if(__map_reserved.table_info != null) _g79.setReserved("table_info",value81); else _g79.h["table_info"] = value81;
		var value82;
		var _g83 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g83.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g83.h["saturn.client.programs.DNASequenceEditor"] = true;
		value82 = _g83;
		if(__map_reserved.programs != null) _g79.setReserved("programs",value82); else _g79.h["programs"] = value82;
		var value83;
		var _g84 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g84.setReserved("primerId",true); else _g84.h["primerId"] = true;
		value83 = _g84;
		if(__map_reserved.search != null) _g79.setReserved("search",value83); else _g79.h["search"] = value83;
		var value84;
		var _g85 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g85.setReserved("alias","Forward Primer"); else _g85.h["alias"] = "Forward Primer";
		if(__map_reserved["file.new.label"] != null) _g85.setReserved("file.new.label","Forward Primer"); else _g85.h["file.new.label"] = "Forward Primer";
		if(__map_reserved.icon != null) _g85.setReserved("icon","dna_conical_16.png"); else _g85.h["icon"] = "dna_conical_16.png";
		value84 = _g85;
		if(__map_reserved.options != null) _g79.setReserved("options",value84); else _g79.h["options"] = value84;
		var value85;
		var _g86 = new haxe.ds.StringMap();
		if(__map_reserved["Primer ID"] != null) _g86.setReserved("Primer ID","primerId"); else _g86.h["Primer ID"] = "primerId";
		value85 = _g86;
		if(__map_reserved.model != null) _g79.setReserved("model",value85); else _g79.h["model"] = value85;
		value78 = _g79;
		if(__map_reserved["saturn.core.domain.SgcForwardPrimer"] != null) _g.setReserved("saturn.core.domain.SgcForwardPrimer",value78); else _g.h["saturn.core.domain.SgcForwardPrimer"] = value78;
		var value86;
		var _g87 = new haxe.ds.StringMap();
		var value87;
		var _g88 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g88.setReserved("primerId","PRIMERNAME"); else _g88.h["primerId"] = "PRIMERNAME";
		if(__map_reserved.id != null) _g88.setReserved("id","PKEY"); else _g88.h["id"] = "PKEY";
		if(__map_reserved.dnaSequence != null) _g88.setReserved("dnaSequence","PRIMERRAWSEQUENCE"); else _g88.h["dnaSequence"] = "PRIMERRAWSEQUENCE";
		value87 = _g88;
		if(__map_reserved.fields != null) _g87.setReserved("fields",value87); else _g87.h["fields"] = value87;
		var value88;
		var _g89 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g89.setReserved("primerId",false); else _g89.h["primerId"] = false;
		if(__map_reserved.id != null) _g89.setReserved("id",true); else _g89.h["id"] = true;
		value88 = _g89;
		if(__map_reserved.indexes != null) _g87.setReserved("indexes",value88); else _g87.h["indexes"] = value88;
		var value89;
		var _g90 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g90.setReserved("schema","SGC"); else _g90.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g90.setReserved("name","PRIMERREV"); else _g90.h["name"] = "PRIMERREV";
		value89 = _g90;
		if(__map_reserved.table_info != null) _g87.setReserved("table_info",value89); else _g87.h["table_info"] = value89;
		var value90;
		var _g91 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g91.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g91.h["saturn.client.programs.DNASequenceEditor"] = true;
		value90 = _g91;
		if(__map_reserved.programs != null) _g87.setReserved("programs",value90); else _g87.h["programs"] = value90;
		var value91;
		var _g92 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g92.setReserved("primerId",true); else _g92.h["primerId"] = true;
		value91 = _g92;
		if(__map_reserved.search != null) _g87.setReserved("search",value91); else _g87.h["search"] = value91;
		var value92;
		var _g93 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g93.setReserved("alias","Reverse Primer"); else _g93.h["alias"] = "Reverse Primer";
		if(__map_reserved["file.new.label"] != null) _g93.setReserved("file.new.label","Reverse Primer"); else _g93.h["file.new.label"] = "Reverse Primer";
		if(__map_reserved.icon != null) _g93.setReserved("icon","dna_conical_16.png"); else _g93.h["icon"] = "dna_conical_16.png";
		value92 = _g93;
		if(__map_reserved.options != null) _g87.setReserved("options",value92); else _g87.h["options"] = value92;
		var value93;
		var _g94 = new haxe.ds.StringMap();
		if(__map_reserved["Primer ID"] != null) _g94.setReserved("Primer ID","primerId"); else _g94.h["Primer ID"] = "primerId";
		value93 = _g94;
		if(__map_reserved.model != null) _g87.setReserved("model",value93); else _g87.h["model"] = value93;
		value86 = _g87;
		if(__map_reserved["saturn.core.domain.SgcReversePrimer"] != null) _g.setReserved("saturn.core.domain.SgcReversePrimer",value86); else _g.h["saturn.core.domain.SgcReversePrimer"] = value86;
		var value94;
		var _g95 = new haxe.ds.StringMap();
		var value95;
		var _g96 = new haxe.ds.StringMap();
		if(__map_reserved.purificationId != null) _g96.setReserved("purificationId","PURIFICATIONID"); else _g96.h["purificationId"] = "PURIFICATIONID";
		if(__map_reserved.id != null) _g96.setReserved("id","PKEY"); else _g96.h["id"] = "PKEY";
		if(__map_reserved.expressionId != null) _g96.setReserved("expressionId","EXPRESSION_PKEY"); else _g96.h["expressionId"] = "EXPRESSION_PKEY";
		if(__map_reserved.column != null) _g96.setReserved("column","COLUMN1"); else _g96.h["column"] = "COLUMN1";
		if(__map_reserved.elnId != null) _g96.setReserved("elnId","ELNEXP"); else _g96.h["elnId"] = "ELNEXP";
		if(__map_reserved.comments != null) _g96.setReserved("comments","COMMENTS"); else _g96.h["comments"] = "COMMENTS";
		value95 = _g96;
		if(__map_reserved.fields != null) _g95.setReserved("fields",value95); else _g95.h["fields"] = value95;
		var value96;
		var _g97 = new haxe.ds.StringMap();
		if(__map_reserved.purificationId != null) _g97.setReserved("purificationId",false); else _g97.h["purificationId"] = false;
		if(__map_reserved.id != null) _g97.setReserved("id",true); else _g97.h["id"] = true;
		value96 = _g97;
		if(__map_reserved.indexes != null) _g95.setReserved("indexes",value96); else _g95.h["indexes"] = value96;
		var value97;
		var _g98 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g98.setReserved("schema","SGC"); else _g98.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g98.setReserved("name","PURIFICATION"); else _g98.h["name"] = "PURIFICATION";
		value97 = _g98;
		if(__map_reserved.table_info != null) _g95.setReserved("table_info",value97); else _g95.h["table_info"] = value97;
		var value98;
		var _g99 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.EmptyViewer"] != null) _g99.setReserved("saturn.client.programs.EmptyViewer",true); else _g99.h["saturn.client.programs.EmptyViewer"] = true;
		value98 = _g99;
		if(__map_reserved.programs != null) _g95.setReserved("programs",value98); else _g95.h["programs"] = value98;
		var value99;
		var _g100 = new haxe.ds.StringMap();
		var value100;
		var _g101 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g101.setReserved("field","expressionId"); else _g101.h["field"] = "expressionId";
		if(__map_reserved["class"] != null) _g101.setReserved("class","saturn.core.domain.SgcExpression"); else _g101.h["class"] = "saturn.core.domain.SgcExpression";
		if(__map_reserved.fk_field != null) _g101.setReserved("fk_field","id"); else _g101.h["fk_field"] = "id";
		value100 = _g101;
		_g100.set("expression",value100);
		value99 = _g100;
		if(__map_reserved["fields.synthetic"] != null) _g95.setReserved("fields.synthetic",value99); else _g95.h["fields.synthetic"] = value99;
		var value101;
		var _g102 = new haxe.ds.StringMap();
		if(__map_reserved["Purification ID"] != null) _g102.setReserved("Purification ID","purificationId"); else _g102.h["Purification ID"] = "purificationId";
		if(__map_reserved["Expression ID"] != null) _g102.setReserved("Expression ID","expressionId"); else _g102.h["Expression ID"] = "expressionId";
		if(__map_reserved["ELN ID"] != null) _g102.setReserved("ELN ID","elnId"); else _g102.h["ELN ID"] = "elnId";
		if(__map_reserved.Comments != null) _g102.setReserved("Comments","comments"); else _g102.h["Comments"] = "comments";
		value101 = _g102;
		if(__map_reserved.model != null) _g95.setReserved("model",value101); else _g95.h["model"] = value101;
		var value102;
		var _g103 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g103.setReserved("alias","Purifications"); else _g103.h["alias"] = "Purifications";
		if(__map_reserved["file.new.label"] != null) _g103.setReserved("file.new.label","Purification"); else _g103.h["file.new.label"] = "Purification";
		if(__map_reserved.icon != null) _g103.setReserved("icon","dna_conical_16.png"); else _g103.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.auto_activate != null) _g103.setReserved("auto_activate","3"); else _g103.h["auto_activate"] = "3";
		value102 = _g103;
		if(__map_reserved.options != null) _g95.setReserved("options",value102); else _g95.h["options"] = value102;
		value94 = _g95;
		if(__map_reserved["saturn.core.domain.SgcPurification"] != null) _g.setReserved("saturn.core.domain.SgcPurification",value94); else _g.h["saturn.core.domain.SgcPurification"] = value94;
		var value103;
		var _g104 = new haxe.ds.StringMap();
		var value104;
		var _g105 = new haxe.ds.StringMap();
		if(__map_reserved.cloneId != null) _g105.setReserved("cloneId","CLONE_ID"); else _g105.h["cloneId"] = "CLONE_ID";
		if(__map_reserved.id != null) _g105.setReserved("id","PKEY"); else _g105.h["id"] = "PKEY";
		if(__map_reserved.constructId != null) _g105.setReserved("constructId","SGCCONSTRUCT1_PKEY"); else _g105.h["constructId"] = "SGCCONSTRUCT1_PKEY";
		if(__map_reserved.elnId != null) _g105.setReserved("elnId","ELNEXP"); else _g105.h["elnId"] = "ELNEXP";
		if(__map_reserved.comments != null) _g105.setReserved("comments","COMMENTS"); else _g105.h["comments"] = "COMMENTS";
		value104 = _g105;
		if(__map_reserved.fields != null) _g104.setReserved("fields",value104); else _g104.h["fields"] = value104;
		var value105;
		var _g106 = new haxe.ds.StringMap();
		if(__map_reserved.cloneId != null) _g106.setReserved("cloneId",false); else _g106.h["cloneId"] = false;
		if(__map_reserved.id != null) _g106.setReserved("id",true); else _g106.h["id"] = true;
		value105 = _g106;
		if(__map_reserved.indexes != null) _g104.setReserved("indexes",value105); else _g104.h["indexes"] = value105;
		var value106;
		var _g107 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g107.setReserved("alias","Clones"); else _g107.h["alias"] = "Clones";
		if(__map_reserved["file.new.label"] != null) _g107.setReserved("file.new.label","Clone"); else _g107.h["file.new.label"] = "Clone";
		if(__map_reserved.icon != null) _g107.setReserved("icon","dna_conical_16.png"); else _g107.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.auto_activate != null) _g107.setReserved("auto_activate","3"); else _g107.h["auto_activate"] = "3";
		value106 = _g107;
		if(__map_reserved.options != null) _g104.setReserved("options",value106); else _g104.h["options"] = value106;
		var value107;
		var _g108 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g108.setReserved("schema","SGC"); else _g108.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g108.setReserved("name","CLONE"); else _g108.h["name"] = "CLONE";
		value107 = _g108;
		if(__map_reserved.table_info != null) _g104.setReserved("table_info",value107); else _g104.h["table_info"] = value107;
		var value108;
		var _g109 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.EmptyViewer"] != null) _g109.setReserved("saturn.client.programs.EmptyViewer",true); else _g109.h["saturn.client.programs.EmptyViewer"] = true;
		value108 = _g109;
		if(__map_reserved.programs != null) _g104.setReserved("programs",value108); else _g104.h["programs"] = value108;
		var value109;
		var _g110 = new haxe.ds.StringMap();
		var value110;
		var _g111 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g111.setReserved("field","constructId"); else _g111.h["field"] = "constructId";
		if(__map_reserved["class"] != null) _g111.setReserved("class","saturn.core.domain.SgcConstruct"); else _g111.h["class"] = "saturn.core.domain.SgcConstruct";
		if(__map_reserved.fk_field != null) _g111.setReserved("fk_field","id"); else _g111.h["fk_field"] = "id";
		value110 = _g111;
		_g110.set("construct",value110);
		value109 = _g110;
		if(__map_reserved["fields.synthetic"] != null) _g104.setReserved("fields.synthetic",value109); else _g104.h["fields.synthetic"] = value109;
		var value111;
		var _g112 = new haxe.ds.StringMap();
		if(__map_reserved["Clone ID"] != null) _g112.setReserved("Clone ID","cloneId"); else _g112.h["Clone ID"] = "cloneId";
		if(__map_reserved["Construct ID"] != null) _g112.setReserved("Construct ID","construct.constructId"); else _g112.h["Construct ID"] = "construct.constructId";
		if(__map_reserved["ELN ID"] != null) _g112.setReserved("ELN ID","elnId"); else _g112.h["ELN ID"] = "elnId";
		if(__map_reserved.Comments != null) _g112.setReserved("Comments","comments"); else _g112.h["Comments"] = "comments";
		value111 = _g112;
		if(__map_reserved.model != null) _g104.setReserved("model",value111); else _g104.h["model"] = value111;
		value103 = _g104;
		if(__map_reserved["saturn.core.domain.SgcClone"] != null) _g.setReserved("saturn.core.domain.SgcClone",value103); else _g.h["saturn.core.domain.SgcClone"] = value103;
		var value112;
		var _g113 = new haxe.ds.StringMap();
		var value113;
		var _g114 = new haxe.ds.StringMap();
		if(__map_reserved.expressionId != null) _g114.setReserved("expressionId","EXPRESSION_ID"); else _g114.h["expressionId"] = "EXPRESSION_ID";
		if(__map_reserved.id != null) _g114.setReserved("id","PKEY"); else _g114.h["id"] = "PKEY";
		if(__map_reserved.cloneId != null) _g114.setReserved("cloneId","SGCCLONE_PKEY"); else _g114.h["cloneId"] = "SGCCLONE_PKEY";
		if(__map_reserved.elnId != null) _g114.setReserved("elnId","ELNEXP"); else _g114.h["elnId"] = "ELNEXP";
		if(__map_reserved.comments != null) _g114.setReserved("comments","COMMENTS"); else _g114.h["comments"] = "COMMENTS";
		value113 = _g114;
		if(__map_reserved.fields != null) _g113.setReserved("fields",value113); else _g113.h["fields"] = value113;
		var value114;
		var _g115 = new haxe.ds.StringMap();
		if(__map_reserved.expressionId != null) _g115.setReserved("expressionId",false); else _g115.h["expressionId"] = false;
		if(__map_reserved.id != null) _g115.setReserved("id",true); else _g115.h["id"] = true;
		value114 = _g115;
		if(__map_reserved.indexes != null) _g113.setReserved("indexes",value114); else _g113.h["indexes"] = value114;
		var value115;
		var _g116 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g116.setReserved("schema","SGC"); else _g116.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g116.setReserved("name","EXPRESSION"); else _g116.h["name"] = "EXPRESSION";
		value115 = _g116;
		if(__map_reserved.table_info != null) _g113.setReserved("table_info",value115); else _g113.h["table_info"] = value115;
		var value116;
		var _g117 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.EmptyViewer"] != null) _g117.setReserved("saturn.client.programs.EmptyViewer",true); else _g117.h["saturn.client.programs.EmptyViewer"] = true;
		value116 = _g117;
		if(__map_reserved.programs != null) _g113.setReserved("programs",value116); else _g113.h["programs"] = value116;
		var value117;
		var _g118 = new haxe.ds.StringMap();
		var value118;
		var _g119 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g119.setReserved("field","cloneId"); else _g119.h["field"] = "cloneId";
		if(__map_reserved["class"] != null) _g119.setReserved("class","saturn.core.domain.SgcClone"); else _g119.h["class"] = "saturn.core.domain.SgcClone";
		if(__map_reserved.fk_field != null) _g119.setReserved("fk_field","id"); else _g119.h["fk_field"] = "id";
		value118 = _g119;
		_g118.set("clone",value118);
		value117 = _g118;
		if(__map_reserved["fields.synthetic"] != null) _g113.setReserved("fields.synthetic",value117); else _g113.h["fields.synthetic"] = value117;
		var value119;
		var _g120 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g120.setReserved("alias","Expressions"); else _g120.h["alias"] = "Expressions";
		if(__map_reserved["file.new.label"] != null) _g120.setReserved("file.new.label","Expression"); else _g120.h["file.new.label"] = "Expression";
		if(__map_reserved.icon != null) _g120.setReserved("icon","dna_conical_16.png"); else _g120.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.auto_activate != null) _g120.setReserved("auto_activate","3"); else _g120.h["auto_activate"] = "3";
		value119 = _g120;
		if(__map_reserved.options != null) _g113.setReserved("options",value119); else _g113.h["options"] = value119;
		var value120;
		var _g121 = new haxe.ds.StringMap();
		if(__map_reserved["Expression ID"] != null) _g121.setReserved("Expression ID","expressionId"); else _g121.h["Expression ID"] = "expressionId";
		if(__map_reserved["Clone ID"] != null) _g121.setReserved("Clone ID","clone.cloneId"); else _g121.h["Clone ID"] = "clone.cloneId";
		if(__map_reserved["ELN ID"] != null) _g121.setReserved("ELN ID","elnId"); else _g121.h["ELN ID"] = "elnId";
		if(__map_reserved.Comments != null) _g121.setReserved("Comments","comments"); else _g121.h["Comments"] = "comments";
		value120 = _g121;
		if(__map_reserved.model != null) _g113.setReserved("model",value120); else _g113.h["model"] = value120;
		value112 = _g113;
		if(__map_reserved["saturn.core.domain.SgcExpression"] != null) _g.setReserved("saturn.core.domain.SgcExpression",value112); else _g.h["saturn.core.domain.SgcExpression"] = value112;
		var value121;
		var _g122 = new haxe.ds.StringMap();
		var value122;
		var _g123 = new haxe.ds.StringMap();
		if(__map_reserved.targetId != null) _g123.setReserved("targetId","TARGET_ID"); else _g123.h["targetId"] = "TARGET_ID";
		if(__map_reserved.id != null) _g123.setReserved("id","PKEY"); else _g123.h["id"] = "PKEY";
		if(__map_reserved.gi != null) _g123.setReserved("gi","GENBANK_ID"); else _g123.h["gi"] = "GENBANK_ID";
		if(__map_reserved.geneId != null) _g123.setReserved("geneId","NCBIGENEID"); else _g123.h["geneId"] = "NCBIGENEID";
		if(__map_reserved.proteinSeq != null) _g123.setReserved("proteinSeq","PROTEINSEQUENCE"); else _g123.h["proteinSeq"] = "PROTEINSEQUENCE";
		if(__map_reserved.dnaSeq != null) _g123.setReserved("dnaSeq","NUCLEOTIDESEQUENCE"); else _g123.h["dnaSeq"] = "NUCLEOTIDESEQUENCE";
		if(__map_reserved.activeStatus != null) _g123.setReserved("activeStatus","ACTIVESTATUS"); else _g123.h["activeStatus"] = "ACTIVESTATUS";
		if(__map_reserved.pi != null) _g123.setReserved("pi","PI"); else _g123.h["pi"] = "PI";
		if(__map_reserved.comments != null) _g123.setReserved("comments","COMMENTS"); else _g123.h["comments"] = "COMMENTS";
		if(__map_reserved.complexComments != null) _g123.setReserved("complexComments","COMPLEXCOMPONENTS"); else _g123.h["complexComments"] = "COMPLEXCOMPONENTS";
		if(__map_reserved.complex != null) _g123.setReserved("complex","COMPLEX"); else _g123.h["complex"] = "COMPLEX";
		value122 = _g123;
		if(__map_reserved.fields != null) _g122.setReserved("fields",value122); else _g122.h["fields"] = value122;
		var value123;
		var _g124 = new haxe.ds.StringMap();
		if(__map_reserved.targetId != null) _g124.setReserved("targetId",false); else _g124.h["targetId"] = false;
		if(__map_reserved.id != null) _g124.setReserved("id",true); else _g124.h["id"] = true;
		value123 = _g124;
		if(__map_reserved.indexes != null) _g122.setReserved("indexes",value123); else _g122.h["indexes"] = value123;
		var value124;
		var _g125 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g125.setReserved("schema","SGC"); else _g125.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g125.setReserved("name","TARGET"); else _g125.h["name"] = "TARGET";
		if(__map_reserved.human_name != null) _g125.setReserved("human_name","Target"); else _g125.h["human_name"] = "Target";
		if(__map_reserved.human_name_plural != null) _g125.setReserved("human_name_plural","Targets"); else _g125.h["human_name_plural"] = "Targets";
		value124 = _g125;
		if(__map_reserved.table_info != null) _g122.setReserved("table_info",value124); else _g122.h["table_info"] = value124;
		var value125;
		var _g126 = new haxe.ds.StringMap();
		if(__map_reserved["Target ID"] != null) _g126.setReserved("Target ID","targetId"); else _g126.h["Target ID"] = "targetId";
		if(__map_reserved["Genbank ID"] != null) _g126.setReserved("Genbank ID","gi"); else _g126.h["Genbank ID"] = "gi";
		if(__map_reserved["DNA Sequence"] != null) _g126.setReserved("DNA Sequence","dnaSeq"); else _g126.h["DNA Sequence"] = "dnaSeq";
		if(__map_reserved["Protein Sequence"] != null) _g126.setReserved("Protein Sequence","proteinSeq"); else _g126.h["Protein Sequence"] = "proteinSeq";
		if(__map_reserved.__HIDDEN__PKEY__ != null) _g126.setReserved("__HIDDEN__PKEY__","id"); else _g126.h["__HIDDEN__PKEY__"] = "id";
		value125 = _g126;
		if(__map_reserved.model != null) _g122.setReserved("model",value125); else _g122.h["model"] = value125;
		var value126;
		var _g127 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g127.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g127.h["saturn.client.programs.DNASequenceEditor"] = true;
		value126 = _g127;
		if(__map_reserved.programs != null) _g122.setReserved("programs",value126); else _g122.h["programs"] = value126;
		var value127;
		var _g128 = new haxe.ds.StringMap();
		var value128;
		var _g129 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g129.setReserved("field","proteinSeq"); else _g129.h["field"] = "proteinSeq";
		if(__map_reserved["class"] != null) _g129.setReserved("class","saturn.core.Protein"); else _g129.h["class"] = "saturn.core.Protein";
		if(__map_reserved.fk_field != null) _g129.setReserved("fk_field",null); else _g129.h["fk_field"] = null;
		value128 = _g129;
		_g128.set("proteinSequenceObj",value128);
		value127 = _g128;
		if(__map_reserved["fields.synthetic"] != null) _g122.setReserved("fields.synthetic",value127); else _g122.h["fields.synthetic"] = value127;
		var value129;
		var _g130 = new haxe.ds.StringMap();
		if(__map_reserved.id_pattern != null) _g130.setReserved("id_pattern",".*"); else _g130.h["id_pattern"] = ".*";
		if(__map_reserved.alias != null) _g130.setReserved("alias","Targets"); else _g130.h["alias"] = "Targets";
		if(__map_reserved["file.new.label"] != null) _g130.setReserved("file.new.label","Target"); else _g130.h["file.new.label"] = "Target";
		if(__map_reserved.icon != null) _g130.setReserved("icon","protein_16.png"); else _g130.h["icon"] = "protein_16.png";
		if(__map_reserved.auto_activate != null) _g130.setReserved("auto_activate","3"); else _g130.h["auto_activate"] = "3";
		value129 = _g130;
		if(__map_reserved.options != null) _g122.setReserved("options",value129); else _g122.h["options"] = value129;
		value121 = _g122;
		if(__map_reserved["saturn.core.domain.SgcTarget"] != null) _g.setReserved("saturn.core.domain.SgcTarget",value121); else _g.h["saturn.core.domain.SgcTarget"] = value121;
		var value130;
		var _g131 = new haxe.ds.StringMap();
		var value131;
		var _g132 = new haxe.ds.StringMap();
		if(__map_reserved.sequence != null) _g132.setReserved("sequence","SEQ"); else _g132.h["sequence"] = "SEQ";
		if(__map_reserved.id != null) _g132.setReserved("id","PKEY"); else _g132.h["id"] = "PKEY";
		if(__map_reserved.type != null) _g132.setReserved("type","SEQTYPE"); else _g132.h["type"] = "SEQTYPE";
		if(__map_reserved.version != null) _g132.setReserved("version","TARGETVERSION"); else _g132.h["version"] = "TARGETVERSION";
		if(__map_reserved.targetId != null) _g132.setReserved("targetId","SGCTARGET_PKEY"); else _g132.h["targetId"] = "SGCTARGET_PKEY";
		if(__map_reserved.crc != null) _g132.setReserved("crc","CRC"); else _g132.h["crc"] = "CRC";
		if(__map_reserved.target != null) _g132.setReserved("target","TARGET_ID"); else _g132.h["target"] = "TARGET_ID";
		value131 = _g132;
		if(__map_reserved.fields != null) _g131.setReserved("fields",value131); else _g131.h["fields"] = value131;
		var value132;
		var _g133 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g133.setReserved("id",true); else _g133.h["id"] = true;
		value132 = _g133;
		if(__map_reserved.indexes != null) _g131.setReserved("indexes",value132); else _g131.h["indexes"] = value132;
		var value133;
		var _g134 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g134.setReserved("schema",""); else _g134.h["schema"] = "";
		if(__map_reserved.name != null) _g134.setReserved("name","SEQDATA"); else _g134.h["name"] = "SEQDATA";
		value133 = _g134;
		if(__map_reserved.table_info != null) _g131.setReserved("table_info",value133); else _g131.h["table_info"] = value133;
		var value134;
		var _g135 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g135.setReserved("field","type"); else _g135.h["field"] = "type";
		if(__map_reserved.value != null) _g135.setReserved("value","Nucleotide"); else _g135.h["value"] = "Nucleotide";
		value134 = _g135;
		if(__map_reserved.selector != null) _g131.setReserved("selector",value134); else _g131.h["selector"] = value134;
		value130 = _g131;
		if(__map_reserved["saturn.core.domain.SgcTargetDNA"] != null) _g.setReserved("saturn.core.domain.SgcTargetDNA",value130); else _g.h["saturn.core.domain.SgcTargetDNA"] = value130;
		var value135;
		var _g136 = new haxe.ds.StringMap();
		var value136;
		var _g137 = new haxe.ds.StringMap();
		if(__map_reserved.sequence != null) _g137.setReserved("sequence","SEQ"); else _g137.h["sequence"] = "SEQ";
		if(__map_reserved.id != null) _g137.setReserved("id","PKEY"); else _g137.h["id"] = "PKEY";
		if(__map_reserved.type != null) _g137.setReserved("type","SEQTYPE"); else _g137.h["type"] = "SEQTYPE";
		if(__map_reserved.version != null) _g137.setReserved("version","TARGETVERSION"); else _g137.h["version"] = "TARGETVERSION";
		if(__map_reserved.targetId != null) _g137.setReserved("targetId","SGCTARGET_PKEY"); else _g137.h["targetId"] = "SGCTARGET_PKEY";
		if(__map_reserved.crc != null) _g137.setReserved("crc","CRC"); else _g137.h["crc"] = "CRC";
		if(__map_reserved.target != null) _g137.setReserved("target","TARGET_ID"); else _g137.h["target"] = "TARGET_ID";
		value136 = _g137;
		if(__map_reserved.fields != null) _g136.setReserved("fields",value136); else _g136.h["fields"] = value136;
		var value137;
		var _g138 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g138.setReserved("id",true); else _g138.h["id"] = true;
		value137 = _g138;
		if(__map_reserved.indexes != null) _g136.setReserved("indexes",value137); else _g136.h["indexes"] = value137;
		var value138;
		var _g139 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g139.setReserved("schema",""); else _g139.h["schema"] = "";
		if(__map_reserved.name != null) _g139.setReserved("name","SEQDATA"); else _g139.h["name"] = "SEQDATA";
		value138 = _g139;
		if(__map_reserved.table_info != null) _g136.setReserved("table_info",value138); else _g136.h["table_info"] = value138;
		value135 = _g136;
		if(__map_reserved["saturn.core.domain.SgcSeqData"] != null) _g.setReserved("saturn.core.domain.SgcSeqData",value135); else _g.h["saturn.core.domain.SgcSeqData"] = value135;
		var value139;
		var _g140 = new haxe.ds.StringMap();
		var value140;
		var _g141 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g141.setReserved("id","PKEY"); else _g141.h["id"] = "PKEY";
		if(__map_reserved.accession != null) _g141.setReserved("accession","IDENTIFIER"); else _g141.h["accession"] = "IDENTIFIER";
		if(__map_reserved.start != null) _g141.setReserved("start","SEQSTART"); else _g141.h["start"] = "SEQSTART";
		if(__map_reserved.stop != null) _g141.setReserved("stop","SEQSTOP"); else _g141.h["stop"] = "SEQSTOP";
		if(__map_reserved.targetId != null) _g141.setReserved("targetId","SGCTARGET_PKEY"); else _g141.h["targetId"] = "SGCTARGET_PKEY";
		value140 = _g141;
		if(__map_reserved.fields != null) _g140.setReserved("fields",value140); else _g140.h["fields"] = value140;
		var value141;
		var _g142 = new haxe.ds.StringMap();
		if(__map_reserved.accession != null) _g142.setReserved("accession",false); else _g142.h["accession"] = false;
		if(__map_reserved.id != null) _g142.setReserved("id",true); else _g142.h["id"] = true;
		value141 = _g142;
		if(__map_reserved.indexes != null) _g140.setReserved("indexes",value141); else _g140.h["indexes"] = value141;
		value139 = _g140;
		if(__map_reserved["saturn.core.domain.SgcDomain"] != null) _g.setReserved("saturn.core.domain.SgcDomain",value139); else _g.h["saturn.core.domain.SgcDomain"] = value139;
		var value142;
		var _g143 = new haxe.ds.StringMap();
		var value143;
		var _g144 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g144.setReserved("id","PKEY"); else _g144.h["id"] = "PKEY";
		if(__map_reserved.plateName != null) _g144.setReserved("plateName","PLATENAME"); else _g144.h["plateName"] = "PLATENAME";
		if(__map_reserved.elnRef != null) _g144.setReserved("elnRef","ELNREF"); else _g144.h["elnRef"] = "ELNREF";
		value143 = _g144;
		if(__map_reserved.fields != null) _g143.setReserved("fields",value143); else _g143.h["fields"] = value143;
		var value144;
		var _g145 = new haxe.ds.StringMap();
		if(__map_reserved.plateName != null) _g145.setReserved("plateName",false); else _g145.h["plateName"] = false;
		if(__map_reserved.id != null) _g145.setReserved("id",true); else _g145.h["id"] = true;
		value144 = _g145;
		if(__map_reserved.indexes != null) _g143.setReserved("indexes",value144); else _g143.h["indexes"] = value144;
		var value145;
		var _g146 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g146.setReserved("schema","SGC"); else _g146.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g146.setReserved("name","CONSTRUCTPLATE"); else _g146.h["name"] = "CONSTRUCTPLATE";
		value145 = _g146;
		if(__map_reserved.table_info != null) _g143.setReserved("table_info",value145); else _g143.h["table_info"] = value145;
		var value146;
		var _g147 = new haxe.ds.StringMap();
		if(__map_reserved.icon != null) _g147.setReserved("icon","dna_conical_16.png"); else _g147.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.alias != null) _g147.setReserved("alias","Construct Plate"); else _g147.h["alias"] = "Construct Plate";
		if(__map_reserved["file.new.label"] != null) _g147.setReserved("file.new.label","Construct Plate"); else _g147.h["file.new.label"] = "Construct Plate";
		if(__map_reserved.id_pattern != null) _g147.setReserved("id_pattern","cp-"); else _g147.h["id_pattern"] = "cp-";
		if(__map_reserved.strip_id_prefix != null) _g147.setReserved("strip_id_prefix",true); else _g147.h["strip_id_prefix"] = true;
		var value147;
		var _g148 = new haxe.ds.StringMap();
		var value148;
		var _g149 = new haxe.ds.StringMap();
		var value149;
		var _g150 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g150.setReserved("user_suffix","A"); else _g150.h["user_suffix"] = "A";
		if(__map_reserved["function"] != null) _g150.setReserved("function","saturn.core.domain.SgcConstructPlate.loadPlate"); else _g150.h["function"] = "saturn.core.domain.SgcConstructPlate.loadPlate";
		value149 = _g150;
		if(__map_reserved.DEFAULT != null) _g149.setReserved("DEFAULT",value149); else _g149.h["DEFAULT"] = value149;
		value148 = _g149;
		if(__map_reserved.search_bar != null) _g148.setReserved("search_bar",value148); else _g148.h["search_bar"] = value148;
		value147 = _g148;
		_g147.set("actions",value147);
		value146 = _g147;
		if(__map_reserved.options != null) _g143.setReserved("options",value146); else _g143.h["options"] = value146;
		var value150;
		var _g151 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.EmptyViewer"] != null) _g151.setReserved("saturn.client.programs.EmptyViewer",true); else _g151.h["saturn.client.programs.EmptyViewer"] = true;
		value150 = _g151;
		if(__map_reserved.programs != null) _g143.setReserved("programs",value150); else _g143.h["programs"] = value150;
		var value151;
		var _g152 = new haxe.ds.StringMap();
		if(__map_reserved.plateName != null) _g152.setReserved("plateName",true); else _g152.h["plateName"] = true;
		value151 = _g152;
		if(__map_reserved.search != null) _g143.setReserved("search",value151); else _g143.h["search"] = value151;
		var value152;
		var _g153 = new haxe.ds.StringMap();
		if(__map_reserved["Plate Name"] != null) _g153.setReserved("Plate Name","plateName"); else _g153.h["Plate Name"] = "plateName";
		value152 = _g153;
		if(__map_reserved.model != null) _g143.setReserved("model",value152); else _g143.h["model"] = value152;
		value142 = _g143;
		if(__map_reserved["saturn.core.domain.SgcConstructPlate"] != null) _g.setReserved("saturn.core.domain.SgcConstructPlate",value142); else _g.h["saturn.core.domain.SgcConstructPlate"] = value142;
		var value153;
		var _g154 = new haxe.ds.StringMap();
		var value154;
		var _g155 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g155.setReserved("id","PKEY"); else _g155.h["id"] = "PKEY";
		if(__map_reserved.plateName != null) _g155.setReserved("plateName","PLATENAME"); else _g155.h["plateName"] = "PLATENAME";
		if(__map_reserved.elnRef != null) _g155.setReserved("elnRef","ELNREF"); else _g155.h["elnRef"] = "ELNREF";
		value154 = _g155;
		if(__map_reserved.fields != null) _g154.setReserved("fields",value154); else _g154.h["fields"] = value154;
		var value155;
		var _g156 = new haxe.ds.StringMap();
		if(__map_reserved.plateName != null) _g156.setReserved("plateName",false); else _g156.h["plateName"] = false;
		if(__map_reserved.id != null) _g156.setReserved("id",true); else _g156.h["id"] = true;
		value155 = _g156;
		if(__map_reserved.indexes != null) _g154.setReserved("indexes",value155); else _g154.h["indexes"] = value155;
		var value156;
		var _g157 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g157.setReserved("schema","SGC"); else _g157.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g157.setReserved("name","PLATE"); else _g157.h["name"] = "PLATE";
		value156 = _g157;
		if(__map_reserved.table_info != null) _g154.setReserved("table_info",value156); else _g154.h["table_info"] = value156;
		var value157;
		var _g158 = new haxe.ds.StringMap();
		if(__map_reserved.icon != null) _g158.setReserved("icon","dna_conical_16.png"); else _g158.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.alias != null) _g158.setReserved("alias","Allele Plate"); else _g158.h["alias"] = "Allele Plate";
		if(__map_reserved["file.new.label"] != null) _g158.setReserved("file.new.label","Allele Plate"); else _g158.h["file.new.label"] = "Allele Plate";
		if(__map_reserved.id_pattern != null) _g158.setReserved("id_pattern","ap-"); else _g158.h["id_pattern"] = "ap-";
		if(__map_reserved.strip_id_prefix != null) _g158.setReserved("strip_id_prefix",true); else _g158.h["strip_id_prefix"] = true;
		var value158;
		var _g159 = new haxe.ds.StringMap();
		var value159;
		var _g160 = new haxe.ds.StringMap();
		var value160;
		var _g161 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g161.setReserved("user_suffix","A"); else _g161.h["user_suffix"] = "A";
		if(__map_reserved["function"] != null) _g161.setReserved("function","saturn.core.domain.SgcAllelePlate.loadPlate"); else _g161.h["function"] = "saturn.core.domain.SgcAllelePlate.loadPlate";
		value160 = _g161;
		if(__map_reserved.DEFAULT != null) _g160.setReserved("DEFAULT",value160); else _g160.h["DEFAULT"] = value160;
		value159 = _g160;
		if(__map_reserved.search_bar != null) _g159.setReserved("search_bar",value159); else _g159.h["search_bar"] = value159;
		value158 = _g159;
		_g158.set("actions",value158);
		if(__map_reserved.auto_activate != null) _g158.setReserved("auto_activate","3"); else _g158.h["auto_activate"] = "3";
		value157 = _g158;
		if(__map_reserved.options != null) _g154.setReserved("options",value157); else _g154.h["options"] = value157;
		var value161;
		var _g162 = new haxe.ds.StringMap();
		if(__map_reserved.plateName != null) _g162.setReserved("plateName",true); else _g162.h["plateName"] = true;
		value161 = _g162;
		if(__map_reserved.search != null) _g154.setReserved("search",value161); else _g154.h["search"] = value161;
		var value162;
		var _g163 = new haxe.ds.StringMap();
		if(__map_reserved["Plate Name"] != null) _g163.setReserved("Plate Name","plateName"); else _g163.h["Plate Name"] = "plateName";
		value162 = _g163;
		if(__map_reserved.model != null) _g154.setReserved("model",value162); else _g154.h["model"] = value162;
		var value163;
		var _g164 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.EmptyViewer"] != null) _g164.setReserved("saturn.client.programs.EmptyViewer",true); else _g164.h["saturn.client.programs.EmptyViewer"] = true;
		value163 = _g164;
		if(__map_reserved.programs != null) _g154.setReserved("programs",value163); else _g154.h["programs"] = value163;
		value153 = _g154;
		if(__map_reserved["saturn.core.domain.SgcAllelePlate"] != null) _g.setReserved("saturn.core.domain.SgcAllelePlate",value153); else _g.h["saturn.core.domain.SgcAllelePlate"] = value153;
		var value164;
		var _g165 = new haxe.ds.StringMap();
		var value165;
		var _g166 = new haxe.ds.StringMap();
		if(__map_reserved.dnaId != null) _g166.setReserved("dnaId","DNA_ID"); else _g166.h["dnaId"] = "DNA_ID";
		if(__map_reserved.id != null) _g166.setReserved("id","PKEY"); else _g166.h["id"] = "PKEY";
		if(__map_reserved.dnaSeq != null) _g166.setReserved("dnaSeq","DNASEQUENCE"); else _g166.h["dnaSeq"] = "DNASEQUENCE";
		value165 = _g166;
		if(__map_reserved.fields != null) _g165.setReserved("fields",value165); else _g165.h["fields"] = value165;
		var value166;
		var _g167 = new haxe.ds.StringMap();
		if(__map_reserved.dnaId != null) _g167.setReserved("dnaId",false); else _g167.h["dnaId"] = false;
		if(__map_reserved.id != null) _g167.setReserved("id",true); else _g167.h["id"] = true;
		value166 = _g167;
		if(__map_reserved.indexes != null) _g165.setReserved("indexes",value166); else _g165.h["indexes"] = value166;
		var value167;
		var _g168 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g168.setReserved("schema","SGC"); else _g168.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g168.setReserved("name","DNA"); else _g168.h["name"] = "DNA";
		value167 = _g168;
		if(__map_reserved.table_info != null) _g165.setReserved("table_info",value167); else _g165.h["table_info"] = value167;
		value164 = _g165;
		if(__map_reserved["saturn.core.domain.SgcDNA"] != null) _g.setReserved("saturn.core.domain.SgcDNA",value164); else _g.h["saturn.core.domain.SgcDNA"] = value164;
		var value168;
		var _g169 = new haxe.ds.StringMap();
		var value169;
		var _g170 = new haxe.ds.StringMap();
		if(__map_reserved.pageId != null) _g170.setReserved("pageId","PAGEID"); else _g170.h["pageId"] = "PAGEID";
		if(__map_reserved.id != null) _g170.setReserved("id","PKEY"); else _g170.h["id"] = "PKEY";
		if(__map_reserved.content != null) _g170.setReserved("content","CONTENT"); else _g170.h["content"] = "CONTENT";
		value169 = _g170;
		if(__map_reserved.fields != null) _g169.setReserved("fields",value169); else _g169.h["fields"] = value169;
		var value170;
		var _g171 = new haxe.ds.StringMap();
		if(__map_reserved.pageId != null) _g171.setReserved("pageId",false); else _g171.h["pageId"] = false;
		if(__map_reserved.id != null) _g171.setReserved("id",true); else _g171.h["id"] = true;
		value170 = _g171;
		if(__map_reserved.indexes != null) _g169.setReserved("indexes",value170); else _g169.h["indexes"] = value170;
		var value171;
		var _g172 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g172.setReserved("schema","SGC"); else _g172.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g172.setReserved("name","TIDDLY_WIKI"); else _g172.h["name"] = "TIDDLY_WIKI";
		value171 = _g172;
		if(__map_reserved.table_info != null) _g169.setReserved("table_info",value171); else _g169.h["table_info"] = value171;
		var value172;
		var _g173 = new haxe.ds.StringMap();
		if(__map_reserved.icon != null) _g173.setReserved("icon","eln_16.png"); else _g173.h["icon"] = "eln_16.png";
		if(__map_reserved.alias != null) _g173.setReserved("alias","ELN Pages"); else _g173.h["alias"] = "ELN Pages";
		if(__map_reserved["file.new.label"] != null) _g173.setReserved("file.new.label","ELN Page"); else _g173.h["file.new.label"] = "ELN Page";
		if(__map_reserved.id_pattern != null) _g173.setReserved("id_pattern","wiki-"); else _g173.h["id_pattern"] = "wiki-";
		if(__map_reserved.strip_id_prefix != null) _g173.setReserved("strip_id_prefix",true); else _g173.h["strip_id_prefix"] = true;
		value172 = _g173;
		if(__map_reserved.options != null) _g169.setReserved("options",value172); else _g169.h["options"] = value172;
		var value173;
		var _g174 = new haxe.ds.StringMap();
		if(__map_reserved.pageId != null) _g174.setReserved("pageId",true); else _g174.h["pageId"] = true;
		value173 = _g174;
		if(__map_reserved.search != null) _g169.setReserved("search",value173); else _g169.h["search"] = value173;
		var value174;
		var _g175 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.TiddlyWikiViewer"] != null) _g175.setReserved("saturn.client.programs.TiddlyWikiViewer",true); else _g175.h["saturn.client.programs.TiddlyWikiViewer"] = true;
		value174 = _g175;
		if(__map_reserved.programs != null) _g169.setReserved("programs",value174); else _g169.h["programs"] = value174;
		value168 = _g169;
		if(__map_reserved["saturn.core.domain.TiddlyWiki"] != null) _g.setReserved("saturn.core.domain.TiddlyWiki",value168); else _g.h["saturn.core.domain.TiddlyWiki"] = value168;
		var value175;
		var _g176 = new haxe.ds.StringMap();
		var value176;
		var _g177 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g177.setReserved("id","PKEY"); else _g177.h["id"] = "PKEY";
		if(__map_reserved.entityId != null) _g177.setReserved("entityId","ID"); else _g177.h["entityId"] = "ID";
		if(__map_reserved.dataSourceId != null) _g177.setReserved("dataSourceId","SOURCE_PKEY"); else _g177.h["dataSourceId"] = "SOURCE_PKEY";
		if(__map_reserved.reactionId != null) _g177.setReserved("reactionId","SGCREACTION_PKEY"); else _g177.h["reactionId"] = "SGCREACTION_PKEY";
		if(__map_reserved.entityTypeId != null) _g177.setReserved("entityTypeId","SGCENTITY_TYPE"); else _g177.h["entityTypeId"] = "SGCENTITY_TYPE";
		if(__map_reserved.altName != null) _g177.setReserved("altName","ALTNAME"); else _g177.h["altName"] = "ALTNAME";
		if(__map_reserved.description != null) _g177.setReserved("description","DESCRIPTION"); else _g177.h["description"] = "DESCRIPTION";
		value176 = _g177;
		if(__map_reserved.fields != null) _g176.setReserved("fields",value176); else _g176.h["fields"] = value176;
		var value177;
		var _g178 = new haxe.ds.StringMap();
		if(__map_reserved.entityId != null) _g178.setReserved("entityId",false); else _g178.h["entityId"] = false;
		if(__map_reserved.id != null) _g178.setReserved("id",true); else _g178.h["id"] = true;
		value177 = _g178;
		if(__map_reserved.indexes != null) _g176.setReserved("indexes",value177); else _g176.h["indexes"] = value177;
		var value178;
		var _g179 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g179.setReserved("schema","SGC"); else _g179.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g179.setReserved("name","Z_ENTITY"); else _g179.h["name"] = "Z_ENTITY";
		value178 = _g179;
		if(__map_reserved.table_info != null) _g176.setReserved("table_info",value178); else _g176.h["table_info"] = value178;
		var value179;
		var _g180 = new haxe.ds.StringMap();
		var value180;
		var _g181 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g181.setReserved("field","dataSourceId"); else _g181.h["field"] = "dataSourceId";
		if(__map_reserved["class"] != null) _g181.setReserved("class","saturn.core.domain.DataSource"); else _g181.h["class"] = "saturn.core.domain.DataSource";
		if(__map_reserved.fk_field != null) _g181.setReserved("fk_field","id"); else _g181.h["fk_field"] = "id";
		value180 = _g181;
		_g180.set("source",value180);
		var value181;
		var _g182 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g182.setReserved("field","reactionId"); else _g182.h["field"] = "reactionId";
		if(__map_reserved["class"] != null) _g182.setReserved("class","saturn.core.Reaction"); else _g182.h["class"] = "saturn.core.Reaction";
		if(__map_reserved.fk_field != null) _g182.setReserved("fk_field","id"); else _g182.h["fk_field"] = "id";
		value181 = _g182;
		_g180.set("reaction",value181);
		var value182;
		var _g183 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g183.setReserved("field","entityTypeId"); else _g183.h["field"] = "entityTypeId";
		if(__map_reserved["class"] != null) _g183.setReserved("class","saturn.core.EntityType"); else _g183.h["class"] = "saturn.core.EntityType";
		if(__map_reserved.fk_field != null) _g183.setReserved("fk_field","id"); else _g183.h["fk_field"] = "id";
		value182 = _g183;
		_g180.set("entityType",value182);
		value179 = _g180;
		if(__map_reserved["fields.synthetic"] != null) _g176.setReserved("fields.synthetic",value179); else _g176.h["fields.synthetic"] = value179;
		value175 = _g176;
		if(__map_reserved["saturn.core.domain.Entity"] != null) _g.setReserved("saturn.core.domain.Entity",value175); else _g.h["saturn.core.domain.Entity"] = value175;
		var value183;
		var _g184 = new haxe.ds.StringMap();
		var value184;
		var _g185 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g185.setReserved("id","PKEY"); else _g185.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g185.setReserved("name","ID"); else _g185.h["name"] = "ID";
		if(__map_reserved.sequence != null) _g185.setReserved("sequence","LINEAR_SEQUENCE"); else _g185.h["sequence"] = "LINEAR_SEQUENCE";
		if(__map_reserved.entityId != null) _g185.setReserved("entityId","SGCENTITY_PKEY"); else _g185.h["entityId"] = "SGCENTITY_PKEY";
		value184 = _g185;
		if(__map_reserved.fields != null) _g184.setReserved("fields",value184); else _g184.h["fields"] = value184;
		var value185;
		var _g186 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g186.setReserved("name",false); else _g186.h["name"] = false;
		if(__map_reserved.id != null) _g186.setReserved("id",true); else _g186.h["id"] = true;
		value185 = _g186;
		if(__map_reserved.indexes != null) _g184.setReserved("indexes",value185); else _g184.h["indexes"] = value185;
		var value186;
		var _g187 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g187.setReserved("schema","SGC"); else _g187.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g187.setReserved("name","Z_MOLECULE"); else _g187.h["name"] = "Z_MOLECULE";
		value186 = _g187;
		if(__map_reserved.table_info != null) _g184.setReserved("table_info",value186); else _g184.h["table_info"] = value186;
		var value187;
		var _g188 = new haxe.ds.StringMap();
		var value188;
		var _g189 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g189.setReserved("field","entityId"); else _g189.h["field"] = "entityId";
		if(__map_reserved["class"] != null) _g189.setReserved("class","saturn.core.Entity"); else _g189.h["class"] = "saturn.core.Entity";
		if(__map_reserved.fk_field != null) _g189.setReserved("fk_field","id"); else _g189.h["fk_field"] = "id";
		value188 = _g189;
		_g188.set("entity",value188);
		value187 = _g188;
		if(__map_reserved["fields.synthetic"] != null) _g184.setReserved("fields.synthetic",value187); else _g184.h["fields.synthetic"] = value187;
		value183 = _g184;
		if(__map_reserved["saturn.core.domain.Molecule"] != null) _g.setReserved("saturn.core.domain.Molecule",value183); else _g.h["saturn.core.domain.Molecule"] = value183;
		var value189;
		var _g190 = new haxe.ds.StringMap();
		var value190;
		var _g191 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g191.setReserved("id","PKEY"); else _g191.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g191.setReserved("name","NAME"); else _g191.h["name"] = "NAME";
		value190 = _g191;
		if(__map_reserved.fields != null) _g190.setReserved("fields",value190); else _g190.h["fields"] = value190;
		var value191;
		var _g192 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g192.setReserved("name",false); else _g192.h["name"] = false;
		if(__map_reserved.id != null) _g192.setReserved("id",true); else _g192.h["id"] = true;
		value191 = _g192;
		if(__map_reserved.indexes != null) _g190.setReserved("indexes",value191); else _g190.h["indexes"] = value191;
		var value192;
		var _g193 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g193.setReserved("schema","SGC"); else _g193.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g193.setReserved("name","Z_REACTION_TYPE"); else _g193.h["name"] = "Z_REACTION_TYPE";
		value192 = _g193;
		if(__map_reserved.table_info != null) _g190.setReserved("table_info",value192); else _g190.h["table_info"] = value192;
		value189 = _g190;
		if(__map_reserved["saturn.core.ReactionType"] != null) _g.setReserved("saturn.core.ReactionType",value189); else _g.h["saturn.core.ReactionType"] = value189;
		var value193;
		var _g194 = new haxe.ds.StringMap();
		var value194;
		var _g195 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g195.setReserved("id","PKEY"); else _g195.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g195.setReserved("name","NAME"); else _g195.h["name"] = "NAME";
		value194 = _g195;
		if(__map_reserved.fields != null) _g194.setReserved("fields",value194); else _g194.h["fields"] = value194;
		var value195;
		var _g196 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g196.setReserved("name",false); else _g196.h["name"] = false;
		if(__map_reserved.id != null) _g196.setReserved("id",true); else _g196.h["id"] = true;
		value195 = _g196;
		if(__map_reserved.indexes != null) _g194.setReserved("indexes",value195); else _g194.h["indexes"] = value195;
		var value196;
		var _g197 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g197.setReserved("schema","SGC"); else _g197.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g197.setReserved("name","Z_ENTITY_TYPE"); else _g197.h["name"] = "Z_ENTITY_TYPE";
		value196 = _g197;
		if(__map_reserved.table_info != null) _g194.setReserved("table_info",value196); else _g194.h["table_info"] = value196;
		value193 = _g194;
		if(__map_reserved["saturn.core.EntityType"] != null) _g.setReserved("saturn.core.EntityType",value193); else _g.h["saturn.core.EntityType"] = value193;
		var value197;
		var _g198 = new haxe.ds.StringMap();
		var value198;
		var _g199 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g199.setReserved("id","PKEY"); else _g199.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g199.setReserved("name","NAME"); else _g199.h["name"] = "NAME";
		value198 = _g199;
		if(__map_reserved.fields != null) _g198.setReserved("fields",value198); else _g198.h["fields"] = value198;
		var value199;
		var _g200 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g200.setReserved("name",false); else _g200.h["name"] = false;
		if(__map_reserved.id != null) _g200.setReserved("id",true); else _g200.h["id"] = true;
		value199 = _g200;
		if(__map_reserved.indexes != null) _g198.setReserved("indexes",value199); else _g198.h["indexes"] = value199;
		var value200;
		var _g201 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g201.setReserved("schema","SGC"); else _g201.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g201.setReserved("name","Z_REACTION_ROLE"); else _g201.h["name"] = "Z_REACTION_ROLE";
		value200 = _g201;
		if(__map_reserved.table_info != null) _g198.setReserved("table_info",value200); else _g198.h["table_info"] = value200;
		value197 = _g198;
		if(__map_reserved["saturn.core.ReactionRole"] != null) _g.setReserved("saturn.core.ReactionRole",value197); else _g.h["saturn.core.ReactionRole"] = value197;
		var value201;
		var _g202 = new haxe.ds.StringMap();
		var value202;
		var _g203 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g203.setReserved("id","PKEY"); else _g203.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g203.setReserved("name","NAME"); else _g203.h["name"] = "NAME";
		if(__map_reserved.reactionTypeId != null) _g203.setReserved("reactionTypeId","SGCREACTION_TYPE"); else _g203.h["reactionTypeId"] = "SGCREACTION_TYPE";
		value202 = _g203;
		if(__map_reserved.fields != null) _g202.setReserved("fields",value202); else _g202.h["fields"] = value202;
		var value203;
		var _g204 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g204.setReserved("name",false); else _g204.h["name"] = false;
		if(__map_reserved.id != null) _g204.setReserved("id",true); else _g204.h["id"] = true;
		value203 = _g204;
		if(__map_reserved.indexes != null) _g202.setReserved("indexes",value203); else _g202.h["indexes"] = value203;
		var value204;
		var _g205 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g205.setReserved("schema","SGC"); else _g205.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g205.setReserved("name","Z_REACTION"); else _g205.h["name"] = "Z_REACTION";
		value204 = _g205;
		if(__map_reserved.table_info != null) _g202.setReserved("table_info",value204); else _g202.h["table_info"] = value204;
		var value205;
		var _g206 = new haxe.ds.StringMap();
		var value206;
		var _g207 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g207.setReserved("field","reactionTypeId"); else _g207.h["field"] = "reactionTypeId";
		if(__map_reserved["class"] != null) _g207.setReserved("class","saturn.core.ReactionType"); else _g207.h["class"] = "saturn.core.ReactionType";
		if(__map_reserved.fk_field != null) _g207.setReserved("fk_field","id"); else _g207.h["fk_field"] = "id";
		value206 = _g207;
		_g206.set("reactionType",value206);
		value205 = _g206;
		if(__map_reserved["fields.synthetic"] != null) _g202.setReserved("fields.synthetic",value205); else _g202.h["fields.synthetic"] = value205;
		value201 = _g202;
		if(__map_reserved["saturn.core.Reaction"] != null) _g.setReserved("saturn.core.Reaction",value201); else _g.h["saturn.core.Reaction"] = value201;
		var value207;
		var _g208 = new haxe.ds.StringMap();
		var value208;
		var _g209 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g209.setReserved("id","PKEY"); else _g209.h["id"] = "PKEY";
		if(__map_reserved.reactionRoleId != null) _g209.setReserved("reactionRoleId","SGCROLE_PKEY"); else _g209.h["reactionRoleId"] = "SGCROLE_PKEY";
		if(__map_reserved.entityId != null) _g209.setReserved("entityId","SGCENTITY_PKEY"); else _g209.h["entityId"] = "SGCENTITY_PKEY";
		if(__map_reserved.reactionId != null) _g209.setReserved("reactionId","SGCREACTION_PKEY"); else _g209.h["reactionId"] = "SGCREACTION_PKEY";
		if(__map_reserved.position != null) _g209.setReserved("position","POSITION"); else _g209.h["position"] = "POSITION";
		value208 = _g209;
		if(__map_reserved.fields != null) _g208.setReserved("fields",value208); else _g208.h["fields"] = value208;
		var value209;
		var _g210 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g210.setReserved("id",true); else _g210.h["id"] = true;
		value209 = _g210;
		if(__map_reserved.indexes != null) _g208.setReserved("indexes",value209); else _g208.h["indexes"] = value209;
		var value210;
		var _g211 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g211.setReserved("schema","SGC"); else _g211.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g211.setReserved("name","Z_REACTION_COMPONENT"); else _g211.h["name"] = "Z_REACTION_COMPONENT";
		value210 = _g211;
		if(__map_reserved.table_info != null) _g208.setReserved("table_info",value210); else _g208.h["table_info"] = value210;
		var value211;
		var _g212 = new haxe.ds.StringMap();
		var value212;
		var _g213 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g213.setReserved("field","reactionRoleId"); else _g213.h["field"] = "reactionRoleId";
		if(__map_reserved["class"] != null) _g213.setReserved("class","saturn.core.ReactionRole"); else _g213.h["class"] = "saturn.core.ReactionRole";
		if(__map_reserved.fk_field != null) _g213.setReserved("fk_field","id"); else _g213.h["fk_field"] = "id";
		value212 = _g213;
		_g212.set("reactionRole",value212);
		var value213;
		var _g214 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g214.setReserved("field","reactionId"); else _g214.h["field"] = "reactionId";
		if(__map_reserved["class"] != null) _g214.setReserved("class","saturn.core.Reaction"); else _g214.h["class"] = "saturn.core.Reaction";
		if(__map_reserved.fk_field != null) _g214.setReserved("fk_field","id"); else _g214.h["fk_field"] = "id";
		value213 = _g214;
		_g212.set("reaction",value213);
		var value214;
		var _g215 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g215.setReserved("field","entityId"); else _g215.h["field"] = "entityId";
		if(__map_reserved["class"] != null) _g215.setReserved("class","saturn.core.Entity"); else _g215.h["class"] = "saturn.core.Entity";
		if(__map_reserved.fk_field != null) _g215.setReserved("fk_field","id"); else _g215.h["fk_field"] = "id";
		value214 = _g215;
		_g212.set("entity",value214);
		value211 = _g212;
		if(__map_reserved["fields.synthetic"] != null) _g208.setReserved("fields.synthetic",value211); else _g208.h["fields.synthetic"] = value211;
		value207 = _g208;
		if(__map_reserved["saturn.core.ReactionComponent"] != null) _g.setReserved("saturn.core.ReactionComponent",value207); else _g.h["saturn.core.ReactionComponent"] = value207;
		var value215;
		var _g216 = new haxe.ds.StringMap();
		var value216;
		var _g217 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g217.setReserved("id","PKEY"); else _g217.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g217.setReserved("name","NAME"); else _g217.h["name"] = "NAME";
		value216 = _g217;
		if(__map_reserved.fields != null) _g216.setReserved("fields",value216); else _g216.h["fields"] = value216;
		var value217;
		var _g218 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g218.setReserved("name",false); else _g218.h["name"] = false;
		if(__map_reserved.id != null) _g218.setReserved("id",true); else _g218.h["id"] = true;
		value217 = _g218;
		if(__map_reserved.indexes != null) _g216.setReserved("indexes",value217); else _g216.h["indexes"] = value217;
		var value218;
		var _g219 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g219.setReserved("schema","SGC"); else _g219.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g219.setReserved("name","Z_ENTITY_SOURCE"); else _g219.h["name"] = "Z_ENTITY_SOURCE";
		value218 = _g219;
		if(__map_reserved.table_info != null) _g216.setReserved("table_info",value218); else _g216.h["table_info"] = value218;
		value215 = _g216;
		if(__map_reserved["saturn.core.domain.DataSource"] != null) _g.setReserved("saturn.core.domain.DataSource",value215); else _g.h["saturn.core.domain.DataSource"] = value215;
		var value219;
		var _g220 = new haxe.ds.StringMap();
		var value220;
		var _g221 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g221.setReserved("id","PKEY"); else _g221.h["id"] = "PKEY";
		if(__map_reserved.entityId != null) _g221.setReserved("entityId","SGCENTITY_PKEY"); else _g221.h["entityId"] = "SGCENTITY_PKEY";
		if(__map_reserved.labelId != null) _g221.setReserved("labelId","XREF_SGCENTITY_PKEY"); else _g221.h["labelId"] = "XREF_SGCENTITY_PKEY";
		if(__map_reserved.start != null) _g221.setReserved("start","STARTPOS"); else _g221.h["start"] = "STARTPOS";
		if(__map_reserved.stop != null) _g221.setReserved("stop","STOPPOS"); else _g221.h["stop"] = "STOPPOS";
		if(__map_reserved.evalue != null) _g221.setReserved("evalue","EVALUE"); else _g221.h["evalue"] = "EVALUE";
		value220 = _g221;
		if(__map_reserved.fields != null) _g220.setReserved("fields",value220); else _g220.h["fields"] = value220;
		var value221;
		var _g222 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g222.setReserved("id",true); else _g222.h["id"] = true;
		value221 = _g222;
		if(__map_reserved.indexes != null) _g220.setReserved("indexes",value221); else _g220.h["indexes"] = value221;
		var value222;
		var _g223 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g223.setReserved("schema","SGC"); else _g223.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g223.setReserved("name","Z_ANNOTATION"); else _g223.h["name"] = "Z_ANNOTATION";
		value222 = _g223;
		if(__map_reserved.table_info != null) _g220.setReserved("table_info",value222); else _g220.h["table_info"] = value222;
		var value223;
		var _g224 = new haxe.ds.StringMap();
		var value224;
		var _g225 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g225.setReserved("field","entityId"); else _g225.h["field"] = "entityId";
		if(__map_reserved["class"] != null) _g225.setReserved("class","saturn.core.domain.Entity"); else _g225.h["class"] = "saturn.core.domain.Entity";
		if(__map_reserved.fk_field != null) _g225.setReserved("fk_field","id"); else _g225.h["fk_field"] = "id";
		value224 = _g225;
		_g224.set("entity",value224);
		var value225;
		var _g226 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g226.setReserved("field","labelId"); else _g226.h["field"] = "labelId";
		if(__map_reserved["class"] != null) _g226.setReserved("class","saturn.core.domain.Entity"); else _g226.h["class"] = "saturn.core.domain.Entity";
		if(__map_reserved.fk_field != null) _g226.setReserved("fk_field","id"); else _g226.h["fk_field"] = "id";
		value225 = _g226;
		_g224.set("referent",value225);
		value223 = _g224;
		if(__map_reserved["fields.synthetic"] != null) _g220.setReserved("fields.synthetic",value223); else _g220.h["fields.synthetic"] = value223;
		value219 = _g220;
		if(__map_reserved["saturn.core.domain.MoleculeAnnotation"] != null) _g.setReserved("saturn.core.domain.MoleculeAnnotation",value219); else _g.h["saturn.core.domain.MoleculeAnnotation"] = value219;
		var value226;
		var _g227 = new haxe.ds.StringMap();
		var value227;
		var _g228 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g228.setReserved("id","PKEY"); else _g228.h["id"] = "PKEY";
		if(__map_reserved.barcode != null) _g228.setReserved("barcode","BARCODE"); else _g228.h["barcode"] = "BARCODE";
		if(__map_reserved.purificationId != null) _g228.setReserved("purificationId","SGCPURIFICATION_PKEY"); else _g228.h["purificationId"] = "SGCPURIFICATION_PKEY";
		value227 = _g228;
		if(__map_reserved.fields != null) _g227.setReserved("fields",value227); else _g227.h["fields"] = value227;
		var value228;
		var _g229 = new haxe.ds.StringMap();
		if(__map_reserved.barcode != null) _g229.setReserved("barcode",false); else _g229.h["barcode"] = false;
		if(__map_reserved.id != null) _g229.setReserved("id",true); else _g229.h["id"] = true;
		value228 = _g229;
		if(__map_reserved.indexes != null) _g227.setReserved("indexes",value228); else _g227.h["indexes"] = value228;
		var value229;
		var _g230 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g230.setReserved("schema","SGC"); else _g230.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g230.setReserved("name","XTAL_PLATES"); else _g230.h["name"] = "XTAL_PLATES";
		value229 = _g230;
		if(__map_reserved.table_info != null) _g227.setReserved("table_info",value229); else _g227.h["table_info"] = value229;
		var value230;
		var _g231 = new haxe.ds.StringMap();
		var value231;
		var _g232 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g232.setReserved("field","purificationId"); else _g232.h["field"] = "purificationId";
		if(__map_reserved["class"] != null) _g232.setReserved("class","saturn.core.domain.SgcPurification"); else _g232.h["class"] = "saturn.core.domain.SgcPurification";
		if(__map_reserved.fk_field != null) _g232.setReserved("fk_field","id"); else _g232.h["fk_field"] = "id";
		value231 = _g232;
		_g231.set("purification",value231);
		value230 = _g231;
		if(__map_reserved["fields.synthetic"] != null) _g227.setReserved("fields.synthetic",value230); else _g227.h["fields.synthetic"] = value230;
		var value232;
		var _g233 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g233.setReserved("alias","Xtal Plates"); else _g233.h["alias"] = "Xtal Plates";
		value232 = _g233;
		if(__map_reserved.options != null) _g227.setReserved("options",value232); else _g227.h["options"] = value232;
		value226 = _g227;
		if(__map_reserved["saturn.core.domain.XtalPlate"] != null) _g.setReserved("saturn.core.domain.XtalPlate",value226); else _g.h["saturn.core.domain.XtalPlate"] = value226;
		var value233;
		var _g234 = new haxe.ds.StringMap();
		var value234;
		var _g235 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g235.setReserved("id","PKEY"); else _g235.h["id"] = "PKEY";
		if(__map_reserved.modelId != null) _g235.setReserved("modelId","MODELID"); else _g235.h["modelId"] = "MODELID";
		if(__map_reserved.pathToPdb != null) _g235.setReserved("pathToPdb","PATHTOPDB"); else _g235.h["pathToPdb"] = "PATHTOPDB";
		value234 = _g235;
		if(__map_reserved.fields != null) _g234.setReserved("fields",value234); else _g234.h["fields"] = value234;
		var value235;
		var _g236 = new haxe.ds.StringMap();
		if(__map_reserved.modelId != null) _g236.setReserved("modelId",false); else _g236.h["modelId"] = false;
		if(__map_reserved.id != null) _g236.setReserved("id",true); else _g236.h["id"] = true;
		value235 = _g236;
		if(__map_reserved.indexes != null) _g234.setReserved("indexes",value235); else _g234.h["indexes"] = value235;
		var value236;
		var _g237 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g237.setReserved("schema","SGC"); else _g237.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g237.setReserved("name","MODEL"); else _g237.h["name"] = "MODEL";
		value236 = _g237;
		if(__map_reserved.table_info != null) _g234.setReserved("table_info",value236); else _g234.h["table_info"] = value236;
		var value237;
		var _g238 = new haxe.ds.StringMap();
		var value238;
		var _g239 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g239.setReserved("field","pathToPdb"); else _g239.h["field"] = "pathToPdb";
		if(__map_reserved["class"] != null) _g239.setReserved("class","saturn.core.domain.FileProxy"); else _g239.h["class"] = "saturn.core.domain.FileProxy";
		if(__map_reserved.fk_field != null) _g239.setReserved("fk_field","path"); else _g239.h["fk_field"] = "path";
		value238 = _g239;
		_g238.set("pdb",value238);
		value237 = _g238;
		if(__map_reserved["fields.synthetic"] != null) _g234.setReserved("fields.synthetic",value237); else _g234.h["fields.synthetic"] = value237;
		var value239;
		var _g240 = new haxe.ds.StringMap();
		if(__map_reserved.id_pattern != null) _g240.setReserved("id_pattern","\\w+-m"); else _g240.h["id_pattern"] = "\\w+-m";
		if(__map_reserved.workspace_wrapper != null) _g240.setReserved("workspace_wrapper","saturn.client.workspace.StructureModelWO"); else _g240.h["workspace_wrapper"] = "saturn.client.workspace.StructureModelWO";
		if(__map_reserved.icon != null) _g240.setReserved("icon","structure_16.png"); else _g240.h["icon"] = "structure_16.png";
		if(__map_reserved.alias != null) _g240.setReserved("alias","Models"); else _g240.h["alias"] = "Models";
		value239 = _g240;
		if(__map_reserved.options != null) _g234.setReserved("options",value239); else _g234.h["options"] = value239;
		var value240;
		var _g241 = new haxe.ds.StringMap();
		if(__map_reserved.modelId != null) _g241.setReserved("modelId","\\w+-m"); else _g241.h["modelId"] = "\\w+-m";
		value240 = _g241;
		if(__map_reserved.search != null) _g234.setReserved("search",value240); else _g234.h["search"] = value240;
		var value241;
		var _g242 = new haxe.ds.StringMap();
		if(__map_reserved["Model ID"] != null) _g242.setReserved("Model ID","modelId"); else _g242.h["Model ID"] = "modelId";
		if(__map_reserved["Path to PDB"] != null) _g242.setReserved("Path to PDB","pathToPdb"); else _g242.h["Path to PDB"] = "pathToPdb";
		value241 = _g242;
		if(__map_reserved.model != null) _g234.setReserved("model",value241); else _g234.h["model"] = value241;
		value233 = _g234;
		if(__map_reserved["saturn.core.domain.StructureModel"] != null) _g.setReserved("saturn.core.domain.StructureModel",value233); else _g.h["saturn.core.domain.StructureModel"] = value233;
		var value242;
		var _g243 = new haxe.ds.StringMap();
		var value243;
		var _g244 = new haxe.ds.StringMap();
		if(__map_reserved.path != null) _g244.setReserved("path","PATH"); else _g244.h["path"] = "PATH";
		if(__map_reserved.content != null) _g244.setReserved("content","CONTENT"); else _g244.h["content"] = "CONTENT";
		value243 = _g244;
		if(__map_reserved.fields != null) _g243.setReserved("fields",value243); else _g243.h["fields"] = value243;
		var value244;
		var _g245 = new haxe.ds.StringMap();
		if(__map_reserved.path != null) _g245.setReserved("path",true); else _g245.h["path"] = true;
		value244 = _g245;
		if(__map_reserved.indexes != null) _g243.setReserved("indexes",value244); else _g243.h["indexes"] = value244;
		var value245;
		var _g246 = new haxe.ds.StringMap();
		var value246;
		var _g247 = new haxe.ds.StringMap();
		if(__map_reserved["/work"] != null) _g247.setReserved("/work","W:"); else _g247.h["/work"] = "W:";
		if(__map_reserved["/home/share"] != null) _g247.setReserved("/home/share","S:"); else _g247.h["/home/share"] = "S:";
		value246 = _g247;
		_g246.set("windows_conversions",value246);
		var value247;
		var _g248 = new haxe.ds.StringMap();
		if(__map_reserved.WORK != null) _g248.setReserved("WORK","^W"); else _g248.h["WORK"] = "^W";
		value247 = _g248;
		_g246.set("windows_allowed_paths_regex",value247);
		var value248;
		var _g249 = new haxe.ds.StringMap();
		if(__map_reserved["W:"] != null) _g249.setReserved("W:","/work"); else _g249.h["W:"] = "/work";
		value248 = _g249;
		_g246.set("linux_conversions",value248);
		var value249;
		var _g250 = new haxe.ds.StringMap();
		if(__map_reserved.WORK != null) _g250.setReserved("WORK","^/work"); else _g250.h["WORK"] = "^/work";
		value249 = _g250;
		_g246.set("linux_allowed_paths_regex",value249);
		value245 = _g246;
		if(__map_reserved.options != null) _g243.setReserved("options",value245); else _g243.h["options"] = value245;
		value242 = _g243;
		if(__map_reserved["saturn.core.domain.FileProxy"] != null) _g.setReserved("saturn.core.domain.FileProxy",value242); else _g.h["saturn.core.domain.FileProxy"] = value242;
		var value250;
		var _g251 = new haxe.ds.StringMap();
		var value251;
		var _g252 = new haxe.ds.StringMap();
		if(__map_reserved.moleculeName != null) _g252.setReserved("moleculeName","NAME"); else _g252.h["moleculeName"] = "NAME";
		value251 = _g252;
		if(__map_reserved.fields != null) _g251.setReserved("fields",value251); else _g251.h["fields"] = value251;
		var value252;
		var _g253 = new haxe.ds.StringMap();
		if(__map_reserved.moleculeName != null) _g253.setReserved("moleculeName",true); else _g253.h["moleculeName"] = true;
		value252 = _g253;
		if(__map_reserved.indexes != null) _g251.setReserved("indexes",value252); else _g251.h["indexes"] = value252;
		var value253;
		var _g254 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g254.setReserved("saturn.client.programs.DNASequenceEditor",false); else _g254.h["saturn.client.programs.DNASequenceEditor"] = false;
		value253 = _g254;
		if(__map_reserved.programs != null) _g251.setReserved("programs",value253); else _g251.h["programs"] = value253;
		var value254;
		var _g255 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g255.setReserved("alias","DNA"); else _g255.h["alias"] = "DNA";
		if(__map_reserved.icon != null) _g255.setReserved("icon","dna_conical_16.png"); else _g255.h["icon"] = "dna_conical_16.png";
		value254 = _g255;
		if(__map_reserved.options != null) _g251.setReserved("options",value254); else _g251.h["options"] = value254;
		value250 = _g251;
		if(__map_reserved["saturn.core.DNA"] != null) _g.setReserved("saturn.core.DNA",value250); else _g.h["saturn.core.DNA"] = value250;
		var value255;
		var _g256 = new haxe.ds.StringMap();
		var value256;
		var _g257 = new haxe.ds.StringMap();
		if(__map_reserved.moleculeName != null) _g257.setReserved("moleculeName","NAME"); else _g257.h["moleculeName"] = "NAME";
		value256 = _g257;
		if(__map_reserved.fields != null) _g256.setReserved("fields",value256); else _g256.h["fields"] = value256;
		var value257;
		var _g258 = new haxe.ds.StringMap();
		if(__map_reserved.moleculeName != null) _g258.setReserved("moleculeName",true); else _g258.h["moleculeName"] = true;
		value257 = _g258;
		if(__map_reserved.indexes != null) _g256.setReserved("indexes",value257); else _g256.h["indexes"] = value257;
		var value258;
		var _g259 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.ProteinSequenceEditor"] != null) _g259.setReserved("saturn.client.programs.ProteinSequenceEditor",false); else _g259.h["saturn.client.programs.ProteinSequenceEditor"] = false;
		value258 = _g259;
		if(__map_reserved.programs != null) _g256.setReserved("programs",value258); else _g256.h["programs"] = value258;
		var value259;
		var _g260 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g260.setReserved("alias","Proteins"); else _g260.h["alias"] = "Proteins";
		if(__map_reserved.icon != null) _g260.setReserved("icon","structure_16.png"); else _g260.h["icon"] = "structure_16.png";
		value259 = _g260;
		if(__map_reserved.options != null) _g256.setReserved("options",value259); else _g256.h["options"] = value259;
		value255 = _g256;
		if(__map_reserved["saturn.core.Protein"] != null) _g.setReserved("saturn.core.Protein",value255); else _g.h["saturn.core.Protein"] = value255;
		var value260;
		var _g261 = new haxe.ds.StringMap();
		var value261;
		var _g262 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g262.setReserved("id","PKEY"); else _g262.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g262.setReserved("name","NAME"); else _g262.h["name"] = "NAME";
		if(__map_reserved.value != null) _g262.setReserved("value","VALUE"); else _g262.h["value"] = "VALUE";
		value261 = _g262;
		if(__map_reserved.fields != null) _g261.setReserved("fields",value261); else _g261.h["fields"] = value261;
		var value262;
		var _g263 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g263.setReserved("name",false); else _g263.h["name"] = false;
		if(__map_reserved.id != null) _g263.setReserved("id",true); else _g263.h["id"] = true;
		value262 = _g263;
		if(__map_reserved.indexes != null) _g261.setReserved("indexes",value262); else _g261.h["indexes"] = value262;
		var value263;
		var _g264 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.TextEditor"] != null) _g264.setReserved("saturn.client.programs.TextEditor",true); else _g264.h["saturn.client.programs.TextEditor"] = true;
		value263 = _g264;
		if(__map_reserved.programs != null) _g261.setReserved("programs",value263); else _g261.h["programs"] = value263;
		var value264;
		var _g265 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g265.setReserved("alias","Scripts"); else _g265.h["alias"] = "Scripts";
		if(__map_reserved["file.new.label"] != null) _g265.setReserved("file.new.label","Script"); else _g265.h["file.new.label"] = "Script";
		if(__map_reserved.icon != null) _g265.setReserved("icon","dna_conical_16.png"); else _g265.h["icon"] = "dna_conical_16.png";
		value264 = _g265;
		if(__map_reserved.options != null) _g261.setReserved("options",value264); else _g261.h["options"] = value264;
		var value265;
		var _g266 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g266.setReserved("schema","SGC"); else _g266.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g266.setReserved("name","SCRIPTS"); else _g266.h["name"] = "SCRIPTS";
		value265 = _g266;
		if(__map_reserved.table_info != null) _g261.setReserved("table_info",value265); else _g261.h["table_info"] = value265;
		var value266;
		var _g267 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g267.setReserved("name",true); else _g267.h["name"] = true;
		value266 = _g267;
		if(__map_reserved.search != null) _g261.setReserved("search",value266); else _g261.h["search"] = value266;
		value260 = _g261;
		if(__map_reserved["saturn.core.domain.TextFile"] != null) _g.setReserved("saturn.core.domain.TextFile",value260); else _g.h["saturn.core.domain.TextFile"] = value260;
		var value267;
		var _g268 = new haxe.ds.StringMap();
		var value268;
		var _g269 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.BasicTableViewer"] != null) _g269.setReserved("saturn.client.programs.BasicTableViewer",true); else _g269.h["saturn.client.programs.BasicTableViewer"] = true;
		value268 = _g269;
		if(__map_reserved.programs != null) _g268.setReserved("programs",value268); else _g268.h["programs"] = value268;
		var value269;
		var _g270 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g270.setReserved("alias","Results"); else _g270.h["alias"] = "Results";
		value269 = _g270;
		if(__map_reserved.options != null) _g268.setReserved("options",value269); else _g268.h["options"] = value269;
		value267 = _g268;
		if(__map_reserved["saturn.core.BasicTable"] != null) _g.setReserved("saturn.core.BasicTable",value267); else _g.h["saturn.core.BasicTable"] = value267;
		var value270;
		var _g271 = new haxe.ds.StringMap();
		var value271;
		var _g272 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.ConstructDesigner"] != null) _g272.setReserved("saturn.client.programs.ConstructDesigner",false); else _g272.h["saturn.client.programs.ConstructDesigner"] = false;
		value271 = _g272;
		if(__map_reserved.programs != null) _g271.setReserved("programs",value271); else _g271.h["programs"] = value271;
		var value272;
		var _g273 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g273.setReserved("alias","Construct Plan"); else _g273.h["alias"] = "Construct Plan";
		if(__map_reserved.icon != null) _g273.setReserved("icon","dna_conical_16.png"); else _g273.h["icon"] = "dna_conical_16.png";
		value272 = _g273;
		if(__map_reserved.options != null) _g271.setReserved("options",value272); else _g271.h["options"] = value272;
		value270 = _g271;
		if(__map_reserved["saturn.core.ConstructDesignTable"] != null) _g.setReserved("saturn.core.ConstructDesignTable",value270); else _g.h["saturn.core.ConstructDesignTable"] = value270;
		var value273;
		var _g274 = new haxe.ds.StringMap();
		var value274;
		var _g275 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.ComplexHelper"] != null) _g275.setReserved("saturn.client.programs.ComplexHelper",false); else _g275.h["saturn.client.programs.ComplexHelper"] = false;
		value274 = _g275;
		if(__map_reserved.programs != null) _g274.setReserved("programs",value274); else _g274.h["programs"] = value274;
		var value275;
		var _g276 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g276.setReserved("alias","Complex Helper"); else _g276.h["alias"] = "Complex Helper";
		if(__map_reserved.icon != null) _g276.setReserved("icon","protein_conical_16.png"); else _g276.h["icon"] = "protein_conical_16.png";
		value275 = _g276;
		if(__map_reserved.options != null) _g274.setReserved("options",value275); else _g274.h["options"] = value275;
		value273 = _g274;
		if(__map_reserved["saturn.core.ComplexPlan"] != null) _g.setReserved("saturn.core.ComplexPlan",value273); else _g.h["saturn.core.ComplexPlan"] = value273;
		var value276;
		var _g277 = new haxe.ds.StringMap();
		var value277;
		var _g278 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.PurificationHelper"] != null) _g278.setReserved("saturn.client.programs.PurificationHelper",false); else _g278.h["saturn.client.programs.PurificationHelper"] = false;
		value277 = _g278;
		if(__map_reserved.programs != null) _g277.setReserved("programs",value277); else _g277.h["programs"] = value277;
		var value278;
		var _g279 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g279.setReserved("alias","Purifiaction Helper"); else _g279.h["alias"] = "Purifiaction Helper";
		value278 = _g279;
		if(__map_reserved.options != null) _g277.setReserved("options",value278); else _g277.h["options"] = value278;
		value276 = _g277;
		if(__map_reserved["saturn.core.PurificationHelperTable"] != null) _g.setReserved("saturn.core.PurificationHelperTable",value276); else _g.h["saturn.core.PurificationHelperTable"] = value276;
		var value279;
		var _g280 = new haxe.ds.StringMap();
		var value280;
		var _g281 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.SHRNADesigner"] != null) _g281.setReserved("saturn.client.programs.SHRNADesigner",false); else _g281.h["saturn.client.programs.SHRNADesigner"] = false;
		value280 = _g281;
		if(__map_reserved.programs != null) _g280.setReserved("programs",value280); else _g280.h["programs"] = value280;
		var value281;
		var _g282 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g282.setReserved("alias","shRNA Designer"); else _g282.h["alias"] = "shRNA Designer";
		if(__map_reserved.icon != null) _g282.setReserved("icon","shrna_16.png"); else _g282.h["icon"] = "shrna_16.png";
		value281 = _g282;
		if(__map_reserved.options != null) _g280.setReserved("options",value281); else _g280.h["options"] = value281;
		value279 = _g280;
		if(__map_reserved["saturn.core.SHRNADesignTable"] != null) _g.setReserved("saturn.core.SHRNADesignTable",value279); else _g.h["saturn.core.SHRNADesignTable"] = value279;
		var value282;
		var _g283 = new haxe.ds.StringMap();
		var value283;
		var _g284 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.BasicTableViewer"] != null) _g284.setReserved("saturn.client.programs.BasicTableViewer",false); else _g284.h["saturn.client.programs.BasicTableViewer"] = false;
		value283 = _g284;
		if(__map_reserved.programs != null) _g283.setReserved("programs",value283); else _g283.h["programs"] = value283;
		var value284;
		var _g285 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g285.setReserved("alias","Table"); else _g285.h["alias"] = "Table";
		value284 = _g285;
		if(__map_reserved.options != null) _g283.setReserved("options",value284); else _g283.h["options"] = value284;
		value282 = _g283;
		if(__map_reserved["saturn.core.Table"] != null) _g.setReserved("saturn.core.Table",value282); else _g.h["saturn.core.Table"] = value282;
		var value285;
		var _g286 = new haxe.ds.StringMap();
		var value286;
		var _g287 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g287.setReserved("id","PKEY"); else _g287.h["id"] = "PKEY";
		if(__map_reserved.compoundId != null) _g287.setReserved("compoundId","SGCGLOBALID"); else _g287.h["compoundId"] = "SGCGLOBALID";
		if(__map_reserved.shortCompoundId != null) _g287.setReserved("shortCompoundId","COMPOUND_ID"); else _g287.h["shortCompoundId"] = "COMPOUND_ID";
		if(__map_reserved.supplierId != null) _g287.setReserved("supplierId","SUPPLIER_ID"); else _g287.h["supplierId"] = "SUPPLIER_ID";
		if(__map_reserved.sdf != null) _g287.setReserved("sdf","SDF"); else _g287.h["sdf"] = "SDF";
		if(__map_reserved.supplier != null) _g287.setReserved("supplier","SUPPLIER"); else _g287.h["supplier"] = "SUPPLIER";
		if(__map_reserved.description != null) _g287.setReserved("description","DESCRIPTION"); else _g287.h["description"] = "DESCRIPTION";
		if(__map_reserved.concentration != null) _g287.setReserved("concentration","CONCENTRATION"); else _g287.h["concentration"] = "CONCENTRATION";
		if(__map_reserved.location != null) _g287.setReserved("location","LOCATION"); else _g287.h["location"] = "LOCATION";
		if(__map_reserved.comments != null) _g287.setReserved("comments","COMMENTS"); else _g287.h["comments"] = "COMMENTS";
		if(__map_reserved.solute != null) _g287.setReserved("solute","SOLUTE"); else _g287.h["solute"] = "SOLUTE";
		if(__map_reserved.mw != null) _g287.setReserved("mw","MW"); else _g287.h["mw"] = "MW";
		if(__map_reserved.confidential != null) _g287.setReserved("confidential","CONFIDENTIAL"); else _g287.h["confidential"] = "CONFIDENTIAL";
		if(__map_reserved.inchi != null) _g287.setReserved("inchi","INCHI"); else _g287.h["inchi"] = "INCHI";
		if(__map_reserved.smiles != null) _g287.setReserved("smiles","SMILES"); else _g287.h["smiles"] = "SMILES";
		if(__map_reserved.datestamp != null) _g287.setReserved("datestamp","DATESTAMP"); else _g287.h["datestamp"] = "DATESTAMP";
		if(__map_reserved.person != null) _g287.setReserved("person","PERSON"); else _g287.h["person"] = "PERSON";
		if(__map_reserved.oldSGCGLobalId != null) _g287.setReserved("oldSGCGLobalId","OLD_SGCGLOBAL_ID"); else _g287.h["oldSGCGLobalId"] = "OLD_SGCGLOBAL_ID";
		value286 = _g287;
		if(__map_reserved.fields != null) _g286.setReserved("fields",value286); else _g286.h["fields"] = value286;
		var value287;
		var _g288 = new haxe.ds.StringMap();
		if(__map_reserved.compoundId != null) _g288.setReserved("compoundId",false); else _g288.h["compoundId"] = false;
		if(__map_reserved.id != null) _g288.setReserved("id",true); else _g288.h["id"] = true;
		value287 = _g288;
		if(__map_reserved.indexes != null) _g286.setReserved("indexes",value287); else _g286.h["indexes"] = value287;
		var value288;
		var _g289 = new haxe.ds.StringMap();
		if(__map_reserved.compoundId != null) _g289.setReserved("compoundId",null); else _g289.h["compoundId"] = null;
		if(__map_reserved.shortCompoundId != null) _g289.setReserved("shortCompoundId",null); else _g289.h["shortCompoundId"] = null;
		if(__map_reserved.supplierId != null) _g289.setReserved("supplierId",null); else _g289.h["supplierId"] = null;
		if(__map_reserved.supplier != null) _g289.setReserved("supplier",null); else _g289.h["supplier"] = null;
		if(__map_reserved.oldSGCGlobalId != null) _g289.setReserved("oldSGCGlobalId",null); else _g289.h["oldSGCGlobalId"] = null;
		value288 = _g289;
		if(__map_reserved.search != null) _g286.setReserved("search",value288); else _g286.h["search"] = value288;
		var value289;
		var _g290 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g290.setReserved("schema","SGC"); else _g290.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g290.setReserved("name","SGCCOMPOUND"); else _g290.h["name"] = "SGCCOMPOUND";
		value289 = _g290;
		if(__map_reserved.table_info != null) _g286.setReserved("table_info",value289); else _g286.h["table_info"] = value289;
		var value290;
		var _g291 = new haxe.ds.StringMap();
		if(__map_reserved.workspace_wrapper != null) _g291.setReserved("workspace_wrapper","saturn.client.workspace.CompoundWO"); else _g291.h["workspace_wrapper"] = "saturn.client.workspace.CompoundWO";
		if(__map_reserved.icon != null) _g291.setReserved("icon","compound_16.png"); else _g291.h["icon"] = "compound_16.png";
		if(__map_reserved.alias != null) _g291.setReserved("alias","Compounds"); else _g291.h["alias"] = "Compounds";
		var value291;
		var _g292 = new haxe.ds.StringMap();
		var value292;
		var _g293 = new haxe.ds.StringMap();
		var value293;
		var _g294 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g294.setReserved("user_suffix","Assay Results"); else _g294.h["user_suffix"] = "Assay Results";
		if(__map_reserved["function"] != null) _g294.setReserved("function","saturn.core.domain.Compound.assaySearch"); else _g294.h["function"] = "saturn.core.domain.Compound.assaySearch";
		value293 = _g294;
		if(__map_reserved.assay_results != null) _g293.setReserved("assay_results",value293); else _g293.h["assay_results"] = value293;
		value292 = _g293;
		if(__map_reserved.search_bar != null) _g292.setReserved("search_bar",value292); else _g292.h["search_bar"] = value292;
		value291 = _g292;
		_g291.set("actions",value291);
		value290 = _g291;
		if(__map_reserved.options != null) _g286.setReserved("options",value290); else _g286.h["options"] = value290;
		var value294;
		var _g295 = new haxe.ds.StringMap();
		if(__map_reserved["Global ID"] != null) _g295.setReserved("Global ID","compoundId"); else _g295.h["Global ID"] = "compoundId";
		if(__map_reserved["Oxford ID"] != null) _g295.setReserved("Oxford ID","shortCompoundId"); else _g295.h["Oxford ID"] = "shortCompoundId";
		if(__map_reserved["Supplier ID"] != null) _g295.setReserved("Supplier ID","supplierId"); else _g295.h["Supplier ID"] = "supplierId";
		if(__map_reserved.Supplier != null) _g295.setReserved("Supplier","supplier"); else _g295.h["Supplier"] = "supplier";
		if(__map_reserved.Description != null) _g295.setReserved("Description","description"); else _g295.h["Description"] = "description";
		if(__map_reserved.Concentration != null) _g295.setReserved("Concentration","concentration"); else _g295.h["Concentration"] = "concentration";
		if(__map_reserved.Location != null) _g295.setReserved("Location","location"); else _g295.h["Location"] = "location";
		if(__map_reserved.Solute != null) _g295.setReserved("Solute","solute"); else _g295.h["Solute"] = "solute";
		if(__map_reserved.Comments != null) _g295.setReserved("Comments","comments"); else _g295.h["Comments"] = "comments";
		if(__map_reserved.MW != null) _g295.setReserved("MW","mw"); else _g295.h["MW"] = "mw";
		if(__map_reserved.Confidential != null) _g295.setReserved("Confidential","CONFIDENTIAL"); else _g295.h["Confidential"] = "CONFIDENTIAL";
		if(__map_reserved.Date != null) _g295.setReserved("Date","datestamp"); else _g295.h["Date"] = "datestamp";
		if(__map_reserved.Person != null) _g295.setReserved("Person","person"); else _g295.h["Person"] = "person";
		if(__map_reserved.InChi != null) _g295.setReserved("InChi","inchi"); else _g295.h["InChi"] = "inchi";
		if(__map_reserved.smiles != null) _g295.setReserved("smiles","smiles"); else _g295.h["smiles"] = "smiles";
		value294 = _g295;
		if(__map_reserved.model != null) _g286.setReserved("model",value294); else _g286.h["model"] = value294;
		var value295;
		var _g296 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.CompoundViewer"] != null) _g296.setReserved("saturn.client.programs.CompoundViewer",true); else _g296.h["saturn.client.programs.CompoundViewer"] = true;
		value295 = _g296;
		if(__map_reserved.programs != null) _g286.setReserved("programs",value295); else _g286.h["programs"] = value295;
		value285 = _g286;
		if(__map_reserved["saturn.core.domain.Compound"] != null) _g.setReserved("saturn.core.domain.Compound",value285); else _g.h["saturn.core.domain.Compound"] = value285;
		var value296;
		var _g297 = new haxe.ds.StringMap();
		var value297;
		var _g298 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g298.setReserved("id","PKEY"); else _g298.h["id"] = "PKEY";
		if(__map_reserved.glycanId != null) _g298.setReserved("glycanId","GLYCANID"); else _g298.h["glycanId"] = "GLYCANID";
		if(__map_reserved.content != null) _g298.setReserved("content","CONTENT"); else _g298.h["content"] = "CONTENT";
		if(__map_reserved.contentType != null) _g298.setReserved("contentType","CONTENT_TYPE"); else _g298.h["contentType"] = "CONTENT_TYPE";
		if(__map_reserved.description != null) _g298.setReserved("description","DESCRIPTION"); else _g298.h["description"] = "DESCRIPTION";
		value297 = _g298;
		if(__map_reserved.fields != null) _g297.setReserved("fields",value297); else _g297.h["fields"] = value297;
		var value298;
		var _g299 = new haxe.ds.StringMap();
		if(__map_reserved.glycanId != null) _g299.setReserved("glycanId",false); else _g299.h["glycanId"] = false;
		if(__map_reserved.id != null) _g299.setReserved("id",true); else _g299.h["id"] = true;
		value298 = _g299;
		if(__map_reserved.indexes != null) _g297.setReserved("indexes",value298); else _g297.h["indexes"] = value298;
		var value299;
		var _g300 = new haxe.ds.StringMap();
		if(__map_reserved.glycanId != null) _g300.setReserved("glycanId",null); else _g300.h["glycanId"] = null;
		value299 = _g300;
		if(__map_reserved.search != null) _g297.setReserved("search",value299); else _g297.h["search"] = value299;
		var value300;
		var _g301 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g301.setReserved("schema","SGC"); else _g301.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g301.setReserved("name","GLYCAN"); else _g301.h["name"] = "GLYCAN";
		value300 = _g301;
		if(__map_reserved.table_info != null) _g297.setReserved("table_info",value300); else _g297.h["table_info"] = value300;
		var value301;
		var _g302 = new haxe.ds.StringMap();
		if(__map_reserved.workspace_wrapper != null) _g302.setReserved("workspace_wrapper","saturn.client.workspace.GlycanWO"); else _g302.h["workspace_wrapper"] = "saturn.client.workspace.GlycanWO";
		if(__map_reserved.icon != null) _g302.setReserved("icon","glycan_16.png"); else _g302.h["icon"] = "glycan_16.png";
		if(__map_reserved.alias != null) _g302.setReserved("alias","Glycans"); else _g302.h["alias"] = "Glycans";
		value301 = _g302;
		if(__map_reserved.options != null) _g297.setReserved("options",value301); else _g297.h["options"] = value301;
		var value302;
		var _g303 = new haxe.ds.StringMap();
		if(__map_reserved["Glycan ID"] != null) _g303.setReserved("Glycan ID","glycanId"); else _g303.h["Glycan ID"] = "glycanId";
		if(__map_reserved.Description != null) _g303.setReserved("Description","description"); else _g303.h["Description"] = "description";
		if(__map_reserved.content != null) _g303.setReserved("content","content"); else _g303.h["content"] = "content";
		if(__map_reserved.contentType != null) _g303.setReserved("contentType","contentType"); else _g303.h["contentType"] = "contentType";
		value302 = _g303;
		if(__map_reserved.model != null) _g297.setReserved("model",value302); else _g297.h["model"] = value302;
		var value303;
		var _g304 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.GlycanBuilder"] != null) _g304.setReserved("saturn.client.programs.GlycanBuilder",true); else _g304.h["saturn.client.programs.GlycanBuilder"] = true;
		value303 = _g304;
		if(__map_reserved.programs != null) _g297.setReserved("programs",value303); else _g297.h["programs"] = value303;
		value296 = _g297;
		if(__map_reserved["saturn.core.domain.Glycan"] != null) _g.setReserved("saturn.core.domain.Glycan",value296); else _g.h["saturn.core.domain.Glycan"] = value296;
		var value304;
		var _g305 = new haxe.ds.StringMap();
		var value305;
		var _g306 = new haxe.ds.StringMap();
		var value306;
		var _g307 = new haxe.ds.StringMap();
		if(__map_reserved.SGC != null) _g307.setReserved("SGC",true); else _g307.h["SGC"] = true;
		value306 = _g307;
		_g306.set("flags",value306);
		value305 = _g306;
		if(__map_reserved.options != null) _g305.setReserved("options",value305); else _g305.h["options"] = value305;
		value304 = _g305;
		if(__map_reserved["saturn.app.SaturnClient"] != null) _g.setReserved("saturn.app.SaturnClient",value304); else _g.h["saturn.app.SaturnClient"] = value304;
		var value307;
		var _g308 = new haxe.ds.StringMap();
		var value308;
		var _g309 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g309.setReserved("id","PKEY"); else _g309.h["id"] = "PKEY";
		if(__map_reserved.username != null) _g309.setReserved("username","USERID"); else _g309.h["username"] = "USERID";
		if(__map_reserved.fullname != null) _g309.setReserved("fullname","FULLNAME"); else _g309.h["fullname"] = "FULLNAME";
		value308 = _g309;
		if(__map_reserved.fields != null) _g308.setReserved("fields",value308); else _g308.h["fields"] = value308;
		var value309;
		var _g310 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g310.setReserved("id",true); else _g310.h["id"] = true;
		if(__map_reserved.username != null) _g310.setReserved("username",false); else _g310.h["username"] = false;
		value309 = _g310;
		if(__map_reserved.indexes != null) _g308.setReserved("indexes",value309); else _g308.h["indexes"] = value309;
		var value310;
		var _g311 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g311.setReserved("schema","HIVE"); else _g311.h["schema"] = "HIVE";
		if(__map_reserved.name != null) _g311.setReserved("name","USER_DETAILS"); else _g311.h["name"] = "USER_DETAILS";
		value310 = _g311;
		if(__map_reserved.table_info != null) _g308.setReserved("table_info",value310); else _g308.h["table_info"] = value310;
		value307 = _g308;
		if(__map_reserved["saturn.core.User"] != null) _g.setReserved("saturn.core.User",value307); else _g.h["saturn.core.User"] = value307;
		var value311;
		var _g312 = new haxe.ds.StringMap();
		var value312;
		var _g313 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g313.setReserved("id","PKEY"); else _g313.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g313.setReserved("name","NAME"); else _g313.h["name"] = "NAME";
		value312 = _g313;
		if(__map_reserved.fields != null) _g312.setReserved("fields",value312); else _g312.h["fields"] = value312;
		var value313;
		var _g314 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g314.setReserved("id",true); else _g314.h["id"] = true;
		if(__map_reserved.name != null) _g314.setReserved("name",false); else _g314.h["name"] = false;
		value313 = _g314;
		if(__map_reserved.index != null) _g312.setReserved("index",value313); else _g312.h["index"] = value313;
		var value314;
		var _g315 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g315.setReserved("schema","SGC"); else _g315.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g315.setReserved("name","SATURNPERMISSION"); else _g315.h["name"] = "SATURNPERMISSION";
		value314 = _g315;
		if(__map_reserved.table_info != null) _g312.setReserved("table_info",value314); else _g312.h["table_info"] = value314;
		value311 = _g312;
		if(__map_reserved["saturn.core.Permission"] != null) _g.setReserved("saturn.core.Permission",value311); else _g.h["saturn.core.Permission"] = value311;
		var value315;
		var _g316 = new haxe.ds.StringMap();
		var value316;
		var _g317 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g317.setReserved("id","PKEY"); else _g317.h["id"] = "PKEY";
		if(__map_reserved.permissionId != null) _g317.setReserved("permissionId","PERMISSIONID"); else _g317.h["permissionId"] = "PERMISSIONID";
		if(__map_reserved.userId != null) _g317.setReserved("userId","USERID"); else _g317.h["userId"] = "USERID";
		value316 = _g317;
		if(__map_reserved.fields != null) _g316.setReserved("fields",value316); else _g316.h["fields"] = value316;
		var value317;
		var _g318 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g318.setReserved("id",true); else _g318.h["id"] = true;
		value317 = _g318;
		if(__map_reserved.index != null) _g316.setReserved("index",value317); else _g316.h["index"] = value317;
		var value318;
		var _g319 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g319.setReserved("schema","SGC"); else _g319.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g319.setReserved("name","SATURNUSER_TO_PERMISSION"); else _g319.h["name"] = "SATURNUSER_TO_PERMISSION";
		value318 = _g319;
		if(__map_reserved.table_info != null) _g316.setReserved("table_info",value318); else _g316.h["table_info"] = value318;
		value315 = _g316;
		if(__map_reserved["saturn.core.UserToPermission"] != null) _g.setReserved("saturn.core.UserToPermission",value315); else _g.h["saturn.core.UserToPermission"] = value315;
		var value319;
		var _g320 = new haxe.ds.StringMap();
		var value320;
		var _g321 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g321.setReserved("id","PKEY"); else _g321.h["id"] = "PKEY";
		if(__map_reserved.userName != null) _g321.setReserved("userName","USERNAME"); else _g321.h["userName"] = "USERNAME";
		if(__map_reserved.isPublic != null) _g321.setReserved("isPublic","ISPUBLIC"); else _g321.h["isPublic"] = "ISPUBLIC";
		if(__map_reserved.sessionContent != null) _g321.setReserved("sessionContent","SESSIONCONTENTS"); else _g321.h["sessionContent"] = "SESSIONCONTENTS";
		if(__map_reserved.sessionName != null) _g321.setReserved("sessionName","SESSIONNAME"); else _g321.h["sessionName"] = "SESSIONNAME";
		value320 = _g321;
		if(__map_reserved.fields != null) _g320.setReserved("fields",value320); else _g320.h["fields"] = value320;
		var value321;
		var _g322 = new haxe.ds.StringMap();
		if(__map_reserved.sessionName != null) _g322.setReserved("sessionName",false); else _g322.h["sessionName"] = false;
		if(__map_reserved.id != null) _g322.setReserved("id",true); else _g322.h["id"] = true;
		value321 = _g322;
		if(__map_reserved.indexes != null) _g320.setReserved("indexes",value321); else _g320.h["indexes"] = value321;
		var value322;
		var _g323 = new haxe.ds.StringMap();
		if(__map_reserved["user.fullname"] != null) _g323.setReserved("user.fullname",null); else _g323.h["user.fullname"] = null;
		value322 = _g323;
		if(__map_reserved.search != null) _g320.setReserved("search",value322); else _g320.h["search"] = value322;
		var value323;
		var _g324 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g324.setReserved("schema","SGC"); else _g324.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g324.setReserved("name","SATURNSESSION"); else _g324.h["name"] = "SATURNSESSION";
		value323 = _g324;
		if(__map_reserved.table_info != null) _g320.setReserved("table_info",value323); else _g320.h["table_info"] = value323;
		var value324;
		var _g325 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g325.setReserved("alias","Session"); else _g325.h["alias"] = "Session";
		if(__map_reserved.auto_activate != null) _g325.setReserved("auto_activate","3"); else _g325.h["auto_activate"] = "3";
		var value325;
		var _g326 = new haxe.ds.StringMap();
		if(__map_reserved.user_constraint_field != null) _g326.setReserved("user_constraint_field","userName"); else _g326.h["user_constraint_field"] = "userName";
		if(__map_reserved.public_constraint_field != null) _g326.setReserved("public_constraint_field","isPublic"); else _g326.h["public_constraint_field"] = "isPublic";
		value325 = _g326;
		_g325.set("constraints",value325);
		var value326;
		var _g327 = new haxe.ds.StringMap();
		var value327;
		var _g328 = new haxe.ds.StringMap();
		var value328;
		var _g329 = new haxe.ds.StringMap();
		if(__map_reserved.user_suffix != null) _g329.setReserved("user_suffix",""); else _g329.h["user_suffix"] = "";
		if(__map_reserved["function"] != null) _g329.setReserved("function","saturn.core.domain.SaturnSession.load"); else _g329.h["function"] = "saturn.core.domain.SaturnSession.load";
		value328 = _g329;
		if(__map_reserved.DEFAULT != null) _g328.setReserved("DEFAULT",value328); else _g328.h["DEFAULT"] = value328;
		value327 = _g328;
		if(__map_reserved.search_bar != null) _g327.setReserved("search_bar",value327); else _g327.h["search_bar"] = value327;
		value326 = _g327;
		_g325.set("actions",value326);
		value324 = _g325;
		if(__map_reserved.options != null) _g320.setReserved("options",value324); else _g320.h["options"] = value324;
		var value329;
		var _g330 = new haxe.ds.StringMap();
		if(__map_reserved.USERNAME != null) _g330.setReserved("USERNAME","insert.username"); else _g330.h["USERNAME"] = "insert.username";
		value329 = _g330;
		if(__map_reserved.auto_functions != null) _g320.setReserved("auto_functions",value329); else _g320.h["auto_functions"] = value329;
		var value330;
		var _g331 = new haxe.ds.StringMap();
		var value331;
		var _g332 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g332.setReserved("field","userName"); else _g332.h["field"] = "userName";
		if(__map_reserved["class"] != null) _g332.setReserved("class","saturn.core.User"); else _g332.h["class"] = "saturn.core.User";
		if(__map_reserved.fk_field != null) _g332.setReserved("fk_field","username"); else _g332.h["fk_field"] = "username";
		value331 = _g332;
		_g331.set("user",value331);
		value330 = _g331;
		if(__map_reserved["fields.synthetic"] != null) _g320.setReserved("fields.synthetic",value330); else _g320.h["fields.synthetic"] = value330;
		value319 = _g320;
		if(__map_reserved["saturn.core.domain.SaturnSession"] != null) _g.setReserved("saturn.core.domain.SaturnSession",value319); else _g.h["saturn.core.domain.SaturnSession"] = value319;
		var value332;
		var _g333 = new haxe.ds.StringMap();
		var value333;
		var _g334 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g334.setReserved("id","PKEY"); else _g334.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g334.setReserved("name","NAME"); else _g334.h["name"] = "NAME";
		if(__map_reserved.traceDataJson != null) _g334.setReserved("traceDataJson","TRACE_JSON"); else _g334.h["traceDataJson"] = "TRACE_JSON";
		value333 = _g334;
		if(__map_reserved.fields != null) _g333.setReserved("fields",value333); else _g333.h["fields"] = value333;
		var value334;
		var _g335 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g335.setReserved("name",false); else _g335.h["name"] = false;
		if(__map_reserved.id != null) _g335.setReserved("id",true); else _g335.h["id"] = true;
		value334 = _g335;
		if(__map_reserved.indexes != null) _g333.setReserved("indexes",value334); else _g333.h["indexes"] = value334;
		var value335;
		var _g336 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.ABITraceViewer"] != null) _g336.setReserved("saturn.client.programs.ABITraceViewer",true); else _g336.h["saturn.client.programs.ABITraceViewer"] = true;
		value335 = _g336;
		if(__map_reserved.programs != null) _g333.setReserved("programs",value335); else _g333.h["programs"] = value335;
		var value336;
		var _g337 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g337.setReserved("alias","Trace Data"); else _g337.h["alias"] = "Trace Data";
		if(__map_reserved.icon != null) _g337.setReserved("icon","dna_conical_16.png"); else _g337.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.workspace_wrapper != null) _g337.setReserved("workspace_wrapper","saturn.client.workspace.ABITraceWO"); else _g337.h["workspace_wrapper"] = "saturn.client.workspace.ABITraceWO";
		value336 = _g337;
		if(__map_reserved.options != null) _g333.setReserved("options",value336); else _g333.h["options"] = value336;
		var value337;
		var _g338 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g338.setReserved("schema","SGC"); else _g338.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g338.setReserved("name","TRACES"); else _g338.h["name"] = "TRACES";
		value337 = _g338;
		if(__map_reserved.table_info != null) _g333.setReserved("table_info",value337); else _g333.h["table_info"] = value337;
		var value338;
		var _g339 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g339.setReserved("name",true); else _g339.h["name"] = true;
		value338 = _g339;
		if(__map_reserved.search != null) _g333.setReserved("search",value338); else _g333.h["search"] = value338;
		value332 = _g333;
		if(__map_reserved["saturn.core.domain.ABITrace"] != null) _g.setReserved("saturn.core.domain.ABITrace",value332); else _g.h["saturn.core.domain.ABITrace"] = value332;
		var value339;
		var _g340 = new haxe.ds.StringMap();
		var value340;
		var _g341 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g341.setReserved("id","PKEY"); else _g341.h["id"] = "PKEY";
		if(__map_reserved.name != null) _g341.setReserved("name","NAME"); else _g341.h["name"] = "NAME";
		if(__map_reserved.content != null) _g341.setReserved("content","CONTENT"); else _g341.h["content"] = "CONTENT";
		if(__map_reserved.url != null) _g341.setReserved("url","URL"); else _g341.h["url"] = "URL";
		value340 = _g341;
		if(__map_reserved.fields != null) _g340.setReserved("fields",value340); else _g340.h["fields"] = value340;
		var value341;
		var _g342 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g342.setReserved("name",false); else _g342.h["name"] = false;
		if(__map_reserved.id != null) _g342.setReserved("id",true); else _g342.h["id"] = true;
		value341 = _g342;
		if(__map_reserved.indexes != null) _g340.setReserved("indexes",value341); else _g340.h["indexes"] = value341;
		var value342;
		var _g343 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.AlignmentViewer"] != null) _g343.setReserved("saturn.client.programs.AlignmentViewer",true); else _g343.h["saturn.client.programs.AlignmentViewer"] = true;
		value342 = _g343;
		if(__map_reserved.programs != null) _g340.setReserved("programs",value342); else _g340.h["programs"] = value342;
		var value343;
		var _g344 = new haxe.ds.StringMap();
		if(__map_reserved.alias != null) _g344.setReserved("alias","Alignments"); else _g344.h["alias"] = "Alignments";
		if(__map_reserved.icon != null) _g344.setReserved("icon","dna_conical_16.png"); else _g344.h["icon"] = "dna_conical_16.png";
		if(__map_reserved.workspace_wrapper != null) _g344.setReserved("workspace_wrapper","saturn.client.workspace.AlignmentWorkspaceObject"); else _g344.h["workspace_wrapper"] = "saturn.client.workspace.AlignmentWorkspaceObject";
		value343 = _g344;
		if(__map_reserved.options != null) _g340.setReserved("options",value343); else _g340.h["options"] = value343;
		var value344;
		var _g345 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g345.setReserved("schema","SGC"); else _g345.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g345.setReserved("name","ALIGNMENTS"); else _g345.h["name"] = "ALIGNMENTS";
		value344 = _g345;
		if(__map_reserved.table_info != null) _g340.setReserved("table_info",value344); else _g340.h["table_info"] = value344;
		var value345;
		var _g346 = new haxe.ds.StringMap();
		if(__map_reserved.name != null) _g346.setReserved("name",true); else _g346.h["name"] = true;
		value345 = _g346;
		if(__map_reserved.search != null) _g340.setReserved("search",value345); else _g340.h["search"] = value345;
		value339 = _g340;
		if(__map_reserved["saturn.core.domain.Alignment"] != null) _g.setReserved("saturn.core.domain.Alignment",value339); else _g.h["saturn.core.domain.Alignment"] = value339;
		this.models = _g;
	}
	,__class__: saturn.db.mapping.SGC
};
saturn.db.mapping.SQLiteMapping = $hxClasses["saturn.db.mapping.SQLiteMapping"] = function() { };
saturn.db.mapping.SQLiteMapping.__name__ = ["saturn","db","mapping","SQLiteMapping"];
if(!saturn.db.provider) saturn.db.provider = {};
saturn.db.provider.GenericRDBMSProvider = $hxClasses["saturn.db.provider.GenericRDBMSProvider"] = function(models,config,autoClose) {
	this.modelsToProcess = 0;
	this.theConnection = null;
	this.debug = saturn.core.Util.debug;
	saturn.db.DefaultProvider.call(this,models,config,autoClose);
	this.config = config;
	this.user = new saturn.core.User();
	this.user.username = config.username;
	this.user.password = config.password;
	var $it0 = this.namedQueryHooks.keys();
	while( $it0.hasNext() ) {
		var hook = $it0.next();
		this.debug("Installed hook: " + hook + "/" + Std.string(this.namedQueryHooks.get(hook)));
	}
};
saturn.db.provider.GenericRDBMSProvider.__name__ = ["saturn","db","provider","GenericRDBMSProvider"];
saturn.db.provider.GenericRDBMSProvider.__super__ = saturn.db.DefaultProvider;
saturn.db.provider.GenericRDBMSProvider.prototype = $extend(saturn.db.DefaultProvider.prototype,{
	debug: null
	,theConnection: null
	,modelsToProcess: null
	,setPlatform: function() {
	}
	,setUser: function(user) {
		this.debug("User called");
		saturn.db.DefaultProvider.prototype.setUser.call(this,user);
	}
	,generatedLinkedClone: function() {
		var provider = saturn.db.DefaultProvider.prototype.generatedLinkedClone.call(this);
		provider.config = this.config;
		provider.debug = this.debug;
		provider.modelsToProcess = this.modelsToProcess;
		provider.theConnection = null;
		provider.user = this.user;
		return provider;
	}
	,readModels: function(cb) {
		var _g = this;
		var modelClazzes = [];
		var $it0 = this.theBindingMap.keys();
		while( $it0.hasNext() ) {
			var modelClazz = $it0.next();
			modelClazzes.push(modelClazz);
		}
		this.modelsToProcess = modelClazzes.length;
		this.getConnection(this.config,function(err,conn) {
			if(err != null) {
				_g.debug("Error getting connection for reading models");
				_g.debug(err);
				cb(err);
			} else {
				_g.debug("Querying database for model information");
				_g._readModels(modelClazzes,_g,conn,cb);
			}
		});
	}
	,_readModels: function(modelClazzes,provider,connection,cb) {
		var _g = this;
		var modelClazz = modelClazzes.pop();
		this.debug("Processing model: " + modelClazz);
		var model = provider.getModelByStringName(modelClazz);
		var captured_super = $bind(this,this.postConfigureModels);
		if(model.hasTableInfo()) {
			var keyCol = model.getFirstKey_rdbms();
			var priCol = model.getPrimaryKey_rdbms();
			var tableName = model.getTableName();
			var schemaName = model.getSchemaName();
			var qName = this.generateQualifiedName(schemaName,tableName);
			var func = function(err,cols) {
				if(err != null) cb(err); else {
					provider.setSelectClause(modelClazz,"SELECT DISTINCT " + cols.join(",") + " FROM " + qName);
					model.setInsertClause("INSERT INTO " + qName);
					model.setDeleteClause("DELETE FROM " + qName + "WHERE " + priCol + " = " + _g.dbSpecificParamPlaceholder(1));
					model.setUpdateClause("UPDATE " + qName);
					model.setSelectKeyClause("SELECT DISTINCT " + keyCol + ", " + priCol + " FROM " + qName + " ");
					model.setColumns(cols);
					_g.modelsToProcess--;
					_g.debug("Model processed: " + modelClazz);
					_g.debug(cols);
					if(_g.modelsToProcess == 0) {
						_g.postConfigureModels();
						_g.closeConnection(connection);
						if(cb != null) {
							_g.debug("All Models have been processed (handing back control to caller callback)");
							cb(null);
						}
					} else _g._readModels(modelClazzes,provider,connection,cb);
				}
			};
			this.getColumns(connection,schemaName,tableName,func);
		} else if(modelClazzes.length == 0 && this.modelsToProcess == 1) {
			this.postConfigureModels();
			this.closeConnection(connection);
			if(cb != null) {
				this.debug("All Models have been processed (handing back control to caller callback2)");
				cb(null);
			}
		} else {
			this.modelsToProcess--;
			this._readModels(modelClazzes,provider,connection,cb);
		}
	}
	,generateQualifiedName: function(schemaName,tableName) {
		return schemaName + "." + tableName;
	}
	,getColumns: function(connection,schemaName,tableName,cb) {
		connection.execute("select COLUMN_NAME from ALL_TAB_COLUMNS where OWNER=:1 AND TABLE_NAME=:2",[schemaName,tableName],function(err,results) {
			if(err == null) {
				var cols = [];
				var _g = 0;
				while(_g < results.length) {
					var row = results[_g];
					++_g;
					cols.push(Reflect.field(row,"COLUMN_NAME"));
				}
				cb(null,cols);
			} else cb(err,null);
		});
	}
	,_closeConnection: function() {
		this.debug("Closing connection!");
		if(this.theConnection != null) {
			this.theConnection.close();
			this.theConnection = null;
		}
	}
	,getConnection: function(config,cb) {
		var _g = this;
		if(!this.autoClose && this.theConnection != null) {
			this.debug("Using existing connection");
			cb(null,this.theConnection);
			return;
		}
		this._getConnection(function(err,conn) {
			_g.theConnection = conn;
			cb(err,conn);
		});
	}
	,_getConnection: function(cb) {
	}
	,_getByIds: function(ids,clazz,callBack) {
		var _g = this;
		if(clazz == saturn.core.domain.FileProxy) {
			this.handleFileRequests(ids,clazz,callBack);
			return;
		}
		var model = this.getModel(clazz);
		var selectClause = model.getSelectClause();
		var keyCol = model.getFirstKey_rdbms();
		var _g1 = 0;
		var _g2 = ids.length;
		while(_g1 < _g2) {
			var i = _g1++;
			ids[i] = ids[i].toUpperCase();
		}
		var selectorSQL = this.getSelectorFieldConstraintSQL(clazz);
		if(selectorSQL != "") selectorSQL = " AND " + selectorSQL;
		this.getConnection(this.config,function(err,connection) {
			if(err != null) callBack(null,err); else {
				var sql = selectClause + "  WHERE UPPER(" + _g.columnToStringCommand(keyCol) + ") " + _g.buildSqlInClause(ids.length,0,"upper") + " " + selectorSQL;
				var additionalSQL = _g.generateUserConstraintSQL(clazz);
				if(additionalSQL != null) sql += " AND " + additionalSQL;
				sql += " ORDER BY " + keyCol;
				_g.debug("SQL" + sql);
				try {
					connection.execute(sql,ids,function(err1,results) {
						if(err1 != null) callBack(null,err1); else {
							_g.debug("Sending results");
							callBack(results,null);
						}
						_g.closeConnection(connection);
					});
				} catch( e ) {
					if (e instanceof js._Boot.HaxeError) e = e.val;
					_g.closeConnection(connection);
					saturn.core.Util.debug(e);
					callBack(null,e);
				}
			}
		});
	}
	,_getObjects: function(clazz,callBack) {
		var _g = this;
		var model = this.getModel(clazz);
		var selectClause = model.getSelectClause();
		var selectorSQL = this.getSelectorFieldConstraintSQL(clazz);
		if(selectorSQL != "") selectorSQL = " WHERE " + selectorSQL;
		this.getConnection(this.config,function(err,connection) {
			if(err != null) callBack(null,err); else {
				var sql = selectClause + " " + selectorSQL;
				var additionalSQL = _g.generateUserConstraintSQL(clazz);
				if(additionalSQL != null) sql += " AND " + additionalSQL;
				sql += " ORDER BY " + model.getFirstKey_rdbms();
				_g.debug(sql);
				try {
					connection.execute(sql,[],function(err1,results) {
						if(err1 != null) callBack(null,err1); else callBack(results,null);
						_g.closeConnection(connection);
					});
				} catch( e ) {
					if (e instanceof js._Boot.HaxeError) e = e.val;
					_g.closeConnection(connection);
					saturn.core.Util.debug(e);
					callBack(null,e);
				}
			}
		});
	}
	,_getByValues: function(values,clazz,field,callBack) {
		var _g = this;
		if(clazz == saturn.core.domain.FileProxy) {
			this.handleFileRequests(values,clazz,callBack);
			return;
		}
		var model = this.getModel(clazz);
		var selectClause = model.getSelectClause();
		var sqlField = model.getSqlColumn(field);
		var selectorSQL = this.getSelectorFieldConstraintSQL(clazz);
		if(selectorSQL != "") selectorSQL = " AND " + selectorSQL;
		this.getConnection(this.config,function(err,connection) {
			if(err != null) callBack(null,err); else {
				var sql = selectClause + "  WHERE " + sqlField + " " + _g.buildSqlInClause(values.length) + " " + selectorSQL;
				var additionalSQL = _g.generateUserConstraintSQL(clazz);
				if(additionalSQL != null) sql += " AND " + additionalSQL;
				sql += " ORDER BY " + sqlField;
				_g.debug(sql);
				_g.debug(values);
				try {
					connection.execute(sql,values,function(err1,results) {
						if(err1 != null) callBack(null,err1); else {
							_g.debug("Result count: " + Std.string(results) + " " + Std.string(values));
							callBack(results,null);
						}
						_g.closeConnection(connection);
					});
				} catch( e ) {
					if (e instanceof js._Boot.HaxeError) e = e.val;
					_g.closeConnection(connection);
					saturn.core.Util.debug(e);
					callBack(null,e);
				}
			}
		});
	}
	,getSelectorFieldConstraintSQL: function(clazz) {
		var model = this.getModel(clazz);
		var selectorField = model.getSelectorField();
		if(selectorField != null) {
			var selectorValue = model.getSelectorValue();
			return selectorField + " = \"" + selectorValue + "\"";
		} else return "";
	}
	,buildSqlInClause: function(numIds,nextVal,func) {
		if(nextVal == null) nextVal = 0;
		var inClause_b = "";
		inClause_b += "IN(";
		var _g = 0;
		while(_g < numIds) {
			var i = _g++;
			var def = this.dbSpecificParamPlaceholder(i + 1 + nextVal);
			if(func != null) def = func + "(" + def + ")";
			if(def == null) inClause_b += "null"; else inClause_b += "" + def;
			if(i != numIds - 1) inClause_b += ",";
		}
		inClause_b += ")";
		return inClause_b;
	}
	,_getByPkeys: function(ids,clazz,callBack) {
		var _g = this;
		if(clazz == saturn.core.domain.FileProxy) {
			this.handleFileRequests(ids,clazz,callBack);
			return;
		}
		var model = this.getModel(clazz);
		var selectClause = model.getSelectClause();
		var keyCol = model.getPrimaryKey_rdbms();
		var selectorSQL = this.getSelectorFieldConstraintSQL(clazz);
		if(selectorSQL != "") selectorSQL = " AND " + selectorSQL;
		this.getConnection(this.config,function(err,connection) {
			if(err != null) callBack(null,err); else {
				var sql = selectClause + "  WHERE " + keyCol + " " + _g.buildSqlInClause(ids.length) + selectorSQL;
				var additionalSQL = _g.generateUserConstraintSQL(clazz);
				if(additionalSQL != null) sql += " AND " + additionalSQL;
				sql += " " + " ORDER BY " + keyCol;
				_g.debug(sql);
				try {
					connection.execute(sql,ids,function(err1,results) {
						if(err1 != null) callBack(null,err1); else callBack(results,null);
						_g.closeConnection(connection);
					});
				} catch( e ) {
					if (e instanceof js._Boot.HaxeError) e = e.val;
					_g.closeConnection(connection);
					callBack(null,e);
				}
			}
		});
	}
	,_query: function(query,cb) {
		var _g = this;
		this.getConnection(this.config,function(err,connection) {
			if(err != null) cb(null,err); else try {
				var visitor = new saturn.db.query_lang.SQLVisitor(_g);
				var sql = visitor.translate(query);
				_g.debug(sql);
				_g.debug(visitor.getValues());
				connection.execute(sql,visitor.getValues(),function(err1,results) {
					if(err1 != null) cb(null,err1); else {
						results = visitor.getProcessedResults(results);
						cb(results,null);
					}
					_g.closeConnection(connection);
				});
			} catch( e ) {
				if (e instanceof js._Boot.HaxeError) e = e.val;
				_g.closeConnection(connection);
				_g.debug("Error !!!!!!!!!!!!!" + Std.string(e.stack));
				cb(null,e);
			}
		});
	}
	,_getByIdStartsWith: function(id,field,clazz,limit,callBack) {
		var _g = this;
		var model = this.getModel(clazz);
		this.debug("Provider class" + Type.getClassName(js.Boot.getClass(this)));
		this.debug("Provider: " + model.getProviderName());
		var keyCol = null;
		if(field == null) keyCol = model.getFirstKey_rdbms(); else if(model.isRDBMSField(field)) keyCol = field;
		var busKey = model.getFirstKey_rdbms();
		var priCol = model.getPrimaryKey_rdbms();
		var tableName = model.getTableName();
		var schemaName = model.getSchemaName();
		var qName = this.generateQualifiedName(schemaName,tableName);
		var selectClause = "SELECT DISTINCT " + busKey + ", " + priCol;
		if(keyCol != busKey && keyCol != priCol) selectClause += ", " + keyCol;
		selectClause += " FROM " + qName;
		id = id.toUpperCase();
		var selectorSQL = this.getSelectorFieldConstraintSQL(clazz);
		if(selectorSQL != "") selectorSQL = " AND " + selectorSQL;
		if(!this.limitAtEndPosition()) {
			if(limit != null && limit != 0 && limit != -1) selectorSQL += this.generateLimitClause(limit);
		}
		this.getConnection(this.config,function(err,connection) {
			if(err != null) callBack(null,err); else {
				var sql = selectClause + "  WHERE UPPER(" + _g.columnToStringCommand(keyCol) + ") like " + _g.dbSpecificParamPlaceholder(1) + " " + selectorSQL;
				var additionalSQL = _g.generateUserConstraintSQL(clazz);
				if(additionalSQL != null) sql += " AND " + additionalSQL;
				sql += " ORDER BY " + keyCol;
				if(_g.limitAtEndPosition()) {
					if(limit != null && limit != 0 && limit != -1) sql += _g.generateLimitClause(limit);
				}
				id = "%" + id + "%";
				_g.debug("startswith" + sql);
				try {
					connection.execute(sql,[id],function(err1,results) {
						if(err1 != null) callBack(null,err1); else callBack(results,null);
						_g.closeConnection(connection);
					});
				} catch( e ) {
					if (e instanceof js._Boot.HaxeError) e = e.val;
					saturn.core.Util.debug(e);
					_g.closeConnection(connection);
					callBack(null,e);
				}
			}
		});
	}
	,limitAtEndPosition: function() {
		return false;
	}
	,generateLimitClause: function(limit) {
		return " AND ROWNUM < " + (limit | 0);
	}
	,columnToStringCommand: function(columnName) {
		return columnName;
	}
	,convertComplexQuery: function(parameters) {
	}
	,_getByNamedQuery: function(queryId,parameters,clazz,cb) {
		var _g = this;
		if(!Object.prototype.hasOwnProperty.call(this.config.named_queries,queryId)) cb(null,"Query " + queryId + " not found "); else {
			var sql = Reflect.field(this.config.named_queries,queryId);
			var realParameters = [];
			if((parameters instanceof Array) && parameters.__enum__ == null) {
				this.debug("Named query passed an Array");
				var re = new EReg("(<IN>)","");
				if(re.match(sql)) sql = re.replace(sql,this.buildSqlInClause(parameters.length));
				realParameters = parameters;
			} else {
				this.debug("Named query with other object type");
				var dbPlaceHolderI = 0;
				var attributes = Reflect.fields(parameters);
				if(attributes.length == 0) {
					cb(null,"Unknown parameter collection type");
					return;
				} else {
					this.debug("Named query passed object");
					var re_in = new EReg("^IN:","");
					var re1 = new EReg("<:([^>]+)>","");
					var convertedSQL = "";
					var matchMe = sql;
					while(matchMe != null) {
						this.debug("Looping: " + matchMe);
						this.debug("SQL: " + convertedSQL);
						if(re1.matchSub(matchMe,0)) {
							var matchLeft = re1.matchedLeft();
							var tagName = re1.matched(1);
							this.debug("MatchLeft: " + matchLeft);
							this.debug("Tag:" + tagName);
							convertedSQL += matchLeft;
							if(re_in.matchSub(tagName,0)) {
								this.debug("Found IN");
								tagName = re_in.replace(tagName,"");
								this.debug("Real Tag Name" + tagName);
								if(Object.prototype.hasOwnProperty.call(parameters,tagName)) {
									this.debug("Found array");
									var paramArray = Reflect.field(parameters,tagName);
									if((paramArray instanceof Array) && paramArray.__enum__ == null) {
										convertedSQL += this.buildSqlInClause(paramArray.length);
										var _g1 = 0;
										var _g2 = paramArray.length;
										while(_g1 < _g2) {
											var i = _g1++;
											realParameters.push(paramArray[i]);
										}
									} else {
										cb(null,"Value to attribute " + tagName + " should be an Array");
										return;
									}
								} else {
									cb(null,"Missing attribute " + tagName);
									return;
								}
							} else {
								this.debug("Found non IN argument");
								if(Object.prototype.hasOwnProperty.call(parameters,tagName)) {
									convertedSQL += this.dbSpecificParamPlaceholder(dbPlaceHolderI++);
									var value = Reflect.field(parameters,tagName);
									realParameters.push(value);
								} else {
									cb(null,"Missing attribute " + tagName);
									return;
								}
							}
							matchMe = re1.matchedRight();
							this.debug("Found right " + matchMe);
						} else {
							convertedSQL += matchMe;
							matchMe = null;
							this.debug("Terminating while");
						}
					}
					sql = convertedSQL;
				}
			}
			this.debug("SQL: " + sql);
			this.debug("Parameters: " + Std.string(realParameters));
			this.getConnection(this.config,function(err,connection) {
				if(err != null) cb(null,err); else {
					_g.debug(sql);
					try {
						connection.execute(sql,realParameters,function(err1,results) {
							_g.debug("Named query returning");
							if(err1 != null) cb(null,err1); else cb(results,null);
							_g.closeConnection(connection);
						});
					} catch( e ) {
						if (e instanceof js._Boot.HaxeError) e = e.val;
						_g.closeConnection(connection);
						cb(null,e);
					}
				}
			});
		}
	}
	,_update: function(attributeMaps,className,cb) {
		var _g = this;
		this.applyFunctions(attributeMaps,className);
		this.getConnection(this.config,function(err,connection) {
			if(err != null) cb(err); else {
				var clazz = Type.resolveClass(className);
				var model = _g.getModel(clazz);
				_g._updateRecursive(attributeMaps,model,cb,connection);
			}
		});
	}
	,_insert: function(attributeMaps,className,cb) {
		var _g = this;
		this.applyFunctions(attributeMaps,className);
		this.getConnection(this.config,function(err,connection) {
			if(err != null) cb(err); else {
				var clazz = Type.resolveClass(className);
				var model = _g.getModel(clazz);
				_g._insertRecursive(attributeMaps,model,cb,connection);
			}
		});
	}
	,cloneConfig: function() {
		var cloneData = haxe.Serializer.run(this.config);
		var unserObj = haxe.Unserializer.run(cloneData);
		return unserObj;
	}
	,_insertRecursive: function(attributeMaps,model,cb,connection) {
		var _g = this;
		this.debug("Inserting  " + Type.getClassName(model.getClass()));
		var insertClause = model.getInsertClause();
		var cols = model.getColumnSet();
		var attributeMap = attributeMaps.pop();
		var colStr = new StringBuf();
		var valList = [];
		var valStr = new StringBuf();
		var i = 0;
		var hasWork = false;
		var $it0 = attributeMap.keys();
		while( $it0.hasNext() ) {
			var attribute = $it0.next();
			if(cols != null && (__map_reserved[attribute] != null?cols.existsReserved(attribute):cols.h.hasOwnProperty(attribute))) {
				if(i > 0) {
					colStr.b += ",";
					valStr.b += ",";
				}
				i++;
				if(attribute == null) colStr.b += "null"; else colStr.b += "" + attribute;
				valStr.add(this.dbSpecificParamPlaceholder(i));
				var val;
				val = __map_reserved[attribute] != null?attributeMap.getReserved(attribute):attributeMap.h[attribute];
				if(val == "" && !((val | 0) === val)) val = null;
				valList.push(val);
				hasWork = true;
			}
		}
		if(model.isPolymorph()) {
			i++;
			colStr.add("," + model.getSelectorField());
			valStr.add("," + this.dbSpecificParamPlaceholder(i));
			valList.push(model.getSelectorValue());
			hasWork = true;
		}
		if(!hasWork) {
			this.debug("No work - returning error");
			cb("Insert failure: no mapped fields for " + Type.getClassName(model.getClass()));
			return;
		}
		var sql = insertClause + " (" + Std.string(colStr) + ") VALUES(" + Std.string(valStr) + ")";
		var keyCol = model.getFirstKey_rdbms();
		var keyVal;
		keyVal = __map_reserved[keyCol] != null?attributeMap.getReserved(keyCol):attributeMap.h[keyCol];
		this.debug("MAP:" + attributeMap.toString());
		this.debug("SQL" + sql);
		this.debug("Values" + Std.string(valList));
		try {
			connection.execute(sql,valList,function(err,results) {
				if(err != null) {
					var error = { message : StringTools.replace(err == null?"null":"" + err,"\n",""), source : keyVal};
					cb(error);
					_g.closeConnection(connection);
				} else if(attributeMaps.length == 0) {
					cb(null);
					_g.closeConnection(connection);
				} else _g._insertRecursive(attributeMaps,model,cb,connection);
			});
		} catch( e ) {
			if (e instanceof js._Boot.HaxeError) e = e.val;
			this.closeConnection(connection);
			var error1 = { message : StringTools.replace(Std.string(e),"\n",""), source : keyVal};
			cb(error1);
		}
	}
	,_updateRecursive: function(attributeMaps,model,cb,connection) {
		var _g = this;
		var updateClause = model.getUpdateClause();
		var cols = model.getColumnSet();
		var attributeMap = attributeMaps.pop();
		var valList = [];
		var updateStr = new StringBuf();
		var i = 0;
		var $it0 = attributeMap.keys();
		while( $it0.hasNext() ) {
			var attribute = $it0.next();
			if((__map_reserved[attribute] != null?cols.existsReserved(attribute):cols.h.hasOwnProperty(attribute)) && attribute != model.getPrimaryKey_rdbms()) {
				if(attribute == "DATESTAMP") continue;
				if(i > 0) updateStr.b += ",";
				i++;
				updateStr.add(attribute + " = " + this.dbSpecificParamPlaceholder(i));
				var val;
				val = __map_reserved[attribute] != null?attributeMap.getReserved(attribute):attributeMap.h[attribute];
				if(val == "") val = null;
				valList.push(val);
			}
		}
		i++;
		var keyCol = model.getPrimaryKey_rdbms();
		var sql = updateClause + " SET " + Std.string(updateStr) + " WHERE " + keyCol + " = " + this.dbSpecificParamPlaceholder(i);
		var additionalSQL = this.generateUserConstraintSQL(model.getClass());
		if(additionalSQL != null) sql += " AND " + additionalSQL;
		valList.push(__map_reserved[keyCol] != null?attributeMap.getReserved(keyCol):attributeMap.h[keyCol]);
		this.debug("SQL" + sql);
		this.debug("Values" + Std.string(valList));
		try {
			connection.execute(sql,valList,function(err,results) {
				if(err != null) {
					saturn.core.Util.debug("Error: " + err);
					cb(err);
					_g.closeConnection(connection);
				} else if(attributeMaps.length == 0) {
					cb(null);
					_g.closeConnection(connection);
				} else _g._updateRecursive(attributeMaps,model,cb,connection);
			});
		} catch( e ) {
			if (e instanceof js._Boot.HaxeError) e = e.val;
			this.closeConnection(connection);
			cb(e);
		}
	}
	,_delete: function(attributeMaps,className,cb) {
		var _g = this;
		var model = this.getModelByStringName(className);
		var priField = model.getPrimaryKey();
		var priFieldSql = model.getPrimaryKey_rdbms();
		var pkeys = [];
		var _g1 = 0;
		while(_g1 < attributeMaps.length) {
			var attributeMap = attributeMaps[_g1];
			++_g1;
			pkeys.push(__map_reserved[priFieldSql] != null?attributeMap.getReserved(priFieldSql):attributeMap.h[priFieldSql]);
		}
		var d = attributeMaps;
		var sql = "DELETE FROM " + this.generateQualifiedName(model.getSchemaName(),model.getTableName()) + " WHERE " + priFieldSql + " " + this.buildSqlInClause(pkeys.length);
		var additionalSQL = this.generateUserConstraintSQL(model.getClass());
		if(additionalSQL != null) sql += " AND " + additionalSQL;
		this.getConnection(this.config,function(err,connection) {
			if(err != null) cb(err); else try {
				connection.execute(sql,pkeys,function(err1,results) {
					if(err1 != null) {
						saturn.core.Util.debug("Error: " + err1);
						cb(err1);
						_g.closeConnection(connection);
					} else cb(null);
				});
			} catch( e ) {
				if (e instanceof js._Boot.HaxeError) e = e.val;
				_g.closeConnection(connection);
				cb(e);
			}
		});
	}
	,postConfigureModels: function() {
		saturn.db.DefaultProvider.prototype.postConfigureModels.call(this);
	}
	,parseObjectList: function(data) {
		return null;
	}
	,dbSpecificParamPlaceholder: function(i) {
		return ":" + i;
	}
	,getProviderType: function() {
		return "ORACLE";
	}
	,applyFunctions: function(attributeMaps,className) {
		var context = this.user;
		var model = this.getModelByStringName(className);
		var functions = model.getAutoFunctions();
		if(functions != null) {
			var $it0 = functions.keys();
			while( $it0.hasNext() ) {
				var field = $it0.next();
				var functionString;
				functionString = __map_reserved[field] != null?functions.getReserved(field):functions.h[field];
				var func = null;
				if(functionString == "insert.username") func = $bind(this,this.setUserName); else continue;
				var _g = 0;
				while(_g < attributeMaps.length) {
					var attributeMap = attributeMaps[_g];
					++_g;
					if(__map_reserved[field] != null?attributeMap.existsReserved(field):attributeMap.h.hasOwnProperty(field)) {
						var value = Reflect.callMethod(this,func,[__map_reserved[field] != null?attributeMap.getReserved(field):attributeMap.h[field],context]);
						attributeMap.set(field,value);
					}
				}
			}
		}
		return attributeMaps;
	}
	,setUserName: function(value,context) {
		if(context != null && context.username != null) return context.username.toUpperCase(); else return value;
	}
	,handleFileRequests: function(values,clazz,callBack) {
	}
	,setConnection: function(conn) {
		this.theConnection = conn;
	}
	,_commit: function(cb) {
		this.getConnection(this.config,function(err,connection) {
			if(err != null) cb(err); else connection.commit(cb);
		});
	}
	,setAutoCommit: function(autoCommit,cb) {
		this.getConnection(this.config,function(err,conn) {
			if(err == null) {
				conn.setAutoCommit(autoCommit);
				cb(null);
			} else cb(err);
		});
	}
	,generateUserConstraintSQL: function(clazz) {
		var model = this.getModel(clazz);
		var publicConstraintField = model.getPublicConstraintField();
		var userConstraintField = model.getUserConstraintField();
		var sql = null;
		if(publicConstraintField != null) {
			var columnName = model.getSqlColumn(publicConstraintField);
			sql = " " + columnName + " = 'yes' ";
		}
		if(userConstraintField != null) {
			var inBlock = false;
			if(sql != null) {
				sql = "(" + sql + " OR ";
				inBlock = true;
			}
			var columnName1 = model.getSqlColumn(userConstraintField);
			sql = sql + columnName1 + " = '" + this.getUser().username.toUpperCase() + "'";
			if(inBlock) sql += " ) ";
		}
		return sql;
	}
	,__class__: saturn.db.provider.GenericRDBMSProvider
});
if(!saturn.db.provider.hooks) saturn.db.provider.hooks = {};
saturn.db.provider.hooks.ExternalJsonHook = $hxClasses["saturn.db.provider.hooks.ExternalJsonHook"] = function() { };
saturn.db.provider.hooks.ExternalJsonHook.__name__ = ["saturn","db","provider","hooks","ExternalJsonHook"];
saturn.db.provider.hooks.ExternalJsonHook.run = function(query,params,clazz,cb,hookConfig) {
	saturn.core.Util.debug("Running external command");
	if(hookConfig == null) {
		cb(null,"Hook configuration is missing");
		return;
	}
	var program = null;
	if(Object.prototype.hasOwnProperty.call(hookConfig,"program")) program = Reflect.field(hookConfig,"program"); else {
		cb(null,"Invalid configuration, program field missing");
		return;
	}
	var progArguments = [];
	if(Object.prototype.hasOwnProperty.call(hookConfig,"arguments")) {
		var localprogArguments = Reflect.field(hookConfig,"arguments");
		var _g = 0;
		while(_g < localprogArguments.length) {
			var arg = localprogArguments[_g];
			++_g;
			progArguments.push(arg);
		}
	}
	var config = params[0];
	saturn.core.Util.getNewExternalProcess(function(process) {
		process.getTemporaryFileName(function(inputJsonFileName) {
			process.getTemporaryFileName(function(outputJsonFileName) {
				progArguments.push(inputJsonFileName);
				progArguments.push(outputJsonFileName);
				var inputJson = JSON.stringify(config);
				process.writeFile(inputJsonFileName,inputJson,function(err) {
					if(err == "") {
						process.start(program,progArguments);
						process.waitForClose(function(state) {
							if(state == "") process.readFile(outputJsonFileName,function(contents) {
								if(contents != null) {
									var outputJson = JSON.parse(contents);
									cb(outputJson,null);
								} else cb(null,"Unable to read output JSON file");
							}); else cb(null,"An error has occurred ");
						});
					} else cb(null,err);
				});
			});
		});
	});
};
saturn.db.provider.hooks.RawSQLHook = $hxClasses["saturn.db.provider.hooks.RawSQLHook"] = function() { };
saturn.db.provider.hooks.RawSQLHook.__name__ = ["saturn","db","provider","hooks","RawSQLHook"];
saturn.db.provider.hooks.RawSQLHook.run = function(query,params,clazz,cb,hookConfig) {
	var sql = params[0];
	var args = params[1];
	saturn.core.Util.getProvider().getConnection(null,function(err,conn) {
		conn.execute(sql,args,function(err1,results) {
			cb(results,err1);
		});
	});
};
if(!saturn.db.query_lang) saturn.db.query_lang = {};
saturn.db.query_lang.Token = $hxClasses["saturn.db.query_lang.Token"] = function(tokens) {
	this.tokens = tokens;
	if(this.tokens != null) {
		var _g1 = 0;
		var _g = this.tokens.length;
		while(_g1 < _g) {
			var i = _g1++;
			var value = this.tokens[i];
			if(value != null) {
				if(!js.Boot.__instanceof(value,saturn.db.query_lang.Token)) this.tokens[i] = new saturn.db.query_lang.Value(value);
			}
		}
	}
};
saturn.db.query_lang.Token.__name__ = ["saturn","db","query_lang","Token"];
saturn.db.query_lang.Token.prototype = {
	tokens: null
	,name: null
	,'as': function(name) {
		this.name = name;
		return this;
	}
	,getTokens: function() {
		return this.tokens;
	}
	,setTokens: function(tokens) {
		this.tokens = tokens;
	}
	,addToken: function(token) {
		if(!js.Boot.__instanceof(token,saturn.db.query_lang.Token)) token = new saturn.db.query_lang.Value(saturn.db.query_lang.Token);
		if(this.tokens == null) this.tokens = [];
		this.tokens.push(token);
		return this;
	}
	,field: function(clazz,attributeName,clazzAlias) {
		var f = new saturn.db.query_lang.Field(clazz,attributeName,clazzAlias);
		this.add(f);
		return f;
	}
	,add: function(token) {
		if(js.Boot.__instanceof(token,saturn.db.query_lang.Operator)) {
			var n = new saturn.db.query_lang.Token();
			n.add(this);
			n.addToken(token);
			return n;
		} else return this.addToken(token);
	}
	,removeToken: function(token) {
		HxOverrides.remove(this.tokens,token);
	}
	,like: function(token) {
		var l = new saturn.db.query_lang.Like();
		if(token != null) l.add(token);
		return this.add(l);
	}
	,concat: function(token) {
		var c = new saturn.db.query_lang.Concat([this,token]);
		return c;
	}
	,substr: function(position,length) {
		return new saturn.db.query_lang.Substr(this,position,length);
	}
	,instr: function(substring,position,occurrence) {
		return new saturn.db.query_lang.Instr(this,substring,position,occurrence);
	}
	,max: function() {
		return new saturn.db.query_lang.Max(this);
	}
	,length: function() {
		return new saturn.db.query_lang.Length(this);
	}
	,plus: function(token) {
		var c = new saturn.db.query_lang.Plus(token);
		return this.add(c);
	}
	,minus: function(token) {
		var c = new saturn.db.query_lang.Minus(token);
		return this.add(c);
	}
	,getClassList: function() {
		var list = [];
		var tokens = this.getTokens();
		if(tokens != null && tokens.length > 0) {
			var _g = 0;
			while(_g < tokens.length) {
				var token = tokens[_g];
				++_g;
				if(js.Boot.__instanceof(token,saturn.db.query_lang.ClassToken)) {
					var cToken;
					cToken = js.Boot.__cast(token , saturn.db.query_lang.ClassToken);
					if(cToken.getClass() != null) list.push(cToken.getClass());
				} else {
					var list2 = token.getClassList();
					var _g1 = 0;
					while(_g1 < list2.length) {
						var item = list2[_g1];
						++_g1;
						list.push(item);
					}
				}
			}
		}
		return list;
	}
	,__class__: saturn.db.query_lang.Token
};
saturn.db.query_lang.Operator = $hxClasses["saturn.db.query_lang.Operator"] = function(token) {
	if(token != null) saturn.db.query_lang.Token.call(this,[token]); else saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.Operator.__name__ = ["saturn","db","query_lang","Operator"];
saturn.db.query_lang.Operator.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Operator.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.Operator
});
saturn.db.query_lang.And = $hxClasses["saturn.db.query_lang.And"] = function() {
	saturn.db.query_lang.Operator.call(this,null);
};
saturn.db.query_lang.And.__name__ = ["saturn","db","query_lang","And"];
saturn.db.query_lang.And.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.And.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.And
});
saturn.db.query_lang.Function = $hxClasses["saturn.db.query_lang.Function"] = function(tokens) {
	saturn.db.query_lang.Token.call(this,tokens);
};
saturn.db.query_lang.Function.__name__ = ["saturn","db","query_lang","Function"];
saturn.db.query_lang.Function.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Function.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.Function
});
saturn.db.query_lang.Cast = $hxClasses["saturn.db.query_lang.Cast"] = function(expression,type) {
	saturn.db.query_lang.Function.call(this,[expression,type]);
};
saturn.db.query_lang.Cast.__name__ = ["saturn","db","query_lang","Cast"];
saturn.db.query_lang.Cast.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Cast.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Cast
});
saturn.db.query_lang.ClassToken = $hxClasses["saturn.db.query_lang.ClassToken"] = function(clazz) {
	this.setClass(clazz);
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.ClassToken.__name__ = ["saturn","db","query_lang","ClassToken"];
saturn.db.query_lang.ClassToken.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.ClassToken.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	clazz: null
	,getClass: function() {
		return this.clazz;
	}
	,setClass: function(clazz) {
		if(js.Boot.__instanceof(clazz,Class)) {
			var c;
			c = js.Boot.__cast(clazz , Class);
			this.clazz = Type.getClassName(c);
		} else this.clazz = clazz;
	}
	,__class__: saturn.db.query_lang.ClassToken
});
saturn.db.query_lang.Concat = $hxClasses["saturn.db.query_lang.Concat"] = function(tokens) {
	saturn.db.query_lang.Function.call(this,tokens);
};
saturn.db.query_lang.Concat.__name__ = ["saturn","db","query_lang","Concat"];
saturn.db.query_lang.Concat.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Concat.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Concat
});
saturn.db.query_lang.ConcatOperator = $hxClasses["saturn.db.query_lang.ConcatOperator"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.ConcatOperator.__name__ = ["saturn","db","query_lang","ConcatOperator"];
saturn.db.query_lang.ConcatOperator.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.ConcatOperator.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.ConcatOperator
});
saturn.db.query_lang.Count = $hxClasses["saturn.db.query_lang.Count"] = function(token) {
	saturn.db.query_lang.Function.call(this,[token]);
};
saturn.db.query_lang.Count.__name__ = ["saturn","db","query_lang","Count"];
saturn.db.query_lang.Count.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Count.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Count
});
saturn.db.query_lang.EndBlock = $hxClasses["saturn.db.query_lang.EndBlock"] = function() {
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.EndBlock.__name__ = ["saturn","db","query_lang","EndBlock"];
saturn.db.query_lang.EndBlock.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.EndBlock.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.EndBlock
});
saturn.db.query_lang.Equals = $hxClasses["saturn.db.query_lang.Equals"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.Equals.__name__ = ["saturn","db","query_lang","Equals"];
saturn.db.query_lang.Equals.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.Equals.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.Equals
});
saturn.db.query_lang.Field = $hxClasses["saturn.db.query_lang.Field"] = function(clazz,attributeName,clazzAlias) {
	this.setClass(clazz);
	this.attributeName = attributeName;
	this.clazzAlias = clazzAlias;
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.Field.__name__ = ["saturn","db","query_lang","Field"];
saturn.db.query_lang.Field.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Field.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	clazz: null
	,clazzAlias: null
	,attributeName: null
	,getClass: function() {
		return this.clazz;
	}
	,setClass: function(clazz) {
		if(js.Boot.__instanceof(clazz,Class)) {
			var c;
			c = js.Boot.__cast(clazz , Class);
			this.clazz = Type.getClassName(c);
		} else this.clazz = clazz;
	}
	,getAttributeName: function() {
		return this.attributeName;
	}
	,setAttributeName: function(name) {
		this.attributeName = name;
	}
	,__class__: saturn.db.query_lang.Field
});
saturn.db.query_lang.From = $hxClasses["saturn.db.query_lang.From"] = function() {
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.From.__name__ = ["saturn","db","query_lang","From"];
saturn.db.query_lang.From.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.From.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.From
});
saturn.db.query_lang.GreaterThan = $hxClasses["saturn.db.query_lang.GreaterThan"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.GreaterThan.__name__ = ["saturn","db","query_lang","GreaterThan"];
saturn.db.query_lang.GreaterThan.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.GreaterThan.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.GreaterThan
});
saturn.db.query_lang.GreaterThanOrEqualTo = $hxClasses["saturn.db.query_lang.GreaterThanOrEqualTo"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.GreaterThanOrEqualTo.__name__ = ["saturn","db","query_lang","GreaterThanOrEqualTo"];
saturn.db.query_lang.GreaterThanOrEqualTo.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.GreaterThanOrEqualTo.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.GreaterThanOrEqualTo
});
saturn.db.query_lang.Group = $hxClasses["saturn.db.query_lang.Group"] = function() {
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.Group.__name__ = ["saturn","db","query_lang","Group"];
saturn.db.query_lang.Group.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Group.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.Group
});
saturn.db.query_lang.In = $hxClasses["saturn.db.query_lang.In"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.In.__name__ = ["saturn","db","query_lang","In"];
saturn.db.query_lang.In.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.In.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.In
});
saturn.db.query_lang.Instr = $hxClasses["saturn.db.query_lang.Instr"] = function(value,substring,position,occurrence) {
	if(position == null) position = new saturn.db.query_lang.Value(1);
	if(occurrence == null) occurrence = new saturn.db.query_lang.Value(1);
	saturn.db.query_lang.Function.call(this,[value,substring,position,occurrence]);
};
saturn.db.query_lang.Instr.__name__ = ["saturn","db","query_lang","Instr"];
saturn.db.query_lang.Instr.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Instr.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Instr
});
saturn.db.query_lang.IsNotNull = $hxClasses["saturn.db.query_lang.IsNotNull"] = function() {
	saturn.db.query_lang.Operator.call(this,null);
};
saturn.db.query_lang.IsNotNull.__name__ = ["saturn","db","query_lang","IsNotNull"];
saturn.db.query_lang.IsNotNull.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.IsNotNull.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.IsNotNull
});
saturn.db.query_lang.IsNull = $hxClasses["saturn.db.query_lang.IsNull"] = function() {
	this.empty = "NULL";
	saturn.db.query_lang.Operator.call(this,null);
};
saturn.db.query_lang.IsNull.__name__ = ["saturn","db","query_lang","IsNull"];
saturn.db.query_lang.IsNull.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.IsNull.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	empty: null
	,__class__: saturn.db.query_lang.IsNull
});
saturn.db.query_lang.Length = $hxClasses["saturn.db.query_lang.Length"] = function(value) {
	saturn.db.query_lang.Function.call(this,[value]);
};
saturn.db.query_lang.Length.__name__ = ["saturn","db","query_lang","Length"];
saturn.db.query_lang.Length.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Length.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Length
});
saturn.db.query_lang.LessThan = $hxClasses["saturn.db.query_lang.LessThan"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.LessThan.__name__ = ["saturn","db","query_lang","LessThan"];
saturn.db.query_lang.LessThan.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.LessThan.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.LessThan
});
saturn.db.query_lang.LessThanOrEqualTo = $hxClasses["saturn.db.query_lang.LessThanOrEqualTo"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.LessThanOrEqualTo.__name__ = ["saturn","db","query_lang","LessThanOrEqualTo"];
saturn.db.query_lang.LessThanOrEqualTo.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.LessThanOrEqualTo.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.LessThanOrEqualTo
});
saturn.db.query_lang.Like = $hxClasses["saturn.db.query_lang.Like"] = function() {
	saturn.db.query_lang.Operator.call(this,null);
};
saturn.db.query_lang.Like.__name__ = ["saturn","db","query_lang","Like"];
saturn.db.query_lang.Like.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.Like.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.Like
});
saturn.db.query_lang.Limit = $hxClasses["saturn.db.query_lang.Limit"] = function(limit) {
	saturn.db.query_lang.Token.call(this,[limit]);
};
saturn.db.query_lang.Limit.__name__ = ["saturn","db","query_lang","Limit"];
saturn.db.query_lang.Limit.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Limit.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.Limit
});
saturn.db.query_lang.Max = $hxClasses["saturn.db.query_lang.Max"] = function(value) {
	saturn.db.query_lang.Function.call(this,[value]);
};
saturn.db.query_lang.Max.__name__ = ["saturn","db","query_lang","Max"];
saturn.db.query_lang.Max.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Max.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Max
});
saturn.db.query_lang.Minus = $hxClasses["saturn.db.query_lang.Minus"] = function(value) {
	if(value == null) saturn.db.query_lang.Operator.call(this,null); else saturn.db.query_lang.Operator.call(this,value);
};
saturn.db.query_lang.Minus.__name__ = ["saturn","db","query_lang","Minus"];
saturn.db.query_lang.Minus.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.Minus.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.Minus
});
saturn.db.query_lang.NotEquals = $hxClasses["saturn.db.query_lang.NotEquals"] = function(token) {
	saturn.db.query_lang.Operator.call(this,token);
};
saturn.db.query_lang.NotEquals.__name__ = ["saturn","db","query_lang","NotEquals"];
saturn.db.query_lang.NotEquals.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.NotEquals.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.NotEquals
});
saturn.db.query_lang.Or = $hxClasses["saturn.db.query_lang.Or"] = function() {
	saturn.db.query_lang.Operator.call(this,null);
};
saturn.db.query_lang.Or.__name__ = ["saturn","db","query_lang","Or"];
saturn.db.query_lang.Or.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.Or.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.Or
});
saturn.db.query_lang.OrderBy = $hxClasses["saturn.db.query_lang.OrderBy"] = function() {
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.OrderBy.__name__ = ["saturn","db","query_lang","OrderBy"];
saturn.db.query_lang.OrderBy.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.OrderBy.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.OrderBy
});
saturn.db.query_lang.OrderByItem = $hxClasses["saturn.db.query_lang.OrderByItem"] = function(token,descending) {
	if(descending == null) descending = false;
	this.descending = false;
	this.descending = descending;
	saturn.db.query_lang.Token.call(this,[token]);
};
saturn.db.query_lang.OrderByItem.__name__ = ["saturn","db","query_lang","OrderByItem"];
saturn.db.query_lang.OrderByItem.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.OrderByItem.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	descending: null
	,__class__: saturn.db.query_lang.OrderByItem
});
saturn.db.query_lang.Plus = $hxClasses["saturn.db.query_lang.Plus"] = function(value) {
	if(value == null) saturn.db.query_lang.Operator.call(this,null); else saturn.db.query_lang.Operator.call(this,value);
};
saturn.db.query_lang.Plus.__name__ = ["saturn","db","query_lang","Plus"];
saturn.db.query_lang.Plus.__super__ = saturn.db.query_lang.Operator;
saturn.db.query_lang.Plus.prototype = $extend(saturn.db.query_lang.Operator.prototype,{
	__class__: saturn.db.query_lang.Plus
});
saturn.db.query_lang.Query = $hxClasses["saturn.db.query_lang.Query"] = function(provider) {
	saturn.db.query_lang.Token.call(this,null);
	this.provider = provider;
	this.selectToken = new saturn.db.query_lang.Select();
	this.whereToken = new saturn.db.query_lang.Where();
	this.fromToken = new saturn.db.query_lang.From();
	this.groupToken = new saturn.db.query_lang.Group();
	this.orderToken = new saturn.db.query_lang.OrderBy();
};
saturn.db.query_lang.Query.__name__ = ["saturn","db","query_lang","Query"];
saturn.db.query_lang.Query.deserialise = function(querySer) {
	var clone = haxe.Unserializer.run(querySer);
	saturn.db.query_lang.Query.deserialiseToken(clone);
	return clone;
};
saturn.db.query_lang.Query.deserialiseToken = function(token) {
	if(token == null) return;
	if(token.getTokens() != null) {
		var _g = 0;
		var _g1 = token.getTokens();
		while(_g < _g1.length) {
			var token1 = _g1[_g];
			++_g;
			saturn.db.query_lang.Query.deserialiseToken(token1);
		}
	}
	if(js.Boot.__instanceof(token,saturn.db.query_lang.Query)) {
		var qToken;
		qToken = js.Boot.__cast(token , saturn.db.query_lang.Query);
		qToken.provider = null;
	}
};
saturn.db.query_lang.Query.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Query.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	selectToken: null
	,fromToken: null
	,whereToken: null
	,groupToken: null
	,orderToken: null
	,provider: null
	,rawResults: null
	,pageOn: null
	,pageSize: null
	,lastPagedRowValue: null
	,setPageOnToken: function(t) {
		this.pageOn = t;
	}
	,getPageOnToken: function() {
		return this.pageOn;
	}
	,setLastPagedRowValue: function(t) {
		this.lastPagedRowValue = t;
	}
	,getLastPagedRowValue: function() {
		return this.lastPagedRowValue;
	}
	,setPageSize: function(t) {
		this.pageSize = t;
	}
	,getPageSize: function() {
		return this.pageSize;
	}
	,isPaging: function() {
		return this.pageOn != null && this.pageSize != null;
	}
	,configurePaging: function(pageOn,pageSize) {
		this.pageOn = pageOn;
		this.pageSize = pageSize;
	}
	,fetchRawResults: function() {
		this.rawResults = true;
	}
	,bindResults: function() {
		return !this.rawResults;
	}
	,getTokens: function() {
		var tokens = [];
		var checkTokens = [this.selectToken,this.whereToken];
		var _g = 0;
		while(_g < checkTokens.length) {
			var token = checkTokens[_g];
			++_g;
			this.addClassToken(token);
		}
		if(this.fromToken.getTokens() != null) {
			var seen = new haxe.ds.StringMap();
			var tokens1 = [];
			var _g1 = 0;
			var _g11 = this.fromToken.getTokens();
			while(_g1 < _g11.length) {
				var token1 = _g11[_g1];
				++_g1;
				if(js.Boot.__instanceof(token1,saturn.db.query_lang.ClassToken)) {
					var cToken;
					cToken = js.Boot.__cast(token1 , saturn.db.query_lang.ClassToken);
					if(cToken.getClass() != null) {
						var clazzName = cToken.getClass();
						if(!(__map_reserved[clazzName] != null?seen.existsReserved(clazzName):seen.h.hasOwnProperty(clazzName))) {
							tokens1.push(cToken);
							if(__map_reserved[clazzName] != null) seen.setReserved(clazzName,""); else seen.h[clazzName] = "";
						}
					} else tokens1.push(cToken);
				} else tokens1.push(token1);
			}
			this.fromToken.setTokens(tokens1);
			saturn.core.Util.print("Num targets" + this.fromToken.getTokens().length);
		}
		tokens.push(this.selectToken);
		tokens.push(this.fromToken);
		if(this.whereToken.getTokens() != null && this.whereToken.getTokens().length > 0) {
			tokens.push(this.whereToken);
			if(this.isPaging() && this.lastPagedRowValue != null) {
				tokens.push(new saturn.db.query_lang.And());
				tokens.push(this.pageOn);
				tokens.push(new saturn.db.query_lang.GreaterThan());
				tokens.push(this.lastPagedRowValue);
			}
		}
		if(this.groupToken.getTokens() != null && this.groupToken.getTokens().length > 0) tokens.push(this.groupToken);
		if(this.orderToken.getTokens() != null && this.orderToken.getTokens().length > 0) tokens.push(this.orderToken);
		if(this.isPaging()) {
			tokens.push(new saturn.db.query_lang.OrderBy());
			tokens.push(new saturn.db.query_lang.OrderByItem(this.pageOn));
			tokens.push(new saturn.db.query_lang.Limit(this.pageSize));
		}
		if(this.tokens != null && this.tokens.length > 0) {
			var _g2 = 0;
			var _g12 = this.tokens;
			while(_g2 < _g12.length) {
				var token2 = _g12[_g2];
				++_g2;
				tokens.push(token2);
			}
		}
		return tokens;
	}
	,or: function() {
		this.getWhere().addToken(new saturn.db.query_lang.Or());
	}
	,and: function() {
		this.getWhere().addToken(new saturn.db.query_lang.And());
	}
	,equals: function(clazz,field,value) {
		this.getWhere().addToken(new saturn.db.query_lang.Field(clazz,field));
		this.getWhere().addToken(new saturn.db.query_lang.Equals());
		this.getWhere().addToken(new saturn.db.query_lang.Value(value));
	}
	,select: function(clazz,field) {
		this.getSelect().addToken(new saturn.db.query_lang.Field(clazz,field));
	}
	,getSelect: function() {
		return this.selectToken;
	}
	,getFrom: function() {
		return this.fromToken;
	}
	,getWhere: function() {
		return this.whereToken;
	}
	,getGroup: function() {
		return this.groupToken;
	}
	,clone: function() {
		var str = this.serialise();
		return saturn.db.query_lang.Query.deserialise(str);
	}
	,serialise: function() {
		var keepMe = this.provider;
		this.provider = null;
		var newMe = haxe.Serializer.run(this);
		this.provider = keepMe;
		return newMe;
	}
	,__getstate__: function() {
		var state = Syntax.pythonCode("dict(self.__dict__)");
		Syntax.pythonCode("del state['provider']");
		return state;
	}
	,run: function(cb) {
		var _g = this;
		var clone = this.clone();
		clone.provider = null;
		clone.getTokens();
		this.provider.query(clone,function(objs,err) {
			if(err == null && objs.length > 0 && _g.isPaging()) {
				var fieldName = null;
				if(_g.pageOn.name != null) fieldName = _g.pageOn.name; else if(js.Boot.__instanceof(_g.pageOn,saturn.db.query_lang.Field)) {
					var fToken;
					fToken = js.Boot.__cast(_g.pageOn , saturn.db.query_lang.Field);
					fieldName = fToken.getAttributeName();
				}
				if(fieldName == null) err = "Unable to determine value of last paged row"; else _g.setLastPagedRowValue(new saturn.db.query_lang.Value(Reflect.field(objs[objs.length - 1],fieldName)));
			}
			cb(objs,err);
		});
	}
	,getSelectClassList: function() {
		var set = new haxe.ds.StringMap();
		var _g = 0;
		var _g1 = this.selectToken.getTokens();
		while(_g < _g1.length) {
			var token = _g1[_g];
			++_g;
			if(js.Boot.__instanceof(token,saturn.db.query_lang.Field)) {
				var cToken;
				cToken = js.Boot.__cast(token , saturn.db.query_lang.Field);
				var clazz = cToken.getClass();
				if(clazz != null) {
					if(__map_reserved[clazz] != null) set.setReserved(clazz,clazz); else set.h[clazz] = clazz;
				}
			}
		}
		var list = [];
		var $it0 = set.keys();
		while( $it0.hasNext() ) {
			var className = $it0.next();
			list.push(__map_reserved[className] != null?set.getReserved(className):set.h[className]);
		}
		return list;
	}
	,unbindFields: function(token) {
		if(token == null) return;
		if(js.Boot.__instanceof(token,saturn.db.query_lang.Field)) {
			var cToken;
			cToken = js.Boot.__cast(token , saturn.db.query_lang.Field);
			var clazz = cToken.getClass();
			var field = cToken.getAttributeName();
			var model = this.provider.getModelByStringName(clazz);
			if(model != null) {
				if(field != "*") {
					var unboundFieldName = model.unbindFieldName(field);
					cToken.setAttributeName(unboundFieldName);
				}
			}
		}
		if(token.getTokens() != null) {
			var _g = 0;
			var _g1 = token.getTokens();
			while(_g < _g1.length) {
				var token1 = _g1[_g];
				++_g;
				this.unbindFields(token1);
			}
		}
	}
	,addClassToken: function(token) {
		if(js.Boot.__instanceof(token,saturn.db.query_lang.Query) || token == null) return;
		if(js.Boot.__instanceof(token,saturn.db.query_lang.Field)) {
			var fToken;
			fToken = js.Boot.__cast(token , saturn.db.query_lang.Field);
			if(fToken.getClass() != null) {
				var cToken = new saturn.db.query_lang.ClassToken(fToken.getClass());
				if(fToken.clazzAlias != null) cToken.name = fToken.clazzAlias;
				this.fromToken.addToken(cToken);
			}
		}
		if(token.getTokens() != null) {
			var _g = 0;
			var _g1 = token.getTokens();
			while(_g < _g1.length) {
				var token1 = _g1[_g];
				++_g;
				this.addClassToken(token1);
			}
		}
	}
	,addExample: function(obj,fieldList) {
		var clazz = Type.getClass(obj);
		var model = this.provider.getModel(clazz);
		if(fieldList != null) {
			if(fieldList.length > 0) {
				var _g = 0;
				while(_g < fieldList.length) {
					var field = fieldList[_g];
					++_g;
					this.getSelect().addToken(new saturn.db.query_lang.Field(clazz,field));
				}
			}
		} else this.getSelect().addToken(new saturn.db.query_lang.Field(clazz,"*"));
		var fields = model.getFields();
		var hasPrevious = false;
		this.getWhere().addToken(new saturn.db.query_lang.StartBlock());
		var _g1 = 0;
		var _g2 = fields.length;
		while(_g1 < _g2) {
			var i = _g1++;
			var field1 = fields[i];
			var value = Reflect.field(obj,field1);
			if(value != null) {
				if(hasPrevious) this.getWhere().addToken(new saturn.db.query_lang.And());
				this.getWhere().addToken(new saturn.db.query_lang.Field(clazz,field1));
				this.getWhere().addToken(new saturn.db.query_lang.Equals());
				if(js.Boot.__instanceof(value,saturn.db.query_lang.IsNull)) {
					saturn.core.Util.print("Found NULL");
					this.getWhere().addToken(new saturn.db.query_lang.IsNull());
				} else if(js.Boot.__instanceof(value,saturn.db.query_lang.IsNotNull)) this.getWhere().addToken(new saturn.db.query_lang.IsNotNull()); else {
					saturn.core.Util.print("Found value" + Type.getClassName(value == null?null:js.Boot.getClass(value)));
					this.getWhere().addToken(new saturn.db.query_lang.Value(value));
				}
				hasPrevious = true;
			}
		}
		this.getWhere().addToken(new saturn.db.query_lang.EndBlock());
	}
	,__class__: saturn.db.query_lang.Query
});
saturn.db.query_lang.QueryTests = $hxClasses["saturn.db.query_lang.QueryTests"] = function() {
};
saturn.db.query_lang.QueryTests.__name__ = ["saturn","db","query_lang","QueryTests"];
saturn.db.query_lang.QueryTests.prototype = {
	test1: function() {
		var query = new saturn.db.query_lang.Query(saturn.core.Util.getProvider());
		query.getSelect().addToken(new saturn.db.query_lang.Field(saturn.core.domain.SgcAllele,"alleleId",null));
		var visitor = new saturn.db.query_lang.SQLVisitor(saturn.core.Util.getProvider());
		visitor.translate(query);
	}
	,__class__: saturn.db.query_lang.QueryTests
};
saturn.db.query_lang.QueryVisitor = $hxClasses["saturn.db.query_lang.QueryVisitor"] = function() { };
saturn.db.query_lang.QueryVisitor.__name__ = ["saturn","db","query_lang","QueryVisitor"];
saturn.db.query_lang.QueryVisitor.prototype = {
	translateQuery: null
	,__class__: saturn.db.query_lang.QueryVisitor
};
saturn.db.query_lang.RegexpLike = $hxClasses["saturn.db.query_lang.RegexpLike"] = function(field,expression) {
	saturn.db.query_lang.Function.call(this,[field,expression]);
};
saturn.db.query_lang.RegexpLike.__name__ = ["saturn","db","query_lang","RegexpLike"];
saturn.db.query_lang.RegexpLike.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.RegexpLike.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.RegexpLike
});
saturn.db.query_lang.SQLVisitor = $hxClasses["saturn.db.query_lang.SQLVisitor"] = function(provider,valPos,aliasToGenerated,nextAliasId) {
	if(nextAliasId == null) nextAliasId = 0;
	if(valPos == null) valPos = 1;
	this.provider = provider;
	this.values = [];
	this.valPos = valPos;
	if(aliasToGenerated == null) this.aliasToGenerated = new haxe.ds.StringMap(); else this.aliasToGenerated = aliasToGenerated;
	this.nextAliasId = nextAliasId;
};
saturn.db.query_lang.SQLVisitor.__name__ = ["saturn","db","query_lang","SQLVisitor"];
saturn.db.query_lang.SQLVisitor.prototype = {
	provider: null
	,values: null
	,valPos: null
	,nextAliasId: null
	,aliasToGenerated: null
	,generatedToAlias: null
	,generateId: function(alias,baseValue) {
		if(baseValue == null) baseValue = "ALIAS_";
		if(this.aliasToGenerated.exists(alias)) return this.aliasToGenerated.get(alias);
		this.nextAliasId++;
		var id = baseValue + this.nextAliasId;
		this.aliasToGenerated.set(alias,id);
		saturn.core.Util.debug("Mapping" + alias + " to  " + id);
		return id;
	}
	,getNextValuePosition: function() {
		return this.valPos;
	}
	,getNextAliasId: function() {
		return this.nextAliasId;
	}
	,getValues: function() {
		return this.values;
	}
	,translate: function(token) {
		var sqlTranslation = "";
		if(token == null) {
		} else if(js.Boot.__instanceof(token,saturn.db.query_lang.Query)) {
			var query;
			query = js.Boot.__cast(token , saturn.db.query_lang.Query);
			this.postProcess(query);
			var sqlQuery = "";
			var tokens = query.getTokens();
			var _g = 0;
			while(_g < tokens.length) {
				var token1 = tokens[_g];
				++_g;
				sqlTranslation += Std.string(this.translate(token1));
			}
		} else {
			var nestedTranslation = "";
			if(token.getTokens() != null) {
				var tokenTranslations = [];
				if(js.Boot.__instanceof(token,saturn.db.query_lang.Instr)) {
					if(this.provider.getProviderType() == "SQLITE" || this.provider.getProviderType() == "MYSQL") {
						token.tokens.pop();
						token.tokens.pop();
					}
				}
				var _g1 = 0;
				var _g11 = token.getTokens();
				while(_g1 < _g11.length) {
					var token2 = _g11[_g1];
					++_g1;
					if(js.Boot.__instanceof(token2,saturn.db.query_lang.Query)) {
						var subVisitor = new saturn.db.query_lang.SQLVisitor(this.provider,this.valPos,this.aliasToGenerated,this.nextAliasId);
						this.valPos = subVisitor.getNextValuePosition();
						this.nextAliasId = subVisitor.getNextAliasId();
						var generatedAlias = "";
						if(token2.name != null && token2.name != "") generatedAlias = this.generateId(token2.name);
						tokenTranslations.push("(" + Std.string(subVisitor.translate(token2)) + ") " + generatedAlias + " ");
						var _g2 = 0;
						var _g3 = subVisitor.getValues();
						while(_g2 < _g3.length) {
							var value = _g3[_g2];
							++_g2;
							this.values.push(value);
						}
					} else tokenTranslations.push(this.translate(token2));
				}
				var joinSep = " ";
				if(js.Boot.__instanceof(token,saturn.db.query_lang.Select) || js.Boot.__instanceof(token,saturn.db.query_lang.From) || js.Boot.__instanceof(token,saturn.db.query_lang.Function) || js.Boot.__instanceof(token,saturn.db.query_lang.Group) || js.Boot.__instanceof(token,saturn.db.query_lang.OrderBy)) joinSep = ",";
				nestedTranslation = tokenTranslations.join(joinSep);
			}
			if(js.Boot.__instanceof(token,saturn.db.query_lang.Value)) {
				var cToken;
				cToken = js.Boot.__cast(token , saturn.db.query_lang.Value);
				this.values.push(cToken.getValue());
				sqlTranslation += " " + this.getParameterNotation(this.valPos++) + " " + nestedTranslation + " ";
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.Function)) {
				if(js.Boot.__instanceof(token,saturn.db.query_lang.Trim)) {
					if(this.provider.getProviderType() == "SQLITE") sqlTranslation += "ltrim(" + nestedTranslation + ",'0'" + ")"; else sqlTranslation += "Trim( leading '0' from " + nestedTranslation + ")";
				} else {
					var funcName = "";
					if(js.Boot.__instanceof(token,saturn.db.query_lang.Max)) funcName = "MAX"; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Count)) funcName = "COUNT"; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Instr)) funcName = "INSTR"; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Substr)) funcName = "SUBSTR"; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Length)) funcName = "LENGTH"; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Concat)) funcName = "CONCAT";
					sqlTranslation += funcName + "( " + nestedTranslation + " )";
				}
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.Select)) sqlTranslation += " SELECT " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Field)) {
				var cToken1;
				cToken1 = js.Boot.__cast(token , saturn.db.query_lang.Field);
				var clazzName = cToken1.getClass();
				var fieldPrefix = null;
				var fieldName = null;
				if(cToken1.clazzAlias != null) fieldPrefix = this.generateId(cToken1.clazzAlias);
				if(clazzName != null) {
					var model = this.provider.getModelByStringName(clazzName);
					fieldName = model.getSqlColumn(cToken1.getAttributeName());
					if(fieldPrefix == null) {
						var tableName = model.getTableName();
						var schemaName = model.getSchemaName();
						fieldPrefix = this.provider.generateQualifiedName(schemaName,tableName);
					}
				} else fieldName = this.generateId(cToken1.attributeName);
				if(cToken1.getAttributeName() == "*") sqlTranslation += fieldPrefix + ".*"; else sqlTranslation += fieldPrefix + "." + fieldName;
				sqlTranslation += " " + nestedTranslation + " ";
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.Where)) sqlTranslation += " WHERE " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Group)) sqlTranslation += " GROUP BY " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.From)) sqlTranslation += " FROM " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.OrderBy)) sqlTranslation += " ORDER BY " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.OrderByItem)) {
				var oToken;
				oToken = js.Boot.__cast(token , saturn.db.query_lang.OrderByItem);
				var direction = "ASC";
				if(oToken.descending) direction = "DESC";
				sqlTranslation += nestedTranslation + " " + direction;
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.ClassToken)) {
				var cToken2;
				cToken2 = js.Boot.__cast(token , saturn.db.query_lang.ClassToken);
				var model1 = this.provider.getModelByStringName(cToken2.getClass());
				var tableName1 = model1.getTableName();
				var schemaName1 = model1.getSchemaName();
				var name = this.provider.generateQualifiedName(schemaName1,tableName1);
				sqlTranslation += " " + name + " ";
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.Operator)) {
				if(js.Boot.__instanceof(token,saturn.db.query_lang.And)) sqlTranslation += " AND " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Plus)) sqlTranslation += " + " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Minus)) sqlTranslation += " - " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Or)) sqlTranslation += " OR " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Equals)) sqlTranslation += " = " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.IsNull)) sqlTranslation += " IS NULL " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.IsNotNull)) sqlTranslation += " IS NOT NULL " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.GreaterThan)) sqlTranslation += " > " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.GreaterThanOrEqualTo)) sqlTranslation += " >= " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.LessThan)) sqlTranslation += " < " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.LessThanOrEqualTo)) sqlTranslation += " <= " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.In)) sqlTranslation += " IN " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Concat)) sqlTranslation += " || " + nestedTranslation; else if(js.Boot.__instanceof(token,saturn.db.query_lang.Like)) sqlTranslation += " LIKE " + nestedTranslation;
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.ValueList)) {
				var cToken3;
				cToken3 = js.Boot.__cast(token , saturn.db.query_lang.ValueList);
				var values = cToken3.getValues();
				var itemStrings = [];
				var _g12 = 0;
				var _g4 = values.length;
				while(_g12 < _g4) {
					var i = _g12++;
					itemStrings.push(this.getParameterNotation(this.valPos++));
					values.push(values[i]);
				}
				sqlTranslation += " ( " + itemStrings.join(",") + " ) ";
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.Limit)) {
				var cToken4;
				cToken4 = js.Boot.__cast(token , saturn.db.query_lang.Limit);
				sqlTranslation += this.getLimitClause(nestedTranslation);
			} else if(js.Boot.__instanceof(token,saturn.db.query_lang.StartBlock)) sqlTranslation += " ( "; else if(js.Boot.__instanceof(token,saturn.db.query_lang.EndBlock)) sqlTranslation += " ) "; else sqlTranslation += " " + nestedTranslation + " ";
		}
		if(token != null && token.name != null && !js.Boot.__instanceof(token,saturn.db.query_lang.Query)) {
			var generatedAlias1 = this.generateId(token.name);
			sqlTranslation += "  \"" + generatedAlias1 + "\"";
		}
		return sqlTranslation;
	}
	,getProcessedResults: function(results) {
		if(results.length > 0) {
			this.generatedToAlias = new haxe.ds.StringMap();
			var $it0 = this.aliasToGenerated.keys();
			while( $it0.hasNext() ) {
				var generated = $it0.next();
				var key = this.aliasToGenerated.get(generated);
				this.generatedToAlias.set(key,generated);
			}
			var fields = Reflect.fields(results[0]);
			var toRename = [];
			var _g = 0;
			while(_g < fields.length) {
				var field = fields[_g];
				++_g;
				if(this.generatedToAlias.exists(field)) toRename.push(field);
			}
			if(toRename.length > 0) {
				var _g1 = 0;
				while(_g1 < results.length) {
					var row = results[_g1];
					++_g1;
					var _g11 = 0;
					while(_g11 < toRename.length) {
						var field1 = toRename[_g11];
						++_g11;
						var val = Reflect.field(row,field1);
						Reflect.deleteField(row,field1);
						Reflect.setField(row,this.generatedToAlias.get(field1),val);
					}
				}
			}
		}
		return results;
	}
	,getParameterNotation: function(i) {
		if(this.provider.getProviderType() == "ORACLE") return ":" + i; else if(this.provider.getProviderType() == "MYSQL") return "?"; else if(this.provider.getProviderType() == "PGSQL") return "$" + i; else return "?";
	}
	,postProcess: function(query) {
		if(this.provider.getProviderType() == "ORACLE") {
			if(query.tokens != null && query.tokens.length > 0) {
				var _g = 0;
				var _g1 = query.tokens;
				while(_g < _g1.length) {
					var token = _g1[_g];
					++_g;
					if(js.Boot.__instanceof(token,saturn.db.query_lang.Limit)) {
						if(query.whereToken == null) query.whereToken = new saturn.db.query_lang.Where();
						var where = query.getWhere();
						where.add(token);
						HxOverrides.remove(query.tokens,token);
					}
				}
			}
		}
	}
	,getLimitClause: function(txt) {
		if(this.provider.getProviderType() == "ORACLE") return " ROWNUM < " + txt; else if(this.provider.getProviderType() == "MYSQL") return " limit " + txt; else if(this.provider.getProviderType() == "PGSQL") return " LIMIT " + txt; else return " limit " + txt;
	}
	,buildSqlInClause: function(numIds,nextVal,func) {
		if(nextVal == null) nextVal = 0;
		var inClause_b = "";
		inClause_b += "IN(";
		inClause_b += ")";
		return inClause_b;
	}
	,__class__: saturn.db.query_lang.SQLVisitor
};
saturn.db.query_lang.Select = $hxClasses["saturn.db.query_lang.Select"] = function() {
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.Select.__name__ = ["saturn","db","query_lang","Select"];
saturn.db.query_lang.Select.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Select.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.Select
});
saturn.db.query_lang.StartBlock = $hxClasses["saturn.db.query_lang.StartBlock"] = function() {
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.StartBlock.__name__ = ["saturn","db","query_lang","StartBlock"];
saturn.db.query_lang.StartBlock.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.StartBlock.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.StartBlock
});
saturn.db.query_lang.Substr = $hxClasses["saturn.db.query_lang.Substr"] = function(value,position,length) {
	saturn.db.query_lang.Function.call(this,[value,position,length]);
};
saturn.db.query_lang.Substr.__name__ = ["saturn","db","query_lang","Substr"];
saturn.db.query_lang.Substr.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Substr.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Substr
});
saturn.db.query_lang.Trim = $hxClasses["saturn.db.query_lang.Trim"] = function(value) {
	saturn.db.query_lang.Function.call(this,[value]);
};
saturn.db.query_lang.Trim.__name__ = ["saturn","db","query_lang","Trim"];
saturn.db.query_lang.Trim.__super__ = saturn.db.query_lang.Function;
saturn.db.query_lang.Trim.prototype = $extend(saturn.db.query_lang.Function.prototype,{
	__class__: saturn.db.query_lang.Trim
});
saturn.db.query_lang.Value = $hxClasses["saturn.db.query_lang.Value"] = function(value) {
	saturn.db.query_lang.Token.call(this,null);
	this.value = value;
};
saturn.db.query_lang.Value.__name__ = ["saturn","db","query_lang","Value"];
saturn.db.query_lang.Value.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Value.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	value: null
	,getValue: function() {
		return this.value;
	}
	,__class__: saturn.db.query_lang.Value
});
saturn.db.query_lang.ValueList = $hxClasses["saturn.db.query_lang.ValueList"] = function(values) {
	this.values = values;
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.ValueList.__name__ = ["saturn","db","query_lang","ValueList"];
saturn.db.query_lang.ValueList.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.ValueList.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	values: null
	,getValues: function() {
		return this.values;
	}
	,__class__: saturn.db.query_lang.ValueList
});
saturn.db.query_lang.Where = $hxClasses["saturn.db.query_lang.Where"] = function() {
	saturn.db.query_lang.Token.call(this,null);
};
saturn.db.query_lang.Where.__name__ = ["saturn","db","query_lang","Where"];
saturn.db.query_lang.Where.__super__ = saturn.db.query_lang.Token;
saturn.db.query_lang.Where.prototype = $extend(saturn.db.query_lang.Token.prototype,{
	__class__: saturn.db.query_lang.Where
});
saturn.util.CollectionUtils = $hxClasses["saturn.util.CollectionUtils"] = function() { };
saturn.util.CollectionUtils.__name__ = ["saturn","util","CollectionUtils"];
saturn.util.MathUtils = $hxClasses["saturn.util.MathUtils"] = function() { };
saturn.util.MathUtils.__name__ = ["saturn","util","MathUtils"];
saturn.util.MathUtils.logX = function(num,x) {
	return Math.log(num) / Math.log(x);
};
saturn.util.MathUtils.sigFigs = function(num,figs) {
	var places = Std["int"](Math.pow(10,figs));
	var forRound = num * places;
	var afterRound = Math.round(forRound);
	return afterRound / places;
};
saturn.util.StringUtils = $hxClasses["saturn.util.StringUtils"] = function() { };
saturn.util.StringUtils.__name__ = ["saturn","util","StringUtils"];
saturn.util.StringUtils.getRepeat = function(txt,count) {
	var stringBuf_b = "";
	var _g = 0;
	while(_g < count) {
		var i = _g++;
		if(txt == null) stringBuf_b += "null"; else stringBuf_b += "" + txt;
	}
	return stringBuf_b;
};
saturn.util.StringUtils.reverse = function(txt) {
	var cols = txt.split("");
	cols.reverse();
	return cols.join("");
};
saturn.util.StringUtils.__super__ = StringTools;
saturn.util.StringUtils.prototype = $extend(StringTools.prototype,{
	__class__: saturn.util.StringUtils
});
if(!saturn.workflow) saturn.workflow = {};
saturn.workflow.Chain = $hxClasses["saturn.workflow.Chain"] = function() {
	this.items = [];
	this.pos = 0;
	this.provider = saturn.core.Util.getProvider();
};
saturn.workflow.Chain.__name__ = ["saturn","workflow","Chain"];
saturn.workflow.Chain.prototype = {
	items: null
	,pos: null
	,provider: null
	,done: null
	,add: function(item,config) {
		this.items.push(new saturn.workflow.ChainUnit(item,config));
	}
	,next: function() {
		var _g = this;
		if(this.pos <= this.items.length - 1) {
			var unit = this.items[this.pos++];
			var handler = function(resp) {
				saturn.core.Util.debug("Workflow returning");
				var error = resp.getError();
				if(error != null) {
					_g.die(error);
					return;
				} else {
					unit.getConfig().setResponse(resp);
					_g.next();
				}
			};
			var config = unit.getConfig();
			if(this.pos > 1) config.setData(this.items[this.pos - 2].getConfig().getResponse());
			if(unit.isDirectMethod()) (unit.getDirectMethod())(config,handler); else {
				saturn.core.Util.debug("Workflow running unit: " + unit.getQName());
				this.provider.getByNamedQuery("saturn.workflow",[unit.getQName(),config],unit.getResponseClass(),true,function(objs,error1) {
					if(error1 != null) _g.die(error1); else handler(objs[0]);
				});
			}
		} else this.done(null);
	}
	,start: function(cb) {
		this.done = cb;
		this.next();
	}
	,die: function(error) {
		this.done(error);
	}
	,__class__: saturn.workflow.Chain
};
saturn.workflow.ChainUnit = $hxClasses["saturn.workflow.ChainUnit"] = function(item,config) {
	this.config = config;
	this.method = null;
	if(typeof(item) == "string") {
		var qName = item;
		var lastI = qName.lastIndexOf(".");
		this.qualifiedClassName = qName.substring(0,lastI);
		this.methodName = qName.substring(lastI + 1,qName.length);
		this.packageName = this.qualifiedClassName.substring(0,this.qualifiedClassName.lastIndexOf("."));
		var classShortName = this.qualifiedClassName.substring(this.qualifiedClassName.lastIndexOf(".") + 1,this.qualifiedClassName.length);
		this.qualifiedName = qName;
		this.responseClassName = this.packageName + "." + classShortName + "Response";
	} else this.method = item;
};
saturn.workflow.ChainUnit.__name__ = ["saturn","workflow","ChainUnit"];
saturn.workflow.ChainUnit.prototype = {
	qualifiedName: null
	,packageName: null
	,qualifiedClassName: null
	,methodName: null
	,responseClassName: null
	,config: null
	,method: null
	,isDirectMethod: function() {
		return this.method != null;
	}
	,getDirectMethod: function() {
		return this.method;
	}
	,setConfig: function(config) {
		this.config = config;
	}
	,getQName: function() {
		return this.qualifiedName;
	}
	,getMethodName: function() {
		return this.methodName;
	}
	,getClassName: function() {
		return this.qualifiedClassName;
	}
	,getResponseClass: function() {
		return Type.resolveClass(this.responseClassName);
	}
	,getConfig: function() {
		return this.config;
	}
	,__class__: saturn.workflow.ChainUnit
};
saturn.workflow.DBtoFASTA = $hxClasses["saturn.workflow.DBtoFASTA"] = function(config,cb) {
	this.config = config;
	this.cb = cb;
	this.response = new saturn.workflow.DBtoFASTAResponse(null);
};
saturn.workflow.DBtoFASTA.__name__ = ["saturn","workflow","DBtoFASTA"];
saturn.workflow.DBtoFASTA.query = function(config,cb) {
	var runner = new saturn.workflow.DBtoFASTA(config,cb);
	runner.run();
};
saturn.workflow.DBtoFASTA.prototype = {
	config: null
	,cb: null
	,response: null
	,run: function() {
		var _g = this;
		var p = saturn.client.core.CommonCore.getDefaultProvider();
		saturn.core.Util.debug("Fetching sequences for " + this.config.getDatabaseName());
		p.getByNamedQuery("FETCH_PROTEINS",[this.config.getDatabaseName()],saturn.core.domain.Molecule,false,function(objs,error) {
			saturn.core.Util.debug("Objects fetched " + objs.length);
			if(error != null) {
				_g.response.setError(error);
				_g.done();
			} else saturn.core.Util.opentemp("sequences_",function(error1,fd,path) {
				if(error1 != null) {
					_g.response.setError(error1);
					_g.done();
				} else {
					saturn.core.Util.debug(path);
					var added = 10;
					var limit = _g.config.getLimit();
					var _g1 = 0;
					while(_g1 < objs.length) {
						var obj = objs[_g1];
						++_g1;
						if(obj.sequence != null) {
							fd.write(">" + obj.name + "\n" + obj.sequence + "\n");
							if(limit != -1 && limit == added) {
								saturn.core.Util.debug("Breaking");
								break;
							} else added++;
						}
					}
					fd.end(function(error2) {
						if(error2 != null) {
							_g.response.setError(error2);
							_g.done();
						} else {
							_g.response.setFastaFilePath(path);
							_g.done();
						}
					});
				}
			});
		});
	}
	,done: function() {
		saturn.core.Util.debug("Workflow item finished");
		this.cb(this.response);
	}
	,__class__: saturn.workflow.DBtoFASTA
};
saturn.workflow.Object = $hxClasses["saturn.workflow.Object"] = function() {
	this.remote = false;
};
saturn.workflow.Object.__name__ = ["saturn","workflow","Object"];
saturn.workflow.Object.prototype = {
	error: null
	,data: null
	,response: null
	,remote: null
	,setRemote: function(remote) {
		this.remote = remote;
	}
	,isRemote: function() {
		return this.remote;
	}
	,getParameter: function(param) {
		var data = this.getData();
		if(data != null && Object.prototype.hasOwnProperty.call(data,param)) return Reflect.field(data,param); else if(Object.prototype.hasOwnProperty.call(this,param)) return Reflect.field(this,param); else return null;
	}
	,setError: function(error) {
		saturn.core.Util.debug(error);
		this.error = error;
	}
	,getError: function() {
		return this.error;
	}
	,setData: function(data) {
		this.data = data;
	}
	,getData: function() {
		return this.data;
	}
	,getResponse: function() {
		return this.response;
	}
	,setResponse: function(resp) {
		this.response = resp;
	}
	,setup: function(cb) {
	}
	,__class__: saturn.workflow.Object
};
saturn.workflow.DBtoFASTAConfig = $hxClasses["saturn.workflow.DBtoFASTAConfig"] = function(databaseName,type) {
	saturn.workflow.Object.call(this);
	this.databaseName = databaseName;
	this.type = type;
	this.limit = -1;
};
saturn.workflow.DBtoFASTAConfig.__name__ = ["saturn","workflow","DBtoFASTAConfig"];
saturn.workflow.DBtoFASTAConfig.__super__ = saturn.workflow.Object;
saturn.workflow.DBtoFASTAConfig.prototype = $extend(saturn.workflow.Object.prototype,{
	databaseName: null
	,type: null
	,limit: null
	,setLimit: function(limit) {
		this.limit = limit;
	}
	,getLimit: function() {
		return this.limit;
	}
	,getDatabaseName: function() {
		return this.databaseName;
	}
	,__class__: saturn.workflow.DBtoFASTAConfig
});
saturn.workflow.SequenceType = $hxClasses["saturn.workflow.SequenceType"] = { __ename__ : ["saturn","workflow","SequenceType"], __constructs__ : ["PROTEIN","DNA"] };
saturn.workflow.SequenceType.PROTEIN = ["PROTEIN",0];
saturn.workflow.SequenceType.PROTEIN.toString = $estr;
saturn.workflow.SequenceType.PROTEIN.__enum__ = saturn.workflow.SequenceType;
saturn.workflow.SequenceType.DNA = ["DNA",1];
saturn.workflow.SequenceType.DNA.toString = $estr;
saturn.workflow.SequenceType.DNA.__enum__ = saturn.workflow.SequenceType;
saturn.workflow.DBtoFASTAResponse = $hxClasses["saturn.workflow.DBtoFASTAResponse"] = function(fastaFilePath) {
	saturn.workflow.Object.call(this);
	this.fastaFilePath = fastaFilePath;
};
saturn.workflow.DBtoFASTAResponse.__name__ = ["saturn","workflow","DBtoFASTAResponse"];
saturn.workflow.DBtoFASTAResponse.__super__ = saturn.workflow.Object;
saturn.workflow.DBtoFASTAResponse.prototype = $extend(saturn.workflow.Object.prototype,{
	fastaFilePath: null
	,setFastaFilePath: function(path) {
		this.fastaFilePath = path;
	}
	,getFastaFilePath: function() {
		return this.fastaFilePath;
	}
	,__class__: saturn.workflow.DBtoFASTAResponse
});
saturn.workflow.Unit = $hxClasses["saturn.workflow.Unit"] = function(config,cb) {
	this.cb = cb;
	this.config = config;
};
saturn.workflow.Unit.__name__ = ["saturn","workflow","Unit"];
saturn.workflow.Unit.prototype = {
	response: null
	,config: null
	,cb: null
	,done: function() {
		saturn.core.Util.debug("Workflow item finished");
		this.cb(this.response);
	}
	,setup: function(cb) {
		if(this.config != null) this.config.setup(cb); else cb(null);
	}
	,run: function() {
		var _g = this;
		this.setup(function(err) {
			if(err != null) {
				_g.response.setError(err);
				_g.done();
			} else _g._run();
		});
	}
	,_run: function() {
	}
	,__class__: saturn.workflow.Unit
};
saturn.workflow.HMMer = $hxClasses["saturn.workflow.HMMer"] = function(config,cb) {
	this.hmmPath = "bin/deployed_bin/hmmer";
	saturn.workflow.Unit.call(this,config,cb);
	this.response = new saturn.workflow.HMMerResponse();
	this.hmmSearchPath = this.hmmPath + "/hmmsearch";
};
saturn.workflow.HMMer.__name__ = ["saturn","workflow","HMMer"];
saturn.workflow.HMMer.query = function(config,cb) {
	saturn.core.Util.debug("HMMer query started");
	var runner = new saturn.workflow.HMMer(config,cb);
	runner.run();
};
saturn.workflow.HMMer.__super__ = saturn.workflow.Unit;
saturn.workflow.HMMer.prototype = $extend(saturn.workflow.Unit.prototype,{
	hmmPath: null
	,hmmSearchPath: null
	,getHMMPath: function() {
		return this.hmmPath;
	}
	,getHMMSearchPath: function() {
		return this.hmmSearchPath;
	}
	,_run: function() {
		if(this.config.getProgram() == saturn.workflow.HMMerProgram.HMMSEARCH) this.runHMMSearch(); else if(this.config.getProgram() == saturn.workflow.HMMerProgram.HMMUPLOAD) this.runUpload(); else saturn.core.Util.debug("Unknown program: " + Std.string(this.config.getProgram()));
	}
	,runHMMSearch: function() {
		var _g = this;
		saturn.core.Util.debug("Running HMMSearch");
		var fastaFile = this.config.getParameter("fastaFilePath");
		if(fastaFile != null) {
			var data = this.config.getData();
			saturn.core.Util.opentemp("hmm_table_",function(error,stream,path_table) {
				if(error != null) _g.response.setError(error); else saturn.core.Util.opentemp("hmm_raw_",function(error1,stream1,path_raw) {
					if(error1 != null) _g.response.setError(error1); else {
						var args = ["--domtblout",path_table,"--noali","-o",path_raw,_g.config.getParameter("hmmFilePath"),_g.config.getParameter("fastaFilePath")];
						saturn.core.Util.debug(args.join(","));
						saturn.core.Util.exec(_g.hmmSearchPath,args,function(code) {
							saturn.core.Util.debug("Hello World");
							if(code != 0) {
								saturn.core.Util.debug("Error");
								_g.response.setError("An error has occurred running HMMSearch");
								_g.done();
							} else if(_g.config.isRemote()) _g.done(); else {
								_g.response.setTableOutputPath(path_table);
								_g.response.setRawOutputPath(path_raw);
								_g.done();
							}
						});
					}
				});
			});
		} else {
			this.response.setError("fastaFilePath missing!");
			this.done();
		}
	}
	,runUpload: function() {
	}
	,__class__: saturn.workflow.HMMer
});
saturn.workflow.HMMerConfig = $hxClasses["saturn.workflow.HMMerConfig"] = function(program) {
	saturn.workflow.Object.call(this);
	this.program = program;
};
saturn.workflow.HMMerConfig.__name__ = ["saturn","workflow","HMMerConfig"];
saturn.workflow.HMMerConfig.__super__ = saturn.workflow.Object;
saturn.workflow.HMMerConfig.prototype = $extend(saturn.workflow.Object.prototype,{
	hmmFilePath: null
	,fastaFilePath: null
	,tableOutputPath: null
	,fastaContent: null
	,program: null
	,getProgram: function() {
		return this.program;
	}
	,setProgram: function(program) {
		this.program = program;
	}
	,setHMMPath: function(hmmFilePath) {
		this.hmmFilePath = hmmFilePath;
	}
	,setFastaFilePath: function(fastaFilePath) {
		this.fastaFilePath = fastaFilePath;
	}
	,setFastaContent: function(fastaContent) {
		this.fastaContent = fastaContent;
	}
	,setup: function(cb) {
		var _g = this;
		if(this.fastaFilePath == null && this.fastaContent != null) saturn.core.Util.opentemp("fasta_file_",function(error,stream,path) {
			if(error == null) stream.write(_g.fastaContent);
			_g.fastaFilePath = path;
			cb(error);
		});
	}
	,__class__: saturn.workflow.HMMerConfig
});
saturn.workflow.HMMerProgram = $hxClasses["saturn.workflow.HMMerProgram"] = { __ename__ : ["saturn","workflow","HMMerProgram"], __constructs__ : ["HMMSEARCH","HMMUPLOAD"] };
saturn.workflow.HMMerProgram.HMMSEARCH = ["HMMSEARCH",0];
saturn.workflow.HMMerProgram.HMMSEARCH.toString = $estr;
saturn.workflow.HMMerProgram.HMMSEARCH.__enum__ = saturn.workflow.HMMerProgram;
saturn.workflow.HMMerProgram.HMMUPLOAD = ["HMMUPLOAD",1];
saturn.workflow.HMMerProgram.HMMUPLOAD.toString = $estr;
saturn.workflow.HMMerProgram.HMMUPLOAD.__enum__ = saturn.workflow.HMMerProgram;
saturn.workflow.HMMerResponse = $hxClasses["saturn.workflow.HMMerResponse"] = function() {
	saturn.workflow.Object.call(this);
	this.tableOutputPath = "Test";
};
saturn.workflow.HMMerResponse.__name__ = ["saturn","workflow","HMMerResponse"];
saturn.workflow.HMMerResponse.__super__ = saturn.workflow.Object;
saturn.workflow.HMMerResponse.prototype = $extend(saturn.workflow.Object.prototype,{
	tableOutputPath: null
	,rawOutputPath: null
	,setTableOutputPath: function(path) {
		this.tableOutputPath = path;
	}
	,getTableOutputPath: function() {
		return this.tableOutputPath;
	}
	,setRawOutputPath: function(path) {
		this.rawOutputPath = path;
	}
	,getRawOutputPath: function() {
		return this.rawOutputPath;
	}
	,__class__: saturn.workflow.HMMerResponse
});
saturn.workflow.Pfam = $hxClasses["saturn.workflow.Pfam"] = function() {
};
saturn.workflow.Pfam.__name__ = ["saturn","workflow","Pfam"];
saturn.workflow.Pfam.prototype = {
	query: function() {
	}
	,__class__: saturn.workflow.Pfam
};
function $iterator(o) { if( o instanceof Array ) return function() { return HxOverrides.iter(o); }; return typeof(o.iterator) == 'function' ? $bind(o,o.iterator) : o.iterator; }
var $_, $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = function(){ return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; o.hx__closures__[m.__id__] = f; } return f; }
if(Array.prototype.indexOf) HxOverrides.indexOf = function(a,o,i) {
	return Array.prototype.indexOf.call(a,o,i);
};
$hxClasses.Math = Math;
String.prototype.__class__ = $hxClasses.String = String;
String.__name__ = ["String"];
$hxClasses.Array = Array;
Array.__name__ = ["Array"];
Date.prototype.__class__ = $hxClasses.Date = Date;
Date.__name__ = ["Date"];
var Int = $hxClasses.Int = { __name__ : ["Int"]};
var Dynamic = $hxClasses.Dynamic = { __name__ : ["Dynamic"]};
var Float = $hxClasses.Float = Number;
Float.__name__ = ["Float"];
var Bool = $hxClasses.Bool = Boolean;
Bool.__ename__ = ["Bool"];
var Class = $hxClasses.Class = { __name__ : ["Class"]};
var Enum = { };
var __map_reserved = {}
var q = window.jQuery;
var js = js || {}
js.JQuery = q;
var ArrayBuffer = $global.ArrayBuffer || js.html.compat.ArrayBuffer;
if(ArrayBuffer.prototype.slice == null) ArrayBuffer.prototype.slice = js.html.compat.ArrayBuffer.sliceImpl;
var DataView = $global.DataView || js.html.compat.DataView;
var Uint8Array = $global.Uint8Array || js.html.compat.Uint8Array._new;
haxe.Serializer.USE_CACHE = false;
haxe.Serializer.USE_ENUM_INDEX = false;
haxe.Serializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
haxe.Unserializer.DEFAULT_RESOLVER = Type;
haxe.Unserializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
haxe.Unserializer.CODES = null;
haxe.ds.ObjectMap.count = 0;
haxe.io.FPHelper.i64tmp = (function($this) {
	var $r;
	var x = new haxe._Int64.___Int64(0,0);
	$r = x;
	return $r;
}(this));
js.Boot.__toStr = {}.toString;
js.html.compat.Uint8Array.BYTES_PER_ELEMENT = 1;
phylo.PhyloNewickParser.newLineReg = new EReg("\n","g");
phylo.PhyloNewickParser.carLineReg = new EReg("\r","g");
phylo.PhyloNewickParser.whiteSpaceReg = new EReg("\\s","g");
saturn.client.WorkspaceApplication.layoutsSuspended = 0;
saturn.app.SaturnClient.reg_edit = new EReg("edit\\s+","");
saturn.app.SaturnClient.reg_wiki = new EReg("wiki-\\s+","");
saturn.client.ICMClient.reg_jsonStart = new EReg("\\\\?\"\\s*<JSON_START>","g");
saturn.client.ICMClient.reg_jsonStop = new EReg("<JSON_STOP>\\\\?\"","g");
saturn.client.core.CommonCore.pools = new haxe.ds.StringMap();
saturn.client.core.CommonCore.resourceToPool = new haxe.ds.ObjectMap();
saturn.client.core.CommonCore.providers = new haxe.ds.StringMap();
saturn.client.core.CommonCore.combinedModels = null;
saturn.client.core.CommonCore.annotationManager = new saturn.core.annotations.AnnotationManager();
saturn.client.workspace.ABITraceWO.FILE_IMPORT_FORMATS = ["ab1"];
saturn.client.programs.ABITraceViewer.CLASS_SUPPORT = [saturn.client.workspace.ABITraceWO];
saturn.client.workspace.AlignmentWorkspaceObject.FILE_IMPORT_FORMATS = ["aln","pfam_aln"];
saturn.client.programs.AlignmentViewer.CLASS_SUPPORT = [saturn.client.workspace.AlignmentWorkspaceObject];
saturn.client.programs.sequenceeditor.SequenceEditor.reg_newLine = new EReg("\n","g");
saturn.client.programs.sequenceeditor.SequenceEditor.reg_carReturn = new EReg("\r","g");
saturn.client.programs.sequenceeditor.SequenceEditor.reg_whiteSpace = new EReg("\\s","g");
saturn.client.programs.sequenceeditor.SequenceEditor.reg_star = new EReg("\\*","g");
saturn.client.programs.sequenceeditor.SequenceEditor.reg_num = new EReg("[0-9]","g");
saturn.client.workspace.DNAWorkspaceObject.FILE_IMPORT_FORMATS = ["fasta"];
saturn.client.workspace.PrimerWorkspaceObject.FILE_IMPORT_FORMATS = [];
saturn.client.programs.DNASequenceEditor.CLASS_SUPPORT = [saturn.client.workspace.DNAWorkspaceObject,saturn.client.workspace.PrimerWorkspaceObject];
saturn.client.programs.DNASequenceEditor.reg_replaceStar = new EReg("\\*","");
saturn.client.workspace.PCRProductWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.PCRProductViewer.CLASS_SUPPORT = [saturn.client.workspace.PCRProductWO];
saturn.client.workspace.AlleleWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.AlleleViewer.CLASS_SUPPORT = [saturn.client.workspace.AlleleWO];
saturn.client.workspace.CompoundWO.FILE_IMPORT_FORMATS = ["sdf"];
saturn.client.programs.CompoundViewer.CLASS_SUPPORT = [saturn.client.workspace.CompoundWO];
saturn.client.workspace.ConsoleWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.ConsoleViewer.CLASS_SUPPORT = [saturn.client.workspace.ConsoleWO];
saturn.client.workspace.CrystalHelperDataWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.CrystalHelper.CLASS_SUPPORT = [saturn.client.workspace.CrystalHelperDataWO];
saturn.client.workspace.DigestWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.DigestViewer.CLASS_SUPPORT = [saturn.client.workspace.DigestWO];
saturn.client.workspace.GlycanWO.FILE_IMPORT_FORMATS = ["glycoct_condensed"];
saturn.client.programs.GlycanBuilder.CLASS_SUPPORT = [saturn.client.workspace.GlycanWO];
saturn.client.workspace.GridVarWO.FILE_IMPORT_FORMATS = ["csv"];
saturn.client.programs.GridVarViewer.CLASS_SUPPORT = [saturn.client.workspace.GridVarWO];
saturn.client.workspace.HelloTypeWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.HelloWorldViewer.CLASS_SUPPORT = [saturn.client.workspace.HelloTypeWO];
saturn.client.workspace.HomeWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.HomePage.CLASS_SUPPORT = [saturn.client.workspace.HomeWO];
saturn.client.workspace.LigationWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.LigationViewer.CLASS_SUPPORT = [saturn.client.workspace.LigationWO];
saturn.client.workspace.TableHelperWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.TableHelper.CLASS_SUPPORT = [saturn.client.workspace.TableHelperWO];
saturn.client.programs.TableHelper.next_store_id = 0;
saturn.client.workspace.MultiAlleleHelperWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.MultiAlleleHelper.CLASS_SUPPORT = [saturn.client.workspace.MultiAlleleHelperWO];
saturn.client.workspace.MultiConstructHelperWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.MultiConstructHelper.CLASS_SUPPORT = [saturn.client.workspace.MultiConstructHelperWO];
saturn.client.workspace.StructureModelWO.FILE_IMPORT_FORMATS = ["pdb","icb"];
saturn.client.programs.PDBViewer.CLASS_SUPPORT = [saturn.client.workspace.StructureModelWO];
saturn.client.workspace.Phylo5WorkspaceObject.FILE_IMPORT_FORMATS = [];
saturn.client.programs.Phylo5Viewer.CLASS_SUPPORT = [saturn.client.workspace.Phylo5WorkspaceObject];
saturn.client.programs.Phylo5Viewer.newLineReg = new EReg("\n","g");
saturn.client.programs.Phylo5Viewer.carLineReg = new EReg("\r","g");
saturn.client.programs.Phylo5Viewer.whiteSpaceReg = new EReg("\\s","g");
saturn.client.workspace.ProteinWorkspaceObject.FILE_IMPORT_FORMATS = ["fasta"];
saturn.client.programs.ProteinSequenceEditor.CLASS_SUPPORT = [saturn.client.workspace.ProteinWorkspaceObject];
saturn.client.workspace.ScarabELNWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.ScarabELNViewer.CLASS_SUPPORT = [saturn.client.workspace.ScarabELNWO];
saturn.client.workspace.WONKAWO.FILE_IMPORT_FORMATS = [];
saturn.client.programs.WONKA.CLASS_SUPPORT = [saturn.client.workspace.WONKAWO];
saturn.client.workspace.WebPageWorkspaceObject.FILE_IMPORT_FORMATS = ["html"];
saturn.client.programs.WebPageViewer.CLASS_SUPPORT = [saturn.client.workspace.WebPageWorkspaceObject];
saturn.client.workspace.ChromoHubWorkspaceObject.FILE_IMPORT_FORMATS = [];
saturn.client.programs.chromohub.ChromoHubViewer.CLASS_SUPPORT = [saturn.client.workspace.ChromoHubWorkspaceObject];
saturn.client.programs.chromohub.ChromoHubViewer.newLineReg = new EReg("\n","g");
saturn.client.programs.chromohub.ChromoHubViewer.carLineReg = new EReg("\r","g");
saturn.client.programs.chromohub.ChromoHubViewer.whiteSpaceReg = new EReg("\\s","g");
saturn.client.programs.plugins.DisoPredAnnotationPlugin.reg_predLines = new EReg("pred:\\s+([\\.\\*A-Z]+)","");
saturn.client.programs.plugins.SSAnnotationPlugin.reg_predLines = new EReg("Pred:\\s+([A-Z]+)","");
saturn.client.programs.plugins.SVGDomainAnnotationPlugin.reg_pfam = new EReg("pfam([0-9]+)","");
saturn.client.programs.plugins.TMHMMAnnotationPlugin.reg_tmhmm_domain = new EReg("(outside|inside|TMhelix)\\s+([0-9]+)\\s+([0-9]+)","");
saturn.client.workspace.TextFileWO.FILE_IMPORT_FORMATS = [];
saturn.core.molecule.Molecule.newLineReg = new EReg("\n","g");
saturn.core.molecule.Molecule.carLineReg = new EReg("\r","g");
saturn.core.molecule.Molecule.whiteSpaceReg = new EReg("\\s","g");
saturn.core.molecule.Molecule.reg_starReplace = new EReg("\\*","");
saturn.core.Table.r_d = new EReg("^\\d*\\.?\\d*$","");
saturn.core.StandardGeneticCode.instance = new saturn.core.StandardGeneticCode();
saturn.core.StandardGeneticCode.standardTable = saturn.core.StandardGeneticCode.instance.getCodonLookupTable();
saturn.core.StandardGeneticCode.aaToCodon = saturn.core.StandardGeneticCode.instance.getAAToCodonTable();
saturn.core.GeneticCodeRegistry.CODE_REGISTRY = new saturn.core.GeneticCodeRegistry();
saturn.core.EUtils.eutils = null;
saturn.core.FastaEntity.DNA_CHARS = (function($this) {
	var $r;
	var _g = new haxe.ds.StringMap();
	if(__map_reserved.A != null) _g.setReserved("A",true); else _g.h["A"] = true;
	if(__map_reserved.T != null) _g.setReserved("T",true); else _g.h["T"] = true;
	if(__map_reserved.G != null) _g.setReserved("G",true); else _g.h["G"] = true;
	if(__map_reserved.C != null) _g.setReserved("C",true); else _g.h["C"] = true;
	if(__map_reserved.X != null) _g.setReserved("X",true); else _g.h["X"] = true;
	if(__map_reserved.U != null) _g.setReserved("U",true); else _g.h["U"] = true;
	$r = _g;
	return $r;
}(this));
saturn.core.FastaEntity.headerPattern1 = new EReg("^>(.+)","");
saturn.core.PDBParser.pdb3To1 = (function($this) {
	var $r;
	var _g = new haxe.ds.StringMap();
	if(__map_reserved["00C"] != null) _g.setReserved("00C","C"); else _g.h["00C"] = "C";
	if(__map_reserved["01W"] != null) _g.setReserved("01W","X"); else _g.h["01W"] = "X";
	if(__map_reserved["02K"] != null) _g.setReserved("02K","A"); else _g.h["02K"] = "A";
	if(__map_reserved["03Y"] != null) _g.setReserved("03Y","C"); else _g.h["03Y"] = "C";
	if(__map_reserved["07O"] != null) _g.setReserved("07O","C"); else _g.h["07O"] = "C";
	if(__map_reserved["08P"] != null) _g.setReserved("08P","C"); else _g.h["08P"] = "C";
	if(__map_reserved["0A0"] != null) _g.setReserved("0A0","D"); else _g.h["0A0"] = "D";
	if(__map_reserved["0A1"] != null) _g.setReserved("0A1","Y"); else _g.h["0A1"] = "Y";
	if(__map_reserved["0A2"] != null) _g.setReserved("0A2","K"); else _g.h["0A2"] = "K";
	if(__map_reserved["0A8"] != null) _g.setReserved("0A8","C"); else _g.h["0A8"] = "C";
	if(__map_reserved["0AA"] != null) _g.setReserved("0AA","V"); else _g.h["0AA"] = "V";
	if(__map_reserved["0AB"] != null) _g.setReserved("0AB","V"); else _g.h["0AB"] = "V";
	if(__map_reserved["0AC"] != null) _g.setReserved("0AC","G"); else _g.h["0AC"] = "G";
	if(__map_reserved["0AD"] != null) _g.setReserved("0AD","G"); else _g.h["0AD"] = "G";
	if(__map_reserved["0AF"] != null) _g.setReserved("0AF","W"); else _g.h["0AF"] = "W";
	if(__map_reserved["0AG"] != null) _g.setReserved("0AG","L"); else _g.h["0AG"] = "L";
	if(__map_reserved["0AH"] != null) _g.setReserved("0AH","S"); else _g.h["0AH"] = "S";
	if(__map_reserved["0AK"] != null) _g.setReserved("0AK","D"); else _g.h["0AK"] = "D";
	if(__map_reserved["0AM"] != null) _g.setReserved("0AM","A"); else _g.h["0AM"] = "A";
	if(__map_reserved["0AP"] != null) _g.setReserved("0AP","C"); else _g.h["0AP"] = "C";
	if(__map_reserved["0AU"] != null) _g.setReserved("0AU","U"); else _g.h["0AU"] = "U";
	if(__map_reserved["0AV"] != null) _g.setReserved("0AV","A"); else _g.h["0AV"] = "A";
	if(__map_reserved["0AZ"] != null) _g.setReserved("0AZ","P"); else _g.h["0AZ"] = "P";
	if(__map_reserved["0BN"] != null) _g.setReserved("0BN","F"); else _g.h["0BN"] = "F";
	if(__map_reserved["0C "] != null) _g.setReserved("0C ","C"); else _g.h["0C "] = "C";
	if(__map_reserved["0CS"] != null) _g.setReserved("0CS","A"); else _g.h["0CS"] = "A";
	if(__map_reserved["0DC"] != null) _g.setReserved("0DC","C"); else _g.h["0DC"] = "C";
	if(__map_reserved["0DG"] != null) _g.setReserved("0DG","G"); else _g.h["0DG"] = "G";
	if(__map_reserved["0DT"] != null) _g.setReserved("0DT","T"); else _g.h["0DT"] = "T";
	if(__map_reserved["0FL"] != null) _g.setReserved("0FL","A"); else _g.h["0FL"] = "A";
	if(__map_reserved["0G "] != null) _g.setReserved("0G ","G"); else _g.h["0G "] = "G";
	if(__map_reserved["0NC"] != null) _g.setReserved("0NC","A"); else _g.h["0NC"] = "A";
	if(__map_reserved["0SP"] != null) _g.setReserved("0SP","A"); else _g.h["0SP"] = "A";
	if(__map_reserved["0U "] != null) _g.setReserved("0U ","U"); else _g.h["0U "] = "U";
	if(__map_reserved["0YG"] != null) _g.setReserved("0YG","YG"); else _g.h["0YG"] = "YG";
	if(__map_reserved["10C"] != null) _g.setReserved("10C","C"); else _g.h["10C"] = "C";
	if(__map_reserved["125"] != null) _g.setReserved("125","U"); else _g.h["125"] = "U";
	if(__map_reserved["126"] != null) _g.setReserved("126","U"); else _g.h["126"] = "U";
	if(__map_reserved["127"] != null) _g.setReserved("127","U"); else _g.h["127"] = "U";
	if(__map_reserved["128"] != null) _g.setReserved("128","N"); else _g.h["128"] = "N";
	if(__map_reserved["12A"] != null) _g.setReserved("12A","A"); else _g.h["12A"] = "A";
	if(__map_reserved["143"] != null) _g.setReserved("143","C"); else _g.h["143"] = "C";
	if(__map_reserved["175"] != null) _g.setReserved("175","ASG"); else _g.h["175"] = "ASG";
	if(__map_reserved["193"] != null) _g.setReserved("193","X"); else _g.h["193"] = "X";
	if(__map_reserved["1AP"] != null) _g.setReserved("1AP","A"); else _g.h["1AP"] = "A";
	if(__map_reserved["1MA"] != null) _g.setReserved("1MA","A"); else _g.h["1MA"] = "A";
	if(__map_reserved["1MG"] != null) _g.setReserved("1MG","G"); else _g.h["1MG"] = "G";
	if(__map_reserved["1PA"] != null) _g.setReserved("1PA","F"); else _g.h["1PA"] = "F";
	if(__map_reserved["1PI"] != null) _g.setReserved("1PI","A"); else _g.h["1PI"] = "A";
	if(__map_reserved["1PR"] != null) _g.setReserved("1PR","N"); else _g.h["1PR"] = "N";
	if(__map_reserved["1SC"] != null) _g.setReserved("1SC","C"); else _g.h["1SC"] = "C";
	if(__map_reserved["1TQ"] != null) _g.setReserved("1TQ","W"); else _g.h["1TQ"] = "W";
	if(__map_reserved["1TY"] != null) _g.setReserved("1TY","Y"); else _g.h["1TY"] = "Y";
	if(__map_reserved["1X6"] != null) _g.setReserved("1X6","S"); else _g.h["1X6"] = "S";
	if(__map_reserved["200"] != null) _g.setReserved("200","F"); else _g.h["200"] = "F";
	if(__map_reserved["23F"] != null) _g.setReserved("23F","F"); else _g.h["23F"] = "F";
	if(__map_reserved["23S"] != null) _g.setReserved("23S","X"); else _g.h["23S"] = "X";
	if(__map_reserved["26B"] != null) _g.setReserved("26B","T"); else _g.h["26B"] = "T";
	if(__map_reserved["2AD"] != null) _g.setReserved("2AD","X"); else _g.h["2AD"] = "X";
	if(__map_reserved["2AG"] != null) _g.setReserved("2AG","A"); else _g.h["2AG"] = "A";
	if(__map_reserved["2AO"] != null) _g.setReserved("2AO","X"); else _g.h["2AO"] = "X";
	if(__map_reserved["2AR"] != null) _g.setReserved("2AR","A"); else _g.h["2AR"] = "A";
	if(__map_reserved["2AS"] != null) _g.setReserved("2AS","X"); else _g.h["2AS"] = "X";
	if(__map_reserved["2AT"] != null) _g.setReserved("2AT","T"); else _g.h["2AT"] = "T";
	if(__map_reserved["2AU"] != null) _g.setReserved("2AU","U"); else _g.h["2AU"] = "U";
	if(__map_reserved["2BD"] != null) _g.setReserved("2BD","I"); else _g.h["2BD"] = "I";
	if(__map_reserved["2BT"] != null) _g.setReserved("2BT","T"); else _g.h["2BT"] = "T";
	if(__map_reserved["2BU"] != null) _g.setReserved("2BU","A"); else _g.h["2BU"] = "A";
	if(__map_reserved["2CO"] != null) _g.setReserved("2CO","C"); else _g.h["2CO"] = "C";
	if(__map_reserved["2DA"] != null) _g.setReserved("2DA","A"); else _g.h["2DA"] = "A";
	if(__map_reserved["2DF"] != null) _g.setReserved("2DF","N"); else _g.h["2DF"] = "N";
	if(__map_reserved["2DM"] != null) _g.setReserved("2DM","N"); else _g.h["2DM"] = "N";
	if(__map_reserved["2DO"] != null) _g.setReserved("2DO","X"); else _g.h["2DO"] = "X";
	if(__map_reserved["2DT"] != null) _g.setReserved("2DT","T"); else _g.h["2DT"] = "T";
	if(__map_reserved["2EG"] != null) _g.setReserved("2EG","G"); else _g.h["2EG"] = "G";
	if(__map_reserved["2FE"] != null) _g.setReserved("2FE","N"); else _g.h["2FE"] = "N";
	if(__map_reserved["2FI"] != null) _g.setReserved("2FI","N"); else _g.h["2FI"] = "N";
	if(__map_reserved["2FM"] != null) _g.setReserved("2FM","M"); else _g.h["2FM"] = "M";
	if(__map_reserved["2GT"] != null) _g.setReserved("2GT","T"); else _g.h["2GT"] = "T";
	if(__map_reserved["2HF"] != null) _g.setReserved("2HF","H"); else _g.h["2HF"] = "H";
	if(__map_reserved["2LU"] != null) _g.setReserved("2LU","L"); else _g.h["2LU"] = "L";
	if(__map_reserved["2MA"] != null) _g.setReserved("2MA","A"); else _g.h["2MA"] = "A";
	if(__map_reserved["2MG"] != null) _g.setReserved("2MG","G"); else _g.h["2MG"] = "G";
	if(__map_reserved["2ML"] != null) _g.setReserved("2ML","L"); else _g.h["2ML"] = "L";
	if(__map_reserved["2MR"] != null) _g.setReserved("2MR","R"); else _g.h["2MR"] = "R";
	if(__map_reserved["2MT"] != null) _g.setReserved("2MT","P"); else _g.h["2MT"] = "P";
	if(__map_reserved["2MU"] != null) _g.setReserved("2MU","U"); else _g.h["2MU"] = "U";
	if(__map_reserved["2NT"] != null) _g.setReserved("2NT","T"); else _g.h["2NT"] = "T";
	if(__map_reserved["2OM"] != null) _g.setReserved("2OM","U"); else _g.h["2OM"] = "U";
	if(__map_reserved["2OT"] != null) _g.setReserved("2OT","T"); else _g.h["2OT"] = "T";
	if(__map_reserved["2PI"] != null) _g.setReserved("2PI","X"); else _g.h["2PI"] = "X";
	if(__map_reserved["2PR"] != null) _g.setReserved("2PR","G"); else _g.h["2PR"] = "G";
	if(__map_reserved["2SA"] != null) _g.setReserved("2SA","N"); else _g.h["2SA"] = "N";
	if(__map_reserved["2SI"] != null) _g.setReserved("2SI","X"); else _g.h["2SI"] = "X";
	if(__map_reserved["2ST"] != null) _g.setReserved("2ST","T"); else _g.h["2ST"] = "T";
	if(__map_reserved["2TL"] != null) _g.setReserved("2TL","T"); else _g.h["2TL"] = "T";
	if(__map_reserved["2TY"] != null) _g.setReserved("2TY","Y"); else _g.h["2TY"] = "Y";
	if(__map_reserved["2VA"] != null) _g.setReserved("2VA","V"); else _g.h["2VA"] = "V";
	if(__map_reserved["2XA"] != null) _g.setReserved("2XA","C"); else _g.h["2XA"] = "C";
	if(__map_reserved["32S"] != null) _g.setReserved("32S","X"); else _g.h["32S"] = "X";
	if(__map_reserved["32T"] != null) _g.setReserved("32T","X"); else _g.h["32T"] = "X";
	if(__map_reserved["3AH"] != null) _g.setReserved("3AH","H"); else _g.h["3AH"] = "H";
	if(__map_reserved["3AR"] != null) _g.setReserved("3AR","X"); else _g.h["3AR"] = "X";
	if(__map_reserved["3CF"] != null) _g.setReserved("3CF","F"); else _g.h["3CF"] = "F";
	if(__map_reserved["3DA"] != null) _g.setReserved("3DA","A"); else _g.h["3DA"] = "A";
	if(__map_reserved["3DR"] != null) _g.setReserved("3DR","N"); else _g.h["3DR"] = "N";
	if(__map_reserved["3GA"] != null) _g.setReserved("3GA","A"); else _g.h["3GA"] = "A";
	if(__map_reserved["3MD"] != null) _g.setReserved("3MD","D"); else _g.h["3MD"] = "D";
	if(__map_reserved["3ME"] != null) _g.setReserved("3ME","U"); else _g.h["3ME"] = "U";
	if(__map_reserved["3NF"] != null) _g.setReserved("3NF","Y"); else _g.h["3NF"] = "Y";
	if(__map_reserved["3QN"] != null) _g.setReserved("3QN","K"); else _g.h["3QN"] = "K";
	if(__map_reserved["3TY"] != null) _g.setReserved("3TY","X"); else _g.h["3TY"] = "X";
	if(__map_reserved["3XH"] != null) _g.setReserved("3XH","G"); else _g.h["3XH"] = "G";
	if(__map_reserved["4AC"] != null) _g.setReserved("4AC","N"); else _g.h["4AC"] = "N";
	if(__map_reserved["4BF"] != null) _g.setReserved("4BF","Y"); else _g.h["4BF"] = "Y";
	if(__map_reserved["4CF"] != null) _g.setReserved("4CF","F"); else _g.h["4CF"] = "F";
	if(__map_reserved["4CY"] != null) _g.setReserved("4CY","M"); else _g.h["4CY"] = "M";
	if(__map_reserved["4DP"] != null) _g.setReserved("4DP","W"); else _g.h["4DP"] = "W";
	if(__map_reserved["4F3"] != null) _g.setReserved("4F3","GYG"); else _g.h["4F3"] = "GYG";
	if(__map_reserved["4FB"] != null) _g.setReserved("4FB","P"); else _g.h["4FB"] = "P";
	if(__map_reserved["4FW"] != null) _g.setReserved("4FW","W"); else _g.h["4FW"] = "W";
	if(__map_reserved["4HT"] != null) _g.setReserved("4HT","W"); else _g.h["4HT"] = "W";
	if(__map_reserved["4IN"] != null) _g.setReserved("4IN","W"); else _g.h["4IN"] = "W";
	if(__map_reserved["4MF"] != null) _g.setReserved("4MF","N"); else _g.h["4MF"] = "N";
	if(__map_reserved["4MM"] != null) _g.setReserved("4MM","X"); else _g.h["4MM"] = "X";
	if(__map_reserved["4OC"] != null) _g.setReserved("4OC","C"); else _g.h["4OC"] = "C";
	if(__map_reserved["4PC"] != null) _g.setReserved("4PC","C"); else _g.h["4PC"] = "C";
	if(__map_reserved["4PD"] != null) _g.setReserved("4PD","C"); else _g.h["4PD"] = "C";
	if(__map_reserved["4PE"] != null) _g.setReserved("4PE","C"); else _g.h["4PE"] = "C";
	if(__map_reserved["4PH"] != null) _g.setReserved("4PH","F"); else _g.h["4PH"] = "F";
	if(__map_reserved["4SC"] != null) _g.setReserved("4SC","C"); else _g.h["4SC"] = "C";
	if(__map_reserved["4SU"] != null) _g.setReserved("4SU","U"); else _g.h["4SU"] = "U";
	if(__map_reserved["4TA"] != null) _g.setReserved("4TA","N"); else _g.h["4TA"] = "N";
	if(__map_reserved["4U7"] != null) _g.setReserved("4U7","A"); else _g.h["4U7"] = "A";
	if(__map_reserved["56A"] != null) _g.setReserved("56A","H"); else _g.h["56A"] = "H";
	if(__map_reserved["5AA"] != null) _g.setReserved("5AA","A"); else _g.h["5AA"] = "A";
	if(__map_reserved["5AB"] != null) _g.setReserved("5AB","A"); else _g.h["5AB"] = "A";
	if(__map_reserved["5AT"] != null) _g.setReserved("5AT","T"); else _g.h["5AT"] = "T";
	if(__map_reserved["5BU"] != null) _g.setReserved("5BU","U"); else _g.h["5BU"] = "U";
	if(__map_reserved["5CG"] != null) _g.setReserved("5CG","G"); else _g.h["5CG"] = "G";
	if(__map_reserved["5CM"] != null) _g.setReserved("5CM","C"); else _g.h["5CM"] = "C";
	if(__map_reserved["5CS"] != null) _g.setReserved("5CS","C"); else _g.h["5CS"] = "C";
	if(__map_reserved["5FA"] != null) _g.setReserved("5FA","A"); else _g.h["5FA"] = "A";
	if(__map_reserved["5FC"] != null) _g.setReserved("5FC","C"); else _g.h["5FC"] = "C";
	if(__map_reserved["5FU"] != null) _g.setReserved("5FU","U"); else _g.h["5FU"] = "U";
	if(__map_reserved["5HP"] != null) _g.setReserved("5HP","E"); else _g.h["5HP"] = "E";
	if(__map_reserved["5HT"] != null) _g.setReserved("5HT","T"); else _g.h["5HT"] = "T";
	if(__map_reserved["5HU"] != null) _g.setReserved("5HU","U"); else _g.h["5HU"] = "U";
	if(__map_reserved["5IC"] != null) _g.setReserved("5IC","C"); else _g.h["5IC"] = "C";
	if(__map_reserved["5IT"] != null) _g.setReserved("5IT","T"); else _g.h["5IT"] = "T";
	if(__map_reserved["5IU"] != null) _g.setReserved("5IU","U"); else _g.h["5IU"] = "U";
	if(__map_reserved["5MC"] != null) _g.setReserved("5MC","C"); else _g.h["5MC"] = "C";
	if(__map_reserved["5MD"] != null) _g.setReserved("5MD","N"); else _g.h["5MD"] = "N";
	if(__map_reserved["5MU"] != null) _g.setReserved("5MU","U"); else _g.h["5MU"] = "U";
	if(__map_reserved["5NC"] != null) _g.setReserved("5NC","C"); else _g.h["5NC"] = "C";
	if(__map_reserved["5PC"] != null) _g.setReserved("5PC","C"); else _g.h["5PC"] = "C";
	if(__map_reserved["5PY"] != null) _g.setReserved("5PY","T"); else _g.h["5PY"] = "T";
	if(__map_reserved["5SE"] != null) _g.setReserved("5SE","U"); else _g.h["5SE"] = "U";
	if(__map_reserved["5ZA"] != null) _g.setReserved("5ZA","TWG"); else _g.h["5ZA"] = "TWG";
	if(__map_reserved["64T"] != null) _g.setReserved("64T","T"); else _g.h["64T"] = "T";
	if(__map_reserved["6CL"] != null) _g.setReserved("6CL","K"); else _g.h["6CL"] = "K";
	if(__map_reserved["6CT"] != null) _g.setReserved("6CT","T"); else _g.h["6CT"] = "T";
	if(__map_reserved["6CW"] != null) _g.setReserved("6CW","W"); else _g.h["6CW"] = "W";
	if(__map_reserved["6HA"] != null) _g.setReserved("6HA","A"); else _g.h["6HA"] = "A";
	if(__map_reserved["6HC"] != null) _g.setReserved("6HC","C"); else _g.h["6HC"] = "C";
	if(__map_reserved["6HG"] != null) _g.setReserved("6HG","G"); else _g.h["6HG"] = "G";
	if(__map_reserved["6HN"] != null) _g.setReserved("6HN","K"); else _g.h["6HN"] = "K";
	if(__map_reserved["6HT"] != null) _g.setReserved("6HT","T"); else _g.h["6HT"] = "T";
	if(__map_reserved["6IA"] != null) _g.setReserved("6IA","A"); else _g.h["6IA"] = "A";
	if(__map_reserved["6MA"] != null) _g.setReserved("6MA","A"); else _g.h["6MA"] = "A";
	if(__map_reserved["6MC"] != null) _g.setReserved("6MC","A"); else _g.h["6MC"] = "A";
	if(__map_reserved["6MI"] != null) _g.setReserved("6MI","N"); else _g.h["6MI"] = "N";
	if(__map_reserved["6MT"] != null) _g.setReserved("6MT","A"); else _g.h["6MT"] = "A";
	if(__map_reserved["6MZ"] != null) _g.setReserved("6MZ","N"); else _g.h["6MZ"] = "N";
	if(__map_reserved["6OG"] != null) _g.setReserved("6OG","G"); else _g.h["6OG"] = "G";
	if(__map_reserved["70U"] != null) _g.setReserved("70U","U"); else _g.h["70U"] = "U";
	if(__map_reserved["7DA"] != null) _g.setReserved("7DA","A"); else _g.h["7DA"] = "A";
	if(__map_reserved["7GU"] != null) _g.setReserved("7GU","G"); else _g.h["7GU"] = "G";
	if(__map_reserved["7JA"] != null) _g.setReserved("7JA","I"); else _g.h["7JA"] = "I";
	if(__map_reserved["7MG"] != null) _g.setReserved("7MG","G"); else _g.h["7MG"] = "G";
	if(__map_reserved["8AN"] != null) _g.setReserved("8AN","A"); else _g.h["8AN"] = "A";
	if(__map_reserved["8FG"] != null) _g.setReserved("8FG","G"); else _g.h["8FG"] = "G";
	if(__map_reserved["8MG"] != null) _g.setReserved("8MG","G"); else _g.h["8MG"] = "G";
	if(__map_reserved["8OG"] != null) _g.setReserved("8OG","G"); else _g.h["8OG"] = "G";
	if(__map_reserved["9NE"] != null) _g.setReserved("9NE","E"); else _g.h["9NE"] = "E";
	if(__map_reserved["9NF"] != null) _g.setReserved("9NF","F"); else _g.h["9NF"] = "F";
	if(__map_reserved["9NR"] != null) _g.setReserved("9NR","R"); else _g.h["9NR"] = "R";
	if(__map_reserved["9NV"] != null) _g.setReserved("9NV","V"); else _g.h["9NV"] = "V";
	if(__map_reserved["A  "] != null) _g.setReserved("A  ","A"); else _g.h["A  "] = "A";
	if(__map_reserved.A1P != null) _g.setReserved("A1P","N"); else _g.h["A1P"] = "N";
	if(__map_reserved.A23 != null) _g.setReserved("A23","A"); else _g.h["A23"] = "A";
	if(__map_reserved.A2L != null) _g.setReserved("A2L","A"); else _g.h["A2L"] = "A";
	if(__map_reserved.A2M != null) _g.setReserved("A2M","A"); else _g.h["A2M"] = "A";
	if(__map_reserved.A34 != null) _g.setReserved("A34","A"); else _g.h["A34"] = "A";
	if(__map_reserved.A35 != null) _g.setReserved("A35","A"); else _g.h["A35"] = "A";
	if(__map_reserved.A38 != null) _g.setReserved("A38","A"); else _g.h["A38"] = "A";
	if(__map_reserved.A39 != null) _g.setReserved("A39","A"); else _g.h["A39"] = "A";
	if(__map_reserved.A3A != null) _g.setReserved("A3A","A"); else _g.h["A3A"] = "A";
	if(__map_reserved.A3P != null) _g.setReserved("A3P","A"); else _g.h["A3P"] = "A";
	if(__map_reserved.A40 != null) _g.setReserved("A40","A"); else _g.h["A40"] = "A";
	if(__map_reserved.A43 != null) _g.setReserved("A43","A"); else _g.h["A43"] = "A";
	if(__map_reserved.A44 != null) _g.setReserved("A44","A"); else _g.h["A44"] = "A";
	if(__map_reserved.A47 != null) _g.setReserved("A47","A"); else _g.h["A47"] = "A";
	if(__map_reserved.A5L != null) _g.setReserved("A5L","A"); else _g.h["A5L"] = "A";
	if(__map_reserved.A5M != null) _g.setReserved("A5M","C"); else _g.h["A5M"] = "C";
	if(__map_reserved.A5N != null) _g.setReserved("A5N","N"); else _g.h["A5N"] = "N";
	if(__map_reserved.A5O != null) _g.setReserved("A5O","A"); else _g.h["A5O"] = "A";
	if(__map_reserved.A66 != null) _g.setReserved("A66","X"); else _g.h["A66"] = "X";
	if(__map_reserved.AA3 != null) _g.setReserved("AA3","A"); else _g.h["AA3"] = "A";
	if(__map_reserved.AA4 != null) _g.setReserved("AA4","A"); else _g.h["AA4"] = "A";
	if(__map_reserved.AAR != null) _g.setReserved("AAR","R"); else _g.h["AAR"] = "R";
	if(__map_reserved.AB7 != null) _g.setReserved("AB7","X"); else _g.h["AB7"] = "X";
	if(__map_reserved.ABA != null) _g.setReserved("ABA","A"); else _g.h["ABA"] = "A";
	if(__map_reserved.ABR != null) _g.setReserved("ABR","A"); else _g.h["ABR"] = "A";
	if(__map_reserved.ABS != null) _g.setReserved("ABS","A"); else _g.h["ABS"] = "A";
	if(__map_reserved.ABT != null) _g.setReserved("ABT","N"); else _g.h["ABT"] = "N";
	if(__map_reserved.ACB != null) _g.setReserved("ACB","D"); else _g.h["ACB"] = "D";
	if(__map_reserved.ACL != null) _g.setReserved("ACL","R"); else _g.h["ACL"] = "R";
	if(__map_reserved.AD2 != null) _g.setReserved("AD2","A"); else _g.h["AD2"] = "A";
	if(__map_reserved.ADD != null) _g.setReserved("ADD","X"); else _g.h["ADD"] = "X";
	if(__map_reserved.ADX != null) _g.setReserved("ADX","N"); else _g.h["ADX"] = "N";
	if(__map_reserved.AEA != null) _g.setReserved("AEA","X"); else _g.h["AEA"] = "X";
	if(__map_reserved.AEI != null) _g.setReserved("AEI","D"); else _g.h["AEI"] = "D";
	if(__map_reserved.AET != null) _g.setReserved("AET","A"); else _g.h["AET"] = "A";
	if(__map_reserved.AFA != null) _g.setReserved("AFA","N"); else _g.h["AFA"] = "N";
	if(__map_reserved.AFF != null) _g.setReserved("AFF","N"); else _g.h["AFF"] = "N";
	if(__map_reserved.AFG != null) _g.setReserved("AFG","G"); else _g.h["AFG"] = "G";
	if(__map_reserved.AGM != null) _g.setReserved("AGM","R"); else _g.h["AGM"] = "R";
	if(__map_reserved.AGT != null) _g.setReserved("AGT","C"); else _g.h["AGT"] = "C";
	if(__map_reserved.AHB != null) _g.setReserved("AHB","N"); else _g.h["AHB"] = "N";
	if(__map_reserved.AHH != null) _g.setReserved("AHH","X"); else _g.h["AHH"] = "X";
	if(__map_reserved.AHO != null) _g.setReserved("AHO","A"); else _g.h["AHO"] = "A";
	if(__map_reserved.AHP != null) _g.setReserved("AHP","A"); else _g.h["AHP"] = "A";
	if(__map_reserved.AHS != null) _g.setReserved("AHS","X"); else _g.h["AHS"] = "X";
	if(__map_reserved.AHT != null) _g.setReserved("AHT","X"); else _g.h["AHT"] = "X";
	if(__map_reserved.AIB != null) _g.setReserved("AIB","A"); else _g.h["AIB"] = "A";
	if(__map_reserved.AKL != null) _g.setReserved("AKL","D"); else _g.h["AKL"] = "D";
	if(__map_reserved.AKZ != null) _g.setReserved("AKZ","D"); else _g.h["AKZ"] = "D";
	if(__map_reserved.ALA != null) _g.setReserved("ALA","A"); else _g.h["ALA"] = "A";
	if(__map_reserved.ALC != null) _g.setReserved("ALC","A"); else _g.h["ALC"] = "A";
	if(__map_reserved.ALM != null) _g.setReserved("ALM","A"); else _g.h["ALM"] = "A";
	if(__map_reserved.ALN != null) _g.setReserved("ALN","A"); else _g.h["ALN"] = "A";
	if(__map_reserved.ALO != null) _g.setReserved("ALO","T"); else _g.h["ALO"] = "T";
	if(__map_reserved.ALQ != null) _g.setReserved("ALQ","X"); else _g.h["ALQ"] = "X";
	if(__map_reserved.ALS != null) _g.setReserved("ALS","A"); else _g.h["ALS"] = "A";
	if(__map_reserved.ALT != null) _g.setReserved("ALT","A"); else _g.h["ALT"] = "A";
	if(__map_reserved.ALV != null) _g.setReserved("ALV","A"); else _g.h["ALV"] = "A";
	if(__map_reserved.ALY != null) _g.setReserved("ALY","K"); else _g.h["ALY"] = "K";
	if(__map_reserved.AN8 != null) _g.setReserved("AN8","A"); else _g.h["AN8"] = "A";
	if(__map_reserved.AP7 != null) _g.setReserved("AP7","A"); else _g.h["AP7"] = "A";
	if(__map_reserved.APE != null) _g.setReserved("APE","X"); else _g.h["APE"] = "X";
	if(__map_reserved.APH != null) _g.setReserved("APH","A"); else _g.h["APH"] = "A";
	if(__map_reserved.API != null) _g.setReserved("API","K"); else _g.h["API"] = "K";
	if(__map_reserved.APK != null) _g.setReserved("APK","K"); else _g.h["APK"] = "K";
	if(__map_reserved.APM != null) _g.setReserved("APM","X"); else _g.h["APM"] = "X";
	if(__map_reserved.APP != null) _g.setReserved("APP","X"); else _g.h["APP"] = "X";
	if(__map_reserved.AR2 != null) _g.setReserved("AR2","R"); else _g.h["AR2"] = "R";
	if(__map_reserved.AR4 != null) _g.setReserved("AR4","E"); else _g.h["AR4"] = "E";
	if(__map_reserved.AR7 != null) _g.setReserved("AR7","R"); else _g.h["AR7"] = "R";
	if(__map_reserved.ARG != null) _g.setReserved("ARG","R"); else _g.h["ARG"] = "R";
	if(__map_reserved.ARM != null) _g.setReserved("ARM","R"); else _g.h["ARM"] = "R";
	if(__map_reserved.ARO != null) _g.setReserved("ARO","R"); else _g.h["ARO"] = "R";
	if(__map_reserved.ARV != null) _g.setReserved("ARV","X"); else _g.h["ARV"] = "X";
	if(__map_reserved["AS "] != null) _g.setReserved("AS ","A"); else _g.h["AS "] = "A";
	if(__map_reserved.AS2 != null) _g.setReserved("AS2","D"); else _g.h["AS2"] = "D";
	if(__map_reserved.AS9 != null) _g.setReserved("AS9","X"); else _g.h["AS9"] = "X";
	if(__map_reserved.ASA != null) _g.setReserved("ASA","D"); else _g.h["ASA"] = "D";
	if(__map_reserved.ASB != null) _g.setReserved("ASB","D"); else _g.h["ASB"] = "D";
	if(__map_reserved.ASI != null) _g.setReserved("ASI","D"); else _g.h["ASI"] = "D";
	if(__map_reserved.ASK != null) _g.setReserved("ASK","D"); else _g.h["ASK"] = "D";
	if(__map_reserved.ASL != null) _g.setReserved("ASL","D"); else _g.h["ASL"] = "D";
	if(__map_reserved.ASM != null) _g.setReserved("ASM","X"); else _g.h["ASM"] = "X";
	if(__map_reserved.ASN != null) _g.setReserved("ASN","N"); else _g.h["ASN"] = "N";
	if(__map_reserved.ASP != null) _g.setReserved("ASP","D"); else _g.h["ASP"] = "D";
	if(__map_reserved.ASQ != null) _g.setReserved("ASQ","D"); else _g.h["ASQ"] = "D";
	if(__map_reserved.ASU != null) _g.setReserved("ASU","N"); else _g.h["ASU"] = "N";
	if(__map_reserved.ASX != null) _g.setReserved("ASX","B"); else _g.h["ASX"] = "B";
	if(__map_reserved.ATD != null) _g.setReserved("ATD","T"); else _g.h["ATD"] = "T";
	if(__map_reserved.ATL != null) _g.setReserved("ATL","T"); else _g.h["ATL"] = "T";
	if(__map_reserved.ATM != null) _g.setReserved("ATM","T"); else _g.h["ATM"] = "T";
	if(__map_reserved.AVC != null) _g.setReserved("AVC","A"); else _g.h["AVC"] = "A";
	if(__map_reserved.AVN != null) _g.setReserved("AVN","X"); else _g.h["AVN"] = "X";
	if(__map_reserved.AYA != null) _g.setReserved("AYA","A"); else _g.h["AYA"] = "A";
	if(__map_reserved.AYG != null) _g.setReserved("AYG","AYG"); else _g.h["AYG"] = "AYG";
	if(__map_reserved.AZK != null) _g.setReserved("AZK","K"); else _g.h["AZK"] = "K";
	if(__map_reserved.AZS != null) _g.setReserved("AZS","S"); else _g.h["AZS"] = "S";
	if(__map_reserved.AZY != null) _g.setReserved("AZY","Y"); else _g.h["AZY"] = "Y";
	if(__map_reserved.B1F != null) _g.setReserved("B1F","F"); else _g.h["B1F"] = "F";
	if(__map_reserved.B1P != null) _g.setReserved("B1P","N"); else _g.h["B1P"] = "N";
	if(__map_reserved.B2A != null) _g.setReserved("B2A","A"); else _g.h["B2A"] = "A";
	if(__map_reserved.B2F != null) _g.setReserved("B2F","F"); else _g.h["B2F"] = "F";
	if(__map_reserved.B2I != null) _g.setReserved("B2I","I"); else _g.h["B2I"] = "I";
	if(__map_reserved.B2V != null) _g.setReserved("B2V","V"); else _g.h["B2V"] = "V";
	if(__map_reserved.B3A != null) _g.setReserved("B3A","A"); else _g.h["B3A"] = "A";
	if(__map_reserved.B3D != null) _g.setReserved("B3D","D"); else _g.h["B3D"] = "D";
	if(__map_reserved.B3E != null) _g.setReserved("B3E","E"); else _g.h["B3E"] = "E";
	if(__map_reserved.B3K != null) _g.setReserved("B3K","K"); else _g.h["B3K"] = "K";
	if(__map_reserved.B3L != null) _g.setReserved("B3L","X"); else _g.h["B3L"] = "X";
	if(__map_reserved.B3M != null) _g.setReserved("B3M","X"); else _g.h["B3M"] = "X";
	if(__map_reserved.B3Q != null) _g.setReserved("B3Q","X"); else _g.h["B3Q"] = "X";
	if(__map_reserved.B3S != null) _g.setReserved("B3S","S"); else _g.h["B3S"] = "S";
	if(__map_reserved.B3T != null) _g.setReserved("B3T","X"); else _g.h["B3T"] = "X";
	if(__map_reserved.B3U != null) _g.setReserved("B3U","H"); else _g.h["B3U"] = "H";
	if(__map_reserved.B3X != null) _g.setReserved("B3X","N"); else _g.h["B3X"] = "N";
	if(__map_reserved.B3Y != null) _g.setReserved("B3Y","Y"); else _g.h["B3Y"] = "Y";
	if(__map_reserved.BB6 != null) _g.setReserved("BB6","C"); else _g.h["BB6"] = "C";
	if(__map_reserved.BB7 != null) _g.setReserved("BB7","C"); else _g.h["BB7"] = "C";
	if(__map_reserved.BB8 != null) _g.setReserved("BB8","F"); else _g.h["BB8"] = "F";
	if(__map_reserved.BB9 != null) _g.setReserved("BB9","C"); else _g.h["BB9"] = "C";
	if(__map_reserved.BBC != null) _g.setReserved("BBC","C"); else _g.h["BBC"] = "C";
	if(__map_reserved.BCS != null) _g.setReserved("BCS","C"); else _g.h["BCS"] = "C";
	if(__map_reserved.BE2 != null) _g.setReserved("BE2","X"); else _g.h["BE2"] = "X";
	if(__map_reserved.BFD != null) _g.setReserved("BFD","D"); else _g.h["BFD"] = "D";
	if(__map_reserved.BG1 != null) _g.setReserved("BG1","S"); else _g.h["BG1"] = "S";
	if(__map_reserved.BGM != null) _g.setReserved("BGM","G"); else _g.h["BGM"] = "G";
	if(__map_reserved.BH2 != null) _g.setReserved("BH2","D"); else _g.h["BH2"] = "D";
	if(__map_reserved.BHD != null) _g.setReserved("BHD","D"); else _g.h["BHD"] = "D";
	if(__map_reserved.BIF != null) _g.setReserved("BIF","F"); else _g.h["BIF"] = "F";
	if(__map_reserved.BIL != null) _g.setReserved("BIL","X"); else _g.h["BIL"] = "X";
	if(__map_reserved.BIU != null) _g.setReserved("BIU","I"); else _g.h["BIU"] = "I";
	if(__map_reserved.BJH != null) _g.setReserved("BJH","X"); else _g.h["BJH"] = "X";
	if(__map_reserved.BLE != null) _g.setReserved("BLE","L"); else _g.h["BLE"] = "L";
	if(__map_reserved.BLY != null) _g.setReserved("BLY","K"); else _g.h["BLY"] = "K";
	if(__map_reserved.BMP != null) _g.setReserved("BMP","N"); else _g.h["BMP"] = "N";
	if(__map_reserved.BMT != null) _g.setReserved("BMT","T"); else _g.h["BMT"] = "T";
	if(__map_reserved.BNN != null) _g.setReserved("BNN","F"); else _g.h["BNN"] = "F";
	if(__map_reserved.BNO != null) _g.setReserved("BNO","X"); else _g.h["BNO"] = "X";
	if(__map_reserved.BOE != null) _g.setReserved("BOE","T"); else _g.h["BOE"] = "T";
	if(__map_reserved.BOR != null) _g.setReserved("BOR","R"); else _g.h["BOR"] = "R";
	if(__map_reserved.BPE != null) _g.setReserved("BPE","C"); else _g.h["BPE"] = "C";
	if(__map_reserved.BRU != null) _g.setReserved("BRU","U"); else _g.h["BRU"] = "U";
	if(__map_reserved.BSE != null) _g.setReserved("BSE","S"); else _g.h["BSE"] = "S";
	if(__map_reserved.BT5 != null) _g.setReserved("BT5","N"); else _g.h["BT5"] = "N";
	if(__map_reserved.BTA != null) _g.setReserved("BTA","L"); else _g.h["BTA"] = "L";
	if(__map_reserved.BTC != null) _g.setReserved("BTC","C"); else _g.h["BTC"] = "C";
	if(__map_reserved.BTR != null) _g.setReserved("BTR","W"); else _g.h["BTR"] = "W";
	if(__map_reserved.BUC != null) _g.setReserved("BUC","C"); else _g.h["BUC"] = "C";
	if(__map_reserved.BUG != null) _g.setReserved("BUG","V"); else _g.h["BUG"] = "V";
	if(__map_reserved.BVP != null) _g.setReserved("BVP","U"); else _g.h["BVP"] = "U";
	if(__map_reserved.BZG != null) _g.setReserved("BZG","N"); else _g.h["BZG"] = "N";
	if(__map_reserved["C  "] != null) _g.setReserved("C  ","C"); else _g.h["C  "] = "C";
	if(__map_reserved.C12 != null) _g.setReserved("C12","TYG"); else _g.h["C12"] = "TYG";
	if(__map_reserved.C1X != null) _g.setReserved("C1X","K"); else _g.h["C1X"] = "K";
	if(__map_reserved.C25 != null) _g.setReserved("C25","C"); else _g.h["C25"] = "C";
	if(__map_reserved.C2L != null) _g.setReserved("C2L","C"); else _g.h["C2L"] = "C";
	if(__map_reserved.C2S != null) _g.setReserved("C2S","C"); else _g.h["C2S"] = "C";
	if(__map_reserved.C31 != null) _g.setReserved("C31","C"); else _g.h["C31"] = "C";
	if(__map_reserved.C32 != null) _g.setReserved("C32","C"); else _g.h["C32"] = "C";
	if(__map_reserved.C34 != null) _g.setReserved("C34","C"); else _g.h["C34"] = "C";
	if(__map_reserved.C36 != null) _g.setReserved("C36","C"); else _g.h["C36"] = "C";
	if(__map_reserved.C37 != null) _g.setReserved("C37","C"); else _g.h["C37"] = "C";
	if(__map_reserved.C38 != null) _g.setReserved("C38","C"); else _g.h["C38"] = "C";
	if(__map_reserved.C3Y != null) _g.setReserved("C3Y","C"); else _g.h["C3Y"] = "C";
	if(__map_reserved.C42 != null) _g.setReserved("C42","C"); else _g.h["C42"] = "C";
	if(__map_reserved.C43 != null) _g.setReserved("C43","C"); else _g.h["C43"] = "C";
	if(__map_reserved.C45 != null) _g.setReserved("C45","C"); else _g.h["C45"] = "C";
	if(__map_reserved.C46 != null) _g.setReserved("C46","C"); else _g.h["C46"] = "C";
	if(__map_reserved.C49 != null) _g.setReserved("C49","C"); else _g.h["C49"] = "C";
	if(__map_reserved.C4R != null) _g.setReserved("C4R","C"); else _g.h["C4R"] = "C";
	if(__map_reserved.C4S != null) _g.setReserved("C4S","C"); else _g.h["C4S"] = "C";
	if(__map_reserved.C5C != null) _g.setReserved("C5C","C"); else _g.h["C5C"] = "C";
	if(__map_reserved.C66 != null) _g.setReserved("C66","X"); else _g.h["C66"] = "X";
	if(__map_reserved.C6C != null) _g.setReserved("C6C","C"); else _g.h["C6C"] = "C";
	if(__map_reserved.C99 != null) _g.setReserved("C99","TFG"); else _g.h["C99"] = "TFG";
	if(__map_reserved.CAF != null) _g.setReserved("CAF","C"); else _g.h["CAF"] = "C";
	if(__map_reserved.CAL != null) _g.setReserved("CAL","X"); else _g.h["CAL"] = "X";
	if(__map_reserved.CAR != null) _g.setReserved("CAR","C"); else _g.h["CAR"] = "C";
	if(__map_reserved.CAS != null) _g.setReserved("CAS","C"); else _g.h["CAS"] = "C";
	if(__map_reserved.CAV != null) _g.setReserved("CAV","X"); else _g.h["CAV"] = "X";
	if(__map_reserved.CAY != null) _g.setReserved("CAY","C"); else _g.h["CAY"] = "C";
	if(__map_reserved.CB2 != null) _g.setReserved("CB2","C"); else _g.h["CB2"] = "C";
	if(__map_reserved.CBR != null) _g.setReserved("CBR","C"); else _g.h["CBR"] = "C";
	if(__map_reserved.CBV != null) _g.setReserved("CBV","C"); else _g.h["CBV"] = "C";
	if(__map_reserved.CCC != null) _g.setReserved("CCC","C"); else _g.h["CCC"] = "C";
	if(__map_reserved.CCL != null) _g.setReserved("CCL","K"); else _g.h["CCL"] = "K";
	if(__map_reserved.CCS != null) _g.setReserved("CCS","C"); else _g.h["CCS"] = "C";
	if(__map_reserved.CCY != null) _g.setReserved("CCY","CYG"); else _g.h["CCY"] = "CYG";
	if(__map_reserved.CDE != null) _g.setReserved("CDE","X"); else _g.h["CDE"] = "X";
	if(__map_reserved.CDV != null) _g.setReserved("CDV","X"); else _g.h["CDV"] = "X";
	if(__map_reserved.CDW != null) _g.setReserved("CDW","C"); else _g.h["CDW"] = "C";
	if(__map_reserved.CEA != null) _g.setReserved("CEA","C"); else _g.h["CEA"] = "C";
	if(__map_reserved.CFL != null) _g.setReserved("CFL","C"); else _g.h["CFL"] = "C";
	if(__map_reserved.CFY != null) _g.setReserved("CFY","FCYG"); else _g.h["CFY"] = "FCYG";
	if(__map_reserved.CG1 != null) _g.setReserved("CG1","G"); else _g.h["CG1"] = "G";
	if(__map_reserved.CGA != null) _g.setReserved("CGA","E"); else _g.h["CGA"] = "E";
	if(__map_reserved.CGU != null) _g.setReserved("CGU","E"); else _g.h["CGU"] = "E";
	if(__map_reserved["CH "] != null) _g.setReserved("CH ","C"); else _g.h["CH "] = "C";
	if(__map_reserved.CH6 != null) _g.setReserved("CH6","MYG"); else _g.h["CH6"] = "MYG";
	if(__map_reserved.CH7 != null) _g.setReserved("CH7","KYG"); else _g.h["CH7"] = "KYG";
	if(__map_reserved.CHF != null) _g.setReserved("CHF","X"); else _g.h["CHF"] = "X";
	if(__map_reserved.CHG != null) _g.setReserved("CHG","X"); else _g.h["CHG"] = "X";
	if(__map_reserved.CHP != null) _g.setReserved("CHP","G"); else _g.h["CHP"] = "G";
	if(__map_reserved.CHS != null) _g.setReserved("CHS","X"); else _g.h["CHS"] = "X";
	if(__map_reserved.CIR != null) _g.setReserved("CIR","R"); else _g.h["CIR"] = "R";
	if(__map_reserved.CJO != null) _g.setReserved("CJO","GYG"); else _g.h["CJO"] = "GYG";
	if(__map_reserved.CLE != null) _g.setReserved("CLE","L"); else _g.h["CLE"] = "L";
	if(__map_reserved.CLG != null) _g.setReserved("CLG","K"); else _g.h["CLG"] = "K";
	if(__map_reserved.CLH != null) _g.setReserved("CLH","K"); else _g.h["CLH"] = "K";
	if(__map_reserved.CLV != null) _g.setReserved("CLV","AFG"); else _g.h["CLV"] = "AFG";
	if(__map_reserved.CM0 != null) _g.setReserved("CM0","N"); else _g.h["CM0"] = "N";
	if(__map_reserved.CME != null) _g.setReserved("CME","C"); else _g.h["CME"] = "C";
	if(__map_reserved.CMH != null) _g.setReserved("CMH","C"); else _g.h["CMH"] = "C";
	if(__map_reserved.CML != null) _g.setReserved("CML","C"); else _g.h["CML"] = "C";
	if(__map_reserved.CMR != null) _g.setReserved("CMR","C"); else _g.h["CMR"] = "C";
	if(__map_reserved.CMT != null) _g.setReserved("CMT","C"); else _g.h["CMT"] = "C";
	if(__map_reserved.CNU != null) _g.setReserved("CNU","U"); else _g.h["CNU"] = "U";
	if(__map_reserved.CP1 != null) _g.setReserved("CP1","C"); else _g.h["CP1"] = "C";
	if(__map_reserved.CPC != null) _g.setReserved("CPC","X"); else _g.h["CPC"] = "X";
	if(__map_reserved.CPI != null) _g.setReserved("CPI","X"); else _g.h["CPI"] = "X";
	if(__map_reserved.CQR != null) _g.setReserved("CQR","GYG"); else _g.h["CQR"] = "GYG";
	if(__map_reserved.CR0 != null) _g.setReserved("CR0","TLG"); else _g.h["CR0"] = "TLG";
	if(__map_reserved.CR2 != null) _g.setReserved("CR2","GYG"); else _g.h["CR2"] = "GYG";
	if(__map_reserved.CR5 != null) _g.setReserved("CR5","G"); else _g.h["CR5"] = "G";
	if(__map_reserved.CR7 != null) _g.setReserved("CR7","KYG"); else _g.h["CR7"] = "KYG";
	if(__map_reserved.CR8 != null) _g.setReserved("CR8","HYG"); else _g.h["CR8"] = "HYG";
	if(__map_reserved.CRF != null) _g.setReserved("CRF","TWG"); else _g.h["CRF"] = "TWG";
	if(__map_reserved.CRG != null) _g.setReserved("CRG","THG"); else _g.h["CRG"] = "THG";
	if(__map_reserved.CRK != null) _g.setReserved("CRK","MYG"); else _g.h["CRK"] = "MYG";
	if(__map_reserved.CRO != null) _g.setReserved("CRO","GYG"); else _g.h["CRO"] = "GYG";
	if(__map_reserved.CRQ != null) _g.setReserved("CRQ","QYG"); else _g.h["CRQ"] = "QYG";
	if(__map_reserved.CRU != null) _g.setReserved("CRU","EYG"); else _g.h["CRU"] = "EYG";
	if(__map_reserved.CRW != null) _g.setReserved("CRW","ASG"); else _g.h["CRW"] = "ASG";
	if(__map_reserved.CRX != null) _g.setReserved("CRX","ASG"); else _g.h["CRX"] = "ASG";
	if(__map_reserved.CS0 != null) _g.setReserved("CS0","C"); else _g.h["CS0"] = "C";
	if(__map_reserved.CS1 != null) _g.setReserved("CS1","C"); else _g.h["CS1"] = "C";
	if(__map_reserved.CS3 != null) _g.setReserved("CS3","C"); else _g.h["CS3"] = "C";
	if(__map_reserved.CS4 != null) _g.setReserved("CS4","C"); else _g.h["CS4"] = "C";
	if(__map_reserved.CS8 != null) _g.setReserved("CS8","N"); else _g.h["CS8"] = "N";
	if(__map_reserved.CSA != null) _g.setReserved("CSA","C"); else _g.h["CSA"] = "C";
	if(__map_reserved.CSB != null) _g.setReserved("CSB","C"); else _g.h["CSB"] = "C";
	if(__map_reserved.CSD != null) _g.setReserved("CSD","C"); else _g.h["CSD"] = "C";
	if(__map_reserved.CSE != null) _g.setReserved("CSE","C"); else _g.h["CSE"] = "C";
	if(__map_reserved.CSF != null) _g.setReserved("CSF","C"); else _g.h["CSF"] = "C";
	if(__map_reserved.CSH != null) _g.setReserved("CSH","SHG"); else _g.h["CSH"] = "SHG";
	if(__map_reserved.CSI != null) _g.setReserved("CSI","G"); else _g.h["CSI"] = "G";
	if(__map_reserved.CSJ != null) _g.setReserved("CSJ","C"); else _g.h["CSJ"] = "C";
	if(__map_reserved.CSL != null) _g.setReserved("CSL","C"); else _g.h["CSL"] = "C";
	if(__map_reserved.CSO != null) _g.setReserved("CSO","C"); else _g.h["CSO"] = "C";
	if(__map_reserved.CSP != null) _g.setReserved("CSP","C"); else _g.h["CSP"] = "C";
	if(__map_reserved.CSR != null) _g.setReserved("CSR","C"); else _g.h["CSR"] = "C";
	if(__map_reserved.CSS != null) _g.setReserved("CSS","C"); else _g.h["CSS"] = "C";
	if(__map_reserved.CSU != null) _g.setReserved("CSU","C"); else _g.h["CSU"] = "C";
	if(__map_reserved.CSW != null) _g.setReserved("CSW","C"); else _g.h["CSW"] = "C";
	if(__map_reserved.CSX != null) _g.setReserved("CSX","C"); else _g.h["CSX"] = "C";
	if(__map_reserved.CSY != null) _g.setReserved("CSY","SYG"); else _g.h["CSY"] = "SYG";
	if(__map_reserved.CSZ != null) _g.setReserved("CSZ","C"); else _g.h["CSZ"] = "C";
	if(__map_reserved.CTE != null) _g.setReserved("CTE","W"); else _g.h["CTE"] = "W";
	if(__map_reserved.CTG != null) _g.setReserved("CTG","T"); else _g.h["CTG"] = "T";
	if(__map_reserved.CTH != null) _g.setReserved("CTH","T"); else _g.h["CTH"] = "T";
	if(__map_reserved.CUC != null) _g.setReserved("CUC","X"); else _g.h["CUC"] = "X";
	if(__map_reserved.CWR != null) _g.setReserved("CWR","S"); else _g.h["CWR"] = "S";
	if(__map_reserved.CXM != null) _g.setReserved("CXM","M"); else _g.h["CXM"] = "M";
	if(__map_reserved.CY0 != null) _g.setReserved("CY0","C"); else _g.h["CY0"] = "C";
	if(__map_reserved.CY1 != null) _g.setReserved("CY1","C"); else _g.h["CY1"] = "C";
	if(__map_reserved.CY3 != null) _g.setReserved("CY3","C"); else _g.h["CY3"] = "C";
	if(__map_reserved.CY4 != null) _g.setReserved("CY4","C"); else _g.h["CY4"] = "C";
	if(__map_reserved.CYA != null) _g.setReserved("CYA","C"); else _g.h["CYA"] = "C";
	if(__map_reserved.CYD != null) _g.setReserved("CYD","C"); else _g.h["CYD"] = "C";
	if(__map_reserved.CYF != null) _g.setReserved("CYF","C"); else _g.h["CYF"] = "C";
	if(__map_reserved.CYG != null) _g.setReserved("CYG","C"); else _g.h["CYG"] = "C";
	if(__map_reserved.CYJ != null) _g.setReserved("CYJ","X"); else _g.h["CYJ"] = "X";
	if(__map_reserved.CYM != null) _g.setReserved("CYM","C"); else _g.h["CYM"] = "C";
	if(__map_reserved.CYQ != null) _g.setReserved("CYQ","C"); else _g.h["CYQ"] = "C";
	if(__map_reserved.CYR != null) _g.setReserved("CYR","C"); else _g.h["CYR"] = "C";
	if(__map_reserved.CYS != null) _g.setReserved("CYS","C"); else _g.h["CYS"] = "C";
	if(__map_reserved.CZ2 != null) _g.setReserved("CZ2","C"); else _g.h["CZ2"] = "C";
	if(__map_reserved.CZO != null) _g.setReserved("CZO","GYG"); else _g.h["CZO"] = "GYG";
	if(__map_reserved.CZZ != null) _g.setReserved("CZZ","C"); else _g.h["CZZ"] = "C";
	if(__map_reserved.D11 != null) _g.setReserved("D11","T"); else _g.h["D11"] = "T";
	if(__map_reserved.D1P != null) _g.setReserved("D1P","N"); else _g.h["D1P"] = "N";
	if(__map_reserved["D3 "] != null) _g.setReserved("D3 ","N"); else _g.h["D3 "] = "N";
	if(__map_reserved.D33 != null) _g.setReserved("D33","N"); else _g.h["D33"] = "N";
	if(__map_reserved.D3P != null) _g.setReserved("D3P","G"); else _g.h["D3P"] = "G";
	if(__map_reserved.D3T != null) _g.setReserved("D3T","T"); else _g.h["D3T"] = "T";
	if(__map_reserved.D4M != null) _g.setReserved("D4M","T"); else _g.h["D4M"] = "T";
	if(__map_reserved.D4P != null) _g.setReserved("D4P","X"); else _g.h["D4P"] = "X";
	if(__map_reserved["DA "] != null) _g.setReserved("DA ","A"); else _g.h["DA "] = "A";
	if(__map_reserved.DA2 != null) _g.setReserved("DA2","X"); else _g.h["DA2"] = "X";
	if(__map_reserved.DAB != null) _g.setReserved("DAB","A"); else _g.h["DAB"] = "A";
	if(__map_reserved.DAH != null) _g.setReserved("DAH","F"); else _g.h["DAH"] = "F";
	if(__map_reserved.DAL != null) _g.setReserved("DAL","A"); else _g.h["DAL"] = "A";
	if(__map_reserved.DAR != null) _g.setReserved("DAR","R"); else _g.h["DAR"] = "R";
	if(__map_reserved.DAS != null) _g.setReserved("DAS","D"); else _g.h["DAS"] = "D";
	if(__map_reserved.DBB != null) _g.setReserved("DBB","T"); else _g.h["DBB"] = "T";
	if(__map_reserved.DBM != null) _g.setReserved("DBM","N"); else _g.h["DBM"] = "N";
	if(__map_reserved.DBS != null) _g.setReserved("DBS","S"); else _g.h["DBS"] = "S";
	if(__map_reserved.DBU != null) _g.setReserved("DBU","T"); else _g.h["DBU"] = "T";
	if(__map_reserved.DBY != null) _g.setReserved("DBY","Y"); else _g.h["DBY"] = "Y";
	if(__map_reserved.DBZ != null) _g.setReserved("DBZ","A"); else _g.h["DBZ"] = "A";
	if(__map_reserved["DC "] != null) _g.setReserved("DC ","C"); else _g.h["DC "] = "C";
	if(__map_reserved.DC2 != null) _g.setReserved("DC2","C"); else _g.h["DC2"] = "C";
	if(__map_reserved.DCG != null) _g.setReserved("DCG","G"); else _g.h["DCG"] = "G";
	if(__map_reserved.DCI != null) _g.setReserved("DCI","X"); else _g.h["DCI"] = "X";
	if(__map_reserved.DCL != null) _g.setReserved("DCL","X"); else _g.h["DCL"] = "X";
	if(__map_reserved.DCT != null) _g.setReserved("DCT","C"); else _g.h["DCT"] = "C";
	if(__map_reserved.DCY != null) _g.setReserved("DCY","C"); else _g.h["DCY"] = "C";
	if(__map_reserved.DDE != null) _g.setReserved("DDE","H"); else _g.h["DDE"] = "H";
	if(__map_reserved.DDG != null) _g.setReserved("DDG","G"); else _g.h["DDG"] = "G";
	if(__map_reserved.DDN != null) _g.setReserved("DDN","U"); else _g.h["DDN"] = "U";
	if(__map_reserved.DDX != null) _g.setReserved("DDX","N"); else _g.h["DDX"] = "N";
	if(__map_reserved.DFC != null) _g.setReserved("DFC","C"); else _g.h["DFC"] = "C";
	if(__map_reserved.DFG != null) _g.setReserved("DFG","G"); else _g.h["DFG"] = "G";
	if(__map_reserved.DFI != null) _g.setReserved("DFI","X"); else _g.h["DFI"] = "X";
	if(__map_reserved.DFO != null) _g.setReserved("DFO","X"); else _g.h["DFO"] = "X";
	if(__map_reserved.DFT != null) _g.setReserved("DFT","N"); else _g.h["DFT"] = "N";
	if(__map_reserved["DG "] != null) _g.setReserved("DG ","G"); else _g.h["DG "] = "G";
	if(__map_reserved.DGH != null) _g.setReserved("DGH","G"); else _g.h["DGH"] = "G";
	if(__map_reserved.DGI != null) _g.setReserved("DGI","G"); else _g.h["DGI"] = "G";
	if(__map_reserved.DGL != null) _g.setReserved("DGL","E"); else _g.h["DGL"] = "E";
	if(__map_reserved.DGN != null) _g.setReserved("DGN","Q"); else _g.h["DGN"] = "Q";
	if(__map_reserved.DHA != null) _g.setReserved("DHA","S"); else _g.h["DHA"] = "S";
	if(__map_reserved.DHI != null) _g.setReserved("DHI","H"); else _g.h["DHI"] = "H";
	if(__map_reserved.DHL != null) _g.setReserved("DHL","X"); else _g.h["DHL"] = "X";
	if(__map_reserved.DHN != null) _g.setReserved("DHN","V"); else _g.h["DHN"] = "V";
	if(__map_reserved.DHP != null) _g.setReserved("DHP","X"); else _g.h["DHP"] = "X";
	if(__map_reserved.DHU != null) _g.setReserved("DHU","U"); else _g.h["DHU"] = "U";
	if(__map_reserved.DHV != null) _g.setReserved("DHV","V"); else _g.h["DHV"] = "V";
	if(__map_reserved["DI "] != null) _g.setReserved("DI ","I"); else _g.h["DI "] = "I";
	if(__map_reserved.DIL != null) _g.setReserved("DIL","I"); else _g.h["DIL"] = "I";
	if(__map_reserved.DIR != null) _g.setReserved("DIR","R"); else _g.h["DIR"] = "R";
	if(__map_reserved.DIV != null) _g.setReserved("DIV","V"); else _g.h["DIV"] = "V";
	if(__map_reserved.DLE != null) _g.setReserved("DLE","L"); else _g.h["DLE"] = "L";
	if(__map_reserved.DLS != null) _g.setReserved("DLS","K"); else _g.h["DLS"] = "K";
	if(__map_reserved.DLY != null) _g.setReserved("DLY","K"); else _g.h["DLY"] = "K";
	if(__map_reserved.DM0 != null) _g.setReserved("DM0","K"); else _g.h["DM0"] = "K";
	if(__map_reserved.DMH != null) _g.setReserved("DMH","N"); else _g.h["DMH"] = "N";
	if(__map_reserved.DMK != null) _g.setReserved("DMK","D"); else _g.h["DMK"] = "D";
	if(__map_reserved.DMT != null) _g.setReserved("DMT","X"); else _g.h["DMT"] = "X";
	if(__map_reserved["DN "] != null) _g.setReserved("DN ","N"); else _g.h["DN "] = "N";
	if(__map_reserved.DNE != null) _g.setReserved("DNE","L"); else _g.h["DNE"] = "L";
	if(__map_reserved.DNG != null) _g.setReserved("DNG","L"); else _g.h["DNG"] = "L";
	if(__map_reserved.DNL != null) _g.setReserved("DNL","K"); else _g.h["DNL"] = "K";
	if(__map_reserved.DNM != null) _g.setReserved("DNM","L"); else _g.h["DNM"] = "L";
	if(__map_reserved.DNP != null) _g.setReserved("DNP","A"); else _g.h["DNP"] = "A";
	if(__map_reserved.DNR != null) _g.setReserved("DNR","C"); else _g.h["DNR"] = "C";
	if(__map_reserved.DNS != null) _g.setReserved("DNS","K"); else _g.h["DNS"] = "K";
	if(__map_reserved.DOA != null) _g.setReserved("DOA","X"); else _g.h["DOA"] = "X";
	if(__map_reserved.DOC != null) _g.setReserved("DOC","C"); else _g.h["DOC"] = "C";
	if(__map_reserved.DOH != null) _g.setReserved("DOH","D"); else _g.h["DOH"] = "D";
	if(__map_reserved.DON != null) _g.setReserved("DON","L"); else _g.h["DON"] = "L";
	if(__map_reserved.DPB != null) _g.setReserved("DPB","T"); else _g.h["DPB"] = "T";
	if(__map_reserved.DPH != null) _g.setReserved("DPH","F"); else _g.h["DPH"] = "F";
	if(__map_reserved.DPL != null) _g.setReserved("DPL","P"); else _g.h["DPL"] = "P";
	if(__map_reserved.DPP != null) _g.setReserved("DPP","A"); else _g.h["DPP"] = "A";
	if(__map_reserved.DPQ != null) _g.setReserved("DPQ","Y"); else _g.h["DPQ"] = "Y";
	if(__map_reserved.DPR != null) _g.setReserved("DPR","P"); else _g.h["DPR"] = "P";
	if(__map_reserved.DPY != null) _g.setReserved("DPY","N"); else _g.h["DPY"] = "N";
	if(__map_reserved.DRM != null) _g.setReserved("DRM","U"); else _g.h["DRM"] = "U";
	if(__map_reserved.DRP != null) _g.setReserved("DRP","N"); else _g.h["DRP"] = "N";
	if(__map_reserved.DRT != null) _g.setReserved("DRT","T"); else _g.h["DRT"] = "T";
	if(__map_reserved.DRZ != null) _g.setReserved("DRZ","N"); else _g.h["DRZ"] = "N";
	if(__map_reserved.DSE != null) _g.setReserved("DSE","S"); else _g.h["DSE"] = "S";
	if(__map_reserved.DSG != null) _g.setReserved("DSG","N"); else _g.h["DSG"] = "N";
	if(__map_reserved.DSN != null) _g.setReserved("DSN","S"); else _g.h["DSN"] = "S";
	if(__map_reserved.DSP != null) _g.setReserved("DSP","D"); else _g.h["DSP"] = "D";
	if(__map_reserved["DT "] != null) _g.setReserved("DT ","T"); else _g.h["DT "] = "T";
	if(__map_reserved.DTH != null) _g.setReserved("DTH","T"); else _g.h["DTH"] = "T";
	if(__map_reserved.DTR != null) _g.setReserved("DTR","W"); else _g.h["DTR"] = "W";
	if(__map_reserved.DTY != null) _g.setReserved("DTY","Y"); else _g.h["DTY"] = "Y";
	if(__map_reserved["DU "] != null) _g.setReserved("DU ","U"); else _g.h["DU "] = "U";
	if(__map_reserved.DVA != null) _g.setReserved("DVA","V"); else _g.h["DVA"] = "V";
	if(__map_reserved.DXD != null) _g.setReserved("DXD","N"); else _g.h["DXD"] = "N";
	if(__map_reserved.DXN != null) _g.setReserved("DXN","N"); else _g.h["DXN"] = "N";
	if(__map_reserved.DYG != null) _g.setReserved("DYG","DYG"); else _g.h["DYG"] = "DYG";
	if(__map_reserved.DYS != null) _g.setReserved("DYS","C"); else _g.h["DYS"] = "C";
	if(__map_reserved.DZM != null) _g.setReserved("DZM","A"); else _g.h["DZM"] = "A";
	if(__map_reserved["E  "] != null) _g.setReserved("E  ","A"); else _g.h["E  "] = "A";
	if(__map_reserved.E1X != null) _g.setReserved("E1X","A"); else _g.h["E1X"] = "A";
	if(__map_reserved.ECC != null) _g.setReserved("ECC","Q"); else _g.h["ECC"] = "Q";
	if(__map_reserved.EDA != null) _g.setReserved("EDA","A"); else _g.h["EDA"] = "A";
	if(__map_reserved.EFC != null) _g.setReserved("EFC","C"); else _g.h["EFC"] = "C";
	if(__map_reserved.EHP != null) _g.setReserved("EHP","F"); else _g.h["EHP"] = "F";
	if(__map_reserved.EIT != null) _g.setReserved("EIT","T"); else _g.h["EIT"] = "T";
	if(__map_reserved.ENP != null) _g.setReserved("ENP","N"); else _g.h["ENP"] = "N";
	if(__map_reserved.ESB != null) _g.setReserved("ESB","Y"); else _g.h["ESB"] = "Y";
	if(__map_reserved.ESC != null) _g.setReserved("ESC","M"); else _g.h["ESC"] = "M";
	if(__map_reserved.EXB != null) _g.setReserved("EXB","X"); else _g.h["EXB"] = "X";
	if(__map_reserved.EXY != null) _g.setReserved("EXY","L"); else _g.h["EXY"] = "L";
	if(__map_reserved.EY5 != null) _g.setReserved("EY5","N"); else _g.h["EY5"] = "N";
	if(__map_reserved.EYS != null) _g.setReserved("EYS","X"); else _g.h["EYS"] = "X";
	if(__map_reserved.F2F != null) _g.setReserved("F2F","F"); else _g.h["F2F"] = "F";
	if(__map_reserved.FA2 != null) _g.setReserved("FA2","A"); else _g.h["FA2"] = "A";
	if(__map_reserved.FA5 != null) _g.setReserved("FA5","N"); else _g.h["FA5"] = "N";
	if(__map_reserved.FAG != null) _g.setReserved("FAG","N"); else _g.h["FAG"] = "N";
	if(__map_reserved.FAI != null) _g.setReserved("FAI","N"); else _g.h["FAI"] = "N";
	if(__map_reserved.FB5 != null) _g.setReserved("FB5","A"); else _g.h["FB5"] = "A";
	if(__map_reserved.FB6 != null) _g.setReserved("FB6","A"); else _g.h["FB6"] = "A";
	if(__map_reserved.FCL != null) _g.setReserved("FCL","F"); else _g.h["FCL"] = "F";
	if(__map_reserved.FFD != null) _g.setReserved("FFD","N"); else _g.h["FFD"] = "N";
	if(__map_reserved.FGA != null) _g.setReserved("FGA","E"); else _g.h["FGA"] = "E";
	if(__map_reserved.FGL != null) _g.setReserved("FGL","G"); else _g.h["FGL"] = "G";
	if(__map_reserved.FGP != null) _g.setReserved("FGP","S"); else _g.h["FGP"] = "S";
	if(__map_reserved.FHL != null) _g.setReserved("FHL","X"); else _g.h["FHL"] = "X";
	if(__map_reserved.FHO != null) _g.setReserved("FHO","K"); else _g.h["FHO"] = "K";
	if(__map_reserved.FHU != null) _g.setReserved("FHU","U"); else _g.h["FHU"] = "U";
	if(__map_reserved.FLA != null) _g.setReserved("FLA","A"); else _g.h["FLA"] = "A";
	if(__map_reserved.FLE != null) _g.setReserved("FLE","L"); else _g.h["FLE"] = "L";
	if(__map_reserved.FLT != null) _g.setReserved("FLT","Y"); else _g.h["FLT"] = "Y";
	if(__map_reserved.FME != null) _g.setReserved("FME","M"); else _g.h["FME"] = "M";
	if(__map_reserved.FMG != null) _g.setReserved("FMG","G"); else _g.h["FMG"] = "G";
	if(__map_reserved.FMU != null) _g.setReserved("FMU","N"); else _g.h["FMU"] = "N";
	if(__map_reserved.FOE != null) _g.setReserved("FOE","C"); else _g.h["FOE"] = "C";
	if(__map_reserved.FOX != null) _g.setReserved("FOX","G"); else _g.h["FOX"] = "G";
	if(__map_reserved.FP9 != null) _g.setReserved("FP9","P"); else _g.h["FP9"] = "P";
	if(__map_reserved.FPA != null) _g.setReserved("FPA","F"); else _g.h["FPA"] = "F";
	if(__map_reserved.FRD != null) _g.setReserved("FRD","X"); else _g.h["FRD"] = "X";
	if(__map_reserved.FT6 != null) _g.setReserved("FT6","W"); else _g.h["FT6"] = "W";
	if(__map_reserved.FTR != null) _g.setReserved("FTR","W"); else _g.h["FTR"] = "W";
	if(__map_reserved.FTY != null) _g.setReserved("FTY","Y"); else _g.h["FTY"] = "Y";
	if(__map_reserved.FVA != null) _g.setReserved("FVA","V"); else _g.h["FVA"] = "V";
	if(__map_reserved.FZN != null) _g.setReserved("FZN","K"); else _g.h["FZN"] = "K";
	if(__map_reserved["G  "] != null) _g.setReserved("G  ","G"); else _g.h["G  "] = "G";
	if(__map_reserved.G25 != null) _g.setReserved("G25","G"); else _g.h["G25"] = "G";
	if(__map_reserved.G2L != null) _g.setReserved("G2L","G"); else _g.h["G2L"] = "G";
	if(__map_reserved.G2S != null) _g.setReserved("G2S","G"); else _g.h["G2S"] = "G";
	if(__map_reserved.G31 != null) _g.setReserved("G31","G"); else _g.h["G31"] = "G";
	if(__map_reserved.G32 != null) _g.setReserved("G32","G"); else _g.h["G32"] = "G";
	if(__map_reserved.G33 != null) _g.setReserved("G33","G"); else _g.h["G33"] = "G";
	if(__map_reserved.G36 != null) _g.setReserved("G36","G"); else _g.h["G36"] = "G";
	if(__map_reserved.G38 != null) _g.setReserved("G38","G"); else _g.h["G38"] = "G";
	if(__map_reserved.G42 != null) _g.setReserved("G42","G"); else _g.h["G42"] = "G";
	if(__map_reserved.G46 != null) _g.setReserved("G46","G"); else _g.h["G46"] = "G";
	if(__map_reserved.G47 != null) _g.setReserved("G47","G"); else _g.h["G47"] = "G";
	if(__map_reserved.G48 != null) _g.setReserved("G48","G"); else _g.h["G48"] = "G";
	if(__map_reserved.G49 != null) _g.setReserved("G49","G"); else _g.h["G49"] = "G";
	if(__map_reserved.G4P != null) _g.setReserved("G4P","N"); else _g.h["G4P"] = "N";
	if(__map_reserved.G7M != null) _g.setReserved("G7M","G"); else _g.h["G7M"] = "G";
	if(__map_reserved.GAO != null) _g.setReserved("GAO","G"); else _g.h["GAO"] = "G";
	if(__map_reserved.GAU != null) _g.setReserved("GAU","E"); else _g.h["GAU"] = "E";
	if(__map_reserved.GCK != null) _g.setReserved("GCK","C"); else _g.h["GCK"] = "C";
	if(__map_reserved.GCM != null) _g.setReserved("GCM","X"); else _g.h["GCM"] = "X";
	if(__map_reserved.GDP != null) _g.setReserved("GDP","G"); else _g.h["GDP"] = "G";
	if(__map_reserved.GDR != null) _g.setReserved("GDR","G"); else _g.h["GDR"] = "G";
	if(__map_reserved.GFL != null) _g.setReserved("GFL","G"); else _g.h["GFL"] = "G";
	if(__map_reserved.GGL != null) _g.setReserved("GGL","E"); else _g.h["GGL"] = "E";
	if(__map_reserved.GH3 != null) _g.setReserved("GH3","G"); else _g.h["GH3"] = "G";
	if(__map_reserved.GHG != null) _g.setReserved("GHG","Q"); else _g.h["GHG"] = "Q";
	if(__map_reserved.GHP != null) _g.setReserved("GHP","G"); else _g.h["GHP"] = "G";
	if(__map_reserved.GL3 != null) _g.setReserved("GL3","G"); else _g.h["GL3"] = "G";
	if(__map_reserved.GLH != null) _g.setReserved("GLH","Q"); else _g.h["GLH"] = "Q";
	if(__map_reserved.GLJ != null) _g.setReserved("GLJ","E"); else _g.h["GLJ"] = "E";
	if(__map_reserved.GLK != null) _g.setReserved("GLK","E"); else _g.h["GLK"] = "E";
	if(__map_reserved.GLM != null) _g.setReserved("GLM","X"); else _g.h["GLM"] = "X";
	if(__map_reserved.GLN != null) _g.setReserved("GLN","Q"); else _g.h["GLN"] = "Q";
	if(__map_reserved.GLQ != null) _g.setReserved("GLQ","E"); else _g.h["GLQ"] = "E";
	if(__map_reserved.GLU != null) _g.setReserved("GLU","E"); else _g.h["GLU"] = "E";
	if(__map_reserved.GLX != null) _g.setReserved("GLX","Z"); else _g.h["GLX"] = "Z";
	if(__map_reserved.GLY != null) _g.setReserved("GLY","G"); else _g.h["GLY"] = "G";
	if(__map_reserved.GLZ != null) _g.setReserved("GLZ","G"); else _g.h["GLZ"] = "G";
	if(__map_reserved.GMA != null) _g.setReserved("GMA","E"); else _g.h["GMA"] = "E";
	if(__map_reserved.GMS != null) _g.setReserved("GMS","G"); else _g.h["GMS"] = "G";
	if(__map_reserved.GMU != null) _g.setReserved("GMU","U"); else _g.h["GMU"] = "U";
	if(__map_reserved.GN7 != null) _g.setReserved("GN7","G"); else _g.h["GN7"] = "G";
	if(__map_reserved.GND != null) _g.setReserved("GND","X"); else _g.h["GND"] = "X";
	if(__map_reserved.GNE != null) _g.setReserved("GNE","N"); else _g.h["GNE"] = "N";
	if(__map_reserved.GOM != null) _g.setReserved("GOM","G"); else _g.h["GOM"] = "G";
	if(__map_reserved.GPL != null) _g.setReserved("GPL","K"); else _g.h["GPL"] = "K";
	if(__map_reserved["GS "] != null) _g.setReserved("GS ","G"); else _g.h["GS "] = "G";
	if(__map_reserved.GSC != null) _g.setReserved("GSC","G"); else _g.h["GSC"] = "G";
	if(__map_reserved.GSR != null) _g.setReserved("GSR","G"); else _g.h["GSR"] = "G";
	if(__map_reserved.GSS != null) _g.setReserved("GSS","G"); else _g.h["GSS"] = "G";
	if(__map_reserved.GSU != null) _g.setReserved("GSU","E"); else _g.h["GSU"] = "E";
	if(__map_reserved.GT9 != null) _g.setReserved("GT9","C"); else _g.h["GT9"] = "C";
	if(__map_reserved.GTP != null) _g.setReserved("GTP","G"); else _g.h["GTP"] = "G";
	if(__map_reserved.GVL != null) _g.setReserved("GVL","X"); else _g.h["GVL"] = "X";
	if(__map_reserved.GYC != null) _g.setReserved("GYC","CYG"); else _g.h["GYC"] = "CYG";
	if(__map_reserved.GYS != null) _g.setReserved("GYS","SYG"); else _g.h["GYS"] = "SYG";
	if(__map_reserved.H2U != null) _g.setReserved("H2U","U"); else _g.h["H2U"] = "U";
	if(__map_reserved.H5M != null) _g.setReserved("H5M","P"); else _g.h["H5M"] = "P";
	if(__map_reserved.HAC != null) _g.setReserved("HAC","A"); else _g.h["HAC"] = "A";
	if(__map_reserved.HAR != null) _g.setReserved("HAR","R"); else _g.h["HAR"] = "R";
	if(__map_reserved.HBN != null) _g.setReserved("HBN","H"); else _g.h["HBN"] = "H";
	if(__map_reserved.HCS != null) _g.setReserved("HCS","X"); else _g.h["HCS"] = "X";
	if(__map_reserved.HDP != null) _g.setReserved("HDP","U"); else _g.h["HDP"] = "U";
	if(__map_reserved.HEU != null) _g.setReserved("HEU","U"); else _g.h["HEU"] = "U";
	if(__map_reserved.HFA != null) _g.setReserved("HFA","X"); else _g.h["HFA"] = "X";
	if(__map_reserved.HGL != null) _g.setReserved("HGL","X"); else _g.h["HGL"] = "X";
	if(__map_reserved.HHI != null) _g.setReserved("HHI","H"); else _g.h["HHI"] = "H";
	if(__map_reserved.HHK != null) _g.setReserved("HHK","AK"); else _g.h["HHK"] = "AK";
	if(__map_reserved.HIA != null) _g.setReserved("HIA","H"); else _g.h["HIA"] = "H";
	if(__map_reserved.HIC != null) _g.setReserved("HIC","H"); else _g.h["HIC"] = "H";
	if(__map_reserved.HIP != null) _g.setReserved("HIP","H"); else _g.h["HIP"] = "H";
	if(__map_reserved.HIQ != null) _g.setReserved("HIQ","H"); else _g.h["HIQ"] = "H";
	if(__map_reserved.HIS != null) _g.setReserved("HIS","H"); else _g.h["HIS"] = "H";
	if(__map_reserved.HL2 != null) _g.setReserved("HL2","L"); else _g.h["HL2"] = "L";
	if(__map_reserved.HLU != null) _g.setReserved("HLU","L"); else _g.h["HLU"] = "L";
	if(__map_reserved.HMR != null) _g.setReserved("HMR","R"); else _g.h["HMR"] = "R";
	if(__map_reserved.HOL != null) _g.setReserved("HOL","N"); else _g.h["HOL"] = "N";
	if(__map_reserved.HPC != null) _g.setReserved("HPC","F"); else _g.h["HPC"] = "F";
	if(__map_reserved.HPE != null) _g.setReserved("HPE","F"); else _g.h["HPE"] = "F";
	if(__map_reserved.HPH != null) _g.setReserved("HPH","F"); else _g.h["HPH"] = "F";
	if(__map_reserved.HPQ != null) _g.setReserved("HPQ","F"); else _g.h["HPQ"] = "F";
	if(__map_reserved.HQA != null) _g.setReserved("HQA","A"); else _g.h["HQA"] = "A";
	if(__map_reserved.HRG != null) _g.setReserved("HRG","R"); else _g.h["HRG"] = "R";
	if(__map_reserved.HRP != null) _g.setReserved("HRP","W"); else _g.h["HRP"] = "W";
	if(__map_reserved.HS8 != null) _g.setReserved("HS8","H"); else _g.h["HS8"] = "H";
	if(__map_reserved.HS9 != null) _g.setReserved("HS9","H"); else _g.h["HS9"] = "H";
	if(__map_reserved.HSE != null) _g.setReserved("HSE","S"); else _g.h["HSE"] = "S";
	if(__map_reserved.HSL != null) _g.setReserved("HSL","S"); else _g.h["HSL"] = "S";
	if(__map_reserved.HSO != null) _g.setReserved("HSO","H"); else _g.h["HSO"] = "H";
	if(__map_reserved.HTI != null) _g.setReserved("HTI","C"); else _g.h["HTI"] = "C";
	if(__map_reserved.HTN != null) _g.setReserved("HTN","N"); else _g.h["HTN"] = "N";
	if(__map_reserved.HTR != null) _g.setReserved("HTR","W"); else _g.h["HTR"] = "W";
	if(__map_reserved.HV5 != null) _g.setReserved("HV5","A"); else _g.h["HV5"] = "A";
	if(__map_reserved.HVA != null) _g.setReserved("HVA","V"); else _g.h["HVA"] = "V";
	if(__map_reserved.HY3 != null) _g.setReserved("HY3","P"); else _g.h["HY3"] = "P";
	if(__map_reserved.HYP != null) _g.setReserved("HYP","P"); else _g.h["HYP"] = "P";
	if(__map_reserved.HZP != null) _g.setReserved("HZP","P"); else _g.h["HZP"] = "P";
	if(__map_reserved["I  "] != null) _g.setReserved("I  ","I"); else _g.h["I  "] = "I";
	if(__map_reserved.I2M != null) _g.setReserved("I2M","I"); else _g.h["I2M"] = "I";
	if(__map_reserved.I58 != null) _g.setReserved("I58","K"); else _g.h["I58"] = "K";
	if(__map_reserved.I5C != null) _g.setReserved("I5C","C"); else _g.h["I5C"] = "C";
	if(__map_reserved.IAM != null) _g.setReserved("IAM","A"); else _g.h["IAM"] = "A";
	if(__map_reserved.IAR != null) _g.setReserved("IAR","R"); else _g.h["IAR"] = "R";
	if(__map_reserved.IAS != null) _g.setReserved("IAS","D"); else _g.h["IAS"] = "D";
	if(__map_reserved["IC "] != null) _g.setReserved("IC ","C"); else _g.h["IC "] = "C";
	if(__map_reserved.IEL != null) _g.setReserved("IEL","K"); else _g.h["IEL"] = "K";
	if(__map_reserved.IEY != null) _g.setReserved("IEY","HYG"); else _g.h["IEY"] = "HYG";
	if(__map_reserved["IG "] != null) _g.setReserved("IG ","G"); else _g.h["IG "] = "G";
	if(__map_reserved.IGL != null) _g.setReserved("IGL","G"); else _g.h["IGL"] = "G";
	if(__map_reserved.IGU != null) _g.setReserved("IGU","G"); else _g.h["IGU"] = "G";
	if(__map_reserved.IIC != null) _g.setReserved("IIC","SHG"); else _g.h["IIC"] = "SHG";
	if(__map_reserved.IIL != null) _g.setReserved("IIL","I"); else _g.h["IIL"] = "I";
	if(__map_reserved.ILE != null) _g.setReserved("ILE","I"); else _g.h["ILE"] = "I";
	if(__map_reserved.ILG != null) _g.setReserved("ILG","E"); else _g.h["ILG"] = "E";
	if(__map_reserved.ILX != null) _g.setReserved("ILX","I"); else _g.h["ILX"] = "I";
	if(__map_reserved.IMC != null) _g.setReserved("IMC","C"); else _g.h["IMC"] = "C";
	if(__map_reserved.IML != null) _g.setReserved("IML","I"); else _g.h["IML"] = "I";
	if(__map_reserved.IOY != null) _g.setReserved("IOY","F"); else _g.h["IOY"] = "F";
	if(__map_reserved.IPG != null) _g.setReserved("IPG","G"); else _g.h["IPG"] = "G";
	if(__map_reserved.IPN != null) _g.setReserved("IPN","N"); else _g.h["IPN"] = "N";
	if(__map_reserved.IRN != null) _g.setReserved("IRN","N"); else _g.h["IRN"] = "N";
	if(__map_reserved.IT1 != null) _g.setReserved("IT1","K"); else _g.h["IT1"] = "K";
	if(__map_reserved["IU "] != null) _g.setReserved("IU ","U"); else _g.h["IU "] = "U";
	if(__map_reserved.IYR != null) _g.setReserved("IYR","Y"); else _g.h["IYR"] = "Y";
	if(__map_reserved.IYT != null) _g.setReserved("IYT","T"); else _g.h["IYT"] = "T";
	if(__map_reserved.IZO != null) _g.setReserved("IZO","M"); else _g.h["IZO"] = "M";
	if(__map_reserved.JJJ != null) _g.setReserved("JJJ","C"); else _g.h["JJJ"] = "C";
	if(__map_reserved.JJK != null) _g.setReserved("JJK","C"); else _g.h["JJK"] = "C";
	if(__map_reserved.JJL != null) _g.setReserved("JJL","C"); else _g.h["JJL"] = "C";
	if(__map_reserved.JW5 != null) _g.setReserved("JW5","N"); else _g.h["JW5"] = "N";
	if(__map_reserved.K1R != null) _g.setReserved("K1R","C"); else _g.h["K1R"] = "C";
	if(__map_reserved.KAG != null) _g.setReserved("KAG","G"); else _g.h["KAG"] = "G";
	if(__map_reserved.KCX != null) _g.setReserved("KCX","K"); else _g.h["KCX"] = "K";
	if(__map_reserved.KGC != null) _g.setReserved("KGC","K"); else _g.h["KGC"] = "K";
	if(__map_reserved.KNB != null) _g.setReserved("KNB","A"); else _g.h["KNB"] = "A";
	if(__map_reserved.KOR != null) _g.setReserved("KOR","M"); else _g.h["KOR"] = "M";
	if(__map_reserved.KPI != null) _g.setReserved("KPI","K"); else _g.h["KPI"] = "K";
	if(__map_reserved.KST != null) _g.setReserved("KST","K"); else _g.h["KST"] = "K";
	if(__map_reserved.KYQ != null) _g.setReserved("KYQ","K"); else _g.h["KYQ"] = "K";
	if(__map_reserved.L2A != null) _g.setReserved("L2A","X"); else _g.h["L2A"] = "X";
	if(__map_reserved.LA2 != null) _g.setReserved("LA2","K"); else _g.h["LA2"] = "K";
	if(__map_reserved.LAA != null) _g.setReserved("LAA","D"); else _g.h["LAA"] = "D";
	if(__map_reserved.LAL != null) _g.setReserved("LAL","A"); else _g.h["LAL"] = "A";
	if(__map_reserved.LBY != null) _g.setReserved("LBY","K"); else _g.h["LBY"] = "K";
	if(__map_reserved["LC "] != null) _g.setReserved("LC ","C"); else _g.h["LC "] = "C";
	if(__map_reserved.LCA != null) _g.setReserved("LCA","A"); else _g.h["LCA"] = "A";
	if(__map_reserved.LCC != null) _g.setReserved("LCC","N"); else _g.h["LCC"] = "N";
	if(__map_reserved.LCG != null) _g.setReserved("LCG","G"); else _g.h["LCG"] = "G";
	if(__map_reserved.LCH != null) _g.setReserved("LCH","N"); else _g.h["LCH"] = "N";
	if(__map_reserved.LCK != null) _g.setReserved("LCK","K"); else _g.h["LCK"] = "K";
	if(__map_reserved.LCX != null) _g.setReserved("LCX","K"); else _g.h["LCX"] = "K";
	if(__map_reserved.LDH != null) _g.setReserved("LDH","K"); else _g.h["LDH"] = "K";
	if(__map_reserved.LED != null) _g.setReserved("LED","L"); else _g.h["LED"] = "L";
	if(__map_reserved.LEF != null) _g.setReserved("LEF","L"); else _g.h["LEF"] = "L";
	if(__map_reserved.LEH != null) _g.setReserved("LEH","L"); else _g.h["LEH"] = "L";
	if(__map_reserved.LEI != null) _g.setReserved("LEI","V"); else _g.h["LEI"] = "V";
	if(__map_reserved.LEM != null) _g.setReserved("LEM","L"); else _g.h["LEM"] = "L";
	if(__map_reserved.LEN != null) _g.setReserved("LEN","L"); else _g.h["LEN"] = "L";
	if(__map_reserved.LET != null) _g.setReserved("LET","X"); else _g.h["LET"] = "X";
	if(__map_reserved.LEU != null) _g.setReserved("LEU","L"); else _g.h["LEU"] = "L";
	if(__map_reserved.LEX != null) _g.setReserved("LEX","L"); else _g.h["LEX"] = "L";
	if(__map_reserved["LG "] != null) _g.setReserved("LG ","G"); else _g.h["LG "] = "G";
	if(__map_reserved.LGP != null) _g.setReserved("LGP","G"); else _g.h["LGP"] = "G";
	if(__map_reserved.LHC != null) _g.setReserved("LHC","X"); else _g.h["LHC"] = "X";
	if(__map_reserved.LHU != null) _g.setReserved("LHU","U"); else _g.h["LHU"] = "U";
	if(__map_reserved.LKC != null) _g.setReserved("LKC","N"); else _g.h["LKC"] = "N";
	if(__map_reserved.LLP != null) _g.setReserved("LLP","K"); else _g.h["LLP"] = "K";
	if(__map_reserved.LLY != null) _g.setReserved("LLY","K"); else _g.h["LLY"] = "K";
	if(__map_reserved.LME != null) _g.setReserved("LME","E"); else _g.h["LME"] = "E";
	if(__map_reserved.LMF != null) _g.setReserved("LMF","K"); else _g.h["LMF"] = "K";
	if(__map_reserved.LMQ != null) _g.setReserved("LMQ","Q"); else _g.h["LMQ"] = "Q";
	if(__map_reserved.LMS != null) _g.setReserved("LMS","N"); else _g.h["LMS"] = "N";
	if(__map_reserved.LP6 != null) _g.setReserved("LP6","K"); else _g.h["LP6"] = "K";
	if(__map_reserved.LPD != null) _g.setReserved("LPD","P"); else _g.h["LPD"] = "P";
	if(__map_reserved.LPG != null) _g.setReserved("LPG","G"); else _g.h["LPG"] = "G";
	if(__map_reserved.LPL != null) _g.setReserved("LPL","X"); else _g.h["LPL"] = "X";
	if(__map_reserved.LPS != null) _g.setReserved("LPS","S"); else _g.h["LPS"] = "S";
	if(__map_reserved.LSO != null) _g.setReserved("LSO","X"); else _g.h["LSO"] = "X";
	if(__map_reserved.LTA != null) _g.setReserved("LTA","X"); else _g.h["LTA"] = "X";
	if(__map_reserved.LTR != null) _g.setReserved("LTR","W"); else _g.h["LTR"] = "W";
	if(__map_reserved.LVG != null) _g.setReserved("LVG","G"); else _g.h["LVG"] = "G";
	if(__map_reserved.LVN != null) _g.setReserved("LVN","V"); else _g.h["LVN"] = "V";
	if(__map_reserved.LYF != null) _g.setReserved("LYF","K"); else _g.h["LYF"] = "K";
	if(__map_reserved.LYK != null) _g.setReserved("LYK","K"); else _g.h["LYK"] = "K";
	if(__map_reserved.LYM != null) _g.setReserved("LYM","K"); else _g.h["LYM"] = "K";
	if(__map_reserved.LYN != null) _g.setReserved("LYN","K"); else _g.h["LYN"] = "K";
	if(__map_reserved.LYR != null) _g.setReserved("LYR","K"); else _g.h["LYR"] = "K";
	if(__map_reserved.LYS != null) _g.setReserved("LYS","K"); else _g.h["LYS"] = "K";
	if(__map_reserved.LYX != null) _g.setReserved("LYX","K"); else _g.h["LYX"] = "K";
	if(__map_reserved.LYZ != null) _g.setReserved("LYZ","K"); else _g.h["LYZ"] = "K";
	if(__map_reserved.M0H != null) _g.setReserved("M0H","C"); else _g.h["M0H"] = "C";
	if(__map_reserved.M1G != null) _g.setReserved("M1G","G"); else _g.h["M1G"] = "G";
	if(__map_reserved.M2G != null) _g.setReserved("M2G","G"); else _g.h["M2G"] = "G";
	if(__map_reserved.M2L != null) _g.setReserved("M2L","K"); else _g.h["M2L"] = "K";
	if(__map_reserved.M2S != null) _g.setReserved("M2S","M"); else _g.h["M2S"] = "M";
	if(__map_reserved.M30 != null) _g.setReserved("M30","G"); else _g.h["M30"] = "G";
	if(__map_reserved.M3L != null) _g.setReserved("M3L","K"); else _g.h["M3L"] = "K";
	if(__map_reserved.M5M != null) _g.setReserved("M5M","C"); else _g.h["M5M"] = "C";
	if(__map_reserved["MA "] != null) _g.setReserved("MA ","A"); else _g.h["MA "] = "A";
	if(__map_reserved.MA6 != null) _g.setReserved("MA6","A"); else _g.h["MA6"] = "A";
	if(__map_reserved.MA7 != null) _g.setReserved("MA7","A"); else _g.h["MA7"] = "A";
	if(__map_reserved.MAA != null) _g.setReserved("MAA","A"); else _g.h["MAA"] = "A";
	if(__map_reserved.MAD != null) _g.setReserved("MAD","A"); else _g.h["MAD"] = "A";
	if(__map_reserved.MAI != null) _g.setReserved("MAI","R"); else _g.h["MAI"] = "R";
	if(__map_reserved.MBQ != null) _g.setReserved("MBQ","Y"); else _g.h["MBQ"] = "Y";
	if(__map_reserved.MBZ != null) _g.setReserved("MBZ","N"); else _g.h["MBZ"] = "N";
	if(__map_reserved.MC1 != null) _g.setReserved("MC1","S"); else _g.h["MC1"] = "S";
	if(__map_reserved.MCG != null) _g.setReserved("MCG","X"); else _g.h["MCG"] = "X";
	if(__map_reserved.MCL != null) _g.setReserved("MCL","K"); else _g.h["MCL"] = "K";
	if(__map_reserved.MCS != null) _g.setReserved("MCS","C"); else _g.h["MCS"] = "C";
	if(__map_reserved.MCY != null) _g.setReserved("MCY","C"); else _g.h["MCY"] = "C";
	if(__map_reserved.MD3 != null) _g.setReserved("MD3","C"); else _g.h["MD3"] = "C";
	if(__map_reserved.MD6 != null) _g.setReserved("MD6","G"); else _g.h["MD6"] = "G";
	if(__map_reserved.MDH != null) _g.setReserved("MDH","X"); else _g.h["MDH"] = "X";
	if(__map_reserved.MDO != null) _g.setReserved("MDO","ASG"); else _g.h["MDO"] = "ASG";
	if(__map_reserved.MDR != null) _g.setReserved("MDR","N"); else _g.h["MDR"] = "N";
	if(__map_reserved.MEA != null) _g.setReserved("MEA","F"); else _g.h["MEA"] = "F";
	if(__map_reserved.MED != null) _g.setReserved("MED","M"); else _g.h["MED"] = "M";
	if(__map_reserved.MEG != null) _g.setReserved("MEG","E"); else _g.h["MEG"] = "E";
	if(__map_reserved.MEN != null) _g.setReserved("MEN","N"); else _g.h["MEN"] = "N";
	if(__map_reserved.MEP != null) _g.setReserved("MEP","U"); else _g.h["MEP"] = "U";
	if(__map_reserved.MEQ != null) _g.setReserved("MEQ","Q"); else _g.h["MEQ"] = "Q";
	if(__map_reserved.MET != null) _g.setReserved("MET","M"); else _g.h["MET"] = "M";
	if(__map_reserved.MEU != null) _g.setReserved("MEU","G"); else _g.h["MEU"] = "G";
	if(__map_reserved.MF3 != null) _g.setReserved("MF3","X"); else _g.h["MF3"] = "X";
	if(__map_reserved.MFC != null) _g.setReserved("MFC","GYG"); else _g.h["MFC"] = "GYG";
	if(__map_reserved.MG1 != null) _g.setReserved("MG1","G"); else _g.h["MG1"] = "G";
	if(__map_reserved.MGG != null) _g.setReserved("MGG","R"); else _g.h["MGG"] = "R";
	if(__map_reserved.MGN != null) _g.setReserved("MGN","Q"); else _g.h["MGN"] = "Q";
	if(__map_reserved.MGQ != null) _g.setReserved("MGQ","A"); else _g.h["MGQ"] = "A";
	if(__map_reserved.MGV != null) _g.setReserved("MGV","G"); else _g.h["MGV"] = "G";
	if(__map_reserved.MGY != null) _g.setReserved("MGY","G"); else _g.h["MGY"] = "G";
	if(__map_reserved.MHL != null) _g.setReserved("MHL","L"); else _g.h["MHL"] = "L";
	if(__map_reserved.MHO != null) _g.setReserved("MHO","M"); else _g.h["MHO"] = "M";
	if(__map_reserved.MHS != null) _g.setReserved("MHS","H"); else _g.h["MHS"] = "H";
	if(__map_reserved.MIA != null) _g.setReserved("MIA","A"); else _g.h["MIA"] = "A";
	if(__map_reserved.MIS != null) _g.setReserved("MIS","S"); else _g.h["MIS"] = "S";
	if(__map_reserved.MK8 != null) _g.setReserved("MK8","L"); else _g.h["MK8"] = "L";
	if(__map_reserved.ML3 != null) _g.setReserved("ML3","K"); else _g.h["ML3"] = "K";
	if(__map_reserved.MLE != null) _g.setReserved("MLE","L"); else _g.h["MLE"] = "L";
	if(__map_reserved.MLL != null) _g.setReserved("MLL","L"); else _g.h["MLL"] = "L";
	if(__map_reserved.MLY != null) _g.setReserved("MLY","K"); else _g.h["MLY"] = "K";
	if(__map_reserved.MLZ != null) _g.setReserved("MLZ","K"); else _g.h["MLZ"] = "K";
	if(__map_reserved.MME != null) _g.setReserved("MME","M"); else _g.h["MME"] = "M";
	if(__map_reserved.MMO != null) _g.setReserved("MMO","R"); else _g.h["MMO"] = "R";
	if(__map_reserved.MMT != null) _g.setReserved("MMT","T"); else _g.h["MMT"] = "T";
	if(__map_reserved.MND != null) _g.setReserved("MND","N"); else _g.h["MND"] = "N";
	if(__map_reserved.MNL != null) _g.setReserved("MNL","L"); else _g.h["MNL"] = "L";
	if(__map_reserved.MNU != null) _g.setReserved("MNU","U"); else _g.h["MNU"] = "U";
	if(__map_reserved.MNV != null) _g.setReserved("MNV","V"); else _g.h["MNV"] = "V";
	if(__map_reserved.MOD != null) _g.setReserved("MOD","X"); else _g.h["MOD"] = "X";
	if(__map_reserved.MP8 != null) _g.setReserved("MP8","P"); else _g.h["MP8"] = "P";
	if(__map_reserved.MPH != null) _g.setReserved("MPH","X"); else _g.h["MPH"] = "X";
	if(__map_reserved.MPJ != null) _g.setReserved("MPJ","X"); else _g.h["MPJ"] = "X";
	if(__map_reserved.MPQ != null) _g.setReserved("MPQ","G"); else _g.h["MPQ"] = "G";
	if(__map_reserved.MRG != null) _g.setReserved("MRG","G"); else _g.h["MRG"] = "G";
	if(__map_reserved.MSA != null) _g.setReserved("MSA","G"); else _g.h["MSA"] = "G";
	if(__map_reserved.MSE != null) _g.setReserved("MSE","M"); else _g.h["MSE"] = "M";
	if(__map_reserved.MSL != null) _g.setReserved("MSL","M"); else _g.h["MSL"] = "M";
	if(__map_reserved.MSO != null) _g.setReserved("MSO","M"); else _g.h["MSO"] = "M";
	if(__map_reserved.MSP != null) _g.setReserved("MSP","X"); else _g.h["MSP"] = "X";
	if(__map_reserved.MT2 != null) _g.setReserved("MT2","M"); else _g.h["MT2"] = "M";
	if(__map_reserved.MTR != null) _g.setReserved("MTR","T"); else _g.h["MTR"] = "T";
	if(__map_reserved.MTU != null) _g.setReserved("MTU","A"); else _g.h["MTU"] = "A";
	if(__map_reserved.MTY != null) _g.setReserved("MTY","Y"); else _g.h["MTY"] = "Y";
	if(__map_reserved.MVA != null) _g.setReserved("MVA","V"); else _g.h["MVA"] = "V";
	if(__map_reserved["N  "] != null) _g.setReserved("N  ","N"); else _g.h["N  "] = "N";
	if(__map_reserved.N10 != null) _g.setReserved("N10","S"); else _g.h["N10"] = "S";
	if(__map_reserved.N2C != null) _g.setReserved("N2C","X"); else _g.h["N2C"] = "X";
	if(__map_reserved.N5I != null) _g.setReserved("N5I","N"); else _g.h["N5I"] = "N";
	if(__map_reserved.N5M != null) _g.setReserved("N5M","C"); else _g.h["N5M"] = "C";
	if(__map_reserved.N6G != null) _g.setReserved("N6G","G"); else _g.h["N6G"] = "G";
	if(__map_reserved.N7P != null) _g.setReserved("N7P","P"); else _g.h["N7P"] = "P";
	if(__map_reserved.NA8 != null) _g.setReserved("NA8","A"); else _g.h["NA8"] = "A";
	if(__map_reserved.NAL != null) _g.setReserved("NAL","A"); else _g.h["NAL"] = "A";
	if(__map_reserved.NAM != null) _g.setReserved("NAM","A"); else _g.h["NAM"] = "A";
	if(__map_reserved.NB8 != null) _g.setReserved("NB8","N"); else _g.h["NB8"] = "N";
	if(__map_reserved.NBQ != null) _g.setReserved("NBQ","Y"); else _g.h["NBQ"] = "Y";
	if(__map_reserved.NC1 != null) _g.setReserved("NC1","S"); else _g.h["NC1"] = "S";
	if(__map_reserved.NCB != null) _g.setReserved("NCB","A"); else _g.h["NCB"] = "A";
	if(__map_reserved.NCX != null) _g.setReserved("NCX","N"); else _g.h["NCX"] = "N";
	if(__map_reserved.NCY != null) _g.setReserved("NCY","X"); else _g.h["NCY"] = "X";
	if(__map_reserved.NDF != null) _g.setReserved("NDF","F"); else _g.h["NDF"] = "F";
	if(__map_reserved.NDN != null) _g.setReserved("NDN","U"); else _g.h["NDN"] = "U";
	if(__map_reserved.NEM != null) _g.setReserved("NEM","H"); else _g.h["NEM"] = "H";
	if(__map_reserved.NEP != null) _g.setReserved("NEP","H"); else _g.h["NEP"] = "H";
	if(__map_reserved.NF2 != null) _g.setReserved("NF2","N"); else _g.h["NF2"] = "N";
	if(__map_reserved.NFA != null) _g.setReserved("NFA","F"); else _g.h["NFA"] = "F";
	if(__map_reserved.NHL != null) _g.setReserved("NHL","E"); else _g.h["NHL"] = "E";
	if(__map_reserved.NIT != null) _g.setReserved("NIT","X"); else _g.h["NIT"] = "X";
	if(__map_reserved.NIY != null) _g.setReserved("NIY","Y"); else _g.h["NIY"] = "Y";
	if(__map_reserved.NLE != null) _g.setReserved("NLE","L"); else _g.h["NLE"] = "L";
	if(__map_reserved.NLN != null) _g.setReserved("NLN","L"); else _g.h["NLN"] = "L";
	if(__map_reserved.NLO != null) _g.setReserved("NLO","L"); else _g.h["NLO"] = "L";
	if(__map_reserved.NLP != null) _g.setReserved("NLP","L"); else _g.h["NLP"] = "L";
	if(__map_reserved.NLQ != null) _g.setReserved("NLQ","Q"); else _g.h["NLQ"] = "Q";
	if(__map_reserved.NMC != null) _g.setReserved("NMC","G"); else _g.h["NMC"] = "G";
	if(__map_reserved.NMM != null) _g.setReserved("NMM","R"); else _g.h["NMM"] = "R";
	if(__map_reserved.NMS != null) _g.setReserved("NMS","T"); else _g.h["NMS"] = "T";
	if(__map_reserved.NMT != null) _g.setReserved("NMT","T"); else _g.h["NMT"] = "T";
	if(__map_reserved.NNH != null) _g.setReserved("NNH","R"); else _g.h["NNH"] = "R";
	if(__map_reserved.NP3 != null) _g.setReserved("NP3","N"); else _g.h["NP3"] = "N";
	if(__map_reserved.NPH != null) _g.setReserved("NPH","C"); else _g.h["NPH"] = "C";
	if(__map_reserved.NPI != null) _g.setReserved("NPI","A"); else _g.h["NPI"] = "A";
	if(__map_reserved.NRP != null) _g.setReserved("NRP","LYG"); else _g.h["NRP"] = "LYG";
	if(__map_reserved.NRQ != null) _g.setReserved("NRQ","MYG"); else _g.h["NRQ"] = "MYG";
	if(__map_reserved.NSK != null) _g.setReserved("NSK","X"); else _g.h["NSK"] = "X";
	if(__map_reserved.NTY != null) _g.setReserved("NTY","Y"); else _g.h["NTY"] = "Y";
	if(__map_reserved.NVA != null) _g.setReserved("NVA","V"); else _g.h["NVA"] = "V";
	if(__map_reserved.NYC != null) _g.setReserved("NYC","TWG"); else _g.h["NYC"] = "TWG";
	if(__map_reserved.NYG != null) _g.setReserved("NYG","NYG"); else _g.h["NYG"] = "NYG";
	if(__map_reserved.NYM != null) _g.setReserved("NYM","N"); else _g.h["NYM"] = "N";
	if(__map_reserved.NYS != null) _g.setReserved("NYS","C"); else _g.h["NYS"] = "C";
	if(__map_reserved.NZH != null) _g.setReserved("NZH","H"); else _g.h["NZH"] = "H";
	if(__map_reserved.O12 != null) _g.setReserved("O12","X"); else _g.h["O12"] = "X";
	if(__map_reserved.O2C != null) _g.setReserved("O2C","N"); else _g.h["O2C"] = "N";
	if(__map_reserved.O2G != null) _g.setReserved("O2G","G"); else _g.h["O2G"] = "G";
	if(__map_reserved.OAD != null) _g.setReserved("OAD","N"); else _g.h["OAD"] = "N";
	if(__map_reserved.OAS != null) _g.setReserved("OAS","S"); else _g.h["OAS"] = "S";
	if(__map_reserved.OBF != null) _g.setReserved("OBF","X"); else _g.h["OBF"] = "X";
	if(__map_reserved.OBS != null) _g.setReserved("OBS","X"); else _g.h["OBS"] = "X";
	if(__map_reserved.OCS != null) _g.setReserved("OCS","C"); else _g.h["OCS"] = "C";
	if(__map_reserved.OCY != null) _g.setReserved("OCY","C"); else _g.h["OCY"] = "C";
	if(__map_reserved.ODP != null) _g.setReserved("ODP","N"); else _g.h["ODP"] = "N";
	if(__map_reserved.OHI != null) _g.setReserved("OHI","H"); else _g.h["OHI"] = "H";
	if(__map_reserved.OHS != null) _g.setReserved("OHS","D"); else _g.h["OHS"] = "D";
	if(__map_reserved.OIC != null) _g.setReserved("OIC","X"); else _g.h["OIC"] = "X";
	if(__map_reserved.OIP != null) _g.setReserved("OIP","I"); else _g.h["OIP"] = "I";
	if(__map_reserved.OLE != null) _g.setReserved("OLE","X"); else _g.h["OLE"] = "X";
	if(__map_reserved.OLT != null) _g.setReserved("OLT","T"); else _g.h["OLT"] = "T";
	if(__map_reserved.OLZ != null) _g.setReserved("OLZ","S"); else _g.h["OLZ"] = "S";
	if(__map_reserved.OMC != null) _g.setReserved("OMC","C"); else _g.h["OMC"] = "C";
	if(__map_reserved.OMG != null) _g.setReserved("OMG","G"); else _g.h["OMG"] = "G";
	if(__map_reserved.OMT != null) _g.setReserved("OMT","M"); else _g.h["OMT"] = "M";
	if(__map_reserved.OMU != null) _g.setReserved("OMU","U"); else _g.h["OMU"] = "U";
	if(__map_reserved.ONE != null) _g.setReserved("ONE","U"); else _g.h["ONE"] = "U";
	if(__map_reserved.ONH != null) _g.setReserved("ONH","A"); else _g.h["ONH"] = "A";
	if(__map_reserved.ONL != null) _g.setReserved("ONL","X"); else _g.h["ONL"] = "X";
	if(__map_reserved.OPR != null) _g.setReserved("OPR","R"); else _g.h["OPR"] = "R";
	if(__map_reserved.ORN != null) _g.setReserved("ORN","A"); else _g.h["ORN"] = "A";
	if(__map_reserved.ORQ != null) _g.setReserved("ORQ","R"); else _g.h["ORQ"] = "R";
	if(__map_reserved.OSE != null) _g.setReserved("OSE","S"); else _g.h["OSE"] = "S";
	if(__map_reserved.OTB != null) _g.setReserved("OTB","X"); else _g.h["OTB"] = "X";
	if(__map_reserved.OTH != null) _g.setReserved("OTH","T"); else _g.h["OTH"] = "T";
	if(__map_reserved.OTY != null) _g.setReserved("OTY","Y"); else _g.h["OTY"] = "Y";
	if(__map_reserved.OXX != null) _g.setReserved("OXX","D"); else _g.h["OXX"] = "D";
	if(__map_reserved["P  "] != null) _g.setReserved("P  ","G"); else _g.h["P  "] = "G";
	if(__map_reserved.P1L != null) _g.setReserved("P1L","C"); else _g.h["P1L"] = "C";
	if(__map_reserved.P1P != null) _g.setReserved("P1P","N"); else _g.h["P1P"] = "N";
	if(__map_reserved.P2T != null) _g.setReserved("P2T","T"); else _g.h["P2T"] = "T";
	if(__map_reserved.P2U != null) _g.setReserved("P2U","U"); else _g.h["P2U"] = "U";
	if(__map_reserved.P2Y != null) _g.setReserved("P2Y","P"); else _g.h["P2Y"] = "P";
	if(__map_reserved.P5P != null) _g.setReserved("P5P","A"); else _g.h["P5P"] = "A";
	if(__map_reserved.PAQ != null) _g.setReserved("PAQ","Y"); else _g.h["PAQ"] = "Y";
	if(__map_reserved.PAS != null) _g.setReserved("PAS","D"); else _g.h["PAS"] = "D";
	if(__map_reserved.PAT != null) _g.setReserved("PAT","W"); else _g.h["PAT"] = "W";
	if(__map_reserved.PAU != null) _g.setReserved("PAU","A"); else _g.h["PAU"] = "A";
	if(__map_reserved.PBB != null) _g.setReserved("PBB","C"); else _g.h["PBB"] = "C";
	if(__map_reserved.PBF != null) _g.setReserved("PBF","F"); else _g.h["PBF"] = "F";
	if(__map_reserved.PBT != null) _g.setReserved("PBT","N"); else _g.h["PBT"] = "N";
	if(__map_reserved.PCA != null) _g.setReserved("PCA","E"); else _g.h["PCA"] = "E";
	if(__map_reserved.PCC != null) _g.setReserved("PCC","P"); else _g.h["PCC"] = "P";
	if(__map_reserved.PCE != null) _g.setReserved("PCE","X"); else _g.h["PCE"] = "X";
	if(__map_reserved.PCS != null) _g.setReserved("PCS","F"); else _g.h["PCS"] = "F";
	if(__map_reserved.PDL != null) _g.setReserved("PDL","X"); else _g.h["PDL"] = "X";
	if(__map_reserved.PDU != null) _g.setReserved("PDU","U"); else _g.h["PDU"] = "U";
	if(__map_reserved.PEC != null) _g.setReserved("PEC","C"); else _g.h["PEC"] = "C";
	if(__map_reserved.PF5 != null) _g.setReserved("PF5","F"); else _g.h["PF5"] = "F";
	if(__map_reserved.PFF != null) _g.setReserved("PFF","F"); else _g.h["PFF"] = "F";
	if(__map_reserved.PFX != null) _g.setReserved("PFX","X"); else _g.h["PFX"] = "X";
	if(__map_reserved.PG1 != null) _g.setReserved("PG1","S"); else _g.h["PG1"] = "S";
	if(__map_reserved.PG7 != null) _g.setReserved("PG7","G"); else _g.h["PG7"] = "G";
	if(__map_reserved.PG9 != null) _g.setReserved("PG9","G"); else _g.h["PG9"] = "G";
	if(__map_reserved.PGL != null) _g.setReserved("PGL","X"); else _g.h["PGL"] = "X";
	if(__map_reserved.PGN != null) _g.setReserved("PGN","G"); else _g.h["PGN"] = "G";
	if(__map_reserved.PGP != null) _g.setReserved("PGP","G"); else _g.h["PGP"] = "G";
	if(__map_reserved.PGY != null) _g.setReserved("PGY","G"); else _g.h["PGY"] = "G";
	if(__map_reserved.PHA != null) _g.setReserved("PHA","F"); else _g.h["PHA"] = "F";
	if(__map_reserved.PHD != null) _g.setReserved("PHD","D"); else _g.h["PHD"] = "D";
	if(__map_reserved.PHE != null) _g.setReserved("PHE","F"); else _g.h["PHE"] = "F";
	if(__map_reserved.PHI != null) _g.setReserved("PHI","F"); else _g.h["PHI"] = "F";
	if(__map_reserved.PHL != null) _g.setReserved("PHL","F"); else _g.h["PHL"] = "F";
	if(__map_reserved.PHM != null) _g.setReserved("PHM","F"); else _g.h["PHM"] = "F";
	if(__map_reserved.PIA != null) _g.setReserved("PIA","AYG"); else _g.h["PIA"] = "AYG";
	if(__map_reserved.PIV != null) _g.setReserved("PIV","X"); else _g.h["PIV"] = "X";
	if(__map_reserved.PLE != null) _g.setReserved("PLE","L"); else _g.h["PLE"] = "L";
	if(__map_reserved.PM3 != null) _g.setReserved("PM3","F"); else _g.h["PM3"] = "F";
	if(__map_reserved.PMT != null) _g.setReserved("PMT","C"); else _g.h["PMT"] = "C";
	if(__map_reserved.POM != null) _g.setReserved("POM","P"); else _g.h["POM"] = "P";
	if(__map_reserved.PPN != null) _g.setReserved("PPN","F"); else _g.h["PPN"] = "F";
	if(__map_reserved.PPU != null) _g.setReserved("PPU","A"); else _g.h["PPU"] = "A";
	if(__map_reserved.PPW != null) _g.setReserved("PPW","G"); else _g.h["PPW"] = "G";
	if(__map_reserved.PQ1 != null) _g.setReserved("PQ1","N"); else _g.h["PQ1"] = "N";
	if(__map_reserved.PR3 != null) _g.setReserved("PR3","C"); else _g.h["PR3"] = "C";
	if(__map_reserved.PR5 != null) _g.setReserved("PR5","A"); else _g.h["PR5"] = "A";
	if(__map_reserved.PR9 != null) _g.setReserved("PR9","P"); else _g.h["PR9"] = "P";
	if(__map_reserved.PRN != null) _g.setReserved("PRN","A"); else _g.h["PRN"] = "A";
	if(__map_reserved.PRO != null) _g.setReserved("PRO","P"); else _g.h["PRO"] = "P";
	if(__map_reserved.PRS != null) _g.setReserved("PRS","P"); else _g.h["PRS"] = "P";
	if(__map_reserved.PSA != null) _g.setReserved("PSA","F"); else _g.h["PSA"] = "F";
	if(__map_reserved.PSH != null) _g.setReserved("PSH","H"); else _g.h["PSH"] = "H";
	if(__map_reserved.PST != null) _g.setReserved("PST","T"); else _g.h["PST"] = "T";
	if(__map_reserved.PSU != null) _g.setReserved("PSU","U"); else _g.h["PSU"] = "U";
	if(__map_reserved.PSW != null) _g.setReserved("PSW","C"); else _g.h["PSW"] = "C";
	if(__map_reserved.PTA != null) _g.setReserved("PTA","X"); else _g.h["PTA"] = "X";
	if(__map_reserved.PTH != null) _g.setReserved("PTH","Y"); else _g.h["PTH"] = "Y";
	if(__map_reserved.PTM != null) _g.setReserved("PTM","Y"); else _g.h["PTM"] = "Y";
	if(__map_reserved.PTR != null) _g.setReserved("PTR","Y"); else _g.h["PTR"] = "Y";
	if(__map_reserved["PU "] != null) _g.setReserved("PU ","A"); else _g.h["PU "] = "A";
	if(__map_reserved.PUY != null) _g.setReserved("PUY","N"); else _g.h["PUY"] = "N";
	if(__map_reserved.PVH != null) _g.setReserved("PVH","H"); else _g.h["PVH"] = "H";
	if(__map_reserved.PVL != null) _g.setReserved("PVL","X"); else _g.h["PVL"] = "X";
	if(__map_reserved.PYA != null) _g.setReserved("PYA","A"); else _g.h["PYA"] = "A";
	if(__map_reserved.PYO != null) _g.setReserved("PYO","U"); else _g.h["PYO"] = "U";
	if(__map_reserved.PYX != null) _g.setReserved("PYX","C"); else _g.h["PYX"] = "C";
	if(__map_reserved.PYY != null) _g.setReserved("PYY","N"); else _g.h["PYY"] = "N";
	if(__map_reserved.QLG != null) _g.setReserved("QLG","QLG"); else _g.h["QLG"] = "QLG";
	if(__map_reserved.QMM != null) _g.setReserved("QMM","Q"); else _g.h["QMM"] = "Q";
	if(__map_reserved.QPA != null) _g.setReserved("QPA","C"); else _g.h["QPA"] = "C";
	if(__map_reserved.QPH != null) _g.setReserved("QPH","F"); else _g.h["QPH"] = "F";
	if(__map_reserved.QUO != null) _g.setReserved("QUO","G"); else _g.h["QUO"] = "G";
	if(__map_reserved["R  "] != null) _g.setReserved("R  ","A"); else _g.h["R  "] = "A";
	if(__map_reserved.R1A != null) _g.setReserved("R1A","C"); else _g.h["R1A"] = "C";
	if(__map_reserved.R4K != null) _g.setReserved("R4K","W"); else _g.h["R4K"] = "W";
	if(__map_reserved.RC7 != null) _g.setReserved("RC7","HYG"); else _g.h["RC7"] = "HYG";
	if(__map_reserved.RE0 != null) _g.setReserved("RE0","W"); else _g.h["RE0"] = "W";
	if(__map_reserved.RE3 != null) _g.setReserved("RE3","W"); else _g.h["RE3"] = "W";
	if(__map_reserved.RIA != null) _g.setReserved("RIA","A"); else _g.h["RIA"] = "A";
	if(__map_reserved.RMP != null) _g.setReserved("RMP","A"); else _g.h["RMP"] = "A";
	if(__map_reserved.RON != null) _g.setReserved("RON","X"); else _g.h["RON"] = "X";
	if(__map_reserved["RT "] != null) _g.setReserved("RT ","T"); else _g.h["RT "] = "T";
	if(__map_reserved.RTP != null) _g.setReserved("RTP","N"); else _g.h["RTP"] = "N";
	if(__map_reserved.S1H != null) _g.setReserved("S1H","S"); else _g.h["S1H"] = "S";
	if(__map_reserved.S2C != null) _g.setReserved("S2C","C"); else _g.h["S2C"] = "C";
	if(__map_reserved.S2D != null) _g.setReserved("S2D","A"); else _g.h["S2D"] = "A";
	if(__map_reserved.S2M != null) _g.setReserved("S2M","T"); else _g.h["S2M"] = "T";
	if(__map_reserved.S2P != null) _g.setReserved("S2P","A"); else _g.h["S2P"] = "A";
	if(__map_reserved.S4A != null) _g.setReserved("S4A","A"); else _g.h["S4A"] = "A";
	if(__map_reserved.S4C != null) _g.setReserved("S4C","C"); else _g.h["S4C"] = "C";
	if(__map_reserved.S4G != null) _g.setReserved("S4G","G"); else _g.h["S4G"] = "G";
	if(__map_reserved.S4U != null) _g.setReserved("S4U","U"); else _g.h["S4U"] = "U";
	if(__map_reserved.S6G != null) _g.setReserved("S6G","G"); else _g.h["S6G"] = "G";
	if(__map_reserved.SAC != null) _g.setReserved("SAC","S"); else _g.h["SAC"] = "S";
	if(__map_reserved.SAH != null) _g.setReserved("SAH","C"); else _g.h["SAH"] = "C";
	if(__map_reserved.SAR != null) _g.setReserved("SAR","G"); else _g.h["SAR"] = "G";
	if(__map_reserved.SBL != null) _g.setReserved("SBL","S"); else _g.h["SBL"] = "S";
	if(__map_reserved["SC "] != null) _g.setReserved("SC ","C"); else _g.h["SC "] = "C";
	if(__map_reserved.SCH != null) _g.setReserved("SCH","C"); else _g.h["SCH"] = "C";
	if(__map_reserved.SCS != null) _g.setReserved("SCS","C"); else _g.h["SCS"] = "C";
	if(__map_reserved.SCY != null) _g.setReserved("SCY","C"); else _g.h["SCY"] = "C";
	if(__map_reserved.SD2 != null) _g.setReserved("SD2","X"); else _g.h["SD2"] = "X";
	if(__map_reserved.SDG != null) _g.setReserved("SDG","G"); else _g.h["SDG"] = "G";
	if(__map_reserved.SDP != null) _g.setReserved("SDP","S"); else _g.h["SDP"] = "S";
	if(__map_reserved.SEB != null) _g.setReserved("SEB","S"); else _g.h["SEB"] = "S";
	if(__map_reserved.SEC != null) _g.setReserved("SEC","A"); else _g.h["SEC"] = "A";
	if(__map_reserved.SEG != null) _g.setReserved("SEG","A"); else _g.h["SEG"] = "A";
	if(__map_reserved.SEL != null) _g.setReserved("SEL","S"); else _g.h["SEL"] = "S";
	if(__map_reserved.SEM != null) _g.setReserved("SEM","S"); else _g.h["SEM"] = "S";
	if(__map_reserved.SEN != null) _g.setReserved("SEN","S"); else _g.h["SEN"] = "S";
	if(__map_reserved.SEP != null) _g.setReserved("SEP","S"); else _g.h["SEP"] = "S";
	if(__map_reserved.SER != null) _g.setReserved("SER","S"); else _g.h["SER"] = "S";
	if(__map_reserved.SET != null) _g.setReserved("SET","S"); else _g.h["SET"] = "S";
	if(__map_reserved.SGB != null) _g.setReserved("SGB","S"); else _g.h["SGB"] = "S";
	if(__map_reserved.SHC != null) _g.setReserved("SHC","C"); else _g.h["SHC"] = "C";
	if(__map_reserved.SHP != null) _g.setReserved("SHP","G"); else _g.h["SHP"] = "G";
	if(__map_reserved.SHR != null) _g.setReserved("SHR","K"); else _g.h["SHR"] = "K";
	if(__map_reserved.SIB != null) _g.setReserved("SIB","C"); else _g.h["SIB"] = "C";
	if(__map_reserved.SIC != null) _g.setReserved("SIC","DC"); else _g.h["SIC"] = "DC";
	if(__map_reserved.SLA != null) _g.setReserved("SLA","P"); else _g.h["SLA"] = "P";
	if(__map_reserved.SLR != null) _g.setReserved("SLR","P"); else _g.h["SLR"] = "P";
	if(__map_reserved.SLZ != null) _g.setReserved("SLZ","K"); else _g.h["SLZ"] = "K";
	if(__map_reserved.SMC != null) _g.setReserved("SMC","C"); else _g.h["SMC"] = "C";
	if(__map_reserved.SME != null) _g.setReserved("SME","M"); else _g.h["SME"] = "M";
	if(__map_reserved.SMF != null) _g.setReserved("SMF","F"); else _g.h["SMF"] = "F";
	if(__map_reserved.SMP != null) _g.setReserved("SMP","A"); else _g.h["SMP"] = "A";
	if(__map_reserved.SMT != null) _g.setReserved("SMT","T"); else _g.h["SMT"] = "T";
	if(__map_reserved.SNC != null) _g.setReserved("SNC","C"); else _g.h["SNC"] = "C";
	if(__map_reserved.SNN != null) _g.setReserved("SNN","N"); else _g.h["SNN"] = "N";
	if(__map_reserved.SOC != null) _g.setReserved("SOC","C"); else _g.h["SOC"] = "C";
	if(__map_reserved.SOS != null) _g.setReserved("SOS","N"); else _g.h["SOS"] = "N";
	if(__map_reserved.SOY != null) _g.setReserved("SOY","S"); else _g.h["SOY"] = "S";
	if(__map_reserved.SPT != null) _g.setReserved("SPT","T"); else _g.h["SPT"] = "T";
	if(__map_reserved.SRA != null) _g.setReserved("SRA","A"); else _g.h["SRA"] = "A";
	if(__map_reserved.SSU != null) _g.setReserved("SSU","U"); else _g.h["SSU"] = "U";
	if(__map_reserved.STY != null) _g.setReserved("STY","Y"); else _g.h["STY"] = "Y";
	if(__map_reserved.SUB != null) _g.setReserved("SUB","X"); else _g.h["SUB"] = "X";
	if(__map_reserved.SUI != null) _g.setReserved("SUI","DG"); else _g.h["SUI"] = "DG";
	if(__map_reserved.SUN != null) _g.setReserved("SUN","S"); else _g.h["SUN"] = "S";
	if(__map_reserved.SUR != null) _g.setReserved("SUR","U"); else _g.h["SUR"] = "U";
	if(__map_reserved.SVA != null) _g.setReserved("SVA","S"); else _g.h["SVA"] = "S";
	if(__map_reserved.SVV != null) _g.setReserved("SVV","S"); else _g.h["SVV"] = "S";
	if(__map_reserved.SVW != null) _g.setReserved("SVW","S"); else _g.h["SVW"] = "S";
	if(__map_reserved.SVX != null) _g.setReserved("SVX","S"); else _g.h["SVX"] = "S";
	if(__map_reserved.SVY != null) _g.setReserved("SVY","S"); else _g.h["SVY"] = "S";
	if(__map_reserved.SVZ != null) _g.setReserved("SVZ","X"); else _g.h["SVZ"] = "X";
	if(__map_reserved.SWG != null) _g.setReserved("SWG","SWG"); else _g.h["SWG"] = "SWG";
	if(__map_reserved.SYS != null) _g.setReserved("SYS","C"); else _g.h["SYS"] = "C";
	if(__map_reserved["T  "] != null) _g.setReserved("T  ","T"); else _g.h["T  "] = "T";
	if(__map_reserved.T11 != null) _g.setReserved("T11","F"); else _g.h["T11"] = "F";
	if(__map_reserved.T23 != null) _g.setReserved("T23","T"); else _g.h["T23"] = "T";
	if(__map_reserved.T2S != null) _g.setReserved("T2S","T"); else _g.h["T2S"] = "T";
	if(__map_reserved.T2T != null) _g.setReserved("T2T","N"); else _g.h["T2T"] = "N";
	if(__map_reserved.T31 != null) _g.setReserved("T31","U"); else _g.h["T31"] = "U";
	if(__map_reserved.T32 != null) _g.setReserved("T32","T"); else _g.h["T32"] = "T";
	if(__map_reserved.T36 != null) _g.setReserved("T36","T"); else _g.h["T36"] = "T";
	if(__map_reserved.T37 != null) _g.setReserved("T37","T"); else _g.h["T37"] = "T";
	if(__map_reserved.T38 != null) _g.setReserved("T38","T"); else _g.h["T38"] = "T";
	if(__map_reserved.T39 != null) _g.setReserved("T39","T"); else _g.h["T39"] = "T";
	if(__map_reserved.T3P != null) _g.setReserved("T3P","T"); else _g.h["T3P"] = "T";
	if(__map_reserved.T41 != null) _g.setReserved("T41","T"); else _g.h["T41"] = "T";
	if(__map_reserved.T48 != null) _g.setReserved("T48","T"); else _g.h["T48"] = "T";
	if(__map_reserved.T49 != null) _g.setReserved("T49","T"); else _g.h["T49"] = "T";
	if(__map_reserved.T4S != null) _g.setReserved("T4S","T"); else _g.h["T4S"] = "T";
	if(__map_reserved.T5O != null) _g.setReserved("T5O","U"); else _g.h["T5O"] = "U";
	if(__map_reserved.T5S != null) _g.setReserved("T5S","T"); else _g.h["T5S"] = "T";
	if(__map_reserved.T66 != null) _g.setReserved("T66","X"); else _g.h["T66"] = "X";
	if(__map_reserved.T6A != null) _g.setReserved("T6A","A"); else _g.h["T6A"] = "A";
	if(__map_reserved.TA3 != null) _g.setReserved("TA3","T"); else _g.h["TA3"] = "T";
	if(__map_reserved.TA4 != null) _g.setReserved("TA4","X"); else _g.h["TA4"] = "X";
	if(__map_reserved.TAF != null) _g.setReserved("TAF","T"); else _g.h["TAF"] = "T";
	if(__map_reserved.TAL != null) _g.setReserved("TAL","N"); else _g.h["TAL"] = "N";
	if(__map_reserved.TAV != null) _g.setReserved("TAV","D"); else _g.h["TAV"] = "D";
	if(__map_reserved.TBG != null) _g.setReserved("TBG","V"); else _g.h["TBG"] = "V";
	if(__map_reserved.TBM != null) _g.setReserved("TBM","T"); else _g.h["TBM"] = "T";
	if(__map_reserved.TC1 != null) _g.setReserved("TC1","C"); else _g.h["TC1"] = "C";
	if(__map_reserved.TCP != null) _g.setReserved("TCP","T"); else _g.h["TCP"] = "T";
	if(__map_reserved.TCQ != null) _g.setReserved("TCQ","Y"); else _g.h["TCQ"] = "Y";
	if(__map_reserved.TCR != null) _g.setReserved("TCR","W"); else _g.h["TCR"] = "W";
	if(__map_reserved.TCY != null) _g.setReserved("TCY","A"); else _g.h["TCY"] = "A";
	if(__map_reserved.TDD != null) _g.setReserved("TDD","L"); else _g.h["TDD"] = "L";
	if(__map_reserved.TDY != null) _g.setReserved("TDY","T"); else _g.h["TDY"] = "T";
	if(__map_reserved.TFE != null) _g.setReserved("TFE","T"); else _g.h["TFE"] = "T";
	if(__map_reserved.TFO != null) _g.setReserved("TFO","A"); else _g.h["TFO"] = "A";
	if(__map_reserved.TFQ != null) _g.setReserved("TFQ","F"); else _g.h["TFQ"] = "F";
	if(__map_reserved.TFT != null) _g.setReserved("TFT","T"); else _g.h["TFT"] = "T";
	if(__map_reserved.TGP != null) _g.setReserved("TGP","G"); else _g.h["TGP"] = "G";
	if(__map_reserved.TH6 != null) _g.setReserved("TH6","T"); else _g.h["TH6"] = "T";
	if(__map_reserved.THC != null) _g.setReserved("THC","T"); else _g.h["THC"] = "T";
	if(__map_reserved.THO != null) _g.setReserved("THO","X"); else _g.h["THO"] = "X";
	if(__map_reserved.THR != null) _g.setReserved("THR","T"); else _g.h["THR"] = "T";
	if(__map_reserved.THX != null) _g.setReserved("THX","N"); else _g.h["THX"] = "N";
	if(__map_reserved.THZ != null) _g.setReserved("THZ","R"); else _g.h["THZ"] = "R";
	if(__map_reserved.TIH != null) _g.setReserved("TIH","A"); else _g.h["TIH"] = "A";
	if(__map_reserved.TLB != null) _g.setReserved("TLB","N"); else _g.h["TLB"] = "N";
	if(__map_reserved.TLC != null) _g.setReserved("TLC","T"); else _g.h["TLC"] = "T";
	if(__map_reserved.TLN != null) _g.setReserved("TLN","U"); else _g.h["TLN"] = "U";
	if(__map_reserved.TMB != null) _g.setReserved("TMB","T"); else _g.h["TMB"] = "T";
	if(__map_reserved.TMD != null) _g.setReserved("TMD","T"); else _g.h["TMD"] = "T";
	if(__map_reserved.TNB != null) _g.setReserved("TNB","C"); else _g.h["TNB"] = "C";
	if(__map_reserved.TNR != null) _g.setReserved("TNR","S"); else _g.h["TNR"] = "S";
	if(__map_reserved.TOX != null) _g.setReserved("TOX","W"); else _g.h["TOX"] = "W";
	if(__map_reserved.TP1 != null) _g.setReserved("TP1","T"); else _g.h["TP1"] = "T";
	if(__map_reserved.TPC != null) _g.setReserved("TPC","C"); else _g.h["TPC"] = "C";
	if(__map_reserved.TPG != null) _g.setReserved("TPG","G"); else _g.h["TPG"] = "G";
	if(__map_reserved.TPH != null) _g.setReserved("TPH","X"); else _g.h["TPH"] = "X";
	if(__map_reserved.TPL != null) _g.setReserved("TPL","W"); else _g.h["TPL"] = "W";
	if(__map_reserved.TPO != null) _g.setReserved("TPO","T"); else _g.h["TPO"] = "T";
	if(__map_reserved.TPQ != null) _g.setReserved("TPQ","Y"); else _g.h["TPQ"] = "Y";
	if(__map_reserved.TQI != null) _g.setReserved("TQI","W"); else _g.h["TQI"] = "W";
	if(__map_reserved.TQQ != null) _g.setReserved("TQQ","W"); else _g.h["TQQ"] = "W";
	if(__map_reserved.TRF != null) _g.setReserved("TRF","W"); else _g.h["TRF"] = "W";
	if(__map_reserved.TRG != null) _g.setReserved("TRG","K"); else _g.h["TRG"] = "K";
	if(__map_reserved.TRN != null) _g.setReserved("TRN","W"); else _g.h["TRN"] = "W";
	if(__map_reserved.TRO != null) _g.setReserved("TRO","W"); else _g.h["TRO"] = "W";
	if(__map_reserved.TRP != null) _g.setReserved("TRP","W"); else _g.h["TRP"] = "W";
	if(__map_reserved.TRQ != null) _g.setReserved("TRQ","W"); else _g.h["TRQ"] = "W";
	if(__map_reserved.TRW != null) _g.setReserved("TRW","W"); else _g.h["TRW"] = "W";
	if(__map_reserved.TRX != null) _g.setReserved("TRX","W"); else _g.h["TRX"] = "W";
	if(__map_reserved["TS "] != null) _g.setReserved("TS ","N"); else _g.h["TS "] = "N";
	if(__map_reserved.TST != null) _g.setReserved("TST","X"); else _g.h["TST"] = "X";
	if(__map_reserved["TT "] != null) _g.setReserved("TT ","N"); else _g.h["TT "] = "N";
	if(__map_reserved.TTD != null) _g.setReserved("TTD","T"); else _g.h["TTD"] = "T";
	if(__map_reserved.TTI != null) _g.setReserved("TTI","U"); else _g.h["TTI"] = "U";
	if(__map_reserved.TTM != null) _g.setReserved("TTM","T"); else _g.h["TTM"] = "T";
	if(__map_reserved.TTQ != null) _g.setReserved("TTQ","W"); else _g.h["TTQ"] = "W";
	if(__map_reserved.TTS != null) _g.setReserved("TTS","Y"); else _g.h["TTS"] = "Y";
	if(__map_reserved.TY1 != null) _g.setReserved("TY1","Y"); else _g.h["TY1"] = "Y";
	if(__map_reserved.TY2 != null) _g.setReserved("TY2","Y"); else _g.h["TY2"] = "Y";
	if(__map_reserved.TY3 != null) _g.setReserved("TY3","Y"); else _g.h["TY3"] = "Y";
	if(__map_reserved.TY5 != null) _g.setReserved("TY5","Y"); else _g.h["TY5"] = "Y";
	if(__map_reserved.TYB != null) _g.setReserved("TYB","Y"); else _g.h["TYB"] = "Y";
	if(__map_reserved.TYI != null) _g.setReserved("TYI","Y"); else _g.h["TYI"] = "Y";
	if(__map_reserved.TYJ != null) _g.setReserved("TYJ","Y"); else _g.h["TYJ"] = "Y";
	if(__map_reserved.TYN != null) _g.setReserved("TYN","Y"); else _g.h["TYN"] = "Y";
	if(__map_reserved.TYO != null) _g.setReserved("TYO","Y"); else _g.h["TYO"] = "Y";
	if(__map_reserved.TYQ != null) _g.setReserved("TYQ","Y"); else _g.h["TYQ"] = "Y";
	if(__map_reserved.TYR != null) _g.setReserved("TYR","Y"); else _g.h["TYR"] = "Y";
	if(__map_reserved.TYS != null) _g.setReserved("TYS","Y"); else _g.h["TYS"] = "Y";
	if(__map_reserved.TYT != null) _g.setReserved("TYT","Y"); else _g.h["TYT"] = "Y";
	if(__map_reserved.TYU != null) _g.setReserved("TYU","N"); else _g.h["TYU"] = "N";
	if(__map_reserved.TYW != null) _g.setReserved("TYW","Y"); else _g.h["TYW"] = "Y";
	if(__map_reserved.TYX != null) _g.setReserved("TYX","X"); else _g.h["TYX"] = "X";
	if(__map_reserved.TYY != null) _g.setReserved("TYY","Y"); else _g.h["TYY"] = "Y";
	if(__map_reserved.TZB != null) _g.setReserved("TZB","X"); else _g.h["TZB"] = "X";
	if(__map_reserved.TZO != null) _g.setReserved("TZO","X"); else _g.h["TZO"] = "X";
	if(__map_reserved["U  "] != null) _g.setReserved("U  ","U"); else _g.h["U  "] = "U";
	if(__map_reserved.U25 != null) _g.setReserved("U25","U"); else _g.h["U25"] = "U";
	if(__map_reserved.U2L != null) _g.setReserved("U2L","U"); else _g.h["U2L"] = "U";
	if(__map_reserved.U2N != null) _g.setReserved("U2N","U"); else _g.h["U2N"] = "U";
	if(__map_reserved.U2P != null) _g.setReserved("U2P","U"); else _g.h["U2P"] = "U";
	if(__map_reserved.U31 != null) _g.setReserved("U31","U"); else _g.h["U31"] = "U";
	if(__map_reserved.U33 != null) _g.setReserved("U33","U"); else _g.h["U33"] = "U";
	if(__map_reserved.U34 != null) _g.setReserved("U34","U"); else _g.h["U34"] = "U";
	if(__map_reserved.U36 != null) _g.setReserved("U36","U"); else _g.h["U36"] = "U";
	if(__map_reserved.U37 != null) _g.setReserved("U37","U"); else _g.h["U37"] = "U";
	if(__map_reserved.U8U != null) _g.setReserved("U8U","U"); else _g.h["U8U"] = "U";
	if(__map_reserved.UAR != null) _g.setReserved("UAR","U"); else _g.h["UAR"] = "U";
	if(__map_reserved.UCL != null) _g.setReserved("UCL","U"); else _g.h["UCL"] = "U";
	if(__map_reserved.UD5 != null) _g.setReserved("UD5","U"); else _g.h["UD5"] = "U";
	if(__map_reserved.UDP != null) _g.setReserved("UDP","N"); else _g.h["UDP"] = "N";
	if(__map_reserved.UFP != null) _g.setReserved("UFP","N"); else _g.h["UFP"] = "N";
	if(__map_reserved.UFR != null) _g.setReserved("UFR","U"); else _g.h["UFR"] = "U";
	if(__map_reserved.UFT != null) _g.setReserved("UFT","U"); else _g.h["UFT"] = "U";
	if(__map_reserved.UMA != null) _g.setReserved("UMA","A"); else _g.h["UMA"] = "A";
	if(__map_reserved.UMP != null) _g.setReserved("UMP","U"); else _g.h["UMP"] = "U";
	if(__map_reserved.UMS != null) _g.setReserved("UMS","U"); else _g.h["UMS"] = "U";
	if(__map_reserved.UN1 != null) _g.setReserved("UN1","X"); else _g.h["UN1"] = "X";
	if(__map_reserved.UN2 != null) _g.setReserved("UN2","X"); else _g.h["UN2"] = "X";
	if(__map_reserved.UNK != null) _g.setReserved("UNK","X"); else _g.h["UNK"] = "X";
	if(__map_reserved.UR3 != null) _g.setReserved("UR3","U"); else _g.h["UR3"] = "U";
	if(__map_reserved.URD != null) _g.setReserved("URD","U"); else _g.h["URD"] = "U";
	if(__map_reserved.US1 != null) _g.setReserved("US1","U"); else _g.h["US1"] = "U";
	if(__map_reserved.US2 != null) _g.setReserved("US2","U"); else _g.h["US2"] = "U";
	if(__map_reserved.US3 != null) _g.setReserved("US3","T"); else _g.h["US3"] = "T";
	if(__map_reserved.US5 != null) _g.setReserved("US5","U"); else _g.h["US5"] = "U";
	if(__map_reserved.USM != null) _g.setReserved("USM","U"); else _g.h["USM"] = "U";
	if(__map_reserved.VAD != null) _g.setReserved("VAD","V"); else _g.h["VAD"] = "V";
	if(__map_reserved.VAF != null) _g.setReserved("VAF","V"); else _g.h["VAF"] = "V";
	if(__map_reserved.VAL != null) _g.setReserved("VAL","V"); else _g.h["VAL"] = "V";
	if(__map_reserved.VB1 != null) _g.setReserved("VB1","K"); else _g.h["VB1"] = "K";
	if(__map_reserved.VDL != null) _g.setReserved("VDL","X"); else _g.h["VDL"] = "X";
	if(__map_reserved.VLL != null) _g.setReserved("VLL","X"); else _g.h["VLL"] = "X";
	if(__map_reserved.VLM != null) _g.setReserved("VLM","X"); else _g.h["VLM"] = "X";
	if(__map_reserved.VMS != null) _g.setReserved("VMS","X"); else _g.h["VMS"] = "X";
	if(__map_reserved.VOL != null) _g.setReserved("VOL","X"); else _g.h["VOL"] = "X";
	if(__map_reserved.WCR != null) _g.setReserved("WCR","GYG"); else _g.h["WCR"] = "GYG";
	if(__map_reserved["X  "] != null) _g.setReserved("X  ","G"); else _g.h["X  "] = "G";
	if(__map_reserved.X2W != null) _g.setReserved("X2W","E"); else _g.h["X2W"] = "E";
	if(__map_reserved.X4A != null) _g.setReserved("X4A","N"); else _g.h["X4A"] = "N";
	if(__map_reserved.X9Q != null) _g.setReserved("X9Q","AFG"); else _g.h["X9Q"] = "AFG";
	if(__map_reserved.XAD != null) _g.setReserved("XAD","A"); else _g.h["XAD"] = "A";
	if(__map_reserved.XAE != null) _g.setReserved("XAE","N"); else _g.h["XAE"] = "N";
	if(__map_reserved.XAL != null) _g.setReserved("XAL","A"); else _g.h["XAL"] = "A";
	if(__map_reserved.XAR != null) _g.setReserved("XAR","N"); else _g.h["XAR"] = "N";
	if(__map_reserved.XCL != null) _g.setReserved("XCL","C"); else _g.h["XCL"] = "C";
	if(__map_reserved.XCN != null) _g.setReserved("XCN","C"); else _g.h["XCN"] = "C";
	if(__map_reserved.XCP != null) _g.setReserved("XCP","X"); else _g.h["XCP"] = "X";
	if(__map_reserved.XCR != null) _g.setReserved("XCR","C"); else _g.h["XCR"] = "C";
	if(__map_reserved.XCS != null) _g.setReserved("XCS","N"); else _g.h["XCS"] = "N";
	if(__map_reserved.XCT != null) _g.setReserved("XCT","C"); else _g.h["XCT"] = "C";
	if(__map_reserved.XCY != null) _g.setReserved("XCY","C"); else _g.h["XCY"] = "C";
	if(__map_reserved.XGA != null) _g.setReserved("XGA","N"); else _g.h["XGA"] = "N";
	if(__map_reserved.XGL != null) _g.setReserved("XGL","G"); else _g.h["XGL"] = "G";
	if(__map_reserved.XGR != null) _g.setReserved("XGR","G"); else _g.h["XGR"] = "G";
	if(__map_reserved.XGU != null) _g.setReserved("XGU","G"); else _g.h["XGU"] = "G";
	if(__map_reserved.XPR != null) _g.setReserved("XPR","P"); else _g.h["XPR"] = "P";
	if(__map_reserved.XSN != null) _g.setReserved("XSN","N"); else _g.h["XSN"] = "N";
	if(__map_reserved.XTH != null) _g.setReserved("XTH","T"); else _g.h["XTH"] = "T";
	if(__map_reserved.XTL != null) _g.setReserved("XTL","T"); else _g.h["XTL"] = "T";
	if(__map_reserved.XTR != null) _g.setReserved("XTR","T"); else _g.h["XTR"] = "T";
	if(__map_reserved.XTS != null) _g.setReserved("XTS","G"); else _g.h["XTS"] = "G";
	if(__map_reserved.XTY != null) _g.setReserved("XTY","N"); else _g.h["XTY"] = "N";
	if(__map_reserved.XUA != null) _g.setReserved("XUA","A"); else _g.h["XUA"] = "A";
	if(__map_reserved.XUG != null) _g.setReserved("XUG","G"); else _g.h["XUG"] = "G";
	if(__map_reserved.XX1 != null) _g.setReserved("XX1","K"); else _g.h["XX1"] = "K";
	if(__map_reserved.XXY != null) _g.setReserved("XXY","THG"); else _g.h["XXY"] = "THG";
	if(__map_reserved.XYG != null) _g.setReserved("XYG","DYG"); else _g.h["XYG"] = "DYG";
	if(__map_reserved["Y  "] != null) _g.setReserved("Y  ","A"); else _g.h["Y  "] = "A";
	if(__map_reserved.YCM != null) _g.setReserved("YCM","C"); else _g.h["YCM"] = "C";
	if(__map_reserved["YG "] != null) _g.setReserved("YG ","G"); else _g.h["YG "] = "G";
	if(__map_reserved.YOF != null) _g.setReserved("YOF","Y"); else _g.h["YOF"] = "Y";
	if(__map_reserved.YRR != null) _g.setReserved("YRR","N"); else _g.h["YRR"] = "N";
	if(__map_reserved.YYG != null) _g.setReserved("YYG","G"); else _g.h["YYG"] = "G";
	if(__map_reserved["Z  "] != null) _g.setReserved("Z  ","C"); else _g.h["Z  "] = "C";
	if(__map_reserved.Z01 != null) _g.setReserved("Z01","A"); else _g.h["Z01"] = "A";
	if(__map_reserved.ZAD != null) _g.setReserved("ZAD","A"); else _g.h["ZAD"] = "A";
	if(__map_reserved.ZAL != null) _g.setReserved("ZAL","A"); else _g.h["ZAL"] = "A";
	if(__map_reserved.ZBC != null) _g.setReserved("ZBC","C"); else _g.h["ZBC"] = "C";
	if(__map_reserved.ZBU != null) _g.setReserved("ZBU","U"); else _g.h["ZBU"] = "U";
	if(__map_reserved.ZCL != null) _g.setReserved("ZCL","F"); else _g.h["ZCL"] = "F";
	if(__map_reserved.ZCY != null) _g.setReserved("ZCY","C"); else _g.h["ZCY"] = "C";
	if(__map_reserved.ZDU != null) _g.setReserved("ZDU","U"); else _g.h["ZDU"] = "U";
	if(__map_reserved.ZFB != null) _g.setReserved("ZFB","X"); else _g.h["ZFB"] = "X";
	if(__map_reserved.ZGU != null) _g.setReserved("ZGU","G"); else _g.h["ZGU"] = "G";
	if(__map_reserved.ZHP != null) _g.setReserved("ZHP","N"); else _g.h["ZHP"] = "N";
	if(__map_reserved.ZTH != null) _g.setReserved("ZTH","T"); else _g.h["ZTH"] = "T";
	if(__map_reserved.ZU0 != null) _g.setReserved("ZU0","T"); else _g.h["ZU0"] = "T";
	if(__map_reserved.ZZJ != null) _g.setReserved("ZZJ","A"); else _g.h["ZZJ"] = "A";
	$r = _g;
	return $r;
}(this));
saturn.core.PDBParser.whiteSpaceReg = new EReg("\\s+","g");
saturn.core.PDBParser.onlyWhiteSpaceReg = new EReg("^\\s+$","g");
saturn.core.PDBParser.pdbCodeReg = new EReg("^pdb([0-9A-Za-z]+)","");
saturn.core.PDBParser.re_terminalWhiteSpace = new EReg("\\s+$","");
saturn.core.PDBParser.reg_mol_id = new EReg("^\\s*MOL_ID:\\s*([0-9]+)\\s*;","");
saturn.core.PDBParser.reg_mol_chains = new EReg("^ CHAIN:\\s*([A-Za-z0-9,\\s]+)\\s*","");
saturn.core.PDBParser.reg_host_expression_name = new EReg("^\\s*EXPRESSION_SYSTEM:\\s*([^;]+);","");
saturn.core.PDBParser.reg_host_expression_id = new EReg("^\\s*EXPRESSION_SYSTEM_TAXID:\\s*([^;]+);","");
saturn.core.PDBParser.reg_gene_expression_name = new EReg("^\\s*ORGANISM_SCIENTIFIC:\\s*([^;]+);","");
saturn.core.PDBParser.reg_gene_expression_id = new EReg("^\\s*ORGANISM_TAXID:\\s*([^;]+);","");
saturn.core.PDBParser.attribute_to_regex = (function($this) {
	var $r;
	var _g = new haxe.ds.StringMap();
	{
		var value;
		var _g1 = new haxe.ds.StringMap();
		_g1.set("EXPRESSION_SYSTEM",saturn.core.PDBParser.reg_host_expression_name);
		_g1.set("EXPRESSION_SYSTEM_ID",saturn.core.PDBParser.reg_host_expression_id);
		_g1.set("ORGANISM_SCIENTIFIC",saturn.core.PDBParser.reg_gene_expression_name);
		_g1.set("ORGANISM_TAXID",saturn.core.PDBParser.reg_gene_expression_id);
		value = _g1;
		if(__map_reserved.SOURCE != null) _g.setReserved("SOURCE",value); else _g.h["SOURCE"] = value;
	}
	{
		var value1;
		var _g2 = new haxe.ds.StringMap();
		var value2 = new EReg("REMARK\\s+2\\s+RESOLUTION.\\s+([\\d\\.]+)","");
		if(__map_reserved.HIGH_RES != null) _g2.setReserved("HIGH_RES",value2); else _g2.h["HIGH_RES"] = value2;
		value1 = _g2;
		if(__map_reserved.REMARK != null) _g.setReserved("REMARK",value1); else _g.h["REMARK"] = value1;
	}
	$r = _g;
	return $r;
}(this));
saturn.core.PDBParser.attribute_to_range = (function($this) {
	var $r;
	var _g = new haxe.ds.StringMap();
	{
		var value;
		var _g1 = new haxe.ds.StringMap();
		var value1;
		var _g2 = new haxe.ds.StringMap();
		if(__map_reserved.REGEX != null) _g2.setReserved("REGEX",null); else _g2.h["REGEX"] = null;
		if(__map_reserved.START != null) _g2.setReserved("START",10); else _g2.h["START"] = 10;
		if(__map_reserved.STOP != null) _g2.setReserved("STOP",79); else _g2.h["STOP"] = 79;
		value1 = _g2;
		if(__map_reserved.TITLE != null) _g1.setReserved("TITLE",value1); else _g1.h["TITLE"] = value1;
		value = _g1;
		if(__map_reserved.TITLE != null) _g.setReserved("TITLE",value); else _g.h["TITLE"] = value;
	}
	{
		var value2;
		var _g3 = new haxe.ds.StringMap();
		var value3;
		var _g4 = new haxe.ds.StringMap();
		if(__map_reserved.REGEX != null) _g4.setReserved("REGEX",null); else _g4.h["REGEX"] = null;
		if(__map_reserved.START != null) _g4.setReserved("START",10); else _g4.h["START"] = 10;
		if(__map_reserved.STOP != null) _g4.setReserved("STOP",78); else _g4.h["STOP"] = 78;
		value3 = _g4;
		if(__map_reserved.AUTHOR != null) _g3.setReserved("AUTHOR",value3); else _g3.h["AUTHOR"] = value3;
		value2 = _g3;
		if(__map_reserved.AUTHOR != null) _g.setReserved("AUTHOR",value2); else _g.h["AUTHOR"] = value2;
	}
	{
		var value4;
		var _g5 = new haxe.ds.StringMap();
		var value5;
		var _g6 = new haxe.ds.StringMap();
		if(__map_reserved.REGEX != null) _g6.setReserved("REGEX",null); else _g6.h["REGEX"] = null;
		if(__map_reserved.START != null) _g6.setReserved("START",10); else _g6.h["START"] = 10;
		if(__map_reserved.STOP != null) _g6.setReserved("STOP",78); else _g6.h["STOP"] = 78;
		value5 = _g6;
		if(__map_reserved.EXP_TYPE != null) _g5.setReserved("EXP_TYPE",value5); else _g5.h["EXP_TYPE"] = value5;
		value4 = _g5;
		if(__map_reserved.EXPDTA != null) _g.setReserved("EXPDTA",value4); else _g.h["EXPDTA"] = value4;
	}
	{
		var value6;
		var _g7 = new haxe.ds.StringMap();
		var value7;
		var _g8 = new haxe.ds.StringMap();
		if(__map_reserved.REGEX != null) _g8.setReserved("REGEX",null); else _g8.h["REGEX"] = null;
		if(__map_reserved.START != null) _g8.setReserved("START",50); else _g8.h["START"] = 50;
		if(__map_reserved.STOP != null) _g8.setReserved("STOP",59); else _g8.h["STOP"] = 59;
		value7 = _g8;
		if(__map_reserved.DEPOSITION_DATE != null) _g7.setReserved("DEPOSITION_DATE",value7); else _g7.h["DEPOSITION_DATE"] = value7;
		value6 = _g7;
		if(__map_reserved.HEADER != null) _g.setReserved("HEADER",value6); else _g.h["HEADER"] = value6;
	}
	$r = _g;
	return $r;
}(this));
saturn.core.PDBParser.sourceOrder = ["EXPRESSION_SYSTEM","EXPRESSION_SYSTEM_ID","ORGANISM_SCIENTIFIC","ORGANISM_TAXID"];
saturn.core.PDBParser.attributeOrder = ["DEPOSITION_DATE"];
saturn.core.PrimerRegistry.defaultInstance = new saturn.core.PrimerRegistry();
saturn.core.domain.Compound.molCache = new haxe.ds.StringMap();
saturn.core.domain.Compound.r = new EReg("svg:","g");
saturn.core.domain.Compound.rw = new EReg("width='300px'","g");
saturn.core.domain.Compound.rh = new EReg("height='300px'","g");
saturn.core.molecule.MoleculeConstants.aMW = 331.2;
saturn.core.molecule.MoleculeConstants.tMW = 322.2;
saturn.core.molecule.MoleculeConstants.gMW = 347.2;
saturn.core.molecule.MoleculeConstants.cMW = 307.2;
saturn.core.molecule.MoleculeConstants.aChainMW = 313.2;
saturn.core.molecule.MoleculeConstants.tChainMW = 304.2;
saturn.core.molecule.MoleculeConstants.gChainMW = 329.2;
saturn.core.molecule.MoleculeConstants.cChainMW = 289.2;
saturn.core.molecule.MoleculeConstants.O2H = 18.02;
saturn.core.molecule.MoleculeConstants.OH = 17.01;
saturn.core.molecule.MoleculeConstants.PO3 = 78.97;
saturn.core.molecule.MoleculeSetRegistry.defaultRegistry = new saturn.core.molecule.MoleculeSetRegistry();
saturn.db.DefaultProvider.r_date = new EReg("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.000Z","");
saturn.db.mapping.SQLiteMapping.models = (function($this) {
	var $r;
	var _g = new haxe.ds.StringMap();
	{
		var value;
		var _g1 = new haxe.ds.StringMap();
		var value1;
		var _g2 = new haxe.ds.StringMap();
		if(__map_reserved.constructId != null) _g2.setReserved("constructId","CONSTRUCT_ID"); else _g2.h["constructId"] = "CONSTRUCT_ID";
		if(__map_reserved.id != null) _g2.setReserved("id","PKEY"); else _g2.h["id"] = "PKEY";
		if(__map_reserved.proteinSeq != null) _g2.setReserved("proteinSeq","CONSTRUCTPROTSEQ"); else _g2.h["proteinSeq"] = "CONSTRUCTPROTSEQ";
		if(__map_reserved.proteinSeqNoTag != null) _g2.setReserved("proteinSeqNoTag","CONSTRUCTPROTSEQNOTAG"); else _g2.h["proteinSeqNoTag"] = "CONSTRUCTPROTSEQNOTAG";
		if(__map_reserved.dnaSeq != null) _g2.setReserved("dnaSeq","CONSTRUCTDNASEQ"); else _g2.h["dnaSeq"] = "CONSTRUCTDNASEQ";
		if(__map_reserved.docId != null) _g2.setReserved("docId","ELNEXP"); else _g2.h["docId"] = "ELNEXP";
		if(__map_reserved.vectorId != null) _g2.setReserved("vectorId","SGCVECTOR_PKEY"); else _g2.h["vectorId"] = "SGCVECTOR_PKEY";
		if(__map_reserved.alleleId != null) _g2.setReserved("alleleId","SGCALLELE_PKEY"); else _g2.h["alleleId"] = "SGCALLELE_PKEY";
		if(__map_reserved.res1Id != null) _g2.setReserved("res1Id","SGCRESTRICTENZ1_PKEY"); else _g2.h["res1Id"] = "SGCRESTRICTENZ1_PKEY";
		if(__map_reserved.res2Id != null) _g2.setReserved("res2Id","SGCRESTRICTENZ2_PKEY"); else _g2.h["res2Id"] = "SGCRESTRICTENZ2_PKEY";
		if(__map_reserved.constructPlateId != null) _g2.setReserved("constructPlateId","SGCCONSTRUCTPLATE_PKEY"); else _g2.h["constructPlateId"] = "SGCCONSTRUCTPLATE_PKEY";
		if(__map_reserved.wellId != null) _g2.setReserved("wellId","WELLID"); else _g2.h["wellId"] = "WELLID";
		if(__map_reserved.expectedMass != null) _g2.setReserved("expectedMass","EXPECTEDMASS"); else _g2.h["expectedMass"] = "EXPECTEDMASS";
		if(__map_reserved.expectedMassNoTag != null) _g2.setReserved("expectedMassNoTag","EXPETCEDMASSNOTAG"); else _g2.h["expectedMassNoTag"] = "EXPETCEDMASSNOTAG";
		if(__map_reserved.status != null) _g2.setReserved("status","STATUS"); else _g2.h["status"] = "STATUS";
		if(__map_reserved.location != null) _g2.setReserved("location","SGCLOCATION"); else _g2.h["location"] = "SGCLOCATION";
		if(__map_reserved.elnId != null) _g2.setReserved("elnId","ELNEXP"); else _g2.h["elnId"] = "ELNEXP";
		if(__map_reserved.constructComments != null) _g2.setReserved("constructComments","CONSTRUCTCOMMENTS"); else _g2.h["constructComments"] = "CONSTRUCTCOMMENTS";
		value1 = _g2;
		if(__map_reserved.fields != null) _g1.setReserved("fields",value1); else _g1.h["fields"] = value1;
		var value2;
		var _g3 = new haxe.ds.StringMap();
		if(__map_reserved.constructId != null) _g3.setReserved("constructId",false); else _g3.h["constructId"] = false;
		if(__map_reserved.id != null) _g3.setReserved("id",true); else _g3.h["id"] = true;
		value2 = _g3;
		if(__map_reserved.indexes != null) _g1.setReserved("indexes",value2); else _g1.h["indexes"] = value2;
		var value3;
		var _g4 = new haxe.ds.StringMap();
		if(__map_reserved["Construct ID"] != null) _g4.setReserved("Construct ID","constructId"); else _g4.h["Construct ID"] = "constructId";
		if(__map_reserved["Construct Plate"] != null) _g4.setReserved("Construct Plate","constructPlate.plateName"); else _g4.h["Construct Plate"] = "constructPlate.plateName";
		if(__map_reserved["Well ID"] != null) _g4.setReserved("Well ID","wellId"); else _g4.h["Well ID"] = "wellId";
		if(__map_reserved["Vector ID"] != null) _g4.setReserved("Vector ID","vector.vectorId"); else _g4.h["Vector ID"] = "vector.vectorId";
		if(__map_reserved["Allele ID"] != null) _g4.setReserved("Allele ID","allele.alleleId"); else _g4.h["Allele ID"] = "allele.alleleId";
		if(__map_reserved.Status != null) _g4.setReserved("Status","status"); else _g4.h["Status"] = "status";
		if(__map_reserved["Protein Sequence"] != null) _g4.setReserved("Protein Sequence","proteinSeq"); else _g4.h["Protein Sequence"] = "proteinSeq";
		if(__map_reserved["Expected Mass"] != null) _g4.setReserved("Expected Mass","expectedMass"); else _g4.h["Expected Mass"] = "expectedMass";
		if(__map_reserved["Restriction Site 1"] != null) _g4.setReserved("Restriction Site 1","res1.enzymeName"); else _g4.h["Restriction Site 1"] = "res1.enzymeName";
		if(__map_reserved["Restriction Site 2"] != null) _g4.setReserved("Restriction Site 2","res2.enzymeName"); else _g4.h["Restriction Site 2"] = "res2.enzymeName";
		if(__map_reserved["Protein Sequence (No Tag)"] != null) _g4.setReserved("Protein Sequence (No Tag)","proteinSeqNoTag"); else _g4.h["Protein Sequence (No Tag)"] = "proteinSeqNoTag";
		if(__map_reserved["Expected Mass (No Tag)"] != null) _g4.setReserved("Expected Mass (No Tag)","expectedMassNoTag"); else _g4.h["Expected Mass (No Tag)"] = "expectedMassNoTag";
		if(__map_reserved["Construct DNA Sequence"] != null) _g4.setReserved("Construct DNA Sequence","dnaSeq"); else _g4.h["Construct DNA Sequence"] = "dnaSeq";
		if(__map_reserved.Location != null) _g4.setReserved("Location","location"); else _g4.h["Location"] = "location";
		if(__map_reserved["ELN ID"] != null) _g4.setReserved("ELN ID","elnId"); else _g4.h["ELN ID"] = "elnId";
		if(__map_reserved["Construct Comments"] != null) _g4.setReserved("Construct Comments","constructComments"); else _g4.h["Construct Comments"] = "constructComments";
		if(__map_reserved.__HIDDEN__PKEY__ != null) _g4.setReserved("__HIDDEN__PKEY__","id"); else _g4.h["__HIDDEN__PKEY__"] = "id";
		value3 = _g4;
		if(__map_reserved.model != null) _g1.setReserved("model",value3); else _g1.h["model"] = value3;
		var value4;
		var _g5 = new haxe.ds.StringMap();
		var value5;
		var _g6 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g6.setReserved("field","alleleId"); else _g6.h["field"] = "alleleId";
		if(__map_reserved["class"] != null) _g6.setReserved("class","saturn.core.domain.SgcAllele"); else _g6.h["class"] = "saturn.core.domain.SgcAllele";
		if(__map_reserved.fk_field != null) _g6.setReserved("fk_field","id"); else _g6.h["fk_field"] = "id";
		value5 = _g6;
		_g5.set("allele",value5);
		var value6;
		var _g7 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g7.setReserved("field","vectorId"); else _g7.h["field"] = "vectorId";
		if(__map_reserved["class"] != null) _g7.setReserved("class","saturn.core.domain.SgcVector"); else _g7.h["class"] = "saturn.core.domain.SgcVector";
		if(__map_reserved.fk_field != null) _g7.setReserved("fk_field","Id"); else _g7.h["fk_field"] = "Id";
		value6 = _g7;
		_g5.set("vector",value6);
		var value7;
		var _g8 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g8.setReserved("field","res1Id"); else _g8.h["field"] = "res1Id";
		if(__map_reserved["class"] != null) _g8.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g8.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g8.setReserved("fk_field","id"); else _g8.h["fk_field"] = "id";
		value7 = _g8;
		_g5.set("res1",value7);
		var value8;
		var _g9 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g9.setReserved("field","res2Id"); else _g9.h["field"] = "res2Id";
		if(__map_reserved["class"] != null) _g9.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g9.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g9.setReserved("fk_field","id"); else _g9.h["fk_field"] = "id";
		value8 = _g9;
		_g5.set("res2",value8);
		var value9;
		var _g10 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g10.setReserved("field","constructPlateId"); else _g10.h["field"] = "constructPlateId";
		if(__map_reserved["class"] != null) _g10.setReserved("class","saturn.core.domain.SgcConstructPlate"); else _g10.h["class"] = "saturn.core.domain.SgcConstructPlate";
		if(__map_reserved.fk_field != null) _g10.setReserved("fk_field","id"); else _g10.h["fk_field"] = "id";
		value9 = _g10;
		_g5.set("constructPlate",value9);
		value4 = _g5;
		if(__map_reserved["fields.synthetic"] != null) _g1.setReserved("fields.synthetic",value4); else _g1.h["fields.synthetic"] = value4;
		var value10;
		var _g11 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g11.setReserved("schema","SGC"); else _g11.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g11.setReserved("name","CONSTRUCT"); else _g11.h["name"] = "CONSTRUCT";
		value10 = _g11;
		if(__map_reserved.table_info != null) _g1.setReserved("table_info",value10); else _g1.h["table_info"] = value10;
		value = _g1;
		if(__map_reserved["saturn.core.domain.SgcConstruct"] != null) _g.setReserved("saturn.core.domain.SgcConstruct",value); else _g.h["saturn.core.domain.SgcConstruct"] = value;
	}
	{
		var value11;
		var _g12 = new haxe.ds.StringMap();
		var value12;
		var _g13 = new haxe.ds.StringMap();
		if(__map_reserved.alleleId != null) _g13.setReserved("alleleId","ALLELE_ID"); else _g13.h["alleleId"] = "ALLELE_ID";
		if(__map_reserved.allelePlateId != null) _g13.setReserved("allelePlateId","SGCPLATE_PKEY"); else _g13.h["allelePlateId"] = "SGCPLATE_PKEY";
		if(__map_reserved.id != null) _g13.setReserved("id","PKEY"); else _g13.h["id"] = "PKEY";
		if(__map_reserved.entryCloneId != null) _g13.setReserved("entryCloneId","SGCENTRYCLONE_PKEY"); else _g13.h["entryCloneId"] = "SGCENTRYCLONE_PKEY";
		if(__map_reserved.forwardPrimerId != null) _g13.setReserved("forwardPrimerId","SGCPRIMER5_PKEY"); else _g13.h["forwardPrimerId"] = "SGCPRIMER5_PKEY";
		if(__map_reserved.reversePrimerId != null) _g13.setReserved("reversePrimerId","SGCPRIMER3_PKEY"); else _g13.h["reversePrimerId"] = "SGCPRIMER3_PKEY";
		if(__map_reserved.dnaSeq != null) _g13.setReserved("dnaSeq","ALLELESEQUENCERAW"); else _g13.h["dnaSeq"] = "ALLELESEQUENCERAW";
		if(__map_reserved.proteinSeq != null) _g13.setReserved("proteinSeq","ALLELEPROTSEQ"); else _g13.h["proteinSeq"] = "ALLELEPROTSEQ";
		if(__map_reserved.status != null) _g13.setReserved("status","ALLELE_STATUS"); else _g13.h["status"] = "ALLELE_STATUS";
		if(__map_reserved.location != null) _g13.setReserved("location","SGCLOCATION"); else _g13.h["location"] = "SGCLOCATION";
		if(__map_reserved.comments != null) _g13.setReserved("comments","ALLELECOMMENTS"); else _g13.h["comments"] = "ALLELECOMMENTS";
		if(__map_reserved.elnId != null) _g13.setReserved("elnId","ELNEXP"); else _g13.h["elnId"] = "ELNEXP";
		if(__map_reserved.dateStamp != null) _g13.setReserved("dateStamp","DATESTAMP"); else _g13.h["dateStamp"] = "DATESTAMP";
		if(__map_reserved.person != null) _g13.setReserved("person","PERSON"); else _g13.h["person"] = "PERSON";
		if(__map_reserved.plateWell != null) _g13.setReserved("plateWell","PLATEWELL"); else _g13.h["plateWell"] = "PLATEWELL";
		if(__map_reserved.dnaSeqLen != null) _g13.setReserved("dnaSeqLen","ALLELESEQLENGTH"); else _g13.h["dnaSeqLen"] = "ALLELESEQLENGTH";
		if(__map_reserved.complex != null) _g13.setReserved("complex","COMPLEX"); else _g13.h["complex"] = "COMPLEX";
		if(__map_reserved.domainSummary != null) _g13.setReserved("domainSummary","DOMAINSUMMARY"); else _g13.h["domainSummary"] = "DOMAINSUMMARY";
		if(__map_reserved.domainStartDelta != null) _g13.setReserved("domainStartDelta","DOMAINSTARTDELTA"); else _g13.h["domainStartDelta"] = "DOMAINSTARTDELTA";
		if(__map_reserved.domainStopDelta != null) _g13.setReserved("domainStopDelta","DOMAINSTOPDELTA"); else _g13.h["domainStopDelta"] = "DOMAINSTOPDELTA";
		if(__map_reserved.containsPharmaDomain != null) _g13.setReserved("containsPharmaDomain","CONTAINSPHARMADOMAIN"); else _g13.h["containsPharmaDomain"] = "CONTAINSPHARMADOMAIN";
		if(__map_reserved.domainSummaryLong != null) _g13.setReserved("domainSummaryLong","DOMAINSUMMARYLONG"); else _g13.h["domainSummaryLong"] = "DOMAINSUMMARYLONG";
		if(__map_reserved.impPI != null) _g13.setReserved("impPI","IMPPI"); else _g13.h["impPI"] = "IMPPI";
		value12 = _g13;
		if(__map_reserved.fields != null) _g12.setReserved("fields",value12); else _g12.h["fields"] = value12;
		var value13;
		var _g14 = new haxe.ds.StringMap();
		if(__map_reserved.status != null) _g14.setReserved("status","In process"); else _g14.h["status"] = "In process";
		value13 = _g14;
		if(__map_reserved.defaults != null) _g12.setReserved("defaults",value13); else _g12.h["defaults"] = value13;
		var value14;
		var _g15 = new haxe.ds.StringMap();
		if(__map_reserved["Allele ID"] != null) _g15.setReserved("Allele ID","alleleId"); else _g15.h["Allele ID"] = "alleleId";
		if(__map_reserved.Plate != null) _g15.setReserved("Plate","plate.plateName"); else _g15.h["Plate"] = "plate.plateName";
		if(__map_reserved["Entry Clone ID"] != null) _g15.setReserved("Entry Clone ID","entryClone.entryCloneId"); else _g15.h["Entry Clone ID"] = "entryClone.entryCloneId";
		if(__map_reserved["Forward Primer ID"] != null) _g15.setReserved("Forward Primer ID","forwardPrimer.primerId"); else _g15.h["Forward Primer ID"] = "forwardPrimer.primerId";
		if(__map_reserved["Reverse Primer ID"] != null) _g15.setReserved("Reverse Primer ID","reversePrimer.primerId"); else _g15.h["Reverse Primer ID"] = "reversePrimer.primerId";
		if(__map_reserved["DNA Sequence"] != null) _g15.setReserved("DNA Sequence","dnaSeq"); else _g15.h["DNA Sequence"] = "dnaSeq";
		if(__map_reserved["Protein Sequence"] != null) _g15.setReserved("Protein Sequence","proteinSeq"); else _g15.h["Protein Sequence"] = "proteinSeq";
		if(__map_reserved.Status != null) _g15.setReserved("Status","status"); else _g15.h["Status"] = "status";
		if(__map_reserved.Location != null) _g15.setReserved("Location","location"); else _g15.h["Location"] = "location";
		if(__map_reserved.Comments != null) _g15.setReserved("Comments","comments"); else _g15.h["Comments"] = "comments";
		if(__map_reserved["ELN ID"] != null) _g15.setReserved("ELN ID","elnId"); else _g15.h["ELN ID"] = "elnId";
		if(__map_reserved["Date Record"] != null) _g15.setReserved("Date Record","dateStamp"); else _g15.h["Date Record"] = "dateStamp";
		if(__map_reserved.Person != null) _g15.setReserved("Person","person"); else _g15.h["Person"] = "person";
		if(__map_reserved["Plate Well"] != null) _g15.setReserved("Plate Well","plateWell"); else _g15.h["Plate Well"] = "plateWell";
		if(__map_reserved["DNA Length"] != null) _g15.setReserved("DNA Length","dnaSeqLen"); else _g15.h["DNA Length"] = "dnaSeqLen";
		if(__map_reserved.Complex != null) _g15.setReserved("Complex","complex"); else _g15.h["Complex"] = "complex";
		if(__map_reserved["Domain Summary"] != null) _g15.setReserved("Domain Summary","domainSummary"); else _g15.h["Domain Summary"] = "domainSummary";
		if(__map_reserved["Domain  Start Delta"] != null) _g15.setReserved("Domain  Start Delta","domainStartDelta"); else _g15.h["Domain  Start Delta"] = "domainStartDelta";
		if(__map_reserved["Domain Stop Delta"] != null) _g15.setReserved("Domain Stop Delta","domainStopDelta"); else _g15.h["Domain Stop Delta"] = "domainStopDelta";
		if(__map_reserved["Contains Pharma Domain"] != null) _g15.setReserved("Contains Pharma Domain","containsPharmaDomain"); else _g15.h["Contains Pharma Domain"] = "containsPharmaDomain";
		if(__map_reserved["Domain Summary Long"] != null) _g15.setReserved("Domain Summary Long","domainSummaryLong"); else _g15.h["Domain Summary Long"] = "domainSummaryLong";
		if(__map_reserved["IMP PI"] != null) _g15.setReserved("IMP PI","impPI"); else _g15.h["IMP PI"] = "impPI";
		if(__map_reserved.__HIDDEN__PKEY__ != null) _g15.setReserved("__HIDDEN__PKEY__","id"); else _g15.h["__HIDDEN__PKEY__"] = "id";
		value14 = _g15;
		if(__map_reserved.model != null) _g12.setReserved("model",value14); else _g12.h["model"] = value14;
		var value15;
		var _g16 = new haxe.ds.StringMap();
		if(__map_reserved.alleleId != null) _g16.setReserved("alleleId",false); else _g16.h["alleleId"] = false;
		if(__map_reserved.id != null) _g16.setReserved("id",true); else _g16.h["id"] = true;
		value15 = _g16;
		if(__map_reserved.indexes != null) _g12.setReserved("indexes",value15); else _g12.h["indexes"] = value15;
		var value16;
		var _g17 = new haxe.ds.StringMap();
		var value17;
		var _g18 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g18.setReserved("field","entryCloneId"); else _g18.h["field"] = "entryCloneId";
		if(__map_reserved["class"] != null) _g18.setReserved("class","saturn.core.domain.SgcEntryClone"); else _g18.h["class"] = "saturn.core.domain.SgcEntryClone";
		if(__map_reserved.fk_field != null) _g18.setReserved("fk_field","id"); else _g18.h["fk_field"] = "id";
		value17 = _g18;
		_g17.set("entryClone",value17);
		var value18;
		var _g19 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g19.setReserved("field","forwardPrimerId"); else _g19.h["field"] = "forwardPrimerId";
		if(__map_reserved["class"] != null) _g19.setReserved("class","saturn.core.domain.SgcForwardPrimer"); else _g19.h["class"] = "saturn.core.domain.SgcForwardPrimer";
		if(__map_reserved.fk_field != null) _g19.setReserved("fk_field","id"); else _g19.h["fk_field"] = "id";
		value18 = _g19;
		_g17.set("forwardPrimer",value18);
		var value19;
		var _g20 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g20.setReserved("field","reversePrimerId"); else _g20.h["field"] = "reversePrimerId";
		if(__map_reserved["class"] != null) _g20.setReserved("class","saturn.core.domain.SgcReversePrimer"); else _g20.h["class"] = "saturn.core.domain.SgcReversePrimer";
		if(__map_reserved.fk_field != null) _g20.setReserved("fk_field","id"); else _g20.h["fk_field"] = "id";
		value19 = _g20;
		_g17.set("reversePrimer",value19);
		var value20;
		var _g21 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g21.setReserved("field","allelePlateId"); else _g21.h["field"] = "allelePlateId";
		if(__map_reserved["class"] != null) _g21.setReserved("class","saturn.core.domain.SgcAllelePlate"); else _g21.h["class"] = "saturn.core.domain.SgcAllelePlate";
		if(__map_reserved.fk_field != null) _g21.setReserved("fk_field","id"); else _g21.h["fk_field"] = "id";
		value20 = _g21;
		_g17.set("plate",value20);
		value16 = _g17;
		if(__map_reserved["fields.synthetic"] != null) _g12.setReserved("fields.synthetic",value16); else _g12.h["fields.synthetic"] = value16;
		var value21;
		var _g22 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g22.setReserved("schema","SGC"); else _g22.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g22.setReserved("name","ALLELE"); else _g22.h["name"] = "ALLELE";
		value21 = _g22;
		if(__map_reserved.table_info != null) _g12.setReserved("table_info",value21); else _g12.h["table_info"] = value21;
		value11 = _g12;
		if(__map_reserved["saturn.core.domain.SgcAllele"] != null) _g.setReserved("saturn.core.domain.SgcAllele",value11); else _g.h["saturn.core.domain.SgcAllele"] = value11;
	}
	{
		var value22;
		var _g23 = new haxe.ds.StringMap();
		var value23;
		var _g24 = new haxe.ds.StringMap();
		if(__map_reserved.enzymeName != null) _g24.setReserved("enzymeName","RESTRICTION_ENZYME_NAME"); else _g24.h["enzymeName"] = "RESTRICTION_ENZYME_NAME";
		if(__map_reserved.cutSequence != null) _g24.setReserved("cutSequence","RESTRICTION_ENZYME_SEQUENCERAW"); else _g24.h["cutSequence"] = "RESTRICTION_ENZYME_SEQUENCERAW";
		if(__map_reserved.id != null) _g24.setReserved("id","PKEY"); else _g24.h["id"] = "PKEY";
		value23 = _g24;
		if(__map_reserved.fields != null) _g23.setReserved("fields",value23); else _g23.h["fields"] = value23;
		var value24;
		var _g25 = new haxe.ds.StringMap();
		if(__map_reserved.enzymeName != null) _g25.setReserved("enzymeName",false); else _g25.h["enzymeName"] = false;
		if(__map_reserved.id != null) _g25.setReserved("id",true); else _g25.h["id"] = true;
		value24 = _g25;
		if(__map_reserved.indexes != null) _g23.setReserved("indexes",value24); else _g23.h["indexes"] = value24;
		var value25;
		var _g26 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g26.setReserved("schema","SGC"); else _g26.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g26.setReserved("name","RESTRICTION_ENZYME"); else _g26.h["name"] = "RESTRICTION_ENZYME";
		value25 = _g26;
		if(__map_reserved.table_info != null) _g23.setReserved("table_info",value25); else _g23.h["table_info"] = value25;
		value22 = _g23;
		if(__map_reserved["saturn.core.domain.SgcRestrictionSite"] != null) _g.setReserved("saturn.core.domain.SgcRestrictionSite",value22); else _g.h["saturn.core.domain.SgcRestrictionSite"] = value22;
	}
	{
		var value26;
		var _g27 = new haxe.ds.StringMap();
		var value27;
		var _g28 = new haxe.ds.StringMap();
		if(__map_reserved.vectorId != null) _g28.setReserved("vectorId","VECTOR_NAME"); else _g28.h["vectorId"] = "VECTOR_NAME";
		if(__map_reserved.Id != null) _g28.setReserved("Id","PKEY"); else _g28.h["Id"] = "PKEY";
		if(__map_reserved.vectorSequence != null) _g28.setReserved("vectorSequence","VECTORSEQUENCERAW"); else _g28.h["vectorSequence"] = "VECTORSEQUENCERAW";
		if(__map_reserved.vectorComments != null) _g28.setReserved("vectorComments","VECTORCOMMENTS"); else _g28.h["vectorComments"] = "VECTORCOMMENTS";
		if(__map_reserved.proteaseName != null) _g28.setReserved("proteaseName","PROTEASE_NAME"); else _g28.h["proteaseName"] = "PROTEASE_NAME";
		if(__map_reserved.proteaseCutSequence != null) _g28.setReserved("proteaseCutSequence","PROTEASE_CUTSEQUENCE"); else _g28.h["proteaseCutSequence"] = "PROTEASE_CUTSEQUENCE";
		if(__map_reserved.proteaseProduct != null) _g28.setReserved("proteaseProduct","PROTEASE_PRODUCT"); else _g28.h["proteaseProduct"] = "PROTEASE_PRODUCT";
		if(__map_reserved.antibiotic != null) _g28.setReserved("antibiotic","ANTIBIOTIC"); else _g28.h["antibiotic"] = "ANTIBIOTIC";
		if(__map_reserved.organism != null) _g28.setReserved("organism","ORGANISM"); else _g28.h["organism"] = "ORGANISM";
		if(__map_reserved.res1Id != null) _g28.setReserved("res1Id","SGCRESTRICTENZ1_PKEY"); else _g28.h["res1Id"] = "SGCRESTRICTENZ1_PKEY";
		if(__map_reserved.res2Id != null) _g28.setReserved("res2Id","SGCRESTRICTENZ2_PKEY"); else _g28.h["res2Id"] = "SGCRESTRICTENZ2_PKEY";
		value27 = _g28;
		if(__map_reserved.fields != null) _g27.setReserved("fields",value27); else _g27.h["fields"] = value27;
		var value28;
		var _g29 = new haxe.ds.StringMap();
		if(__map_reserved.vectorId != null) _g29.setReserved("vectorId",false); else _g29.h["vectorId"] = false;
		if(__map_reserved.Id != null) _g29.setReserved("Id",true); else _g29.h["Id"] = true;
		value28 = _g29;
		if(__map_reserved.indexes != null) _g27.setReserved("indexes",value28); else _g27.h["indexes"] = value28;
		var value29;
		var _g30 = new haxe.ds.StringMap();
		var value30;
		var _g31 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g31.setReserved("field","res1Id"); else _g31.h["field"] = "res1Id";
		if(__map_reserved["class"] != null) _g31.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g31.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g31.setReserved("fk_field","id"); else _g31.h["fk_field"] = "id";
		value30 = _g31;
		_g30.set("res1",value30);
		var value31;
		var _g32 = new haxe.ds.StringMap();
		if(__map_reserved.field != null) _g32.setReserved("field","res2Id"); else _g32.h["field"] = "res2Id";
		if(__map_reserved["class"] != null) _g32.setReserved("class","saturn.core.domain.SgcRestrictionSite"); else _g32.h["class"] = "saturn.core.domain.SgcRestrictionSite";
		if(__map_reserved.fk_field != null) _g32.setReserved("fk_field","id"); else _g32.h["fk_field"] = "id";
		value31 = _g32;
		_g30.set("res2",value31);
		value29 = _g30;
		if(__map_reserved["fields.synthetic"] != null) _g27.setReserved("fields.synthetic",value29); else _g27.h["fields.synthetic"] = value29;
		var value32;
		var _g33 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g33.setReserved("schema","SGC"); else _g33.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g33.setReserved("name","VECTOR"); else _g33.h["name"] = "VECTOR";
		value32 = _g33;
		if(__map_reserved.table_info != null) _g27.setReserved("table_info",value32); else _g27.h["table_info"] = value32;
		value26 = _g27;
		if(__map_reserved["saturn.core.domain.SgcVector"] != null) _g.setReserved("saturn.core.domain.SgcVector",value26); else _g.h["saturn.core.domain.SgcVector"] = value26;
	}
	{
		var value33;
		var _g34 = new haxe.ds.StringMap();
		var value34;
		var _g35 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g35.setReserved("primerId","PRIMERNAME"); else _g35.h["primerId"] = "PRIMERNAME";
		if(__map_reserved.id != null) _g35.setReserved("id","PKEY"); else _g35.h["id"] = "PKEY";
		if(__map_reserved.dnaSequence != null) _g35.setReserved("dnaSequence","PRIMERRAWSEQUENCE"); else _g35.h["dnaSequence"] = "PRIMERRAWSEQUENCE";
		value34 = _g35;
		if(__map_reserved.fields != null) _g34.setReserved("fields",value34); else _g34.h["fields"] = value34;
		var value35;
		var _g36 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g36.setReserved("primerId",false); else _g36.h["primerId"] = false;
		if(__map_reserved.id != null) _g36.setReserved("id",true); else _g36.h["id"] = true;
		value35 = _g36;
		if(__map_reserved.indexes != null) _g34.setReserved("indexes",value35); else _g34.h["indexes"] = value35;
		var value36;
		var _g37 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g37.setReserved("schema","SGC"); else _g37.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g37.setReserved("name","PRIMER"); else _g37.h["name"] = "PRIMER";
		value36 = _g37;
		if(__map_reserved.table_info != null) _g34.setReserved("table_info",value36); else _g34.h["table_info"] = value36;
		value33 = _g34;
		if(__map_reserved["saturn.core.domain.SgcForwardPrimer"] != null) _g.setReserved("saturn.core.domain.SgcForwardPrimer",value33); else _g.h["saturn.core.domain.SgcForwardPrimer"] = value33;
	}
	{
		var value37;
		var _g38 = new haxe.ds.StringMap();
		var value38;
		var _g39 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g39.setReserved("primerId","PRIMERNAME"); else _g39.h["primerId"] = "PRIMERNAME";
		if(__map_reserved.id != null) _g39.setReserved("id","PKEY"); else _g39.h["id"] = "PKEY";
		if(__map_reserved.dnaSequence != null) _g39.setReserved("dnaSequence","PRIMERRAWSEQUENCE"); else _g39.h["dnaSequence"] = "PRIMERRAWSEQUENCE";
		value38 = _g39;
		if(__map_reserved.fields != null) _g38.setReserved("fields",value38); else _g38.h["fields"] = value38;
		var value39;
		var _g40 = new haxe.ds.StringMap();
		if(__map_reserved.primerId != null) _g40.setReserved("primerId",false); else _g40.h["primerId"] = false;
		if(__map_reserved.id != null) _g40.setReserved("id",true); else _g40.h["id"] = true;
		value39 = _g40;
		if(__map_reserved.indexes != null) _g38.setReserved("indexes",value39); else _g38.h["indexes"] = value39;
		var value40;
		var _g41 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g41.setReserved("schema","SGC"); else _g41.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g41.setReserved("name","PRIMERREV"); else _g41.h["name"] = "PRIMERREV";
		value40 = _g41;
		if(__map_reserved.table_info != null) _g38.setReserved("table_info",value40); else _g38.h["table_info"] = value40;
		value37 = _g38;
		if(__map_reserved["saturn.core.domain.SgcReversePrimer"] != null) _g.setReserved("saturn.core.domain.SgcReversePrimer",value37); else _g.h["saturn.core.domain.SgcReversePrimer"] = value37;
	}
	{
		var value41;
		var _g42 = new haxe.ds.StringMap();
		var value42;
		var _g43 = new haxe.ds.StringMap();
		if(__map_reserved.sequence != null) _g43.setReserved("sequence","SEQ"); else _g43.h["sequence"] = "SEQ";
		if(__map_reserved.id != null) _g43.setReserved("id","PKEY"); else _g43.h["id"] = "PKEY";
		if(__map_reserved.type != null) _g43.setReserved("type","SEQTYPE"); else _g43.h["type"] = "SEQTYPE";
		if(__map_reserved.version != null) _g43.setReserved("version","TARGETVERSION"); else _g43.h["version"] = "TARGETVERSION";
		if(__map_reserved.targetId != null) _g43.setReserved("targetId","SGCTARGET_PKEY"); else _g43.h["targetId"] = "SGCTARGET_PKEY";
		if(__map_reserved.crc != null) _g43.setReserved("crc","CRC"); else _g43.h["crc"] = "CRC";
		if(__map_reserved.target != null) _g43.setReserved("target","TARGET_ID"); else _g43.h["target"] = "TARGET_ID";
		value42 = _g43;
		if(__map_reserved.fields != null) _g42.setReserved("fields",value42); else _g42.h["fields"] = value42;
		var value43;
		var _g44 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g44.setReserved("id",true); else _g44.h["id"] = true;
		value43 = _g44;
		if(__map_reserved.indexes != null) _g42.setReserved("indexes",value43); else _g42.h["indexes"] = value43;
		var value44;
		var _g45 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g45.setReserved("schema",""); else _g45.h["schema"] = "";
		if(__map_reserved.name != null) _g45.setReserved("name","SEQDATA"); else _g45.h["name"] = "SEQDATA";
		value44 = _g45;
		if(__map_reserved.table_info != null) _g42.setReserved("table_info",value44); else _g42.h["table_info"] = value44;
		value41 = _g42;
		if(__map_reserved["saturn.core.domain.SgcSeqData"] != null) _g.setReserved("saturn.core.domain.SgcSeqData",value41); else _g.h["saturn.core.domain.SgcSeqData"] = value41;
	}
	{
		var value45;
		var _g46 = new haxe.ds.StringMap();
		var value46;
		var _g47 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g47.setReserved("id","PKEY"); else _g47.h["id"] = "PKEY";
		if(__map_reserved.accession != null) _g47.setReserved("accession","IDENTIFIER"); else _g47.h["accession"] = "IDENTIFIER";
		if(__map_reserved.start != null) _g47.setReserved("start","SEQSTART"); else _g47.h["start"] = "SEQSTART";
		if(__map_reserved.stop != null) _g47.setReserved("stop","SEQSTOP"); else _g47.h["stop"] = "SEQSTOP";
		if(__map_reserved.targetId != null) _g47.setReserved("targetId","SGCTARGET_PKEY"); else _g47.h["targetId"] = "SGCTARGET_PKEY";
		value46 = _g47;
		if(__map_reserved.fields != null) _g46.setReserved("fields",value46); else _g46.h["fields"] = value46;
		var value47;
		var _g48 = new haxe.ds.StringMap();
		if(__map_reserved.accession != null) _g48.setReserved("accession",false); else _g48.h["accession"] = false;
		if(__map_reserved.id != null) _g48.setReserved("id",true); else _g48.h["id"] = true;
		value47 = _g48;
		if(__map_reserved.indexes != null) _g46.setReserved("indexes",value47); else _g46.h["indexes"] = value47;
		value45 = _g46;
		if(__map_reserved["saturn.core.domain.SgcDomain"] != null) _g.setReserved("saturn.core.domain.SgcDomain",value45); else _g.h["saturn.core.domain.SgcDomain"] = value45;
	}
	{
		var value48;
		var _g49 = new haxe.ds.StringMap();
		var value49;
		var _g50 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g50.setReserved("id","PKEY"); else _g50.h["id"] = "PKEY";
		if(__map_reserved.plateName != null) _g50.setReserved("plateName","PLATENAME"); else _g50.h["plateName"] = "PLATENAME";
		if(__map_reserved.elnRef != null) _g50.setReserved("elnRef","ELNREF"); else _g50.h["elnRef"] = "ELNREF";
		value49 = _g50;
		if(__map_reserved.fields != null) _g49.setReserved("fields",value49); else _g49.h["fields"] = value49;
		var value50;
		var _g51 = new haxe.ds.StringMap();
		if(__map_reserved.plateName != null) _g51.setReserved("plateName",false); else _g51.h["plateName"] = false;
		if(__map_reserved.id != null) _g51.setReserved("id",true); else _g51.h["id"] = true;
		value50 = _g51;
		if(__map_reserved.indexes != null) _g49.setReserved("indexes",value50); else _g49.h["indexes"] = value50;
		var value51;
		var _g52 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g52.setReserved("schema","SGC"); else _g52.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g52.setReserved("name","CONSTRUCTPLATE"); else _g52.h["name"] = "CONSTRUCTPLATE";
		value51 = _g52;
		if(__map_reserved.table_info != null) _g49.setReserved("table_info",value51); else _g49.h["table_info"] = value51;
		value48 = _g49;
		if(__map_reserved["saturn.core.domain.SgcConstructPlate"] != null) _g.setReserved("saturn.core.domain.SgcConstructPlate",value48); else _g.h["saturn.core.domain.SgcConstructPlate"] = value48;
	}
	{
		var value52;
		var _g53 = new haxe.ds.StringMap();
		var value53;
		var _g54 = new haxe.ds.StringMap();
		if(__map_reserved.id != null) _g54.setReserved("id","PKEY"); else _g54.h["id"] = "PKEY";
		if(__map_reserved.plateName != null) _g54.setReserved("plateName","PLATENAME"); else _g54.h["plateName"] = "PLATENAME";
		if(__map_reserved.elnRef != null) _g54.setReserved("elnRef","ELNREF"); else _g54.h["elnRef"] = "ELNREF";
		value53 = _g54;
		if(__map_reserved.fields != null) _g53.setReserved("fields",value53); else _g53.h["fields"] = value53;
		var value54;
		var _g55 = new haxe.ds.StringMap();
		if(__map_reserved.plateName != null) _g55.setReserved("plateName",false); else _g55.h["plateName"] = false;
		if(__map_reserved.id != null) _g55.setReserved("id",true); else _g55.h["id"] = true;
		value54 = _g55;
		if(__map_reserved.indexes != null) _g53.setReserved("indexes",value54); else _g53.h["indexes"] = value54;
		var value55;
		var _g56 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g56.setReserved("schema","SGC"); else _g56.h["schema"] = "SGC";
		if(__map_reserved.name != null) _g56.setReserved("name","PLATE"); else _g56.h["name"] = "PLATE";
		value55 = _g56;
		if(__map_reserved.table_info != null) _g53.setReserved("table_info",value55); else _g53.h["table_info"] = value55;
		value52 = _g53;
		if(__map_reserved["saturn.core.domain.SgcAllelePlate"] != null) _g.setReserved("saturn.core.domain.SgcAllelePlate",value52); else _g.h["saturn.core.domain.SgcAllelePlate"] = value52;
	}
	{
		var value56;
		var _g57 = new haxe.ds.StringMap();
		var value57;
		var _g58 = new haxe.ds.StringMap();
		if(__map_reserved.targetId != null) _g58.setReserved("targetId","SEQUENCE_ID"); else _g58.h["targetId"] = "SEQUENCE_ID";
		if(__map_reserved.id != null) _g58.setReserved("id","PKEY"); else _g58.h["id"] = "PKEY";
		if(__map_reserved.dnaSeq != null) _g58.setReserved("dnaSeq","DNA_SEQ"); else _g58.h["dnaSeq"] = "DNA_SEQ";
		if(__map_reserved.proteinSeq != null) _g58.setReserved("proteinSeq","PROTEIN_SEQ"); else _g58.h["proteinSeq"] = "PROTEIN_SEQ";
		value57 = _g58;
		if(__map_reserved.fields != null) _g57.setReserved("fields",value57); else _g57.h["fields"] = value57;
		var value58;
		var _g59 = new haxe.ds.StringMap();
		if(__map_reserved.targetId != null) _g59.setReserved("targetId",false); else _g59.h["targetId"] = false;
		if(__map_reserved.id != null) _g59.setReserved("id",true); else _g59.h["id"] = true;
		value58 = _g59;
		if(__map_reserved.indexes != null) _g57.setReserved("indexes",value58); else _g57.h["indexes"] = value58;
		var value59;
		var _g60 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g60.setReserved("schema",""); else _g60.h["schema"] = "";
		if(__map_reserved.name != null) _g60.setReserved("name","DNA"); else _g60.h["name"] = "DNA";
		value59 = _g60;
		if(__map_reserved.table_info != null) _g57.setReserved("table_info",value59); else _g57.h["table_info"] = value59;
		var value60;
		var _g61 = new haxe.ds.StringMap();
		if(__map_reserved.ID != null) _g61.setReserved("ID","targetId"); else _g61.h["ID"] = "targetId";
		if(__map_reserved["DNA Sequence"] != null) _g61.setReserved("DNA Sequence","dnaSeq"); else _g61.h["DNA Sequence"] = "dnaSeq";
		if(__map_reserved["Protein Sequence"] != null) _g61.setReserved("Protein Sequence","proteinSeq"); else _g61.h["Protein Sequence"] = "proteinSeq";
		if(__map_reserved.__HIDDEN__PKEY__ != null) _g61.setReserved("__HIDDEN__PKEY__","id"); else _g61.h["__HIDDEN__PKEY__"] = "id";
		value60 = _g61;
		if(__map_reserved.model != null) _g57.setReserved("model",value60); else _g57.h["model"] = value60;
		var value61;
		var _g62 = new haxe.ds.StringMap();
		if(__map_reserved.polymorph_key != null) _g62.setReserved("polymorph_key","POLYMORPH_TYPE"); else _g62.h["polymorph_key"] = "POLYMORPH_TYPE";
		if(__map_reserved.value != null) _g62.setReserved("value","TARGET"); else _g62.h["value"] = "TARGET";
		value61 = _g62;
		if(__map_reserved.selector != null) _g57.setReserved("selector",value61); else _g57.h["selector"] = value61;
		var value62;
		var _g63 = new haxe.ds.StringMap();
		var value63;
		var _g64 = new haxe.ds.StringMap();
		if(__map_reserved["saturn.client.programs.DNASequenceEditor"] != null) _g64.setReserved("saturn.client.programs.DNASequenceEditor",true); else _g64.h["saturn.client.programs.DNASequenceEditor"] = true;
		if(__map_reserved["saturn.client.programs.ProteinSequenceEditor"] != null) _g64.setReserved("saturn.client.programs.ProteinSequenceEditor",true); else _g64.h["saturn.client.programs.ProteinSequenceEditor"] = true;
		value63 = _g64;
		_g63.set("canSave",value63);
		value62 = _g63;
		if(__map_reserved.options != null) _g57.setReserved("options",value62); else _g57.h["options"] = value62;
		value56 = _g57;
		if(__map_reserved["saturn.core.domain.SgcTarget"] != null) _g.setReserved("saturn.core.domain.SgcTarget",value56); else _g.h["saturn.core.domain.SgcTarget"] = value56;
	}
	{
		var value64;
		var _g65 = new haxe.ds.StringMap();
		var value65;
		var _g66 = new haxe.ds.StringMap();
		if(__map_reserved.entryCloneId != null) _g66.setReserved("entryCloneId","SEQUENCE_ID"); else _g66.h["entryCloneId"] = "SEQUENCE_ID";
		if(__map_reserved.id != null) _g66.setReserved("id","PKEY"); else _g66.h["id"] = "PKEY";
		if(__map_reserved.dnaSeq != null) _g66.setReserved("dnaSeq","DNA_SEQ"); else _g66.h["dnaSeq"] = "DNA_SEQ";
		value65 = _g66;
		if(__map_reserved.fields != null) _g65.setReserved("fields",value65); else _g65.h["fields"] = value65;
		var value66;
		var _g67 = new haxe.ds.StringMap();
		if(__map_reserved.entryCloneId != null) _g67.setReserved("entryCloneId",false); else _g67.h["entryCloneId"] = false;
		if(__map_reserved.id != null) _g67.setReserved("id",true); else _g67.h["id"] = true;
		value66 = _g67;
		if(__map_reserved.indexes != null) _g65.setReserved("indexes",value66); else _g65.h["indexes"] = value66;
		var value67;
		var _g68 = new haxe.ds.StringMap();
		if(__map_reserved.schema != null) _g68.setReserved("schema",""); else _g68.h["schema"] = "";
		if(__map_reserved.name != null) _g68.setReserved("name","DNA"); else _g68.h["name"] = "DNA";
		value67 = _g68;
		if(__map_reserved.table_info != null) _g65.setReserved("table_info",value67); else _g65.h["table_info"] = value67;
		var value68;
		var _g69 = new haxe.ds.StringMap();
		if(__map_reserved.ID != null) _g69.setReserved("ID","entryCloneId"); else _g69.h["ID"] = "entryCloneId";
		if(__map_reserved["DNA Sequence"] != null) _g69.setReserved("DNA Sequence","dnaSeq"); else _g69.h["DNA Sequence"] = "dnaSeq";
		if(__map_reserved.__HIDDEN__PKEY__ != null) _g69.setReserved("__HIDDEN__PKEY__","id"); else _g69.h["__HIDDEN__PKEY__"] = "id";
		value68 = _g69;
		if(__map_reserved.model != null) _g65.setReserved("model",value68); else _g65.h["model"] = value68;
		var value69;
		var _g70 = new haxe.ds.StringMap();
		if(__map_reserved.polymorph_key != null) _g70.setReserved("polymorph_key","POLYMORPH_TYPE"); else _g70.h["polymorph_key"] = "POLYMORPH_TYPE";
		if(__map_reserved.value != null) _g70.setReserved("value","ENTRY_CLONE"); else _g70.h["value"] = "ENTRY_CLONE";
		value69 = _g70;
		if(__map_reserved.selector != null) _g65.setReserved("selector",value69); else _g65.h["selector"] = value69;
		value64 = _g65;
		if(__map_reserved["saturn.core.domain.SgcEntryClone"] != null) _g.setReserved("saturn.core.domain.SgcEntryClone",value64); else _g.h["saturn.core.domain.SgcEntryClone"] = value64;
	}
	$r = _g;
	return $r;
}(this));
saturn.db.query_lang.SQLVisitor.injection_check = new EReg("^([A-Za-z0-9\\.])+$","");
saturn.app.SaturnClient.main();
